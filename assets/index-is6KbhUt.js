var Vee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var T4e=Vee((yUe,$C)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Gee=!1;var Jg=Array.isArray,sx=Array.from,Hee=Object.defineProperty,Pu=Object.getOwnPropertyDescriptor,X8=Object.getOwnPropertyDescriptors,Wee=Object.prototype,Yee=Array.prototype,Z0=Object.getPrototypeOf;function Xee(e){return e()}function hF(e){for(var t=0;t<e.length;t++)e[t]()}const pl=2,K8=4,Qg=8,rx=16,da=32,Zg=64,If=128,eT=256,is=512,_c=1024,Gh=2048,sl=4096,Hh=8192,Kee=16384,ax=32768,Jee=65536,Qee=1<<18,J8=1<<19,Du=Symbol("$state"),Zee=Symbol("");function Q8(e){return e===this.v}function Z8(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ox(e){return!Z8(e,this.v)}function ete(e){throw new Error("effect_in_teardown")}function tte(){throw new Error("effect_in_unowned_derived")}function nte(e){throw new Error("effect_orphan")}function ite(){throw new Error("effect_update_depth_exceeded")}function ste(e){throw new Error("props_invalid_value")}function rte(){throw new Error("state_descriptors_fixed")}function ate(){throw new Error("state_prototype_fixed")}function ote(){throw new Error("state_unsafe_local_read")}function lte(){throw new Error("state_unsafe_mutation")}function or(e){return{f:0,v:e,reactions:null,equals:Q8,version:0}}function lx(e,t=!1){var i;const n=or(e);return t||(n.equals=ox),_n!==null&&_n.l!==null&&((i=_n.l).s??(i.s=[])).push(n),n}function Un(e,t=!1){return cte(lx(e,t))}function cte(e){return on!==null&&on.f&pl&&(Wa===null?xte([e]):Wa.push(e)),e}function Ut(e,t){return on!==null&&px()&&on.f&(pl|rx)&&(Wa===null||!Wa.includes(e))&&lte(),ez(e,t)}function ez(e,t){return e.equals(t)||(e.v=t,e.version=yz(),tz(e,_c),px()&&jt!==null&&jt.f&is&&!(jt.f&da)&&(ki!==null&&ki.includes(e)?(fa(jt,_c),B1(jt)):oc===null?Mte([e]):oc.push(e))),t}function tz(e,t){var n=e.reactions;if(n!==null)for(var i=px(),s=n.length,a=0;a<s;a++){var c=n[a],d=c.f;d&_c||!i&&c===jt||(fa(c,t),d&(is|If)&&(d&pl?tz(c,Gh):B1(c)))}}const dte=1,fte=2,ute=16,hte=1,_te=2,pte=4,yte=8,gte=16,mte=1,wte=2,fs=Symbol();let bte=!1;function fu(e,t=null,n){if(typeof e!="object"||e===null||Du in e)return e;const i=Z0(e);if(i!==Wee&&i!==Yee)return e;var s=new Map,a=Jg(e),c=or(0);a&&s.set("length",or(e.length));var d;return new Proxy(e,{defineProperty(f,u,r){(!("value"in r)||r.configurable===!1||r.enumerable===!1||r.writable===!1)&&rte();var h=s.get(u);return h===void 0?(h=or(r.value),s.set(u,h)):Ut(h,fu(r.value,d)),!0},deleteProperty(f,u){var r=s.get(u);if(r===void 0)u in f&&s.set(u,or(fs));else{if(a&&typeof u=="string"){var h=s.get("length"),p=Number(u);Number.isInteger(p)&&p<h.v&&Ut(h,p)}Ut(r,fs),dP(c)}return!0},get(f,u,r){var l;if(u===Du)return e;var h=s.get(u),p=u in f;if(h===void 0&&(!p||(l=Pu(f,u))!=null&&l.writable)&&(h=or(fu(p?f[u]:fs,d)),s.set(u,h)),h!==void 0){var _=De(h);return _===fs?void 0:_}return Reflect.get(f,u,r)},getOwnPropertyDescriptor(f,u){var r=Reflect.getOwnPropertyDescriptor(f,u);if(r&&"value"in r){var h=s.get(u);h&&(r.value=De(h))}else if(r===void 0){var p=s.get(u),_=p==null?void 0:p.v;if(p!==void 0&&_!==fs)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return r},has(f,u){var _;if(u===Du)return!0;var r=s.get(u),h=r!==void 0&&r.v!==fs||Reflect.has(f,u);if(r!==void 0||jt!==null&&(!h||(_=Pu(f,u))!=null&&_.writable)){r===void 0&&(r=or(h?fu(f[u],d):fs),s.set(u,r));var p=De(r);if(p===fs)return!1}return h},set(f,u,r,h){var I;var p=s.get(u),_=u in f;if(a&&u==="length")for(var l=r;l<p.v;l+=1){var b=s.get(l+"");b!==void 0?Ut(b,fs):l in f&&(b=or(fs),s.set(l+"",b))}p===void 0?(!_||(I=Pu(f,u))!=null&&I.writable)&&(p=or(void 0),Ut(p,fu(r,d)),s.set(u,p)):(_=p.v!==fs,Ut(p,fu(r,d)));var m=Reflect.getOwnPropertyDescriptor(f,u);if(m!=null&&m.set&&m.set.call(h,r),!_){if(a&&typeof u=="string"){var E=s.get("length"),B=Number(u);Number.isInteger(B)&&B>=E.v&&Ut(E,B+1)}dP(c)}return!0},ownKeys(f){De(c);var u=Reflect.ownKeys(f).filter(p=>{var _=s.get(p);return _===void 0||_.v!==fs});for(var[r,h]of s)h.v!==fs&&!(r in f)&&u.push(r);return u},setPrototypeOf(){ate()}})}function dP(e,t=1){Ut(e,e.v+t)}var fP,nz,iz;function Tte(){if(fP===void 0){fP=window;var e=Element.prototype,t=Node.prototype;nz=Pu(t,"firstChild").get,iz=Pu(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__e=void 0,Text.prototype.__t=void 0}}function cx(e=""){return document.createTextNode(e)}function tT(e){return nz.call(e)}function v1(e){return iz.call(e)}function Sn(e){return tT(e)}function yb(e,t){{var n=tT(e);return n instanceof Comment&&n.data===""?v1(n):n}}function qi(e,t=1,n=!1){let i=e;for(;t--;)i=v1(i);return i}function vte(e){e.textContent=""}function nT(e){var t=pl|_c;jt===null?t|=If:jt.f|=J8;const n={children:null,deps:null,equals:Q8,f:t,fn:e,reactions:null,v:null,version:0,parent:jt};if(on!==null&&on.f&pl){var i=on;(i.children??(i.children=[])).push(n)}return n}function fy(e){const t=nT(e);return t.equals=ox,t}function sz(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var i=t[n];i.f&pl?dx(i):Ff(i)}}}function rz(e){var t,n=jt;Za(e.parent);try{sz(e),t=gz(e)}finally{Za(n)}return t}function az(e){var t=rz(e),n=(Fu||e.f&If)&&e.deps!==null?Gh:is;fa(e,n),e.equals(t)||(e.v=t,e.version=yz())}function dx(e){sz(e),ug(e,0),fa(e,Hh),e.v=e.children=e.deps=e.reactions=null}function oz(e){jt===null&&on===null&&nte(),on!==null&&on.f&If&&tte(),_x&&ete()}function Ete(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Wh(e,t,n,i=!0){var s=(e&Zg)!==0,a=jt,c={ctx:_n,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|_c,first:null,fn:t,last:null,next:null,parent:s?null:a,prev:null,teardown:null,transitions:null,version:0};if(n){var d=Uu;try{uP(!0),tm(c),c.f|=Kee}catch(r){throw Ff(c),r}finally{uP(d)}}else t!==null&&B1(c);var f=n&&c.deps===null&&c.first===null&&c.nodes_start===null&&c.teardown===null&&(c.f&J8)===0;if(!f&&!s&&i&&(a!==null&&Ete(c,a),on!==null&&on.f&pl)){var u=on;(u.children??(u.children=[])).push(c)}return c}function Ste(e){const t=Wh(Qg,null,!1);return fa(t,is),t.teardown=e,t}function _F(e){oz();var t=jt!==null&&(jt.f&da)!==0&&_n!==null&&!_n.m;if(t){var n=_n;(n.e??(n.e=[])).push({fn:e,effect:jt,reaction:on})}else{var i=fx(e);return i}}function Bte(e){return oz(),E1(e)}function Ite(e){const t=Wh(Zg,e,!0);return()=>{Ff(t)}}function fx(e){return Wh(K8,e,!1)}function rl(e,t){var n=_n,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=E1(()=>{e(),!i.ran&&(i.ran=!0,Ut(n.l.r2,!0),Xh(t))})}function em(){var e=_n;E1(()=>{if(De(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&is&&fa(n,Gh),Yh(n)&&tm(n),t.ran=!1}e.l.r2.v=!1}})}function E1(e){return Wh(Qg,e,!0)}function Iu(e){return S1(e)}function S1(e,t=0){return Wh(Qg|rx|t,e,!0)}function th(e,t=!0){return Wh(Qg|da,e,!0,t)}function lz(e){var t=e.teardown;if(t!==null){const n=_x,i=on;hP(!0),pc(null);try{t.call(null)}finally{hP(n),pc(i)}}}function cz(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)dx(t[n])}}function dz(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var i=n.next;Ff(n,t),n=i}}function Fte(e){for(var t=e.first;t!==null;){var n=t.next;t.f&da||Ff(t),t=n}}function Ff(e,t=!0){var n=!1;if((t||e.f&Qee)&&e.nodes_start!==null){for(var i=e.nodes_start,s=e.nodes_end;i!==null;){var a=i===s?null:v1(i);i.remove(),i=a}n=!0}cz(e),dz(e,t&&!n),ug(e,0),fa(e,Hh);var c=e.transitions;if(c!==null)for(const f of c)f.stop();lz(e);var d=e.parent;d!==null&&d.first!==null&&fz(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.parent=e.fn=e.nodes_start=e.nodes_end=null}function fz(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function iT(e,t){var n=[];ux(e,n,!0),uz(n,()=>{Ff(e),t&&t()})}function uz(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var s of e)s.out(i)}else t()}function ux(e,t,n){if(!(e.f&sl)){if(e.f^=sl,e.transitions!==null)for(const c of e.transitions)(c.is_global||n)&&t.push(c);for(var i=e.first;i!==null;){var s=i.next,a=(i.f&ax)!==0||(i.f&da)!==0;ux(i,t,a?n:!1),i=s}}}function sT(e){hz(e,!0)}function hz(e,t){if(e.f&sl){e.f^=sl,Yh(e)&&tm(e);for(var n=e.first;n!==null;){var i=n.next,s=(n.f&ax)!==0||(n.f&da)!==0;hz(n,s?t:!1),n=i}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let pF=!1,yF=[];function kte(){pF=!1;const e=yF.slice();yF=[],hF(e)}function _z(e){pF||(pF=!0,queueMicrotask(kte)),yF.push(e)}function hx(e){throw new Error("lifecycle_outside_component")}let rT=!1,Uu=!1,_x=!1;function uP(e){Uu=e}function hP(e){_x=e}let gF=[],Xy=0,on=null;function pc(e){on=e}let jt=null;function Za(e){jt=e}let Wa=null;function xte(e){Wa=e}let ki=null,Us=0,oc=null;function Mte(e){oc=e}let pz=0,Fu=!1,_n=null;function yz(){return++pz}function px(){return _n!==null&&_n.l===null}function Yh(e){var c,d;var t=e.f;if(t&_c)return!0;if(t&Gh){var n=e.deps,i=(t&If)!==0;if(n!==null){var s;if(t&eT){for(s=0;s<n.length;s++)((c=n[s]).reactions??(c.reactions=[])).push(e);e.f^=eT}for(s=0;s<n.length;s++){var a=n[s];if(Yh(a)&&az(a),i&&jt!==null&&!Fu&&!((d=a==null?void 0:a.reactions)!=null&&d.includes(e))&&(a.reactions??(a.reactions=[])).push(e),a.version>e.version)return!0}}i||fa(e,is)}return!1}function Ate(e,t,n){throw e}function gz(e){var h;var t=ki,n=Us,i=oc,s=on,a=Fu,c=Wa,d=e.f;ki=null,Us=0,oc=null,on=d&(da|Zg)?null:e,Fu=!Uu&&(d&If)!==0,Wa=null;try{var f=(0,e.fn)(),u=e.deps;if(ki!==null){var r;if(ug(e,Us),u!==null&&Us>0)for(u.length=Us+ki.length,r=0;r<ki.length;r++)u[Us+r]=ki[r];else e.deps=u=ki;if(!Fu)for(r=Us;r<u.length;r++)((h=u[r]).reactions??(h.reactions=[])).push(e)}else u!==null&&Us<u.length&&(ug(e,Us),u.length=Us);return f}finally{ki=t,Us=n,oc=i,on=s,Fu=a,Wa=c}}function Ote(e,t){let n=t.reactions;if(n!==null){var i=n.indexOf(e);if(i!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[i]=n[s],n.pop())}}n===null&&t.f&pl&&(ki===null||!ki.includes(t))&&(fa(t,Gh),t.f&(If|eT)||(t.f^=eT),ug(t,0))}function ug(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)Ote(e,n[i])}function tm(e){var t=e.f;if(!(t&Hh)){fa(e,is);var n=jt,i=_n;jt=e,_n=e.ctx;try{cz(e),t&rx?Fte(e):dz(e),lz(e);var s=gz(e);e.teardown=typeof s=="function"?s:null,e.version=pz}catch(a){Ate(a)}finally{jt=n,_n=i}}}function Nte(){Xy>1e3&&(Xy=0,ite()),Xy++}function Rte(e){var t=e.length;if(t!==0){Nte();var n=Uu;Uu=!0;try{for(var i=0;i<t;i++){var s=e[i];s.f&is||(s.f^=is);var a=[];mz(s,a),Cte(a)}}finally{Uu=n}}}function Cte(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var i=e[n];!(i.f&(Hh|sl))&&Yh(i)&&(tm(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?fz(i):i.fn=null))}}function Lte(){if(rT=!1,Xy>1001)return;const e=gF;gF=[],Rte(e),rT||(Xy=0)}function B1(e){rT||(rT=!0,queueMicrotask(Lte));for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(Zg|da)){if(!(n&is))return;t.f^=is}}gF.push(t)}function mz(e,t){var n=e.first,i=[];e:for(;n!==null;){var s=n.f,a=(s&da)!==0,c=a&&(s&is)!==0;if(!c&&!(s&sl))if(s&Qg){a?n.f^=is:Yh(n)&&tm(n);var d=n.first;if(d!==null){n=d;continue}}else s&K8&&i.push(n);var f=n.next;if(f===null){let h=n.parent;for(;h!==null;){if(e===h)break e;var u=h.next;if(u!==null){n=u;continue e}h=h.parent}}n=f}for(var r=0;r<i.length;r++)d=i[r],t.push(d),mz(d,t)}function De(e){var d;var t=e.f,n=(t&pl)!==0;if(n&&t&Hh){var i=rz(e);return dx(e),i}if(on!==null){Wa!==null&&Wa.includes(e)&&ote();var s=on.deps;ki===null&&s!==null&&s[Us]===e?Us++:ki===null?ki=[e]:ki.push(e),oc!==null&&jt!==null&&jt.f&is&&!(jt.f&da)&&oc.includes(e)&&(fa(jt,_c),B1(jt))}else if(n&&e.deps===null){var a=e,c=a.parent;c!==null&&!((d=c.deriveds)!=null&&d.includes(a))&&(c.deriveds??(c.deriveds=[])).push(a)}return n&&(a=e,Yh(a)&&az(a)),e.v}function Xh(e){const t=on;try{return on=null,e()}finally{on=t}}const Pte=~(_c|Gh|is);function fa(e,t){e.f=e.f&Pte|t}function Lc(e,t=!1,n){_n={p:_n,c:null,e:null,m:!1,s:e,x:null,l:null},t||(_n.l={s:null,u:null,r1:[],r2:or(!1)})}function Pc(e){const t=_n;if(t!==null){const c=t.e;if(c!==null){var n=jt,i=on;t.e=null;try{for(var s=0;s<c.length;s++){var a=c[s];Za(a.effect),pc(a.reaction),fx(a.fn)}}finally{Za(n),pc(i)}}_n=t.p,t.m=!0}return{}}function xn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Du in e)mF(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Du in n&&mF(n)}}}function mF(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{mF(e[i],t)}catch{}const n=Z0(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=X8(n);for(let s in i){const a=i[s].get;if(a)try{a.call(e)}catch{}}}}}const Dte=new Set,_P=new Set;function Ute(e,t,n,i){function s(a){if(i.capture||uy.call(t,a),!a.cancelBubble){var c=on,d=jt;pc(null),Za(null);try{return n.call(this,a)}finally{pc(c),Za(d)}}}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?_z(()=>{t.addEventListener(e,s,i)}):t.addEventListener(e,s,i),s}function uu(e,t,n,i,s){var a={capture:i,passive:s},c=Ute(e,t,n,a);(t===document.body||t===window||t===document)&&Ste(()=>{t.removeEventListener(e,c,a)})}function uy(e){var B;var t=this,n=t.ownerDocument,i=e.type,s=((B=e.composedPath)==null?void 0:B.call(e))||[],a=s[0]||e.target,c=0,d=e.__root;if(d){var f=s.indexOf(d);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;f<=u&&(c=f)}if(a=s[c]||e.target,a!==t){Hee(e,"currentTarget",{configurable:!0,get(){return a||n}});var r=on,h=jt;pc(null),Za(null);try{for(var p,_=[];a!==null;){var l=a.assignedSlot||a.parentNode||a.host||null;try{var b=a["__"+i];if(b!==void 0&&!a.disabled)if(Jg(b)){var[m,...E]=b;m.apply(a,[e,...E])}else b.call(a,e)}catch(I){p?_.push(I):p=I}if(e.cancelBubble||l===t||l===null)break;a=l}if(p){for(let I of _)queueMicrotask(()=>{throw I});throw p}}finally{e.__root=t,delete e.currentTarget,pc(r),Za(h)}}}function jte(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function aT(e,t){var n=jt;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function ua(e,t){var n=(t&mte)!==0,i=(t&wte)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=jte(a?e:"<!>"+e),n||(s=tT(s)));var c=i?document.importNode(s,!0):s.cloneNode(!0);if(n){var d=tT(c),f=c.lastChild;aT(d,f)}else aT(c,c);return c}}function $te(e=""){{var t=cx(e+"");return aT(t,t),t}}function pP(){var e=document.createDocumentFragment(),t=document.createComment(""),n=cx();return e.append(t,n),aT(t,n),e}function _s(e,t){e!==null&&e.before(t)}const zte=["touchstart","touchmove"];function qte(e){return zte.includes(e)}function Rd(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function Vte(e,t){return Gte(e,t)}const Kf=new Map;function Gte(e,{target:t,anchor:n,props:i={},events:s,context:a,intro:c=!0}){Tte();var d=new Set,f=h=>{for(var p=0;p<h.length;p++){var _=h[p];if(!d.has(_)){d.add(_);var l=qte(_);t.addEventListener(_,uy,{passive:l});var b=Kf.get(_);b===void 0?(document.addEventListener(_,uy,{passive:l}),Kf.set(_,1)):Kf.set(_,b+1)}}};f(sx(Dte)),_P.add(f);var u=void 0,r=Ite(()=>{var h=n??t.appendChild(cx());return th(()=>{if(a){Lc({});var p=_n;p.c=a}s&&(i.$$events=s),u=e(h,i)||{},a&&Pc()}),()=>{var l;for(var p of d){t.removeEventListener(p,uy);var _=Kf.get(p);--_===0?(document.removeEventListener(p,uy),Kf.delete(p)):Kf.set(p,_)}_P.delete(f),yP.delete(u),h!==n&&((l=h.parentNode)==null||l.removeChild(h))}});return yP.set(u,r),u}let yP=new WeakMap;function h0(e,t,n,i=null,s=!1){var a=e,c=null,d=null,f=null,u=s?ax:0;S1(()=>{f!==(f=!!t())&&(f?(c?sT(c):c=th(()=>n(a)),d&&iT(d,()=>{d=null})):(d?sT(d):i&&(d=th(()=>i(a))),c&&iT(c,()=>{c=null})))},u)}function Hte(e,t,n){var i=e,s=fs,a;S1(()=>{Z8(s,s=t())&&(a&&iT(a),a=th(()=>n(i)))})}let eB=null;function wF(e,t){return t}function Wte(e,t,n,i){for(var s=[],a=t.length,c=0;c<a;c++)ux(t[c].e,s,!0);var d=a>0&&s.length===0&&n!==null;if(d){var f=n.parentNode;vte(f),f.append(n),i.clear(),zl(e,t[0].prev,t[a-1].next)}uz(s,()=>{for(var u=0;u<a;u++){var r=t[u];d||(i.delete(r.k),zl(e,r.prev,r.next)),Ff(r.e,!d)}})}function bF(e,t,n,i,s,a=null){var c=e,d={flags:t,items:new Map,first:null},f=null,u=!1;S1(()=>{var r=n(),h=Jg(r)?r:r==null?[]:sx(r),p=h.length;u&&p===0||(u=p===0,Yte(h,d,c,s,t,i),a!==null&&(p===0?f?sT(f):f=th(()=>a(c)):f!==null&&iT(f,()=>{f=null})),n())})}function Yte(e,t,n,i,s,a){var c=e.length,d=t.items,f=t.first,u=f,r,h=null,p=[],_=[],l,b,m,E;for(E=0;E<c;E+=1){if(l=e[E],b=a(l,E),m=d.get(b),m===void 0){var B=u?u.e.nodes_start:n;h=Kte(B,t,h,h===null?t.first:h.next,l,b,E,i,s),d.set(b,h),p=[],_=[],u=h.next;continue}if(Xte(m,l,E),m.e.f&sl&&sT(m.e),m!==u){if(r!==void 0&&r.has(m)){if(p.length<_.length){var I=_[0],k;h=I.prev;var F=p[0],x=p[p.length-1];for(k=0;k<p.length;k+=1)gP(p[k],I,n);for(k=0;k<_.length;k+=1)r.delete(_[k]);zl(t,F.prev,x.next),zl(t,h,F),zl(t,x,I),u=I,h=x,E-=1,p=[],_=[]}else r.delete(m),gP(m,u,n),zl(t,m.prev,m.next),zl(t,m,h===null?t.first:h.next),zl(t,h,m),h=m;continue}for(p=[],_=[];u!==null&&u.k!==b;)u.e.f&sl||(r??(r=new Set)).add(u),_.push(u),u=u.next;if(u===null)continue;m=u}p.push(m),h=m,u=m.next}if(u!==null||r!==void 0){for(var M=r===void 0?[]:sx(r);u!==null;)u.e.f&sl||M.push(u),u=u.next;var R=M.length;if(R>0){var P=null;Wte(t,M,P,d)}}jt.first=t.first&&t.first.e,jt.last=h&&h.e}function Xte(e,t,n,i){ez(e.v,t),e.i=n}function Kte(e,t,n,i,s,a,c,d,f){var u=eB;try{var r=(f&dte)!==0,h=(f&ute)===0,p=r?h?lx(s):or(s):s,_=f&fte?or(c):c,l={i:_,v:p,k:a,a:null,e:null,prev:n,next:i};return eB=l,l.e=th(()=>d(e,p,_),bte),l.e.prev=n&&n.e,l.e.next=i&&i.e,n===null?t.first=l:(n.next=l,n.e.next=l.e),i!==null&&(i.prev=l,i.e.prev=l.e),l}finally{eB=u}}function gP(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==i;){var c=v1(a);s.before(a),a=c}}function zl(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function TF(e,t,n,i){var s=e.__attributes??(e.__attributes={});s[t]!==(s[t]=n)&&(t==="loading"&&(e[Zee]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Jte(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var mP=new Map;function Jte(e){var t=mP.get(e.nodeName);if(t)return t;mP.set(e.nodeName,t=[]);for(var n,i=Z0(e),s=Element.prototype;s!==i;){n=X8(i);for(var a in n)n[a].set&&t.push(a);i=Z0(i)}return t}function Qte(e,t,n,i,s){var a=e.__attributes??(e.__attributes={}),c=e.style,d="style-"+t;a[d]===n&&!s||(a[d]=n,c.setProperty(t,n,""))}function wP(e,t){return e===t||(e==null?void 0:e[Du])===t}function wz(e={},t,n,i){return fx(()=>{var s,a;return E1(()=>{s=a,a=[],Xh(()=>{e!==n(...a)&&(t(e,...a),s&&wP(n(...s),e)&&t(null,...s))})}),()=>{_z(()=>{a&&wP(n(...a),e)&&t(null,...a)})}}),e}function Kh(e=!1){const t=_n,n=t.l.u;if(!n)return;let i=()=>xn(t.s);if(e){let s=0,a={};const c=nT(()=>{let d=!1;const f=t.s;for(const u in f)f[u]!==a[u]&&(a[u]=f[u],d=!0);return d&&s++,s});i=()=>De(c)}n.b.length&&Bte(()=>{bP(t,i),hF(n.b)}),_F(()=>{const s=Xh(()=>n.m.map(Xee));return()=>{for(const a of s)typeof a=="function"&&a()}}),n.a.length&&_F(()=>{bP(t,i),hF(n.a)})}function bP(e,t){if(e.l.s)for(const n of e.l.s)De(n);t()}function Gr(e,t){var a;var n=(a=e.$$events)==null?void 0:a[t.type],i=Jg(n)?n.slice():n==null?[]:[n];for(var s of i)s.call(this,t)}function TP(e){for(var t=jt,n=jt;t!==null&&!(t.f&(da|Zg));)t=t.parent;try{return Za(t),e()}finally{Za(n)}}function At(e,t,n,i){var F;var s=(n&hte)!==0,a=(n&_te)!==0,c=(n&yte)!==0,d=(n&gte)!==0,f=e[t],u=(F=Pu(e,t))==null?void 0:F.set,r=i,h=!0,p=!1,_=()=>(p=!0,h&&(h=!1,d?r=Xh(i):r=i),r);f===void 0&&i!==void 0&&(u&&a&&ste(),f=_(),u&&u(f));var l;if(a)l=()=>{var x=e[t];return x===void 0?_():(h=!0,p=!1,x)};else{var b=TP(()=>(s?nT:fy)(()=>e[t]));b.f|=Jee,l=()=>{var x=De(b);return x!==void 0&&(r=void 0),x===void 0?r:x}}if(!(n&pte))return l;if(u){var m=e.$$legacy;return function(x,M){return arguments.length>0?((!a||!M||m)&&u(M?l():x),x):l()}}var E=!1,B=!1,I=lx(f),k=TP(()=>nT(()=>{var x=l(),M=De(I),R=on;return E||x===void 0&&R.f&Hh?(E=!1,B=!0,M):(B=!1,I.v=x)}));return s||(k.equals=ox),function(x,M){var R=De(k);if(arguments.length>0){const P=M?De(k):a&&c?fu(x):x;return k.equals(P)||(E=!0,Ut(I,P),p&&r!==void 0&&(r=P),De(k)),x}return R}}function I1(e){_n===null&&hx(),_n.l!==null?ene(_n).m.push(e):_F(()=>{const t=Xh(e);if(typeof t=="function")return t})}function bz(e){_n===null&&hx(),I1(()=>()=>Xh(e))}function Zte(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function yx(){const e=_n;return e===null&&hx(),(t,n,i)=>{var a;const s=(a=e.s.$$events)==null?void 0:a[t];if(s){const c=Jg(s)?s.slice():[s],d=Zte(t,n,i);for(const f of c)f.call(e.x,d);return!d.defaultPrevented}return!0}}function ene(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const tne="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(tne);var vF=function(e,t){return vF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},vF(e,t)};function Tz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vF(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var oT=function(){return oT=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},oT.apply(this,arguments)};function vz(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]]);return n}function Ez(e,t,n,i){var s=arguments.length,a=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,i);else for(var d=e.length-1;d>=0;d--)(c=e[d])&&(a=(s<3?c(a):s>3?c(t,n,a):c(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}function Sz(e,t){return function(n,i){t(n,i,e)}}function Bz(e,t,n,i,s,a){function c(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var d=i.kind,f=d==="getter"?"get":d==="setter"?"set":"value",u=!t&&e?i.static?e:e.prototype:null,r=t||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),h,p=!1,_=n.length-1;_>=0;_--){var l={};for(var b in i)l[b]=b==="access"?{}:i[b];for(var b in i.access)l.access[b]=i.access[b];l.addInitializer=function(E){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(c(E||null))};var m=(0,n[_])(d==="accessor"?{get:r.get,set:r.set}:r[f],l);if(d==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(h=c(m.get))&&(r.get=h),(h=c(m.set))&&(r.set=h),(h=c(m.init))&&s.unshift(h)}else(h=c(m))&&(d==="field"?s.unshift(h):r[f]=h)}u&&Object.defineProperty(u,i.name,r),p=!0}function Iz(e,t,n){for(var i=arguments.length>2,s=0;s<t.length;s++)n=i?t[s].call(e,n):t[s].call(e);return i?n:void 0}function Fz(e){return typeof e=="symbol"?e:"".concat(e)}function kz(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function xz(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function wt(e,t,n,i){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function d(r){try{u(i.next(r))}catch(h){c(h)}}function f(r){try{u(i.throw(r))}catch(h){c(h)}}function u(r){r.done?a(r.value):s(r.value).then(d,f)}u((i=i.apply(e,t||[])).next())})}function Mz(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(u){return function(r){return f([u,r])}}function f(u){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(n=0)),n;)try{if(i=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(r){u=[6,r],s=0}finally{i=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var F1=Object.create?function(e,t,n,i){i===void 0&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]};function Az(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&F1(t,e,n)}function lT(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gx(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),s,a=[],c;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(d){c={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(c)throw c.error}}return a}function Oz(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(gx(arguments[t]));return e}function Nz(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<n;t++)for(var a=arguments[t],c=0,d=a.length;c<d;c++,s++)i[s]=a[c];return i}function Rz(e,t,n){if(n||arguments.length===2)for(var i=0,s=t.length,a;i<s;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}function Et(e){return this instanceof Et?(this.v=e,this):new Et(e)}function hr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),s[Symbol.asyncIterator]=function(){return this},s;function c(_){return function(l){return Promise.resolve(l).then(_,h)}}function d(_,l){i[_]&&(s[_]=function(b){return new Promise(function(m,E){a.push([_,b,m,E])>1||f(_,b)})},l&&(s[_]=l(s[_])))}function f(_,l){try{u(i[_](l))}catch(b){p(a[0][3],b)}}function u(_){_.value instanceof Et?Promise.resolve(_.value.v).then(r,h):p(a[0][2],_)}function r(_){f("next",_)}function h(_){f("throw",_)}function p(_,l){_(l),a.shift(),a.length&&f(a[0][0],a[0][1])}}function ju(e){var t,n;return t={},i("next"),i("throw",function(s){throw s}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(s,a){t[s]=e[s]?function(c){return(n=!n)?{value:Et(e[s](c)),done:!1}:a?a(c):c}:a}}function al(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof lT=="function"?lT(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=e[a]&&function(c){return new Promise(function(d,f){c=e[a](c),s(d,f,c.done,c.value)})}}function s(a,c,d,f){Promise.resolve(f).then(function(u){a({value:u,done:d})},c)}}function Cz(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var nne=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function Lz(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&F1(t,e,n);return nne(t,e),t}function Pz(e){return e&&e.__esModule?e:{default:e}}function Dz(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)}function Uz(e,t,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n}function jz(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function $z(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var ine=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function zz(e){function t(a){e.error=e.hasError?new ine(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,i=0;function s(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(a).then(s,function(c){return t(c),s()})}else i|=1}catch(c){t(c)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function qz(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,s,a,c){return i?t?".jsx":".js":s&&(!a||!c)?n:s+a+"."+c.toLowerCase()+"js"}):e}const sne={__extends:Tz,__assign:oT,__rest:vz,__decorate:Ez,__param:Sz,__esDecorate:Bz,__runInitializers:Iz,__propKey:Fz,__setFunctionName:kz,__metadata:xz,__awaiter:wt,__generator:Mz,__createBinding:F1,__exportStar:Az,__values:lT,__read:gx,__spread:Oz,__spreadArrays:Nz,__spreadArray:Rz,__await:Et,__asyncGenerator:hr,__asyncDelegator:ju,__asyncValues:al,__makeTemplateObject:Cz,__importStar:Lz,__importDefault:Pz,__classPrivateFieldGet:Dz,__classPrivateFieldSet:Uz,__classPrivateFieldIn:jz,__addDisposableResource:$z,__disposeResources:zz,__rewriteRelativeImportExtension:qz},rne=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:$z,get __assign(){return oT},__asyncDelegator:ju,__asyncGenerator:hr,__asyncValues:al,__await:Et,__awaiter:wt,__classPrivateFieldGet:Dz,__classPrivateFieldIn:jz,__classPrivateFieldSet:Uz,__createBinding:F1,__decorate:Ez,__disposeResources:zz,__esDecorate:Bz,__exportStar:Az,__extends:Tz,__generator:Mz,__importDefault:Pz,__importStar:Lz,__makeTemplateObject:Cz,__metadata:xz,__param:Sz,__propKey:Fz,__read:gx,__rest:vz,__rewriteRelativeImportExtension:qz,__runInitializers:Iz,__setFunctionName:kz,__spread:Oz,__spreadArray:Rz,__spreadArrays:Nz,__values:lT,default:sne},Symbol.toStringTag,{value:"Module"})),_0=2,Hr=4,Pa=4,Vz=4,Go=new Int32Array(2),EF=new Float32Array(Go.buffer),SF=new Float64Array(Go.buffer),hy=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var cT;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(cT||(cT={}));let BF=class Gz{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new Gz(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Go[0]=this.readInt32(t),EF[0]}readFloat64(t){return Go[hy?0:1]=this.readInt32(t),Go[hy?1:0]=this.readInt32(t+4),SF[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){EF[0]=n,this.writeInt32(t,Go[0])}writeFloat64(t,n){SF[0]=n,this.writeInt32(t,Go[hy?0:1]),this.writeInt32(t+4,Go[hy?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Hr+Pa)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Pa;n++)t+=String.fromCharCode(this.readInt8(this.position_+Hr+n));return t}__offset(t,n){const i=t-this.readInt32(t);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const i=this.readInt32(t);t+=Hr;const s=this.bytes_.subarray(t,t+i);return n===cT.UTF8_BYTES?s:this.text_decoder_.decode(s)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Hr}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Pa)throw new Error("FlatBuffers: file identifier must be length "+Pa);for(let n=0;n<Pa;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Hr+n))return!1;return!0}createScalarList(t,n){const i=[];for(let s=0;s<n;++s){const a=t(s);a!==null&&i.push(a)}return i}createObjList(t,n){const i=[];for(let s=0;s<n;++s){const a=t(s);a!==null&&i.push(a.unpack())}return i}},ane=class Hz{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=BF.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<i+t+n;){const s=this.bb.capacity();this.bb=Hz.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(i)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,i){(this.force_defaults||n!==i)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,i){n!=i&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,s=BF.allocate(i);return s.setPosition(i-n),s.bytes().set(t.bytes(),i-n),s}addOffset(t){this.prep(Hr,0),this.writeInt32(this.offset()-t+Hr)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const s=2;this.addInt16(t-this.object_start);const a=(i+s)*_0;this.addInt16(a);let c=0;const d=this.space;e:for(n=0;n<this.vtables.length;n++){const f=this.bb.capacity()-this.vtables[n];if(a==this.bb.readInt16(f)){for(let u=_0;u<a;u+=_0)if(this.bb.readInt16(d+u)!=this.bb.readInt16(f+u))continue e;c=this.vtables[n];break}}return c?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,c-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,i){const s=i?Vz:0;if(n){const a=n;if(this.prep(this.minalign,Hr+Pa+s),a.length!=Pa)throw new Error("FlatBuffers: file identifier must be length "+Pa);for(let c=Pa-1;c>=0;c--)this.writeInt8(a.charCodeAt(c))}this.prep(this.minalign,Hr+s),this.addOffset(t),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const i=this.bb.capacity()-t,s=i-this.bb.readInt32(i);if(!(n<this.bb.readInt16(s)&&this.bb.readInt16(s+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,i){this.notNested(),this.vector_num_elems=n,this.prep(Hr,t*n),this.prep(i,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let i=0,s=this.space,a=this.bb.bytes();i<n.length;i++)a[s++]=n[i];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let i=0;i<t.length;++i){const s=t[i];if(s!==null)n.push(this.createObjectOffset(s));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};const one=Object.freeze(Object.defineProperty({__proto__:null,Builder:ane,ByteBuffer:BF,get Encoding(){return cT},FILE_IDENTIFIER_LENGTH:Pa,SIZEOF_INT:Hr,SIZEOF_SHORT:_0,SIZE_PREFIX_LENGTH:Vz,float32:EF,float64:SF,int32:Go,isLittleEndian:hy},Symbol.toStringTag,{value:"Module"}));function lne(e,t,n){return Math.ceil((t-e)/(3.49*n))}const cne=Float64Array,tB=Float64Array;var dne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Wz(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),n}function fne(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}var une=fne;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hne=function(e){return e!=null&&(Yz(e)||_ne(e)||!!e._isBuffer)};function Yz(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function _ne(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Yz(e.slice(0,0))}var pne=une,yne=hne,gne=typeof Float64Array<"u";function mne(e,t){return e[0]-t[0]}function wne(){var e=this.stride,t=new Array(e.length),n;for(n=0;n<t.length;++n)t[n]=[Math.abs(e[n]),n];t.sort(mne);var i=new Array(t.length);for(n=0;n<i.length;++n)i[n]=t[n][1];return i}function bne(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i=e==="generic";if(t===-1){var s="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",b=new Function(s);return b()}else if(t===0){var s="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",b=new Function("TrivialArray",s);return b(dT[e][0])}var s=["'use strict'"],a=pne(t),c=a.map(function(m){return"i"+m}),d="this.offset+"+a.map(function(m){return"this.stride["+m+"]*i"+m}).join("+"),f=a.map(function(m){return"b"+m}).join(","),u=a.map(function(m){return"c"+m}).join(",");s.push("function "+n+"(a,"+f+","+u+",d){this.data=a","this.shape=["+f+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),s.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map(function(m){return"this.shape["+m+"]"}).join("*"),"}})"),t===1?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),t<4?(s.push("function "+n+"_order(){"),t===2?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),i?s.push("return this.data.set("+d+",v)}"):s.push("return this.data["+d+"]=v}"),s.push("proto.get=function "+n+"_get("+c.join(",")+"){"),i?s.push("return this.data.get("+d+")}"):s.push("return this.data["+d+"]}"),s.push("proto.index=function "+n+"_index(",c.join(),"){return "+d+"}"),s.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+a.map(function(m){return["(typeof i",m,"!=='number'||i",m,"<0)?this.shape[",m,"]:i",m,"|0"].join("")}).join(",")+","+a.map(function(m){return"this.stride["+m+"]"}).join(",")+",this.offset)}");var r=a.map(function(m){return"a"+m+"=this.shape["+m+"]"}),h=a.map(function(m){return"c"+m+"=this.stride["+m+"]"});s.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+r.join(",")+","+h.join(","));for(var p=0;p<t;++p)s.push("if(typeof i"+p+"==='number'&&i"+p+">=0){d=i"+p+"|0;b+=c"+p+"*d;a"+p+"-=d}");s.push("return new "+n+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"c"+m}).join(",")+",b)}"),s.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+a.map(function(m){return"a"+m+"=this.shape["+m+"]"}).join(",")+","+a.map(function(m){return"b"+m+"=this.stride["+m+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var p=0;p<t;++p)s.push("if(typeof i"+p+"==='number'){d=i"+p+"|0;if(d<0){c+=b"+p+"*(a"+p+"-1);a"+p+"=ceil(-a"+p+"/d)}else{a"+p+"=ceil(a"+p+"/d)}b"+p+"*=d}");s.push("return new "+n+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"b"+m}).join(",")+",c)}");for(var _=new Array(t),l=new Array(t),p=0;p<t;++p)_[p]="a[i"+p+"]",l[p]="b[i"+p+"]";s.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(m,E){return m+"=("+m+"===undefined?"+E+":"+m+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+_.join(",")+","+l.join(",")+",this.offset)}"),s.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var p=0;p<t;++p)s.push("if(typeof i"+p+"==='number'&&i"+p+">=0){c=(c+this.stride["+p+"]*i"+p+")|0}else{a.push(this.shape["+p+"]);b.push(this.stride["+p+"])}");s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map(function(m){return"shape["+m+"]"}).join(",")+","+a.map(function(m){return"stride["+m+"]"}).join(",")+",offset)}");var b=new Function("CTOR_LIST","ORDER",s.join(`
`));return b(dT[e],wne)}function Tne(e){if(yne(e))return"buffer";if(gne)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var dT={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function vne(e,t,n,i){if(e===void 0){var u=dT.array[0];return u([])}else typeof e=="number"&&(e=[e]);t===void 0&&(t=[e.length]);var s=t.length;if(n===void 0){n=new Array(s);for(var a=s-1,c=1;a>=0;--a)n[a]=c,c*=t[a]}if(i===void 0){i=0;for(var a=0;a<s;++a)n[a]<0&&(i-=(t[a]-1)*n[a])}for(var d=Tne(e),f=dT[d];f.length<=s+1;)f.push(bne(d,f.length-1));var u=f[s+1];return u(e,t,n,i)}var Ene=vne;const Sne=Jh(Ene);var _y="n",hu="d",Id="s",fT="p",Fd="o",p0="i",Bne=Fne;function IF(e,t,n){if(n===0){for(var i=[[]],s=0;s<t.length;++s)if(!t[s])for(var a=i.length,c=0;c<a;++c){var d=i[c].slice();d.push(Id+s),i.push(d)}if(i.length===1)return"";var f=[];e==="generic"?f.push(hu,".set(",Fd,",",hu,".get(",Fd,")+"):f.push(hu,"[",Fd,"]+=");for(var s=1;s<i.length;++s){var d=i[s],u=(d.length+1)%2;s>1&&!u?f.push("+"):u&&f.push("-"),e==="generic"?f.push(hu,".get("):f.push(hu,"["),f.push(Fd,"-",d.join("-")),e==="generic"?f.push(")"):f.push("]")}return e==="generic"?f.push(");"):f.push(";"),f.join("")}t[n-1]=!0;var r=[IF(e,t,n-1),Fd,"+=",fT,n-1,";for(",p0,n-1,"=1;",p0,n-1,"<",_y,n-1,";++",p0,n-1,"){"];return t[n-1]=!1,r.push(IF(e,t,n-1),Fd,"+=",fT,n-1,";}"),r.join("")}function Ine(e,t){for(var n=["prefixSum",t.length,"d",e,"s",t.join("s")].join(""),i=["function ",n,"(arr){var ",hu,"=arr.data,",_y,"=arr.shape,",Id,"=arr.stride,",Fd,"=arr.offset,"],s=t.length,a=0;a<s;++a)i.push(_y,a,"=",_y,"[",t[a],"],");for(var a=0;a<s;++a)i.push(Id,a,"=",Id,"[",t[a],"],");for(var a=0;a<s;++a)i.push(p0,a,"=0,");for(var a=s-1;a>0;--a)i.push(fT,a,"=",Id,a,"-",_y,a-1,"*",Id,a-1,",");i.push(fT,"0=",Id,0,";");for(var c=new Array(s),a=0;a<s;++a)c[a]=!0;i.push(IF(e,c,s),"}return ",n);var d=new Function(i.join(""));return d()}var vP={};function Fne(e){var t=e.dtype+e.order.join(),n=vP[t];return n||(n=vP[t]=Ine(e.dtype,e.order)),n(e),e}const kne=Jh(Bne);var Xz={};function xne(e,t){for(var n=1,i=e.length,s=e[0],a=e[0],c=1;c<i;++c)if(a=s,s=e[c],t(s,a)){if(c===n){n++;continue}e[n++]=s}return e.length=n,e}function Mne(e){for(var t=1,n=e.length,i=e[0],s=e[0],a=1;a<n;++a,s=i)if(s=i,i=e[a],i!==s){if(a===t){t++;continue}e[t++]=i}return e.length=t,e}function Ane(e,t,n){return e.length===0?e:t?(n||e.sort(t),xne(e,t)):(n||e.sort(),Mne(e))}var One=Ane,Nne=One;function Kz(e,t,n){var i=e.length,s=t.arrayArgs.length,a=t.indexArgs.length>0,c=[],d=[],f=0,u=0,r,h;for(r=0;r<i;++r)d.push(["i",r,"=0"].join(""));for(h=0;h<s;++h)for(r=0;r<i;++r)u=f,f=e[r],r===0?d.push(["d",h,"s",r,"=t",h,"p",f].join("")):d.push(["d",h,"s",r,"=(t",h,"p",f,"-s",u,"*t",h,"p",u,")"].join(""));for(d.length>0&&c.push("var "+d.join(",")),r=i-1;r>=0;--r)f=e[r],c.push(["for(i",r,"=0;i",r,"<s",f,";++i",r,"){"].join(""));for(c.push(n),r=0;r<i;++r){for(u=f,f=e[r],h=0;h<s;++h)c.push(["p",h,"+=d",h,"s",r].join(""));a&&(r>0&&c.push(["index[",u,"]-=s",u].join("")),c.push(["++index[",f,"]"].join(""))),c.push("}")}return c.join(`
`)}function Rne(e,t,n,i){for(var s=t.length,a=n.arrayArgs.length,c=n.blockSize,d=n.indexArgs.length>0,f=[],u=0;u<a;++u)f.push(["var offset",u,"=p",u].join(""));for(var u=e;u<s;++u)f.push(["for(var j"+u+"=SS[",t[u],"]|0;j",u,">0;){"].join("")),f.push(["if(j",u,"<",c,"){"].join("")),f.push(["s",t[u],"=j",u].join("")),f.push(["j",u,"=0"].join("")),f.push(["}else{s",t[u],"=",c].join("")),f.push(["j",u,"-=",c,"}"].join("")),d&&f.push(["index[",t[u],"]=j",u].join(""));for(var u=0;u<a;++u){for(var r=["offset"+u],h=e;h<s;++h)r.push(["j",h,"*t",u,"p",t[h]].join(""));f.push(["p",u,"=(",r.join("+"),")"].join(""))}f.push(Kz(t,n,i));for(var u=e;u<s;++u)f.push("}");return f.join(`
`)}function Cne(e){for(var t=0,n=e[0].length;t<n;){for(var i=1;i<e.length;++i)if(e[i][t]!==e[0][t])return t;++t}return t}function nB(e,t,n){for(var i=e.body,s=[],a=[],c=0;c<e.args.length;++c){var d=e.args[c];if(!(d.count<=0)){var f=new RegExp(d.name,"g"),u="",r=t.arrayArgs.indexOf(c);switch(t.argTypes[c]){case"offset":var h=t.offsetArgIndex.indexOf(c),p=t.offsetArgs[h];r=p.array,u="+q"+h;case"array":u="p"+r+u;var _="l"+c,l="a"+r;if(t.arrayBlockIndices[r]===0)d.count===1?n[r]==="generic"?d.lvalue?(s.push(["var ",_,"=",l,".get(",u,")"].join("")),i=i.replace(f,_),a.push([l,".set(",u,",",_,")"].join(""))):i=i.replace(f,[l,".get(",u,")"].join("")):i=i.replace(f,[l,"[",u,"]"].join("")):n[r]==="generic"?(s.push(["var ",_,"=",l,".get(",u,")"].join("")),i=i.replace(f,_),d.lvalue&&a.push([l,".set(",u,",",_,")"].join(""))):(s.push(["var ",_,"=",l,"[",u,"]"].join("")),i=i.replace(f,_),d.lvalue&&a.push([l,"[",u,"]=",_].join("")));else{for(var b=[d.name],m=[u],E=0;E<Math.abs(t.arrayBlockIndices[r]);E++)b.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(E+1)+"*t"+r+"b"+E);if(f=new RegExp(b.join(""),"g"),u=m.join("+"),n[r]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(f,[l,"[",u,"]"].join(""))}break;case"scalar":i=i.replace(f,"Y"+t.scalarArgs.indexOf(c));break;case"index":i=i.replace(f,"index");break;case"shape":i=i.replace(f,"shape");break}}}return[s.join(`
`),i,a.join(`
`)].join(`
`).trim()}function Lne(e){for(var t=new Array(e.length),n=!0,i=0;i<e.length;++i){var s=e[i],a=s.match(/\d+/);a?a=a[0]:a="",s.charAt(0)===0?t[i]="u"+s.charAt(1)+a:t[i]=s.charAt(0)+a,i>0&&(n=n&&t[i]===t[i-1])}return n?t[0]:t.join("")}function Pne(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,i=new Array(e.arrayArgs.length),s=new Array(e.arrayArgs.length),a=0;a<e.arrayArgs.length;++a)s[a]=t[2*a],i[a]=t[2*a+1];for(var c=[],d=[],f=[],u=[],r=[],a=0;a<e.arrayArgs.length;++a){e.arrayBlockIndices[a]<0?(f.push(0),u.push(n),c.push(n),d.push(n+e.arrayBlockIndices[a])):(f.push(e.arrayBlockIndices[a]),u.push(e.arrayBlockIndices[a]+n),c.push(0),d.push(e.arrayBlockIndices[a]));for(var h=[],p=0;p<i[a].length;p++)f[a]<=i[a][p]&&i[a][p]<u[a]&&h.push(i[a][p]-f[a]);r.push(h)}for(var _=["SS"],l=["'use strict'"],b=[],p=0;p<n;++p)b.push(["s",p,"=SS[",p,"]"].join(""));for(var a=0;a<e.arrayArgs.length;++a){_.push("a"+a),_.push("t"+a),_.push("p"+a);for(var p=0;p<n;++p)b.push(["t",a,"p",p,"=t",a,"[",f[a]+p,"]"].join(""));for(var p=0;p<Math.abs(e.arrayBlockIndices[a]);++p)b.push(["t",a,"b",p,"=t",a,"[",c[a]+p,"]"].join(""))}for(var a=0;a<e.scalarArgs.length;++a)_.push("Y"+a);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var m=new Array(n),a=0;a<n;++a)m[a]="0";b.push(["index=[",m.join(","),"]"].join(""))}for(var a=0;a<e.offsetArgs.length;++a){for(var E=e.offsetArgs[a],B=[],p=0;p<E.offset.length;++p)E.offset[p]!==0&&(E.offset[p]===1?B.push(["t",E.array,"p",p].join("")):B.push([E.offset[p],"*t",E.array,"p",p].join("")));B.length===0?b.push("q"+a+"=0"):b.push(["q",a,"=",B.join("+")].join(""))}var I=Nne([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));b=b.concat(I),b.length>0&&l.push("var "+b.join(","));for(var a=0;a<e.arrayArgs.length;++a)l.push("p"+a+"|=0");e.pre.body.length>3&&l.push(nB(e.pre,e,s));var k=nB(e.body,e,s),F=Cne(r);F<n?l.push(Rne(F,r[0],e,k)):l.push(Kz(r[0],e,k)),e.post.body.length>3&&l.push(nB(e.post,e,s)),e.debug&&console.log("-----Generated cwise routine for ",t,`:
`+l.join(`
`)+`
----------`);var x=[e.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",F,Lne(s)].join(""),M=new Function(["function ",x,"(",_.join(","),"){",l.join(`
`),"} return ",x].join(""));return M()}var Dne=Pne,Une=Dne;function jne(e){var t=["'use strict'","var CACHED={}"],n=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var s=[],a=[],c=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],d=[],f=[],u=0;u<e.arrayArgs.length;++u){var r=e.arrayArgs[u];n.push(["t",r,"=array",r,".dtype,","r",r,"=array",r,".order"].join("")),s.push("t"+r),s.push("r"+r),a.push("t"+r),a.push("r"+r+".join()"),c.push("array"+r+".data"),c.push("array"+r+".stride"),c.push("array"+r+".offset|0"),u>0&&(d.push("array"+e.arrayArgs[0]+".shape.length===array"+r+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[u]))),f.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+r+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[u])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+d.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var u=0;u<e.scalarArgs.length;++u)c.push("scalar"+e.scalarArgs[u]);n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",c.join(","),")}"].join("")),e.debug&&console.log(`-----Generated thunk:
`+t.join(`
`)+`
----------`);var h=new Function("compile",t.join(`
`));return h(Une.bind(void 0,e))}var $ne=jne,zne=$ne;function qne(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function Vne(e){var t=new qne;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var s=n[i];if(s==="array"||typeof s=="object"&&s.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(s.blockIndices?s.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if(s==="scalar")t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if(s==="index"){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if(s==="shape"){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof s=="object"&&s.offset)t.argTypes[i]="offset",t.offsetArgs.push({array:s.array,offset:s.offset}),t.offsetArgIndex.push(i);else throw new Error("cwise: Unknown argument type "+n[i])}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,zne(t)}var Gne=Vne;(function(e){var t=Gne,n={body:"",args:[],thisVars:[],localVars:[]};function i(p){if(!p)return n;for(var _=0;_<p.args.length;++_){var l=p.args[_];_===0?p.args[_]={name:l,lvalue:!0,rvalue:!!p.rvalue,count:p.count||1}:p.args[_]={name:l,lvalue:!1,rvalue:!0,count:1}}return p.thisVars||(p.thisVars=[]),p.localVars||(p.localVars=[]),p}function s(p){return t({args:p.args,pre:i(p.pre),body:i(p.body),post:i(p.proc),funcName:p.funcName})}function a(p){for(var _=[],l=0;l<p.args.length;++l)_.push("a"+l);var b=new Function("P",["return function ",p.funcName,"_ndarrayops(",_.join(","),") {P(",_.join(","),");return a0}"].join(""));return b(s(p))}var c={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var p in c){var _=c[p];e[p]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+_+"c"},funcName:p}),e[p+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+_+"=b"},rvalue:!0,funcName:p+"eq"}),e[p+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+_+"s"},funcName:p+"s"}),e[p+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+_+"=s"},rvalue:!0,funcName:p+"seq"})}})();var d={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var p in d){var _=d[p];e[p]=a({args:["array","array"],body:{args:["a","b"],body:"a="+_+"b"},funcName:p}),e[p+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+_+"a"},rvalue:!0,count:2,funcName:p+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var p in f){var _=f[p];e[p]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+_+"c"},funcName:p}),e[p+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+_+"s"},funcName:p+"s"}),e[p+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+_+"b"},rvalue:!0,count:2,funcName:p+"eq"}),e[p+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+_+"s"},rvalue:!0,count:2,funcName:p+"seq"})}})();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var p=0;p<u.length;++p){var _=u[p];e[_]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:_}),e[_+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"eq"})}})();var r=["max","min","atan2","pow"];(function(){for(var p=0;p<r.length;++p){var _=r[p];e[_]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:_}),e[_+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:_+"s"}),e[_+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"eq"}),e[_+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"seq"})}})();var h=["atan2","pow"];(function(){for(var p=0;p<h.length;++p){var _=h[p];e[_+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:_+"op"}),e[_+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:_+"ops"}),e[_+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"opeq"}),e[_+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+_,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:_+"opseq"})}})(),e.any=t({args:["array"],pre:n,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=t({args:["array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=t({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=t({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=t({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=t({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=t({args:["array","array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Xz);const gb=Jh(Xz);class Wn{constructor(t,n,i,s){this.data=t,this.ndarray=Sne(t,n,i,s)}get shape(){return this.ndarray.shape}get offset(){return this.ndarray.offset}get strides(){return this.ndarray.stride}get length(){return this.ndarray.size}set shape(t){this.ndarray.shape=t}set offset(t){this.ndarray.offset=t}set strides(t){this.ndarray.stride=t}get(...t){return this.ndarray.get(...t)}set(...t){return this.ndarray.set(...t)}fill(t){this.data.fill(t)}increment(t,n=1){const i=this.ndarray.index(...t);this.data[i]+=n}addToItself(t){return gb.addeq(this.ndarray,t.ndarray),this}subToItself(t){return gb.subeq(this.ndarray,t.ndarray),this}add(t,n=tB){const i=new Wn(new n(this.length),this.shape);return gb.add(i.ndarray,this.ndarray,t.ndarray),i}sub(t,n=tB){const i=new Wn(new n(this.length),this.shape);return gb.sub(i.ndarray,this.ndarray,t.ndarray),i}slice(...t){const n=this.ndarray.pick(...t);return new Wn(this.data,n.shape,n.stride,n.offset)}cumulativeSum(){return kne(this.ndarray),this}static typedArray(t,n,i,s,a){const c=new t(n);return new Wn(c,i,s,a)}static allocCumulative(t,n,i,s){return this.typedArray(cne,t,n,i,s)}static allocCounts(t,n,i,s){return this.typedArray(tB,t,n,i,s)}toString2D(){let t="";for(let n=0;n<this.shape[0];n++){let i="";for(let s=0;s<this.shape[1];s++)i+=this.get(n,s)+" ";t+=i+`
`}return t}toString1D(){let t="";for(let n=0;n<this.shape[0];n++)t+=this.get(n)+" ";return t}toString(){return this.shape.length===1?this.toString1D():this.shape.length===2?this.toString2D():"not implemented yet"}deepCopy(t){const n=Wn.typedArray(t,this.length,this.shape,this.strides,this.offset);for(let i=0;i<this.length;i++)n.data[i]=this.data[i];return n}}Wn.ALL=null;function ol(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Hne(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qh(e){let t,n,i;e.length!==2?(t=ol,n=(d,f)=>ol(e(d),f),i=(d,f)=>e(d)-f):(t=e===ol||e===Hne?e:Wne,n=e,i=e);function s(d,f,u=0,r=d.length){if(u<r){if(t(f,f)!==0)return r;do{const h=u+r>>>1;n(d[h],f)<0?u=h+1:r=h}while(u<r)}return u}function a(d,f,u=0,r=d.length){if(u<r){if(t(f,f)!==0)return r;do{const h=u+r>>>1;n(d[h],f)<=0?u=h+1:r=h}while(u<r)}return u}function c(d,f,u=0,r=d.length){const h=s(d,f,u,r-1);return h>u&&i(d[h-1],f)>-i(d[h],f)?h-1:h}return{left:s,center:c,right:a}}function Wne(){return 0}function Jz(e){return e===null?NaN:+e}function*Yne(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const Qz=Qh(ol),yc=Qz.right,Xne=Qz.left;Qh(Jz).center;function Kne(e,t){let n=0,i,s=0,a=0;if(t===void 0)for(let c of e)c!=null&&(c=+c)>=c&&(i=c-s,s+=i/++n,a+=i*(c-s));else{let c=-1;for(let d of e)(d=t(d,++c,e))!=null&&(d=+d)>=d&&(i=d-s,s+=i/++n,a+=i*(d-s))}if(n>1)return a/(n-1)}function Jne(e,t){const n=Kne(e,t);return n&&Math.sqrt(n)}class ts{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let s=0;s<this._n&&s<32;s++){const a=n[s],c=t+a,d=Math.abs(t)<Math.abs(a)?t-(c-a):a-(c-t);d&&(n[i++]=d),t=c}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,s,a,c=0;if(n>0){for(c=t[--n];n>0&&(i=c,s=t[--n],c=i+s,a=s-(c-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(s=a*2,i=c+s,s==i-c&&(c=i))}return c}}class EP extends Map{constructor(t,n=t5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,s]of t)this.set(i,s)}get(t){return super.get(FF(this,t))}has(t){return super.has(FF(this,t))}set(t,n){return super.set(Zz(this,t),n)}delete(t){return super.delete(e5(this,t))}}class uT extends Set{constructor(t,n=t5){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(FF(this,t))}add(t){return super.add(Zz(this,t))}delete(t){return super.delete(e5(this,t))}}function FF({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Zz({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function e5({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function t5(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Qne(e,t){return Array.from(t,n=>e[n])}function Zne(e=ol){if(e===ol)return n5;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function n5(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const eie=Math.sqrt(50),tie=Math.sqrt(10),nie=Math.sqrt(2);function hT(e,t,n){const i=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(i)),a=i/Math.pow(10,s),c=a>=eie?10:a>=tie?5:a>=nie?2:1;let d,f,u;return s<0?(u=Math.pow(10,-s)/c,d=Math.round(e*u),f=Math.round(t*u),d/u<e&&++d,f/u>t&&--f,u=-u):(u=Math.pow(10,s)*c,d=Math.round(e/u),f=Math.round(t/u),d*u<e&&++d,f*u>t&&--f),f<d&&.5<=n&&n<2?hT(e,t,n*2):[d,f,u]}function kF(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[s,a,c]=i?hT(t,e,n):hT(e,t,n);if(!(a>=s))return[];const d=a-s+1,f=new Array(d);if(i)if(c<0)for(let u=0;u<d;++u)f[u]=(a-u)/-c;else for(let u=0;u<d;++u)f[u]=(a-u)*c;else if(c<0)for(let u=0;u<d;++u)f[u]=(s+u)/-c;else for(let u=0;u<d;++u)f[u]=(s+u)*c;return f}function xF(e,t,n){return t=+t,e=+e,n=+n,hT(e,t,n)[2]}function gc(e,t,n){t=+t,e=+e,n=+n;const i=t<e,s=i?xF(t,e,n):xF(e,t,n);return(i?-1:1)*(s<0?1/-s:s)}function Gd(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function MF(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function i5(e,t,n=0,i=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(s=s===void 0?n5:Zne(s);i>n;){if(i-n>600){const f=i-n+1,u=t-n+1,r=Math.log(f),h=.5*Math.exp(2*r/3),p=.5*Math.sqrt(r*h*(f-h)/f)*(u-f/2<0?-1:1),_=Math.max(n,Math.floor(t-u*h/f+p)),l=Math.min(i,Math.floor(t+(f-u)*h/f+p));i5(e,t,_,l,s)}const a=e[t];let c=n,d=i;for(M_(e,n,t),s(e[i],a)>0&&M_(e,n,i);c<d;){for(M_(e,c,d),++c,--d;s(e[c],a)<0;)++c;for(;s(e[d],a)>0;)--d}s(e[n],a)===0?M_(e,n,d):(++d,M_(e,d,i)),d<=t&&(n=d+1),t<=d&&(i=d-1)}return e}function M_(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function AF(e,t,n){if(e=Float64Array.from(Yne(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return MF(e);if(t>=1)return Gd(e);var i,s=(i-1)*t,a=Math.floor(s),c=Gd(i5(e,a).subarray(0,a+1)),d=MF(e.subarray(a+1));return c+(d-c)*(s-a)}}function s5(e,t,n=Jz){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,s=(i-1)*t,a=Math.floor(s),c=+n(e[a],a,e),d=+n(e[a+1],a+1,e);return c+(d-c)*(s-a)}}function iie(e,t){let n=0,i=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(++n,i+=s);else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function r5(e,t){return AF(e,.5,t)}function*sie(e){for(const t of e)yield*t}function a5(e){return Array.from(sie(e))}function Hs(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var i=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(s);++i<s;)a[i]=e+i*n;return a}function o5(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function rie(e,...t){e=new uT(e),t=t.map(aie);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function aie(e){return e instanceof uT?e:new uT(e)}function oie(...e){const t=new uT;for(const n of e)for(const i of n)t.add(i);return t}var lie={value:()=>{}};function mx(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new y0(n)}function y0(e){this._=e}function cie(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}y0.prototype=mx.prototype={constructor:y0,on:function(e,t){var n=this._,i=cie(e+"",n),s,a=-1,c=i.length;if(arguments.length<2){for(;++a<c;)if((s=(e=i[a]).type)&&(s=die(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<c;)if(s=(e=i[a]).type)n[s]=SP(n[s],e.name,t);else if(t==null)for(s in n)n[s]=SP(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new y0(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,a;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,s=a.length;i<s;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],s=0,a=i.length;s<a;++s)i[s].value.apply(t,n)}};function die(e,t){for(var n=0,i=e.length,s;n<i;++n)if((s=e[n]).name===t)return s.value}function SP(e,t,n){for(var i=0,s=e.length;i<s;++i)if(e[i].name===t){e[i]=lie,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var OF="http://www.w3.org/1999/xhtml";const BP={svg:"http://www.w3.org/2000/svg",xhtml:OF,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function k1(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),BP.hasOwnProperty(t)?{space:BP[t],local:e}:e}function fie(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===OF&&t.documentElement.namespaceURI===OF?t.createElement(e):t.createElementNS(n,e)}}function uie(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function l5(e){var t=k1(e);return(t.local?uie:fie)(t)}function hie(){}function wx(e){return e==null?hie:function(){return this.querySelector(e)}}function _ie(e){typeof e!="function"&&(e=wx(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var a=t[s],c=a.length,d=i[s]=new Array(c),f,u,r=0;r<c;++r)(f=a[r])&&(u=e.call(f,f.__data__,r,a))&&("__data__"in f&&(u.__data__=f.__data__),d[r]=u);return new na(i,this._parents)}function pie(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function yie(){return[]}function c5(e){return e==null?yie:function(){return this.querySelectorAll(e)}}function gie(e){return function(){return pie(e.apply(this,arguments))}}function mie(e){typeof e=="function"?e=gie(e):e=c5(e);for(var t=this._groups,n=t.length,i=[],s=[],a=0;a<n;++a)for(var c=t[a],d=c.length,f,u=0;u<d;++u)(f=c[u])&&(i.push(e.call(f,f.__data__,u,c)),s.push(f));return new na(i,s)}function d5(e){return function(){return this.matches(e)}}function f5(e){return function(t){return t.matches(e)}}var wie=Array.prototype.find;function bie(e){return function(){return wie.call(this.children,e)}}function Tie(){return this.firstElementChild}function vie(e){return this.select(e==null?Tie:bie(typeof e=="function"?e:f5(e)))}var Eie=Array.prototype.filter;function Sie(){return Array.from(this.children)}function Bie(e){return function(){return Eie.call(this.children,e)}}function Iie(e){return this.selectAll(e==null?Sie:Bie(typeof e=="function"?e:f5(e)))}function Fie(e){typeof e!="function"&&(e=d5(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var a=t[s],c=a.length,d=i[s]=[],f,u=0;u<c;++u)(f=a[u])&&e.call(f,f.__data__,u,a)&&d.push(f);return new na(i,this._parents)}function u5(e){return new Array(e.length)}function kie(){return new na(this._enter||this._groups.map(u5),this._parents)}function _T(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_T.prototype={constructor:_T,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xie(e){return function(){return e}}function Mie(e,t,n,i,s,a){for(var c=0,d,f=t.length,u=a.length;c<u;++c)(d=t[c])?(d.__data__=a[c],i[c]=d):n[c]=new _T(e,a[c]);for(;c<f;++c)(d=t[c])&&(s[c]=d)}function Aie(e,t,n,i,s,a,c){var d,f,u=new Map,r=t.length,h=a.length,p=new Array(r),_;for(d=0;d<r;++d)(f=t[d])&&(p[d]=_=c.call(f,f.__data__,d,t)+"",u.has(_)?s[d]=f:u.set(_,f));for(d=0;d<h;++d)_=c.call(e,a[d],d,a)+"",(f=u.get(_))?(i[d]=f,f.__data__=a[d],u.delete(_)):n[d]=new _T(e,a[d]);for(d=0;d<r;++d)(f=t[d])&&u.get(p[d])===f&&(s[d]=f)}function Oie(e){return e.__data__}function Nie(e,t){if(!arguments.length)return Array.from(this,Oie);var n=t?Aie:Mie,i=this._parents,s=this._groups;typeof e!="function"&&(e=xie(e));for(var a=s.length,c=new Array(a),d=new Array(a),f=new Array(a),u=0;u<a;++u){var r=i[u],h=s[u],p=h.length,_=Rie(e.call(r,r&&r.__data__,u,i)),l=_.length,b=d[u]=new Array(l),m=c[u]=new Array(l),E=f[u]=new Array(p);n(r,h,b,m,E,_,t);for(var B=0,I=0,k,F;B<l;++B)if(k=b[B]){for(B>=I&&(I=B+1);!(F=m[I])&&++I<l;);k._next=F||null}}return c=new na(c,i),c._enter=d,c._exit=f,c}function Rie(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cie(){return new na(this._exit||this._groups.map(u5),this._parents)}function Lie(e,t,n){var i=this.enter(),s=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?a.remove():n(a),i&&s?i.merge(s).order():s}function Pie(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,s=n.length,a=i.length,c=Math.min(s,a),d=new Array(s),f=0;f<c;++f)for(var u=n[f],r=i[f],h=u.length,p=d[f]=new Array(h),_,l=0;l<h;++l)(_=u[l]||r[l])&&(p[l]=_);for(;f<s;++f)d[f]=n[f];return new na(d,this._parents)}function Die(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],s=i.length-1,a=i[s],c;--s>=0;)(c=i[s])&&(a&&c.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(c,a),a=c);return this}function Uie(e){e||(e=jie);function t(h,p){return h&&p?e(h.__data__,p.__data__):!h-!p}for(var n=this._groups,i=n.length,s=new Array(i),a=0;a<i;++a){for(var c=n[a],d=c.length,f=s[a]=new Array(d),u,r=0;r<d;++r)(u=c[r])&&(f[r]=u);f.sort(t)}return new na(s,this._parents).order()}function jie(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $ie(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zie(){return Array.from(this)}function qie(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],s=0,a=i.length;s<a;++s){var c=i[s];if(c)return c}return null}function Vie(){let e=0;for(const t of this)++e;return e}function Gie(){return!this.node()}function Hie(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var s=t[n],a=0,c=s.length,d;a<c;++a)(d=s[a])&&e.call(d,d.__data__,a,s);return this}function Wie(e){return function(){this.removeAttribute(e)}}function Yie(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xie(e,t){return function(){this.setAttribute(e,t)}}function Kie(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Jie(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Qie(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Zie(e,t){var n=k1(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Yie:Wie:typeof t=="function"?n.local?Qie:Jie:n.local?Kie:Xie)(n,t))}function h5(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ese(e){return function(){this.style.removeProperty(e)}}function tse(e,t,n){return function(){this.style.setProperty(e,t,n)}}function nse(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function ise(e,t,n){return arguments.length>1?this.each((t==null?ese:typeof t=="function"?nse:tse)(e,t,n??"")):nh(this.node(),e)}function nh(e,t){return e.style.getPropertyValue(t)||h5(e).getComputedStyle(e,null).getPropertyValue(t)}function sse(e){return function(){delete this[e]}}function rse(e,t){return function(){this[e]=t}}function ase(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ose(e,t){return arguments.length>1?this.each((t==null?sse:typeof t=="function"?ase:rse)(e,t)):this.node()[e]}function _5(e){return e.trim().split(/^|\s+/)}function bx(e){return e.classList||new p5(e)}function p5(e){this._node=e,this._names=_5(e.getAttribute("class")||"")}p5.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function y5(e,t){for(var n=bx(e),i=-1,s=t.length;++i<s;)n.add(t[i])}function g5(e,t){for(var n=bx(e),i=-1,s=t.length;++i<s;)n.remove(t[i])}function lse(e){return function(){y5(this,e)}}function cse(e){return function(){g5(this,e)}}function dse(e,t){return function(){(t.apply(this,arguments)?y5:g5)(this,e)}}function fse(e,t){var n=_5(e+"");if(arguments.length<2){for(var i=bx(this.node()),s=-1,a=n.length;++s<a;)if(!i.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?dse:t?lse:cse)(n,t))}function use(){this.textContent=""}function hse(e){return function(){this.textContent=e}}function _se(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function pse(e){return arguments.length?this.each(e==null?use:(typeof e=="function"?_se:hse)(e)):this.node().textContent}function yse(){this.innerHTML=""}function gse(e){return function(){this.innerHTML=e}}function mse(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function wse(e){return arguments.length?this.each(e==null?yse:(typeof e=="function"?mse:gse)(e)):this.node().innerHTML}function bse(){this.nextSibling&&this.parentNode.appendChild(this)}function Tse(){return this.each(bse)}function vse(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ese(){return this.each(vse)}function Sse(e){var t=typeof e=="function"?e:l5(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Bse(){return null}function Ise(e,t){var n=typeof e=="function"?e:l5(e),i=t==null?Bse:typeof t=="function"?t:wx(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Fse(){var e=this.parentNode;e&&e.removeChild(this)}function kse(){return this.each(Fse)}function xse(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mse(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ase(e){return this.select(e?Mse:xse)}function Ose(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Nse(e){return function(t){e.call(this,t,this.__data__)}}function Rse(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Cse(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,s=t.length,a;n<s;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function Lse(e,t,n){return function(){var i=this.__on,s,a=Nse(t);if(i){for(var c=0,d=i.length;c<d;++c)if((s=i[c]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=t;return}}this.addEventListener(e.type,a,n),s={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(s):this.__on=[s]}}function Pse(e,t,n){var i=Rse(e+""),s,a=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,u=d.length,r;f<u;++f)for(s=0,r=d[f];s<a;++s)if((c=i[s]).type===r.type&&c.name===r.name)return r.value}return}for(d=t?Lse:Cse,s=0;s<a;++s)this.each(d(i[s],t,n));return this}function m5(e,t,n){var i=h5(e),s=i.CustomEvent;typeof s=="function"?s=new s(t,n):(s=i.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function Dse(e,t){return function(){return m5(this,e,t)}}function Use(e,t){return function(){return m5(this,e,t.apply(this,arguments))}}function jse(e,t){return this.each((typeof t=="function"?Use:Dse)(e,t))}function*$se(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],s=0,a=i.length,c;s<a;++s)(c=i[s])&&(yield c)}var zse=[null];function na(e,t){this._groups=e,this._parents=t}function nm(){return new na([[document.documentElement]],zse)}function qse(){return this}na.prototype=nm.prototype={constructor:na,select:_ie,selectAll:mie,selectChild:vie,selectChildren:Iie,filter:Fie,data:Nie,enter:kie,exit:Cie,join:Lie,merge:Pie,selection:qse,order:Die,sort:Uie,call:$ie,nodes:zie,node:qie,size:Vie,empty:Gie,each:Hie,attr:Zie,style:ise,property:ose,classed:fse,text:pse,html:wse,raise:Tse,lower:Ese,append:Sse,insert:Ise,remove:kse,clone:Ase,datum:Ose,on:Pse,dispatch:jse,[Symbol.iterator]:$se};function Zh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function im(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Dc(){}var tf=.7,ih=1/tf,$u="\\s*([+-]?\\d+)\\s*",hg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ya="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vse=/^#([0-9a-f]{3,8})$/,Gse=new RegExp(`^rgb\\(${$u},${$u},${$u}\\)$`),Hse=new RegExp(`^rgb\\(${Ya},${Ya},${Ya}\\)$`),Wse=new RegExp(`^rgba\\(${$u},${$u},${$u},${hg}\\)$`),Yse=new RegExp(`^rgba\\(${Ya},${Ya},${Ya},${hg}\\)$`),Xse=new RegExp(`^hsl\\(${hg},${Ya},${Ya}\\)$`),Kse=new RegExp(`^hsla\\(${hg},${Ya},${Ya},${hg}\\)$`),IP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zh(Dc,nf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:FP,formatHex:FP,formatHex8:Jse,formatHsl:Qse,formatRgb:kP,toString:kP});function FP(){return this.rgb().formatHex()}function Jse(){return this.rgb().formatHex8()}function Qse(){return w5(this).formatHsl()}function kP(){return this.rgb().formatRgb()}function nf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vse.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xP(t):n===3?new si(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Gse.exec(e))?new si(t[1],t[2],t[3],1):(t=Hse.exec(e))?new si(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Wse.exec(e))?mb(t[1],t[2],t[3],t[4]):(t=Yse.exec(e))?mb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xse.exec(e))?OP(t[1],t[2]/100,t[3]/100,1):(t=Kse.exec(e))?OP(t[1],t[2]/100,t[3]/100,t[4]):IP.hasOwnProperty(e)?xP(IP[e]):e==="transparent"?new si(NaN,NaN,NaN,0):null}function xP(e){return new si(e>>16&255,e>>8&255,e&255,1)}function mb(e,t,n,i){return i<=0&&(e=t=n=NaN),new si(e,t,n,i)}function Tx(e){return e instanceof Dc||(e=nf(e)),e?(e=e.rgb(),new si(e.r,e.g,e.b,e.opacity)):new si}function mc(e,t,n,i){return arguments.length===1?Tx(e):new si(e,t,n,i??1)}function si(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Zh(si,mc,im(Dc,{brighter(e){return e=e==null?ih:Math.pow(ih,e),new si(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tf:Math.pow(tf,e),new si(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new si(Hd(this.r),Hd(this.g),Hd(this.b),pT(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MP,formatHex:MP,formatHex8:Zse,formatRgb:AP,toString:AP}));function MP(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}`}function Zse(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}${jd((isNaN(this.opacity)?1:this.opacity)*255)}`}function AP(){const e=pT(this.opacity);return`${e===1?"rgb(":"rgba("}${Hd(this.r)}, ${Hd(this.g)}, ${Hd(this.b)}${e===1?")":`, ${e})`}`}function pT(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jd(e){return e=Hd(e),(e<16?"0":"")+e.toString(16)}function OP(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wr(e,t,n,i)}function w5(e){if(e instanceof Wr)return new Wr(e.h,e.s,e.l,e.opacity);if(e instanceof Dc||(e=nf(e)),!e)return new Wr;if(e instanceof Wr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,s=Math.min(t,n,i),a=Math.max(t,n,i),c=NaN,d=a-s,f=(a+s)/2;return d?(t===a?c=(n-i)/d+(n<i)*6:n===a?c=(i-t)/d+2:c=(t-n)/d+4,d/=f<.5?a+s:2-a-s,c*=60):d=f>0&&f<1?0:c,new Wr(c,d,f,e.opacity)}function yT(e,t,n,i){return arguments.length===1?w5(e):new Wr(e,t,n,i??1)}function Wr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Zh(Wr,yT,im(Dc,{brighter(e){return e=e==null?ih:Math.pow(ih,e),new Wr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tf:Math.pow(tf,e),new Wr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,s=2*n-i;return new si(iB(e>=240?e-240:e+120,s,i),iB(e,s,i),iB(e<120?e+240:e-120,s,i),this.opacity)},clamp(){return new Wr(NP(this.h),wb(this.s),wb(this.l),pT(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pT(this.opacity);return`${e===1?"hsl(":"hsla("}${NP(this.h)}, ${wb(this.s)*100}%, ${wb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function NP(e){return e=(e||0)%360,e<0?e+360:e}function wb(e){return Math.max(0,Math.min(1,e||0))}function iB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const b5=Math.PI/180,T5=180/Math.PI,gT=18,v5=.96422,E5=1,S5=.82521,B5=4/29,zu=6/29,I5=3*zu*zu,ere=zu*zu*zu;function F5(e){if(e instanceof Xa)return new Xa(e.l,e.a,e.b,e.opacity);if(e instanceof Qo)return k5(e);e instanceof si||(e=Tx(e));var t=oB(e.r),n=oB(e.g),i=oB(e.b),s=sB((.2225045*t+.7168786*n+.0606169*i)/E5),a,c;return t===n&&n===i?a=c=s:(a=sB((.4360747*t+.3850649*n+.1430804*i)/v5),c=sB((.0139322*t+.0971045*n+.7141733*i)/S5)),new Xa(116*s-16,500*(a-s),200*(s-c),e.opacity)}function mT(e,t,n,i){return arguments.length===1?F5(e):new Xa(e,t,n,i??1)}function Xa(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Zh(Xa,mT,im(Dc,{brighter(e){return new Xa(this.l+gT*(e??1),this.a,this.b,this.opacity)},darker(e){return new Xa(this.l-gT*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=v5*rB(t),e=E5*rB(e),n=S5*rB(n),new si(aB(3.1338561*t-1.6168667*e-.4906146*n),aB(-.9787684*t+1.9161415*e+.033454*n),aB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function sB(e){return e>ere?Math.pow(e,1/3):e/I5+B5}function rB(e){return e>zu?e*e*e:I5*(e-B5)}function aB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function oB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function tre(e){if(e instanceof Qo)return new Qo(e.h,e.c,e.l,e.opacity);if(e instanceof Xa||(e=F5(e)),e.a===0&&e.b===0)return new Qo(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*T5;return new Qo(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function wT(e,t,n,i){return arguments.length===1?tre(e):new Qo(e,t,n,i??1)}function Qo(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function k5(e){if(isNaN(e.h))return new Xa(e.l,0,0,e.opacity);var t=e.h*b5;return new Xa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Zh(Qo,wT,im(Dc,{brighter(e){return new Qo(this.h,this.c,this.l+gT*(e??1),this.opacity)},darker(e){return new Qo(this.h,this.c,this.l-gT*(e??1),this.opacity)},rgb(){return k5(this).rgb()}}));var x5=-.14861,vx=1.78277,Ex=-.29227,x1=-.90649,_g=1.97294,RP=_g*x1,CP=_g*vx,LP=vx*Ex-x1*x5;function nre(e){if(e instanceof Wd)return new Wd(e.h,e.s,e.l,e.opacity);e instanceof si||(e=Tx(e));var t=e.r/255,n=e.g/255,i=e.b/255,s=(LP*i+RP*t-CP*n)/(LP+RP-CP),a=i-s,c=(_g*(n-s)-Ex*a)/x1,d=Math.sqrt(c*c+a*a)/(_g*s*(1-s)),f=d?Math.atan2(c,a)*T5-120:NaN;return new Wd(f<0?f+360:f,d,s,e.opacity)}function NF(e,t,n,i){return arguments.length===1?nre(e):new Wd(e,t,n,i??1)}function Wd(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Zh(Wd,NF,im(Dc,{brighter(e){return e=e==null?ih:Math.pow(ih,e),new Wd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tf:Math.pow(tf,e),new Wd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*b5,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),s=Math.sin(e);return new si(255*(t+n*(x5*i+vx*s)),255*(t+n*(Ex*i+x1*s)),255*(t+n*(_g*i)),this.opacity)}}));function M5(e,t,n,i,s){var a=e*e,c=a*e;return((1-3*e+3*a-c)*t+(4-6*a+3*c)*n+(1+3*e+3*a-3*c)*i+c*s)/6}function A5(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),s=e[i],a=e[i+1],c=i>0?e[i-1]:2*s-a,d=i<t-1?e[i+2]:2*a-s;return M5((n-i/t)*t,c,s,a,d)}}function O5(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),s=e[(i+t-1)%t],a=e[i%t],c=e[(i+1)%t],d=e[(i+2)%t];return M5((n-i/t)*t,s,a,c,d)}}const M1=e=>()=>e;function N5(e,t){return function(n){return e+n*t}}function ire(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function A1(e,t){var n=t-e;return n?N5(e,n>180||n<-180?n-360*Math.round(n/360):n):M1(isNaN(e)?t:e)}function sre(e){return(e=+e)==1?ri:function(t,n){return n-t?ire(t,n,e):M1(isNaN(t)?n:t)}}function ri(e,t){var n=t-e;return n?N5(e,n):M1(isNaN(e)?t:e)}const pg=function e(t){var n=sre(t);function i(s,a){var c=n((s=mc(s)).r,(a=mc(a)).r),d=n(s.g,a.g),f=n(s.b,a.b),u=ri(s.opacity,a.opacity);return function(r){return s.r=c(r),s.g=d(r),s.b=f(r),s.opacity=u(r),s+""}}return i.gamma=e,i}(1);function R5(e){return function(t){var n=t.length,i=new Array(n),s=new Array(n),a=new Array(n),c,d;for(c=0;c<n;++c)d=mc(t[c]),i[c]=d.r||0,s[c]=d.g||0,a[c]=d.b||0;return i=e(i),s=e(s),a=e(a),d.opacity=1,function(f){return d.r=i(f),d.g=s(f),d.b=a(f),d+""}}}var rre=R5(A5),are=R5(O5);function Sx(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),s;return function(a){for(s=0;s<n;++s)i[s]=e[s]*(1-a)+t[s]*a;return i}}function C5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ore(e,t){return(C5(t)?Sx:L5)(e,t)}function L5(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,s=new Array(i),a=new Array(n),c;for(c=0;c<i;++c)s[c]=Uc(e[c],t[c]);for(;c<n;++c)a[c]=t[c];return function(d){for(c=0;c<i;++c)a[c]=s[c](d);return a}}function P5(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function cr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function D5(e,t){var n={},i={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Uc(e[s],t[s]):i[s]=t[s];return function(a){for(s in n)i[s]=n[s](a);return i}}var RF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lB=new RegExp(RF.source,"g");function lre(e){return function(){return e}}function cre(e){return function(t){return e(t)+""}}function Bx(e,t){var n=RF.lastIndex=lB.lastIndex=0,i,s,a,c=-1,d=[],f=[];for(e=e+"",t=t+"";(i=RF.exec(e))&&(s=lB.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),d[c]?d[c]+=a:d[++c]=a),(i=i[0])===(s=s[0])?d[c]?d[c]+=s:d[++c]=s:(d[++c]=null,f.push({i:c,x:cr(i,s)})),n=lB.lastIndex;return n<t.length&&(a=t.slice(n),d[c]?d[c]+=a:d[++c]=a),d.length<2?f[0]?cre(f[0].x):lre(t):(t=f.length,function(u){for(var r=0,h;r<t;++r)d[(h=f[r]).i]=h.x(u);return d.join("")})}function Uc(e,t){var n=typeof t,i;return t==null||n==="boolean"?M1(t):(n==="number"?cr:n==="string"?(i=nf(t))?(t=i,pg):Bx:t instanceof nf?pg:t instanceof Date?P5:C5(t)?Sx:Array.isArray(t)?L5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?D5:cr)(e,t)}function dre(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function fre(e,t){var n=A1(+e,+t);return function(i){var s=n(i);return s-360*Math.floor(s/360)}}function sm(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var PP=180/Math.PI,CF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function U5(e,t,n,i,s,a){var c,d,f;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(f=e*n+t*i)&&(n-=e*f,i-=t*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),e*i<t*n&&(e=-e,t=-t,f=-f,c=-c),{translateX:s,translateY:a,rotate:Math.atan2(t,e)*PP,skewX:Math.atan(f)*PP,scaleX:c,scaleY:d}}var bb;function ure(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?CF:U5(t.a,t.b,t.c,t.d,t.e,t.f)}function hre(e){return e==null||(bb||(bb=document.createElementNS("http://www.w3.org/2000/svg","g")),bb.setAttribute("transform",e),!(e=bb.transform.baseVal.consolidate()))?CF:(e=e.matrix,U5(e.a,e.b,e.c,e.d,e.e,e.f))}function j5(e,t,n,i){function s(u){return u.length?u.pop()+" ":""}function a(u,r,h,p,_,l){if(u!==h||r!==p){var b=_.push("translate(",null,t,null,n);l.push({i:b-4,x:cr(u,h)},{i:b-2,x:cr(r,p)})}else(h||p)&&_.push("translate("+h+t+p+n)}function c(u,r,h,p){u!==r?(u-r>180?r+=360:r-u>180&&(u+=360),p.push({i:h.push(s(h)+"rotate(",null,i)-2,x:cr(u,r)})):r&&h.push(s(h)+"rotate("+r+i)}function d(u,r,h,p){u!==r?p.push({i:h.push(s(h)+"skewX(",null,i)-2,x:cr(u,r)}):r&&h.push(s(h)+"skewX("+r+i)}function f(u,r,h,p,_,l){if(u!==h||r!==p){var b=_.push(s(_)+"scale(",null,",",null,")");l.push({i:b-4,x:cr(u,h)},{i:b-2,x:cr(r,p)})}else(h!==1||p!==1)&&_.push(s(_)+"scale("+h+","+p+")")}return function(u,r){var h=[],p=[];return u=e(u),r=e(r),a(u.translateX,u.translateY,r.translateX,r.translateY,h,p),c(u.rotate,r.rotate,h,p),d(u.skewX,r.skewX,h,p),f(u.scaleX,u.scaleY,r.scaleX,r.scaleY,h,p),u=r=null,function(_){for(var l=-1,b=p.length,m;++l<b;)h[(m=p[l]).i]=m.x(_);return h.join("")}}}var $5=j5(ure,"px, ","px)","deg)"),z5=j5(hre,", ",")",")"),_re=1e-12;function DP(e){return((e=Math.exp(e))+1/e)/2}function pre(e){return((e=Math.exp(e))-1/e)/2}function yre(e){return((e=Math.exp(2*e))-1)/(e+1)}const gre=function e(t,n,i){function s(a,c){var d=a[0],f=a[1],u=a[2],r=c[0],h=c[1],p=c[2],_=r-d,l=h-f,b=_*_+l*l,m,E;if(b<_re)E=Math.log(p/u)/t,m=function(M){return[d+M*_,f+M*l,u*Math.exp(t*M*E)]};else{var B=Math.sqrt(b),I=(p*p-u*u+i*b)/(2*u*n*B),k=(p*p-u*u-i*b)/(2*p*n*B),F=Math.log(Math.sqrt(I*I+1)-I),x=Math.log(Math.sqrt(k*k+1)-k);E=(x-F)/t,m=function(M){var R=M*E,P=DP(F),C=u/(n*B)*(P*yre(t*R+F)-pre(F));return[d+C*_,f+C*l,u*P/DP(t*R+F)]}}return m.duration=E*1e3*t/Math.SQRT2,m}return s.rho=function(a){var c=Math.max(.001,+a),d=c*c,f=d*d;return e(c,d,f)},s}(Math.SQRT2,2,4);function q5(e){return function(t,n){var i=e((t=yT(t)).h,(n=yT(n)).h),s=ri(t.s,n.s),a=ri(t.l,n.l),c=ri(t.opacity,n.opacity);return function(d){return t.h=i(d),t.s=s(d),t.l=a(d),t.opacity=c(d),t+""}}}const mre=q5(A1);var wre=q5(ri);function bre(e,t){var n=ri((e=mT(e)).l,(t=mT(t)).l),i=ri(e.a,t.a),s=ri(e.b,t.b),a=ri(e.opacity,t.opacity);return function(c){return e.l=n(c),e.a=i(c),e.b=s(c),e.opacity=a(c),e+""}}function V5(e){return function(t,n){var i=e((t=wT(t)).h,(n=wT(n)).h),s=ri(t.c,n.c),a=ri(t.l,n.l),c=ri(t.opacity,n.opacity);return function(d){return t.h=i(d),t.c=s(d),t.l=a(d),t.opacity=c(d),t+""}}}const Tre=V5(A1);var vre=V5(ri);function G5(e){return function t(n){n=+n;function i(s,a){var c=e((s=NF(s)).h,(a=NF(a)).h),d=ri(s.s,a.s),f=ri(s.l,a.l),u=ri(s.opacity,a.opacity);return function(r){return s.h=c(r),s.s=d(r),s.l=f(Math.pow(r,n)),s.opacity=u(r),s+""}}return i.gamma=t,i}(1)}const Ere=G5(A1);var Sre=G5(ri);function Ix(e,t){t===void 0&&(t=e,e=Uc);for(var n=0,i=t.length-1,s=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(s,s=t[++n]);return function(c){var d=Math.max(0,Math.min(i-1,Math.floor(c*=i)));return a[d](c-d)}}function Bre(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Ire=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Uc,interpolateArray:ore,interpolateBasis:A5,interpolateBasisClosed:O5,interpolateCubehelix:Ere,interpolateCubehelixLong:Sre,interpolateDate:P5,interpolateDiscrete:dre,interpolateHcl:Tre,interpolateHclLong:vre,interpolateHsl:mre,interpolateHslLong:wre,interpolateHue:fre,interpolateLab:bre,interpolateNumber:cr,interpolateNumberArray:Sx,interpolateObject:D5,interpolateRgb:pg,interpolateRgbBasis:rre,interpolateRgbBasisClosed:are,interpolateRound:sm,interpolateString:Bx,interpolateTransformCss:$5,interpolateTransformSvg:z5,interpolateZoom:gre,piecewise:Ix,quantize:Bre},Symbol.toStringTag,{value:"Module"}));var sh=0,py=0,A_=0,H5=1e3,bT,yy,TT=0,sf=0,O1=0,yg=typeof performance=="object"&&performance.now?performance:Date,W5=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function N1(){return sf||(W5(Fre),sf=yg.now()+O1)}function Fre(){sf=0}function gg(){this._call=this._time=this._next=null}gg.prototype=Fx.prototype={constructor:gg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?N1():+n)+(t==null?0:+t),!this._next&&yy!==this&&(yy?yy._next=this:bT=this,yy=this),this._call=e,this._time=n,LF()},stop:function(){this._call&&(this._call=null,this._time=1/0,LF())}};function Fx(e,t,n){var i=new gg;return i.restart(e,t,n),i}function kre(){N1(),++sh;for(var e=bT,t;e;)(t=sf-e._time)>=0&&e._call.call(void 0,t),e=e._next;--sh}function UP(){sf=(TT=yg.now())+O1,sh=py=0;try{kre()}finally{sh=0,Mre(),sf=0}}function xre(){var e=yg.now(),t=e-TT;t>H5&&(O1-=t,TT=e)}function Mre(){for(var e,t=bT,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:bT=n);yy=e,LF(i)}function LF(e){if(!sh){py&&(py=clearTimeout(py));var t=e-sf;t>24?(e<1/0&&(py=setTimeout(UP,e-yg.now()-O1)),A_&&(A_=clearInterval(A_))):(A_||(TT=yg.now(),A_=setInterval(xre,H5)),sh=1,W5(UP))}}function jP(e,t,n){var i=new gg;return t=t==null?0:+t,i.restart(s=>{i.stop(),e(s+t)},t,n),i}function Are(e,t,n){var i=new gg,s=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,c,d){c=+c,d=d==null?N1():+d,i._restart(function f(u){u+=s,i._restart(f,s+=c,d),a(u)},c,d)},i.restart(e,t,n),i)}var Ore=mx("start","end","cancel","interrupt"),Nre=[],Y5=0,$P=1,PF=2,g0=3,zP=4,DF=5,m0=6;function R1(e,t,n,i,s,a){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;Rre(e,n,{name:t,index:i,group:s,on:Ore,tween:Nre,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Y5})}function kx(e,t){var n=ha(e,t);if(n.state>Y5)throw new Error("too late; already scheduled");return n}function ho(e,t){var n=ha(e,t);if(n.state>g0)throw new Error("too late; already running");return n}function ha(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Rre(e,t,n){var i=e.__transition,s;i[t]=n,n.timer=Fx(a,0,n.time);function a(u){n.state=$P,n.timer.restart(c,n.delay,n.time),n.delay<=u&&c(u-n.delay)}function c(u){var r,h,p,_;if(n.state!==$P)return f();for(r in i)if(_=i[r],_.name===n.name){if(_.state===g0)return jP(c);_.state===zP?(_.state=m0,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete i[r]):+r<t&&(_.state=m0,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete i[r])}if(jP(function(){n.state===g0&&(n.state=zP,n.timer.restart(d,n.delay,n.time),d(u))}),n.state=PF,n.on.call("start",e,e.__data__,n.index,n.group),n.state===PF){for(n.state=g0,s=new Array(p=n.tween.length),r=0,h=-1;r<p;++r)(_=n.tween[r].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=_);s.length=h+1}}function d(u){for(var r=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(f),n.state=DF,1),h=-1,p=s.length;++h<p;)s[h].call(e,r);n.state===DF&&(n.on.call("end",e,e.__data__,n.index,n.group),f())}function f(){n.state=m0,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function Cre(e,t){var n=e.__transition,i,s,a=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((i=n[c]).name!==t){a=!1;continue}s=i.state>PF&&i.state<DF,i.state=m0,i.timer.stop(),i.on.call(s?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[c]}a&&delete e.__transition}}function Lre(e){return this.each(function(){Cre(this,e)})}function Pre(e,t){var n,i;return function(){var s=ho(this,e),a=s.tween;if(a!==n){i=n=a;for(var c=0,d=i.length;c<d;++c)if(i[c].name===t){i=i.slice(),i.splice(c,1);break}}s.tween=i}}function Dre(e,t,n){var i,s;if(typeof n!="function")throw new Error;return function(){var a=ho(this,e),c=a.tween;if(c!==i){s=(i=c).slice();for(var d={name:t,value:n},f=0,u=s.length;f<u;++f)if(s[f].name===t){s[f]=d;break}f===u&&s.push(d)}a.tween=s}}function Ure(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=ha(this.node(),n).tween,s=0,a=i.length,c;s<a;++s)if((c=i[s]).name===e)return c.value;return null}return this.each((t==null?Pre:Dre)(n,e,t))}function xx(e,t,n){var i=e._id;return e.each(function(){var s=ho(this,i);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return ha(s,i).value[t]}}function X5(e,t){var n;return(typeof t=="number"?cr:t instanceof nf?pg:(n=nf(t))?(t=n,pg):Bx)(e,t)}function jre(e){return function(){this.removeAttribute(e)}}function $re(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zre(e,t,n){var i,s=n+"",a;return function(){var c=this.getAttribute(e);return c===s?null:c===i?a:a=t(i=c,n)}}function qre(e,t,n){var i,s=n+"",a;return function(){var c=this.getAttributeNS(e.space,e.local);return c===s?null:c===i?a:a=t(i=c,n)}}function Vre(e,t,n){var i,s,a;return function(){var c,d=n(this),f;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),f=d+"",c===f?null:c===i&&f===s?a:(s=f,a=t(i=c,d)))}}function Gre(e,t,n){var i,s,a;return function(){var c,d=n(this),f;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),f=d+"",c===f?null:c===i&&f===s?a:(s=f,a=t(i=c,d)))}}function Hre(e,t){var n=k1(e),i=n==="transform"?z5:X5;return this.attrTween(e,typeof t=="function"?(n.local?Gre:Vre)(n,i,xx(this,"attr."+e,t)):t==null?(n.local?$re:jre)(n):(n.local?qre:zre)(n,i,t))}function Wre(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Yre(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Xre(e,t){var n,i;function s(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&Yre(e,a)),n}return s._value=t,s}function Kre(e,t){var n,i;function s(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&Wre(e,a)),n}return s._value=t,s}function Jre(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=k1(e);return this.tween(n,(i.local?Xre:Kre)(i,t))}function Qre(e,t){return function(){kx(this,e).delay=+t.apply(this,arguments)}}function Zre(e,t){return t=+t,function(){kx(this,e).delay=t}}function eae(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Qre:Zre)(t,e)):ha(this.node(),t).delay}function tae(e,t){return function(){ho(this,e).duration=+t.apply(this,arguments)}}function nae(e,t){return t=+t,function(){ho(this,e).duration=t}}function iae(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tae:nae)(t,e)):ha(this.node(),t).duration}function sae(e,t){if(typeof t!="function")throw new Error;return function(){ho(this,e).ease=t}}function rae(e){var t=this._id;return arguments.length?this.each(sae(t,e)):ha(this.node(),t).ease}function aae(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ho(this,e).ease=n}}function oae(e){if(typeof e!="function")throw new Error;return this.each(aae(this._id,e))}function lae(e){typeof e!="function"&&(e=d5(e));for(var t=this._groups,n=t.length,i=new Array(n),s=0;s<n;++s)for(var a=t[s],c=a.length,d=i[s]=[],f,u=0;u<c;++u)(f=a[u])&&e.call(f,f.__data__,u,a)&&d.push(f);return new yl(i,this._parents,this._name,this._id)}function cae(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,s=n.length,a=Math.min(i,s),c=new Array(i),d=0;d<a;++d)for(var f=t[d],u=n[d],r=f.length,h=c[d]=new Array(r),p,_=0;_<r;++_)(p=f[_]||u[_])&&(h[_]=p);for(;d<i;++d)c[d]=t[d];return new yl(c,this._parents,this._name,this._id)}function dae(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function fae(e,t,n){var i,s,a=dae(t)?kx:ho;return function(){var c=a(this,e),d=c.on;d!==i&&(s=(i=d).copy()).on(t,n),c.on=s}}function uae(e,t){var n=this._id;return arguments.length<2?ha(this.node(),n).on.on(e):this.each(fae(n,e,t))}function hae(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _ae(){return this.on("end.remove",hae(this._id))}function pae(e){var t=this._name,n=this._id;typeof e!="function"&&(e=wx(e));for(var i=this._groups,s=i.length,a=new Array(s),c=0;c<s;++c)for(var d=i[c],f=d.length,u=a[c]=new Array(f),r,h,p=0;p<f;++p)(r=d[p])&&(h=e.call(r,r.__data__,p,d))&&("__data__"in r&&(h.__data__=r.__data__),u[p]=h,R1(u[p],t,n,p,u,ha(r,n)));return new yl(a,this._parents,t,n)}function yae(e){var t=this._name,n=this._id;typeof e!="function"&&(e=c5(e));for(var i=this._groups,s=i.length,a=[],c=[],d=0;d<s;++d)for(var f=i[d],u=f.length,r,h=0;h<u;++h)if(r=f[h]){for(var p=e.call(r,r.__data__,h,f),_,l=ha(r,n),b=0,m=p.length;b<m;++b)(_=p[b])&&R1(_,t,n,b,p,l);a.push(p),c.push(r)}return new yl(a,c,t,n)}var gae=nm.prototype.constructor;function mae(){return new gae(this._groups,this._parents)}function wae(e,t){var n,i,s;return function(){var a=nh(this,e),c=(this.style.removeProperty(e),nh(this,e));return a===c?null:a===n&&c===i?s:s=t(n=a,i=c)}}function K5(e){return function(){this.style.removeProperty(e)}}function bae(e,t,n){var i,s=n+"",a;return function(){var c=nh(this,e);return c===s?null:c===i?a:a=t(i=c,n)}}function Tae(e,t,n){var i,s,a;return function(){var c=nh(this,e),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(e),nh(this,e))),c===f?null:c===i&&f===s?a:(s=f,a=t(i=c,d))}}function vae(e,t){var n,i,s,a="style."+t,c="end."+a,d;return function(){var f=ho(this,e),u=f.on,r=f.value[a]==null?d||(d=K5(t)):void 0;(u!==n||s!==r)&&(i=(n=u).copy()).on(c,s=r),f.on=i}}function Eae(e,t,n){var i=(e+="")=="transform"?$5:X5;return t==null?this.styleTween(e,wae(e,i)).on("end.style."+e,K5(e)):typeof t=="function"?this.styleTween(e,Tae(e,i,xx(this,"style."+e,t))).each(vae(this._id,e)):this.styleTween(e,bae(e,i,t),n).on("end.style."+e,null)}function Sae(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Bae(e,t,n){var i,s;function a(){var c=t.apply(this,arguments);return c!==s&&(i=(s=c)&&Sae(e,c,n)),i}return a._value=t,a}function Iae(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Bae(e,t,n??""))}function Fae(e){return function(){this.textContent=e}}function kae(e){return function(){var t=e(this);this.textContent=t??""}}function xae(e){return this.tween("text",typeof e=="function"?kae(xx(this,"text",e)):Fae(e==null?"":e+""))}function Mae(e){return function(t){this.textContent=e.call(this,t)}}function Aae(e){var t,n;function i(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&Mae(s)),t}return i._value=e,i}function Oae(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Aae(e))}function Nae(){for(var e=this._name,t=this._id,n=J5(),i=this._groups,s=i.length,a=0;a<s;++a)for(var c=i[a],d=c.length,f,u=0;u<d;++u)if(f=c[u]){var r=ha(f,t);R1(f,e,n,u,c,{time:r.time+r.delay+r.duration,delay:0,duration:r.duration,ease:r.ease})}return new yl(i,this._parents,e,n)}function Rae(){var e,t,n=this,i=n._id,s=n.size();return new Promise(function(a,c){var d={value:c},f={value:function(){--s===0&&a()}};n.each(function(){var u=ho(this,i),r=u.on;r!==e&&(t=(e=r).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(f)),u.on=t}),s===0&&a()})}var Cae=0;function yl(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function J5(){return++Cae}var ko=nm.prototype;yl.prototype={constructor:yl,select:pae,selectAll:yae,selectChild:ko.selectChild,selectChildren:ko.selectChildren,filter:lae,merge:cae,selection:mae,transition:Nae,call:ko.call,nodes:ko.nodes,node:ko.node,size:ko.size,empty:ko.empty,each:ko.each,on:uae,attr:Hre,attrTween:Jre,style:Eae,styleTween:Iae,text:xae,textTween:Oae,remove:_ae,tween:Ure,delay:eae,duration:iae,ease:rae,easeVarying:oae,end:Rae,[Symbol.iterator]:ko[Symbol.iterator]};function Lae(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Pae={time:null,delay:0,duration:250,ease:Lae};function Dae(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Uae(e){var t,n;e instanceof yl?(t=e._id,e=e._name):(t=J5(),(n=Pae).time=N1(),e=e==null?null:e+"");for(var i=this._groups,s=i.length,a=0;a<s;++a)for(var c=i[a],d=c.length,f,u=0;u<d;++u)(f=c[u])&&R1(f,e,t,u,c,n||Dae(f,t));return new yl(i,this._parents,e,t)}nm.prototype.interrupt=Lre;nm.prototype.transition=Uae;const UF=Math.PI,jF=2*UF,kd=1e-6,jae=jF-kd;function Q5(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function $ae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Q5;const n=10**t;return function(i){this._+=i[0];for(let s=1,a=i.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}let Mx=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Q5:$ae(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,s){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,n,i,s,a,c){this._append`C${+t},${+n},${+i},${+s},${this._x1=+a},${this._y1=+c}`}arcTo(t,n,i,s,a){if(t=+t,n=+n,i=+i,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let c=this._x1,d=this._y1,f=i-t,u=s-n,r=c-t,h=d-n,p=r*r+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>kd)if(!(Math.abs(h*f-u*r)>kd)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let _=i-c,l=s-d,b=f*f+u*u,m=_*_+l*l,E=Math.sqrt(b),B=Math.sqrt(p),I=a*Math.tan((UF-Math.acos((b+p-m)/(2*E*B)))/2),k=I/B,F=I/E;Math.abs(k-1)>kd&&this._append`L${t+k*r},${n+k*h}`,this._append`A${a},${a},0,0,${+(h*_>r*l)},${this._x1=t+F*f},${this._y1=n+F*u}`}}arc(t,n,i,s,a,c){if(t=+t,n=+n,i=+i,c=!!c,i<0)throw new Error(`negative radius: ${i}`);let d=i*Math.cos(s),f=i*Math.sin(s),u=t+d,r=n+f,h=1^c,p=c?s-a:a-s;this._x1===null?this._append`M${u},${r}`:(Math.abs(this._x1-u)>kd||Math.abs(this._y1-r)>kd)&&this._append`L${u},${r}`,i&&(p<0&&(p=p%jF+jF),p>jae?this._append`A${i},${i},0,1,${h},${t-d},${n-f}A${i},${i},0,1,${h},${this._x1=u},${this._y1=r}`:p>kd&&this._append`A${i},${i},0,${+(p>=UF)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}};function C1(){return new Mx}C1.prototype=Mx.prototype;const ll=11102230246251565e-32,Ei=134217729,zae=(3+8*ll)*ll;function cB(e,t,n,i,s){let a,c,d,f,u=t[0],r=i[0],h=0,p=0;r>u==r>-u?(a=u,u=t[++h]):(a=r,r=i[++p]);let _=0;if(h<e&&p<n)for(r>u==r>-u?(c=u+a,d=a-(c-u),u=t[++h]):(c=r+a,d=a-(c-r),r=i[++p]),a=c,d!==0&&(s[_++]=d);h<e&&p<n;)r>u==r>-u?(c=a+u,f=c-a,d=a-(c-f)+(u-f),u=t[++h]):(c=a+r,f=c-a,d=a-(c-f)+(r-f),r=i[++p]),a=c,d!==0&&(s[_++]=d);for(;h<e;)c=a+u,f=c-a,d=a-(c-f)+(u-f),u=t[++h],a=c,d!==0&&(s[_++]=d);for(;p<n;)c=a+r,f=c-a,d=a-(c-f)+(r-f),r=i[++p],a=c,d!==0&&(s[_++]=d);return(a!==0||_===0)&&(s[_++]=a),_}function qae(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function rm(e){return new Float64Array(e)}const Vae=(3+16*ll)*ll,Gae=(2+12*ll)*ll,Hae=(9+64*ll)*ll*ll,Jf=rm(4),qP=rm(8),VP=rm(12),GP=rm(16),$i=rm(4);function Wae(e,t,n,i,s,a,c){let d,f,u,r,h,p,_,l,b,m,E,B,I,k,F,x,M,R;const P=e-s,C=n-s,D=t-a,j=i-a;k=P*j,p=Ei*P,_=p-(p-P),l=P-_,p=Ei*j,b=p-(p-j),m=j-b,F=l*m-(k-_*b-l*b-_*m),x=D*C,p=Ei*D,_=p-(p-D),l=D-_,p=Ei*C,b=p-(p-C),m=C-b,M=l*m-(x-_*b-l*b-_*m),E=F-M,h=F-E,Jf[0]=F-(E+h)+(h-M),B=k+E,h=B-k,I=k-(B-h)+(E-h),E=I-x,h=I-E,Jf[1]=I-(E+h)+(h-x),R=B+E,h=R-B,Jf[2]=B-(R-h)+(E-h),Jf[3]=R;let $=qae(4,Jf),W=Gae*c;if($>=W||-$>=W||(h=e-P,d=e-(P+h)+(h-s),h=n-C,u=n-(C+h)+(h-s),h=t-D,f=t-(D+h)+(h-a),h=i-j,r=i-(j+h)+(h-a),d===0&&f===0&&u===0&&r===0)||(W=Hae*c+zae*Math.abs($),$+=P*r+j*d-(D*u+C*f),$>=W||-$>=W))return $;k=d*j,p=Ei*d,_=p-(p-d),l=d-_,p=Ei*j,b=p-(p-j),m=j-b,F=l*m-(k-_*b-l*b-_*m),x=f*C,p=Ei*f,_=p-(p-f),l=f-_,p=Ei*C,b=p-(p-C),m=C-b,M=l*m-(x-_*b-l*b-_*m),E=F-M,h=F-E,$i[0]=F-(E+h)+(h-M),B=k+E,h=B-k,I=k-(B-h)+(E-h),E=I-x,h=I-E,$i[1]=I-(E+h)+(h-x),R=B+E,h=R-B,$i[2]=B-(R-h)+(E-h),$i[3]=R;const H=cB(4,Jf,4,$i,qP);k=P*r,p=Ei*P,_=p-(p-P),l=P-_,p=Ei*r,b=p-(p-r),m=r-b,F=l*m-(k-_*b-l*b-_*m),x=D*u,p=Ei*D,_=p-(p-D),l=D-_,p=Ei*u,b=p-(p-u),m=u-b,M=l*m-(x-_*b-l*b-_*m),E=F-M,h=F-E,$i[0]=F-(E+h)+(h-M),B=k+E,h=B-k,I=k-(B-h)+(E-h),E=I-x,h=I-E,$i[1]=I-(E+h)+(h-x),R=B+E,h=R-B,$i[2]=B-(R-h)+(E-h),$i[3]=R;const G=cB(H,qP,4,$i,VP);k=d*r,p=Ei*d,_=p-(p-d),l=d-_,p=Ei*r,b=p-(p-r),m=r-b,F=l*m-(k-_*b-l*b-_*m),x=f*u,p=Ei*f,_=p-(p-f),l=f-_,p=Ei*u,b=p-(p-u),m=u-b,M=l*m-(x-_*b-l*b-_*m),E=F-M,h=F-E,$i[0]=F-(E+h)+(h-M),B=k+E,h=B-k,I=k-(B-h)+(E-h),E=I-x,h=I-E,$i[1]=I-(E+h)+(h-x),R=B+E,h=R-B,$i[2]=B-(R-h)+(E-h),$i[3]=R;const z=cB(G,VP,4,$i,GP);return GP[z-1]}function Tb(e,t,n,i,s,a){const c=(t-a)*(n-s),d=(e-s)*(i-a),f=c-d,u=Math.abs(c+d);return Math.abs(f)>=Vae*u?f:-Wae(e,t,n,i,s,a,u)}const HP=Math.pow(2,-52),vb=new Uint32Array(512);class vT{static from(t,n=Qae,i=Zae){const s=t.length,a=new Float64Array(s*2);for(let c=0;c<s;c++){const d=t[c];a[2*c]=n(d),a[2*c+1]=i(d)}return new vT(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:s,_hullHash:a}=this,c=t.length>>1;let d=1/0,f=1/0,u=-1/0,r=-1/0;for(let P=0;P<c;P++){const C=t[2*P],D=t[2*P+1];C<d&&(d=C),D<f&&(f=D),C>u&&(u=C),D>r&&(r=D),this._ids[P]=P}const h=(d+u)/2,p=(f+r)/2;let _,l,b;for(let P=0,C=1/0;P<c;P++){const D=dB(h,p,t[2*P],t[2*P+1]);D<C&&(_=P,C=D)}const m=t[2*_],E=t[2*_+1];for(let P=0,C=1/0;P<c;P++){if(P===_)continue;const D=dB(m,E,t[2*P],t[2*P+1]);D<C&&D>0&&(l=P,C=D)}let B=t[2*l],I=t[2*l+1],k=1/0;for(let P=0;P<c;P++){if(P===_||P===l)continue;const C=Kae(m,E,B,I,t[2*P],t[2*P+1]);C<k&&(b=P,k=C)}let F=t[2*b],x=t[2*b+1];if(k===1/0){for(let D=0;D<c;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];ku(this._ids,this._dists,0,c-1);const P=new Uint32Array(c);let C=0;for(let D=0,j=-1/0;D<c;D++){const $=this._ids[D],W=this._dists[$];W>j&&(P[C++]=$,j=W)}this.hull=P.subarray(0,C),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Tb(m,E,B,I,F,x)<0){const P=l,C=B,D=I;l=b,B=F,I=x,b=P,F=C,x=D}const M=Jae(m,E,B,I,F,x);this._cx=M.x,this._cy=M.y;for(let P=0;P<c;P++)this._dists[P]=dB(t[2*P],t[2*P+1],M.x,M.y);ku(this._ids,this._dists,0,c-1),this._hullStart=_;let R=3;i[_]=n[b]=l,i[l]=n[_]=b,i[b]=n[l]=_,s[_]=0,s[l]=1,s[b]=2,a.fill(-1),a[this._hashKey(m,E)]=_,a[this._hashKey(B,I)]=l,a[this._hashKey(F,x)]=b,this.trianglesLen=0,this._addTriangle(_,l,b,-1,-1,-1);for(let P=0,C,D;P<this._ids.length;P++){const j=this._ids[P],$=t[2*j],W=t[2*j+1];if(P>0&&Math.abs($-C)<=HP&&Math.abs(W-D)<=HP||(C=$,D=W,j===_||j===l||j===b))continue;let H=0;for(let ce=0,se=this._hashKey($,W);ce<this._hashSize&&(H=a[(se+ce)%this._hashSize],!(H!==-1&&H!==i[H]));ce++);H=n[H];let G=H,z;for(;z=i[G],Tb($,W,t[2*G],t[2*G+1],t[2*z],t[2*z+1])>=0;)if(G=z,G===H){G=-1;break}if(G===-1)continue;let q=this._addTriangle(G,j,i[G],-1,-1,s[G]);s[j]=this._legalize(q+2),s[G]=q,R++;let ie=i[G];for(;z=i[ie],Tb($,W,t[2*ie],t[2*ie+1],t[2*z],t[2*z+1])<0;)q=this._addTriangle(ie,j,z,s[j],-1,s[ie]),s[j]=this._legalize(q+2),i[ie]=ie,R--,ie=z;if(G===H)for(;z=n[G],Tb($,W,t[2*z],t[2*z+1],t[2*G],t[2*G+1])<0;)q=this._addTriangle(z,j,G,-1,s[G],s[z]),this._legalize(q+2),s[z]=q,i[G]=G,R--,G=z;this._hullStart=n[j]=G,i[G]=n[ie]=j,i[j]=ie,a[this._hashKey($,W)]=j,a[this._hashKey(t[2*G],t[2*G+1])]=G}this.hull=new Uint32Array(R);for(let P=0,C=this._hullStart;P<R;P++)this.hull[P]=C,C=i[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Yae(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:s}=this;let a=0,c=0;for(;;){const d=i[t],f=t-t%3;if(c=f+(t+2)%3,d===-1){if(a===0)break;t=vb[--a];continue}const u=d-d%3,r=f+(t+1)%3,h=u+(d+2)%3,p=n[c],_=n[t],l=n[r],b=n[h];if(Xae(s[2*p],s[2*p+1],s[2*_],s[2*_+1],s[2*l],s[2*l+1],s[2*b],s[2*b+1])){n[t]=b,n[d]=p;const E=i[h];if(E===-1){let I=this._hullStart;do{if(this._hullTri[I]===h){this._hullTri[I]=t;break}I=this._hullPrev[I]}while(I!==this._hullStart)}this._link(t,E),this._link(d,i[c]),this._link(c,h);const B=u+(d+1)%3;a<vb.length&&(vb[a++]=B)}else{if(a===0)break;t=vb[--a]}}return c}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,s,a,c){const d=this.trianglesLen;return this._triangles[d]=t,this._triangles[d+1]=n,this._triangles[d+2]=i,this._link(d,s),this._link(d+1,a),this._link(d+2,c),this.trianglesLen+=3,d}}function Yae(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function dB(e,t,n,i){const s=e-n,a=t-i;return s*s+a*a}function Xae(e,t,n,i,s,a,c,d){const f=e-c,u=t-d,r=n-c,h=i-d,p=s-c,_=a-d,l=f*f+u*u,b=r*r+h*h,m=p*p+_*_;return f*(h*m-b*_)-u*(r*m-b*p)+l*(r*_-h*p)<0}function Kae(e,t,n,i,s,a){const c=n-e,d=i-t,f=s-e,u=a-t,r=c*c+d*d,h=f*f+u*u,p=.5/(c*u-d*f),_=(u*r-d*h)*p,l=(c*h-f*r)*p;return _*_+l*l}function Jae(e,t,n,i,s,a){const c=n-e,d=i-t,f=s-e,u=a-t,r=c*c+d*d,h=f*f+u*u,p=.5/(c*u-d*f),_=e+(u*r-d*h)*p,l=t+(c*h-f*r)*p;return{x:_,y:l}}function ku(e,t,n,i){if(i-n<=20)for(let s=n+1;s<=i;s++){const a=e[s],c=t[a];let d=s-1;for(;d>=n&&t[e[d]]>c;)e[d+1]=e[d--];e[d+1]=a}else{const s=n+i>>1;let a=n+1,c=i;O_(e,s,a),t[e[n]]>t[e[i]]&&O_(e,n,i),t[e[a]]>t[e[i]]&&O_(e,a,i),t[e[n]]>t[e[a]]&&O_(e,n,a);const d=e[a],f=t[d];for(;;){do a++;while(t[e[a]]<f);do c--;while(t[e[c]]>f);if(c<a)break;O_(e,a,c)}e[n+1]=e[c],e[c]=d,i-a+1>=c-n?(ku(e,t,a,i),ku(e,t,n,c-1)):(ku(e,t,n,c-1),ku(e,t,a,i))}}function O_(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Qae(e){return e[0]}function Zae(e){return e[1]}const WP=1e-6;class $d{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const s=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${s},${a}`:(Math.abs(this._x1-s)>WP||Math.abs(this._y1-a)>WP)&&(this._+="L"+s+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=s},${this._y1=a}`)}rect(t,n,i,s){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+s}h${-i}Z`}value(){return this._||null}}class $F{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let eoe=class{constructor(t,[n,i,s,a]=[0,0,960,500]){if(!((s=+s)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=s,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:s}=this;let a,c;const d=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,m=0,E=i.length,B,I;b<E;b+=3,m+=2){const k=i[b]*2,F=i[b+1]*2,x=i[b+2]*2,M=t[k],R=t[k+1],P=t[F],C=t[F+1],D=t[x],j=t[x+1],$=P-M,W=C-R,H=D-M,G=j-R,z=($*G-W*H)*2;if(Math.abs(z)<1e-9){if(a===void 0){a=c=0;for(const ie of n)a+=t[ie*2],c+=t[ie*2+1];a/=n.length,c/=n.length}const q=1e9*Math.sign((a-M)*G-(c-R)*H);B=(M+D)/2-q*G,I=(R+j)/2+q*H}else{const q=1/z,ie=$*$+W*W,ce=H*H+G*G;B=M+(G*ie-W*ce)*q,I=R+($*ce-H*ie)*q}d[m]=B,d[m+1]=I}let f=n[n.length-1],u,r=f*4,h,p=t[2*f],_,l=t[2*f+1];s.fill(0);for(let b=0;b<n.length;++b)f=n[b],u=r,h=p,_=l,r=f*4,p=t[2*f],l=t[2*f+1],s[u+2]=s[r]=_-l,s[u+3]=s[r+1]=p-h}render(t){const n=t==null?t=new $d:void 0,{delaunay:{halfedges:i,inedges:s,hull:a},circumcenters:c,vectors:d}=this;if(a.length<=1)return null;for(let r=0,h=i.length;r<h;++r){const p=i[r];if(p<r)continue;const _=Math.floor(r/3)*2,l=Math.floor(p/3)*2,b=c[_],m=c[_+1],E=c[l],B=c[l+1];this._renderSegment(b,m,E,B,t)}let f,u=a[a.length-1];for(let r=0;r<a.length;++r){f=u,u=a[r];const h=Math.floor(s[u]/3)*2,p=c[h],_=c[h+1],l=f*4,b=this._project(p,_,d[l+2],d[l+3]);b&&this._renderSegment(p,_,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new $d:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new $d:void 0,s=this._clip(t);if(s===null||!s.length)return;n.moveTo(s[0],s[1]);let a=s.length;for(;s[0]===s[a-2]&&s[1]===s[a-1]&&a>1;)a-=2;for(let c=2;c<a;c+=2)(s[c]!==s[c-2]||s[c+1]!==s[c-1])&&n.lineTo(s[c],s[c+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const s=this.cellPolygon(n);s&&(s.index=n,yield s)}}cellPolygon(t){const n=new $F;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,s,a){let c;const d=this._regioncode(t,n),f=this._regioncode(i,s);d===0&&f===0?(a.moveTo(t,n),a.lineTo(i,s)):(c=this._clipSegment(t,n,i,s,d,f))&&(a.moveTo(c[0],c[1]),a.lineTo(c[2],c[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const s=this._clip(i);if(s){e:for(let a=0,c=n.length;a<c;a+=2)for(let d=0,f=s.length;d<f;d+=2)if(n[a]===s[d]&&n[a+1]===s[d+1]&&n[(a+2)%c]===s[(d+f-2)%f]&&n[(a+3)%c]===s[(d+f-1)%f]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:s,triangles:a}}=this,c=i[t];if(c===-1)return null;const d=[];let f=c;do{const u=Math.floor(f/3);if(d.push(n[u*2],n[u*2+1]),f=f%3===2?f-2:f+1,a[f]!==t)break;f=s[f]}while(f!==c&&f!==-1);return d}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,s=t*4;return this._simplify(i[s]||i[s+1]?this._clipInfinite(t,n,i[s],i[s+1],i[s+2],i[s+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let s=null,a,c,d=n[i-2],f=n[i-1],u,r=this._regioncode(d,f),h,p=0;for(let _=0;_<i;_+=2)if(a=d,c=f,d=n[_],f=n[_+1],u=r,r=this._regioncode(d,f),u===0&&r===0)h=p,p=0,s?s.push(d,f):s=[d,f];else{let l,b,m,E,B;if(u===0){if((l=this._clipSegment(a,c,d,f,u,r))===null)continue;[b,m,E,B]=l}else{if((l=this._clipSegment(d,f,a,c,r,u))===null)continue;[E,B,b,m]=l,h=p,p=this._edgecode(b,m),h&&p&&this._edge(t,h,p,s,s.length),s?s.push(b,m):s=[b,m]}h=p,p=this._edgecode(E,B),h&&p&&this._edge(t,h,p,s,s.length),s?s.push(E,B):s=[E,B]}if(s)h=p,p=this._edgecode(s[0],s[1]),h&&p&&this._edge(t,h,p,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,n,i,s,a,c){const d=a<c;for(d&&([t,n,i,s,a,c]=[i,s,t,n,c,a]);;){if(a===0&&c===0)return d?[i,s,t,n]:[t,n,i,s];if(a&c)return null;let f,u,r=a||c;r&8?(f=t+(i-t)*(this.ymax-n)/(s-n),u=this.ymax):r&4?(f=t+(i-t)*(this.ymin-n)/(s-n),u=this.ymin):r&2?(u=n+(s-n)*(this.xmax-t)/(i-t),f=this.xmax):(u=n+(s-n)*(this.xmin-t)/(i-t),f=this.xmin),a?(t=f,n=u,a=this._regioncode(t,n)):(i=f,s=u,c=this._regioncode(i,s))}}_clipInfinite(t,n,i,s,a,c){let d=Array.from(n),f;if((f=this._project(d[0],d[1],i,s))&&d.unshift(f[0],f[1]),(f=this._project(d[d.length-2],d[d.length-1],a,c))&&d.push(f[0],f[1]),d=this._clipFinite(t,d))for(let u=0,r=d.length,h,p=this._edgecode(d[r-2],d[r-1]);u<r;u+=2)h=p,p=this._edgecode(d[u],d[u+1]),h&&p&&(u=this._edge(t,h,p,d,u),r=d.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(d=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return d}_edge(t,n,i,s,a){for(;n!==i;){let c,d;switch(n){case 5:n=4;continue;case 4:n=6,c=this.xmax,d=this.ymin;break;case 6:n=2;continue;case 2:n=10,c=this.xmax,d=this.ymax;break;case 10:n=8;continue;case 8:n=9,c=this.xmin,d=this.ymax;break;case 9:n=1;continue;case 1:n=5,c=this.xmin,d=this.ymin;break}(s[a]!==c||s[a+1]!==d)&&this.contains(t,c,d)&&(s.splice(a,0,c,d),a+=2)}return a}_project(t,n,i,s){let a=1/0,c,d,f;if(s<0){if(n<=this.ymin)return null;(c=(this.ymin-n)/s)<a&&(f=this.ymin,d=t+(a=c)*i)}else if(s>0){if(n>=this.ymax)return null;(c=(this.ymax-n)/s)<a&&(f=this.ymax,d=t+(a=c)*i)}if(i>0){if(t>=this.xmax)return null;(c=(this.xmax-t)/i)<a&&(d=this.xmax,f=n+(a=c)*s)}else if(i<0){if(t<=this.xmin)return null;(c=(this.xmin-t)/i)<a&&(d=this.xmin,f=n+(a=c)*s)}return[d,f]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,s=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[s]||t[n+1]===t[i+1]&&t[i+1]===t[s+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const toe=2*Math.PI,Qf=Math.pow;function noe(e){return e[0]}function ioe(e){return e[1]}function soe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const s=2*t[i],a=2*t[i+1],c=2*t[i+2];if((n[c]-n[s])*(n[a+1]-n[s+1])-(n[a]-n[s])*(n[c+1]-n[s+1])>1e-10)return!1}return!0}function roe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Ax{static from(t,n=noe,i=ioe,s){return new Ax("length"in t?aoe(t,n,i,s):Float64Array.from(ooe(t,n,i,s)))}constructor(t){this._delaunator=new vT(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&soe(t)){this.collinear=Int32Array.from({length:n.length/2},(p,_)=>_).sort((p,_)=>n[2*p]-n[2*_]||n[2*p+1]-n[2*_+1]);const f=this.collinear[0],u=this.collinear[this.collinear.length-1],r=[n[2*f],n[2*f+1],n[2*u],n[2*u+1]],h=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let p=0,_=n.length/2;p<_;++p){const l=roe(n[2*p],n[2*p+1],h);n[2*p]=l[0],n[2*p+1]=l[1]}this._delaunator=new vT(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,s=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),d=this._hullIndex.fill(-1);for(let f=0,u=i.length;f<u;++f){const r=a[f%3===2?f-2:f+1];(i[f]===-1||c[r]===-1)&&(c[r]=f)}for(let f=0,u=s.length;f<u;++f)d[s[f]]=f;s.length<=2&&s.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=s[0],c[s[0]]=1,s.length===2&&(c[s[1]]=0,this.triangles[1]=s[1],this.triangles[2]=s[1]))}voronoi(t){return new eoe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:s,halfedges:a,triangles:c,collinear:d}=this;if(d){const h=d.indexOf(t);h>0&&(yield d[h-1]),h<d.length-1&&(yield d[h+1]);return}const f=n[t];if(f===-1)return;let u=f,r=-1;do{if(yield r=c[u],u=u%3===2?u-2:u+1,c[u]!==t)return;if(u=a[u],u===-1){const h=i[(s[t]+1)%i.length];h!==r&&(yield h);return}}while(u!==f)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const s=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==s;)i=a;return a}_step(t,n,i){const{inedges:s,hull:a,_hullIndex:c,halfedges:d,triangles:f,points:u}=this;if(s[t]===-1||!u.length)return(t+1)%(u.length>>1);let r=t,h=Qf(n-u[t*2],2)+Qf(i-u[t*2+1],2);const p=s[t];let _=p;do{let l=f[_];const b=Qf(n-u[l*2],2)+Qf(i-u[l*2+1],2);if(b<h&&(h=b,r=l),_=_%3===2?_-2:_+1,f[_]!==t)break;if(_=d[_],_===-1){if(_=a[(c[t]+1)%a.length],_!==l&&Qf(n-u[_*2],2)+Qf(i-u[_*2+1],2)<h)return _;break}}while(_!==p);return r}render(t){const n=t==null?t=new $d:void 0,{points:i,halfedges:s,triangles:a}=this;for(let c=0,d=s.length;c<d;++c){const f=s[c];if(f<c)continue;const u=a[c]*2,r=a[f]*2;t.moveTo(i[u],i[u+1]),t.lineTo(i[r],i[r+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new $d:void 0,{points:s}=this;for(let a=0,c=s.length;a<c;a+=2){const d=s[a],f=s[a+1];t.moveTo(d+n,f),t.arc(d,f,n,0,toe)}return i&&i.value()}renderHull(t){const n=t==null?t=new $d:void 0,{hull:i,points:s}=this,a=i[0]*2,c=i.length;t.moveTo(s[a],s[a+1]);for(let d=1;d<c;++d){const f=2*i[d];t.lineTo(s[f],s[f+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new $F;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new $d:void 0,{points:s,triangles:a}=this,c=a[t*=3]*2,d=a[t+1]*2,f=a[t+2]*2;return n.moveTo(s[c],s[c+1]),n.lineTo(s[d],s[d+1]),n.lineTo(s[f],s[f+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new $F;return this.renderTriangle(t,n),n.value()}}function aoe(e,t,n,i){const s=e.length,a=new Float64Array(s*2);for(let c=0;c<s;++c){const d=e[c];a[c*2]=t.call(i,d,c,e),a[c*2+1]=n.call(i,d,c,e)}return a}function*ooe(e,t,n,i){let s=0;for(const a of e)yield t.call(i,a,s,e),yield n.call(i,a,s,e),++s}var YP={},fB={},uB=34,N_=10,hB=13;function Z5(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function loe(e,t){var n=Z5(e);return function(i,s){return t(n(i),s,e)}}function XP(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var s in i)s in t||n.push(t[s]=s)}),n}function us(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function coe(e){return e<0?"-"+us(-e,6):e>9999?"+"+us(e,6):us(e,4)}function doe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":coe(e.getUTCFullYear())+"-"+us(e.getUTCMonth()+1,2)+"-"+us(e.getUTCDate(),2)+(s?"T"+us(t,2)+":"+us(n,2)+":"+us(i,2)+"."+us(s,3)+"Z":i?"T"+us(t,2)+":"+us(n,2)+":"+us(i,2)+"Z":n||t?"T"+us(t,2)+":"+us(n,2)+"Z":"")}function foe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var _,l,b=s(h,function(m,E){if(_)return _(m,E-1);l=m,_=p?loe(m,p):Z5(m)});return b.columns=l||[],b}function s(h,p){var _=[],l=h.length,b=0,m=0,E,B=l<=0,I=!1;h.charCodeAt(l-1)===N_&&--l,h.charCodeAt(l-1)===hB&&--l;function k(){if(B)return fB;if(I)return I=!1,YP;var x,M=b,R;if(h.charCodeAt(M)===uB){for(;b++<l&&h.charCodeAt(b)!==uB||h.charCodeAt(++b)===uB;);return(x=b)>=l?B=!0:(R=h.charCodeAt(b++))===N_?I=!0:R===hB&&(I=!0,h.charCodeAt(b)===N_&&++b),h.slice(M+1,x-1).replace(/""/g,'"')}for(;b<l;){if((R=h.charCodeAt(x=b++))===N_)I=!0;else if(R===hB)I=!0,h.charCodeAt(b)===N_&&++b;else if(R!==n)continue;return h.slice(M,x)}return B=!0,h.slice(M,l)}for(;(E=k())!==fB;){for(var F=[];E!==YP&&E!==fB;)F.push(E),E=k();p&&(F=p(F,m++))==null||_.push(F)}return _}function a(h,p){return h.map(function(_){return p.map(function(l){return r(_[l])}).join(e)})}function c(h,p){return p==null&&(p=XP(h)),[p.map(r).join(e)].concat(a(h,p)).join(`
`)}function d(h,p){return p==null&&(p=XP(h)),a(h,p).join(`
`)}function f(h){return h.map(u).join(`
`)}function u(h){return h.map(r).join(e)}function r(h){return h==null?"":h instanceof Date?doe(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:s,format:c,formatBody:d,formatRows:f,formatRow:u,formatValue:r}}function uoe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function s(){var a,c=n.length,d,f=0,u=0;for(a=0;a<c;++a)d=n[a],f+=d.x,u+=d.y;for(f=(f/c-e)*i,u=(u/c-t)*i,a=0;a<c;++a)d=n[a],d.x-=f,d.y-=u}return s.initialize=function(a){n=a},s.x=function(a){return arguments.length?(e=+a,s):e},s.y=function(a){return arguments.length?(t=+a,s):t},s.strength=function(a){return arguments.length?(i=+a,s):i},s}function hoe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return eq(this.cover(t,n),t,n,e)}function eq(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var s,a=e._root,c={data:i},d=e._x0,f=e._y0,u=e._x1,r=e._y1,h,p,_,l,b,m,E,B;if(!a)return e._root=c,e;for(;a.length;)if((b=t>=(h=(d+u)/2))?d=h:u=h,(m=n>=(p=(f+r)/2))?f=p:r=p,s=a,!(a=a[E=m<<1|b]))return s[E]=c,e;if(_=+e._x.call(null,a.data),l=+e._y.call(null,a.data),t===_&&n===l)return c.next=a,s?s[E]=c:e._root=c,e;do s=s?s[E]=new Array(4):e._root=new Array(4),(b=t>=(h=(d+u)/2))?d=h:u=h,(m=n>=(p=(f+r)/2))?f=p:r=p;while((E=m<<1|b)===(B=(l>=p)<<1|_>=h));return s[B]=a,s[E]=c,e}function _oe(e){var t,n,i=e.length,s,a,c=new Array(i),d=new Array(i),f=1/0,u=1/0,r=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(s=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(c[n]=s,d[n]=a,s<f&&(f=s),s>r&&(r=s),a<u&&(u=a),a>h&&(h=a));if(f>r||u>h)return this;for(this.cover(f,u).cover(r,h),n=0;n<i;++n)eq(this,c[n],d[n],e[n]);return this}function poe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,s=this._x1,a=this._y1;if(isNaN(n))s=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var c=s-n||1,d=this._root,f,u;n>e||e>=s||i>t||t>=a;)switch(u=(t<i)<<1|e<n,f=new Array(4),f[u]=d,d=f,c*=2,u){case 0:s=n+c,a=i+c;break;case 1:n=s-c,a=i+c;break;case 2:s=n+c,i=a-c;break;case 3:n=s-c,i=a-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=n,this._y0=i,this._x1=s,this._y1=a,this}function yoe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function goe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ki(e,t,n,i,s){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=s}function moe(e,t,n){var i,s=this._x0,a=this._y0,c,d,f,u,r=this._x1,h=this._y1,p=[],_=this._root,l,b;for(_&&p.push(new Ki(_,s,a,r,h)),n==null?n=1/0:(s=e-n,a=t-n,r=e+n,h=t+n,n*=n);l=p.pop();)if(!(!(_=l.node)||(c=l.x0)>r||(d=l.y0)>h||(f=l.x1)<s||(u=l.y1)<a))if(_.length){var m=(c+f)/2,E=(d+u)/2;p.push(new Ki(_[3],m,E,f,u),new Ki(_[2],c,E,m,u),new Ki(_[1],m,d,f,E),new Ki(_[0],c,d,m,E)),(b=(t>=E)<<1|e>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=l)}else{var B=e-+this._x.call(null,_.data),I=t-+this._y.call(null,_.data),k=B*B+I*I;if(k<n){var F=Math.sqrt(n=k);s=e-F,a=t-F,r=e+F,h=t+F,i=_.data}}return i}function woe(e){if(isNaN(r=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,s,a,c=this._x0,d=this._y0,f=this._x1,u=this._y1,r,h,p,_,l,b,m,E;if(!n)return this;if(n.length)for(;;){if((l=r>=(p=(c+f)/2))?c=p:f=p,(b=h>=(_=(d+u)/2))?d=_:u=_,t=n,!(n=n[m=b<<1|l]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(i=t,E=m)}for(;n.data!==e;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):t?(a?t[m]=a:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[E]=n:this._root=n),this):(this._root=a,this)}function boe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Toe(){return this._root}function voe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Eoe(e){var t=[],n,i=this._root,s,a,c,d,f;for(i&&t.push(new Ki(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,c=n.y0,d=n.x1,f=n.y1)&&i.length){var u=(a+d)/2,r=(c+f)/2;(s=i[3])&&t.push(new Ki(s,u,r,d,f)),(s=i[2])&&t.push(new Ki(s,a,r,u,f)),(s=i[1])&&t.push(new Ki(s,u,c,d,r)),(s=i[0])&&t.push(new Ki(s,a,c,u,r))}return this}function Soe(e){var t=[],n=[],i;for(this._root&&t.push(new Ki(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var s=i.node;if(s.length){var a,c=i.x0,d=i.y0,f=i.x1,u=i.y1,r=(c+f)/2,h=(d+u)/2;(a=s[0])&&t.push(new Ki(a,c,d,r,h)),(a=s[1])&&t.push(new Ki(a,r,d,f,h)),(a=s[2])&&t.push(new Ki(a,c,h,r,u)),(a=s[3])&&t.push(new Ki(a,r,h,f,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Boe(e){return e[0]}function Ioe(e){return arguments.length?(this._x=e,this):this._x}function Foe(e){return e[1]}function koe(e){return arguments.length?(this._y=e,this):this._y}function Ox(e,t,n){var i=new Nx(t??Boe,n??Foe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function Nx(e,t,n,i,s,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=s,this._y1=a,this._root=void 0}function KP(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var os=Ox.prototype=Nx.prototype;os.copy=function(){var e=new Nx(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=KP(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var s=0;s<4;++s)(i=t.source[s])&&(i.length?n.push({source:i,target:t.target[s]=new Array(4)}):t.target[s]=KP(i));return e};os.add=hoe;os.addAll=_oe;os.cover=poe;os.data=yoe;os.extent=goe;os.find=moe;os.remove=woe;os.removeAll=boe;os.root=Toe;os.size=voe;os.visit=Eoe;os.visitAfter=Soe;os.x=Ioe;os.y=koe;function Zi(e){return function(){return e}}function Ql(e){return(e()-.5)*1e-6}function xoe(e){return e.x+e.vx}function Moe(e){return e.y+e.vy}function Aoe(e){var t,n,i,s=1,a=1;typeof e!="function"&&(e=Zi(e==null?1:+e));function c(){for(var u,r=t.length,h,p,_,l,b,m,E=0;E<a;++E)for(h=Ox(t,xoe,Moe).visitAfter(d),u=0;u<r;++u)p=t[u],b=n[p.index],m=b*b,_=p.x+p.vx,l=p.y+p.vy,h.visit(B);function B(I,k,F,x,M){var R=I.data,P=I.r,C=b+P;if(R){if(R.index>p.index){var D=_-R.x-R.vx,j=l-R.y-R.vy,$=D*D+j*j;$<C*C&&(D===0&&(D=Ql(i),$+=D*D),j===0&&(j=Ql(i),$+=j*j),$=(C-($=Math.sqrt($)))/$*s,p.vx+=(D*=$)*(C=(P*=P)/(m+P)),p.vy+=(j*=$)*C,R.vx-=D*(C=1-C),R.vy-=j*C)}return}return k>_+C||x<_-C||F>l+C||M<l-C}}function d(u){if(u.data)return u.r=n[u.data.index];for(var r=u.r=0;r<4;++r)u[r]&&u[r].r>u.r&&(u.r=u[r].r)}function f(){if(t){var u,r=t.length,h;for(n=new Array(r),u=0;u<r;++u)h=t[u],n[h.index]=+e(h,u,t)}}return c.initialize=function(u,r){t=u,i=r,f()},c.iterations=function(u){return arguments.length?(a=+u,c):a},c.strength=function(u){return arguments.length?(s=+u,c):s},c.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Zi(+u),f(),c):e},c}function Ooe(e){return e.index}function JP(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Noe(e){var t=Ooe,n=h,i,s=Zi(30),a,c,d,f,u,r=1;e==null&&(e=[]);function h(m){return 1/Math.min(d[m.source.index],d[m.target.index])}function p(m){for(var E=0,B=e.length;E<r;++E)for(var I=0,k,F,x,M,R,P,C;I<B;++I)k=e[I],F=k.source,x=k.target,M=x.x+x.vx-F.x-F.vx||Ql(u),R=x.y+x.vy-F.y-F.vy||Ql(u),P=Math.sqrt(M*M+R*R),P=(P-a[I])/P*m*i[I],M*=P,R*=P,x.vx-=M*(C=f[I]),x.vy-=R*C,F.vx+=M*(C=1-C),F.vy+=R*C}function _(){if(c){var m,E=c.length,B=e.length,I=new Map(c.map((F,x)=>[t(F,x,c),F])),k;for(m=0,d=new Array(E);m<B;++m)k=e[m],k.index=m,typeof k.source!="object"&&(k.source=JP(I,k.source)),typeof k.target!="object"&&(k.target=JP(I,k.target)),d[k.source.index]=(d[k.source.index]||0)+1,d[k.target.index]=(d[k.target.index]||0)+1;for(m=0,f=new Array(B);m<B;++m)k=e[m],f[m]=d[k.source.index]/(d[k.source.index]+d[k.target.index]);i=new Array(B),l(),a=new Array(B),b()}}function l(){if(c)for(var m=0,E=e.length;m<E;++m)i[m]=+n(e[m],m,e)}function b(){if(c)for(var m=0,E=e.length;m<E;++m)a[m]=+s(e[m],m,e)}return p.initialize=function(m,E){c=m,u=E,_()},p.links=function(m){return arguments.length?(e=m,_(),p):e},p.id=function(m){return arguments.length?(t=m,p):t},p.iterations=function(m){return arguments.length?(r=+m,p):r},p.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Zi(+m),l(),p):n},p.distance=function(m){return arguments.length?(s=typeof m=="function"?m:Zi(+m),b(),p):s},p}const Roe=1664525,Coe=1013904223,QP=4294967296;function Loe(){let e=1;return()=>(e=(Roe*e+Coe)%QP)/QP}function Poe(e){return e.x}function Doe(e){return e.y}var Uoe=10,joe=Math.PI*(3-Math.sqrt(5));function $oe(e){var t,n=1,i=.001,s=1-Math.pow(i,1/300),a=0,c=.6,d=new Map,f=Fx(h),u=mx("tick","end"),r=Loe();e==null&&(e=[]);function h(){p(),u.call("tick",t),n<i&&(f.stop(),u.call("end",t))}function p(b){var m,E=e.length,B;b===void 0&&(b=1);for(var I=0;I<b;++I)for(n+=(a-n)*s,d.forEach(function(k){k(n)}),m=0;m<E;++m)B=e[m],B.fx==null?B.x+=B.vx*=c:(B.x=B.fx,B.vx=0),B.fy==null?B.y+=B.vy*=c:(B.y=B.fy,B.vy=0);return t}function _(){for(var b=0,m=e.length,E;b<m;++b){if(E=e[b],E.index=b,E.fx!=null&&(E.x=E.fx),E.fy!=null&&(E.y=E.fy),isNaN(E.x)||isNaN(E.y)){var B=Uoe*Math.sqrt(.5+b),I=b*joe;E.x=B*Math.cos(I),E.y=B*Math.sin(I)}(isNaN(E.vx)||isNaN(E.vy))&&(E.vx=E.vy=0)}}function l(b){return b.initialize&&b.initialize(e,r),b}return _(),t={tick:p,restart:function(){return f.restart(h),t},stop:function(){return f.stop(),t},nodes:function(b){return arguments.length?(e=b,_(),d.forEach(l),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(s=+b,t):+s},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(c=1-b,t):1-c},randomSource:function(b){return arguments.length?(r=b,d.forEach(l),t):r},force:function(b,m){return arguments.length>1?(m==null?d.delete(b):d.set(b,l(m)),t):d.get(b)},find:function(b,m,E){var B=0,I=e.length,k,F,x,M,R;for(E==null?E=1/0:E*=E,B=0;B<I;++B)M=e[B],k=b-M.x,F=m-M.y,x=k*k+F*F,x<E&&(R=M,E=x);return R},on:function(b,m){return arguments.length>1?(u.on(b,m),t):u.on(b)}}}function zoe(){var e,t,n,i,s=Zi(-30),a,c=1,d=1/0,f=.81;function u(_){var l,b=e.length,m=Ox(e,Poe,Doe).visitAfter(h);for(i=_,l=0;l<b;++l)t=e[l],m.visit(p)}function r(){if(e){var _,l=e.length,b;for(a=new Array(l),_=0;_<l;++_)b=e[_],a[b.index]=+s(b,_,e)}}function h(_){var l=0,b,m,E=0,B,I,k;if(_.length){for(B=I=k=0;k<4;++k)(b=_[k])&&(m=Math.abs(b.value))&&(l+=b.value,E+=m,B+=m*b.x,I+=m*b.y);_.x=B/E,_.y=I/E}else{b=_,b.x=b.data.x,b.y=b.data.y;do l+=a[b.data.index];while(b=b.next)}_.value=l}function p(_,l,b,m){if(!_.value)return!0;var E=_.x-t.x,B=_.y-t.y,I=m-l,k=E*E+B*B;if(I*I/f<k)return k<d&&(E===0&&(E=Ql(n),k+=E*E),B===0&&(B=Ql(n),k+=B*B),k<c&&(k=Math.sqrt(c*k)),t.vx+=E*_.value*i/k,t.vy+=B*_.value*i/k),!0;if(_.length||k>=d)return;(_.data!==t||_.next)&&(E===0&&(E=Ql(n),k+=E*E),B===0&&(B=Ql(n),k+=B*B),k<c&&(k=Math.sqrt(c*k)));do _.data!==t&&(I=a[_.data.index]*i/k,t.vx+=E*I,t.vy+=B*I);while(_=_.next)}return u.initialize=function(_,l){e=_,n=l,r()},u.strength=function(_){return arguments.length?(s=typeof _=="function"?_:Zi(+_),r(),u):s},u.distanceMin=function(_){return arguments.length?(c=_*_,u):Math.sqrt(c)},u.distanceMax=function(_){return arguments.length?(d=_*_,u):Math.sqrt(d)},u.theta=function(_){return arguments.length?(f=_*_,u):Math.sqrt(f)},u}function qoe(e){var t=Zi(.1),n,i,s;typeof e!="function"&&(e=Zi(e==null?0:+e));function a(d){for(var f=0,u=n.length,r;f<u;++f)r=n[f],r.vx+=(s[f]-r.x)*i[f]*d}function c(){if(n){var d,f=n.length;for(i=new Array(f),s=new Array(f),d=0;d<f;++d)i[d]=isNaN(s[d]=+e(n[d],d,n))?0:+t(n[d],d,n)}}return a.initialize=function(d){n=d,c()},a.strength=function(d){return arguments.length?(t=typeof d=="function"?d:Zi(+d),c(),a):t},a.x=function(d){return arguments.length?(e=typeof d=="function"?d:Zi(+d),c(),a):e},a}function Voe(e){var t=Zi(.1),n,i,s;typeof e!="function"&&(e=Zi(e==null?0:+e));function a(d){for(var f=0,u=n.length,r;f<u;++f)r=n[f],r.vy+=(s[f]-r.y)*i[f]*d}function c(){if(n){var d,f=n.length;for(i=new Array(f),s=new Array(f),d=0;d<f;++d)i[d]=isNaN(s[d]=+e(n[d],d,n))?0:+t(n[d],d,n)}}return a.initialize=function(d){n=d,c()},a.strength=function(d){return arguments.length?(t=typeof d=="function"?d:Zi(+d),c(),a):t},a.y=function(d){return arguments.length?(e=typeof d=="function"?d:Zi(+d),c(),a):e},a}function Goe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ET(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function rh(e){return e=ET(Math.abs(e)),e?e[1]:NaN}function Hoe(e,t){return function(n,i){for(var s=n.length,a=[],c=0,d=e[0],f=0;s>0&&d>0&&(f+d+1>i&&(d=Math.max(1,i-f)),a.push(n.substring(s-=d,s+d)),!((f+=d+1)>i));)d=e[c=(c+1)%e.length];return a.reverse().join(t)}}function Woe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Yoe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rf(e){if(!(t=Yoe.exec(e)))throw new Error("invalid format: "+e);var t;return new Rx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}rf.prototype=Rx.prototype;function Rx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Rx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xoe(e){e:for(var t=e.length,n=1,i=-1,s;n<t;++n)switch(e[n]){case".":i=s=n;break;case"0":i===0&&(i=n),s=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(s+1):e}var tq;function Koe(e,t){var n=ET(e,t);if(!n)return e+"";var i=n[0],s=n[1],a=s-(tq=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,c=i.length;return a===c?i:a>c?i+new Array(a-c+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+ET(e,Math.max(0,t+a-1))[0]}function ZP(e,t){var n=ET(e,t);if(!n)return e+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const eD={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Goe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZP(e*100,t),r:ZP,s:Koe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function tD(e){return e}var nD=Array.prototype.map,iD=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function nq(e){var t=e.grouping===void 0||e.thousands===void 0?tD:Hoe(nD.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?tD:Woe(nD.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"−":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function u(h){h=rf(h);var p=h.fill,_=h.align,l=h.sign,b=h.symbol,m=h.zero,E=h.width,B=h.comma,I=h.precision,k=h.trim,F=h.type;F==="n"?(B=!0,F="g"):eD[F]||(I===void 0&&(I=12),k=!0,F="g"),(m||p==="0"&&_==="=")&&(m=!0,p="0",_="=");var x=b==="$"?n:b==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",M=b==="$"?i:/[%p]/.test(F)?c:"",R=eD[F],P=/[defgprs%]/.test(F);I=I===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function C(D){var j=x,$=M,W,H,G;if(F==="c")$=R(D)+$,D="";else{D=+D;var z=D<0||1/D<0;if(D=isNaN(D)?f:R(Math.abs(D),I),k&&(D=Xoe(D)),z&&+D==0&&l!=="+"&&(z=!1),j=(z?l==="("?l:d:l==="-"||l==="("?"":l)+j,$=(F==="s"?iD[8+tq/3]:"")+$+(z&&l==="("?")":""),P){for(W=-1,H=D.length;++W<H;)if(G=D.charCodeAt(W),48>G||G>57){$=(G===46?s+D.slice(W+1):D.slice(W))+$,D=D.slice(0,W);break}}}B&&!m&&(D=t(D,1/0));var q=j.length+D.length+$.length,ie=q<E?new Array(E-q+1).join(p):"";switch(B&&m&&(D=t(ie+D,ie.length?E-$.length:1/0),ie=""),_){case"<":D=j+D+$+ie;break;case"=":D=j+ie+D+$;break;case"^":D=ie.slice(0,q=ie.length>>1)+j+D+$+ie.slice(q);break;default:D=ie+j+D+$;break}return a(D)}return C.toString=function(){return h+""},C}function r(h,p){var _=u((h=rf(h),h.type="f",h)),l=Math.max(-8,Math.min(8,Math.floor(rh(p)/3)))*3,b=Math.pow(10,-l),m=iD[8+l/3];return function(E){return _(b*E)+m}}return{format:u,formatPrefix:r}}var Eb,L1,Cx;Joe({thousands:",",grouping:[3],currency:["$",""]});function Joe(e){return Eb=nq(e),L1=Eb.format,Cx=Eb.formatPrefix,Eb}function iq(e){return Math.max(0,-rh(Math.abs(e)))}function sq(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rh(t)/3)))*3-rh(Math.abs(e)))}function rq(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,rh(t)-rh(e))+1}var it=1e-6,ST=1e-12,Mt=Math.PI,An=Mt/2,BT=Mt/4,ss=Mt*2,Dn=180/Mt,Ft=Mt/180,Lt=Math.abs,e_=Math.atan,Tr=Math.atan2,st=Math.cos,Sb=Math.ceil,aq=Math.exp,zF=Math.hypot,IT=Math.log,_B=Math.pow,Qe=Math.sin,_r=Math.sign||function(e){return e>0?1:e<0?-1:0},rs=Math.sqrt,Lx=Math.tan;function oq(e){return e>1?0:e<-1?Mt:Math.acos(e)}function vs(e){return e>1?An:e<-1?-An:Math.asin(e)}function gi(){}function FT(e,t){e&&rD.hasOwnProperty(e.type)&&rD[e.type](e,t)}var sD={Feature:function(e,t){FT(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,s=n.length;++i<s;)FT(n[i].geometry,t)}},rD={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){qF(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)qF(n[i],t,0)},Polygon:function(e,t){aD(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)aD(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,s=n.length;++i<s;)FT(n[i],t)}};function qF(e,t,n){var i=-1,s=e.length-n,a;for(t.lineStart();++i<s;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function aD(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)qF(e[n],t,1);t.polygonEnd()}function Yo(e,t){e&&sD.hasOwnProperty(e.type)?sD[e.type](e,t):FT(e,t)}var kT=new ts,xT=new ts,lq,cq,VF,GF,HF,eo={point:gi,lineStart:gi,lineEnd:gi,polygonStart:function(){kT=new ts,eo.lineStart=Qoe,eo.lineEnd=Zoe},polygonEnd:function(){var e=+kT;xT.add(e<0?ss+e:e),this.lineStart=this.lineEnd=this.point=gi},sphere:function(){xT.add(ss)}};function Qoe(){eo.point=ele}function Zoe(){dq(lq,cq)}function ele(e,t){eo.point=dq,lq=e,cq=t,e*=Ft,t*=Ft,VF=e,GF=st(t=t/2+BT),HF=Qe(t)}function dq(e,t){e*=Ft,t*=Ft,t=t/2+BT;var n=e-VF,i=n>=0?1:-1,s=i*n,a=st(t),c=Qe(t),d=HF*c,f=GF*a+d*st(s),u=d*i*Qe(s);kT.add(Tr(u,f)),VF=e,GF=a,HF=c}function tle(e){return xT=new ts,Yo(e,eo),xT*2}function MT(e){return[Tr(e[1],e[0]),vs(e[2])]}function af(e){var t=e[0],n=e[1],i=st(n);return[i*st(t),i*Qe(t),Qe(n)]}function Bb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ah(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function pB(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ib(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function AT(e){var t=rs(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var En,ys,kn,qs,xd,fq,uq,qu,Ky,ql,gl,Ho={point:WF,lineStart:oD,lineEnd:lD,polygonStart:function(){Ho.point=_q,Ho.lineStart=nle,Ho.lineEnd=ile,Ky=new ts,eo.polygonStart()},polygonEnd:function(){eo.polygonEnd(),Ho.point=WF,Ho.lineStart=oD,Ho.lineEnd=lD,kT<0?(En=-(kn=180),ys=-(qs=90)):Ky>it?qs=90:Ky<-it&&(ys=-90),gl[0]=En,gl[1]=kn},sphere:function(){En=-(kn=180),ys=-(qs=90)}};function WF(e,t){ql.push(gl=[En=e,kn=e]),t<ys&&(ys=t),t>qs&&(qs=t)}function hq(e,t){var n=af([e*Ft,t*Ft]);if(qu){var i=ah(qu,n),s=[i[1],-i[0],0],a=ah(s,i);AT(a),a=MT(a);var c=e-xd,d=c>0?1:-1,f=a[0]*Dn*d,u,r=Lt(c)>180;r^(d*xd<f&&f<d*e)?(u=a[1]*Dn,u>qs&&(qs=u)):(f=(f+360)%360-180,r^(d*xd<f&&f<d*e)?(u=-a[1]*Dn,u<ys&&(ys=u)):(t<ys&&(ys=t),t>qs&&(qs=t))),r?e<xd?zs(En,e)>zs(En,kn)&&(kn=e):zs(e,kn)>zs(En,kn)&&(En=e):kn>=En?(e<En&&(En=e),e>kn&&(kn=e)):e>xd?zs(En,e)>zs(En,kn)&&(kn=e):zs(e,kn)>zs(En,kn)&&(En=e)}else ql.push(gl=[En=e,kn=e]);t<ys&&(ys=t),t>qs&&(qs=t),qu=n,xd=e}function oD(){Ho.point=hq}function lD(){gl[0]=En,gl[1]=kn,Ho.point=WF,qu=null}function _q(e,t){if(qu){var n=e-xd;Ky.add(Lt(n)>180?n+(n>0?360:-360):n)}else fq=e,uq=t;eo.point(e,t),hq(e,t)}function nle(){eo.lineStart()}function ile(){_q(fq,uq),eo.lineEnd(),Lt(Ky)>it&&(En=-(kn=180)),gl[0]=En,gl[1]=kn,qu=null}function zs(e,t){return(t-=e)<0?t+360:t}function sle(e,t){return e[0]-t[0]}function cD(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function rle(e){var t,n,i,s,a,c,d;if(qs=kn=-(En=ys=1/0),ql=[],Yo(e,Ho),n=ql.length){for(ql.sort(sle),t=1,i=ql[0],a=[i];t<n;++t)s=ql[t],cD(i,s[0])||cD(i,s[1])?(zs(i[0],s[1])>zs(i[0],i[1])&&(i[1]=s[1]),zs(s[0],i[1])>zs(i[0],i[1])&&(i[0]=s[0])):a.push(i=s);for(c=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=s,++t)s=a[t],(d=zs(i[1],s[0]))>c&&(c=d,En=s[0],kn=i[1])}return ql=gl=null,En===1/0||ys===1/0?[[NaN,NaN],[NaN,NaN]]:[[En,ys],[kn,qs]]}var gy,OT,NT,RT,CT,LT,PT,DT,YF,XF,KF,pq,yq,Hi,Wi,Yi,Xr={sphere:gi,point:Px,lineStart:dD,lineEnd:fD,polygonStart:function(){Xr.lineStart=lle,Xr.lineEnd=cle},polygonEnd:function(){Xr.lineStart=dD,Xr.lineEnd=fD}};function Px(e,t){e*=Ft,t*=Ft;var n=st(t);am(n*st(e),n*Qe(e),Qe(t))}function am(e,t,n){++gy,NT+=(e-NT)/gy,RT+=(t-RT)/gy,CT+=(n-CT)/gy}function dD(){Xr.point=ale}function ale(e,t){e*=Ft,t*=Ft;var n=st(t);Hi=n*st(e),Wi=n*Qe(e),Yi=Qe(t),Xr.point=ole,am(Hi,Wi,Yi)}function ole(e,t){e*=Ft,t*=Ft;var n=st(t),i=n*st(e),s=n*Qe(e),a=Qe(t),c=Tr(rs((c=Wi*a-Yi*s)*c+(c=Yi*i-Hi*a)*c+(c=Hi*s-Wi*i)*c),Hi*i+Wi*s+Yi*a);OT+=c,LT+=c*(Hi+(Hi=i)),PT+=c*(Wi+(Wi=s)),DT+=c*(Yi+(Yi=a)),am(Hi,Wi,Yi)}function fD(){Xr.point=Px}function lle(){Xr.point=dle}function cle(){gq(pq,yq),Xr.point=Px}function dle(e,t){pq=e,yq=t,e*=Ft,t*=Ft,Xr.point=gq;var n=st(t);Hi=n*st(e),Wi=n*Qe(e),Yi=Qe(t),am(Hi,Wi,Yi)}function gq(e,t){e*=Ft,t*=Ft;var n=st(t),i=n*st(e),s=n*Qe(e),a=Qe(t),c=Wi*a-Yi*s,d=Yi*i-Hi*a,f=Hi*s-Wi*i,u=zF(c,d,f),r=vs(u),h=u&&-r/u;YF.add(h*c),XF.add(h*d),KF.add(h*f),OT+=r,LT+=r*(Hi+(Hi=i)),PT+=r*(Wi+(Wi=s)),DT+=r*(Yi+(Yi=a)),am(Hi,Wi,Yi)}function fle(e){gy=OT=NT=RT=CT=LT=PT=DT=0,YF=new ts,XF=new ts,KF=new ts,Yo(e,Xr);var t=+YF,n=+XF,i=+KF,s=zF(t,n,i);return s<ST&&(t=LT,n=PT,i=DT,OT<it&&(t=NT,n=RT,i=CT),s=zF(t,n,i),s<ST)?[NaN,NaN]:[Tr(n,t)*Dn,vs(i/s)*Dn]}function JF(e,t){function n(i,s){return i=e(i,s),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,s){return i=t.invert(i,s),i&&e.invert(i[0],i[1])}),n}function QF(e,t){return Lt(e)>Mt&&(e-=Math.round(e/ss)*ss),[e,t]}QF.invert=QF;function mq(e,t,n){return(e%=ss)?t||n?JF(hD(e),_D(t,n)):hD(e):t||n?_D(t,n):QF}function uD(e){return function(t,n){return t+=e,Lt(t)>Mt&&(t-=Math.round(t/ss)*ss),[t,n]}}function hD(e){var t=uD(e);return t.invert=uD(-e),t}function _D(e,t){var n=st(e),i=Qe(e),s=st(t),a=Qe(t);function c(d,f){var u=st(f),r=st(d)*u,h=Qe(d)*u,p=Qe(f),_=p*n+r*i;return[Tr(h*s-_*a,r*n-p*i),vs(_*s+h*a)]}return c.invert=function(d,f){var u=st(f),r=st(d)*u,h=Qe(d)*u,p=Qe(f),_=p*s-h*a;return[Tr(h*s+p*a,r*n+_*i),vs(_*n-r*i)]},c}function ule(e){e=mq(e[0]*Ft,e[1]*Ft,e.length>2?e[2]*Ft:0);function t(n){return n=e(n[0]*Ft,n[1]*Ft),n[0]*=Dn,n[1]*=Dn,n}return t.invert=function(n){return n=e.invert(n[0]*Ft,n[1]*Ft),n[0]*=Dn,n[1]*=Dn,n},t}function hle(e,t,n,i,s,a){if(n){var c=st(t),d=Qe(t),f=i*n;s==null?(s=t+i*ss,a=t-f/2):(s=pD(c,s),a=pD(c,a),(i>0?s<a:s>a)&&(s+=i*ss));for(var u,r=s;i>0?r>a:r<a;r-=f)u=MT([c,-d*st(r),-d*Qe(r)]),e.point(u[0],u[1])}}function pD(e,t){t=af(t),t[0]-=e,AT(t);var n=oq(-t[1]);return((-t[2]<0?-n:n)+ss-it)%ss}function wq(){var e=[],t;return{point:function(n,i,s){t.push([n,i,s])},lineStart:function(){e.push(t=[])},lineEnd:gi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function w0(e,t){return Lt(e[0]-t[0])<it&&Lt(e[1]-t[1])<it}function Fb(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function bq(e,t,n,i,s){var a=[],c=[],d,f;if(e.forEach(function(l){if(!((b=l.length-1)<=0)){var b,m=l[0],E=l[b],B;if(w0(m,E)){if(!m[2]&&!E[2]){for(s.lineStart(),d=0;d<b;++d)s.point((m=l[d])[0],m[1]);s.lineEnd();return}E[0]+=2*it}a.push(B=new Fb(m,l,null,!0)),c.push(B.o=new Fb(m,null,B,!1)),a.push(B=new Fb(E,l,null,!1)),c.push(B.o=new Fb(E,null,B,!0))}}),!!a.length){for(c.sort(t),yD(a),yD(c),d=0,f=c.length;d<f;++d)c[d].e=n=!n;for(var u=a[0],r,h;;){for(var p=u,_=!0;p.v;)if((p=p.n)===u)return;r=p.z,s.lineStart();do{if(p.v=p.o.v=!0,p.e){if(_)for(d=0,f=r.length;d<f;++d)s.point((h=r[d])[0],h[1]);else i(p.x,p.n.x,1,s);p=p.n}else{if(_)for(r=p.p.z,d=r.length-1;d>=0;--d)s.point((h=r[d])[0],h[1]);else i(p.x,p.p.x,-1,s);p=p.p}p=p.o,r=p.z,_=!_}while(!p.v);s.lineEnd()}}}function yD(e){if(t=e.length){for(var t,n=0,i=e[0],s;++n<t;)i.n=s=e[n],s.p=i,i=s;i.n=s=e[0],s.p=i}}function yB(e){return Lt(e[0])<=Mt?e[0]:_r(e[0])*((Lt(e[0])+Mt)%ss-Mt)}function _le(e,t){var n=yB(t),i=t[1],s=Qe(i),a=[Qe(n),-st(n),0],c=0,d=0,f=new ts;s===1?i=An+it:s===-1&&(i=-An-it);for(var u=0,r=e.length;u<r;++u)if(p=(h=e[u]).length)for(var h,p,_=h[p-1],l=yB(_),b=_[1]/2+BT,m=Qe(b),E=st(b),B=0;B<p;++B,l=k,m=x,E=M,_=I){var I=h[B],k=yB(I),F=I[1]/2+BT,x=Qe(F),M=st(F),R=k-l,P=R>=0?1:-1,C=P*R,D=C>Mt,j=m*x;if(f.add(Tr(j*P*Qe(C),E*M+j*st(C))),c+=D?R+P*ss:R,D^l>=n^k>=n){var $=ah(af(_),af(I));AT($);var W=ah(a,$);AT(W);var H=(D^R>=0?-1:1)*vs(W[2]);(i>H||i===H&&($[0]||$[1]))&&(d+=D^R>=0?1:-1)}}return(c<-it||c<it&&f<-ST)^d&1}function Tq(e,t,n,i){return function(s){var a=t(s),c=wq(),d=t(c),f=!1,u,r,h,p={point:_,lineStart:b,lineEnd:m,polygonStart:function(){p.point=E,p.lineStart=B,p.lineEnd=I,r=[],u=[]},polygonEnd:function(){p.point=_,p.lineStart=b,p.lineEnd=m,r=a5(r);var k=_le(u,i);r.length?(f||(s.polygonStart(),f=!0),bq(r,yle,k,n,s)):k&&(f||(s.polygonStart(),f=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),r=u=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function _(k,F){e(k,F)&&s.point(k,F)}function l(k,F){a.point(k,F)}function b(){p.point=l,a.lineStart()}function m(){p.point=_,a.lineEnd()}function E(k,F){h.push([k,F]),d.point(k,F)}function B(){d.lineStart(),h=[]}function I(){E(h[0][0],h[0][1]),d.lineEnd();var k=d.clean(),F=c.result(),x,M=F.length,R,P,C;if(h.pop(),u.push(h),h=null,!!M){if(k&1){if(P=F[0],(R=P.length-1)>0){for(f||(s.polygonStart(),f=!0),s.lineStart(),x=0;x<R;++x)s.point((C=P[x])[0],C[1]);s.lineEnd()}return}M>1&&k&2&&F.push(F.pop().concat(F.shift())),r.push(F.filter(ple))}}return p}}function ple(e){return e.length>1}function yle(e,t){return((e=e.x)[0]<0?e[1]-An-it:An-e[1])-((t=t.x)[0]<0?t[1]-An-it:An-t[1])}const gD=Tq(function(){return!0},gle,wle,[-Mt,-An]);function gle(e){var t=NaN,n=NaN,i=NaN,s;return{lineStart:function(){e.lineStart(),s=1},point:function(a,c){var d=a>0?Mt:-Mt,f=Lt(a-t);Lt(f-Mt)<it?(e.point(t,n=(n+c)/2>0?An:-An),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(d,n),e.point(a,n),s=0):i!==d&&f>=Mt&&(Lt(t-i)<it&&(t-=i*it),Lt(a-d)<it&&(a-=d*it),n=mle(t,n,a,c),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(d,n),s=0),e.point(t=a,n=c),i=d},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-s}}}function mle(e,t,n,i){var s,a,c=Qe(e-n);return Lt(c)>it?e_((Qe(t)*(a=st(i))*Qe(n)-Qe(i)*(s=st(t))*Qe(e))/(s*a*c)):(t+i)/2}function wle(e,t,n,i){var s;if(e==null)s=n*An,i.point(-Mt,s),i.point(0,s),i.point(Mt,s),i.point(Mt,0),i.point(Mt,-s),i.point(0,-s),i.point(-Mt,-s),i.point(-Mt,0),i.point(-Mt,s);else if(Lt(e[0]-t[0])>it){var a=e[0]<t[0]?Mt:-Mt;s=n*a/2,i.point(-a,s),i.point(0,s),i.point(a,s)}else i.point(t[0],t[1])}function ble(e){var t=st(e),n=2*Ft,i=t>0,s=Lt(t)>it;function a(r,h,p,_){hle(_,e,n,p,r,h)}function c(r,h){return st(r)*st(h)>t}function d(r){var h,p,_,l,b;return{lineStart:function(){l=_=!1,b=1},point:function(m,E){var B=[m,E],I,k=c(m,E),F=i?k?0:u(m,E):k?u(m+(m<0?Mt:-Mt),E):0;if(!h&&(l=_=k)&&r.lineStart(),k!==_&&(I=f(h,B),(!I||w0(h,I)||w0(B,I))&&(B[2]=1)),k!==_)b=0,k?(r.lineStart(),I=f(B,h),r.point(I[0],I[1])):(I=f(h,B),r.point(I[0],I[1],2),r.lineEnd()),h=I;else if(s&&h&&i^k){var x;!(F&p)&&(x=f(B,h,!0))&&(b=0,i?(r.lineStart(),r.point(x[0][0],x[0][1]),r.point(x[1][0],x[1][1]),r.lineEnd()):(r.point(x[1][0],x[1][1]),r.lineEnd(),r.lineStart(),r.point(x[0][0],x[0][1],3)))}k&&(!h||!w0(h,B))&&r.point(B[0],B[1]),h=B,_=k,p=F},lineEnd:function(){_&&r.lineEnd(),h=null},clean:function(){return b|(l&&_)<<1}}}function f(r,h,p){var _=af(r),l=af(h),b=[1,0,0],m=ah(_,l),E=Bb(m,m),B=m[0],I=E-B*B;if(!I)return!p&&r;var k=t*E/I,F=-t*B/I,x=ah(b,m),M=Ib(b,k),R=Ib(m,F);pB(M,R);var P=x,C=Bb(M,P),D=Bb(P,P),j=C*C-D*(Bb(M,M)-1);if(!(j<0)){var $=rs(j),W=Ib(P,(-C-$)/D);if(pB(W,M),W=MT(W),!p)return W;var H=r[0],G=h[0],z=r[1],q=h[1],ie;G<H&&(ie=H,H=G,G=ie);var ce=G-H,se=Lt(ce-Mt)<it,Ie=se||ce<it;if(!se&&q<z&&(ie=z,z=q,q=ie),Ie?se?z+q>0^W[1]<(Lt(W[0]-H)<it?z:q):z<=W[1]&&W[1]<=q:ce>Mt^(H<=W[0]&&W[0]<=G)){var he=Ib(P,(-C+$)/D);return pB(he,M),[W,MT(he)]}}}function u(r,h){var p=i?e:Mt-e,_=0;return r<-p?_|=1:r>p&&(_|=2),h<-p?_|=4:h>p&&(_|=8),_}return Tq(c,d,a,i?[0,-e]:[-Mt,e-Mt])}function Tle(e,t,n,i,s,a){var c=e[0],d=e[1],f=t[0],u=t[1],r=0,h=1,p=f-c,_=u-d,l;if(l=n-c,!(!p&&l>0)){if(l/=p,p<0){if(l<r)return;l<h&&(h=l)}else if(p>0){if(l>h)return;l>r&&(r=l)}if(l=s-c,!(!p&&l<0)){if(l/=p,p<0){if(l>h)return;l>r&&(r=l)}else if(p>0){if(l<r)return;l<h&&(h=l)}if(l=i-d,!(!_&&l>0)){if(l/=_,_<0){if(l<r)return;l<h&&(h=l)}else if(_>0){if(l>h)return;l>r&&(r=l)}if(l=a-d,!(!_&&l<0)){if(l/=_,_<0){if(l>h)return;l>r&&(r=l)}else if(_>0){if(l<r)return;l<h&&(h=l)}return r>0&&(e[0]=c+r*p,e[1]=d+r*_),h<1&&(t[0]=c+h*p,t[1]=d+h*_),!0}}}}}var my=1e9,kb=-my;function vq(e,t,n,i){function s(u,r){return e<=u&&u<=n&&t<=r&&r<=i}function a(u,r,h,p){var _=0,l=0;if(u==null||(_=c(u,h))!==(l=c(r,h))||f(u,r)<0^h>0)do p.point(_===0||_===3?e:n,_>1?i:t);while((_=(_+h+4)%4)!==l);else p.point(r[0],r[1])}function c(u,r){return Lt(u[0]-e)<it?r>0?0:3:Lt(u[0]-n)<it?r>0?2:1:Lt(u[1]-t)<it?r>0?1:0:r>0?3:2}function d(u,r){return f(u.x,r.x)}function f(u,r){var h=c(u,1),p=c(r,1);return h!==p?h-p:h===0?r[1]-u[1]:h===1?u[0]-r[0]:h===2?u[1]-r[1]:r[0]-u[0]}return function(u){var r=u,h=wq(),p,_,l,b,m,E,B,I,k,F,x,M={point:R,lineStart:j,lineEnd:$,polygonStart:C,polygonEnd:D};function R(H,G){s(H,G)&&r.point(H,G)}function P(){for(var H=0,G=0,z=_.length;G<z;++G)for(var q=_[G],ie=1,ce=q.length,se=q[0],Ie,he,Me=se[0],Ue=se[1];ie<ce;++ie)Ie=Me,he=Ue,se=q[ie],Me=se[0],Ue=se[1],he<=i?Ue>i&&(Me-Ie)*(i-he)>(Ue-he)*(e-Ie)&&++H:Ue<=i&&(Me-Ie)*(i-he)<(Ue-he)*(e-Ie)&&--H;return H}function C(){r=h,p=[],_=[],x=!0}function D(){var H=P(),G=x&&H,z=(p=a5(p)).length;(G||z)&&(u.polygonStart(),G&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),z&&bq(p,d,H,a,u),u.polygonEnd()),r=u,p=_=l=null}function j(){M.point=W,_&&_.push(l=[]),F=!0,k=!1,B=I=NaN}function $(){p&&(W(b,m),E&&k&&h.rejoin(),p.push(h.result())),M.point=R,k&&r.lineEnd()}function W(H,G){var z=s(H,G);if(_&&l.push([H,G]),F)b=H,m=G,E=z,F=!1,z&&(r.lineStart(),r.point(H,G));else if(z&&k)r.point(H,G);else{var q=[B=Math.max(kb,Math.min(my,B)),I=Math.max(kb,Math.min(my,I))],ie=[H=Math.max(kb,Math.min(my,H)),G=Math.max(kb,Math.min(my,G))];Tle(q,ie,e,t,n,i)?(k||(r.lineStart(),r.point(q[0],q[1])),r.point(ie[0],ie[1]),z||r.lineEnd(),x=!1):z&&(r.lineStart(),r.point(H,G),x=!1)}B=H,I=G,k=z}return M}}function mD(e,t,n){var i=Hs(e,t-it,n).concat(t);return function(s){return i.map(function(a){return[s,a]})}}function wD(e,t,n){var i=Hs(e,t-it,n).concat(t);return function(s){return i.map(function(a){return[a,s]})}}function vle(){var e,t,n,i,s,a,c,d,f=10,u=f,r=90,h=360,p,_,l,b,m=2.5;function E(){return{type:"MultiLineString",coordinates:B()}}function B(){return Hs(Sb(i/r)*r,n,r).map(l).concat(Hs(Sb(d/h)*h,c,h).map(b)).concat(Hs(Sb(t/f)*f,e,f).filter(function(I){return Lt(I%r)>it}).map(p)).concat(Hs(Sb(a/u)*u,s,u).filter(function(I){return Lt(I%h)>it}).map(_))}return E.lines=function(){return B().map(function(I){return{type:"LineString",coordinates:I}})},E.outline=function(){return{type:"Polygon",coordinates:[l(i).concat(b(c).slice(1),l(n).reverse().slice(1),b(d).reverse().slice(1))]}},E.extent=function(I){return arguments.length?E.extentMajor(I).extentMinor(I):E.extentMinor()},E.extentMajor=function(I){return arguments.length?(i=+I[0][0],n=+I[1][0],d=+I[0][1],c=+I[1][1],i>n&&(I=i,i=n,n=I),d>c&&(I=d,d=c,c=I),E.precision(m)):[[i,d],[n,c]]},E.extentMinor=function(I){return arguments.length?(t=+I[0][0],e=+I[1][0],a=+I[0][1],s=+I[1][1],t>e&&(I=t,t=e,e=I),a>s&&(I=a,a=s,s=I),E.precision(m)):[[t,a],[e,s]]},E.step=function(I){return arguments.length?E.stepMajor(I).stepMinor(I):E.stepMinor()},E.stepMajor=function(I){return arguments.length?(r=+I[0],h=+I[1],E):[r,h]},E.stepMinor=function(I){return arguments.length?(f=+I[0],u=+I[1],E):[f,u]},E.precision=function(I){return arguments.length?(m=+I,p=mD(a,s,90),_=wD(t,e,m),l=mD(d,c,90),b=wD(i,n,m),E):m},E.extentMajor([[-180,-90+it],[180,90-it]]).extentMinor([[-180,-80-it],[180,80+it]])}const mg=e=>e;var gB=new ts,ZF=new ts,Eq,Sq,ek,tk,Xo={point:gi,lineStart:gi,lineEnd:gi,polygonStart:function(){Xo.lineStart=Ele,Xo.lineEnd=Ble},polygonEnd:function(){Xo.lineStart=Xo.lineEnd=Xo.point=gi,gB.add(Lt(ZF)),ZF=new ts},result:function(){var e=gB/2;return gB=new ts,e}};function Ele(){Xo.point=Sle}function Sle(e,t){Xo.point=Bq,Eq=ek=e,Sq=tk=t}function Bq(e,t){ZF.add(tk*e-ek*t),ek=e,tk=t}function Ble(){Bq(Eq,Sq)}var oh=1/0,UT=oh,wg=-oh,jT=wg,$T={point:Ile,lineStart:gi,lineEnd:gi,polygonStart:gi,polygonEnd:gi,result:function(){var e=[[oh,UT],[wg,jT]];return wg=jT=-(UT=oh=1/0),e}};function Ile(e,t){e<oh&&(oh=e),e>wg&&(wg=e),t<UT&&(UT=t),t>jT&&(jT=t)}var nk=0,ik=0,wy=0,zT=0,qT=0,xu=0,sk=0,rk=0,by=0,Iq,Fq,Da,Ua,ur={point:of,lineStart:bD,lineEnd:TD,polygonStart:function(){ur.lineStart=xle,ur.lineEnd=Mle},polygonEnd:function(){ur.point=of,ur.lineStart=bD,ur.lineEnd=TD},result:function(){var e=by?[sk/by,rk/by]:xu?[zT/xu,qT/xu]:wy?[nk/wy,ik/wy]:[NaN,NaN];return nk=ik=wy=zT=qT=xu=sk=rk=by=0,e}};function of(e,t){nk+=e,ik+=t,++wy}function bD(){ur.point=Fle}function Fle(e,t){ur.point=kle,of(Da=e,Ua=t)}function kle(e,t){var n=e-Da,i=t-Ua,s=rs(n*n+i*i);zT+=s*(Da+e)/2,qT+=s*(Ua+t)/2,xu+=s,of(Da=e,Ua=t)}function TD(){ur.point=of}function xle(){ur.point=Ale}function Mle(){kq(Iq,Fq)}function Ale(e,t){ur.point=kq,of(Iq=Da=e,Fq=Ua=t)}function kq(e,t){var n=e-Da,i=t-Ua,s=rs(n*n+i*i);zT+=s*(Da+e)/2,qT+=s*(Ua+t)/2,xu+=s,s=Ua*e-Da*t,sk+=s*(Da+e),rk+=s*(Ua+t),by+=s*3,of(Da=e,Ua=t)}function xq(e){this._context=e}xq.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ss);break}}},result:gi};var ak=new ts,mB,Mq,Aq,Ty,vy,bg={point:gi,lineStart:function(){bg.point=Ole},lineEnd:function(){mB&&Oq(Mq,Aq),bg.point=gi},polygonStart:function(){mB=!0},polygonEnd:function(){mB=null},result:function(){var e=+ak;return ak=new ts,e}};function Ole(e,t){bg.point=Oq,Mq=Ty=e,Aq=vy=t}function Oq(e,t){Ty-=e,vy-=t,ak.add(rs(Ty*Ty+vy*vy)),Ty=e,vy=t}let vD,VT,ED,SD;class BD{constructor(t){this._append=t==null?Nq:Nle(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==ED||this._append!==VT){const i=this._radius,s=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,ED=i,VT=this._append,SD=this._,this._=s}this._+=SD;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Nq(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Nle(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Nq;if(t!==vD){const n=10**t;vD=t,VT=function(s){let a=1;this._+=s[0];for(const c=s.length;a<c;++a)this._+=Math.round(arguments[a]*n)/n+s[a]}}return VT}function Rq(e,t){let n=3,i=4.5,s,a;function c(d){return d&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Yo(d,s(a))),a.result()}return c.area=function(d){return Yo(d,s(Xo)),Xo.result()},c.measure=function(d){return Yo(d,s(bg)),bg.result()},c.bounds=function(d){return Yo(d,s($T)),$T.result()},c.centroid=function(d){return Yo(d,s(ur)),ur.result()},c.projection=function(d){return arguments.length?(s=d==null?(e=null,mg):(e=d).stream,c):e},c.context=function(d){return arguments.length?(a=d==null?(t=null,new BD(n)):new xq(t=d),typeof i!="function"&&a.pointRadius(i),c):t},c.pointRadius=function(d){return arguments.length?(i=typeof d=="function"?d:(a.pointRadius(+d),+d),c):i},c.digits=function(d){if(!arguments.length)return n;if(d==null)n=null;else{const f=Math.floor(d);if(!(f>=0))throw new RangeError(`invalid digits: ${d}`);n=f}return t===null&&(a=new BD(n)),c},c.projection(e).digits(n).context(t)}function P1(e){return function(t){var n=new ok;for(var i in e)n[i]=e[i];return n.stream=t,n}}function ok(){}ok.prototype={constructor:ok,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Dx(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Yo(n,e.stream($T)),t($T.result()),i!=null&&e.clipExtent(i),e}function D1(e,t,n){return Dx(e,function(i){var s=t[1][0]-t[0][0],a=t[1][1]-t[0][1],c=Math.min(s/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),d=+t[0][0]+(s-c*(i[1][0]+i[0][0]))/2,f=+t[0][1]+(a-c*(i[1][1]+i[0][1]))/2;e.scale(150*c).translate([d,f])},n)}function Ux(e,t,n){return D1(e,[[0,0],t],n)}function jx(e,t,n){return Dx(e,function(i){var s=+t,a=s/(i[1][0]-i[0][0]),c=(s-a*(i[1][0]+i[0][0]))/2,d=-a*i[0][1];e.scale(150*a).translate([c,d])},n)}function $x(e,t,n){return Dx(e,function(i){var s=+t,a=s/(i[1][1]-i[0][1]),c=-a*i[0][0],d=(s-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([c,d])},n)}var ID=16,Rle=st(30*Ft);function FD(e,t){return+t?Lle(e,t):Cle(e)}function Cle(e){return P1({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Lle(e,t){function n(i,s,a,c,d,f,u,r,h,p,_,l,b,m){var E=u-i,B=r-s,I=E*E+B*B;if(I>4*t&&b--){var k=c+p,F=d+_,x=f+l,M=rs(k*k+F*F+x*x),R=vs(x/=M),P=Lt(Lt(x)-1)<it||Lt(a-h)<it?(a+h)/2:Tr(F,k),C=e(P,R),D=C[0],j=C[1],$=D-i,W=j-s,H=B*$-E*W;(H*H/I>t||Lt((E*$+B*W)/I-.5)>.3||c*p+d*_+f*l<Rle)&&(n(i,s,a,c,d,f,D,j,P,k/=M,F/=M,x,b,m),m.point(D,j),n(D,j,P,k,F,x,u,r,h,p,_,l,b,m))}}return function(i){var s,a,c,d,f,u,r,h,p,_,l,b,m={point:E,lineStart:B,lineEnd:k,polygonStart:function(){i.polygonStart(),m.lineStart=F},polygonEnd:function(){i.polygonEnd(),m.lineStart=B}};function E(R,P){R=e(R,P),i.point(R[0],R[1])}function B(){h=NaN,m.point=I,i.lineStart()}function I(R,P){var C=af([R,P]),D=e(R,P);n(h,p,r,_,l,b,h=D[0],p=D[1],r=R,_=C[0],l=C[1],b=C[2],ID,i),i.point(h,p)}function k(){m.point=E,i.lineEnd()}function F(){B(),m.point=x,m.lineEnd=M}function x(R,P){I(s=R,P),a=h,c=p,d=_,f=l,u=b,m.point=I}function M(){n(h,p,r,_,l,b,a,c,s,d,f,u,ID,i),m.lineEnd=k,k()}return m}}var Ple=P1({point:function(e,t){this.stream.point(e*Ft,t*Ft)}});function Dle(e){return P1({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Ule(e,t,n,i,s){function a(c,d){return c*=i,d*=s,[t+e*c,n-e*d]}return a.invert=function(c,d){return[(c-t)/e*i,(n-d)/e*s]},a}function kD(e,t,n,i,s,a){if(!a)return Ule(e,t,n,i,s);var c=st(a),d=Qe(a),f=c*e,u=d*e,r=c/e,h=d/e,p=(d*n-c*t)/e,_=(d*t+c*n)/e;function l(b,m){return b*=i,m*=s,[f*b-u*m+t,n-u*b-f*m]}return l.invert=function(b,m){return[i*(r*b-h*m+p),s*(_-h*b-r*m)]},l}function _o(e){return Cq(function(){return e})()}function Cq(e){var t,n=150,i=480,s=250,a=0,c=0,d=0,f=0,u=0,r,h=0,p=1,_=1,l=null,b=gD,m=null,E,B,I,k=mg,F=.5,x,M,R,P,C;function D(H){return R(H[0]*Ft,H[1]*Ft)}function j(H){return H=R.invert(H[0],H[1]),H&&[H[0]*Dn,H[1]*Dn]}D.stream=function(H){return P&&C===H?P:P=Ple(Dle(r)(b(x(k(C=H)))))},D.preclip=function(H){return arguments.length?(b=H,l=void 0,W()):b},D.postclip=function(H){return arguments.length?(k=H,m=E=B=I=null,W()):k},D.clipAngle=function(H){return arguments.length?(b=+H?ble(l=H*Ft):(l=null,gD),W()):l*Dn},D.clipExtent=function(H){return arguments.length?(k=H==null?(m=E=B=I=null,mg):vq(m=+H[0][0],E=+H[0][1],B=+H[1][0],I=+H[1][1]),W()):m==null?null:[[m,E],[B,I]]},D.scale=function(H){return arguments.length?(n=+H,$()):n},D.translate=function(H){return arguments.length?(i=+H[0],s=+H[1],$()):[i,s]},D.center=function(H){return arguments.length?(a=H[0]%360*Ft,c=H[1]%360*Ft,$()):[a*Dn,c*Dn]},D.rotate=function(H){return arguments.length?(d=H[0]%360*Ft,f=H[1]%360*Ft,u=H.length>2?H[2]%360*Ft:0,$()):[d*Dn,f*Dn,u*Dn]},D.angle=function(H){return arguments.length?(h=H%360*Ft,$()):h*Dn},D.reflectX=function(H){return arguments.length?(p=H?-1:1,$()):p<0},D.reflectY=function(H){return arguments.length?(_=H?-1:1,$()):_<0},D.precision=function(H){return arguments.length?(x=FD(M,F=H*H),W()):rs(F)},D.fitExtent=function(H,G){return D1(D,H,G)},D.fitSize=function(H,G){return Ux(D,H,G)},D.fitWidth=function(H,G){return jx(D,H,G)},D.fitHeight=function(H,G){return $x(D,H,G)};function $(){var H=kD(n,0,0,p,_,h).apply(null,t(a,c)),G=kD(n,i-H[0],s-H[1],p,_,h);return r=mq(d,f,u),M=JF(t,G),R=JF(r,M),x=FD(M,F),W()}function W(){return P=C=null,D}return function(){return t=e.apply(this,arguments),D.invert=t.invert&&j,$()}}function zx(e){var t=0,n=Mt/3,i=Cq(e),s=i(t,n);return s.parallels=function(a){return arguments.length?i(t=a[0]*Ft,n=a[1]*Ft):[t*Dn,n*Dn]},s}function jle(e){var t=st(e);function n(i,s){return[i*t,Qe(s)/t]}return n.invert=function(i,s){return[i/t,vs(s*t)]},n}function $le(e,t){var n=Qe(e),i=(n+Qe(t))/2;if(Lt(i)<it)return jle(e);var s=1+n*(2*i-n),a=rs(s)/i;function c(d,f){var u=rs(s-2*i*Qe(f))/i;return[u*Qe(d*=i),a-u*st(d)]}return c.invert=function(d,f){var u=a-f,r=Tr(d,Lt(u))*_r(u);return u*i<0&&(r-=Mt*_r(d)*_r(u)),[r/i,vs((s-(d*d+u*u)*i*i)/(2*i))]},c}function GT(){return zx($le).scale(155.424).center([0,33.6442])}function Lq(){return GT().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function zle(e){var t=e.length;return{point:function(n,i){for(var s=-1;++s<t;)e[s].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function qle(){var e,t,n=Lq(),i,s=GT().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,c=GT().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,f,u={point:function(p,_){f=[p,_]}};function r(p){var _=p[0],l=p[1];return f=null,i.point(_,l),f||(a.point(_,l),f)||(d.point(_,l),f)}r.invert=function(p){var _=n.scale(),l=n.translate(),b=(p[0]-l[0])/_,m=(p[1]-l[1])/_;return(m>=.12&&m<.234&&b>=-.425&&b<-.214?s:m>=.166&&m<.234&&b>=-.214&&b<-.115?c:n).invert(p)},r.stream=function(p){return e&&t===p?e:e=zle([n.stream(t=p),s.stream(p),c.stream(p)])},r.precision=function(p){return arguments.length?(n.precision(p),s.precision(p),c.precision(p),h()):n.precision()},r.scale=function(p){return arguments.length?(n.scale(p),s.scale(p*.35),c.scale(p),r.translate(n.translate())):n.scale()},r.translate=function(p){if(!arguments.length)return n.translate();var _=n.scale(),l=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[l-.455*_,b-.238*_],[l+.455*_,b+.238*_]]).stream(u),a=s.translate([l-.307*_,b+.201*_]).clipExtent([[l-.425*_+it,b+.12*_+it],[l-.214*_-it,b+.234*_-it]]).stream(u),d=c.translate([l-.205*_,b+.212*_]).clipExtent([[l-.214*_+it,b+.166*_+it],[l-.115*_-it,b+.234*_-it]]).stream(u),h()},r.fitExtent=function(p,_){return D1(r,p,_)},r.fitSize=function(p,_){return Ux(r,p,_)},r.fitWidth=function(p,_){return jx(r,p,_)},r.fitHeight=function(p,_){return $x(r,p,_)};function h(){return e=t=null,r}return r.scale(1070)}function Pq(e){return function(t,n){var i=st(t),s=st(n),a=e(i*s);return a===1/0?[2,0]:[a*s*Qe(t),a*Qe(n)]}}function om(e){return function(t,n){var i=rs(t*t+n*n),s=e(i),a=Qe(s),c=st(s);return[Tr(t*a,i*c),vs(i&&n*a/i)]}}var Dq=Pq(function(e){return rs(2/(1+e))});Dq.invert=om(function(e){return 2*vs(e/2)});function Vle(){return _o(Dq).scale(124.75).clipAngle(180-.001)}var Uq=Pq(function(e){return(e=oq(e))&&e/Qe(e)});Uq.invert=om(function(e){return e});function Gle(){return _o(Uq).scale(79.4188).clipAngle(180-.001)}function U1(e,t){return[e,IT(Lx((An+t)/2))]}U1.invert=function(e,t){return[e,2*e_(aq(t))-An]};function Hle(){return jq(U1).scale(961/ss)}function jq(e){var t=_o(e),n=t.center,i=t.scale,s=t.translate,a=t.clipExtent,c=null,d,f,u;t.scale=function(h){return arguments.length?(i(h),r()):i()},t.translate=function(h){return arguments.length?(s(h),r()):s()},t.center=function(h){return arguments.length?(n(h),r()):n()},t.clipExtent=function(h){return arguments.length?(h==null?c=d=f=u=null:(c=+h[0][0],d=+h[0][1],f=+h[1][0],u=+h[1][1]),r()):c==null?null:[[c,d],[f,u]]};function r(){var h=Mt*i(),p=t(ule(t.rotate()).invert([0,0]));return a(c==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===U1?[[Math.max(p[0]-h,c),d],[Math.min(p[0]+h,f),u]]:[[c,Math.max(p[1]-h,d)],[f,Math.min(p[1]+h,u)]])}return r()}function xb(e){return Lx((An+e)/2)}function Wle(e,t){var n=st(e),i=e===t?Qe(e):IT(n/st(t))/IT(xb(t)/xb(e)),s=n*_B(xb(e),i)/i;if(!i)return U1;function a(c,d){s>0?d<-An+it&&(d=-An+it):d>An-it&&(d=An-it);var f=s/_B(xb(d),i);return[f*Qe(i*c),s-f*st(i*c)]}return a.invert=function(c,d){var f=s-d,u=_r(i)*rs(c*c+f*f),r=Tr(c,Lt(f))*_r(f);return f*i<0&&(r-=Mt*_r(c)*_r(f)),[r/i,2*e_(_B(s/u,1/i))-An]},a}function Yle(){return zx(Wle).scale(109.5).parallels([30,30])}function HT(e,t){return[e,t]}HT.invert=HT;function Xle(){return _o(HT).scale(152.63)}function Kle(e,t){var n=st(e),i=e===t?Qe(e):(n-st(t))/(t-e),s=n/i+e;if(Lt(i)<it)return HT;function a(c,d){var f=s-d,u=i*c;return[f*Qe(u),s-f*st(u)]}return a.invert=function(c,d){var f=s-d,u=Tr(c,Lt(f))*_r(f);return f*i<0&&(u-=Mt*_r(c)*_r(f)),[u/i,s-_r(i)*rs(c*c+f*f)]},a}function Jle(){return zx(Kle).scale(131.154).center([0,13.9389])}var Jy=1.340264,Qy=-.081106,Zy=893e-6,eg=.003796,WT=rs(3)/2,Qle=12;function $q(e,t){var n=vs(WT*Qe(t)),i=n*n,s=i*i*i;return[e*st(n)/(WT*(Jy+3*Qy*i+s*(7*Zy+9*eg*i))),n*(Jy+Qy*i+s*(Zy+eg*i))]}$q.invert=function(e,t){for(var n=t,i=n*n,s=i*i*i,a=0,c,d,f;a<Qle&&(d=n*(Jy+Qy*i+s*(Zy+eg*i))-t,f=Jy+3*Qy*i+s*(7*Zy+9*eg*i),n-=c=d/f,i=n*n,s=i*i*i,!(Lt(c)<ST));++a);return[WT*e*(Jy+3*Qy*i+s*(7*Zy+9*eg*i))/st(n),vs(Qe(n)/WT)]};function Zle(){return _o($q).scale(177.158)}function zq(e,t){var n=st(t),i=st(e)*n;return[n*Qe(e)/i,Qe(t)/i]}zq.invert=om(e_);function ece(){return _o(zq).scale(144.049).clipAngle(60)}function tce(){var e=1,t=0,n=0,i=1,s=1,a=0,c,d,f=null,u,r,h,p=1,_=1,l=P1({point:function(k,F){var x=I([k,F]);this.stream.point(x[0],x[1])}}),b=mg,m,E;function B(){return p=e*i,_=e*s,m=E=null,I}function I(k){var F=k[0]*p,x=k[1]*_;if(a){var M=x*c-F*d;F=F*c+x*d,x=M}return[F+t,x+n]}return I.invert=function(k){var F=k[0]-t,x=k[1]-n;if(a){var M=x*c+F*d;F=F*c-x*d,x=M}return[F/p,x/_]},I.stream=function(k){return m&&E===k?m:m=l(b(E=k))},I.postclip=function(k){return arguments.length?(b=k,f=u=r=h=null,B()):b},I.clipExtent=function(k){return arguments.length?(b=k==null?(f=u=r=h=null,mg):vq(f=+k[0][0],u=+k[0][1],r=+k[1][0],h=+k[1][1]),B()):f==null?null:[[f,u],[r,h]]},I.scale=function(k){return arguments.length?(e=+k,B()):e},I.translate=function(k){return arguments.length?(t=+k[0],n=+k[1],B()):[t,n]},I.angle=function(k){return arguments.length?(a=k%360*Ft,d=Qe(a),c=st(a),B()):a*Dn},I.reflectX=function(k){return arguments.length?(i=k?-1:1,B()):i<0},I.reflectY=function(k){return arguments.length?(s=k?-1:1,B()):s<0},I.fitExtent=function(k,F){return D1(I,k,F)},I.fitSize=function(k,F){return Ux(I,k,F)},I.fitWidth=function(k,F){return jx(I,k,F)},I.fitHeight=function(k,F){return $x(I,k,F)},I}function qq(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}qq.invert=function(e,t){var n=t,i=25,s;do{var a=n*n,c=a*a;n-=s=(n*(1.007226+a*(.015085+c*(-.044475+.028874*a-.005916*c)))-t)/(1.007226+a*(.015085*3+c*(-.044475*7+.028874*9*a-.005916*11*c)))}while(Lt(s)>it&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function nce(){return _o(qq).scale(175.295)}function Vq(e,t){return[st(t)*Qe(e),Qe(t)]}Vq.invert=om(vs);function ice(){return _o(Vq).scale(249.5).clipAngle(90+it)}function Gq(e,t){var n=st(t),i=1+st(e)*n;return[n*Qe(e)/i,Qe(t)/i]}Gq.invert=om(function(e){return 2*e_(e)});function sce(){return _o(Gq).scale(250).clipAngle(142)}function Hq(e,t){return[IT(Lx((An+t)/2)),-e]}Hq.invert=function(e,t){return[-t,2*e_(aq(e))-An]};function rce(){var e=jq(Hq),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function ace(e,t){return e.parent===t.parent?1:2}function oce(e){return e.reduce(lce,0)/e.length}function lce(e,t){return e+t.x}function cce(e){return 1+e.reduce(dce,0)}function dce(e,t){return Math.max(e,t.y)}function fce(e){for(var t;t=e.children;)e=t[0];return e}function uce(e){for(var t;t=e.children;)e=t[t.length-1];return e}function hce(){var e=ace,t=1,n=1,i=!1;function s(a){var c,d=0;a.eachAfter(function(p){var _=p.children;_?(p.x=oce(_),p.y=cce(_)):(p.x=c?d+=e(p,c):0,p.y=0,c=p)});var f=fce(a),u=uce(a),r=f.x-e(f,u)/2,h=u.x+e(u,f)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-r)/(h-r)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return s.separation=function(a){return arguments.length?(e=a,s):e},s.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],s):i?null:[t,n]},s.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],s):i?[t,n]:null},s}function _ce(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function pce(){return this.eachAfter(_ce)}function yce(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function gce(e,t){for(var n=this,i=[n],s,a,c=-1;n=i.pop();)if(e.call(t,n,++c,this),s=n.children)for(a=s.length-1;a>=0;--a)i.push(s[a]);return this}function mce(e,t){for(var n=this,i=[n],s=[],a,c,d,f=-1;n=i.pop();)if(s.push(n),a=n.children)for(c=0,d=a.length;c<d;++c)i.push(a[c]);for(;n=s.pop();)e.call(t,n,++f,this);return this}function wce(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function bce(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,s=i&&i.length;--s>=0;)n+=i[s].value;t.value=n})}function Tce(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function vce(e){for(var t=this,n=Ece(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var s=i.length;e!==n;)i.splice(s,0,e),e=e.parent;return i}function Ece(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),s=null;for(e=n.pop(),t=i.pop();e===t;)s=e,e=n.pop(),t=i.pop();return s}function Sce(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Bce(){return Array.from(this)}function Ice(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Fce(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*kce(){var e=this,t,n=[e],i,s,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(s=0,a=i.length;s<a;++s)n.push(i[s]);while(n.length)}function qx(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Ace)):t===void 0&&(t=Mce);for(var n=new lh(e),i,s=[n],a,c,d,f;i=s.pop();)if((c=t(i.data))&&(f=(c=Array.from(c)).length))for(i.children=c,d=f-1;d>=0;--d)s.push(a=c[d]=new lh(c[d])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(Wq)}function xce(){return qx(this).eachBefore(Oce)}function Mce(e){return e.children}function Ace(e){return Array.isArray(e)?e[1]:null}function Oce(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Wq(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function lh(e){this.data=e,this.depth=this.height=0,this.parent=null}lh.prototype=qx.prototype={constructor:lh,count:pce,each:yce,eachAfter:mce,eachBefore:gce,find:wce,sum:bce,sort:Tce,path:vce,ancestors:Sce,descendants:Bce,leaves:Ice,links:Fce,copy:xce,[Symbol.iterator]:kce};function b0(e){return e==null?null:Yq(e)}function Yq(e){if(typeof e!="function")throw new Error;return e}function Cd(){return 0}function _u(e){return function(){return e}}const Nce=1664525,Rce=1013904223,xD=4294967296;function Cce(){let e=1;return()=>(e=(Nce*e+Rce)%xD)/xD}function Lce(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pce(e,t){let n=e.length,i,s;for(;n;)s=t()*n--|0,i=e[n],e[n]=e[s],e[s]=i;return e}function Dce(e,t){for(var n=0,i=(e=Pce(Array.from(e),t)).length,s=[],a,c;n<i;)a=e[n],c&&Xq(c,a)?++n:(c=jce(s=Uce(s,a)),n=0);return c}function Uce(e,t){var n,i;if(wB(t,e))return[t];for(n=0;n<e.length;++n)if(Mb(t,e[n])&&wB(Ey(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Mb(Ey(e[n],e[i]),t)&&Mb(Ey(e[n],t),e[i])&&Mb(Ey(e[i],t),e[n])&&wB(Kq(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Mb(e,t){var n=e.r-t.r,i=t.x-e.x,s=t.y-e.y;return n<0||n*n<i*i+s*s}function Xq(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,s=t.y-e.y;return n>0&&n*n>i*i+s*s}function wB(e,t){for(var n=0;n<t.length;++n)if(!Xq(e,t[n]))return!1;return!0}function jce(e){switch(e.length){case 1:return $ce(e[0]);case 2:return Ey(e[0],e[1]);case 3:return Kq(e[0],e[1],e[2])}}function $ce(e){return{x:e.x,y:e.y,r:e.r}}function Ey(e,t){var n=e.x,i=e.y,s=e.r,a=t.x,c=t.y,d=t.r,f=a-n,u=c-i,r=d-s,h=Math.sqrt(f*f+u*u);return{x:(n+a+f/h*r)/2,y:(i+c+u/h*r)/2,r:(h+s+d)/2}}function Kq(e,t,n){var i=e.x,s=e.y,a=e.r,c=t.x,d=t.y,f=t.r,u=n.x,r=n.y,h=n.r,p=i-c,_=i-u,l=s-d,b=s-r,m=f-a,E=h-a,B=i*i+s*s-a*a,I=B-c*c-d*d+f*f,k=B-u*u-r*r+h*h,F=_*l-p*b,x=(l*k-b*I)/(F*2)-i,M=(b*m-l*E)/F,R=(_*I-p*k)/(F*2)-s,P=(p*E-_*m)/F,C=M*M+P*P-1,D=2*(a+x*M+R*P),j=x*x+R*R-a*a,$=-(Math.abs(C)>1e-6?(D+Math.sqrt(D*D-4*C*j))/(2*C):j/D);return{x:i+x+M*$,y:s+R+P*$,r:$}}function MD(e,t,n){var i=e.x-t.x,s,a,c=e.y-t.y,d,f,u=i*i+c*c;u?(a=t.r+n.r,a*=a,f=e.r+n.r,f*=f,a>f?(s=(u+f-a)/(2*u),d=Math.sqrt(Math.max(0,f/u-s*s)),n.x=e.x-s*i-d*c,n.y=e.y-s*c+d*i):(s=(u+a-f)/(2*u),d=Math.sqrt(Math.max(0,a/u-s*s)),n.x=t.x+s*i-d*c,n.y=t.y+s*c+d*i)):(n.x=t.x+n.r,n.y=t.y)}function AD(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,s=t.y-e.y;return n>0&&n*n>i*i+s*s}function OD(e){var t=e._,n=e.next._,i=t.r+n.r,s=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return s*s+a*a}function Ab(e){this._=e,this.next=null,this.previous=null}function zce(e,t){if(!(a=(e=Lce(e)).length))return 0;var n,i,s,a,c,d,f,u,r,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;MD(i,n,s=e[2]),n=new Ab(n),i=new Ab(i),s=new Ab(s),n.next=s.previous=i,i.next=n.previous=s,s.next=i.previous=n;e:for(f=3;f<a;++f){MD(n._,i._,s=e[f]),s=new Ab(s),u=i.next,r=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(AD(u._,s._)){i=u,n.next=i,i.previous=n,--f;continue e}h+=u._.r,u=u.next}else{if(AD(r._,s._)){n=r,n.next=i,i.previous=n,--f;continue e}p+=r._.r,r=r.previous}while(u!==r.next);for(s.previous=n,s.next=i,n.next=i.previous=i=s,c=OD(n);(s=s.next)!==i;)(d=OD(s))<c&&(n=s,c=d);i=n.next}for(n=[i._],s=i;(s=s.next)!==i;)n.push(s._);for(s=Dce(n,t),f=0;f<a;++f)n=e[f],n.x-=s.x,n.y-=s.y;return s.r}function qce(e){return Math.sqrt(e.value)}function Vce(){var e=null,t=1,n=1,i=Cd;function s(a){const c=Cce();return a.x=t/2,a.y=n/2,e?a.eachBefore(ND(e)).eachAfter(bB(i,.5,c)).eachBefore(RD(1)):a.eachBefore(ND(qce)).eachAfter(bB(Cd,1,c)).eachAfter(bB(i,a.r/Math.min(t,n),c)).eachBefore(RD(Math.min(t,n)/(2*a.r))),a}return s.radius=function(a){return arguments.length?(e=b0(a),s):e},s.size=function(a){return arguments.length?(t=+a[0],n=+a[1],s):[t,n]},s.padding=function(a){return arguments.length?(i=typeof a=="function"?a:_u(+a),s):i},s}function ND(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function bB(e,t,n){return function(i){if(s=i.children){var s,a,c=s.length,d=e(i)*t||0,f;if(d)for(a=0;a<c;++a)s[a].r+=d;if(f=zce(s,n),d)for(a=0;a<c;++a)s[a].r-=d;i.r=f+d}}}function RD(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Jq(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function lm(e,t,n,i,s){for(var a=e.children,c,d=-1,f=a.length,u=e.value&&(i-t)/e.value;++d<f;)c=a[d],c.y0=n,c.y1=s,c.x0=t,c.x1=t+=c.value*u}function Gce(){var e=1,t=1,n=0,i=!1;function s(c){var d=c.height+1;return c.x0=c.y0=n,c.x1=e,c.y1=t/d,c.eachBefore(a(t,d)),i&&c.eachBefore(Jq),c}function a(c,d){return function(f){f.children&&lm(f,f.x0,c*(f.depth+1)/d,f.x1,c*(f.depth+2)/d);var u=f.x0,r=f.y0,h=f.x1-n,p=f.y1-n;h<u&&(u=h=(u+h)/2),p<r&&(r=p=(r+p)/2),f.x0=u,f.y0=r,f.x1=h,f.y1=p}}return s.round=function(c){return arguments.length?(i=!!c,s):i},s.size=function(c){return arguments.length?(e=+c[0],t=+c[1],s):[e,t]},s.padding=function(c){return arguments.length?(n=+c,s):n},s}var Hce={depth:-1},CD={},TB={};function Wce(e){return e.id}function Yce(e){return e.parentId}function LD(){var e=Wce,t=Yce,n;function i(s){var a=Array.from(s),c=e,d=t,f,u,r,h,p,_,l,b,m=new Map;if(n!=null){const E=a.map((k,F)=>Xce(n(k,F,s))),B=E.map(PD),I=new Set(E).add("");for(const k of B)I.has(k)||(I.add(k),E.push(k),B.push(PD(k)),a.push(TB));c=(k,F)=>E[F],d=(k,F)=>B[F]}for(r=0,f=a.length;r<f;++r)u=a[r],_=a[r]=new lh(u),(l=c(u,r,s))!=null&&(l+="")&&(b=_.id=l,m.set(b,m.has(b)?CD:_)),(l=d(u,r,s))!=null&&(l+="")&&(_.parent=l);for(r=0;r<f;++r)if(_=a[r],l=_.parent){if(p=m.get(l),!p)throw new Error("missing: "+l);if(p===CD)throw new Error("ambiguous: "+l);p.children?p.children.push(_):p.children=[_],_.parent=p}else{if(h)throw new Error("multiple roots");h=_}if(!h)throw new Error("no root");if(n!=null){for(;h.data===TB&&h.children.length===1;)h=h.children[0],--f;for(let E=a.length-1;E>=0&&(_=a[E],_.data===TB);--E)_.data=null}if(h.parent=Hce,h.eachBefore(function(E){E.depth=E.parent.depth+1,--f}).eachBefore(Wq),h.parent=null,f>0)throw new Error("cycle");return h}return i.id=function(s){return arguments.length?(e=b0(s),i):e},i.parentId=function(s){return arguments.length?(t=b0(s),i):t},i.path=function(s){return arguments.length?(n=b0(s),i):n},i}function Xce(e){e=`${e}`;let t=e.length;return lk(e,t-1)&&!lk(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function PD(e){let t=e.length;if(t<2)return"";for(;--t>1&&!lk(e,t););return e.slice(0,t)}function lk(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Kce(e,t){return e.parent===t.parent?1:2}function vB(e){var t=e.children;return t?t[0]:e.t}function EB(e){var t=e.children;return t?t[t.length-1]:e.t}function Jce(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Qce(e){for(var t=0,n=0,i=e.children,s=i.length,a;--s>=0;)a=i[s],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Zce(e,t,n){return e.a.parent===t.parent?e.a:n}function T0(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}T0.prototype=Object.create(lh.prototype);function ede(e){for(var t=new T0(e,0),n,i=[t],s,a,c,d;n=i.pop();)if(a=n._.children)for(n.children=new Array(d=a.length),c=d-1;c>=0;--c)i.push(s=n.children[c]=new T0(a[c],c)),s.parent=n;return(t.parent=new T0(null,0)).children=[t],t}function tde(){var e=Kce,t=1,n=1,i=null;function s(u){var r=ede(u);if(r.eachAfter(a),r.parent.m=-r.z,r.eachBefore(c),i)u.eachBefore(f);else{var h=u,p=u,_=u;u.eachBefore(function(B){B.x<h.x&&(h=B),B.x>p.x&&(p=B),B.depth>_.depth&&(_=B)});var l=h===p?1:e(h,p)/2,b=l-h.x,m=t/(p.x+l+b),E=n/(_.depth||1);u.eachBefore(function(B){B.x=(B.x+b)*m,B.y=B.depth*E})}return u}function a(u){var r=u.children,h=u.parent.children,p=u.i?h[u.i-1]:null;if(r){Qce(u);var _=(r[0].z+r[r.length-1].z)/2;p?(u.z=p.z+e(u._,p._),u.m=u.z-_):u.z=_}else p&&(u.z=p.z+e(u._,p._));u.parent.A=d(u,p,u.parent.A||h[0])}function c(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function d(u,r,h){if(r){for(var p=u,_=u,l=r,b=p.parent.children[0],m=p.m,E=_.m,B=l.m,I=b.m,k;l=EB(l),p=vB(p),l&&p;)b=vB(b),_=EB(_),_.a=u,k=l.z+B-p.z-m+e(l._,p._),k>0&&(Jce(Zce(l,u,h),u,k),m+=k,E+=k),B+=l.m,m+=p.m,I+=b.m,E+=_.m;l&&!EB(_)&&(_.t=l,_.m+=B-E),p&&!vB(b)&&(b.t=p,b.m+=m-I,h=u)}return h}function f(u){u.x*=t,u.y=u.depth*n}return s.separation=function(u){return arguments.length?(e=u,s):e},s.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],s):i?null:[t,n]},s.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],s):i?[t,n]:null},s}function j1(e,t,n,i,s){for(var a=e.children,c,d=-1,f=a.length,u=e.value&&(s-n)/e.value;++d<f;)c=a[d],c.x0=t,c.x1=i,c.y0=n,c.y1=n+=c.value*u}var Qq=(1+Math.sqrt(5))/2;function Zq(e,t,n,i,s,a){for(var c=[],d=t.children,f,u,r=0,h=0,p=d.length,_,l,b=t.value,m,E,B,I,k,F,x;r<p;){_=s-n,l=a-i;do m=d[h++].value;while(!m&&h<p);for(E=B=m,F=Math.max(l/_,_/l)/(b*e),x=m*m*F,k=Math.max(B/x,x/E);h<p;++h){if(m+=u=d[h].value,u<E&&(E=u),u>B&&(B=u),x=m*m*F,I=Math.max(B/x,x/E),I>k){m-=u;break}k=I}c.push(f={value:m,dice:_<l,children:d.slice(r,h)}),f.dice?lm(f,n,i,s,b?i+=l*m/b:a):j1(f,n,i,b?n+=_*m/b:s,a),b-=m,r=h}return c}const e7=function e(t){function n(i,s,a,c,d){Zq(t,i,s,a,c,d)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(Qq);function nde(){var e=e7,t=!1,n=1,i=1,s=[0],a=Cd,c=Cd,d=Cd,f=Cd,u=Cd;function r(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),s=[0],t&&p.eachBefore(Jq),p}function h(p){var _=s[p.depth],l=p.x0+_,b=p.y0+_,m=p.x1-_,E=p.y1-_;m<l&&(l=m=(l+m)/2),E<b&&(b=E=(b+E)/2),p.x0=l,p.y0=b,p.x1=m,p.y1=E,p.children&&(_=s[p.depth+1]=a(p)/2,l+=u(p)-_,b+=c(p)-_,m-=d(p)-_,E-=f(p)-_,m<l&&(l=m=(l+m)/2),E<b&&(b=E=(b+E)/2),e(p,l,b,m,E))}return r.round=function(p){return arguments.length?(t=!!p,r):t},r.size=function(p){return arguments.length?(n=+p[0],i=+p[1],r):[n,i]},r.tile=function(p){return arguments.length?(e=Yq(p),r):e},r.padding=function(p){return arguments.length?r.paddingInner(p).paddingOuter(p):r.paddingInner()},r.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:_u(+p),r):a},r.paddingOuter=function(p){return arguments.length?r.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):r.paddingTop()},r.paddingTop=function(p){return arguments.length?(c=typeof p=="function"?p:_u(+p),r):c},r.paddingRight=function(p){return arguments.length?(d=typeof p=="function"?p:_u(+p),r):d},r.paddingBottom=function(p){return arguments.length?(f=typeof p=="function"?p:_u(+p),r):f},r.paddingLeft=function(p){return arguments.length?(u=typeof p=="function"?p:_u(+p),r):u},r}function ide(e,t,n,i,s){var a=e.children,c,d=a.length,f,u=new Array(d+1);for(u[0]=f=c=0;c<d;++c)u[c+1]=f+=a[c].value;r(0,d,e.value,t,n,i,s);function r(h,p,_,l,b,m,E){if(h>=p-1){var B=a[h];B.x0=l,B.y0=b,B.x1=m,B.y1=E;return}for(var I=u[h],k=_/2+I,F=h+1,x=p-1;F<x;){var M=F+x>>>1;u[M]<k?F=M+1:x=M}k-u[F-1]<u[F]-k&&h+1<F&&--F;var R=u[F]-I,P=_-R;if(m-l>E-b){var C=_?(l*P+m*R)/_:m;r(h,F,R,l,b,C,E),r(F,p,P,C,b,m,E)}else{var D=_?(b*P+E*R)/_:E;r(h,F,R,l,b,m,D),r(F,p,P,l,D,m,E)}}}function sde(e,t,n,i,s){(e.depth&1?j1:lm)(e,t,n,i,s)}const rde=function e(t){function n(i,s,a,c,d){if((f=i._squarify)&&f.ratio===t)for(var f,u,r,h,p=-1,_,l=f.length,b=i.value;++p<l;){for(u=f[p],r=u.children,h=u.value=0,_=r.length;h<_;++h)u.value+=r[h].value;u.dice?lm(u,s,a,c,b?a+=(d-a)*u.value/b:d):j1(u,s,a,b?s+=(c-s)*u.value/b:c,d),b-=u.value}else i._squarify=f=Zq(t,i,s,a,c,d),f.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(Qq);function po(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function jc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ck=Symbol("implicit");function Vx(){var e=new EP,t=[],n=[],i=ck;function s(a){let c=e.get(a);if(c===void 0){if(i!==ck)return i;e.set(a,c=t.push(a)-1)}return n[c%n.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new EP;for(const c of a)e.has(c)||e.set(c,t.push(c)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.copy=function(){return Vx(t,n).unknown(i)},po.apply(s,arguments),s}function ade(e){return function(){return e}}function dk(e){return+e}var DD=[0,1];function ws(e){return e}function fk(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ade(isNaN(t)?NaN:.5)}function ode(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function lde(e,t,n){var i=e[0],s=e[1],a=t[0],c=t[1];return s<i?(i=fk(s,i),a=n(c,a)):(i=fk(i,s),a=n(a,c)),function(d){return a(i(d))}}function cde(e,t,n){var i=Math.min(e.length,t.length)-1,s=new Array(i),a=new Array(i),c=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<i;)s[c]=fk(e[c],e[c+1]),a[c]=n(t[c],t[c+1]);return function(d){var f=yc(e,d,1,i)-1;return a[f](s[f](d))}}function cm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $1(){var e=DD,t=DD,n=Uc,i,s,a,c=ws,d,f,u;function r(){var p=Math.min(e.length,t.length);return c!==ws&&(c=ode(e[0],e[p-1])),d=p>2?cde:lde,f=u=null,h}function h(p){return p==null||isNaN(p=+p)?a:(f||(f=d(e.map(i),t,n)))(i(c(p)))}return h.invert=function(p){return c(s((u||(u=d(t,e.map(i),cr)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,dk),r()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),r()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=sm,r()},h.clamp=function(p){return arguments.length?(c=p?!0:ws,r()):c!==ws},h.interpolate=function(p){return arguments.length?(n=p,r()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,_){return i=p,s=_,r()}}function t7(){return $1()(ws,ws)}function n7(e,t,n,i){var s=gc(e,t,n),a;switch(i=rf(i??",f"),i.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=sq(s,c))&&(i.precision=a),Cx(i,c)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=rq(s,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=iq(s))&&(i.precision=a-(i.type==="%")*2);break}}return L1(i)}function kf(e){var t=e.domain;return e.ticks=function(n){var i=t();return kF(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var s=t();return n7(s[0],s[s.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),s=0,a=i.length-1,c=i[s],d=i[a],f,u,r=10;for(d<c&&(u=c,c=d,d=u,u=s,s=a,a=u);r-- >0;){if(u=xF(c,d,n),u===f)return i[s]=c,i[a]=d,t(i);if(u>0)c=Math.floor(c/u)*u,d=Math.ceil(d/u)*u;else if(u<0)c=Math.ceil(c*u)/u,d=Math.floor(d*u)/u;else break;f=u}return e},e}function Gx(){var e=t7();return e.copy=function(){return cm(e,Gx())},po.apply(e,arguments),kf(e)}function i7(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,dk),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return i7(e).unknown(t)},e=arguments.length?Array.from(e,dk):[0,1],kf(n)}function s7(e,t){e=e.slice();var n=0,i=e.length-1,s=e[n],a=e[i],c;return a<s&&(c=n,n=i,i=c,c=s,s=a,a=c),e[n]=t.floor(s),e[i]=t.ceil(a),e}function UD(e){return Math.log(e)}function jD(e){return Math.exp(e)}function dde(e){return-Math.log(-e)}function fde(e){return-Math.exp(-e)}function ude(e){return isFinite(e)?+("1e"+e):e<0?0:e}function hde(e){return e===10?ude:e===Math.E?Math.exp:t=>Math.pow(e,t)}function _de(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function $D(e){return(t,n)=>-e(-t,n)}function Hx(e){const t=e(UD,jD),n=t.domain;let i=10,s,a;function c(){return s=_de(i),a=hde(i),n()[0]<0?(s=$D(s),a=$D(a),e(dde,fde)):e(UD,jD),t}return t.base=function(d){return arguments.length?(i=+d,c()):i},t.domain=function(d){return arguments.length?(n(d),c()):n()},t.ticks=d=>{const f=n();let u=f[0],r=f[f.length-1];const h=r<u;h&&([u,r]=[r,u]);let p=s(u),_=s(r),l,b;const m=d==null?10:+d;let E=[];if(!(i%1)&&_-p<m){if(p=Math.floor(p),_=Math.ceil(_),u>0){for(;p<=_;++p)for(l=1;l<i;++l)if(b=p<0?l/a(-p):l*a(p),!(b<u)){if(b>r)break;E.push(b)}}else for(;p<=_;++p)for(l=i-1;l>=1;--l)if(b=p>0?l/a(-p):l*a(p),!(b<u)){if(b>r)break;E.push(b)}E.length*2<m&&(E=kF(u,r,m))}else E=kF(p,_,Math.min(_-p,m)).map(a);return h?E.reverse():E},t.tickFormat=(d,f)=>{if(d==null&&(d=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=rf(f)).precision==null&&(f.trim=!0),f=L1(f)),d===1/0)return f;const u=Math.max(1,i*d/t.ticks().length);return r=>{let h=r/a(Math.round(s(r)));return h*i<i-.5&&(h*=i),h<=u?f(r):""}},t.nice=()=>n(s7(n(),{floor:d=>a(Math.floor(s(d))),ceil:d=>a(Math.ceil(s(d)))})),t}function r7(){const e=Hx($1()).domain([1,10]);return e.copy=()=>cm(e,r7()).base(e.base()),po.apply(e,arguments),e}function zD(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function qD(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Wx(e){var t=1,n=e(zD(t),qD(t));return n.constant=function(i){return arguments.length?e(zD(t=+i),qD(t)):t},kf(n)}function a7(){var e=Wx($1());return e.copy=function(){return cm(e,a7()).constant(e.constant())},po.apply(e,arguments)}function VD(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function pde(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function yde(e){return e<0?-e*e:e*e}function Yx(e){var t=e(ws,ws),n=1;function i(){return n===1?e(ws,ws):n===.5?e(pde,yde):e(VD(n),VD(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,i()):n},kf(t)}function Xx(){var e=Yx($1());return e.copy=function(){return cm(e,Xx()).exponent(e.exponent())},po.apply(e,arguments),e}function gde(){return Xx.apply(null,arguments).exponent(.5)}function o7(){var e=[],t=[],n=[],i;function s(){var c=0,d=Math.max(1,t.length);for(n=new Array(d-1);++c<d;)n[c-1]=s5(e,c/d);return a}function a(c){return c==null||isNaN(c=+c)?i:t[yc(n,c)]}return a.invertExtent=function(c){var d=t.indexOf(c);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},a.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let d of c)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(ol),s()},a.range=function(c){return arguments.length?(t=Array.from(c),s()):t.slice()},a.unknown=function(c){return arguments.length?(i=c,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return o7().domain(e).range(t).unknown(i)},po.apply(a,arguments)}function l7(){var e=0,t=1,n=1,i=[.5],s=[0,1],a;function c(f){return f!=null&&f<=f?s[yc(i,f,0,n)]:a}function d(){var f=-1;for(i=new Array(n);++f<n;)i[f]=((f+1)*t-(f-n)*e)/(n+1);return c}return c.domain=function(f){return arguments.length?([e,t]=f,e=+e,t=+t,d()):[e,t]},c.range=function(f){return arguments.length?(n=(s=Array.from(f)).length-1,d()):s.slice()},c.invertExtent=function(f){var u=s.indexOf(f);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},c.unknown=function(f){return arguments.length&&(a=f),c},c.thresholds=function(){return i.slice()},c.copy=function(){return l7().domain([e,t]).range(s).unknown(a)},po.apply(kf(c),arguments)}function c7(){var e=[.5],t=[0,1],n,i=1;function s(a){return a!=null&&a<=a?t[yc(e,a,0,i)]:n}return s.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var c=t.indexOf(a);return[e[c-1],e[c]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return c7().domain(e).range(t).unknown(n)},po.apply(s,arguments)}const SB=new Date,BB=new Date;function ti(e,t,n,i){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const c=s(a),d=s.ceil(a);return a-c<d-a?c:d},s.offset=(a,c)=>(t(a=new Date(+a),c==null?1:Math.floor(c)),a),s.range=(a,c,d)=>{const f=[];if(a=s.ceil(a),d=d==null?1:Math.floor(d),!(a<c)||!(d>0))return f;let u;do f.push(u=new Date(+a)),t(a,d),e(a);while(u<a&&a<c);return f},s.filter=a=>ti(c=>{if(c>=c)for(;e(c),!a(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;t(c,-1),!a(c););else for(;--d>=0;)for(;t(c,1),!a(c););}),n&&(s.count=(a,c)=>(SB.setTime(+a),BB.setTime(+c),e(SB),e(BB),Math.floor(n(SB,BB))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(i?c=>i(c)%a===0:c=>s.count(0,c)%a===0):s)),s}const ch=ti(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ch.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ti(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ch);ch.range;const Zo=1e3,pr=Zo*60,el=pr*60,ml=el*24,Kx=ml*7,GD=ml*30,IB=ml*365,tl=ti(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zo)},(e,t)=>(t-e)/Zo,e=>e.getUTCSeconds());tl.range;const z1=ti(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zo)},(e,t)=>{e.setTime(+e+t*pr)},(e,t)=>(t-e)/pr,e=>e.getMinutes());z1.range;const q1=ti(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*pr)},(e,t)=>(t-e)/pr,e=>e.getUTCMinutes());q1.range;const V1=ti(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zo-e.getMinutes()*pr)},(e,t)=>{e.setTime(+e+t*el)},(e,t)=>(t-e)/el,e=>e.getHours());V1.range;const G1=ti(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*el)},(e,t)=>(t-e)/el,e=>e.getUTCHours());G1.range;const cl=ti(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pr)/ml,e=>e.getDate()-1);cl.range;const lc=ti(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ml,e=>e.getUTCDate()-1);lc.range;const d7=ti(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ml,e=>Math.floor(e/ml));d7.range;function xf(e){return ti(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*pr)/Kx)}const t_=xf(0),YT=xf(1),mde=xf(2),wde=xf(3),dh=xf(4),bde=xf(5),Tde=xf(6);t_.range;YT.range;mde.range;wde.range;dh.range;bde.range;Tde.range;function Mf(e){return ti(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Kx)}const n_=Mf(0),XT=Mf(1),vde=Mf(2),Ede=Mf(3),fh=Mf(4),Sde=Mf(5),Bde=Mf(6);n_.range;XT.range;vde.range;Ede.range;fh.range;Sde.range;Bde.range;const Tg=ti(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Tg.range;const vg=ti(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());vg.range;const to=ti(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());to.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ti(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});to.range;const no=ti(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());no.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ti(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});no.range;function f7(e,t,n,i,s,a){const c=[[tl,1,Zo],[tl,5,5*Zo],[tl,15,15*Zo],[tl,30,30*Zo],[a,1,pr],[a,5,5*pr],[a,15,15*pr],[a,30,30*pr],[s,1,el],[s,3,3*el],[s,6,6*el],[s,12,12*el],[i,1,ml],[i,2,2*ml],[n,1,Kx],[t,1,GD],[t,3,3*GD],[e,1,IB]];function d(u,r,h){const p=r<u;p&&([u,r]=[r,u]);const _=h&&typeof h.range=="function"?h:f(u,r,h),l=_?_.range(u,+r+1):[];return p?l.reverse():l}function f(u,r,h){const p=Math.abs(r-u)/h,_=Qh(([,,m])=>m).right(c,p);if(_===c.length)return e.every(gc(u/IB,r/IB,h));if(_===0)return ch.every(Math.max(gc(u,r,h),1));const[l,b]=c[p/c[_-1][2]<c[_][2]/p?_-1:_];return l.every(b)}return[d,f]}const[Ide,Fde]=f7(no,vg,n_,d7,G1,q1),[kde,xde]=f7(to,Tg,t_,cl,V1,z1);function FB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function kB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function R_(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function u7(e){var t=e.dateTime,n=e.date,i=e.time,s=e.periods,a=e.days,c=e.shortDays,d=e.months,f=e.shortMonths,u=C_(s),r=L_(s),h=C_(a),p=L_(a),_=C_(c),l=L_(c),b=C_(d),m=L_(d),E=C_(f),B=L_(f),I={a:z,A:q,b:ie,B:ce,c:null,d:JD,e:JD,f:Qde,g:lfe,G:dfe,H:Xde,I:Kde,j:Jde,L:h7,m:Zde,M:efe,p:se,q:Ie,Q:e3,s:t3,S:tfe,u:nfe,U:ife,V:sfe,w:rfe,W:afe,x:null,X:null,y:ofe,Y:cfe,Z:ffe,"%":ZD},k={a:he,A:Me,b:Ue,B:_e,c:null,d:QD,e:QD,f:pfe,g:Bfe,G:Ffe,H:ufe,I:hfe,j:_fe,L:p7,m:yfe,M:gfe,p:ke,q:Ee,Q:e3,s:t3,S:mfe,u:wfe,U:bfe,V:Tfe,w:vfe,W:Efe,x:null,X:null,y:Sfe,Y:Ife,Z:kfe,"%":ZD},F={a:C,A:D,b:j,B:$,c:W,d:XD,e:XD,f:Gde,g:YD,G:WD,H:KD,I:KD,j:$de,L:Vde,m:jde,M:zde,p:P,q:Ude,Q:Wde,s:Yde,S:qde,u:Rde,U:Cde,V:Lde,w:Nde,W:Pde,x:H,X:G,y:YD,Y:WD,Z:Dde,"%":Hde};I.x=x(n,I),I.X=x(i,I),I.c=x(t,I),k.x=x(n,k),k.X=x(i,k),k.c=x(t,k);function x(ye,X){return function(Y){var U=[],J=-1,K=0,Z=ye.length,Q,fe,ee;for(Y instanceof Date||(Y=new Date(+Y));++J<Z;)ye.charCodeAt(J)===37&&(U.push(ye.slice(K,J)),(fe=HD[Q=ye.charAt(++J)])!=null?Q=ye.charAt(++J):fe=Q==="e"?" ":"0",(ee=X[Q])&&(Q=ee(Y,fe)),U.push(Q),K=J+1);return U.push(ye.slice(K,J)),U.join("")}}function M(ye,X){return function(Y){var U=R_(1900,void 0,1),J=R(U,ye,Y+="",0),K,Z;if(J!=Y.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(X&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(K=kB(R_(U.y,0,1)),Z=K.getUTCDay(),K=Z>4||Z===0?XT.ceil(K):XT(K),K=lc.offset(K,(U.V-1)*7),U.y=K.getUTCFullYear(),U.m=K.getUTCMonth(),U.d=K.getUTCDate()+(U.w+6)%7):(K=FB(R_(U.y,0,1)),Z=K.getDay(),K=Z>4||Z===0?YT.ceil(K):YT(K),K=cl.offset(K,(U.V-1)*7),U.y=K.getFullYear(),U.m=K.getMonth(),U.d=K.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),Z="Z"in U?kB(R_(U.y,0,1)).getUTCDay():FB(R_(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(Z+5)%7:U.w+U.U*7-(Z+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,kB(U)):FB(U)}}function R(ye,X,Y,U){for(var J=0,K=X.length,Z=Y.length,Q,fe;J<K;){if(U>=Z)return-1;if(Q=X.charCodeAt(J++),Q===37){if(Q=X.charAt(J++),fe=F[Q in HD?X.charAt(J++):Q],!fe||(U=fe(ye,Y,U))<0)return-1}else if(Q!=Y.charCodeAt(U++))return-1}return U}function P(ye,X,Y){var U=u.exec(X.slice(Y));return U?(ye.p=r.get(U[0].toLowerCase()),Y+U[0].length):-1}function C(ye,X,Y){var U=_.exec(X.slice(Y));return U?(ye.w=l.get(U[0].toLowerCase()),Y+U[0].length):-1}function D(ye,X,Y){var U=h.exec(X.slice(Y));return U?(ye.w=p.get(U[0].toLowerCase()),Y+U[0].length):-1}function j(ye,X,Y){var U=E.exec(X.slice(Y));return U?(ye.m=B.get(U[0].toLowerCase()),Y+U[0].length):-1}function $(ye,X,Y){var U=b.exec(X.slice(Y));return U?(ye.m=m.get(U[0].toLowerCase()),Y+U[0].length):-1}function W(ye,X,Y){return R(ye,t,X,Y)}function H(ye,X,Y){return R(ye,n,X,Y)}function G(ye,X,Y){return R(ye,i,X,Y)}function z(ye){return c[ye.getDay()]}function q(ye){return a[ye.getDay()]}function ie(ye){return f[ye.getMonth()]}function ce(ye){return d[ye.getMonth()]}function se(ye){return s[+(ye.getHours()>=12)]}function Ie(ye){return 1+~~(ye.getMonth()/3)}function he(ye){return c[ye.getUTCDay()]}function Me(ye){return a[ye.getUTCDay()]}function Ue(ye){return f[ye.getUTCMonth()]}function _e(ye){return d[ye.getUTCMonth()]}function ke(ye){return s[+(ye.getUTCHours()>=12)]}function Ee(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var X=x(ye+="",I);return X.toString=function(){return ye},X},parse:function(ye){var X=M(ye+="",!1);return X.toString=function(){return ye},X},utcFormat:function(ye){var X=x(ye+="",k);return X.toString=function(){return ye},X},utcParse:function(ye){var X=M(ye+="",!0);return X.toString=function(){return ye},X}}}var HD={"-":"",_:" ",0:"0"},fi=/^\s*\d+/,Mde=/^%/,Ade=/[\\^$*+?|[\]().{}]/g;function Ht(e,t,n){var i=e<0?"-":"",s=(i?-e:e)+"",a=s.length;return i+(a<n?new Array(n-a+1).join(t)+s:s)}function Ode(e){return e.replace(Ade,"\\$&")}function C_(e){return new RegExp("^(?:"+e.map(Ode).join("|")+")","i")}function L_(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Nde(e,t,n){var i=fi.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Rde(e,t,n){var i=fi.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Cde(e,t,n){var i=fi.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Lde(e,t,n){var i=fi.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Pde(e,t,n){var i=fi.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function WD(e,t,n){var i=fi.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function YD(e,t,n){var i=fi.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Dde(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Ude(e,t,n){var i=fi.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function jde(e,t,n){var i=fi.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function XD(e,t,n){var i=fi.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function $de(e,t,n){var i=fi.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function KD(e,t,n){var i=fi.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function zde(e,t,n){var i=fi.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function qde(e,t,n){var i=fi.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Vde(e,t,n){var i=fi.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Gde(e,t,n){var i=fi.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Hde(e,t,n){var i=Mde.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Wde(e,t,n){var i=fi.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function Yde(e,t,n){var i=fi.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function JD(e,t){return Ht(e.getDate(),t,2)}function Xde(e,t){return Ht(e.getHours(),t,2)}function Kde(e,t){return Ht(e.getHours()%12||12,t,2)}function Jde(e,t){return Ht(1+cl.count(to(e),e),t,3)}function h7(e,t){return Ht(e.getMilliseconds(),t,3)}function Qde(e,t){return h7(e,t)+"000"}function Zde(e,t){return Ht(e.getMonth()+1,t,2)}function efe(e,t){return Ht(e.getMinutes(),t,2)}function tfe(e,t){return Ht(e.getSeconds(),t,2)}function nfe(e){var t=e.getDay();return t===0?7:t}function ife(e,t){return Ht(t_.count(to(e)-1,e),t,2)}function _7(e){var t=e.getDay();return t>=4||t===0?dh(e):dh.ceil(e)}function sfe(e,t){return e=_7(e),Ht(dh.count(to(e),e)+(to(e).getDay()===4),t,2)}function rfe(e){return e.getDay()}function afe(e,t){return Ht(YT.count(to(e)-1,e),t,2)}function ofe(e,t){return Ht(e.getFullYear()%100,t,2)}function lfe(e,t){return e=_7(e),Ht(e.getFullYear()%100,t,2)}function cfe(e,t){return Ht(e.getFullYear()%1e4,t,4)}function dfe(e,t){var n=e.getDay();return e=n>=4||n===0?dh(e):dh.ceil(e),Ht(e.getFullYear()%1e4,t,4)}function ffe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ht(t/60|0,"0",2)+Ht(t%60,"0",2)}function QD(e,t){return Ht(e.getUTCDate(),t,2)}function ufe(e,t){return Ht(e.getUTCHours(),t,2)}function hfe(e,t){return Ht(e.getUTCHours()%12||12,t,2)}function _fe(e,t){return Ht(1+lc.count(no(e),e),t,3)}function p7(e,t){return Ht(e.getUTCMilliseconds(),t,3)}function pfe(e,t){return p7(e,t)+"000"}function yfe(e,t){return Ht(e.getUTCMonth()+1,t,2)}function gfe(e,t){return Ht(e.getUTCMinutes(),t,2)}function mfe(e,t){return Ht(e.getUTCSeconds(),t,2)}function wfe(e){var t=e.getUTCDay();return t===0?7:t}function bfe(e,t){return Ht(n_.count(no(e)-1,e),t,2)}function y7(e){var t=e.getUTCDay();return t>=4||t===0?fh(e):fh.ceil(e)}function Tfe(e,t){return e=y7(e),Ht(fh.count(no(e),e)+(no(e).getUTCDay()===4),t,2)}function vfe(e){return e.getUTCDay()}function Efe(e,t){return Ht(XT.count(no(e)-1,e),t,2)}function Sfe(e,t){return Ht(e.getUTCFullYear()%100,t,2)}function Bfe(e,t){return e=y7(e),Ht(e.getUTCFullYear()%100,t,2)}function Ife(e,t){return Ht(e.getUTCFullYear()%1e4,t,4)}function Ffe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?fh(e):fh.ceil(e),Ht(e.getUTCFullYear()%1e4,t,4)}function kfe(){return"+0000"}function ZD(){return"%"}function e3(e){return+e}function t3(e){return Math.floor(+e/1e3)}var Zf,Jx,g7,Qx,m7;xfe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xfe(e){return Zf=u7(e),Jx=Zf.format,g7=Zf.parse,Qx=Zf.utcFormat,m7=Zf.utcParse,Zf}function Mfe(e){return new Date(e)}function Afe(e){return e instanceof Date?+e:+new Date(+e)}function Zx(e,t,n,i,s,a,c,d,f,u){var r=t7(),h=r.invert,p=r.domain,_=u(".%L"),l=u(":%S"),b=u("%I:%M"),m=u("%I %p"),E=u("%a %d"),B=u("%b %d"),I=u("%B"),k=u("%Y");function F(x){return(f(x)<x?_:d(x)<x?l:c(x)<x?b:a(x)<x?m:i(x)<x?s(x)<x?E:B:n(x)<x?I:k)(x)}return r.invert=function(x){return new Date(h(x))},r.domain=function(x){return arguments.length?p(Array.from(x,Afe)):p().map(Mfe)},r.ticks=function(x){var M=p();return e(M[0],M[M.length-1],x??10)},r.tickFormat=function(x,M){return M==null?F:u(M)},r.nice=function(x){var M=p();return(!x||typeof x.range!="function")&&(x=t(M[0],M[M.length-1],x??10)),x?p(s7(M,x)):r},r.copy=function(){return cm(r,Zx(e,t,n,i,s,a,c,d,f,u))},r}function w7(){return po.apply(Zx(kde,xde,to,Tg,t_,cl,V1,z1,tl,Jx).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ofe(){return po.apply(Zx(Ide,Fde,no,vg,n_,lc,G1,q1,tl,Qx).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function H1(){var e=0,t=1,n,i,s,a,c=ws,d=!1,f;function u(h){return h==null||isNaN(h=+h)?f:c(s===0?.5:(h=(a(h)-n)*s,d?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),s=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(h){return arguments.length?(d=!!h,u):d},u.interpolator=function(h){return arguments.length?(c=h,u):c};function r(h){return function(p){var _,l;return arguments.length?([_,l]=p,c=h(_,l),u):[c(0),c(1)]}}return u.range=r(Uc),u.rangeRound=r(sm),u.unknown=function(h){return arguments.length?(f=h,u):f},function(h){return a=h,n=h(e),i=h(t),s=n===i?0:1/(i-n),u}}function $c(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function eM(){var e=kf(H1()(ws));return e.copy=function(){return $c(e,eM())},jc.apply(e,arguments)}function b7(){var e=Hx(H1()).domain([1,10]);return e.copy=function(){return $c(e,b7()).base(e.base())},jc.apply(e,arguments)}function T7(){var e=Wx(H1());return e.copy=function(){return $c(e,T7()).constant(e.constant())},jc.apply(e,arguments)}function tM(){var e=Yx(H1());return e.copy=function(){return $c(e,tM()).exponent(e.exponent())},jc.apply(e,arguments)}function Nfe(){return tM.apply(null,arguments).exponent(.5)}function W1(){var e=0,t=.5,n=1,i=1,s,a,c,d,f,u=ws,r,h=!1,p;function _(b){return isNaN(b=+b)?p:(b=.5+((b=+r(b))-a)*(i*b<i*a?d:f),u(h?Math.max(0,Math.min(1,b)):b))}_.domain=function(b){return arguments.length?([e,t,n]=b,s=r(e=+e),a=r(t=+t),c=r(n=+n),d=s===a?0:.5/(a-s),f=a===c?0:.5/(c-a),i=a<s?-1:1,_):[e,t,n]},_.clamp=function(b){return arguments.length?(h=!!b,_):h},_.interpolator=function(b){return arguments.length?(u=b,_):u};function l(b){return function(m){var E,B,I;return arguments.length?([E,B,I]=m,u=Ix(b,[E,B,I]),_):[u(0),u(.5),u(1)]}}return _.range=l(Uc),_.rangeRound=l(sm),_.unknown=function(b){return arguments.length?(p=b,_):p},function(b){return r=b,s=b(e),a=b(t),c=b(n),d=s===a?0:.5/(a-s),f=a===c?0:.5/(c-a),i=a<s?-1:1,_}}function v7(){var e=kf(W1()(ws));return e.copy=function(){return $c(e,v7())},jc.apply(e,arguments)}function E7(){var e=Hx(W1()).domain([.1,1,10]);return e.copy=function(){return $c(e,E7()).base(e.base())},jc.apply(e,arguments)}function S7(){var e=Wx(W1());return e.copy=function(){return $c(e,S7()).constant(e.constant())},jc.apply(e,arguments)}function nM(){var e=Yx(W1());return e.copy=function(){return $c(e,nM()).exponent(e.exponent())},jc.apply(e,arguments)}function Rfe(){return nM.apply(null,arguments).exponent(.5)}function yo(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Cfe=yo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Lfe=yo("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Pfe=yo("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Dfe=yo("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Ufe=yo("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),jfe=yo("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),$fe=yo("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),zfe=yo("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),qfe=yo("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Vfe=yo("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Kt(e){return function(){return e}}const n3=Math.abs,Si=Math.atan2,ed=Math.cos,Gfe=Math.max,xB=Math.min,Ba=Math.sin,zd=Math.sqrt,Bi=1e-12,uh=Math.PI,KT=uh/2,B7=2*uh;function Hfe(e){return e>1?0:e<-1?uh:Math.acos(e)}function i3(e){return e>=1?KT:e<=-1?-KT:Math.asin(e)}function Y1(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new Mx(t)}function Wfe(e){return e.innerRadius}function Yfe(e){return e.outerRadius}function Xfe(e){return e.startAngle}function Kfe(e){return e.endAngle}function Jfe(e){return e&&e.padAngle}function Qfe(e,t,n,i,s,a,c,d){var f=n-e,u=i-t,r=c-s,h=d-a,p=h*f-r*u;if(!(p*p<Bi))return p=(r*(t-a)-h*(e-s))/p,[e+p*f,t+p*u]}function Ob(e,t,n,i,s,a,c){var d=e-n,f=t-i,u=(c?a:-a)/zd(d*d+f*f),r=u*f,h=-u*d,p=e+r,_=t+h,l=n+r,b=i+h,m=(p+l)/2,E=(_+b)/2,B=l-p,I=b-_,k=B*B+I*I,F=s-a,x=p*b-l*_,M=(I<0?-1:1)*zd(Gfe(0,F*F*k-x*x)),R=(x*I-B*M)/k,P=(-x*B-I*M)/k,C=(x*I+B*M)/k,D=(-x*B+I*M)/k,j=R-m,$=P-E,W=C-m,H=D-E;return j*j+$*$>W*W+H*H&&(R=C,P=D),{cx:R,cy:P,x01:-r,y01:-h,x11:R*(s/F-1),y11:P*(s/F-1)}}function Zfe(){var e=Wfe,t=Yfe,n=Kt(0),i=null,s=Xfe,a=Kfe,c=Jfe,d=null,f=Y1(u);function u(){var r,h,p=+e.apply(this,arguments),_=+t.apply(this,arguments),l=s.apply(this,arguments)-KT,b=a.apply(this,arguments)-KT,m=n3(b-l),E=b>l;if(d||(d=r=f()),_<p&&(h=_,_=p,p=h),!(_>Bi))d.moveTo(0,0);else if(m>B7-Bi)d.moveTo(_*ed(l),_*Ba(l)),d.arc(0,0,_,l,b,!E),p>Bi&&(d.moveTo(p*ed(b),p*Ba(b)),d.arc(0,0,p,b,l,E));else{var B=l,I=b,k=l,F=b,x=m,M=m,R=c.apply(this,arguments)/2,P=R>Bi&&(i?+i.apply(this,arguments):zd(p*p+_*_)),C=xB(n3(_-p)/2,+n.apply(this,arguments)),D=C,j=C,$,W;if(P>Bi){var H=i3(P/p*Ba(R)),G=i3(P/_*Ba(R));(x-=H*2)>Bi?(H*=E?1:-1,k+=H,F-=H):(x=0,k=F=(l+b)/2),(M-=G*2)>Bi?(G*=E?1:-1,B+=G,I-=G):(M=0,B=I=(l+b)/2)}var z=_*ed(B),q=_*Ba(B),ie=p*ed(F),ce=p*Ba(F);if(C>Bi){var se=_*ed(I),Ie=_*Ba(I),he=p*ed(k),Me=p*Ba(k),Ue;if(m<uh)if(Ue=Qfe(z,q,he,Me,se,Ie,ie,ce)){var _e=z-Ue[0],ke=q-Ue[1],Ee=se-Ue[0],ye=Ie-Ue[1],X=1/Ba(Hfe((_e*Ee+ke*ye)/(zd(_e*_e+ke*ke)*zd(Ee*Ee+ye*ye)))/2),Y=zd(Ue[0]*Ue[0]+Ue[1]*Ue[1]);D=xB(C,(p-Y)/(X-1)),j=xB(C,(_-Y)/(X+1))}else D=j=0}M>Bi?j>Bi?($=Ob(he,Me,z,q,_,j,E),W=Ob(se,Ie,ie,ce,_,j,E),d.moveTo($.cx+$.x01,$.cy+$.y01),j<C?d.arc($.cx,$.cy,j,Si($.y01,$.x01),Si(W.y01,W.x01),!E):(d.arc($.cx,$.cy,j,Si($.y01,$.x01),Si($.y11,$.x11),!E),d.arc(0,0,_,Si($.cy+$.y11,$.cx+$.x11),Si(W.cy+W.y11,W.cx+W.x11),!E),d.arc(W.cx,W.cy,j,Si(W.y11,W.x11),Si(W.y01,W.x01),!E))):(d.moveTo(z,q),d.arc(0,0,_,B,I,!E)):d.moveTo(z,q),!(p>Bi)||!(x>Bi)?d.lineTo(ie,ce):D>Bi?($=Ob(ie,ce,se,Ie,p,-D,E),W=Ob(z,q,he,Me,p,-D,E),d.lineTo($.cx+$.x01,$.cy+$.y01),D<C?d.arc($.cx,$.cy,D,Si($.y01,$.x01),Si(W.y01,W.x01),!E):(d.arc($.cx,$.cy,D,Si($.y01,$.x01),Si($.y11,$.x11),!E),d.arc(0,0,p,Si($.cy+$.y11,$.cx+$.x11),Si(W.cy+W.y11,W.cx+W.x11),E),d.arc(W.cx,W.cy,D,Si(W.y11,W.x11),Si(W.y01,W.x01),!E))):d.arc(0,0,p,F,k,E)}if(d.closePath(),r)return d=null,r+""||null}return u.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-uh/2;return[ed(h)*r,Ba(h)*r]},u.innerRadius=function(r){return arguments.length?(e=typeof r=="function"?r:Kt(+r),u):e},u.outerRadius=function(r){return arguments.length?(t=typeof r=="function"?r:Kt(+r),u):t},u.cornerRadius=function(r){return arguments.length?(n=typeof r=="function"?r:Kt(+r),u):n},u.padRadius=function(r){return arguments.length?(i=r==null?null:typeof r=="function"?r:Kt(+r),u):i},u.startAngle=function(r){return arguments.length?(s=typeof r=="function"?r:Kt(+r),u):s},u.endAngle=function(r){return arguments.length?(a=typeof r=="function"?r:Kt(+r),u):a},u.padAngle=function(r){return arguments.length?(c=typeof r=="function"?r:Kt(+r),u):c},u.context=function(r){return arguments.length?(d=r??null,u):d},u}function I7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function F7(e){this._context=e}F7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function iM(e){return new F7(e)}function k7(e){return e[0]}function x7(e){return e[1]}function M7(e,t){var n=Kt(!0),i=null,s=iM,a=null,c=Y1(d);e=typeof e=="function"?e:e===void 0?k7:Kt(e),t=typeof t=="function"?t:t===void 0?x7:Kt(t);function d(f){var u,r=(f=I7(f)).length,h,p=!1,_;for(i==null&&(a=s(_=c())),u=0;u<=r;++u)!(u<r&&n(h=f[u],u,f))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,u,f),+t(h,u,f));if(_)return a=null,_+""||null}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Kt(+f),d):e},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Kt(+f),d):t},d.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Kt(!!f),d):n},d.curve=function(f){return arguments.length?(s=f,i!=null&&(a=s(i)),d):s},d.context=function(f){return arguments.length?(f==null?i=a=null:a=s(i=f),d):i},d}function A7(e,t,n){var i=null,s=Kt(!0),a=null,c=iM,d=null,f=Y1(u);e=typeof e=="function"?e:e===void 0?k7:Kt(+e),t=typeof t=="function"?t:Kt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?x7:Kt(+n);function u(h){var p,_,l,b=(h=I7(h)).length,m,E=!1,B,I=new Array(b),k=new Array(b);for(a==null&&(d=c(B=f())),p=0;p<=b;++p){if(!(p<b&&s(m=h[p],p,h))===E)if(E=!E)_=p,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),l=p-1;l>=_;--l)d.point(I[l],k[l]);d.lineEnd(),d.areaEnd()}E&&(I[p]=+e(m,p,h),k[p]=+t(m,p,h),d.point(i?+i(m,p,h):I[p],n?+n(m,p,h):k[p]))}if(B)return d=null,B+""||null}function r(){return M7().defined(s).curve(c).context(a)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Kt(+h),i=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Kt(+h),u):e},u.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:Kt(+h),u):i},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Kt(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Kt(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Kt(+h),u):n},u.lineX0=u.lineY0=function(){return r().x(e).y(t)},u.lineY1=function(){return r().x(e).y(n)},u.lineX1=function(){return r().x(i).y(t)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Kt(!!h),u):s},u.curve=function(h){return arguments.length?(c=h,a!=null&&(d=c(a)),u):c},u.context=function(h){return arguments.length?(h==null?a=d=null:d=c(a=h),u):a},u}const eue={draw(e,t){const n=zd(t/uh);e.moveTo(n,0),e.arc(0,0,n,0,B7)}};function tue(e,t){let n=null,i=Y1(s);e=typeof e=="function"?e:Kt(e||eue),t=typeof t=="function"?t:Kt(t===void 0?64:+t);function s(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return s.type=function(a){return arguments.length?(e=typeof a=="function"?a:Kt(a),s):e},s.size=function(a){return arguments.length?(t=typeof a=="function"?a:Kt(+a),s):t},s.context=function(a){return arguments.length?(n=a??null,s):n},s}function wc(){}function JT(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function X1(e){this._context=e}X1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:JT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:JT(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nue(e){return new X1(e)}function O7(e){this._context=e}O7.prototype={areaStart:wc,areaEnd:wc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:JT(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iue(e){return new O7(e)}function N7(e){this._context=e}N7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:JT(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sue(e){return new N7(e)}function R7(e,t){this._basis=new X1(e),this._beta=t}R7.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],s=t[0],a=e[n]-i,c=t[n]-s,d=-1,f;++d<=n;)f=d/n,this._basis.point(this._beta*e[d]+(1-this._beta)*(i+f*a),this._beta*t[d]+(1-this._beta)*(s+f*c));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const rue=function e(t){function n(i){return t===1?new X1(i):new R7(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function QT(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function sM(e,t){this._context=e,this._k=(1-t)/6}sM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:QT(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:QT(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const aue=function e(t){function n(i){return new sM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function rM(e,t){this._context=e,this._k=(1-t)/6}rM.prototype={areaStart:wc,areaEnd:wc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:QT(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const oue=function e(t){function n(i){return new rM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function aM(e,t){this._context=e,this._k=(1-t)/6}aM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:QT(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lue=function e(t){function n(i){return new aM(i,t)}return n.tension=function(i){return e(+i)},n}(0);function oM(e,t,n){var i=e._x1,s=e._y1,a=e._x2,c=e._y2;if(e._l01_a>Bi){var d=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,f=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*d-e._x0*e._l12_2a+e._x2*e._l01_2a)/f,s=(s*d-e._y0*e._l12_2a+e._y2*e._l01_2a)/f}if(e._l23_a>Bi){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,r=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*u+e._x1*e._l23_2a-t*e._l12_2a)/r,c=(c*u+e._y1*e._l23_2a-n*e._l12_2a)/r}e._context.bezierCurveTo(i,s,a,c,e._x2,e._y2)}function C7(e,t){this._context=e,this._alpha=t}C7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:oM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cue=function e(t){function n(i){return t?new C7(i,t):new sM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function L7(e,t){this._context=e,this._alpha=t}L7.prototype={areaStart:wc,areaEnd:wc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:oM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const due=function e(t){function n(i){return t?new L7(i,t):new rM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function P7(e,t){this._context=e,this._alpha=t}P7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fue=function e(t){function n(i){return t?new P7(i,t):new aM(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function D7(e){this._context=e}D7.prototype={areaStart:wc,areaEnd:wc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uue(e){return new D7(e)}function s3(e){return e<0?-1:1}function r3(e,t,n){var i=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(i||s<0&&-0),c=(n-e._y1)/(s||i<0&&-0),d=(a*s+c*i)/(i+s);return(s3(a)+s3(c))*Math.min(Math.abs(a),Math.abs(c),.5*Math.abs(d))||0}function a3(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function MB(e,t,n){var i=e._x0,s=e._y0,a=e._x1,c=e._y1,d=(a-i)/3;e._context.bezierCurveTo(i+d,s+d*t,a-d,c-d*n,a,c)}function ZT(e){this._context=e}ZT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:MB(this,this._t0,a3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,MB(this,a3(this,n=r3(this,e,t)),n);break;default:MB(this,this._t0,n=r3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function U7(e){this._context=new j7(e)}(U7.prototype=Object.create(ZT.prototype)).point=function(e,t){ZT.prototype.point.call(this,t,e)};function j7(e){this._context=e}j7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,s,a){this._context.bezierCurveTo(t,e,i,n,a,s)}};function hue(e){return new ZT(e)}function _ue(e){return new U7(e)}function $7(e){this._context=e}$7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=o3(e),s=o3(t),a=0,c=1;c<n;++a,++c)this._context.bezierCurveTo(i[0][a],s[0][a],i[1][a],s[1][a],e[c],t[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function o3(e){var t,n=e.length-1,i,s=new Array(n),a=new Array(n),c=new Array(n);for(s[0]=0,a[0]=2,c[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,a[t]=4,c[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,a[n-1]=7,c[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=s[t]/a[t-1],a[t]-=i,c[t]-=i*c[t-1];for(s[n-1]=c[n-1]/a[n-1],t=n-2;t>=0;--t)s[t]=(c[t]-s[t+1])/a[t];for(a[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function pue(e){return new $7(e)}function K1(e,t){this._context=e,this._t=t}K1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function yue(e){return new K1(e,.5)}function gue(e){return new K1(e,0)}function mue(e){return new K1(e,1)}function Sy(e,t,n){this.k=e,this.x=t,this.y=n}Sy.prototype={constructor:Sy,scale:function(e){return e===1?this:new Sy(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Sy(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Sy.prototype;function*z7(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function lM(e,t,n){const i=Float64Array.from(z7(e,n));return i.sort(ol),t.map(s=>s5(i,s))}function cM(e,t){return lM(e,[.25,.5,.75],t)}function dM(e,t){const n=e.length,i=Jne(e,t),s=cM(e,t),a=(s[2]-s[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(s[0])||1)*Math.pow(n,-.2)}function fM(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),s=e.divide||[5,2];let a=e.extent[0],c=e.extent[1],d,f,u,r,h,p;const _=e.span||c-a||Math.abs(a)||1;if(e.step)d=e.step;else if(e.steps){for(r=_/t,h=0,p=e.steps.length;h<p&&e.steps[h]<r;++h);d=e.steps[Math.max(0,h-1)]}else{for(f=Math.ceil(Math.log(t)/i),u=e.minstep||0,d=Math.max(u,Math.pow(n,Math.round(Math.log(_)/i)-f));Math.ceil(_/d)>t;)d*=n;for(h=0,p=s.length;h<p;++h)r=d/s[h],r>=u&&_/r<=t&&(d=r)}r=Math.log(d);const l=r>=0?0:~~(-r/i)+1,b=Math.pow(n,-l-1);return(e.nice||e.nice===void 0)&&(r=Math.floor(a/d+b)*d,a=a<r?r-d:r,c=Math.ceil(c/d)*d),{start:a,stop:c===a?a+d:c,step:d}}var vr=Math.random;function wue(e){vr=e}function q7(e,t,n,i){if(!e.length)return[void 0,void 0];const s=Float64Array.from(z7(e,i)),a=s.length,c=t;let d,f,u,r;for(u=0,r=Array(c);u<c;++u){for(d=0,f=0;f<a;++f)d+=s[~~(vr()*a)];r[u]=d/a}return r.sort(ol),[AF(r,n/2),AF(r,1-n/2)]}function V7(e,t,n,i){i=i||(p=>p);const s=e.length,a=new Float64Array(s);let c=0,d=1,f=i(e[0]),u=f,r=f+t,h;for(;d<s;++d){if(h=i(e[d]),h>=r){for(u=(f+u)/2;c<d;++c)a[c]=u;r=h+t,f=h}u=h}for(u=(f+u)/2;c<d;++c)a[c]=u;return n?bue(a,t+t/4):a}function bue(e,t){const n=e.length;let i=0,s=1,a,c;for(;e[i]===e[s];)++s;for(;s<n;){for(a=s+1;e[s]===e[a];)++a;if(e[s]-e[s-1]<t){for(c=s+(i+a-s-s>>1);c<s;)e[c++]=e[s];for(;c>s;)e[c--]=e[i]}i=s,s=a}return e}function Tue(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function vue(e,t){t==null&&(t=e,e=0);let n,i,s;const a={min(c){return arguments.length?(n=c||0,s=i-n,a):n},max(c){return arguments.length?(i=c||0,s=i-n,a):i},sample(){return n+Math.floor(s*vr())},pdf(c){return c===Math.floor(c)&&c>=n&&c<i?1/s:0},cdf(c){const d=Math.floor(c);return d<n?0:d>=i?1:(d-n+1)/s},icdf(c){return c>=0&&c<=1?n-1+Math.floor(c*s):NaN}};return a.min(e).max(t)}const G7=Math.sqrt(2*Math.PI),Eue=Math.SQRT2;let P_=NaN;function J1(e,t){e=e||0,t=t??1;let n=0,i=0,s,a;if(P_===P_)n=P_,P_=NaN;else{do n=vr()*2-1,i=vr()*2-1,s=n*n+i*i;while(s===0||s>1);a=Math.sqrt(-2*Math.log(s)/s),n*=a,P_=i*a}return e+n*t}function uM(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*G7)}function Q1(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,s=Math.abs(i);let a;if(s>37)a=0;else{const c=Math.exp(-s*s/2);let d;s<7.07106781186547?(d=.0352624965998911*s+.700383064443688,d=d*s+6.37396220353165,d=d*s+33.912866078383,d=d*s+112.079291497871,d=d*s+221.213596169931,d=d*s+220.206867912376,a=c*d,d=.0883883476483184*s+1.75566716318264,d=d*s+16.064177579207,d=d*s+86.7807322029461,d=d*s+296.564248779674,d=d*s+637.333633378831,d=d*s+793.826512519948,d=d*s+440.413735824752,a=a/d):(d=s+.65,d=s+4/d,d=s+3/d,d=s+2/d,d=s+1/d,a=c/d/2.506628274631)}return i>0?1-a:a}function Z1(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Eue*Sue(2*e-1)}function Sue(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function hM(e,t){let n,i;const s={mean(a){return arguments.length?(n=a||0,s):n},stdev(a){return arguments.length?(i=a??1,s):i},sample:()=>J1(n,i),pdf:a=>uM(a,n,i),cdf:a=>Q1(a,n,i),icdf:a=>Z1(a,n,i)};return s.mean(e).stdev(t)}function _M(e,t){const n=hM();let i=0;const s={data(a){return arguments.length?(e=a,i=a?a.length:0,s.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=dM(e)),s):t},sample(){return e[~~(vr()*i)]+t*n.sample()},pdf(a){let c=0,d=0;for(;d<i;++d)c+=n.pdf((a-e[d])/t);return c/t/i},cdf(a){let c=0,d=0;for(;d<i;++d)c+=n.cdf((a-e[d])/t);return c/i},icdf(){throw Error("KDE icdf not supported.")}};return s.data(e)}function pM(e,t){return e=e||0,t=t??1,Math.exp(e+J1()*t)}function yM(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*G7*e)}function gM(e,t,n){return Q1(Math.log(e),t,n)}function mM(e,t,n){return Math.exp(Z1(e,t,n))}function H7(e,t){let n,i;const s={mean(a){return arguments.length?(n=a||0,s):n},stdev(a){return arguments.length?(i=a??1,s):i},sample:()=>pM(n,i),pdf:a=>yM(a,n,i),cdf:a=>gM(a,n,i),icdf:a=>mM(a,n,i)};return s.mean(e).stdev(t)}function W7(e,t){let n=0,i;function s(c){const d=[];let f=0,u;for(u=0;u<n;++u)f+=d[u]=c[u]==null?1:+c[u];for(u=0;u<n;++u)d[u]/=f;return d}const a={weights(c){return arguments.length?(i=s(t=c||[]),a):t},distributions(c){return arguments.length?(c?(n=c.length,e=c):(n=0,e=[]),a.weights(t)):e},sample(){const c=vr();let d=e[n-1],f=i[0],u=0;for(;u<n-1;f+=i[++u])if(c<f){d=e[u];break}return d.sample()},pdf(c){let d=0,f=0;for(;f<n;++f)d+=i[f]*e[f].pdf(c);return d},cdf(c){let d=0,f=0;for(;f<n;++f)d+=i[f]*e[f].cdf(c);return d},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function wM(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*vr()}function bM(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function TM(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function vM(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function Y7(e,t){let n,i;const s={min(a){return arguments.length?(n=a||0,s):n},max(a){return arguments.length?(i=a??1,s):i},sample:()=>wM(n,i),pdf:a=>bM(a,n,i),cdf:a=>TM(a,n,i),icdf:a=>vM(a,n,i)};return t==null&&(t=e??1,e=0),s.min(e).max(t)}function EM(e,t,n){let i=0,s=0;for(const a of e){const c=n(a);t(a)==null||c==null||isNaN(c)||(i+=(c-i)/++s)}return{coef:[i],predict:()=>i,rSquared:0}}function dm(e,t,n,i){const s=i-e*e,a=Math.abs(s)<1e-24?0:(n-e*t)/s;return[t-a*e,a]}function eE(e,t,n,i){e=e.filter(_=>{let l=t(_),b=n(_);return l!=null&&(l=+l)>=l&&b!=null&&(b=+b)>=b}),i&&e.sort((_,l)=>t(_)-t(l));const s=e.length,a=new Float64Array(s),c=new Float64Array(s);let d=0,f=0,u=0,r,h,p;for(p of e)a[d]=r=+t(p),c[d]=h=+n(p),++d,f+=(r-f)/d,u+=(h-u)/d;for(d=0;d<s;++d)a[d]-=f,c[d]-=u;return[a,c,f,u]}function fm(e,t,n,i){let s=-1,a,c;for(const d of e)a=t(d),c=n(d),a!=null&&(a=+a)>=a&&c!=null&&(c=+c)>=c&&i(a,c,++s)}function i_(e,t,n,i,s){let a=0,c=0;return fm(e,t,n,(d,f)=>{const u=f-s(d),r=f-i;a+=u*u,c+=r*r}),1-a/c}function SM(e,t,n){let i=0,s=0,a=0,c=0,d=0;fm(e,t,n,(r,h)=>{++d,i+=(r-i)/d,s+=(h-s)/d,a+=(r*h-a)/d,c+=(r*r-c)/d});const f=dm(i,s,a,c),u=r=>f[0]+f[1]*r;return{coef:f,predict:u,rSquared:i_(e,t,n,s,u)}}function X7(e,t,n){let i=0,s=0,a=0,c=0,d=0;fm(e,t,n,(r,h)=>{++d,r=Math.log(r),i+=(r-i)/d,s+=(h-s)/d,a+=(r*h-a)/d,c+=(r*r-c)/d});const f=dm(i,s,a,c),u=r=>f[0]+f[1]*Math.log(r);return{coef:f,predict:u,rSquared:i_(e,t,n,s,u)}}function K7(e,t,n){const[i,s,a,c]=eE(e,t,n);let d=0,f=0,u=0,r=0,h=0,p,_,l;fm(e,t,n,(B,I)=>{p=i[h++],_=Math.log(I),l=p*I,d+=(I*_-d)/h,f+=(l-f)/h,u+=(l*_-u)/h,r+=(p*l-r)/h});const[b,m]=dm(f/c,d/c,u/c,r/c),E=B=>Math.exp(b+m*(B-a));return{coef:[Math.exp(b-m*a),m],predict:E,rSquared:i_(e,t,n,c,E)}}function J7(e,t,n){let i=0,s=0,a=0,c=0,d=0,f=0;fm(e,t,n,(h,p)=>{const _=Math.log(h),l=Math.log(p);++f,i+=(_-i)/f,s+=(l-s)/f,a+=(_*l-a)/f,c+=(_*_-c)/f,d+=(p-d)/f});const u=dm(i,s,a,c),r=h=>u[0]*Math.pow(h,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:r,rSquared:i_(e,t,n,d,r)}}function BM(e,t,n){const[i,s,a,c]=eE(e,t,n),d=i.length;let f=0,u=0,r=0,h=0,p=0,_,l,b,m;for(_=0;_<d;)l=i[_],b=s[_++],m=l*l,f+=(m-f)/_,u+=(m*l-u)/_,r+=(m*m-r)/_,h+=(l*b-h)/_,p+=(m*b-p)/_;const E=r-f*f,B=f*E-u*u,I=(p*f-h*u)/B,k=(h*E-p*u)/B,F=-I*f,x=M=>(M=M-a,I*M*M+k*M+F+c);return{coef:[F-k*a+I*a*a+c,k-2*I*a,I],predict:x,rSquared:i_(e,t,n,c,x)}}function Q7(e,t,n,i){if(i===0)return EM(e,t,n);if(i===1)return SM(e,t,n);if(i===2)return BM(e,t,n);const[s,a,c,d]=eE(e,t,n),f=s.length,u=[],r=[],h=i+1;let p,_,l,b,m;for(p=0;p<h;++p){for(l=0,b=0;l<f;++l)b+=Math.pow(s[l],p)*a[l];for(u.push(b),m=new Float64Array(h),_=0;_<h;++_){for(l=0,b=0;l<f;++l)b+=Math.pow(s[l],p+_);m[_]=b}r.push(m)}r.push(u);const E=Iue(r),B=I=>{I-=c;let k=d+E[0]+E[1]*I+E[2]*I*I;for(p=3;p<h;++p)k+=E[p]*Math.pow(I,p);return k};return{coef:Bue(h,E,-c,d),predict:B,rSquared:i_(e,t,n,d,B)}}function Bue(e,t,n,i){const s=Array(e);let a,c,d,f;for(a=0;a<e;++a)s[a]=0;for(a=e-1;a>=0;--a)for(d=t[a],f=1,s[a]+=d,c=1;c<=a;++c)f*=(a+1-c)/c,s[a-c]+=d*Math.pow(n,c)*f;return s[0]+=i,s}function Iue(e){const t=e.length-1,n=[];let i,s,a,c,d;for(i=0;i<t;++i){for(c=i,s=i+1;s<t;++s)Math.abs(e[i][s])>Math.abs(e[i][c])&&(c=s);for(a=i;a<t+1;++a)d=e[a][i],e[a][i]=e[a][c],e[a][c]=d;for(s=i+1;s<t;++s)for(a=t;a>=i;a--)e[a][s]-=e[a][i]*e[i][s]/e[i][i]}for(s=t-1;s>=0;--s){for(d=0,a=s+1;a<t;++a)d+=e[a][s]*n[a];n[s]=(e[t][s]-d)/e[s][s]}return n}const l3=2,c3=1e-12;function Z7(e,t,n,i){const[s,a,c,d]=eE(e,t,n,!0),f=s.length,u=Math.max(2,~~(i*f)),r=new Float64Array(f),h=new Float64Array(f),p=new Float64Array(f).fill(1);for(let _=-1;++_<=l3;){const l=[0,u-1];for(let m=0;m<f;++m){const E=s[m],B=l[0],I=l[1],k=E-s[B]>s[I]-E?B:I;let F=0,x=0,M=0,R=0,P=0;const C=1/Math.abs(s[k]-E||1);for(let $=B;$<=I;++$){const W=s[$],H=a[$],G=Fue(Math.abs(E-W)*C)*p[$],z=W*G;F+=G,x+=z,M+=H*G,R+=H*z,P+=W*z}const[D,j]=dm(x/F,M/F,R/F,P/F);r[m]=D+j*E,h[m]=Math.abs(a[m]-r[m]),kue(s,m+1,l)}if(_===l3)break;const b=r5(h);if(Math.abs(b)<c3)break;for(let m=0,E,B;m<f;++m)E=h[m]/(6*b),p[m]=E>=1?c3:(B=1-E*E)*B}return xue(s,r,c,d)}function Fue(e){return(e=1-e*e*e)*e*e}function kue(e,t,n){const i=e[t];let s=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>s&&e[a]-i<=i-e[s];)n[0]=++s,n[1]=a,++a}function xue(e,t,n,i){const s=e.length,a=[];let c=0,d=0,f=[],u;for(;c<s;++c)u=e[c]+n,f[0]===u?f[1]+=(t[c]-f[1])/++d:(d=0,f[1]+=i,f=[u,t[c]],a.push(f));return f[1]+=i,a}const Mue=.5*Math.PI/180;function tE(e,t,n,i){n=n||25,i=Math.max(n,i||200);const s=b=>[b,e(b)],a=t[0],c=t[1],d=c-a,f=d/i,u=[s(a)],r=[];if(n===i){for(let b=1;b<i;++b)u.push(s(a+b/n*d));return u.push(s(c)),u}else{r.push(s(c));for(let b=n;--b>0;)r.push(s(a+b/n*d))}let h=u[0],p=r[r.length-1];const _=1/d,l=Aue(h[1],r);for(;p;){const b=s((h[0]+p[0])/2);b[0]-h[0]>=f&&Oue(h,b,p,_,l)>Mue?r.push(b):(h=p,u.push(p),r.pop()),p=r[r.length-1]}return u}function Aue(e,t){let n=e,i=e;const s=t.length;for(let a=0;a<s;++a){const c=t[a][1];c<n&&(n=c),c>i&&(i=c)}return 1/(i-n)}function Oue(e,t,n,i,s){const a=Math.atan2(s*(n[1]-e[1]),i*(n[0]-e[0])),c=Math.atan2(s*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-c)}function Nb(e){return e.length}function Mu(e){const t=new Map(e.map((n,i)=>[n,i]));return n=>t.get(n)}function tg({start:e,step:t,stop:n}){return(n-e)/t}function Nue(e,t,n=!1){return n?e9(e,t):fM({maxbins:e,extent:t})}function e9(e,t){const n=(t[1]-t[0])/e,i=t[0],s=t[t.length-1];return console.log(n,i,s),{start:i,stop:s,step:n}}function Rue(e,t,n=!1){if(console.log("hit"),n)return e9(e,t);const s=w7().domain(t).ticks(e),a=s[0].getTime(),c=s[s.length-1].getTime(),d=(c-a)/s.length;return{start:a,stop:c,step:d}}function Cue(e,t,n=!1){return(e.time?Rue:Nue)(e.bins,t,n)}function Lue(e){let t=[],n=e.start,i=n+e.step;for(;i<=e.stop;)t.push({binStart:n,binEnd:i}),n=i,i+=e.step;return t}function Pue(e,t){const n=Due(e,t);return i=>[n(i[0]),n(i[1])]}function Due(e,t,n=Math.floor){const i=[1,t],s=e,a=Gx().domain(s).range(i);return a.clamp(!0),c=>{const d=a(c);return n(d)}}function d3(e,...t){return new Map(Array.from(e.entries()).filter(([n,i])=>!t.includes(n)))}function Uue(e,{start:t,step:n,stop:i},s=c=>`${c}`,a=!0){const c=tg({start:t,step:n,stop:i}),d=`FLOOR((${e} - ${s(t)}) / ${s(n)})`,f=s(c-1);return a?`cast(${`CASE WHEN ${d} >= ${f} THEN ${f} ELSE ${d} END`} as int)`:`cast(${`LEAST(${f}, ${d})`} as int)`}function jue({start:e,stop:t},n){return(t-e)/n}function $ue(e){return e.replace(/\s+/g," ").trim()}class zue{constructor(){this.views=[]}remove(t){const n=this.views.findIndex(i=>i==t);n!==-1&&this.views.splice(n,1)}add(t){this.views.findIndex(i=>i==t)===-1&&this.views.push(t)}get passive(){return this.views.filter(t=>!t.isActive)}get active(){const t=this.views.find(n=>n.isActive);if(t)return t}get size(){return this.views.length}forEach(t){this.views.forEach(t)}[Symbol.iterator](){return this.views[Symbol.iterator]()}}class t9{constructor(t){this.isActive=!1,this.linkTogetherWithOtherViews(t),this.onChangeListeners=new Set}linkTogetherWithOtherViews(t){this.falcon=t}onChange(t){return this.onChangeListeners.add(t),()=>this.onChangeListeners.delete(t)}addOnChangeListener(t){return this.onChange(t)}signalOnChange(t){this.onChangeListeners.forEach(n=>{n(t)})}markThisViewActive(){this.falcon.views.forEach(t=>{t.isActive=!1}),this.isActive=!0}}class Vl extends t9{constructor(t){super(t),this.state={total:null,filter:null}}async all(){const t=await this.falcon.db.length(this.falcon.filters.size>0?this.falcon.filters:void 0);return this.state.total=t,this.state.filter=t,this.signalOnChange(this.state),this}async countFromActiveContinuous1D(t){const n=await this.falcon.index.get(this);if(n===void 0)throw Error("Cannot count for undefined index in 0D");if(!t)this.state.filter=n.noFilter.get(0);else{const i=n.filter.get(t[0]),s=n.filter.get(t[1]);this.state.filter=s-i}this.signalOnChange(this.state)}async countFromActiveCategorical1D(t,n){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Cannot count for undefined index in 0D");if(t===void 0)this.state.filter=i.noFilter.get(0);else{const s=Mu(n);let a=0;for(const c of t){const d=s(c);d!==void 0&&(a+=i.filter.get(d))}this.state.filter=a}this.signalOnChange(this.state)}async attach(){this.falcon.views.add(this),await this.falcon.link()}async detach(){this.falcon.views.remove(this),this.falcon.index.delete(this)}}class Ca extends t9{constructor(t,n){super(t),this.dimension=n,this.state={total:null,filter:null,bin:null},this.toPixels=()=>[0,0]}async update(t){this.dimension=t,await this.falcon.link()}async createBins(){var t;if(((t=this.dimension)==null?void 0:t.range)===void 0&&(this.dimension.range=await this.falcon.db.range(this.dimension)),this.dimension.type==="continuous"){const n=this.dimension.binConfig!==void 0;if(n)this.dimension.range=[this.dimension.binConfig.start,this.dimension.binConfig.stop];else if(!n)this.dimension.bins=this.dimension.bins??await this.falcon.db.estimateNumBins(this.dimension,200,15),this.dimension.binConfig=Cue(this.dimension,this.dimension.range,this.dimension.exact??!1);else throw Error("Invalid bin config or bins not specified");const{start:i,stop:s}=this.dimension.binConfig;this.toPixels=Pue([i,s],this.dimension.resolution)}this.dimension.type==="continuous"?this.state.bin=Lue(this.dimension.binConfig):this.state.bin=this.dimension.range}async all(){await this.createBins();const t=await this.falcon.db.histogramView1D(this,this.falcon.filters.size>0?this.falcon.otherFilters(this):void 0);return this.state.total=t.noFilter.data,this.state.filter=t.filter.data,this.signalOnChange(this.state),this}async computeIndex(t=!1){(!this.isActive||t)&&(await this.falcon.views.forEach(async n=>{n instanceof Ca&&(!("range"in n.dimension)||n.dimension.type==="continuous"&&!("binConfig"in n.dimension))&&await n.all()}),this.markThisViewActive(),this.falcon.index=this.falcon.db.falconIndexView1D(this,this.falcon.views.passive,this.falcon.passiveFilters))}async activate(){await this.computeIndex()}async select(t,n=!1){if(t)if(this.dimension.type==="continuous"){if(this.lastFilter&&this.lastFilter[0]===t[0]&&this.lastFilter[1]===t[1]&&n===!1)return;this.falcon.filters.set(this.dimension,t);let s=this.toPixels(t);this.isActive&&this.falcon.views.passive.forEach(async a=>{await a.countFromActiveContinuous1D(s)}),this.lastFilter=t}else this.falcon.filters.set(this.dimension,t),this.isActive&&this.falcon.views.passive.forEach(async i=>{await i.countFromActiveCategorical1D(t,this.dimension.range)}),this.lastFilter=t;else if(this.isActive)if(this.dimension.type==="continuous"){if(this.lastFilter===t)return;this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async s=>{await s.countFromActiveContinuous1D()}),this.lastFilter=t}else this.falcon.filters.delete(this.dimension),this.falcon.views.passive.forEach(async i=>{await i.countFromActiveCategorical1D()}),this.lastFilter=t}async countFromActiveContinuous1D(t){const n=await this.falcon.index.get(this);if(n===void 0)throw Error("Index not defined for 1D passive view");if(!t)this.state.filter=n.noFilter.data;else{const i=n.filter.slice(t[0],null),a=n.filter.slice(t[1],null).sub(i);this.state.filter=a.data}this.signalOnChange(this.state)}async countFromActiveCategorical1D(t,n){const i=await this.falcon.index.get(this);if(i===void 0)throw Error("Index not defined for 1D passive view");if(!t)this.state.filter=i.noFilter.data;else{let s;this.dimension.type==="continuous"?s=Wn.allocCounts(tg(this.dimension.binConfig)):s=Wn.allocCounts(this.dimension.range.length),s.data.fill(0);const a=Mu(n);for(const c of t){const d=a(c);if(d!==void 0){const f=i.filter.slice(d,null);s.addToItself(f)}}this.state.filter=s.data}this.signalOnChange(this.state)}async attach(){this.falcon.views.add(this),await this.falcon.link()}async detach(){this.falcon.views.remove(this),this.falcon.index.delete(this),this.isActive&&await this.falcon.link()}}class que{constructor(t,n){this.table=t,this.nameMap=n}castBins(t){return`${t}`}castTime(t){return`epoch(${t})*1000`}getName(t){var i;let n=((i=this.nameMap)==null?void 0:i.get(t.name))??t.name;return t.type==="continuous"&&t.time&&(n=this.castTime(n)),n}async dimensionExists(t){const n=await this.query(`SELECT EXISTS 
      (SELECT 0 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '${this.table}' AND COLUMN_NAME = '${t.name}') as _exists`),{_exists:i}=this.getASValues(n);return i}async tableExists(){const t=await this.query(`SELECT EXISTS 
      (SELECT 0 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '${this.table}') as _exists`),{_exists:n}=this.getASValues(t);return n}async entries(t=0,n=1/0,i){var d;const s=i?[...this.filtersToSQLWhereClauses(i).values()].join(" AND "):void 0,a=((d=this.nameMap)==null?void 0:d.values())??[];return await this.query(`SELECT *, ${Array.from(a)}
              FROM ${this.table}
              ${s?`WHERE ${s}`:""}
              ${n>=0&&n<1/0?`LIMIT ${n}`:""}
              OFFSET ${t}`)}async estimateNumBins(t,n=200,i=15){if(await this.length()<=1)return 1;if(t.range){const a=await this.query(`SELECT STDDEV(${this.getName(t)}) AS standardDeviation FROM ${this.table}`),{standardDeviation:c}=this.getASValues(a),[d,f]=t.range,u=lne(d,f,c);return Math.min(u,n)}return i}async length(t){let n="";t&&(n=[...this.filtersToSQLWhereClauses(t).values()].join(" AND "));const i=await this.query(`SELECT count(*) AS _count
       FROM ${this.table}
       ${n?`WHERE ${n}`:""}`),{_count:s}=this.getASValues(i);return s}async range(t){const n=this.getName(t);if(t.type==="continuous"){const i=await this.query(`SELECT  MIN(${n}) AS _min, MAX(${n}) AS _max
        FROM ${this.table}`),{_min:s,_max:a}=this.getASValues(i);return[Number(s),Number(a)]}else{const i=await this.query(`SELECT DISTINCT "${n}" AS _unique FROM ${this.table}`);let s=[];for(const{_unique:a}of i)s.push(a);return s.filter(a=>a!==null)}}async histogramView1D(t,n){let i,s,a;t.dimension.type==="continuous"?(i=tg(t.dimension.binConfig),s=this.binSQL(t.dimension,t.dimension.binConfig),a=r=>r):(i=Nb(t.dimension.range),s=this.binSQLCategorical(t.dimension,t.dimension.range),a=Mu(t.dimension.range));const c=Wn.allocCounts(i),d=n&&n.size>0,f=d?Wn.allocCounts(i):c,u=await this.query(`SELECT ${s.select}
       AS binIndex, count(*) AS binCount
       FROM ${this.table} 
       WHERE ${s.where} 
       GROUP BY binIndex`);for(const{binIndex:r,binCount:h}of u)c.set(a(r),h);if(d){const r=[...this.filtersToSQLWhereClauses(n).values()].join(" AND "),h=`SELECT ${s.select}
         AS binIndex, count(*) AS binCount
         FROM ${this.table}
         WHERE ${s.where} AND ${r} 
         GROUP BY binIndex`,p=await this.query(h);for(const{binIndex:_,binCount:l}of p)f.set(_,l)}return{filter:f,noFilter:c}}falconIndexView1D(t,n,i){const s=performance.now(),a=this.filtersToSQLWhereClauses(i),c=new Map;if(t.dimension.type==="continuous"){const d=t.dimension.resolution,f=this.binSQLPixel(t.dimension,t.dimension.binConfig,d),u=d+1,r=[];n.forEach(h=>{const p=this.cubeSlice1DContinuous(h,a,f,u);r.push(p),c.set(h,p)}),Promise.all(r).then(()=>{console.info(`Build index: ${performance.now()-s}ms`)})}else{const d=this.binSQLCategorical(t.dimension,t.dimension.range),f=Nb(t.dimension.range),u=Mu(t.dimension.range),r=[];n.forEach(h=>{const p=this.cubeSlice1DCategorical(h,a,d,u,f);r.push(p),c.set(h,p)}),Promise.all(r).then(()=>{console.info(`Build index: ${performance.now()-s}ms`)})}return c}async cubeSlice1DCategorical(t,n,i,s,a){let c,d;const f=new Map(n);t instanceof Vl||t instanceof Ca&&f.delete(t.dimension);const u=[...f.values()].join(" AND ");let r="",h=l=>l;const p=`CASE WHEN ${i.where} 
     THEN ${i.select}
     ELSE -1 END AS "keyActive",
     count(*) AS cnt`;if(t instanceof Vl)d=Wn.allocCounts(a),c=Wn.allocCounts(1,[1]),r=`SELECT ${p}
         FROM ${this.table} 
         ${u?`WHERE ${u}`:""} 
         GROUP BY "keyActive"`;else if(t instanceof Ca){let l,b;if(t.dimension.type==="continuous"){const m=t.dimension.binConfig;b=tg(m),l=this.binSQL(t.dimension,t.dimension.binConfig)}else h=Mu(t.dimension.range),b=Nb(t.dimension.range),l=this.binSQLCategorical(t.dimension,t.dimension.range);d=Wn.allocCounts(a*b,[a,b]),c=Wn.allocCounts(b,[b]),r=`SELECT ${p}, 
       ${l.select} AS key 
       FROM ${this.table} 
       WHERE ${l.where} ${u?`AND ${u}`:""} 
       GROUP BY "keyActive", key`}else throw Error("no 2d view here");const _=await this.query(r);if(t instanceof Vl)for(const{keyActive:l,cnt:b}of _){const m=s(l);m>=0&&d.set(m,b),c.increment([0],b)}else if(t instanceof Ca)for(const{keyActive:l,key:b,cnt:m}of _){const E=s(l),B=h(b);E>=0&&d.set(E,B,m),c.increment([B],m)}else throw Error();return{noFilter:c,filter:d}}async cubeSlice1DContinuous(t,n,i,s){let a,c;const d=new Map(n);t instanceof Vl||t instanceof Ca&&d.delete(t.dimension);const f=[...d.values()].join(" AND ");let u,r=_=>_;const h=`CASE
     WHEN ${i.where} 
     THEN ${i.select}
     ELSE -1 END AS "keyActive",
     count(*) AS cnt`;if(t instanceof Vl)c=Wn.allocCumulative(s),a=Wn.allocCounts(1,[1]),u=`SELECT ${h}
         FROM ${this.table} 
         ${f?`WHERE ${f}`:""} 
         GROUP BY "keyActive"`;else if(t instanceof Ca){let _,l;if(t.dimension.type==="continuous"){const b=t.dimension.binConfig;_=this.binSQL(t.dimension,b),l=tg(b)}else _=this.binSQLCategorical(t.dimension,t.dimension.range),l=Nb(t.dimension.range),r=Mu(t.dimension.range);c=Wn.allocCumulative(s*l,[s,l]),a=Wn.allocCounts(l,[l]),u=`SELECT ${h}, 
       ${_.select} AS key 
       FROM ${this.table} 
       WHERE ${_.where} ${f?`AND ${f}`:""} 
       GROUP BY "keyActive", key`}else throw Error("only 0D and 1D views");const p=await this.query(u);if(t instanceof Vl){for(const{keyActive:_,cnt:l}of p)_>=0&&c.set(_+1,l),a.increment([0],l);c.cumulativeSum()}else if(t instanceof Ca){for(const{keyActive:_,key:l,cnt:b}of p){const m=r(l);_>=0&&c.set(_+1,m,b),a.increment([m],b)}for(let _=0;_<c.shape[1];_++)c.slice(null,_).cumulativeSum()}else throw Error("only 0D and 1D views");return{filter:c,noFilter:a}}getASValues(t){return t[Symbol.iterator]().next().value}binSQLCategorical(t,n){const i=this.getName(t),s=`"${i}"`,a=f3(i,n);return{select:s,where:a}}binSQL(t,n){const i=this.getName(t),s=Uue(i,n,this.castBins),a=`${i} BETWEEN ${n.start} AND ${n.stop}`;return{select:s,where:a}}filtersToSQLWhereClauses(t){const n=new Map;for(const[i,s]of t){const a=this.getName(i);let c;i.type==="continuous"?c=`${a} BETWEEN ${s[0]} AND ${s[1]}`:c=f3(a,s),n.set(i,c)}return n}binSQLPixel(t,n,i){const s=i!==void 0?jue(n,i):n.step,a=n.start;return this.binSQL(t,{...n,start:a,step:s})}}function f3(e,t){let n=`"${e}" in (`;return t.forEach(s=>{s!==null&&(n+=`'${s}', `)}),n+=")",t.findIndex(s=>s===null)!==-1&&(n+=` OR "${e}" IS NULL`),n}const Vue=new TextDecoder("utf-8"),uk=e=>Vue.decode(e),Gue=new TextEncoder,IM=e=>Gue.encode(e),Hue=e=>typeof e=="number",n9=e=>typeof e=="boolean",Yn=e=>typeof e=="function",Es=e=>e!=null&&Object(e)===e,lf=e=>Es(e)&&Yn(e.then),um=e=>Es(e)&&Yn(e[Symbol.iterator]),s_=e=>Es(e)&&Yn(e[Symbol.asyncIterator]),hk=e=>Es(e)&&Es(e.schema),i9=e=>Es(e)&&"done"in e&&"value"in e,s9=e=>Es(e)&&Yn(e.stat)&&Hue(e.fd),r9=e=>Es(e)&&FM(e.body),nE=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Wue=e=>Es(e)&&Yn(e.abort)&&Yn(e.getWriter)&&!nE(e),FM=e=>Es(e)&&Yn(e.cancel)&&Yn(e.getReader)&&!nE(e),Yue=e=>Es(e)&&Yn(e.end)&&Yn(e.write)&&n9(e.writable)&&!nE(e),a9=e=>Es(e)&&Yn(e.read)&&Yn(e.pipe)&&n9(e.readable)&&!nE(e),Xue=e=>Es(e)&&Yn(e.clear)&&Yn(e.bytes)&&Yn(e.position)&&Yn(e.setPosition)&&Yn(e.capacity)&&Yn(e.getBufferIdentifier)&&Yn(e.createLong),kM=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Kue(e){const t=e[0]?[e[0]]:[];let n,i,s,a;for(let c,d,f=0,u=0,r=e.length;++f<r;){if(c=t[u],d=e[f],!c||!d||c.buffer!==d.buffer||d.byteOffset<c.byteOffset){d&&(t[++u]=d);continue}if({byteOffset:n,byteLength:s}=c,{byteOffset:i,byteLength:a}=d,n+s<i||i+a<n){d&&(t[++u]=d);continue}t[u]=new Uint8Array(c.buffer,n,i-n+a)}return t}function u3(e,t,n=0,i=t.byteLength){const s=e.byteLength,a=new Uint8Array(e.buffer,e.byteOffset,s),c=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,s));return a.set(c,n),e}function io(e,t){const n=Kue(e),i=n.reduce((r,h)=>r+h.byteLength,0);let s,a,c,d=0,f=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,i);for(const r=n.length;++f<r;){if(s=n[f],a=s.subarray(0,Math.min(s.length,u-d)),u<=d+a.length){a.length<s.length?n[f]=s.subarray(a.length):a.length===s.length&&f++,c?u3(c,a,d):c=a;break}u3(c||(c=new Uint8Array(u)),a,d),d+=a.length}return[c||new Uint8Array(0),n.slice(f),i-(c?c.byteLength:0)]}function nn(e,t){let n=i9(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=IM(n)),n instanceof ArrayBuffer?new e(n):n instanceof kM?new e(n):Xue(n)?nn(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const D_=e=>nn(Int32Array,e),h3=e=>nn(BigInt64Array,e),Ct=e=>nn(Uint8Array,e),_k=e=>(e.next(),e);function*Jue(e,t){const n=function*(s){yield s},i=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof kM?n(t):um(t)?t:n(t);return yield*_k(function*(s){let a=null;do a=s.next(yield nn(e,a));while(!a.done)}(i[Symbol.iterator]())),new e}const Que=e=>Jue(Uint8Array,e);function o9(e,t){return hr(this,arguments,function*(){if(lf(t))return yield Et(yield Et(yield*ju(al(o9(e,yield Et(t))))));const i=function(c){return hr(this,arguments,function*(){yield yield Et(yield Et(c))})},s=function(c){return hr(this,arguments,function*(){yield Et(yield*ju(al(_k(function*(d){let f=null;do f=d.next(yield f==null?void 0:f.value);while(!f.done)}(c[Symbol.iterator]())))))})},a=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof kM?i(t):um(t)?s(t):s_(t)?t:i(t);return yield Et(yield*ju(al(_k(function(c){return hr(this,arguments,function*(){let d=null;do d=yield Et(c.next(yield yield Et(nn(e,d))));while(!d.done)})}(a[Symbol.asyncIterator]()))))),yield Et(new e)})}const Zue=e=>o9(Uint8Array,e);function l9(e,t,n){if(e!==0){n=n.slice(0,t);for(let i=-1,s=n.length;++i<s;)n[i]+=e}return n.subarray(0,t)}function ehe(e,t){let n=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do if(e[n]!==t[n])return!1;while(++n<i);return!0}const lr={fromIterable(e){return Rb(the(e))},fromAsyncIterable(e){return Rb(nhe(e))},fromDOMStream(e){return Rb(ihe(e))},fromNodeStream(e){return Rb(rhe(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},Rb=e=>(e.next(),e);function*the(e){let t,n=!1,i=[],s,a,c,d=0;function f(){return a==="peek"?io(i,c)[0]:([s,i,d]=io(i,c),s)}({cmd:a,size:c}=(yield null)||{cmd:"read",size:0});const u=Que(e)[Symbol.iterator]();try{do if({done:t,value:s}=Number.isNaN(c-d)?u.next():u.next(c-d),!t&&s.byteLength>0&&(i.push(s),d+=s.byteLength),t||c<=d)do({cmd:a,size:c}=yield f());while(c<d);while(!t)}catch(r){(n=!0)&&typeof u.throw=="function"&&u.throw(r)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function nhe(e){return hr(this,arguments,function*(){let n,i=!1,s=[],a,c,d,f=0;function u(){return c==="peek"?io(s,d)[0]:([a,s,f]=io(s,d),a)}({cmd:c,size:d}=(yield yield Et(null))||{cmd:"read",size:0});const r=Zue(e)[Symbol.asyncIterator]();try{do if({done:n,value:a}=Number.isNaN(d-f)?yield Et(r.next()):yield Et(r.next(d-f)),!n&&a.byteLength>0&&(s.push(a),f+=a.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Et(u()));while(d<f);while(!n)}catch(h){(i=!0)&&typeof r.throw=="function"&&(yield Et(r.throw(h)))}finally{i===!1&&typeof r.return=="function"&&(yield Et(r.return(new Uint8Array(0))))}return yield Et(null)})}function ihe(e){return hr(this,arguments,function*(){let n=!1,i=!1,s=[],a,c,d,f=0;function u(){return c==="peek"?io(s,d)[0]:([a,s,f]=io(s,d),a)}({cmd:c,size:d}=(yield yield Et(null))||{cmd:"read",size:0});const r=new she(e);try{do if({done:n,value:a}=Number.isNaN(d-f)?yield Et(r.read()):yield Et(r.read(d-f)),!n&&a.byteLength>0&&(s.push(Ct(a)),f+=a.byteLength),n||d<=f)do({cmd:c,size:d}=yield yield Et(u()));while(d<f);while(!n)}catch(h){(i=!0)&&(yield Et(r.cancel(h)))}finally{i===!1?yield Et(r.cancel()):e.locked&&r.releaseLock()}return yield Et(null)})}class she{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return wt(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(t).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(t){return wt(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Ct(n)),n})}}const AB=(e,t)=>{const n=s=>i([t,s]);let i;return[t,n,new Promise(s=>(i=s)&&e.once(t,n))]};function rhe(e){return hr(this,arguments,function*(){const n=[];let i="error",s=!1,a=null,c,d,f=0,u=[],r;function h(){return c==="peek"?io(u,d)[0]:([r,u,f]=io(u,d),r)}if({cmd:c,size:d}=(yield yield Et(null))||{cmd:"read",size:0},e.isTTY)return yield yield Et(new Uint8Array(0)),yield Et(null);try{n[0]=AB(e,"end"),n[1]=AB(e,"error");do{if(n[2]=AB(e,"readable"),[i,a]=yield Et(Promise.race(n.map(_=>_[2]))),i==="error")break;if((s=i==="end")||(Number.isFinite(d-f)?(r=Ct(e.read(d-f)),r.byteLength<d-f&&(r=Ct(e.read()))):r=Ct(e.read()),r.byteLength>0&&(u.push(r),f+=r.byteLength)),s||d<=f)do({cmd:c,size:d}=yield yield Et(h()));while(d<f)}while(!s)}finally{yield Et(p(n,i==="error"?a:null))}return yield Et(null);function p(_,l){return r=u=null,new Promise((b,m)=>{for(const[E,B]of _)e.off(E,B);try{const E=e.destroy;E&&E.call(e,l),l=void 0}catch(E){l=E||l}finally{l!=null?m(l):b()}})}})}var jn;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(jn||(jn={}));var Pi;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Pi||(Pi={}));var Oi;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Oi||(Oi={}));var Er;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Er||(Er={}));var _t;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(_t||(_t={}));var so;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(so||(so={}));const OB=2,ja=4,Ko=4,Zt=4,Gl=new Int32Array(2),_3=new Float32Array(Gl.buffer),p3=new Float64Array(Gl.buffer),Cb=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var pk;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(pk||(pk={}));let hh=class c9{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new c9(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Gl[0]=this.readInt32(t),_3[0]}readFloat64(t){return Gl[Cb?0:1]=this.readInt32(t),Gl[Cb?1:0]=this.readInt32(t+4),p3[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){_3[0]=n,this.writeInt32(t,Gl[0])}writeFloat64(t,n){p3[0]=n,this.writeInt32(t,Gl[Cb?0:1]),this.writeInt32(t+4,Gl[Cb?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ja+Ko)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Ko;n++)t+=String.fromCharCode(this.readInt8(this.position_+ja+n));return t}__offset(t,n){const i=t-this.readInt32(t);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const i=this.readInt32(t);t+=ja;const s=this.bytes_.subarray(t,t+i);return n===pk.UTF8_BYTES?s:this.text_decoder_.decode(s)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ja}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Ko)throw new Error("FlatBuffers: file identifier must be length "+Ko);for(let n=0;n<Ko;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ja+n))return!1;return!0}createScalarList(t,n){const i=[];for(let s=0;s<n;++s){const a=t(s);a!==null&&i.push(a)}return i}createObjList(t,n){const i=[];for(let s=0;s<n;++s){const a=t(s);a!==null&&i.push(a.unpack())}return i}},d9=class f9{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=hh.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const i=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<i+t+n;){const s=this.bb.capacity();this.bb=f9.growByteBuffer(this.bb),this.space+=this.bb.capacity()-s}this.pad(i)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,i){(this.force_defaults||n!==i)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,i){n!=i&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,s=hh.allocate(i);return s.setPosition(i-n),s.bytes().set(t.bytes(),i-n),s}addOffset(t){this.prep(ja,0),this.writeInt32(this.offset()-t+ja)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const s=2;this.addInt16(t-this.object_start);const a=(i+s)*OB;this.addInt16(a);let c=0;const d=this.space;e:for(n=0;n<this.vtables.length;n++){const f=this.bb.capacity()-this.vtables[n];if(a==this.bb.readInt16(f)){for(let u=OB;u<a;u+=OB)if(this.bb.readInt16(d+u)!=this.bb.readInt16(f+u))continue e;c=this.vtables[n];break}}return c?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,c-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,i){const s=i?Zt:0;if(n){const a=n;if(this.prep(this.minalign,ja+Ko+s),a.length!=Ko)throw new TypeError("FlatBuffers: file identifier must be length "+Ko);for(let c=Ko-1;c>=0;c--)this.writeInt8(a.charCodeAt(c))}this.prep(this.minalign,ja+s),this.addOffset(t),s&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const i=this.bb.capacity()-t,s=i-this.bb.readInt32(i);if(!(n<this.bb.readInt16(s)&&this.bb.readInt16(s+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,i){this.notNested(),this.vector_num_elems=n,this.prep(ja,t*n),this.prep(i,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;return t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length),this.bb.bytes().set(n,this.space),this.endVector()}createByteVector(t){return t==null?0:(this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector())}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let i=0;i<t.length;++i){const s=t[i];if(s!==null)n.push(this.createObjectOffset(s));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var ev;(function(e){e[e.BUFFER=0]="BUFFER"})(ev||(ev={}));var tv;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(tv||(tv={}));class Hl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Hl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Zt),(n||new Hl).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):tv.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):ev.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,tv.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,ev.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,i){return Hl.startBodyCompression(t),Hl.addCodec(t,n),Hl.addMethod(t,i),Hl.endBodyCompression(t)}}let u9=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},h9=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,i){return t.prep(8,16),t.writeInt64(BigInt(i??0)),t.writeInt64(BigInt(n??0)),t.offset()}},$o=class yk{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new yk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Zt),(n||new yk).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new h9).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new u9).__init(this.bb.__vector(this.bb_pos+i)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Hl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},pu=class gk{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new gk).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Zt),(n||new gk).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new $o).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var _h;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(_h||(_h={}));var nv;(function(e){e[e.DenseArray=0]="DenseArray"})(nv||(nv={}));class Vs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Vs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Zt),(n||new Vs).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,i){return Vs.startInt(t),Vs.addBitWidth(t,n),Vs.addIsSigned(t,i),Vs.endInt(t)}}class Jo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Jo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Zt),(n||new Jo).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Vs).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):nv.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,nv.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Xn{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Xn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Zt),(n||new Xn).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,i){return Xn.startKeyValue(t),Xn.addKey(t,n),Xn.addValue(t,i),Xn.endKeyValue(t)}}let y3=class By{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new By).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Zt),(n||new By).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return By.startBinary(t),By.endBinary(t)}},g3=class Iy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Iy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Zt),(n||new Iy).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Iy.startBool(t),Iy.endBool(t)}},v0=class yu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new yu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Zt),(n||new yu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Er.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Er.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return yu.startDate(t),yu.addUnit(t,n),yu.endDate(t)}},gu=class Dl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Dl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Zt),(n||new Dl).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,i,s){return Dl.startDecimal(t),Dl.addPrecision(t,n),Dl.addScale(t,i),Dl.addBitWidth(t,s),Dl.endDecimal(t)}},E0=class mu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new mu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Zt),(n||new mu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_t.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,_t.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return mu.startDuration(t),mu.addUnit(t,n),mu.endDuration(t)}},S0=class wu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new wu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Zt),(n||new wu).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return wu.startFixedSizeBinary(t),wu.addByteWidth(t,n),wu.endFixedSizeBinary(t)}},B0=class bu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new bu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Zt),(n||new bu).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return bu.startFixedSizeList(t),bu.addListSize(t,n),bu.endFixedSizeList(t)}};class $a{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new $a).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Zt),(n||new $a).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Oi.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Oi.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return $a.startFloatingPoint(t),$a.addPrecision(t,n),$a.endFloatingPoint(t)}}class za{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new za).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Zt),(n||new za).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):so.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,so.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return za.startInterval(t),za.addUnit(t,n),za.endInterval(t)}}let m3=class Fy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new Fy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+Zt),(n||new Fy).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return Fy.startLargeBinary(t),Fy.endLargeBinary(t)}},w3=class ky{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new ky).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+Zt),(n||new ky).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return ky.startLargeUtf8(t),ky.endLargeUtf8(t)}},b3=class xy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new xy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Zt),(n||new xy).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return xy.startList(t),xy.endList(t)}},I0=class Tu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Tu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Zt),(n||new Tu).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Tu.startMap(t),Tu.addKeysSorted(t,n),Tu.endMap(t)}},T3=class My{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new My).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Zt),(n||new My).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return My.startNull(t),My.endNull(t)}};class qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Zt),(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return qd.startStruct_(t),qd.endStruct_(t)}}let Ay=class Md{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Zt),(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_t.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_t.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,i){return Md.startTime(t),Md.addUnit(t,n),Md.addBitWidth(t,i),Md.endTime(t)}};class dr{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new dr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Zt),(n||new dr).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_t.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_t.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,i){return dr.startTimestamp(t),dr.addUnit(t,n),dr.addTimezone(t,i),dr.endTimestamp(t)}}let Ad=class Od{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Od).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Zt),(n||new Od).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Pi.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,Pi.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addInt32(n[i]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,i){return Od.startUnion(t),Od.addMode(t,n),Od.addTypeIds(t,i),Od.endUnion(t)}},v3=class Oy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Oy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Zt),(n||new Oy).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Oy.startUtf8(t),Oy.endUtf8(t)}};var hn;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(hn||(hn={}));let ar=class F0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new F0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Zt),(n||new F0).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):hn.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Jo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new F0).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new Xn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,hn.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Ma=class jo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new jo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Zt),(n||new jo).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_h.Little}fields(t,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new ar).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Xn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,_h.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)t.addInt64(n[i]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,i,s,a){return jo.startSchema(t),jo.addEndianness(t,n),jo.addFields(t,i),jo.addCustomMetadata(t,s),jo.addFeatures(t,a),jo.endSchema(t)}};var Vt;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Vt||(Vt={}));var ne;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(ne||(ne={}));var zo;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(zo||(zo={}));const ahe=void 0;function Eg(e){if(e===null)return"null";if(e===ahe)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Eg(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}function fn(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}function _9(e,t){return fn(e/t)+fn(e%t)/fn(t)}const ohe=Symbol.for("isArrowBigNum");function _a(e,...t){return t.length===0?Object.setPrototypeOf(nn(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}_a.prototype[ohe]=!0;_a.prototype.toJSON=function(){return`"${Bg(this)}"`};_a.prototype.valueOf=function(e){return p9(this,e)};_a.prototype.toString=function(){return Bg(this)};_a.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return p9(this);case"string":return Bg(this);case"default":return dhe(this)}return Bg(this)};function Vu(...e){return _a.apply(this,e)}function Gu(...e){return _a.apply(this,e)}function Sg(...e){return _a.apply(this,e)}Object.setPrototypeOf(Vu.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Gu.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Sg.prototype,Object.create(Uint32Array.prototype));Object.assign(Vu.prototype,_a.prototype,{constructor:Vu,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Gu.prototype,_a.prototype,{constructor:Gu,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Sg.prototype,_a.prototype,{constructor:Sg,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const lhe=BigInt(4294967296)*BigInt(4294967296),che=lhe-BigInt(1);function p9(e,t){const{buffer:n,byteOffset:i,byteLength:s,signed:a}=e,c=new BigUint64Array(n,i,s/8),d=a&&c.at(-1)&BigInt(1)<<BigInt(63);let f=BigInt(0),u=0;if(d){for(const r of c)f|=(r^che)*(BigInt(1)<<BigInt(64*u++));f*=BigInt(-1),f-=BigInt(1)}else for(const r of c)f|=r*(BigInt(1)<<BigInt(64*u++));if(typeof t=="number"){const r=BigInt(Math.pow(10,t)),h=f/r,p=f%r;return fn(h)+fn(p)/fn(r)}return fn(f)}function Bg(e){if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return NB(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return NB(e);t=t.slice();let i=1;for(let a=0;a<t.length;a++){const c=t[a],d=~c+i;t[a]=d,i&=c===0?1:0}return`-${NB(t)}`}function dhe(e){return e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Bg(e)}function NB(e){let t="";const n=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const s=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let a=-1;const c=i.length-1;do{for(n[0]=i[a=0];a<c;)i[a++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[a];i[a]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(s[0]||s[1]||s[2]||s[3]);return t??"0"}class xM{static new(t,n){switch(n){case!0:return new Vu(t);case!1:return new Gu(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Vu(t)}return t.byteLength===16?new Sg(t):new Gu(t)}static signed(t){return new Vu(t)}static unsigned(t){return new Gu(t)}static decimal(t){return new Sg(t)}constructor(t,n){return xM.new(t,n)}}var y9,g9,m9,w9,b9,T9,v9,E9,S9,B9,I9,F9,k9,x9,M9,A9,O9,N9,R9,C9,L9,P9;class Xe{static isNull(t){return(t==null?void 0:t.typeId)===ne.Null}static isInt(t){return(t==null?void 0:t.typeId)===ne.Int}static isFloat(t){return(t==null?void 0:t.typeId)===ne.Float}static isBinary(t){return(t==null?void 0:t.typeId)===ne.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===ne.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===ne.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===ne.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===ne.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===ne.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===ne.Date}static isTime(t){return(t==null?void 0:t.typeId)===ne.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===ne.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===ne.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===ne.Duration}static isList(t){return(t==null?void 0:t.typeId)===ne.List}static isStruct(t){return(t==null?void 0:t.typeId)===ne.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===ne.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===ne.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===ne.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===ne.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===ne.Dictionary}static isDenseUnion(t){return Xe.isUnion(t)&&t.mode===Pi.Dense}static isSparseUnion(t){return Xe.isUnion(t)&&t.mode===Pi.Sparse}constructor(t){this.typeId=t}}y9=Symbol.toStringTag;Xe[y9]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(Xe.prototype);class bc extends Xe{constructor(){super(ne.Null)}toString(){return"Null"}}g9=Symbol.toStringTag;bc[g9]=(e=>e[Symbol.toStringTag]="Null")(bc.prototype);class cf extends Xe{constructor(t,n){super(ne.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}m9=Symbol.toStringTag;cf[m9]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(cf.prototype);class Ig extends cf{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Ig.prototype,"ArrayType",{value:Int32Array});class iv extends Xe{constructor(t){super(ne.Float),this.precision=t}get ArrayType(){switch(this.precision){case Oi.HALF:return Uint16Array;case Oi.SINGLE:return Float32Array;case Oi.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}w9=Symbol.toStringTag;iv[w9]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(iv.prototype);class sv extends Xe{constructor(){super(ne.Binary)}toString(){return"Binary"}}b9=Symbol.toStringTag;sv[b9]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(sv.prototype);class rv extends Xe{constructor(){super(ne.LargeBinary)}toString(){return"LargeBinary"}}T9=Symbol.toStringTag;rv[T9]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(rv.prototype);class av extends Xe{constructor(){super(ne.Utf8)}toString(){return"Utf8"}}v9=Symbol.toStringTag;av[v9]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(av.prototype);class ov extends Xe{constructor(){super(ne.LargeUtf8)}toString(){return"LargeUtf8"}}E9=Symbol.toStringTag;ov[E9]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(ov.prototype);class lv extends Xe{constructor(){super(ne.Bool)}toString(){return"Bool"}}S9=Symbol.toStringTag;lv[S9]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(lv.prototype);class cv extends Xe{constructor(t,n,i=128){super(ne.Decimal),this.scale=t,this.precision=n,this.bitWidth=i}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}B9=Symbol.toStringTag;cv[B9]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(cv.prototype);class dv extends Xe{constructor(t){super(ne.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Er[this.unit]}>`}get ArrayType(){return this.unit===Er.DAY?Int32Array:BigInt64Array}}I9=Symbol.toStringTag;dv[I9]=(e=>(e.unit=null,e[Symbol.toStringTag]="Date"))(dv.prototype);class fv extends Xe{constructor(t,n){super(ne.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${_t[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}F9=Symbol.toStringTag;fv[F9]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(fv.prototype);class uv extends Xe{constructor(t,n){super(ne.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${_t[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}k9=Symbol.toStringTag;uv[k9]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Timestamp"))(uv.prototype);class hv extends Xe{constructor(t){super(ne.Interval),this.unit=t}toString(){return`Interval<${so[this.unit]}>`}}x9=Symbol.toStringTag;hv[x9]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(hv.prototype);class _v extends Xe{constructor(t){super(ne.Duration),this.unit=t}toString(){return`Duration<${_t[this.unit]}>`}}M9=Symbol.toStringTag;_v[M9]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(_v.prototype);class pv extends Xe{constructor(t){super(ne.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}A9=Symbol.toStringTag;pv[A9]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(pv.prototype);class Ji extends Xe{constructor(t){super(ne.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}O9=Symbol.toStringTag;Ji[O9]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Ji.prototype);class yv extends Xe{constructor(t,n,i){super(ne.Union),this.mode=t,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((s,a,c)=>(s[a]=c)&&s||s,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}N9=Symbol.toStringTag;yv[N9]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(yv.prototype);class gv extends Xe{constructor(t){super(ne.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}R9=Symbol.toStringTag;gv[R9]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(gv.prototype);class mv extends Xe{constructor(t,n){super(ne.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}C9=Symbol.toStringTag;mv[C9]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(mv.prototype);class wv extends Xe{constructor(t,n=!1){var i,s,a;if(super(ne.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((i=t==null?void 0:t.type)===null||i===void 0)&&i.children)){const c=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[0];c&&(c.name="key");const d=(a=t==null?void 0:t.type)===null||a===void 0?void 0:a.children[1];d&&(d.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}L9=Symbol.toStringTag;wv[L9]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(wv.prototype);const fhe=(e=>()=>++e)(-1);class ph extends Xe{constructor(t,n,i,s){super(ne.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=s||!1,this.id=i==null?fhe():fn(i)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}P9=Symbol.toStringTag;ph[P9]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(ph.prototype);function qo(e){const t=e;switch(e.typeId){case ne.Decimal:return e.bitWidth/32;case ne.Interval:return 1+t.unit;case ne.FixedSizeList:return t.listSize;case ne.FixedSizeBinary:return t.byteWidth;default:return 1}}class kt{visitMany(t,...n){return t.map((i,s)=>this.visit(i,...n.map(a=>a[s])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return uhe(this,t,n)}getVisitFnByTypeId(t,n=!0){return vu(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function uhe(e,t,n=!0){return typeof t=="number"?vu(e,t,n):typeof t=="string"&&t in ne?vu(e,ne[t],n):t&&t instanceof Xe?vu(e,E3(t),n):t!=null&&t.type&&t.type instanceof Xe?vu(e,E3(t.type),n):vu(e,ne.NONE,n)}function vu(e,t,n=!0){let i=null;switch(t){case ne.Null:i=e.visitNull;break;case ne.Bool:i=e.visitBool;break;case ne.Int:i=e.visitInt;break;case ne.Int8:i=e.visitInt8||e.visitInt;break;case ne.Int16:i=e.visitInt16||e.visitInt;break;case ne.Int32:i=e.visitInt32||e.visitInt;break;case ne.Int64:i=e.visitInt64||e.visitInt;break;case ne.Uint8:i=e.visitUint8||e.visitInt;break;case ne.Uint16:i=e.visitUint16||e.visitInt;break;case ne.Uint32:i=e.visitUint32||e.visitInt;break;case ne.Uint64:i=e.visitUint64||e.visitInt;break;case ne.Float:i=e.visitFloat;break;case ne.Float16:i=e.visitFloat16||e.visitFloat;break;case ne.Float32:i=e.visitFloat32||e.visitFloat;break;case ne.Float64:i=e.visitFloat64||e.visitFloat;break;case ne.Utf8:i=e.visitUtf8;break;case ne.LargeUtf8:i=e.visitLargeUtf8;break;case ne.Binary:i=e.visitBinary;break;case ne.LargeBinary:i=e.visitLargeBinary;break;case ne.FixedSizeBinary:i=e.visitFixedSizeBinary;break;case ne.Date:i=e.visitDate;break;case ne.DateDay:i=e.visitDateDay||e.visitDate;break;case ne.DateMillisecond:i=e.visitDateMillisecond||e.visitDate;break;case ne.Timestamp:i=e.visitTimestamp;break;case ne.TimestampSecond:i=e.visitTimestampSecond||e.visitTimestamp;break;case ne.TimestampMillisecond:i=e.visitTimestampMillisecond||e.visitTimestamp;break;case ne.TimestampMicrosecond:i=e.visitTimestampMicrosecond||e.visitTimestamp;break;case ne.TimestampNanosecond:i=e.visitTimestampNanosecond||e.visitTimestamp;break;case ne.Time:i=e.visitTime;break;case ne.TimeSecond:i=e.visitTimeSecond||e.visitTime;break;case ne.TimeMillisecond:i=e.visitTimeMillisecond||e.visitTime;break;case ne.TimeMicrosecond:i=e.visitTimeMicrosecond||e.visitTime;break;case ne.TimeNanosecond:i=e.visitTimeNanosecond||e.visitTime;break;case ne.Decimal:i=e.visitDecimal;break;case ne.List:i=e.visitList;break;case ne.Struct:i=e.visitStruct;break;case ne.Union:i=e.visitUnion;break;case ne.DenseUnion:i=e.visitDenseUnion||e.visitUnion;break;case ne.SparseUnion:i=e.visitSparseUnion||e.visitUnion;break;case ne.Dictionary:i=e.visitDictionary;break;case ne.Interval:i=e.visitInterval;break;case ne.IntervalDayTime:i=e.visitIntervalDayTime||e.visitInterval;break;case ne.IntervalYearMonth:i=e.visitIntervalYearMonth||e.visitInterval;break;case ne.Duration:i=e.visitDuration;break;case ne.DurationSecond:i=e.visitDurationSecond||e.visitDuration;break;case ne.DurationMillisecond:i=e.visitDurationMillisecond||e.visitDuration;break;case ne.DurationMicrosecond:i=e.visitDurationMicrosecond||e.visitDuration;break;case ne.DurationNanosecond:i=e.visitDurationNanosecond||e.visitDuration;break;case ne.FixedSizeList:i=e.visitFixedSizeList;break;case ne.Map:i=e.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${ne[t]}'`)}function E3(e){switch(e.typeId){case ne.Null:return ne.Null;case ne.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?ne.Int8:ne.Uint8;case 16:return n?ne.Int16:ne.Uint16;case 32:return n?ne.Int32:ne.Uint32;case 64:return n?ne.Int64:ne.Uint64}return ne.Int}case ne.Float:switch(e.precision){case Oi.HALF:return ne.Float16;case Oi.SINGLE:return ne.Float32;case Oi.DOUBLE:return ne.Float64}return ne.Float;case ne.Binary:return ne.Binary;case ne.LargeBinary:return ne.LargeBinary;case ne.Utf8:return ne.Utf8;case ne.LargeUtf8:return ne.LargeUtf8;case ne.Bool:return ne.Bool;case ne.Decimal:return ne.Decimal;case ne.Time:switch(e.unit){case _t.SECOND:return ne.TimeSecond;case _t.MILLISECOND:return ne.TimeMillisecond;case _t.MICROSECOND:return ne.TimeMicrosecond;case _t.NANOSECOND:return ne.TimeNanosecond}return ne.Time;case ne.Timestamp:switch(e.unit){case _t.SECOND:return ne.TimestampSecond;case _t.MILLISECOND:return ne.TimestampMillisecond;case _t.MICROSECOND:return ne.TimestampMicrosecond;case _t.NANOSECOND:return ne.TimestampNanosecond}return ne.Timestamp;case ne.Date:switch(e.unit){case Er.DAY:return ne.DateDay;case Er.MILLISECOND:return ne.DateMillisecond}return ne.Date;case ne.Interval:switch(e.unit){case so.DAY_TIME:return ne.IntervalDayTime;case so.YEAR_MONTH:return ne.IntervalYearMonth}return ne.Interval;case ne.Duration:switch(e.unit){case _t.SECOND:return ne.DurationSecond;case _t.MILLISECOND:return ne.DurationMillisecond;case _t.MICROSECOND:return ne.DurationMicrosecond;case _t.NANOSECOND:return ne.DurationNanosecond}return ne.Duration;case ne.Map:return ne.Map;case ne.List:return ne.List;case ne.Struct:return ne.Struct;case ne.Union:switch(e.mode){case Pi.Dense:return ne.DenseUnion;case Pi.Sparse:return ne.SparseUnion}return ne.Union;case ne.FixedSizeBinary:return ne.FixedSizeBinary;case ne.FixedSizeList:return ne.FixedSizeList;case ne.Dictionary:return ne.Dictionary}throw new Error(`Unrecognized type '${ne[e.typeId]}'`)}kt.prototype.visitInt8=null;kt.prototype.visitInt16=null;kt.prototype.visitInt32=null;kt.prototype.visitInt64=null;kt.prototype.visitUint8=null;kt.prototype.visitUint16=null;kt.prototype.visitUint32=null;kt.prototype.visitUint64=null;kt.prototype.visitFloat16=null;kt.prototype.visitFloat32=null;kt.prototype.visitFloat64=null;kt.prototype.visitDateDay=null;kt.prototype.visitDateMillisecond=null;kt.prototype.visitTimestampSecond=null;kt.prototype.visitTimestampMillisecond=null;kt.prototype.visitTimestampMicrosecond=null;kt.prototype.visitTimestampNanosecond=null;kt.prototype.visitTimeSecond=null;kt.prototype.visitTimeMillisecond=null;kt.prototype.visitTimeMicrosecond=null;kt.prototype.visitTimeNanosecond=null;kt.prototype.visitDenseUnion=null;kt.prototype.visitSparseUnion=null;kt.prototype.visitIntervalDayTime=null;kt.prototype.visitIntervalYearMonth=null;kt.prototype.visitDuration=null;kt.prototype.visitDurationSecond=null;kt.prototype.visitDurationMillisecond=null;kt.prototype.visitDurationMicrosecond=null;kt.prototype.visitDurationNanosecond=null;const D9=new Float64Array(1),eu=new Uint32Array(D9.buffer);function U9(e){const t=(e&31744)>>10,n=(e&1023)/1024,i=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,t-15)*(1+n)}function hhe(e){if(e!==e)return 32256;D9[0]=e;const t=(eu[1]&2147483648)>>16&65535;let n=eu[1]&2146435072,i=0;return n>=1089470464?eu[0]>0?n=31744:(n=(n&2080374784)>>16,i=(eu[1]&1048575)>>10):n<=1056964608?(i=1048576+(eu[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(eu[1]&1048575)+512>>10),t|n|i&65535}class pt extends kt{}function mt(e){return(t,n,i)=>{if(t.setValid(n,i!=null))return e(t,n,i)}}const _he=(e,t,n)=>{e[t]=Math.floor(n/864e5)},j9=(e,t,n,i)=>{if(n+1<t.length){const s=fn(t[n]),a=fn(t[n+1]);e.set(i.subarray(0,a-s),s)}},phe=({offset:e,values:t},n,i)=>{const s=e+n;i?t[s>>3]|=1<<s%8:t[s>>3]&=~(1<<s%8)},vl=({values:e},t,n)=>{e[t]=n},MM=({values:e},t,n)=>{e[t]=n},$9=({values:e},t,n)=>{e[t]=hhe(n)},yhe=(e,t,n)=>{switch(e.type.precision){case Oi.HALF:return $9(e,t,n);case Oi.SINGLE:case Oi.DOUBLE:return MM(e,t,n)}},z9=({values:e},t,n)=>{_he(e,t,n.valueOf())},q9=({values:e},t,n)=>{e[t]=BigInt(n)},ghe=({stride:e,values:t},n,i)=>{t.set(i.subarray(0,e),e*n)},V9=({values:e,valueOffsets:t},n,i)=>j9(e,t,n,i),G9=({values:e,valueOffsets:t},n,i)=>j9(e,t,n,IM(i)),mhe=(e,t,n)=>{e.type.unit===Er.DAY?z9(e,t,n):q9(e,t,n)},H9=({values:e},t,n)=>{e[t]=BigInt(n/1e3)},W9=({values:e},t,n)=>{e[t]=BigInt(n)},Y9=({values:e},t,n)=>{e[t]=BigInt(n*1e3)},X9=({values:e},t,n)=>{e[t]=BigInt(n*1e6)},whe=(e,t,n)=>{switch(e.type.unit){case _t.SECOND:return H9(e,t,n);case _t.MILLISECOND:return W9(e,t,n);case _t.MICROSECOND:return Y9(e,t,n);case _t.NANOSECOND:return X9(e,t,n)}},K9=({values:e},t,n)=>{e[t]=n},J9=({values:e},t,n)=>{e[t]=n},Q9=({values:e},t,n)=>{e[t]=n},Z9=({values:e},t,n)=>{e[t]=n},bhe=(e,t,n)=>{switch(e.type.unit){case _t.SECOND:return K9(e,t,n);case _t.MILLISECOND:return J9(e,t,n);case _t.MICROSECOND:return Q9(e,t,n);case _t.NANOSECOND:return Z9(e,t,n)}},The=({values:e,stride:t},n,i)=>{e.set(i.subarray(0,t),t*n)},vhe=(e,t,n)=>{const i=e.children[0],s=e.valueOffsets,a=Sr.getVisitFn(i);if(Array.isArray(n))for(let c=-1,d=s[t],f=s[t+1];d<f;)a(i,d++,n[++c]);else for(let c=-1,d=s[t],f=s[t+1];d<f;)a(i,d++,n.get(++c))},Ehe=(e,t,n)=>{const i=e.children[0],{valueOffsets:s}=e,a=Sr.getVisitFn(i);let{[t]:c,[t+1]:d}=s;const f=n instanceof Map?n.entries():Object.entries(n);for(const u of f)if(a(i,c,u),++c>=d)break},She=(e,t)=>(n,i,s,a)=>i&&n(i,e,t[a]),Bhe=(e,t)=>(n,i,s,a)=>i&&n(i,e,t.get(a)),Ihe=(e,t)=>(n,i,s,a)=>i&&n(i,e,t.get(s.name)),Fhe=(e,t)=>(n,i,s,a)=>i&&n(i,e,t[s.name]),khe=(e,t,n)=>{const i=e.type.children.map(a=>Sr.getVisitFn(a.type)),s=n instanceof Map?Ihe(t,n):n instanceof Jt?Bhe(t,n):Array.isArray(n)?She(t,n):Fhe(t,n);e.type.children.forEach((a,c)=>s(i[c],e.children[c],a,c))},xhe=(e,t,n)=>{e.type.mode===Pi.Dense?eV(e,t,n):tV(e,t,n)},eV=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],s=e.children[i];Sr.visit(s,e.valueOffsets[t],n)},tV=(e,t,n)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],s=e.children[i];Sr.visit(s,t,n)},Mhe=(e,t,n)=>{var i;(i=e.dictionary)===null||i===void 0||i.set(e.values[t],n)},Ahe=(e,t,n)=>{e.type.unit===so.DAY_TIME?nV(e,t,n):iV(e,t,n)},nV=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},iV=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},sV=({values:e},t,n)=>{e[t]=n},rV=({values:e},t,n)=>{e[t]=n},aV=({values:e},t,n)=>{e[t]=n},oV=({values:e},t,n)=>{e[t]=n},Ohe=(e,t,n)=>{switch(e.type.unit){case _t.SECOND:return sV(e,t,n);case _t.MILLISECOND:return rV(e,t,n);case _t.MICROSECOND:return aV(e,t,n);case _t.NANOSECOND:return oV(e,t,n)}},Nhe=(e,t,n)=>{const{stride:i}=e,s=e.children[0],a=Sr.getVisitFn(s);if(Array.isArray(n))for(let c=-1,d=t*i;++c<i;)a(s,d+c,n[c]);else for(let c=-1,d=t*i;++c<i;)a(s,d+c,n.get(c))};pt.prototype.visitBool=mt(phe);pt.prototype.visitInt=mt(vl);pt.prototype.visitInt8=mt(vl);pt.prototype.visitInt16=mt(vl);pt.prototype.visitInt32=mt(vl);pt.prototype.visitInt64=mt(vl);pt.prototype.visitUint8=mt(vl);pt.prototype.visitUint16=mt(vl);pt.prototype.visitUint32=mt(vl);pt.prototype.visitUint64=mt(vl);pt.prototype.visitFloat=mt(yhe);pt.prototype.visitFloat16=mt($9);pt.prototype.visitFloat32=mt(MM);pt.prototype.visitFloat64=mt(MM);pt.prototype.visitUtf8=mt(G9);pt.prototype.visitLargeUtf8=mt(G9);pt.prototype.visitBinary=mt(V9);pt.prototype.visitLargeBinary=mt(V9);pt.prototype.visitFixedSizeBinary=mt(ghe);pt.prototype.visitDate=mt(mhe);pt.prototype.visitDateDay=mt(z9);pt.prototype.visitDateMillisecond=mt(q9);pt.prototype.visitTimestamp=mt(whe);pt.prototype.visitTimestampSecond=mt(H9);pt.prototype.visitTimestampMillisecond=mt(W9);pt.prototype.visitTimestampMicrosecond=mt(Y9);pt.prototype.visitTimestampNanosecond=mt(X9);pt.prototype.visitTime=mt(bhe);pt.prototype.visitTimeSecond=mt(K9);pt.prototype.visitTimeMillisecond=mt(J9);pt.prototype.visitTimeMicrosecond=mt(Q9);pt.prototype.visitTimeNanosecond=mt(Z9);pt.prototype.visitDecimal=mt(The);pt.prototype.visitList=mt(vhe);pt.prototype.visitStruct=mt(khe);pt.prototype.visitUnion=mt(xhe);pt.prototype.visitDenseUnion=mt(eV);pt.prototype.visitSparseUnion=mt(tV);pt.prototype.visitDictionary=mt(Mhe);pt.prototype.visitInterval=mt(Ahe);pt.prototype.visitIntervalDayTime=mt(nV);pt.prototype.visitIntervalYearMonth=mt(iV);pt.prototype.visitDuration=mt(Ohe);pt.prototype.visitDurationSecond=mt(sV);pt.prototype.visitDurationMillisecond=mt(rV);pt.prototype.visitDurationMicrosecond=mt(aV);pt.prototype.visitDurationNanosecond=mt(oV);pt.prototype.visitFixedSizeList=mt(Nhe);pt.prototype.visitMap=mt(Ehe);const Sr=new pt,$r=Symbol.for("parent"),Hu=Symbol.for("rowIndex");class AM{constructor(t,n){return this[$r]=t,this[Hu]=n,new Proxy(this,new Che)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Hu],n=this[$r],i=n.type.children,s={};for(let a=-1,c=i.length;++a<c;)s[i[a].name]=Ss.visit(n.children[a],t);return s}toString(){return`{${[...this].map(([t,n])=>`${Eg(t)}: ${Eg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Rhe(this[$r],this[Hu])}}class Rhe{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ss.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(AM.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[$r]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Hu]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Che{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[$r].type.children.map(n=>n.name)}has(t,n){return t[$r].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[$r].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[$r].type.children.findIndex(s=>s.name===n);if(i!==-1){const s=Ss.visit(t[$r].children[i],t[Hu]);return Reflect.set(t,n,s),s}}set(t,n,i){const s=t[$r].type.children.findIndex(a=>a.name===n);return s!==-1?(Sr.visit(t[$r].children[s],t[Hu],i),Reflect.set(t,n,i)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,i):!1}}class ot extends kt{}function yt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const Lhe=(e,t)=>864e5*e[t],Phe=(e,t)=>null,lV=(e,t,n)=>{if(n+1>=t.length)return null;const i=fn(t[n]),s=fn(t[n+1]);return e.subarray(i,s)},Dhe=({offset:e,values:t},n)=>{const i=e+n;return(t[i>>3]&1<<i%8)!==0},cV=({values:e},t)=>Lhe(e,t),dV=({values:e},t)=>fn(e[t]),zc=({stride:e,values:t},n)=>t[e*n],Uhe=({stride:e,values:t},n)=>U9(t[e*n]),fV=({values:e},t)=>e[t],jhe=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),uV=({values:e,valueOffsets:t},n)=>lV(e,t,n),hV=({values:e,valueOffsets:t},n)=>{const i=lV(e,t,n);return i!==null?uk(i):null},$he=({values:e},t)=>e[t],zhe=({type:e,values:t},n)=>e.precision!==Oi.HALF?t[n]:U9(t[n]),qhe=(e,t)=>e.type.unit===Er.DAY?cV(e,t):dV(e,t),_V=({values:e},t)=>1e3*fn(e[t]),pV=({values:e},t)=>fn(e[t]),yV=({values:e},t)=>_9(e[t],BigInt(1e3)),gV=({values:e},t)=>_9(e[t],BigInt(1e6)),Vhe=(e,t)=>{switch(e.type.unit){case _t.SECOND:return _V(e,t);case _t.MILLISECOND:return pV(e,t);case _t.MICROSECOND:return yV(e,t);case _t.NANOSECOND:return gV(e,t)}},mV=({values:e},t)=>e[t],wV=({values:e},t)=>e[t],bV=({values:e},t)=>e[t],TV=({values:e},t)=>e[t],Ghe=(e,t)=>{switch(e.type.unit){case _t.SECOND:return mV(e,t);case _t.MILLISECOND:return wV(e,t);case _t.MICROSECOND:return bV(e,t);case _t.NANOSECOND:return TV(e,t)}},Hhe=({values:e,stride:t},n)=>xM.decimal(e.subarray(t*n,t*(n+1))),Whe=(e,t)=>{const{valueOffsets:n,stride:i,children:s}=e,{[t*i]:a,[t*i+1]:c}=n,f=s[0].slice(a,c-a);return new Jt([f])},Yhe=(e,t)=>{const{valueOffsets:n,children:i}=e,{[t]:s,[t+1]:a}=n,c=i[0];return new OM(c.slice(s,a-s))},Xhe=(e,t)=>new AM(e,t),Khe=(e,t)=>e.type.mode===Pi.Dense?vV(e,t):EV(e,t),vV=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return Ss.visit(i,e.valueOffsets[t])},EV=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[n];return Ss.visit(i,t)},Jhe=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Qhe=(e,t)=>e.type.unit===so.DAY_TIME?SV(e,t):BV(e,t),SV=({values:e},t)=>e.subarray(2*t,2*(t+1)),BV=({values:e},t)=>{const n=e[t],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},IV=({values:e},t)=>e[t],FV=({values:e},t)=>e[t],kV=({values:e},t)=>e[t],xV=({values:e},t)=>e[t],Zhe=(e,t)=>{switch(e.type.unit){case _t.SECOND:return IV(e,t);case _t.MILLISECOND:return FV(e,t);case _t.MICROSECOND:return kV(e,t);case _t.NANOSECOND:return xV(e,t)}},e_e=(e,t)=>{const{stride:n,children:i}=e,a=i[0].slice(t*n,n);return new Jt([a])};ot.prototype.visitNull=yt(Phe);ot.prototype.visitBool=yt(Dhe);ot.prototype.visitInt=yt($he);ot.prototype.visitInt8=yt(zc);ot.prototype.visitInt16=yt(zc);ot.prototype.visitInt32=yt(zc);ot.prototype.visitInt64=yt(fV);ot.prototype.visitUint8=yt(zc);ot.prototype.visitUint16=yt(zc);ot.prototype.visitUint32=yt(zc);ot.prototype.visitUint64=yt(fV);ot.prototype.visitFloat=yt(zhe);ot.prototype.visitFloat16=yt(Uhe);ot.prototype.visitFloat32=yt(zc);ot.prototype.visitFloat64=yt(zc);ot.prototype.visitUtf8=yt(hV);ot.prototype.visitLargeUtf8=yt(hV);ot.prototype.visitBinary=yt(uV);ot.prototype.visitLargeBinary=yt(uV);ot.prototype.visitFixedSizeBinary=yt(jhe);ot.prototype.visitDate=yt(qhe);ot.prototype.visitDateDay=yt(cV);ot.prototype.visitDateMillisecond=yt(dV);ot.prototype.visitTimestamp=yt(Vhe);ot.prototype.visitTimestampSecond=yt(_V);ot.prototype.visitTimestampMillisecond=yt(pV);ot.prototype.visitTimestampMicrosecond=yt(yV);ot.prototype.visitTimestampNanosecond=yt(gV);ot.prototype.visitTime=yt(Ghe);ot.prototype.visitTimeSecond=yt(mV);ot.prototype.visitTimeMillisecond=yt(wV);ot.prototype.visitTimeMicrosecond=yt(bV);ot.prototype.visitTimeNanosecond=yt(TV);ot.prototype.visitDecimal=yt(Hhe);ot.prototype.visitList=yt(Whe);ot.prototype.visitStruct=yt(Xhe);ot.prototype.visitUnion=yt(Khe);ot.prototype.visitDenseUnion=yt(vV);ot.prototype.visitSparseUnion=yt(EV);ot.prototype.visitDictionary=yt(Jhe);ot.prototype.visitInterval=yt(Qhe);ot.prototype.visitIntervalDayTime=yt(SV);ot.prototype.visitIntervalYearMonth=yt(BV);ot.prototype.visitDuration=yt(Zhe);ot.prototype.visitDurationSecond=yt(IV);ot.prototype.visitDurationMillisecond=yt(FV);ot.prototype.visitDurationMicrosecond=yt(kV);ot.prototype.visitDurationNanosecond=yt(xV);ot.prototype.visitFixedSizeList=yt(e_e);ot.prototype.visitMap=yt(Yhe);const Ss=new ot,Eu=Symbol.for("keys"),Wu=Symbol.for("vals"),Su=Symbol.for("kKeysAsStrings"),mk=Symbol.for("_kKeysAsStrings");class OM{constructor(t){return this[Eu]=new Jt([t.children[0]]).memoize(),this[Wu]=t.children[1],new Proxy(this,new n_e)}get[Su](){return this[mk]||(this[mk]=Array.from(this[Eu].toArray(),String))}[Symbol.iterator](){return new t_e(this[Eu],this[Wu])}get size(){return this[Eu].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Eu],n=this[Wu],i={};for(let s=-1,a=t.length;++s<a;)i[t.get(s)]=Ss.visit(n,s);return i}toString(){return`{${[...this].map(([t,n])=>`${Eg(t)}: ${Eg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class t_e{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ss.visit(this.vals,t)]})}}class n_e{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Su]}has(t,n){return t[Su].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Su].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const i=t[Su].indexOf(n);if(i!==-1){const s=Ss.visit(Reflect.get(t,Wu),i);return Reflect.set(t,n,s),s}}set(t,n,i){const s=t[Su].indexOf(n);return s!==-1?(Sr.visit(Reflect.get(t,Wu),s,i),Reflect.set(t,n,i)):Reflect.has(t,n)?Reflect.set(t,n,i):!1}}Object.defineProperties(OM.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Eu]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Wu]:{writable:!0,enumerable:!1,configurable:!1,value:null},[mk]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let S3;function MV(e,t,n,i){const{length:s=0}=e;let a=typeof t!="number"?0:t,c=typeof n!="number"?s:n;return a<0&&(a=(a%s+s)%s),c<0&&(c=(c%s+s)%s),c<a&&(S3=a,a=c,c=S3),c>s&&(c=s),i?i(e,a,c):[a,c]}const NM=(e,t)=>e<0?t+e:e,B3=e=>e!==e;function r_(e){if(typeof e!=="object"||e===null)return B3(e)?B3:n=>n===e;if(e instanceof Date){const n=e.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?ehe(e,n):!1:e instanceof Map?s_e(e):Array.isArray(e)?i_e(e):e instanceof Jt?r_e(e):a_e(e,!0)}function i_e(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=r_(e[n]);return iE(t)}function s_e(e){let t=-1;const n=[];for(const i of e.values())n[++t]=r_(i);return iE(n)}function r_e(e){const t=[];for(let n=-1,i=e.length;++n<i;)t[n]=r_(e.get(n));return iE(t)}function a_e(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const i=[];for(let s=-1,a=n.length;++s<a;)i[s]=r_(e[n[s]]);return iE(i,n)}function iE(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return o_e(e,n);case Map:return I3(e,n,n.keys());case OM:case AM:case Object:case void 0:return I3(e,n,t||Object.keys(n))}return n instanceof Jt?l_e(e,n):!1}}function o_e(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t[i]))return!1;return!0}function l_e(e,t){const n=e.length;if(t.length!==n)return!1;for(let i=-1;++i<n;)if(!e[i](t.get(i)))return!1;return!0}function I3(e,t,n){const i=n[Symbol.iterator](),s=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),a=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let c=0;const d=e.length;let f=a.next(),u=i.next(),r=s.next();for(;c<d&&!u.done&&!r.done&&!f.done&&!(u.value!==r.value||!e[c](f.value));++c,u=i.next(),r=s.next(),f=a.next());return c===d&&u.done&&r.done&&f.done?!0:(i.return&&i.return(),s.return&&s.return(),a.return&&a.return(),!1)}function AV(e,t,n,i){return(n&1<<i)!==0}function c_e(e,t,n,i){return(n&1<<i)>>i}function bv(e,t,n){const i=n.byteLength+7&-8;if(e>0||n.byteLength<i){const s=new Uint8Array(i);return s.set(e%8===0?n.subarray(e>>3):Tv(new RM(n,e,t,null,AV)).subarray(0,i)),s}return n}function Tv(e){const t=[];let n=0,i=0,s=0;for(const c of e)c&&(s|=1<<i),++i===8&&(t[n++]=s,s=i=0);(n===0||i>0)&&(t[n++]=s);const a=new Uint8Array(t.length+7&-8);return a.set(t),a}class RM{constructor(t,n,i,s,a){this.bytes=t,this.length=i,this.context=s,this.get=a,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function wk(e,t,n){if(n-t<=0)return 0;if(n-t<8){let a=0;for(const c of new RM(e,t,n-t,e,c_e))a+=c;return a}const i=n>>3<<3,s=t+(t%8===0?0:8-t%8);return wk(e,t,s)+wk(e,i,n)+d_e(e,s>>3,i-s>>3)}function d_e(e,t,n){let i=0,s=Math.trunc(t);const a=new DataView(e.buffer,e.byteOffset,e.byteLength),c=n===void 0?e.byteLength:s+n;for(;c-s>=4;)i+=RB(a.getUint32(s)),s+=4;for(;c-s>=2;)i+=RB(a.getUint16(s)),s+=2;for(;c-s>=1;)i+=RB(a.getUint8(s)),s+=1;return i}function RB(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const f_e=-1;class en{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Xe.isSparseUnion(t)?this.children.some(n=>n.nullable):Xe.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:i,nullBitmap:s,typeIds:a}=this;return n&&(t+=n.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),a&&(t+=a.byteLength),this.children.reduce((c,d)=>c+d.byteLength,t)}get nullCount(){if(Xe.isUnion(this.type))return this.children.reduce((i,s)=>i+s.nullCount,0);let t=this._nullCount,n;return t<=f_e&&(n=this.nullBitmap)&&(this._nullCount=t=n.length===0?0:this.length-wk(n,this.offset,this.offset+this.length)),t}constructor(t,n,i,s,a,c=[],d){this.type=t,this.children=c,this.dictionary=d,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(s||0,-1));let f;a instanceof en?(this.stride=a.stride,this.values=a.values,this.typeIds=a.typeIds,this.nullBitmap=a.nullBitmap,this.valueOffsets=a.valueOffsets):(this.stride=qo(t),a&&((f=a[0])&&(this.valueOffsets=f),(f=a[1])&&(this.values=f),(f=a[2])&&(this.nullBitmap=f),(f=a[3])&&(this.typeIds=f)))}getValid(t){const{type:n}=this;if(Xe.isUnion(n)){const i=n,s=this.children[i.typeIdToChildIndex[this.typeIds[t]]],a=i.mode===Pi.Dense?this.valueOffsets[t]:t;return s.getValid(a)}if(this.nullable&&this.nullCount>0){const i=this.offset+t;return(this.nullBitmap[i>>3]&1<<i%8)!==0}return!0}setValid(t,n){let i;const{type:s}=this;if(Xe.isUnion(s)){const a=s,c=this.children[a.typeIdToChildIndex[this.typeIds[t]]],d=a.mode===Pi.Dense?this.valueOffsets[t]:t;i=c.getValid(d),c.setValid(d,n)}else{let{nullBitmap:a}=this;const{offset:c,length:d}=this,f=c+t,u=1<<f%8,r=f>>3;(!a||a.byteLength<=r)&&(a=new Uint8Array((c+d+63&-64)>>3).fill(255),this.nullCount>0?(a.set(bv(c,d,this.nullBitmap),0),Object.assign(this,{nullBitmap:a})):Object.assign(this,{nullBitmap:a,_nullCount:0}));const h=a[r];i=(h&u)!==0,a[r]=n?h|u:h&~u}return i!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,i=this.length,s=this._nullCount,a=this,c=this.children){return new en(t,n,i,s,a,c,this.dictionary)}slice(t,n){const{stride:i,typeId:s,children:a}=this,c=+(this._nullCount===0)-1,d=s===16?i:1,f=this._sliceBuffers(t,n,i,s);return this.clone(this.type,this.offset+t,n,c,f,a.length===0||this.valueOffsets?a:this._sliceChildren(a,d*t,d*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ne.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:i}=this,s=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);s[n>>3]=(1<<n-(n&-8))-1,i>0&&s.set(bv(this.offset,n,this.nullBitmap),0);const a=this.buffers;return a[zo.VALIDITY]=s,this.clone(this.type,0,t,i+(t-n),a)}_sliceBuffers(t,n,i,s){let a;const{buffers:c}=this;return(a=c[zo.TYPE])&&(c[zo.TYPE]=a.subarray(t,t+n)),(a=c[zo.OFFSET])&&(c[zo.OFFSET]=a.subarray(t,t+n+1))||(a=c[zo.DATA])&&(c[zo.DATA]=s===6?a:a.subarray(i*t,i*(t+n))),c}_sliceChildren(t,n,i){return t.map(s=>s.slice(n,i))}}en.prototype.children=Object.freeze([]);class ng extends kt{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:i=0,["length"]:s=0}=t;return new en(n,i,s,s)}visitBool(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length>>3,["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitInt(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length,["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitFloat(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length,["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitUtf8(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.data),a=Ct(t.nullBitmap),c=D_(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new en(n,i,d,f,[c,s,a])}visitLargeUtf8(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.data),a=Ct(t.nullBitmap),c=h3(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new en(n,i,d,f,[c,s,a])}visitBinary(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.data),a=Ct(t.nullBitmap),c=D_(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new en(n,i,d,f,[c,s,a])}visitLargeBinary(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.data),a=Ct(t.nullBitmap),c=h3(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new en(n,i,d,f,[c,s,a])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length/qo(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitDate(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length/qo(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitTimestamp(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length/qo(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitTime(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length/qo(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitDecimal(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length/qo(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitList(t){const{["type"]:n,["offset"]:i=0,["child"]:s}=t,a=Ct(t.nullBitmap),c=D_(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new en(n,i,d,f,[c,void 0,a],[s])}visitStruct(t){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=t,a=Ct(t.nullBitmap),{length:c=s.reduce((f,{length:u})=>Math.max(f,u),0),nullCount:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,void 0,a],s)}visitUnion(t){const{["type"]:n,["offset"]:i=0,["children"]:s=[]}=t,a=nn(n.ArrayType,t.typeIds),{["length"]:c=a.length,["nullCount"]:d=-1}=t;if(Xe.isSparseUnion(n))return new en(n,i,c,d,[void 0,void 0,void 0,a],s);const f=D_(t.valueOffsets);return new en(n,i,c,d,[f,void 0,void 0,a],s)}visitDictionary(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.indices.ArrayType,t.data),{["dictionary"]:c=new Jt([new ng().visit({type:n.dictionary})])}=t,{["length"]:d=a.length,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new en(n,i,d,f,[void 0,a,s],[],c)}visitInterval(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length/qo(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitDuration(t){const{["type"]:n,["offset"]:i=0}=t,s=Ct(t.nullBitmap),a=nn(n.ArrayType,t.data),{["length"]:c=a.length,["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,a,s])}visitFixedSizeList(t){const{["type"]:n,["offset"]:i=0,["child"]:s=new ng().visit({type:n.valueType})}=t,a=Ct(t.nullBitmap),{["length"]:c=s.length/qo(n),["nullCount"]:d=t.nullBitmap?-1:0}=t;return new en(n,i,c,d,[void 0,void 0,a],[s])}visitMap(t){const{["type"]:n,["offset"]:i=0,["child"]:s=new ng().visit({type:n.childType})}=t,a=Ct(t.nullBitmap),c=D_(t.valueOffsets),{["length"]:d=c.length-1,["nullCount"]:f=t.nullBitmap?-1:0}=t;return new en(n,i,d,f,[c,void 0,a],[s])}}const u_e=new ng;function xt(e){return u_e.visit(e)}class F3{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function h_e(e){return e.some(t=>t.nullable)}function OV(e){return e.reduce((t,n)=>t+n.nullCount,0)}function NV(e){return e.reduce((t,n,i)=>(t[i+1]=t[i]+n.length,t),new Uint32Array(e.length+1))}function RV(e,t,n,i){const s=[];for(let a=-1,c=e.length;++a<c;){const d=e[a],f=t[a],{length:u}=d;if(f>=i)break;if(n>=f+u)continue;if(f>=n&&f+u<=i){s.push(d);continue}const r=Math.max(0,n-f),h=Math.min(i-f,u);s.push(d.slice(r,h-r))}return s.length===0&&s.push(e[0].slice(0,0)),s}function CM(e,t,n,i){let s=0,a=0,c=t.length-1;do{if(s>=c-1)return n<t[c]?i(e,s,n-t[s]):null;a=s+Math.trunc((c-s)*.5),n<t[a]?c=a:s=a}while(s<c)}function LM(e,t){return e.getValid(t)}function vv(e){function t(n,i,s){return e(n[i],s)}return function(n){const i=this.data;return CM(i,this._offsets,n,t)}}function CV(e){let t;function n(i,s,a){return e(i[s],a,t)}return function(i,s){const a=this.data;t=s;const c=CM(a,this._offsets,i,n);return t=void 0,c}}function LV(e){let t;function n(i,s,a){let c=a,d=0,f=0;for(let u=s-1,r=i.length;++u<r;){const h=i[u];if(~(d=e(h,t,c)))return f+d;c=0,f+=h.length}return-1}return function(i,s){t=i;const a=this.data,c=typeof s!="number"?n(a,0,0):CM(a,this._offsets,s,n);return t=void 0,c}}class lt extends kt{}function __e(e,t){return t===null&&e.length>0?0:-1}function p_e(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let i=0;for(const s of new RM(n,e.offset+(t||0),e.length,n,AV)){if(!s)return i;++i}return-1}function Tt(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case ne.Union:break;case ne.Dictionary:break;default:return p_e(e,n)}const i=Ss.getVisitFn(e),s=r_(t);for(let a=(n||0)-1,c=e.length;++a<c;)if(s(i(e,a)))return a;return-1}function PV(e,t,n){const i=Ss.getVisitFn(e),s=r_(t);for(let a=(n||0)-1,c=e.length;++a<c;)if(s(i(e,a)))return a;return-1}lt.prototype.visitNull=__e;lt.prototype.visitBool=Tt;lt.prototype.visitInt=Tt;lt.prototype.visitInt8=Tt;lt.prototype.visitInt16=Tt;lt.prototype.visitInt32=Tt;lt.prototype.visitInt64=Tt;lt.prototype.visitUint8=Tt;lt.prototype.visitUint16=Tt;lt.prototype.visitUint32=Tt;lt.prototype.visitUint64=Tt;lt.prototype.visitFloat=Tt;lt.prototype.visitFloat16=Tt;lt.prototype.visitFloat32=Tt;lt.prototype.visitFloat64=Tt;lt.prototype.visitUtf8=Tt;lt.prototype.visitLargeUtf8=Tt;lt.prototype.visitBinary=Tt;lt.prototype.visitLargeBinary=Tt;lt.prototype.visitFixedSizeBinary=Tt;lt.prototype.visitDate=Tt;lt.prototype.visitDateDay=Tt;lt.prototype.visitDateMillisecond=Tt;lt.prototype.visitTimestamp=Tt;lt.prototype.visitTimestampSecond=Tt;lt.prototype.visitTimestampMillisecond=Tt;lt.prototype.visitTimestampMicrosecond=Tt;lt.prototype.visitTimestampNanosecond=Tt;lt.prototype.visitTime=Tt;lt.prototype.visitTimeSecond=Tt;lt.prototype.visitTimeMillisecond=Tt;lt.prototype.visitTimeMicrosecond=Tt;lt.prototype.visitTimeNanosecond=Tt;lt.prototype.visitDecimal=Tt;lt.prototype.visitList=Tt;lt.prototype.visitStruct=Tt;lt.prototype.visitUnion=Tt;lt.prototype.visitDenseUnion=PV;lt.prototype.visitSparseUnion=PV;lt.prototype.visitDictionary=Tt;lt.prototype.visitInterval=Tt;lt.prototype.visitIntervalDayTime=Tt;lt.prototype.visitIntervalYearMonth=Tt;lt.prototype.visitDuration=Tt;lt.prototype.visitDurationSecond=Tt;lt.prototype.visitDurationMillisecond=Tt;lt.prototype.visitDurationMicrosecond=Tt;lt.prototype.visitDurationNanosecond=Tt;lt.prototype.visitFixedSizeList=Tt;lt.prototype.visitMap=Tt;const Ev=new lt;class ct extends kt{}function gt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(Xe.isInt(t)&&t.bitWidth!==64||Xe.isTime(t)&&t.bitWidth!==64||Xe.isFloat(t)&&t.precision!==Oi.HALF))return new F3(e.data.length,i=>{const s=e.data[i];return s.values.subarray(0,s.length)[Symbol.iterator]()});let n=0;return new F3(e.data.length,i=>{const a=e.data[i].length,c=e.slice(n,n+a);return n+=a,new y_e(c)})}class y_e{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}ct.prototype.visitNull=gt;ct.prototype.visitBool=gt;ct.prototype.visitInt=gt;ct.prototype.visitInt8=gt;ct.prototype.visitInt16=gt;ct.prototype.visitInt32=gt;ct.prototype.visitInt64=gt;ct.prototype.visitUint8=gt;ct.prototype.visitUint16=gt;ct.prototype.visitUint32=gt;ct.prototype.visitUint64=gt;ct.prototype.visitFloat=gt;ct.prototype.visitFloat16=gt;ct.prototype.visitFloat32=gt;ct.prototype.visitFloat64=gt;ct.prototype.visitUtf8=gt;ct.prototype.visitLargeUtf8=gt;ct.prototype.visitBinary=gt;ct.prototype.visitLargeBinary=gt;ct.prototype.visitFixedSizeBinary=gt;ct.prototype.visitDate=gt;ct.prototype.visitDateDay=gt;ct.prototype.visitDateMillisecond=gt;ct.prototype.visitTimestamp=gt;ct.prototype.visitTimestampSecond=gt;ct.prototype.visitTimestampMillisecond=gt;ct.prototype.visitTimestampMicrosecond=gt;ct.prototype.visitTimestampNanosecond=gt;ct.prototype.visitTime=gt;ct.prototype.visitTimeSecond=gt;ct.prototype.visitTimeMillisecond=gt;ct.prototype.visitTimeMicrosecond=gt;ct.prototype.visitTimeNanosecond=gt;ct.prototype.visitDecimal=gt;ct.prototype.visitList=gt;ct.prototype.visitStruct=gt;ct.prototype.visitUnion=gt;ct.prototype.visitDenseUnion=gt;ct.prototype.visitSparseUnion=gt;ct.prototype.visitDictionary=gt;ct.prototype.visitInterval=gt;ct.prototype.visitIntervalDayTime=gt;ct.prototype.visitIntervalYearMonth=gt;ct.prototype.visitDuration=gt;ct.prototype.visitDurationSecond=gt;ct.prototype.visitDurationMillisecond=gt;ct.prototype.visitDurationMicrosecond=gt;ct.prototype.visitDurationNanosecond=gt;ct.prototype.visitFixedSizeList=gt;ct.prototype.visitMap=gt;const PM=new ct;var DV;const UV={},jV={};class Jt{constructor(t){var n,i,s;const a=t[0]instanceof Jt?t.flatMap(d=>d.data):t;if(a.length===0||a.some(d=>!(d instanceof en)))throw new TypeError("Vector constructor expects an Array of Data instances.");const c=(n=a[0])===null||n===void 0?void 0:n.type;switch(a.length){case 0:this._offsets=[0];break;case 1:{const{get:d,set:f,indexOf:u}=UV[c.typeId],r=a[0];this.isValid=h=>LM(r,h),this.get=h=>d(r,h),this.set=(h,p)=>f(r,h,p),this.indexOf=h=>u(r,h),this._offsets=[0,r.length];break}default:Object.setPrototypeOf(this,jV[c.typeId]),this._offsets=NV(a);break}this.data=a,this.type=c,this.stride=qo(c),this.numChildren=(s=(i=c.children)===null||i===void 0?void 0:i.length)!==null&&s!==void 0?s:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return h_e(this.data)}get nullCount(){return OV(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ne[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}at(t){return this.get(NM(t,this.length))}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return PM.visit(this)}concat(...t){return new Jt(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Jt(MV(this,t,n,({data:i,_offsets:s},a,c)=>RV(i,s,a,c)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:i,stride:s,ArrayType:a}=this;switch(t.typeId){case ne.Int:case ne.Float:case ne.Decimal:case ne.Time:case ne.Timestamp:switch(n.length){case 0:return new a;case 1:return n[0].values.subarray(0,i*s);default:return n.reduce((c,{values:d,length:f})=>(c.array.set(d.subarray(0,f*s),c.offset),c.offset+=f*s,c),{array:new a(i*s),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Jt(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Xe.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Xe.isDictionary(this.type)){const t=new Sv(this.data[0].dictionary),n=this.data.map(i=>{const s=i.clone();return s.dictionary=t,s});return new Jt(n)}return new Sv(this)}unmemoize(){if(Xe.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const s=i.clone();return s.dictionary=t,s});return new Jt(n)}return this}}DV=Symbol.toStringTag;Jt[DV]=(e=>{e.type=Xe.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(ne).map(n=>ne[n]).filter(n=>typeof n=="number"&&n!==ne.NONE);for(const n of t){const i=Ss.getVisitFnByTypeId(n),s=Sr.getVisitFnByTypeId(n),a=Ev.getVisitFnByTypeId(n);UV[n]={get:i,set:s,indexOf:a},jV[n]=Object.create(e,{isValid:{value:vv(LM)},get:{value:vv(Ss.getVisitFnByTypeId(n))},set:{value:CV(Sr.getVisitFnByTypeId(n))},indexOf:{value:LV(Ev.getVisitFnByTypeId(n))}})}return"Vector"})(Jt.prototype);class Sv extends Jt{constructor(t){super(t.data);const n=this.get,i=this.set,s=this.slice,a=new Array(this.length);Object.defineProperty(this,"get",{value(c){const d=a[c];if(d!==void 0)return d;const f=n.call(this,c);return a[c]=f,f}}),Object.defineProperty(this,"set",{value(c,d){i.call(this,c,d),a[c]=d}}),Object.defineProperty(this,"slice",{value:(c,d)=>new Sv(s.call(this,c,d))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Jt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class bk{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,i,s){return t.prep(8,24),t.writeInt64(BigInt(s??0)),t.pad(4),t.writeInt32(i),t.writeInt64(BigInt(n??0)),t.offset()}}class $s{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new $s).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Zt),(n||new $s).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jn.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ma).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new bk).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new bk).__init(this.bb.__vector(this.bb_pos+i)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Xn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,jn.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Qt{constructor(t=[],n,i,s=jn.V5){this.fields=t||[],this.metadata=n||new Map,i||(i=vk(this.fields)),this.dictionaries=i,this.metadataVersion=s}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),i=this.fields.filter(s=>n.has(s.name));return new Qt(i,this.metadata)}selectAt(t){const n=t.map(i=>this.fields[i]).filter(Boolean);return new Qt(n,this.metadata)}assign(...t){const n=t[0]instanceof Qt?t[0]:Array.isArray(t[0])?new Qt(t[0]):new Qt(t),i=[...this.fields],s=Lb(Lb(new Map,this.metadata),n.metadata),a=n.fields.filter(d=>{const f=i.findIndex(u=>u.name===d.name);return~f?(i[f]=d.clone({metadata:Lb(Lb(new Map,i[f].metadata),d.metadata)}))&&!1:!0}),c=vk(a,new Map);return new Qt([...i,...a],s,new Map([...this.dictionaries,...c]))}}Qt.prototype.fields=null;Qt.prototype.metadata=null;Qt.prototype.dictionaries=null;let Nn=class Tk{static new(...t){let[n,i,s,a]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],i===void 0&&(i=t[0].type),s===void 0&&(s=t[0].nullable),a===void 0&&(a=t[0].metadata)),new Tk(`${n}`,i,s,a)}constructor(t,n,i=!1,s){this.name=t,this.type=n,this.nullable=i,this.metadata=s||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,i,s,a]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,i=this.type,s=this.nullable,a=this.metadata]=t:{name:n=this.name,type:i=this.type,nullable:s=this.nullable,metadata:a=this.metadata}=t[0],Tk.new(n,i,s,a)}};Nn.prototype.type=null;Nn.prototype.name=null;Nn.prototype.nullable=null;Nn.prototype.metadata=null;function Lb(e,t){return new Map([...e||new Map,...t||new Map])}function vk(e,t=new Map){for(let n=-1,i=e.length;++n<i;){const a=e[n].type;if(Xe.isDictionary(a)){if(!t.has(a.id))t.set(a.id,a.dictionary);else if(t.get(a.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&vk(a.children,t)}return t}var g_e=d9,m_e=hh;class Fg{static decode(t){t=new m_e(Ct(t));const n=$s.getRootAsFooter(t),i=Qt.decode(n.schema(),new Map,n.version());return new w_e(i,n)}static encode(t){const n=new g_e,i=Qt.encode(n,t.schema);$s.startRecordBatchesVector(n,t.numRecordBatches);for(const c of[...t.recordBatches()].slice().reverse())Tc.encode(n,c);const s=n.endVector();$s.startDictionariesVector(n,t.numDictionaries);for(const c of[...t.dictionaryBatches()].slice().reverse())Tc.encode(n,c);const a=n.endVector();return $s.startFooter(n),$s.addSchema(n,i),$s.addVersion(n,jn.V5),$s.addRecordBatches(n,s),$s.addDictionaries(n,a),$s.finishFooterBuffer(n,$s.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=jn.V5,i,s){this.schema=t,this.version=n,i&&(this._recordBatches=i),s&&(this._dictionaryBatches=s)}*recordBatches(){for(let t,n=-1,i=this.numRecordBatches;++n<i;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,i=this.numDictionaries;++n<i;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class w_e extends Fg{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Tc.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Tc.decode(n)}return null}}class Tc{static decode(t){return new Tc(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:i}=n,s=BigInt(n.offset),a=BigInt(n.bodyLength);return bk.createBlock(t,s,i,a)}constructor(t,n,i){this.metaDataLength=t,this.offset=fn(i),this.bodyLength=fn(n)}}const In=Object.freeze({done:!0,value:void 0});class k3{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class DM{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class b_e extends DM{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return wt(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(In);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return lr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return lr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return wt(this,void 0,void 0,function*(){return yield this.abort(t),In})}return(t){return wt(this,void 0,void 0,function*(){return yield this.close(),In})}read(t){return wt(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return wt(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(In)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class k0 extends b_e{write(t){if((t=Ct(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?uk(this.toUint8Array(!0)):this.toUint8Array(!1).then(uk)}toUint8Array(t=!1){return t?io(this._values)[0]:wt(this,void 0,void 0,function*(){var n,i,s,a;const c=[];let d=0;try{for(var f=!0,u=al(this),r;r=yield u.next(),n=r.done,!n;f=!0){a=r.value,f=!1;const h=a;c.push(h),d+=h.byteLength}}catch(h){i={error:h}}finally{try{!f&&!n&&(s=u.return)&&(yield s.call(u))}finally{if(i)throw i.error}}return io(c,d)[0]})}}class Bv{constructor(t){t&&(this.source=new T_e(lr.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class yh{constructor(t){t instanceof yh?this.source=t.source:t instanceof k0?this.source=new td(lr.fromAsyncIterable(t)):a9(t)?this.source=new td(lr.fromNodeStream(t)):FM(t)?this.source=new td(lr.fromDOMStream(t)):r9(t)?this.source=new td(lr.fromDOMStream(t.body)):um(t)?this.source=new td(lr.fromIterable(t)):lf(t)?this.source=new td(lr.fromAsyncIterable(t)):s_(t)&&(this.source=new td(lr.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class T_e{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,n="read"){return this.source.next({cmd:n,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||In)}return(t){return Object.create(this.source.return&&this.source.return(t)||In)}}class td{constructor(t){this.source=t,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(t){return wt(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return wt(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return wt(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t){return wt(this,arguments,void 0,function*(n,i="read"){return yield this.source.next({cmd:i,size:n})})}throw(t){return wt(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(t))||In;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(t){return wt(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(t))||In;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class x3 extends Bv{constructor(t,n){super(),this.position=0,this.buffer=Ct(t),this.size=n===void 0?this.buffer.byteLength:n}readInt32(t){const{buffer:n,byteOffset:i}=this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:n,size:i,position:s}=this;return n&&s<i?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(i,s+Math.min(i-s,t)),n.subarray(s,this.position)):null}readAt(t,n){const i=this.buffer,s=Math.min(this.size,t+n);return i?i.subarray(t,s):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Iv extends yh{constructor(t,n){super(),this.position=0,this._handle=t,typeof n=="number"?this.size=n:this._pending=wt(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return wt(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(t,4);return new DataView(n,i).getInt32(0,!0)})}seek(t){return wt(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return wt(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:s}=this;if(n&&s<i){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let a=s,c=0,d=0;const f=Math.min(i,a+Math.min(i-a,t)),u=new Uint8Array(Math.max(0,(this.position=f)-a));for(;(a+=d)<f&&(c+=d)<u.byteLength;)({bytesRead:d}=yield n.read(u,c,u.byteLength-c,a));return u}return null})}readAt(t,n){return wt(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:s}=this;if(i&&t+n<s){const a=Math.min(s,t+n),c=new Uint8Array(a-t);return(yield i.read(c,0,n,t)).buffer}return new Uint8Array(n)})}close(){return wt(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return wt(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return wt(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const v_e=65536;function Au(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const gh=8,UM=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class $V{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let s=n[3]*i[3];this.buffer[0]=s&65535;let a=s>>>16;return s=n[2]*i[3],a+=s,s=n[3]*i[2]>>>0,a+=s,this.buffer[0]+=a<<16,this.buffer[1]=a>>>0<s?v_e:0,this.buffer[1]+=a>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(t){const n=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${Au(this.buffer[1])} ${Au(this.buffer[0])}`}}class tn extends $V{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,n=new Uint32Array(2)){return tn.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return tn.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.length,s=new tn(n);for(let a=0;a<i;){const c=gh<i-a?gh:i-a,d=new tn(new Uint32Array([Number.parseInt(t.slice(a,a+c),10),0])),f=new tn(new Uint32Array([UM[c],0]));s.times(f),s.plus(d),a+=c}return s}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,s=t.length;++i<s;)tn.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new tn(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new tn(new Uint32Array(t.buffer)).plus(n)}}class hs extends $V{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const n=this.buffer[1]<<0,i=t.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<t.buffer[0]}static from(t,n=new Uint32Array(2)){return hs.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(2)){return hs.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(2)){const i=t.startsWith("-"),s=t.length,a=new hs(n);for(let c=i?1:0;c<s;){const d=gh<s-c?gh:s-c,f=new hs(new Uint32Array([Number.parseInt(t.slice(c,c+d),10),0])),u=new hs(new Uint32Array([UM[d],0]));a.times(u),a.plus(f),c+=d}return i?a.negate():a}static convertArray(t){const n=new Uint32Array(t.length*2);for(let i=-1,s=t.length;++i<s;)hs.from(t[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(t,n){return new hs(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new hs(new Uint32Array(t.buffer)).plus(n)}}class Aa{constructor(t){this.buffer=t}high(){return new hs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new hs(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const n=new tn(new Uint32Array([this.buffer[3],0])),i=new tn(new Uint32Array([this.buffer[2],0])),s=new tn(new Uint32Array([this.buffer[1],0])),a=new tn(new Uint32Array([this.buffer[0],0])),c=new tn(new Uint32Array([t.buffer[3],0])),d=new tn(new Uint32Array([t.buffer[2],0])),f=new tn(new Uint32Array([t.buffer[1],0])),u=new tn(new Uint32Array([t.buffer[0],0]));let r=tn.multiply(a,u);this.buffer[0]=r.low();const h=new tn(new Uint32Array([r.high(),0]));return r=tn.multiply(s,u),h.plus(r),r=tn.multiply(a,f),h.plus(r),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(r)?1:0,this.buffer[2]=h.high(),new tn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(tn.multiply(i,u)).plus(tn.multiply(s,f)).plus(tn.multiply(a,d)),this.buffer[3]+=tn.multiply(n,u).plus(tn.multiply(i,f)).plus(tn.multiply(s,d)).plus(tn.multiply(a,c)).low(),this}plus(t){const n=new Uint32Array(4);return n[3]=this.buffer[3]+t.buffer[3]>>>0,n[2]=this.buffer[2]+t.buffer[2]>>>0,n[1]=this.buffer[1]+t.buffer[1]>>>0,n[0]=this.buffer[0]+t.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Au(this.buffer[3])} ${Au(this.buffer[2])} ${Au(this.buffer[1])} ${Au(this.buffer[0])}`}static multiply(t,n){return new Aa(new Uint32Array(t.buffer)).times(n)}static add(t,n){return new Aa(new Uint32Array(t.buffer)).plus(n)}static from(t,n=new Uint32Array(4)){return Aa.fromString(typeof t=="string"?t:t.toString(),n)}static fromNumber(t,n=new Uint32Array(4)){return Aa.fromString(t.toString(),n)}static fromString(t,n=new Uint32Array(4)){const i=t.startsWith("-"),s=t.length,a=new Aa(n);for(let c=i?1:0;c<s;){const d=gh<s-c?gh:s-c,f=new Aa(new Uint32Array([Number.parseInt(t.slice(c,c+d),10),0,0,0])),u=new Aa(new Uint32Array([UM[d],0,0,0]));a.times(u),a.plus(f),c+=d}return i?a.negate():a}static convertArray(t){const n=new Uint32Array(t.length*4);for(let i=-1,s=t.length;++i<s;)Aa.from(t[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class zV extends kt{constructor(t,n,i,s,a=jn.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=n,this.buffers=i,this.dictionaries=s,this.metadataVersion=a}visit(t){return super.visit(t instanceof Nn?t.type:t)}visitNull(t,{length:n}=this.nextFieldNode()){return xt({type:t,length:n})}visitBool(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitInt(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFloat(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitUtf8(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeUtf8(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitLargeBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDate(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTimestamp(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitTime(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDecimal(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitList(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),children:this.visitMany(t.children)})}visitUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return this.metadataVersion<jn.V5&&this.readNullBitmap(t,i),t.mode===Pi.Sparse?this.visitSparseUnion(t,{length:n,nullCount:i}):this.visitDenseUnion(t,{length:n,nullCount:i})}visitDenseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitDuration(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),data:this.readData(t)})}visitFixedSizeList(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),child:this.visit(t.children[0])})}visitMap(t,{length:n,nullCount:i}=this.nextFieldNode()){return xt({type:t,length:n,nullCount:i,nullBitmap:this.readNullBitmap(t,i),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,n,i=this.nextBufferRange()){return n>0&&this.readData(t,i)||new Uint8Array(0)}readOffsets(t,n){return this.readData(t,n)}readTypeIds(t,n){return this.readData(t,n)}readData(t,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(t){return this.dictionaries.get(t.id)}}class E_e extends zV{constructor(t,n,i,s,a){super(new Uint8Array(0),n,i,s,a),this.sources=t}readNullBitmap(t,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):Tv(this.sources[i])}readOffsets(t,{offset:n}=this.nextBufferRange()){return nn(Uint8Array,nn(t.OffsetArrayType,this.sources[n]))}readTypeIds(t,{offset:n}=this.nextBufferRange()){return nn(Uint8Array,nn(t.ArrayType,this.sources[n]))}readData(t,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return Xe.isTimestamp(t)||(Xe.isInt(t)||Xe.isTime(t))&&t.bitWidth===64||Xe.isDuration(t)||Xe.isDate(t)&&t.unit===Er.MILLISECOND?nn(Uint8Array,hs.convertArray(i[n])):Xe.isDecimal(t)?nn(Uint8Array,Aa.convertArray(i[n])):Xe.isBinary(t)||Xe.isLargeBinary(t)||Xe.isFixedSizeBinary(t)?S_e(i[n]):Xe.isBool(t)?Tv(i[n]):Xe.isUtf8(t)||Xe.isLargeUtf8(t)?IM(i[n].join("")):nn(Uint8Array,nn(t.ArrayType,i[n].map(s=>+s)))}}function S_e(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i>>1]=Number.parseInt(t.slice(i,i+2),16);return n}class dt extends kt{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((i,s)=>this.compareFields(i,n[s]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ls(e,t){return t instanceof e.constructor}function Af(e,t){return e===t||ls(e,t)}function El(e,t){return e===t||ls(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function sE(e,t){return e===t||ls(e,t)&&e.precision===t.precision}function B_e(e,t){return e===t||ls(e,t)&&e.byteWidth===t.byteWidth}function jM(e,t){return e===t||ls(e,t)&&e.unit===t.unit}function hm(e,t){return e===t||ls(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function _m(e,t){return e===t||ls(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function I_e(e,t){return e===t||ls(e,t)&&e.children.length===t.children.length&&vc.compareManyFields(e.children,t.children)}function F_e(e,t){return e===t||ls(e,t)&&e.children.length===t.children.length&&vc.compareManyFields(e.children,t.children)}function $M(e,t){return e===t||ls(e,t)&&e.mode===t.mode&&e.typeIds.every((n,i)=>n===t.typeIds[i])&&vc.compareManyFields(e.children,t.children)}function k_e(e,t){return e===t||ls(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&vc.visit(e.indices,t.indices)&&vc.visit(e.dictionary,t.dictionary)}function zM(e,t){return e===t||ls(e,t)&&e.unit===t.unit}function pm(e,t){return e===t||ls(e,t)&&e.unit===t.unit}function x_e(e,t){return e===t||ls(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&vc.compareManyFields(e.children,t.children)}function M_e(e,t){return e===t||ls(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&vc.compareManyFields(e.children,t.children)}dt.prototype.visitNull=Af;dt.prototype.visitBool=Af;dt.prototype.visitInt=El;dt.prototype.visitInt8=El;dt.prototype.visitInt16=El;dt.prototype.visitInt32=El;dt.prototype.visitInt64=El;dt.prototype.visitUint8=El;dt.prototype.visitUint16=El;dt.prototype.visitUint32=El;dt.prototype.visitUint64=El;dt.prototype.visitFloat=sE;dt.prototype.visitFloat16=sE;dt.prototype.visitFloat32=sE;dt.prototype.visitFloat64=sE;dt.prototype.visitUtf8=Af;dt.prototype.visitLargeUtf8=Af;dt.prototype.visitBinary=Af;dt.prototype.visitLargeBinary=Af;dt.prototype.visitFixedSizeBinary=B_e;dt.prototype.visitDate=jM;dt.prototype.visitDateDay=jM;dt.prototype.visitDateMillisecond=jM;dt.prototype.visitTimestamp=hm;dt.prototype.visitTimestampSecond=hm;dt.prototype.visitTimestampMillisecond=hm;dt.prototype.visitTimestampMicrosecond=hm;dt.prototype.visitTimestampNanosecond=hm;dt.prototype.visitTime=_m;dt.prototype.visitTimeSecond=_m;dt.prototype.visitTimeMillisecond=_m;dt.prototype.visitTimeMicrosecond=_m;dt.prototype.visitTimeNanosecond=_m;dt.prototype.visitDecimal=Af;dt.prototype.visitList=I_e;dt.prototype.visitStruct=F_e;dt.prototype.visitUnion=$M;dt.prototype.visitDenseUnion=$M;dt.prototype.visitSparseUnion=$M;dt.prototype.visitDictionary=k_e;dt.prototype.visitInterval=zM;dt.prototype.visitIntervalDayTime=zM;dt.prototype.visitIntervalYearMonth=zM;dt.prototype.visitDuration=pm;dt.prototype.visitDurationSecond=pm;dt.prototype.visitDurationMillisecond=pm;dt.prototype.visitDurationMicrosecond=pm;dt.prototype.visitDurationNanosecond=pm;dt.prototype.visitFixedSizeList=x_e;dt.prototype.visitMap=M_e;const vc=new dt;function Ek(e,t){return vc.compareSchemas(e,t)}function CB(e,t){return A_e(e,t.map(n=>n.data.concat()))}function A_e(e,t){const n=[...e.fields],i=[],s={numBatches:t.reduce((h,p)=>Math.max(h,p.length),0)};let a=0,c=0,d=-1;const f=t.length;let u,r=[];for(;s.numBatches-- >0;){for(c=Number.POSITIVE_INFINITY,d=-1;++d<f;)r[d]=u=t[d].shift(),c=Math.min(c,u?u.length:c);Number.isFinite(c)&&(r=O_e(n,c,r,t,s),c>0&&(i[a++]=xt({type:new Ji(n),length:c,nullCount:0,children:r.slice()})))}return[e=e.assign(n),i.map(h=>new gs(e,h))]}function O_e(e,t,n,i,s){var a;const c=(t+63&-64)>>3;for(let d=-1,f=i.length;++d<f;){const u=n[d],r=u==null?void 0:u.length;if(r>=t)r===t?n[d]=u:(n[d]=u.slice(0,t),s.numBatches=Math.max(s.numBatches,i[d].unshift(u.slice(t,r-t))));else{const h=e[d];e[d]=h.clone({nullable:!0}),n[d]=(a=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&a!==void 0?a:xt({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(c)})}}return n}var qV;class Xi{constructor(...t){var n,i;if(t.length===0)return this.batches=[],this.schema=new Qt([]),this._offsets=[0],this;let s,a;t[0]instanceof Qt&&(s=t.shift()),t.at(-1)instanceof Uint32Array&&(a=t.pop());const c=f=>{if(f){if(f instanceof gs)return[f];if(f instanceof Xi)return f.batches;if(f instanceof en){if(f.type instanceof Ji)return[new gs(new Qt(f.type.children),f)]}else{if(Array.isArray(f))return f.flatMap(u=>c(u));if(typeof f[Symbol.iterator]=="function")return[...f].flatMap(u=>c(u));if(typeof f=="object"){const u=Object.keys(f),r=u.map(_=>new Jt([f[_]])),h=s??new Qt(u.map((_,l)=>new Nn(String(_),r[l].type,r[l].nullable))),[,p]=CB(h,r);return p.length===0?[new gs(f)]:p}}}return[]},d=t.flatMap(f=>c(f));if(s=(i=s??((n=d[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new Qt([]),!(s instanceof Qt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const f of d){if(!(f instanceof gs))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Ek(s,f.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=s,this.batches=d,this._offsets=a??NV(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=OV(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}at(t){return this.get(NM(t,this.numRows))}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?PM.visit(new Jt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,i=this.data.concat(t.flatMap(({data:s})=>s));return new Xi(n,i.map(s=>new gs(n,s)))}slice(t,n){const i=this.schema;[t,n]=MV({length:this.numRows},t,n);const s=RV(this.data,this._offsets,t,n);return new Xi(i,s.map(a=>new gs(i,a)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(i=>i.children[t]);if(n.length===0){const{type:i}=this.schema.fields[t],s=xt({type:i,length:0,nullCount:0});n.push(s._changeLengthAndBackfillNullBitmap(this.numRows))}return new Jt(n)}return null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===t),n)}setChildAt(t,n){let i=this.schema,s=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Jt([xt({type:new bc,length:this.numRows})]));const a=i.fields.slice(),c=a[t].clone({type:n.type}),d=this.schema.fields.map((f,u)=>this.getChildAt(u));[a[t],d[t]]=[c,n],[i,s]=CB(i,d)}return new Xi(i,s)}select(t){const n=this.schema.fields.reduce((i,s,a)=>i.set(s.name,a),new Map);return this.selectAt(t.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(t){const n=this.schema.selectAt(t),i=this.batches.map(s=>s.selectAt(t));return new Xi(n,i)}assign(t){const n=this.schema.fields,[i,s]=t.schema.fields.reduce((d,f,u)=>{const[r,h]=d,p=n.findIndex(_=>_.name===f.name);return~p?h[p]=u:r.push(u),d},[[],[]]),a=this.schema.assign(t.schema),c=[...n.map((d,f)=>[f,s[f]]).map(([d,f])=>f===void 0?this.getChildAt(d):t.getChildAt(f)),...i.map(d=>t.getChildAt(d))].filter(Boolean);return new Xi(...CB(a,c))}}qV=Symbol.toStringTag;Xi[qV]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=vv(LM),e.get=vv(Ss.getVisitFn(ne.Struct)),e.set=CV(Sr.getVisitFn(ne.Struct)),e.indexOf=LV(Ev.getVisitFn(ne.Struct)),"Table"))(Xi.prototype);var VV;let gs=class Ny{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Qt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=xt({nullCount:0,type:new Ji(this.schema.fields),children:this.schema.fields.map(n=>xt({type:n.type,nullCount:0}))})]=t,!(this.data instanceof en))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=M3(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:i,children:s,length:a}=Object.keys(n).reduce((f,u,r)=>(f.children[r]=n[u],f.length=Math.max(f.length,n[u].length),f.fields[r]=Nn.new({name:u,type:n[u].type,nullable:!0}),f),{length:0,fields:new Array,children:new Array}),c=new Qt(i),d=xt({type:new Ji(i),length:a,children:s,nullCount:0});[this.schema,this.data]=M3(c,d.children,a);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=GV(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ss.visit(this.data,t)}at(t){return this.get(NM(t,this.numRows))}set(t,n){return Sr.visit(this.data,t,n)}indexOf(t,n){return Ev.visit(this.data,t,n)}[Symbol.iterator](){return PM.visit(new Jt([this.data]))}toArray(){return[...this]}concat(...t){return new Xi(this.schema,[this,...t])}slice(t,n){const[i]=new Jt([this.data]).slice(t,n).data;return new Ny(this.schema,i)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Jt([this.data.children[t]]):null}setChild(t,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(s=>s.name===t),n)}setChildAt(t,n){let i=this.schema,s=this.data;if(t>-1&&t<this.numCols){n||(n=new Jt([xt({type:new bc,length:this.numRows})]));const a=i.fields.slice(),c=s.children.slice(),d=a[t].clone({type:n.type});[a[t],c[t]]=[d,n.data[0]],i=new Qt(a,new Map(this.schema.metadata)),s=xt({type:new Ji(a),children:c})}return new Ny(i,s)}select(t){const n=this.schema.select(t),i=new Ji(n.fields),s=[];for(const a of t){const c=this.schema.fields.findIndex(d=>d.name===a);~c&&(s[c]=this.data.children[c])}return new Ny(n,xt({type:i,length:this.numRows,children:s}))}selectAt(t){const n=this.schema.selectAt(t),i=t.map(a=>this.data.children[a]).filter(Boolean),s=xt({type:new Ji(n.fields),length:this.numRows,children:i});return new Ny(n,s)}};VV=Symbol.toStringTag;gs[VV]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(gs.prototype);function M3(e,t,n=t.reduce((i,s)=>Math.max(i,s.length),0)){var i;const s=[...e.fields],a=[...t],c=(n+63&-64)>>3;for(const[d,f]of e.fields.entries()){const u=t[d];(!u||u.length!==n)&&(s[d]=f.clone({nullable:!0}),a[d]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:xt({type:f.type,length:n,nullCount:n,nullBitmap:new Uint8Array(c)}))}return[e.assign(s),xt({type:new Ji(s),length:n,children:a})]}function GV(e,t,n=new Map){var i,s;if(((i=e==null?void 0:e.length)!==null&&i!==void 0?i:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let a=-1,c=e.length;++a<c;){const{type:d}=e[a],f=t[a];for(const u of[f,...((s=f==null?void 0:f.dictionary)===null||s===void 0?void 0:s.data)||[]])GV(d.children,u==null?void 0:u.children,n);if(Xe.isDictionary(d)){const{id:u}=d;if(!n.has(u))f!=null&&f.dictionary&&n.set(u,f.dictionary);else if(n.get(u)!==f.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class qM extends gs{constructor(t){const n=t.fields.map(s=>xt({type:s.type})),i=xt({type:new Ji(t.fields),nullCount:0,children:n});super(t,i)}}let Ll=class Fa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Fa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Zt),(n||new Fa).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jn.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Vt.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new Xn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,jn.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Vt.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)t.addOffset(n[i]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,i,s,a,c){return Fa.startMessage(t),Fa.addVersion(t,n),Fa.addHeaderType(t,i),Fa.addHeader(t,s),Fa.addBodyLength(t,a),Fa.addCustomMetadata(t,c),Fa.endMessage(t)}};class N_e extends kt{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return T3.startNull(n),T3.endNull(n)}visitInt(t,n){return Vs.startInt(n),Vs.addBitWidth(n,t.bitWidth),Vs.addIsSigned(n,t.isSigned),Vs.endInt(n)}visitFloat(t,n){return $a.startFloatingPoint(n),$a.addPrecision(n,t.precision),$a.endFloatingPoint(n)}visitBinary(t,n){return y3.startBinary(n),y3.endBinary(n)}visitLargeBinary(t,n){return m3.startLargeBinary(n),m3.endLargeBinary(n)}visitBool(t,n){return g3.startBool(n),g3.endBool(n)}visitUtf8(t,n){return v3.startUtf8(n),v3.endUtf8(n)}visitLargeUtf8(t,n){return w3.startLargeUtf8(n),w3.endLargeUtf8(n)}visitDecimal(t,n){return gu.startDecimal(n),gu.addScale(n,t.scale),gu.addPrecision(n,t.precision),gu.addBitWidth(n,t.bitWidth),gu.endDecimal(n)}visitDate(t,n){return v0.startDate(n),v0.addUnit(n,t.unit),v0.endDate(n)}visitTime(t,n){return Ay.startTime(n),Ay.addUnit(n,t.unit),Ay.addBitWidth(n,t.bitWidth),Ay.endTime(n)}visitTimestamp(t,n){const i=t.timezone&&n.createString(t.timezone)||void 0;return dr.startTimestamp(n),dr.addUnit(n,t.unit),i!==void 0&&dr.addTimezone(n,i),dr.endTimestamp(n)}visitInterval(t,n){return za.startInterval(n),za.addUnit(n,t.unit),za.endInterval(n)}visitDuration(t,n){return E0.startDuration(n),E0.addUnit(n,t.unit),E0.endDuration(n)}visitList(t,n){return b3.startList(n),b3.endList(n)}visitStruct(t,n){return qd.startStruct_(n),qd.endStruct_(n)}visitUnion(t,n){Ad.startTypeIdsVector(n,t.typeIds.length);const i=Ad.createTypeIdsVector(n,t.typeIds);return Ad.startUnion(n),Ad.addMode(n,t.mode),Ad.addTypeIds(n,i),Ad.endUnion(n)}visitDictionary(t,n){const i=this.visit(t.indices,n);return Jo.startDictionaryEncoding(n),Jo.addId(n,BigInt(t.id)),Jo.addIsOrdered(n,t.isOrdered),i!==void 0&&Jo.addIndexType(n,i),Jo.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return S0.startFixedSizeBinary(n),S0.addByteWidth(n,t.byteWidth),S0.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return B0.startFixedSizeList(n),B0.addListSize(n,t.listSize),B0.endFixedSizeList(n)}visitMap(t,n){return I0.startMap(n),I0.addKeysSorted(n,t.keysSorted),I0.endMap(n)}}const LB=new N_e;function R_e(e,t=new Map){return new Qt(L_e(e,t),x0(e.metadata),t)}function HV(e){return new Qs(e.count,WV(e.columns),YV(e.columns))}function C_e(e){return new ro(HV(e.data),e.id,e.isDelta)}function L_e(e,t){return(e.fields||[]).filter(Boolean).map(n=>Nn.fromJSON(n,t))}function A3(e,t){return(e.children||[]).filter(Boolean).map(n=>Nn.fromJSON(n,t))}function WV(e){return(e||[]).reduce((t,n)=>[...t,new Ec(n.count,P_e(n.VALIDITY)),...WV(n.children)],[])}function YV(e,t=[]){for(let n=-1,i=(e||[]).length;++n<i;){const s=e[n];s.VALIDITY&&t.push(new Va(t.length,s.VALIDITY.length)),s.TYPE_ID&&t.push(new Va(t.length,s.TYPE_ID.length)),s.OFFSET&&t.push(new Va(t.length,s.OFFSET.length)),s.DATA&&t.push(new Va(t.length,s.DATA.length)),t=YV(s.children,t)}return t}function P_e(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function D_e(e,t){let n,i,s,a,c,d;return!t||!(a=e.dictionary)?(c=N3(e,A3(e,t)),s=new Nn(e.name,c,e.nullable,x0(e.metadata))):t.has(n=a.id)?(i=(i=a.indexType)?O3(i):new Ig,d=new ph(t.get(n),i,n,a.isOrdered),s=new Nn(e.name,d,e.nullable,x0(e.metadata))):(i=(i=a.indexType)?O3(i):new Ig,t.set(n,c=N3(e,A3(e,t))),d=new ph(c,i,n,a.isOrdered),s=new Nn(e.name,d,e.nullable,x0(e.metadata))),s||null}function x0(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function O3(e){return new cf(e.isSigned,e.bitWidth)}function N3(e,t){const n=e.type.name;switch(n){case"NONE":return new bc;case"null":return new bc;case"binary":return new sv;case"largebinary":return new rv;case"utf8":return new av;case"largeutf8":return new ov;case"bool":return new lv;case"list":return new pv((t||[])[0]);case"struct":return new Ji(t||[]);case"struct_":return new Ji(t||[])}switch(n){case"int":{const i=e.type;return new cf(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=e.type;return new iv(Oi[i.precision])}case"decimal":{const i=e.type;return new cv(i.scale,i.precision,i.bitWidth)}case"date":{const i=e.type;return new dv(Er[i.unit])}case"time":{const i=e.type;return new fv(_t[i.unit],i.bitWidth)}case"timestamp":{const i=e.type;return new uv(_t[i.unit],i.timezone)}case"interval":{const i=e.type;return new hv(so[i.unit])}case"duration":{const i=e.type;return new _v(_t[i.unit])}case"union":{const i=e.type,[s,...a]=(i.mode+"").toLowerCase(),c=s.toUpperCase()+a.join("");return new yv(Pi[c],i.typeIds||[],t||[])}case"fixedsizebinary":{const i=e.type;return new gv(i.byteWidth)}case"fixedsizelist":{const i=e.type;return new mv(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new wv((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var U_e=d9,j_e=hh;class Qi{static fromJSON(t,n){const i=new Qi(0,jn.V5,n);return i._createHeader=$_e(t,n),i}static decode(t){t=new j_e(Ct(t));const n=Ll.getRootAsMessage(t),i=n.bodyLength(),s=n.version(),a=n.headerType(),c=new Qi(i,s,a);return c._createHeader=z_e(n,a),c}static encode(t){const n=new U_e;let i=-1;return t.isSchema()?i=Qt.encode(n,t.header()):t.isRecordBatch()?i=Qs.encode(n,t.header()):t.isDictionaryBatch()&&(i=ro.encode(n,t.header())),Ll.startMessage(n),Ll.addVersion(n,jn.V5),Ll.addHeader(n,i),Ll.addHeaderType(n,t.headerType),Ll.addBodyLength(n,BigInt(t.bodyLength)),Ll.finishMessageBuffer(n,Ll.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Qt)return new Qi(0,jn.V5,Vt.Schema,t);if(t instanceof Qs)return new Qi(n,jn.V5,Vt.RecordBatch,t);if(t instanceof ro)return new Qi(n,jn.V5,Vt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Vt.Schema}isRecordBatch(){return this.headerType===Vt.RecordBatch}isDictionaryBatch(){return this.headerType===Vt.DictionaryBatch}constructor(t,n,i,s){this._version=n,this._headerType=i,this.body=new Uint8Array(0),s&&(this._createHeader=()=>s),this._bodyLength=fn(t)}}class Qs{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,i){this._nodes=n,this._buffers=i,this._length=fn(t)}}class ro{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,i=!1){this._data=t,this._isDelta=i,this._id=fn(n)}}class Va{constructor(t,n){this.offset=fn(t),this.length=fn(n)}}class Ec{constructor(t,n){this.length=fn(t),this.nullCount=fn(n)}}function $_e(e,t){return()=>{switch(t){case Vt.Schema:return Qt.fromJSON(e);case Vt.RecordBatch:return Qs.fromJSON(e);case Vt.DictionaryBatch:return ro.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Vt[t]}, type: ${t} }`)}}function z_e(e,t){return()=>{switch(t){case Vt.Schema:return Qt.decode(e.header(new Ma),new Map,e.version());case Vt.RecordBatch:return Qs.decode(e.header(new $o),e.version());case Vt.DictionaryBatch:return ro.decode(e.header(new pu),e.version())}throw new Error(`Unrecognized Message type: { name: ${Vt[t]}, type: ${t} }`)}}Nn.encode=Z_e;Nn.decode=J_e;Nn.fromJSON=D_e;Qt.encode=Q_e;Qt.decode=q_e;Qt.fromJSON=R_e;Qs.encode=epe;Qs.decode=V_e;Qs.fromJSON=HV;ro.encode=tpe;ro.decode=G_e;ro.fromJSON=C_e;Ec.encode=npe;Ec.decode=W_e;Va.encode=ipe;Va.decode=H_e;function q_e(e,t=new Map,n=jn.V5){const i=K_e(e,t);return new Qt(i,M0(e),t,n)}function V_e(e,t=jn.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Qs(e.length(),Y_e(e),X_e(e,t))}function G_e(e,t=jn.V5){return new ro(Qs.decode(e.data(),t),e.id(),e.isDelta())}function H_e(e){return new Va(e.offset(),e.length())}function W_e(e){return new Ec(e.length(),e.nullCount())}function Y_e(e){const t=[];for(let n,i=-1,s=-1,a=e.nodesLength();++i<a;)(n=e.nodes(i))&&(t[++s]=Ec.decode(n));return t}function X_e(e,t){const n=[];for(let i,s=-1,a=-1,c=e.buffersLength();++s<c;)(i=e.buffers(s))&&(t<jn.V4&&(i.bb_pos+=8*(s+1)),n[++a]=Va.decode(i));return n}function K_e(e,t){const n=[];for(let i,s=-1,a=-1,c=e.fieldsLength();++s<c;)(i=e.fields(s))&&(n[++a]=Nn.decode(i,t));return n}function R3(e,t){const n=[];for(let i,s=-1,a=-1,c=e.childrenLength();++s<c;)(i=e.children(s))&&(n[++a]=Nn.decode(i,t));return n}function J_e(e,t){let n,i,s,a,c,d;return!t||!(d=e.dictionary())?(s=L3(e,R3(e,t)),i=new Nn(e.name(),s,e.nullable(),M0(e))):t.has(n=fn(d.id()))?(a=(a=d.indexType())?C3(a):new Ig,c=new ph(t.get(n),a,n,d.isOrdered()),i=new Nn(e.name(),c,e.nullable(),M0(e))):(a=(a=d.indexType())?C3(a):new Ig,t.set(n,s=L3(e,R3(e,t))),c=new ph(s,a,n,d.isOrdered()),i=new Nn(e.name(),c,e.nullable(),M0(e))),i||null}function M0(e){const t=new Map;if(e)for(let n,i,s=-1,a=Math.trunc(e.customMetadataLength());++s<a;)(n=e.customMetadata(s))&&(i=n.key())!=null&&t.set(i,n.value());return t}function C3(e){return new cf(e.isSigned(),e.bitWidth())}function L3(e,t){const n=e.typeType();switch(n){case hn.NONE:return new bc;case hn.Null:return new bc;case hn.Binary:return new sv;case hn.LargeBinary:return new rv;case hn.Utf8:return new av;case hn.LargeUtf8:return new ov;case hn.Bool:return new lv;case hn.List:return new pv((t||[])[0]);case hn.Struct_:return new Ji(t||[])}switch(n){case hn.Int:{const i=e.type(new Vs);return new cf(i.isSigned(),i.bitWidth())}case hn.FloatingPoint:{const i=e.type(new $a);return new iv(i.precision())}case hn.Decimal:{const i=e.type(new gu);return new cv(i.scale(),i.precision(),i.bitWidth())}case hn.Date:{const i=e.type(new v0);return new dv(i.unit())}case hn.Time:{const i=e.type(new Ay);return new fv(i.unit(),i.bitWidth())}case hn.Timestamp:{const i=e.type(new dr);return new uv(i.unit(),i.timezone())}case hn.Interval:{const i=e.type(new za);return new hv(i.unit())}case hn.Duration:{const i=e.type(new E0);return new _v(i.unit())}case hn.Union:{const i=e.type(new Ad);return new yv(i.mode(),i.typeIdsArray()||[],t||[])}case hn.FixedSizeBinary:{const i=e.type(new S0);return new gv(i.byteWidth())}case hn.FixedSizeList:{const i=e.type(new B0);return new mv(i.listSize(),(t||[])[0])}case hn.Map:{const i=e.type(new I0);return new wv((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${hn[n]}" (${n})`)}function Q_e(e,t){const n=t.fields.map(a=>Nn.encode(e,a));Ma.startFieldsVector(e,n.length);const i=Ma.createFieldsVector(e,n),s=t.metadata&&t.metadata.size>0?Ma.createCustomMetadataVector(e,[...t.metadata].map(([a,c])=>{const d=e.createString(`${a}`),f=e.createString(`${c}`);return Xn.startKeyValue(e),Xn.addKey(e,d),Xn.addValue(e,f),Xn.endKeyValue(e)})):-1;return Ma.startSchema(e),Ma.addFields(e,i),Ma.addEndianness(e,spe?_h.Little:_h.Big),s!==-1&&Ma.addCustomMetadata(e,s),Ma.endSchema(e)}function Z_e(e,t){let n=-1,i=-1,s=-1;const a=t.type;let c=t.typeId;Xe.isDictionary(a)?(c=a.dictionary.typeId,s=LB.visit(a,e),i=LB.visit(a.dictionary,e)):i=LB.visit(a,e);const d=(a.children||[]).map(r=>Nn.encode(e,r)),f=ar.createChildrenVector(e,d),u=t.metadata&&t.metadata.size>0?ar.createCustomMetadataVector(e,[...t.metadata].map(([r,h])=>{const p=e.createString(`${r}`),_=e.createString(`${h}`);return Xn.startKeyValue(e),Xn.addKey(e,p),Xn.addValue(e,_),Xn.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),ar.startField(e),ar.addType(e,i),ar.addTypeType(e,c),ar.addChildren(e,f),ar.addNullable(e,!!t.nullable),n!==-1&&ar.addName(e,n),s!==-1&&ar.addDictionary(e,s),u!==-1&&ar.addCustomMetadata(e,u),ar.endField(e)}function epe(e,t){const n=t.nodes||[],i=t.buffers||[];$o.startNodesVector(e,n.length);for(const c of n.slice().reverse())Ec.encode(e,c);const s=e.endVector();$o.startBuffersVector(e,i.length);for(const c of i.slice().reverse())Va.encode(e,c);const a=e.endVector();return $o.startRecordBatch(e),$o.addLength(e,BigInt(t.length)),$o.addNodes(e,s),$o.addBuffers(e,a),$o.endRecordBatch(e)}function tpe(e,t){const n=Qs.encode(e,t.data);return pu.startDictionaryBatch(e),pu.addId(e,BigInt(t.id)),pu.addIsDelta(e,t.isDelta),pu.addData(e,n),pu.endDictionaryBatch(e)}function npe(e,t){return h9.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function ipe(e,t){return u9.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const spe=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),VM=e=>`Expected ${Vt[e]} Message in stream, but was null or length 0.`,GM=e=>`Header pointer of flatbuffer-encoded ${Vt[e]} Message is null or length 0.`,XV=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,KV=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class JV{constructor(t){this.source=t instanceof Bv?t:new Bv(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?In:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(VM(t));return n.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const n=Ct(this.source.read(t));if(n.byteLength<t)throw new Error(KV(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(t=!1){const n=Vt.Schema,i=this.readMessage(n),s=i==null?void 0:i.header();if(t&&!s)throw new Error(GM(n));return s}readMetadataLength(){const t=this.source.read(rE),n=t&&new hh(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(t){const n=this.source.read(t);if(!n)return In;if(n.byteLength<t)throw new Error(XV(t,n.byteLength));return{done:!1,value:Qi.decode(n)}}}class rpe{constructor(t,n){this.source=t instanceof yh?t:s9(t)?new Iv(t,n):new yh(t)}[Symbol.asyncIterator](){return this}next(){return wt(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?In:t})}throw(t){return wt(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return wt(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return wt(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(VM(t));return n.value})}readMessageBody(t){return wt(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const n=Ct(yield this.source.read(t));if(n.byteLength<t)throw new Error(KV(t,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(){return wt(this,arguments,void 0,function*(t=!1){const n=Vt.Schema,i=yield this.readMessage(n),s=i==null?void 0:i.header();if(t&&!s)throw new Error(GM(n));return s})}readMetadataLength(){return wt(this,void 0,void 0,function*(){const t=yield this.source.read(rE),n=t&&new hh(t),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(t){return wt(this,void 0,void 0,function*(){const n=yield this.source.read(t);if(!n)return In;if(n.byteLength<t)throw new Error(XV(t,n.byteLength));return{done:!1,value:Qi.decode(n)}})}}class ape extends JV{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof k3?t:new k3(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Qi.fromJSON(t.schema,Vt.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const n=t.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Qi.fromJSON(n,Vt.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const n=t.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Qi.fromJSON(n,Vt.RecordBatch)}}return this._body=[],In}readMessageBody(t){return n(this._body);function n(i){return(i||[]).reduce((s,a)=>[...s,...a.VALIDITY&&[a.VALIDITY]||[],...a.TYPE_ID&&[a.TYPE_ID]||[],...a.OFFSET&&[a.OFFSET]||[],...a.DATA&&[a.DATA]||[],...n(a.children)],[])}}readMessage(t){let n;if((n=this.next()).done)return null;if(t!=null&&n.value.headerType!==t)throw new Error(VM(t));return n.value}readSchema(){const t=Vt.Schema,n=this.readMessage(t),i=n==null?void 0:n.header();if(!n||!i)throw new Error(GM(t));return i}}const rE=4,Sk="ARROW1",kg=new Uint8Array(Sk.length);for(let e=0;e<Sk.length;e+=1)kg[e]=Sk.codePointAt(e);function HM(e,t=0){for(let n=-1,i=kg.length;++n<i;)if(kg[n]!==e[t+n])return!1;return!0}const ym=kg.length,QV=ym+rE,ope=ym*2+rE;class mr extends DM{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const n=this._impl.open(t);return lf(n)?n.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return lr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return lr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof mr?t:hk(t)?fpe(t):s9(t)?_pe(t):lf(t)?wt(this,void 0,void 0,function*(){return yield mr.from(yield t)}):r9(t)||FM(t)||a9(t)||s_(t)?hpe(new yh(t)):upe(new Bv(t))}static readAll(t){return t instanceof mr?t.isSync()?P3(t):D3(t):hk(t)||ArrayBuffer.isView(t)||um(t)||i9(t)?P3(t):D3(t)}}class Fv extends mr{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return hr(this,arguments,function*(){yield Et(yield*ju(al(this[Symbol.iterator]())))})}}class kv extends mr{constructor(t){super(t),this._impl=t}readAll(){return wt(this,void 0,void 0,function*(){var t,n,i,s;const a=new Array;try{for(var c=!0,d=al(this),f;f=yield d.next(),t=f.done,!t;c=!0){s=f.value,c=!1;const u=s;a.push(u)}}catch(u){n={error:u}}finally{try{!c&&!t&&(i=d.return)&&(yield i.call(d))}finally{if(n)throw n.error}}return a})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class ZV extends Fv{constructor(t){super(t),this._impl=t}}class lpe extends kv{constructor(t){super(t),this._impl=t}}class eG{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,n){const i=this._loadVectors(t,n,this.schema.fields),s=xt({type:new Ji(this.schema.fields),length:t.length,children:i});return new gs(this.schema,s)}_loadDictionaryBatch(t,n){const{id:i,isDelta:s}=t,{dictionaries:a,schema:c}=this,d=a.get(i),f=c.dictionaries.get(i),u=this._loadVectors(t.data,n,[f]);return(d&&s?d.concat(new Jt(u)):new Jt(u)).memoize()}_loadVectors(t,n,i){return new zV(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(i)}}class xv extends eG{constructor(t,n){super(n),this._reader=hk(t)?new ape(this._handle=t):new JV(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=nG(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):In}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):In}next(){if(this.closed)return In;let t;const{_reader:n}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),s=n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),s=n.readMessageBody(t.bodyLength),a=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new qM(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Mv extends eG{constructor(t,n){super(n),this._reader=new rpe(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return wt(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return wt(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=nG(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return wt(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):In})}return(t){return wt(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):In})}next(){return wt(this,void 0,void 0,function*(){if(this.closed)return In;let t;const{_reader:n}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const i=t.header(),s=yield n.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(i,s)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const i=t.header(),s=yield n.readMessageBody(t.bodyLength),a=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new qM(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return wt(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class tG extends xv{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,n){super(t instanceof x3?t:new x3(t),n)}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(Vt.RecordBatch);if(s!=null&&s.isRecordBatch()){const a=s.header(),c=this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(a,c)}}return null}_readDictionaryBatch(t){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&this._handle.seek(i.offset)){const s=this._reader.readMessage(Vt.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const a=s.header(),c=this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(a,c);this.dictionaries.set(a.id,d)}}}_readFooter(){const{_handle:t}=this,n=t.size-QV,i=t.readInt32(n),s=t.readAt(n-i,i);return Fg.decode(s)}_readNextMessageAndValidate(t){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(t)}return null}}class cpe extends Mv{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(t,...n){const i=typeof n[0]!="number"?n.shift():void 0,s=n[0]instanceof Map?n.shift():void 0;super(t instanceof Iv?t:new Iv(t,i),s)}isFile(){return!0}isAsync(){return!0}open(t){const n=Object.create(null,{open:{get:()=>super.open}});return wt(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,t)})}readRecordBatch(t){return wt(this,void 0,void 0,function*(){var n;if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(t);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(Vt.RecordBatch);if(s!=null&&s.isRecordBatch()){const a=s.header(),c=yield this._reader.readMessageBody(s.bodyLength);return this._loadRecordBatch(a,c)}}return null})}_readDictionaryBatch(t){return wt(this,void 0,void 0,function*(){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(t);if(i&&(yield this._handle.seek(i.offset))){const s=yield this._reader.readMessage(Vt.DictionaryBatch);if(s!=null&&s.isDictionaryBatch()){const a=s.header(),c=yield this._reader.readMessageBody(s.bodyLength),d=this._loadDictionaryBatch(a,c);this.dictionaries.set(a.id,d)}}})}_readFooter(){return wt(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const n=t.size-QV,i=yield t.readInt32(n),s=yield t.readAt(n-i,i);return Fg.decode(s)})}_readNextMessageAndValidate(t){return wt(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(t)}return null})}}class dpe extends xv{constructor(t,n){super(t,n)}_loadVectors(t,n,i){return new E_e(n,t.nodes,t.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(i)}}function nG(e,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:e.autoDestroy}function*P3(e){const t=mr.from(e);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function D3(e){return hr(this,arguments,function*(){const n=yield Et(mr.from(e));try{if(!(yield Et(n.open({autoDestroy:!1}))).closed)do yield yield Et(n);while(!(yield Et(n.reset().open())).closed)}finally{yield Et(n.cancel())}})}function fpe(e){return new Fv(new dpe(e))}function upe(e){const t=e.peek(ym+7&-8);return t&&t.byteLength>=4?HM(t)?new ZV(new tG(e.read())):new Fv(new xv(e)):new Fv(new xv(function*(){}()))}function hpe(e){return wt(this,void 0,void 0,function*(){const t=yield e.peek(ym+7&-8);return t&&t.byteLength>=4?HM(t)?new ZV(new tG(yield e.read())):new kv(new Mv(e)):new kv(new Mv(function(){return hr(this,arguments,function*(){})}()))})}function _pe(e){return wt(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new Iv(e,t);return t>=ope&&HM(yield n.readAt(0,ym+7&-8))?new lpe(new cpe(n)):new kv(new Mv(n))})}class Fn extends kt{static assemble(...t){const n=s=>s.flatMap(a=>Array.isArray(a)?n(a):a instanceof gs?a.data.children:a.data),i=new Fn;return i.visitMany(n(t)),i}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Jt)return this.visitMany(t.data),this;const{type:n}=t;if(!Xe.isDictionary(n)){const{length:i}=t;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Xe.isUnion(n))this.nodes.push(new Ec(i,0));else{const{nullCount:s}=t;Xe.isNull(n)||Zr.call(this,s<=0?new Uint8Array(0):bv(t.offset,i,t.nullBitmap)),this.nodes.push(new Ec(i,s))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Zr(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Va(this._byteLength,t)),this._byteLength+=t,this}function ppe(e){var t;const{type:n,length:i,typeIds:s,valueOffsets:a}=e;if(Zr.call(this,s),n.mode===Pi.Sparse)return Bk.call(this,e);if(n.mode===Pi.Dense){if(e.offset<=0)return Zr.call(this,a),Bk.call(this,e);{const c=new Int32Array(i),d=Object.create(null),f=Object.create(null);for(let u,r,h=-1;++h<i;)(u=s[h])!==void 0&&((r=d[u])===void 0&&(r=d[u]=a[h]),c[h]=a[h]-r,f[u]=((t=f[u])!==null&&t!==void 0?t:0)+1);Zr.call(this,c),this.visitMany(e.children.map((u,r)=>{const h=n.typeIds[r],p=d[h],_=f[h];return u.slice(p,Math.min(i,_))}))}}return this}function ype(e){let t;return e.nullCount>=e.length?Zr.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Zr.call(this,bv(e.offset,e.length,t)):Zr.call(this,Tv(e.values))}function Sl(e){return Zr.call(this,e.values.subarray(0,e.length*e.stride))}function aE(e){const{length:t,values:n,valueOffsets:i}=e,s=fn(i[0]),a=fn(i[t]),c=Math.min(a-s,n.byteLength-s);return Zr.call(this,l9(-s,t+1,i)),Zr.call(this,n.subarray(s,s+c)),this}function WM(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:i,[t]:s}=n;return Zr.call(this,l9(-i,t+1,n)),this.visit(e.children[0].slice(i,s-i))}return this.visit(e.children[0])}function Bk(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Fn.prototype.visitBool=ype;Fn.prototype.visitInt=Sl;Fn.prototype.visitFloat=Sl;Fn.prototype.visitUtf8=aE;Fn.prototype.visitLargeUtf8=aE;Fn.prototype.visitBinary=aE;Fn.prototype.visitLargeBinary=aE;Fn.prototype.visitFixedSizeBinary=Sl;Fn.prototype.visitDate=Sl;Fn.prototype.visitTimestamp=Sl;Fn.prototype.visitTime=Sl;Fn.prototype.visitDecimal=Sl;Fn.prototype.visitList=WM;Fn.prototype.visitStruct=Bk;Fn.prototype.visitUnion=ppe;Fn.prototype.visitInterval=Sl;Fn.prototype.visitDuration=Sl;Fn.prototype.visitFixedSizeList=WM;Fn.prototype.visitMap=WM;class iG extends DM{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new k0,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,Es(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return lf(t)?t.then(n=>this.writeAll(n)):s_(t)?JM(this,t):KM(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof k0?this._sink=t:(this._sink=new k0,t&&Wue(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Yue(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!n||!Ek(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Xi&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof gs&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Ek(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof gs?t instanceof qM||this._writeRecordBatch(t):t instanceof Xi?this.writeAll(t.batches):um(t)&&this.writeAll(t)}_writeMessage(t,n=8){const i=n-1,s=Qi.encode(t),a=s.byteLength,c=this._writeLegacyIpcFormat?4:8,d=a+c+i&~i,f=d-a-c;return t.headerType===Vt.RecordBatch?this._recordBatchBlocks.push(new Tc(d,t.bodyLength,this._position)):t.headerType===Vt.DictionaryBatch&&this._dictionaryBlocks.push(new Tc(d,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(d-c)),a>0&&this._write(s),this._writePadding(f)}_write(t){if(this._started){const n=Ct(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Qi.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(kg)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:i,bufferRegions:s,buffers:a}=Fn.assemble(t),c=new Qs(t.numRows,i,s),d=Qi.from(c,n);return this._writeDictionaries(t)._writeMessage(d)._writeBodyBuffers(a)}_writeDictionaryBatch(t,n,i=!1){const{byteLength:s,nodes:a,bufferRegions:c,buffers:d}=Fn.assemble(new Jt([t])),f=new Qs(t.length,a,c),u=new ro(f,n,i),r=Qi.from(u,s);return this._writeMessage(r)._writeBodyBuffers(d)}_writeBodyBuffers(t){let n,i,s;for(let a=-1,c=t.length;++a<c;)(n=t[a])&&(i=n.byteLength)>0&&(this._write(n),(s=(i+7&-8)-i)>0&&this._writePadding(s));return this}_writeDictionaries(t){var n,i;for(const[s,a]of t.dictionaries){const c=(n=a==null?void 0:a.data)!==null&&n!==void 0?n:[],d=this._seenDictionaries.get(s),f=(i=this._dictionaryDeltaOffsets.get(s))!==null&&i!==void 0?i:0;if(!d||d.data[0]!==c[0])for(const[u,r]of c.entries())this._writeDictionaryBatch(r,s,u>0);else if(f<c.length)for(const u of c.slice(f))this._writeDictionaryBatch(u,s,!0);this._seenDictionaries.set(s,a),this._dictionaryDeltaOffsets.set(s,c.length)}return this}}class YM extends iG{static writeAll(t,n){const i=new YM(n);return lf(t)?t.then(s=>i.writeAll(s)):s_(t)?JM(i,t):KM(i,t)}}class XM extends iG{static writeAll(t){const n=new XM;return lf(t)?t.then(i=>n.writeAll(i)):s_(t)?JM(n,t):KM(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(t,n,i=!1){if(!i&&this._seenDictionaries.has(n))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(t,n,i)}_writeFooter(t){const n=Fg.encode(new Fg(t,jn.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function KM(e,t){let n=t;t instanceof Xi&&(n=t.batches,e.reset(void 0,t.schema));for(const i of n)e.write(i);return e.finish()}function JM(e,t){return wt(this,void 0,void 0,function*(){var n,i,s,a,c,d,f;try{for(n=!0,i=al(t);s=yield i.next(),a=s.done,!a;n=!0){f=s.value,n=!1;const u=f;e.write(u)}}catch(u){c={error:u}}finally{try{!n&&!a&&(d=i.return)&&(yield d.call(i))}finally{if(c)throw c.error}}return e.finish()})}function gpe(e,t="stream"){return(t==="stream"?YM:XM).writeAll(e).toUint8Array(!0)}var mpe=Object.create,sG=Object.defineProperty,wpe=Object.getOwnPropertyDescriptor,bpe=Object.getOwnPropertyNames,Tpe=Object.getPrototypeOf,vpe=Object.prototype.hasOwnProperty,Epe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Spe=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of bpe(t))!vpe.call(e,s)&&s!==n&&sG(e,s,{get:()=>t[s],enumerable:!(i=wpe(t,s))||i.enumerable});return e},Bpe=(e,t,n)=>(n=e!=null?mpe(Tpe(e)):{},Spe(!e||!e.__esModule?sG(n,"default",{value:e,enumerable:!0}):n,e)),Ipe=Epe((e,t)=>{t.exports=Worker}),Fpe=(e=>(e[e.UNDEFINED=0]="UNDEFINED",e[e.AUTOMATIC=1]="AUTOMATIC",e[e.READ_ONLY=2]="READ_ONLY",e[e.READ_WRITE=3]="READ_WRITE",e))(Fpe||{}),kpe=(e=>(e[e.IDENTIFIER=0]="IDENTIFIER",e[e.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",e[e.STRING_CONSTANT=2]="STRING_CONSTANT",e[e.OPERATOR=3]="OPERATOR",e[e.KEYWORD=4]="KEYWORD",e[e.COMMENT=5]="COMMENT",e))(kpe||{}),xpe=(e=>(e[e.NONE=0]="NONE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(xpe||{}),Mpe=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(Mpe||{}),Ape=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(Ape||{}),Ope=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(Ope||{}),Npe=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},Rpe=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(Rpe||{}),Cpe=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=mr.from(t);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new Xi(n)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;t==null;)t=await this._bindings.pollPendingQuery(this._conn);let n=new rG(this._bindings,this._conn,t),i=await mr.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new Lpe(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=gpe(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},rG=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return this._inFlight!=null?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},Lpe=class{constructor(t,n,i){this.bindings=t,this.connectionId=n,this.statementId=i}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...t){let n=await this.bindings.runPrepared(this.connectionId,this.statementId,t),i=mr.from(n);return console.assert(i.isSync()),console.assert(i.isFile()),new Xi(i)}async send(...t){let n=await this.bindings.sendPrepared(this.connectionId,this.statementId,t),i=new rG(this.bindings,this.connectionId,n),s=await mr.from(i);return console.assert(s.isAsync()),console.assert(s.isStream()),s}},Ppe=(e=>(e.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",e.CLOSE_PREPARED="CLOSE_PREPARED",e.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",e.CONNECT="CONNECT",e.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",e.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",e.CREATE_PREPARED="CREATE_PREPARED",e.DISCONNECT="DISCONNECT",e.DROP_FILE="DROP_FILE",e.DROP_FILES="DROP_FILES",e.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",e.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",e.FLUSH_FILES="FLUSH_FILES",e.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",e.GET_TABLE_NAMES="GET_TABLE_NAMES",e.GET_VERSION="GET_VERSION",e.GLOB_FILE_INFOS="GLOB_FILE_INFOS",e.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",e.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",e.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",e.INSTANTIATE="INSTANTIATE",e.OPEN="OPEN",e.PING="PING",e.POLL_PENDING_QUERY="POLL_PENDING_QUERY",e.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",e.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",e.REGISTER_FILE_URL="REGISTER_FILE_URL",e.RESET="RESET",e.RUN_PREPARED="RUN_PREPARED",e.RUN_QUERY="RUN_QUERY",e.SEND_PREPARED="SEND_PREPARED",e.START_PENDING_QUERY="START_PENDING_QUERY",e.TOKENIZE="TOKENIZE",e))(Ppe||{}),Dpe=(e=>(e.CONNECTION_INFO="CONNECTION_INFO",e.ERROR="ERROR",e.FEATURE_FLAGS="FEATURE_FLAGS",e.FILE_BUFFER="FILE_BUFFER",e.FILE_INFOS="FILE_INFOS",e.FILE_SIZE="FILE_SIZE",e.FILE_STATISTICS="FILE_STATISTICS",e.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",e.LOG="LOG",e.OK="OK",e.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",e.QUERY_PLAN="QUERY_PLAN",e.QUERY_RESULT="QUERY_RESULT",e.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",e.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",e.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",e.REGISTERED_FILE="REGISTERED_FILE",e.SCRIPT_TOKENS="SCRIPT_TOKENS",e.SUCCESS="SUCCESS",e.TABLE_NAMES="TABLE_NAMES",e.VERSION_STRING="VERSION_STRING",e))(Dpe||{}),zt=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((n,i)=>{this.promiseResolver=n,this.promiseRejecter=i})}};function A0(e){switch(e.typeId){case ne.Binary:return{sqlType:"binary"};case ne.Bool:return{sqlType:"bool"};case ne.Date:return{sqlType:"date"};case ne.DateDay:return{sqlType:"date32[d]"};case ne.DateMillisecond:return{sqlType:"date64[ms]"};case ne.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case ne.Float:return{sqlType:"float"};case ne.Float16:return{sqlType:"float16"};case ne.Float32:return{sqlType:"float32"};case ne.Float64:return{sqlType:"float64"};case ne.Int:return{sqlType:"int32"};case ne.Int16:return{sqlType:"int16"};case ne.Int32:return{sqlType:"int32"};case ne.Int64:return{sqlType:"int64"};case ne.Uint16:return{sqlType:"uint16"};case ne.Uint32:return{sqlType:"uint32"};case ne.Uint64:return{sqlType:"uint64"};case ne.Uint8:return{sqlType:"uint8"};case ne.IntervalDayTime:return{sqlType:"interval[dt]"};case ne.IntervalYearMonth:return{sqlType:"interval[m]"};case ne.List:return{sqlType:"list",valueType:A0(e.valueType)};case ne.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case ne.Null:return{sqlType:"null"};case ne.Utf8:return{sqlType:"utf8"};case ne.Struct:return{sqlType:"struct",fields:e.children.map(t=>Ik(t.name,t.type))};case ne.Map:{let t=e;return{sqlType:"map",keyType:A0(t.keyType),valueType:A0(t.valueType)}}case ne.Time:return{sqlType:"time[s]"};case ne.TimeMicrosecond:return{sqlType:"time[us]"};case ne.TimeMillisecond:return{sqlType:"time[ms]"};case ne.TimeNanosecond:return{sqlType:"time[ns]"};case ne.TimeSecond:return{sqlType:"time[s]"};case ne.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case ne.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case ne.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case ne.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case ne.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function Ik(e,t){let n=A0(t);return n.name=e,n}var Upe=new TextEncoder,jpe=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),t!=null&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((t,n)=>{this._workerShutdownResolver=t})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let s of this._onInstantiationProgress)s(n.data);return}}let i=this._pendingRequests.get(n.requestId);if(!i){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let s=new Error(n.data.message);s.name=n.data.name,(t=Object.getOwnPropertyDescriptor(s,"stack"))!=null&&t.writable&&(s.stack=n.data.stack),i.promiseRejecter(s);return}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){i.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){i.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){i.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){i.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){i.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){i.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){i.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){i.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){i.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){i.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){i.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){i.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){i.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){i.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){i.promiseResolver(n.data);return}break}i.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new zt("RESET",null);return await this.postTask(e)}async ping(){let e=new zt("PING",null);await this.postTask(e)}async dropFile(e){let t=new zt("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new zt("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new zt("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new zt("INSTANTIATE",[e,t]);return await this.postTask(i)}async getVersion(){let e=new zt("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new zt("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new zt("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new zt("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new zt("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new Cpe(this,e)}async disconnect(e){let t=new zt("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new zt("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t){let n=new zt("START_PENDING_QUERY",[e,t]);return await this.postTask(n)}async pollPendingQuery(e){let t=new zt("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new zt("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new zt("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new zt("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new zt("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new zt("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let i=new zt("RUN_PREPARED",[e,t,n]);return await this.postTask(i)}async sendPrepared(e,t,n){let i=new zt("SEND_PREPARED",[e,t,n]);return await this.postTask(i)}async globFiles(e){let t=new zt("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=Upe.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,i){t===void 0&&(t=e);let s=new zt("REGISTER_FILE_URL",[e,t,n,i]);await this.postTask(s)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let n=new zt("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,i){let s=new zt("REGISTER_FILE_HANDLE",[e,t,n,i]);await this.postTask(s,[])}async collectFileStatistics(e,t){let n=new zt("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new zt("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new zt("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new zt("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(t.length==0)return;let i=new zt("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(i,[t.buffer])}async insertCSVFromPath(e,t,n){if(n.columns!==void 0){let s=[];for(let a in n.columns){let c=n.columns[a];s.push(Ik(a,c))}n.columnsFlat=s,delete n.columns}let i=new zt("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(i)}async insertJSONFromPath(e,t,n){if(n.columns!==void 0){let s=[];for(let a in n.columns){let c=n.columns[a];s.push(Ik(a,c))}n.columnsFlat=s,delete n.columns}let i=new zt("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(i)}},$pe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),zpe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),qpe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),Vpe=()=>(async e=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),QM={name:"@duckdb/duckdb-wasm",version:"1.29.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^17.0.0"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0",esbuild:"^0.20.2",eslint:"^8.57.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.34.0","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.2","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.3","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.5",puppeteer:"^22.8.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.13",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/tests-*","!dist/duckdb-browser-mvp.worker.js.map","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-node-blocking.d.ts",import:"./dist/duckdb-node-blocking.mjs",require:"./dist/duckdb-node-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},Gpe=QM.name,Hpe=QM.version,ZM=QM.version.split(".");ZM[0];ZM[1];ZM[2];var Wpe=()=>typeof navigator>"u";function Ype(){let e="https://cdn.jsdelivr.net/npm/".concat(Gpe,"@").concat(Hpe,"/dist/");return{mvp:{mainModule:"".concat(e,"duckdb-mvp.wasm"),mainWorker:"".concat(e,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(e,"duckdb-eh.wasm"),mainWorker:"".concat(e,"duckdb-browser-eh.worker.js")}}}var PB=null,DB=null,UB=null,jB=null,$B=null;async function Xpe(){return PB==null&&(PB=typeof BigInt64Array<"u"),DB==null&&(DB=await zpe()),UB==null&&(UB=await Vpe()),jB==null&&(jB=await qpe()),$B==null&&($B=await $pe()),{bigInt64Array:PB,crossOriginIsolated:Wpe()||globalThis.crossOriginIsolated||!1,wasmExceptions:DB,wasmSIMD:jB,wasmThreads:UB,wasmBulkMemory:$B}}async function Kpe(e){let t=await Xpe();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}var Jpe=Bpe(Ipe());async function Qpe(e){let t=new Request(e),n=await fetch(t),i=URL.createObjectURL(await n.blob());return new Jpe.default(i)}function Zpe(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}Zpe();var eye=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(eye||{});class eA extends que{constructor(t,n,i){super(n,i),this.db=t}async query(t){const n=performance.now();t=t.replaceAll("count(*)","count(*)::INT");const i=await this.db.connect(),s=await i.query(t);return i.close(),t=$ue(t),console.info(`%c${t}`,"color: #bbb",`
Rows:`,s.numRows,"Execution time:",performance.now()-n,"ms."),s}castTime(t){return`epoch(${t})*1000`}static async fromParquetFile(t,n="data",i,s=!0){const a=await tye(n,`CREATE TABLE '${n}' AS SELECT * FROM parquet_scan('${s?nye(t):t}')`);return new eA(a,n,i)}}async function tye(e,t){const n=Ype(),i=await Kpe(n),s=await Qpe(i.mainWorker),a=new Npe,c=new jpe(a,s);await c.instantiate(i.mainModule,i.pthreadWorker);const d=await c.connect();await d.query(t);const f=await d.query(`PRAGMA table_info('${e}')`);return console.table(f.toArray().map(Object.fromEntries)),d.close(),c}function nye(e){return`${window.location.href}${e}`}var aG={exports:{}},zB={};const et=Wz(rne);var Pb={},qe={},nd={},U3;function a_(){if(U3)return nd;U3=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.encodeUtf8=nd.decodeUtf8=void 0;const e=new TextDecoder("utf-8"),t=s=>e.decode(s);nd.decodeUtf8=t;const n=new TextEncoder,i=s=>n.encode(s);return nd.encodeUtf8=i,nd}var qB={},j3;function pa(){return j3||(j3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isFlatbuffersByteBuffer=e.isReadableNodeStream=e.isWritableNodeStream=e.isReadableDOMStream=e.isWritableDOMStream=e.isFetchResponse=e.isFSReadStream=e.isFileHandle=e.isUnderlyingSink=e.isIteratorResult=e.isArrayLike=e.isArrowJSON=e.isAsyncIterable=e.isIterable=e.isObservable=e.isPromise=e.isObject=e.BigUint64ArrayAvailable=e.BigUint64Array=e.BigInt64ArrayAvailable=e.BigInt64Array=void 0;const[t,n]=(()=>{const C=()=>{throw new Error("BigInt64Array is not available in this environment")};class D{static get BYTES_PER_ELEMENT(){return 8}static of(){throw C()}static from(){throw C()}constructor(){throw C()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[D,!1]})();e.BigInt64Array=t,e.BigInt64ArrayAvailable=n;const[i,s]=(()=>{const C=()=>{throw new Error("BigUint64Array is not available in this environment")};class D{static get BYTES_PER_ELEMENT(){return 8}static of(){throw C()}static from(){throw C()}constructor(){throw C()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[D,!1]})();e.BigUint64Array=i,e.BigUint64ArrayAvailable=s;const a=C=>typeof C=="number",c=C=>typeof C=="boolean",d=C=>typeof C=="function",f=C=>C!=null&&Object(C)===C;e.isObject=f;const u=C=>(0,e.isObject)(C)&&d(C.then);e.isPromise=u;const r=C=>(0,e.isObject)(C)&&d(C.subscribe);e.isObservable=r;const h=C=>(0,e.isObject)(C)&&d(C[Symbol.iterator]);e.isIterable=h;const p=C=>(0,e.isObject)(C)&&d(C[Symbol.asyncIterator]);e.isAsyncIterable=p;const _=C=>(0,e.isObject)(C)&&(0,e.isObject)(C.schema);e.isArrowJSON=_;const l=C=>(0,e.isObject)(C)&&a(C.length);e.isArrayLike=l;const b=C=>(0,e.isObject)(C)&&"done"in C&&"value"in C;e.isIteratorResult=b;const m=C=>(0,e.isObject)(C)&&d(C.abort)&&d(C.close)&&d(C.start)&&d(C.write);e.isUnderlyingSink=m;const E=C=>(0,e.isObject)(C)&&d(C.stat)&&a(C.fd);e.isFileHandle=E;const B=C=>(0,e.isReadableNodeStream)(C)&&a(C.bytesRead);e.isFSReadStream=B;const I=C=>(0,e.isObject)(C)&&(0,e.isReadableDOMStream)(C.body);e.isFetchResponse=I;const k=C=>"_getDOMStream"in C&&"_getNodeStream"in C,F=C=>(0,e.isObject)(C)&&d(C.abort)&&d(C.getWriter)&&!k(C);e.isWritableDOMStream=F;const x=C=>(0,e.isObject)(C)&&d(C.cancel)&&d(C.getReader)&&!k(C);e.isReadableDOMStream=x;const M=C=>(0,e.isObject)(C)&&d(C.end)&&d(C.write)&&c(C.writable)&&!k(C);e.isWritableNodeStream=M;const R=C=>(0,e.isObject)(C)&&d(C.read)&&d(C.pipe)&&c(C.readable)&&!k(C);e.isReadableNodeStream=R;const P=C=>(0,e.isObject)(C)&&d(C.clear)&&d(C.bytes)&&d(C.position)&&d(C.setPosition)&&d(C.capacity)&&d(C.getBufferIdentifier)&&d(C.createLong);e.isFlatbuffersByteBuffer=P}(qB)),qB}var $3;function ji(){if($3)return qe;$3=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.compareArrayLike=qe.rebaseValueOffsets=qe.toUint8ClampedArrayAsyncIterator=qe.toFloat64ArrayAsyncIterator=qe.toFloat32ArrayAsyncIterator=qe.toUint32ArrayAsyncIterator=qe.toUint16ArrayAsyncIterator=qe.toUint8ArrayAsyncIterator=qe.toInt32ArrayAsyncIterator=qe.toInt16ArrayAsyncIterator=qe.toInt8ArrayAsyncIterator=qe.toArrayBufferViewAsyncIterator=qe.toUint8ClampedArrayIterator=qe.toFloat64ArrayIterator=qe.toFloat32ArrayIterator=qe.toUint32ArrayIterator=qe.toUint16ArrayIterator=qe.toUint8ArrayIterator=qe.toInt32ArrayIterator=qe.toInt16ArrayIterator=qe.toInt8ArrayIterator=qe.toArrayBufferViewIterator=qe.toUint8ClampedArray=qe.toFloat64Array=qe.toFloat32Array=qe.toBigUint64Array=qe.toUint32Array=qe.toUint16Array=qe.toUint8Array=qe.toBigInt64Array=qe.toInt32Array=qe.toInt16Array=qe.toInt8Array=qe.toArrayBufferView=qe.joinUint8Arrays=qe.memcpy=void 0;const e=et,t=a_(),n=pa(),i=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function s(_e){const ke=_e[0]?[_e[0]]:[];let Ee,ye,X,Y;for(let U,J,K=0,Z=0,Q=_e.length;++K<Q;){if(U=ke[Z],J=_e[K],!U||!J||U.buffer!==J.buffer||J.byteOffset<U.byteOffset){J&&(ke[++Z]=J);continue}if({byteOffset:Ee,byteLength:X}=U,{byteOffset:ye,byteLength:Y}=J,Ee+X<ye||ye+Y<Ee){J&&(ke[++Z]=J);continue}ke[Z]=new Uint8Array(U.buffer,Ee,ye-Ee+Y)}return ke}function a(_e,ke,Ee=0,ye=ke.byteLength){const X=_e.byteLength,Y=new Uint8Array(_e.buffer,_e.byteOffset,X),U=new Uint8Array(ke.buffer,ke.byteOffset,Math.min(ye,X));return Y.set(U,Ee),_e}qe.memcpy=a;function c(_e,ke){const Ee=s(_e),ye=Ee.reduce((Q,fe)=>Q+fe.byteLength,0);let X,Y,U,J=0,K=-1;const Z=Math.min(ke||Number.POSITIVE_INFINITY,ye);for(const Q=Ee.length;++K<Q;){if(X=Ee[K],Y=X.subarray(0,Math.min(X.length,Z-J)),Z<=J+Y.length){Y.length<X.length?Ee[K]=X.subarray(Y.length):Y.length===X.length&&K++,U?a(U,Y,J):U=Y;break}a(U||(U=new Uint8Array(Z)),Y,J),J+=Y.length}return[U||new Uint8Array(0),Ee.slice(K),ye-(U?U.byteLength:0)]}qe.joinUint8Arrays=c;function d(_e,ke){let Ee=(0,n.isIteratorResult)(ke)?ke.value:ke;return Ee instanceof _e?_e===Uint8Array?new _e(Ee.buffer,Ee.byteOffset,Ee.byteLength):Ee:Ee?(typeof Ee=="string"&&(Ee=(0,t.encodeUtf8)(Ee)),Ee instanceof ArrayBuffer?new _e(Ee):Ee instanceof i?new _e(Ee):(0,n.isFlatbuffersByteBuffer)(Ee)?d(_e,Ee.bytes()):ArrayBuffer.isView(Ee)?Ee.byteLength<=0?new _e(0):new _e(Ee.buffer,Ee.byteOffset,Ee.byteLength/_e.BYTES_PER_ELEMENT):_e.from(Ee)):new _e(0)}qe.toArrayBufferView=d;const f=_e=>d(Int8Array,_e);qe.toInt8Array=f;const u=_e=>d(Int16Array,_e);qe.toInt16Array=u;const r=_e=>d(Int32Array,_e);qe.toInt32Array=r;const h=_e=>d(n.BigInt64Array,_e);qe.toBigInt64Array=h;const p=_e=>d(Uint8Array,_e);qe.toUint8Array=p;const _=_e=>d(Uint16Array,_e);qe.toUint16Array=_;const l=_e=>d(Uint32Array,_e);qe.toUint32Array=l;const b=_e=>d(n.BigUint64Array,_e);qe.toBigUint64Array=b;const m=_e=>d(Float32Array,_e);qe.toFloat32Array=m;const E=_e=>d(Float64Array,_e);qe.toFloat64Array=E;const B=_e=>d(Uint8ClampedArray,_e);qe.toUint8ClampedArray=B;const I=_e=>(_e.next(),_e);function*k(_e,ke){const Ee=function*(X){yield X},ye=typeof ke=="string"||ArrayBuffer.isView(ke)||ke instanceof ArrayBuffer||ke instanceof i?Ee(ke):(0,n.isIterable)(ke)?ke:Ee(ke);return yield*I(function*(X){let Y=null;do Y=X.next(yield d(_e,Y));while(!Y.done)}(ye[Symbol.iterator]())),new _e}qe.toArrayBufferViewIterator=k;const F=_e=>k(Int8Array,_e);qe.toInt8ArrayIterator=F;const x=_e=>k(Int16Array,_e);qe.toInt16ArrayIterator=x;const M=_e=>k(Int32Array,_e);qe.toInt32ArrayIterator=M;const R=_e=>k(Uint8Array,_e);qe.toUint8ArrayIterator=R;const P=_e=>k(Uint16Array,_e);qe.toUint16ArrayIterator=P;const C=_e=>k(Uint32Array,_e);qe.toUint32ArrayIterator=C;const D=_e=>k(Float32Array,_e);qe.toFloat32ArrayIterator=D;const j=_e=>k(Float64Array,_e);qe.toFloat64ArrayIterator=j;const $=_e=>k(Uint8ClampedArray,_e);qe.toUint8ClampedArrayIterator=$;function W(_e,ke){return e.__asyncGenerator(this,arguments,function*(){if((0,n.isPromise)(ke))return yield e.__await(yield e.__await(yield*e.__asyncDelegator(e.__asyncValues(W(_e,yield e.__await(ke))))));const ye=function(U){return e.__asyncGenerator(this,arguments,function*(){yield yield e.__await(yield e.__await(U))})},X=function(U){return e.__asyncGenerator(this,arguments,function*(){yield e.__await(yield*e.__asyncDelegator(e.__asyncValues(I(function*(J){let K=null;do K=J.next(yield K==null?void 0:K.value);while(!K.done)}(U[Symbol.iterator]())))))})},Y=typeof ke=="string"||ArrayBuffer.isView(ke)||ke instanceof ArrayBuffer||ke instanceof i?ye(ke):(0,n.isIterable)(ke)?X(ke):(0,n.isAsyncIterable)(ke)?ke:ye(ke);return yield e.__await(yield*e.__asyncDelegator(e.__asyncValues(I(function(U){return e.__asyncGenerator(this,arguments,function*(){let J=null;do J=yield e.__await(U.next(yield yield e.__await(d(_e,J))));while(!J.done)})}(Y[Symbol.asyncIterator]()))))),yield e.__await(new _e)})}qe.toArrayBufferViewAsyncIterator=W;const H=_e=>W(Int8Array,_e);qe.toInt8ArrayAsyncIterator=H;const G=_e=>W(Int16Array,_e);qe.toInt16ArrayAsyncIterator=G;const z=_e=>W(Int32Array,_e);qe.toInt32ArrayAsyncIterator=z;const q=_e=>W(Uint8Array,_e);qe.toUint8ArrayAsyncIterator=q;const ie=_e=>W(Uint16Array,_e);qe.toUint16ArrayAsyncIterator=ie;const ce=_e=>W(Uint32Array,_e);qe.toUint32ArrayAsyncIterator=ce;const se=_e=>W(Float32Array,_e);qe.toFloat32ArrayAsyncIterator=se;const Ie=_e=>W(Float64Array,_e);qe.toFloat64ArrayAsyncIterator=Ie;const he=_e=>W(Uint8ClampedArray,_e);qe.toUint8ClampedArrayAsyncIterator=he;function Me(_e,ke,Ee){if(_e!==0){Ee=Ee.slice(0,ke+1);for(let ye=-1;++ye<=ke;)Ee[ye]+=_e}return Ee}qe.rebaseValueOffsets=Me;function Ue(_e,ke){let Ee=0;const ye=_e.length;if(ye!==ke.length)return!1;if(ye>0)do if(_e[Ee]!==ke[Ee])return!1;while(++Ee<ye);return!0}return qe.compareArrayLike=Ue,qe}var z3;function oE(){if(z3)return Pb;z3=1,Object.defineProperty(Pb,"__esModule",{value:!0});const e=et,t=ji();Pb.default={fromIterable(u){return n(i(u))},fromAsyncIterable(u){return n(s(u))},fromDOMStream(u){return n(a(u))},fromNodeStream(u){return n(f(u))},toDOMStream(u,r){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(u,r){throw new Error('"toNodeStream" not available in this environment')}};const n=u=>(u.next(),u);function*i(u){let r,h=!1,p=[],_,l,b,m=0;function E(){return l==="peek"?(0,t.joinUint8Arrays)(p,b)[0]:([_,p,m]=(0,t.joinUint8Arrays)(p,b),_)}({cmd:l,size:b}=yield null);const B=(0,t.toUint8ArrayIterator)(u)[Symbol.iterator]();try{do if({done:r,value:_}=Number.isNaN(b-m)?B.next():B.next(b-m),!r&&_.byteLength>0&&(p.push(_),m+=_.byteLength),r||b<=m)do({cmd:l,size:b}=yield E());while(b<m);while(!r)}catch(I){(h=!0)&&typeof B.throw=="function"&&B.throw(I)}finally{h===!1&&typeof B.return=="function"&&B.return(null)}return null}function s(u){return e.__asyncGenerator(this,arguments,function*(){let h,p=!1,_=[],l,b,m,E=0;function B(){return b==="peek"?(0,t.joinUint8Arrays)(_,m)[0]:([l,_,E]=(0,t.joinUint8Arrays)(_,m),l)}({cmd:b,size:m}=yield yield e.__await(null));const I=(0,t.toUint8ArrayAsyncIterator)(u)[Symbol.asyncIterator]();try{do if({done:h,value:l}=Number.isNaN(m-E)?yield e.__await(I.next()):yield e.__await(I.next(m-E)),!h&&l.byteLength>0&&(_.push(l),E+=l.byteLength),h||m<=E)do({cmd:b,size:m}=yield yield e.__await(B()));while(m<E);while(!h)}catch(k){(p=!0)&&typeof I.throw=="function"&&(yield e.__await(I.throw(k)))}finally{p===!1&&typeof I.return=="function"&&(yield e.__await(I.return(new Uint8Array(0))))}return yield e.__await(null)})}function a(u){return e.__asyncGenerator(this,arguments,function*(){let h=!1,p=!1,_=[],l,b,m,E=0;function B(){return b==="peek"?(0,t.joinUint8Arrays)(_,m)[0]:([l,_,E]=(0,t.joinUint8Arrays)(_,m),l)}({cmd:b,size:m}=yield yield e.__await(null));const I=new c(u);try{do if({done:h,value:l}=Number.isNaN(m-E)?yield e.__await(I.read()):yield e.__await(I.read(m-E)),!h&&l.byteLength>0&&(_.push((0,t.toUint8Array)(l)),E+=l.byteLength),h||m<=E)do({cmd:b,size:m}=yield yield e.__await(B()));while(m<E);while(!h)}catch(k){(p=!0)&&(yield e.__await(I.cancel(k)))}finally{p===!1?yield e.__await(I.cancel()):u.locked&&I.releaseLock()}return yield e.__await(null)})}class c{constructor(r){this.source=r,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(r){return e.__awaiter(this,void 0,void 0,function*(){const{reader:h,source:p}=this;h&&(yield h.cancel(r).catch(()=>{})),p&&p.locked&&this.releaseLock()})}read(r){return e.__awaiter(this,void 0,void 0,function*(){if(r===0)return{done:this.reader==null,value:new Uint8Array(0)};const h=yield this.reader.read();return!h.done&&(h.value=(0,t.toUint8Array)(h)),h})}}const d=(u,r)=>{const h=_=>p([r,_]);let p;return[r,h,new Promise(_=>(p=_)&&u.once(r,h))]};function f(u){return e.__asyncGenerator(this,arguments,function*(){const h=[];let p="error",_=!1,l=null,b,m,E=0,B=[],I;function k(){return b==="peek"?(0,t.joinUint8Arrays)(B,m)[0]:([I,B,E]=(0,t.joinUint8Arrays)(B,m),I)}if({cmd:b,size:m}=yield yield e.__await(null),u.isTTY)return yield yield e.__await(new Uint8Array(0)),yield e.__await(null);try{h[0]=d(u,"end"),h[1]=d(u,"error");do{if(h[2]=d(u,"readable"),[p,l]=yield e.__await(Promise.race(h.map(x=>x[2]))),p==="error")break;if((_=p==="end")||(Number.isFinite(m-E)?(I=(0,t.toUint8Array)(u.read(m-E)),I.byteLength<m-E&&(I=(0,t.toUint8Array)(u.read()))):I=(0,t.toUint8Array)(u.read()),I.byteLength>0&&(B.push(I),E+=I.byteLength)),_||m<=E)do({cmd:b,size:m}=yield yield e.__await(k()));while(m<E)}while(!_)}finally{yield e.__await(F(h,p==="error"?l:null))}return yield e.__await(null);function F(x,M){return I=B=null,new Promise((R,P)=>{for(const[C,D]of x)u.off(C,D);try{const C=u.destroy;C&&C.call(u,M),M=void 0}catch(C){M=C||M}finally{M!=null?P(M):R()}})}})}return Pb}var xo={},id={},VB={},q3;function $n(){return q3||(q3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BufferType=e.Type=e.MessageHeader=e.IntervalUnit=e.TimeUnit=e.DateUnit=e.Precision=e.UnionMode=e.MetadataVersion=void 0,function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(e.MetadataVersion||(e.MetadataVersion={})),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(e.UnionMode||(e.UnionMode={})),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(e.Precision||(e.Precision={})),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(e.DateUnit||(e.DateUnit={})),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(e.TimeUnit||(e.TimeUnit={})),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(e.IntervalUnit||(e.IntervalUnit={})),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(e.MessageHeader||(e.MessageHeader={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(e.Type||(e.Type={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(e.BufferType||(e.BufferType={}))}(VB)),VB}var Mo={},GB={},U_={},V3;function tA(){if(V3)return U_;V3=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.valueToString=void 0;const e=pa(),t=void 0;function n(i){if(i===null)return"null";if(i===t)return"undefined";switch(typeof i){case"number":return`${i}`;case"bigint":return`${i}`;case"string":return`"${i}"`}return typeof i[Symbol.toPrimitive]=="function"?i[Symbol.toPrimitive]("string"):ArrayBuffer.isView(i)?i instanceof e.BigInt64Array||i instanceof e.BigUint64Array?`[${[...i].map(s=>n(s))}]`:`[${i}]`:ArrayBuffer.isView(i)?`[${i}]`:JSON.stringify(i,(s,a)=>typeof a=="bigint"?`${a}`:a)}return U_.valueToString=n,U_}var HB={},WB={},G3;function nA(){return G3||(G3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BN=e.bignumToBigInt=e.bignumToString=e.isArrowBigNumSymbol=void 0;const t=ji(),n=pa();e.isArrowBigNumSymbol=Symbol.for("isArrowBigNum");function i(r,...h){return h.length===0?Object.setPrototypeOf((0,t.toArrayBufferView)(this.TypedArray,r),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(r,...h),this.constructor.prototype)}i.prototype[e.isArrowBigNumSymbol]=!0,i.prototype.toJSON=function(){return`"${(0,e.bignumToString)(this)}"`},i.prototype.valueOf=function(){return d(this)},i.prototype.toString=function(){return(0,e.bignumToString)(this)},i.prototype[Symbol.toPrimitive]=function(r="default"){switch(r){case"number":return d(this);case"string":return(0,e.bignumToString)(this);case"default":return(0,e.bignumToBigInt)(this)}return(0,e.bignumToString)(this)};function s(...r){return i.apply(this,r)}function a(...r){return i.apply(this,r)}function c(...r){return i.apply(this,r)}Object.setPrototypeOf(s.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(a.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(c.prototype,Object.create(Uint32Array.prototype)),Object.assign(s.prototype,i.prototype,{constructor:s,signed:!0,TypedArray:Int32Array,BigIntArray:n.BigInt64Array}),Object.assign(a.prototype,i.prototype,{constructor:a,signed:!1,TypedArray:Uint32Array,BigIntArray:n.BigUint64Array}),Object.assign(c.prototype,i.prototype,{constructor:c,signed:!0,TypedArray:Uint32Array,BigIntArray:n.BigUint64Array});function d(r){const{buffer:h,byteOffset:p,length:_,signed:l}=r,b=new n.BigUint64Array(h,p,_),m=l&&b[b.length-1]&BigInt(1)<<BigInt(63);let E=BigInt(m?1:0),B=BigInt(0);if(m){for(const I of b)E+=~I*(BigInt(1)<<BigInt(32)*B++);E*=BigInt(-1)}else for(const I of b)E+=I*(BigInt(1)<<BigInt(32)*B++);return E}e.bignumToString=r=>r.byteLength===8?`${new r.BigIntArray(r.buffer,r.byteOffset,1)[0]}`:f(r),e.bignumToBigInt=r=>r.byteLength===8?new r.BigIntArray(r.buffer,r.byteOffset,1)[0]:f(r);function f(r){let h="";const p=new Uint32Array(2);let _=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2);const l=new Uint32Array((_=new Uint16Array(_).reverse()).buffer);let b=-1;const m=_.length-1;do{for(p[0]=_[b=0];b<m;)_[b++]=p[1]=p[0]/10,p[0]=(p[0]-p[1]*10<<16)+_[b];_[b]=p[1]=p[0]/10,p[0]=p[0]-p[1]*10,h=`${p[0]}${h}`}while(l[0]||l[1]||l[2]||l[3]);return h??"0"}class u{static new(h,p){switch(p){case!0:return new s(h);case!1:return new a(h)}switch(h.constructor){case Int8Array:case Int16Array:case Int32Array:case n.BigInt64Array:return new s(h)}return h.byteLength===16?new c(h):new a(h)}static signed(h){return new s(h)}static unsigned(h){return new a(h)}static decimal(h){return new c(h)}constructor(h,p){return u.new(h,p)}}e.BN=u}(WB)),WB}var j_={},Ae={},$_={},H3;function iA(){if(H3)return $_;H3=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.bigIntToNumber=void 0;function e(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}return $_.bigIntToNumber=e,$_}var W3;function wn(){if(W3)return Ae;W3=1;var e,t,n,i,s,a,c,d,f,u,r,h,p,_,l,b,m,E,B;Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.strideForType=Ae.Dictionary=Ae.Map_=Ae.FixedSizeList=Ae.FixedSizeBinary=Ae.SparseUnion=Ae.DenseUnion=Ae.Union=Ae.Struct=Ae.List=Ae.IntervalYearMonth=Ae.IntervalDayTime=Ae.Interval=Ae.TimestampNanosecond=Ae.TimestampMicrosecond=Ae.TimestampMillisecond=Ae.TimestampSecond=Ae.Timestamp=Ae.TimeNanosecond=Ae.TimeMicrosecond=Ae.TimeMillisecond=Ae.TimeSecond=Ae.Time=Ae.DateMillisecond=Ae.DateDay=Ae.Date_=Ae.Decimal=Ae.Bool=Ae.Utf8=Ae.Binary=Ae.Float64=Ae.Float32=Ae.Float16=Ae.Float=Ae.Uint64=Ae.Uint32=Ae.Uint16=Ae.Uint8=Ae.Int64=Ae.Int32=Ae.Int16=Ae.Int8=Ae.Int=Ae.Null=Ae.DataType=void 0;const I=pa(),k=iA(),F=$n();class x{static isNull(pe){return(pe==null?void 0:pe.typeId)===F.Type.Null}static isInt(pe){return(pe==null?void 0:pe.typeId)===F.Type.Int}static isFloat(pe){return(pe==null?void 0:pe.typeId)===F.Type.Float}static isBinary(pe){return(pe==null?void 0:pe.typeId)===F.Type.Binary}static isUtf8(pe){return(pe==null?void 0:pe.typeId)===F.Type.Utf8}static isBool(pe){return(pe==null?void 0:pe.typeId)===F.Type.Bool}static isDecimal(pe){return(pe==null?void 0:pe.typeId)===F.Type.Decimal}static isDate(pe){return(pe==null?void 0:pe.typeId)===F.Type.Date}static isTime(pe){return(pe==null?void 0:pe.typeId)===F.Type.Time}static isTimestamp(pe){return(pe==null?void 0:pe.typeId)===F.Type.Timestamp}static isInterval(pe){return(pe==null?void 0:pe.typeId)===F.Type.Interval}static isList(pe){return(pe==null?void 0:pe.typeId)===F.Type.List}static isStruct(pe){return(pe==null?void 0:pe.typeId)===F.Type.Struct}static isUnion(pe){return(pe==null?void 0:pe.typeId)===F.Type.Union}static isFixedSizeBinary(pe){return(pe==null?void 0:pe.typeId)===F.Type.FixedSizeBinary}static isFixedSizeList(pe){return(pe==null?void 0:pe.typeId)===F.Type.FixedSizeList}static isMap(pe){return(pe==null?void 0:pe.typeId)===F.Type.Map}static isDictionary(pe){return(pe==null?void 0:pe.typeId)===F.Type.Dictionary}static isDenseUnion(pe){return x.isUnion(pe)&&pe.mode===F.UnionMode.Dense}static isSparseUnion(pe){return x.isUnion(pe)&&pe.mode===F.UnionMode.Sparse}get typeId(){return F.Type.NONE}}Ae.DataType=x,e=Symbol.toStringTag,x[e]=(me=>(me.children=null,me.ArrayType=Array,me[Symbol.toStringTag]="DataType"))(x.prototype);class M extends x{toString(){return"Null"}get typeId(){return F.Type.Null}}Ae.Null=M,t=Symbol.toStringTag,M[t]=(me=>me[Symbol.toStringTag]="Null")(M.prototype);class R extends x{constructor(pe,qt){super(),this.isSigned=pe,this.bitWidth=qt}get typeId(){return F.Type.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?I.BigInt64Array:I.BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Ae.Int=R,n=Symbol.toStringTag,R[n]=(me=>(me.isSigned=null,me.bitWidth=null,me[Symbol.toStringTag]="Int"))(R.prototype);class P extends R{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}Ae.Int8=P;class C extends R{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}Ae.Int16=C;class D extends R{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Ae.Int32=D;class j extends R{constructor(){super(!0,64)}get ArrayType(){return I.BigInt64Array}}Ae.Int64=j;class $ extends R{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}Ae.Uint8=$;class W extends R{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}Ae.Uint16=W;class H extends R{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}Ae.Uint32=H;class G extends R{constructor(){super(!1,64)}get ArrayType(){return I.BigUint64Array}}Ae.Uint64=G,Object.defineProperty(P.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(C.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(D.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(j.prototype,"ArrayType",{value:I.BigInt64Array}),Object.defineProperty($.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(W.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(H.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(G.prototype,"ArrayType",{value:I.BigUint64Array});class z extends x{constructor(pe){super(),this.precision=pe}get typeId(){return F.Type.Float}get ArrayType(){switch(this.precision){case F.Precision.HALF:return Uint16Array;case F.Precision.SINGLE:return Float32Array;case F.Precision.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Ae.Float=z,i=Symbol.toStringTag,z[i]=(me=>(me.precision=null,me[Symbol.toStringTag]="Float"))(z.prototype);class q extends z{constructor(){super(F.Precision.HALF)}}Ae.Float16=q;class ie extends z{constructor(){super(F.Precision.SINGLE)}}Ae.Float32=ie;class ce extends z{constructor(){super(F.Precision.DOUBLE)}}Ae.Float64=ce,Object.defineProperty(q.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(ie.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(ce.prototype,"ArrayType",{value:Float64Array});class se extends x{constructor(){super()}get typeId(){return F.Type.Binary}toString(){return"Binary"}}Ae.Binary=se,s=Symbol.toStringTag,se[s]=(me=>(me.ArrayType=Uint8Array,me[Symbol.toStringTag]="Binary"))(se.prototype);class Ie extends x{constructor(){super()}get typeId(){return F.Type.Utf8}toString(){return"Utf8"}}Ae.Utf8=Ie,a=Symbol.toStringTag,Ie[a]=(me=>(me.ArrayType=Uint8Array,me[Symbol.toStringTag]="Utf8"))(Ie.prototype);class he extends x{constructor(){super()}get typeId(){return F.Type.Bool}toString(){return"Bool"}}Ae.Bool=he,c=Symbol.toStringTag,he[c]=(me=>(me.ArrayType=Uint8Array,me[Symbol.toStringTag]="Bool"))(he.prototype);class Me extends x{constructor(pe,qt,L=128){super(),this.scale=pe,this.precision=qt,this.bitWidth=L}get typeId(){return F.Type.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Ae.Decimal=Me,d=Symbol.toStringTag,Me[d]=(me=>(me.scale=null,me.precision=null,me.ArrayType=Uint32Array,me[Symbol.toStringTag]="Decimal"))(Me.prototype);class Ue extends x{constructor(pe){super(),this.unit=pe}get typeId(){return F.Type.Date}toString(){return`Date${(this.unit+1)*32}<${F.DateUnit[this.unit]}>`}}Ae.Date_=Ue,f=Symbol.toStringTag,Ue[f]=(me=>(me.unit=null,me.ArrayType=Int32Array,me[Symbol.toStringTag]="Date"))(Ue.prototype);class _e extends Ue{constructor(){super(F.DateUnit.DAY)}}Ae.DateDay=_e;class ke extends Ue{constructor(){super(F.DateUnit.MILLISECOND)}}Ae.DateMillisecond=ke;class Ee extends x{constructor(pe,qt){super(),this.unit=pe,this.bitWidth=qt}get typeId(){return F.Type.Time}toString(){return`Time${this.bitWidth}<${F.TimeUnit[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return I.BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Ae.Time=Ee,u=Symbol.toStringTag,Ee[u]=(me=>(me.unit=null,me.bitWidth=null,me[Symbol.toStringTag]="Time"))(Ee.prototype);class ye extends Ee{constructor(){super(F.TimeUnit.SECOND,32)}}Ae.TimeSecond=ye;class X extends Ee{constructor(){super(F.TimeUnit.MILLISECOND,32)}}Ae.TimeMillisecond=X;class Y extends Ee{constructor(){super(F.TimeUnit.MICROSECOND,64)}}Ae.TimeMicrosecond=Y;class U extends Ee{constructor(){super(F.TimeUnit.NANOSECOND,64)}}Ae.TimeNanosecond=U;class J extends x{constructor(pe,qt){super(),this.unit=pe,this.timezone=qt}get typeId(){return F.Type.Timestamp}toString(){return`Timestamp<${F.TimeUnit[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Ae.Timestamp=J,r=Symbol.toStringTag,J[r]=(me=>(me.unit=null,me.timezone=null,me.ArrayType=Int32Array,me[Symbol.toStringTag]="Timestamp"))(J.prototype);class K extends J{constructor(pe){super(F.TimeUnit.SECOND,pe)}}Ae.TimestampSecond=K;class Z extends J{constructor(pe){super(F.TimeUnit.MILLISECOND,pe)}}Ae.TimestampMillisecond=Z;class Q extends J{constructor(pe){super(F.TimeUnit.MICROSECOND,pe)}}Ae.TimestampMicrosecond=Q;class fe extends J{constructor(pe){super(F.TimeUnit.NANOSECOND,pe)}}Ae.TimestampNanosecond=fe;class ee extends x{constructor(pe){super(),this.unit=pe}get typeId(){return F.Type.Interval}toString(){return`Interval<${F.IntervalUnit[this.unit]}>`}}Ae.Interval=ee,h=Symbol.toStringTag,ee[h]=(me=>(me.unit=null,me.ArrayType=Int32Array,me[Symbol.toStringTag]="Interval"))(ee.prototype);class le extends ee{constructor(){super(F.IntervalUnit.DAY_TIME)}}Ae.IntervalDayTime=le;class Ne extends ee{constructor(){super(F.IntervalUnit.YEAR_MONTH)}}Ae.IntervalYearMonth=Ne;class He extends x{constructor(pe){super(),this.children=[pe]}get typeId(){return F.Type.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Ae.List=He,p=Symbol.toStringTag,He[p]=(me=>(me.children=null,me[Symbol.toStringTag]="List"))(He.prototype);class ft extends x{constructor(pe){super(),this.children=pe}get typeId(){return F.Type.Struct}toString(){return`Struct<{${this.children.map(pe=>`${pe.name}:${pe.type}`).join(", ")}}>`}}Ae.Struct=ft,_=Symbol.toStringTag,ft[_]=(me=>(me.children=null,me[Symbol.toStringTag]="Struct"))(ft.prototype);class de extends x{constructor(pe,qt,L){super(),this.mode=pe,this.children=L,this.typeIds=qt=Int32Array.from(qt),this.typeIdToChildIndex=qt.reduce((O,N,V)=>(O[N]=V)&&O||O,Object.create(null))}get typeId(){return F.Type.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(pe=>`${pe.type}`).join(" | ")}>`}}Ae.Union=de,l=Symbol.toStringTag,de[l]=(me=>(me.mode=null,me.typeIds=null,me.children=null,me.typeIdToChildIndex=null,me.ArrayType=Int8Array,me[Symbol.toStringTag]="Union"))(de.prototype);class ve extends de{constructor(pe,qt){super(F.UnionMode.Dense,pe,qt)}}Ae.DenseUnion=ve;class Ce extends de{constructor(pe,qt){super(F.UnionMode.Sparse,pe,qt)}}Ae.SparseUnion=Ce;class re extends x{constructor(pe){super(),this.byteWidth=pe}get typeId(){return F.Type.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Ae.FixedSizeBinary=re,b=Symbol.toStringTag,re[b]=(me=>(me.byteWidth=null,me.ArrayType=Uint8Array,me[Symbol.toStringTag]="FixedSizeBinary"))(re.prototype);class rt extends x{constructor(pe,qt){super(),this.listSize=pe,this.children=[qt]}get typeId(){return F.Type.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Ae.FixedSizeList=rt,m=Symbol.toStringTag,rt[m]=(me=>(me.children=null,me.listSize=null,me[Symbol.toStringTag]="FixedSizeList"))(rt.prototype);class tt extends x{constructor(pe,qt=!1){super(),this.children=[pe],this.keysSorted=qt}get typeId(){return F.Type.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(pe=>`${pe.name}:${pe.type}`).join(", ")}}>`}}Ae.Map_=tt,E=Symbol.toStringTag,tt[E]=(me=>(me.children=null,me.keysSorted=null,me[Symbol.toStringTag]="Map_"))(tt.prototype);const Rt=(me=>()=>++me)(-1);class $t extends x{constructor(pe,qt,L,O){super(),this.indices=qt,this.dictionary=pe,this.isOrdered=O||!1,this.id=L==null?Rt():(0,k.bigIntToNumber)(L)}get typeId(){return F.Type.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Ae.Dictionary=$t,B=Symbol.toStringTag,$t[B]=(me=>(me.id=null,me.indices=null,me.isOrdered=null,me.dictionary=null,me[Symbol.toStringTag]="Dictionary"))($t.prototype);function ds(me){const pe=me;switch(me.typeId){case F.Type.Decimal:return me.bitWidth/32;case F.Type.Timestamp:return 2;case F.Type.Date:return 1+pe.unit;case F.Type.Interval:return 1+pe.unit;case F.Type.FixedSizeList:return pe.listSize;case F.Type.FixedSizeBinary:return pe.byteWidth;default:return 1}}return Ae.strideForType=ds,Ae}var Y3;function Ms(){if(Y3)return j_;Y3=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.Visitor=void 0;const e=$n(),t=wn();class n{visitMany(d,...f){return d.map((u,r)=>this.visit(u,...f.map(h=>h[r])))}visit(...d){return this.getVisitFn(d[0],!1).apply(this,d)}getVisitFn(d,f=!0){return i(this,d,f)}getVisitFnByTypeId(d,f=!0){return s(this,d,f)}visitNull(d,...f){return null}visitBool(d,...f){return null}visitInt(d,...f){return null}visitFloat(d,...f){return null}visitUtf8(d,...f){return null}visitBinary(d,...f){return null}visitFixedSizeBinary(d,...f){return null}visitDate(d,...f){return null}visitTimestamp(d,...f){return null}visitTime(d,...f){return null}visitDecimal(d,...f){return null}visitList(d,...f){return null}visitStruct(d,...f){return null}visitUnion(d,...f){return null}visitDictionary(d,...f){return null}visitInterval(d,...f){return null}visitFixedSizeList(d,...f){return null}visitMap(d,...f){return null}}j_.Visitor=n;function i(c,d,f=!0){return typeof d=="number"?s(c,d,f):typeof d=="string"&&d in e.Type?s(c,e.Type[d],f):d&&d instanceof t.DataType?s(c,a(d),f):d!=null&&d.type&&d.type instanceof t.DataType?s(c,a(d.type),f):s(c,e.Type.NONE,f)}function s(c,d,f=!0){let u=null;switch(d){case e.Type.Null:u=c.visitNull;break;case e.Type.Bool:u=c.visitBool;break;case e.Type.Int:u=c.visitInt;break;case e.Type.Int8:u=c.visitInt8||c.visitInt;break;case e.Type.Int16:u=c.visitInt16||c.visitInt;break;case e.Type.Int32:u=c.visitInt32||c.visitInt;break;case e.Type.Int64:u=c.visitInt64||c.visitInt;break;case e.Type.Uint8:u=c.visitUint8||c.visitInt;break;case e.Type.Uint16:u=c.visitUint16||c.visitInt;break;case e.Type.Uint32:u=c.visitUint32||c.visitInt;break;case e.Type.Uint64:u=c.visitUint64||c.visitInt;break;case e.Type.Float:u=c.visitFloat;break;case e.Type.Float16:u=c.visitFloat16||c.visitFloat;break;case e.Type.Float32:u=c.visitFloat32||c.visitFloat;break;case e.Type.Float64:u=c.visitFloat64||c.visitFloat;break;case e.Type.Utf8:u=c.visitUtf8;break;case e.Type.Binary:u=c.visitBinary;break;case e.Type.FixedSizeBinary:u=c.visitFixedSizeBinary;break;case e.Type.Date:u=c.visitDate;break;case e.Type.DateDay:u=c.visitDateDay||c.visitDate;break;case e.Type.DateMillisecond:u=c.visitDateMillisecond||c.visitDate;break;case e.Type.Timestamp:u=c.visitTimestamp;break;case e.Type.TimestampSecond:u=c.visitTimestampSecond||c.visitTimestamp;break;case e.Type.TimestampMillisecond:u=c.visitTimestampMillisecond||c.visitTimestamp;break;case e.Type.TimestampMicrosecond:u=c.visitTimestampMicrosecond||c.visitTimestamp;break;case e.Type.TimestampNanosecond:u=c.visitTimestampNanosecond||c.visitTimestamp;break;case e.Type.Time:u=c.visitTime;break;case e.Type.TimeSecond:u=c.visitTimeSecond||c.visitTime;break;case e.Type.TimeMillisecond:u=c.visitTimeMillisecond||c.visitTime;break;case e.Type.TimeMicrosecond:u=c.visitTimeMicrosecond||c.visitTime;break;case e.Type.TimeNanosecond:u=c.visitTimeNanosecond||c.visitTime;break;case e.Type.Decimal:u=c.visitDecimal;break;case e.Type.List:u=c.visitList;break;case e.Type.Struct:u=c.visitStruct;break;case e.Type.Union:u=c.visitUnion;break;case e.Type.DenseUnion:u=c.visitDenseUnion||c.visitUnion;break;case e.Type.SparseUnion:u=c.visitSparseUnion||c.visitUnion;break;case e.Type.Dictionary:u=c.visitDictionary;break;case e.Type.Interval:u=c.visitInterval;break;case e.Type.IntervalDayTime:u=c.visitIntervalDayTime||c.visitInterval;break;case e.Type.IntervalYearMonth:u=c.visitIntervalYearMonth||c.visitInterval;break;case e.Type.FixedSizeList:u=c.visitFixedSizeList;break;case e.Type.Map:u=c.visitMap;break}if(typeof u=="function")return u;if(!f)return()=>null;throw new Error(`Unrecognized type '${e.Type[d]}'`)}function a(c){switch(c.typeId){case e.Type.Null:return e.Type.Null;case e.Type.Int:{const{bitWidth:d,isSigned:f}=c;switch(d){case 8:return f?e.Type.Int8:e.Type.Uint8;case 16:return f?e.Type.Int16:e.Type.Uint16;case 32:return f?e.Type.Int32:e.Type.Uint32;case 64:return f?e.Type.Int64:e.Type.Uint64}return e.Type.Int}case e.Type.Float:switch(c.precision){case e.Precision.HALF:return e.Type.Float16;case e.Precision.SINGLE:return e.Type.Float32;case e.Precision.DOUBLE:return e.Type.Float64}return e.Type.Float;case e.Type.Binary:return e.Type.Binary;case e.Type.Utf8:return e.Type.Utf8;case e.Type.Bool:return e.Type.Bool;case e.Type.Decimal:return e.Type.Decimal;case e.Type.Time:switch(c.unit){case e.TimeUnit.SECOND:return e.Type.TimeSecond;case e.TimeUnit.MILLISECOND:return e.Type.TimeMillisecond;case e.TimeUnit.MICROSECOND:return e.Type.TimeMicrosecond;case e.TimeUnit.NANOSECOND:return e.Type.TimeNanosecond}return e.Type.Time;case e.Type.Timestamp:switch(c.unit){case e.TimeUnit.SECOND:return e.Type.TimestampSecond;case e.TimeUnit.MILLISECOND:return e.Type.TimestampMillisecond;case e.TimeUnit.MICROSECOND:return e.Type.TimestampMicrosecond;case e.TimeUnit.NANOSECOND:return e.Type.TimestampNanosecond}return e.Type.Timestamp;case e.Type.Date:switch(c.unit){case e.DateUnit.DAY:return e.Type.DateDay;case e.DateUnit.MILLISECOND:return e.Type.DateMillisecond}return e.Type.Date;case e.Type.Interval:switch(c.unit){case e.IntervalUnit.DAY_TIME:return e.Type.IntervalDayTime;case e.IntervalUnit.YEAR_MONTH:return e.Type.IntervalYearMonth}return e.Type.Interval;case e.Type.Map:return e.Type.Map;case e.Type.List:return e.Type.List;case e.Type.Struct:return e.Type.Struct;case e.Type.Union:switch(c.mode){case e.UnionMode.Dense:return e.Type.DenseUnion;case e.UnionMode.Sparse:return e.Type.SparseUnion}return e.Type.Union;case e.Type.FixedSizeBinary:return e.Type.FixedSizeBinary;case e.Type.FixedSizeList:return e.Type.FixedSizeList;case e.Type.Dictionary:return e.Type.Dictionary}throw new Error(`Unrecognized type '${e.Type[c.typeId]}'`)}return n.prototype.visitInt8=null,n.prototype.visitInt16=null,n.prototype.visitInt32=null,n.prototype.visitInt64=null,n.prototype.visitUint8=null,n.prototype.visitUint16=null,n.prototype.visitUint32=null,n.prototype.visitUint64=null,n.prototype.visitFloat16=null,n.prototype.visitFloat32=null,n.prototype.visitFloat64=null,n.prototype.visitDateDay=null,n.prototype.visitDateMillisecond=null,n.prototype.visitTimestampSecond=null,n.prototype.visitTimestampMillisecond=null,n.prototype.visitTimestampMicrosecond=null,n.prototype.visitTimestampNanosecond=null,n.prototype.visitTimeSecond=null,n.prototype.visitTimeMillisecond=null,n.prototype.visitTimeMicrosecond=null,n.prototype.visitTimeNanosecond=null,n.prototype.visitDenseUnion=null,n.prototype.visitSparseUnion=null,n.prototype.visitIntervalDayTime=null,n.prototype.visitIntervalYearMonth=null,j_}var z_={},YB={},sd={},X3;function lE(){if(X3)return sd;X3=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.float64ToUint16=sd.uint16ToFloat64=void 0;const e=new Float64Array(1),t=new Uint32Array(e.buffer);function n(s){const a=(s&31744)>>10,c=(s&1023)/1024,d=Math.pow(-1,(s&32768)>>15);switch(a){case 31:return d*(c?Number.NaN:1/0);case 0:return d*(c?6103515625e-14*c:0)}return d*Math.pow(2,a-15)*(1+c)}sd.uint16ToFloat64=n;function i(s){if(s!==s)return 32256;e[0]=s;const a=(t[1]&2147483648)>>16&65535;let c=t[1]&2146435072,d=0;return c>=1089470464?t[0]>0?c=31744:(c=(c&2080374784)>>16,d=(t[1]&1048575)>>10):c<=1056964608?(d=1048576+(t[1]&1048575),d=1048576+(d<<(c>>20)-998)>>21,c=0):(c=c-1056964608>>10,d=(t[1]&1048575)+512>>10),a|c|d&65535}return sd.float64ToUint16=i,sd}var K3;function ya(){return K3||(K3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.instance=e.setIntervalYearMonth=e.setIntervalDayTime=e.setIntervalValue=e.setDecimal=e.setTime=e.setTimeNanosecond=e.setTimeMicrosecond=e.setTimeMillisecond=e.setTimeSecond=e.setTimestamp=e.setTimestampNanosecond=e.setTimestampMicrosecond=e.setTimestampMillisecond=e.setTimestampSecond=e.setDate=e.setFixedSizeBinary=e.setDateMillisecond=e.setDateDay=e.setAnyFloat=e.setFloat16=e.setFloat=e.setInt=e.setVariableWidthBytes=e.setEpochMsToNanosecondsLong=e.setEpochMsToMicrosecondsLong=e.setEpochMsToMillisecondsLong=e.setEpochMsToDays=e.SetVisitor=void 0;const t=As(),n=Ms(),i=a_(),s=lE(),a=$n();class c extends n.Visitor{}e.SetVisitor=c;function d(K){return(Z,Q,fe)=>{if(Z.setValid(Q,fe!=null))return K(Z,Q,fe)}}const f=(K,Z,Q)=>{K[Z]=Math.trunc(Q/864e5)};e.setEpochMsToDays=f;const u=(K,Z,Q)=>{K[Z]=Math.trunc(Q%4294967296),K[Z+1]=Math.trunc(Q/4294967296)};e.setEpochMsToMillisecondsLong=u;const r=(K,Z,Q)=>{K[Z]=Math.trunc(Q*1e3%4294967296),K[Z+1]=Math.trunc(Q*1e3/4294967296)};e.setEpochMsToMicrosecondsLong=r;const h=(K,Z,Q)=>{K[Z]=Math.trunc(Q*1e6%4294967296),K[Z+1]=Math.trunc(Q*1e6/4294967296)};e.setEpochMsToNanosecondsLong=h;const p=(K,Z,Q,fe)=>{if(Q+1<Z.length){const{[Q]:ee,[Q+1]:le}=Z;K.set(fe.subarray(0,le-ee),ee)}};e.setVariableWidthBytes=p;const _=({offset:K,values:Z},Q,fe)=>{const ee=K+Q;fe?Z[ee>>3]|=1<<ee%8:Z[ee>>3]&=~(1<<ee%8)},l=({values:K},Z,Q)=>{K[Z]=Q};e.setInt=l;const b=({values:K},Z,Q)=>{K[Z]=Q};e.setFloat=b;const m=({values:K},Z,Q)=>{K[Z]=(0,s.float64ToUint16)(Q)};e.setFloat16=m;const E=(K,Z,Q)=>{switch(K.type.precision){case a.Precision.HALF:return(0,e.setFloat16)(K,Z,Q);case a.Precision.SINGLE:case a.Precision.DOUBLE:return(0,e.setFloat)(K,Z,Q)}};e.setAnyFloat=E;const B=({values:K},Z,Q)=>{(0,e.setEpochMsToDays)(K,Z,Q.valueOf())};e.setDateDay=B;const I=({values:K},Z,Q)=>{(0,e.setEpochMsToMillisecondsLong)(K,Z*2,Q.valueOf())};e.setDateMillisecond=I;const k=({stride:K,values:Z},Q,fe)=>{Z.set(fe.subarray(0,K),K*Q)};e.setFixedSizeBinary=k;const F=({values:K,valueOffsets:Z},Q,fe)=>(0,e.setVariableWidthBytes)(K,Z,Q,fe),x=({values:K,valueOffsets:Z},Q,fe)=>{(0,e.setVariableWidthBytes)(K,Z,Q,(0,i.encodeUtf8)(fe))},M=(K,Z,Q)=>{K.type.unit===a.DateUnit.DAY?(0,e.setDateDay)(K,Z,Q):(0,e.setDateMillisecond)(K,Z,Q)};e.setDate=M;const R=({values:K},Z,Q)=>(0,e.setEpochMsToMillisecondsLong)(K,Z*2,Q/1e3);e.setTimestampSecond=R;const P=({values:K},Z,Q)=>(0,e.setEpochMsToMillisecondsLong)(K,Z*2,Q);e.setTimestampMillisecond=P;const C=({values:K},Z,Q)=>(0,e.setEpochMsToMicrosecondsLong)(K,Z*2,Q);e.setTimestampMicrosecond=C;const D=({values:K},Z,Q)=>(0,e.setEpochMsToNanosecondsLong)(K,Z*2,Q);e.setTimestampNanosecond=D;const j=(K,Z,Q)=>{switch(K.type.unit){case a.TimeUnit.SECOND:return(0,e.setTimestampSecond)(K,Z,Q);case a.TimeUnit.MILLISECOND:return(0,e.setTimestampMillisecond)(K,Z,Q);case a.TimeUnit.MICROSECOND:return(0,e.setTimestampMicrosecond)(K,Z,Q);case a.TimeUnit.NANOSECOND:return(0,e.setTimestampNanosecond)(K,Z,Q)}};e.setTimestamp=j;const $=({values:K},Z,Q)=>{K[Z]=Q};e.setTimeSecond=$;const W=({values:K},Z,Q)=>{K[Z]=Q};e.setTimeMillisecond=W;const H=({values:K},Z,Q)=>{K[Z]=Q};e.setTimeMicrosecond=H;const G=({values:K},Z,Q)=>{K[Z]=Q};e.setTimeNanosecond=G;const z=(K,Z,Q)=>{switch(K.type.unit){case a.TimeUnit.SECOND:return(0,e.setTimeSecond)(K,Z,Q);case a.TimeUnit.MILLISECOND:return(0,e.setTimeMillisecond)(K,Z,Q);case a.TimeUnit.MICROSECOND:return(0,e.setTimeMicrosecond)(K,Z,Q);case a.TimeUnit.NANOSECOND:return(0,e.setTimeNanosecond)(K,Z,Q)}};e.setTime=z;const q=({values:K,stride:Z},Q,fe)=>{K.set(fe.subarray(0,Z),Z*Q)};e.setDecimal=q;const ie=(K,Z,Q)=>{const fe=K.children[0],ee=K.valueOffsets,le=e.instance.getVisitFn(fe);if(Array.isArray(Q))for(let Ne=-1,He=ee[Z],ft=ee[Z+1];He<ft;)le(fe,He++,Q[++Ne]);else for(let Ne=-1,He=ee[Z],ft=ee[Z+1];He<ft;)le(fe,He++,Q.get(++Ne))},ce=(K,Z,Q)=>{const fe=K.children[0],{valueOffsets:ee}=K,le=e.instance.getVisitFn(fe);let{[Z]:Ne,[Z+1]:He}=ee;const ft=Q instanceof Map?Q.entries():Object.entries(Q);for(const de of ft)if(le(fe,Ne,de),++Ne>=He)break},se=(K,Z)=>(Q,fe,ee,le)=>fe&&Q(fe,K,Z[le]),Ie=(K,Z)=>(Q,fe,ee,le)=>fe&&Q(fe,K,Z.get(le)),he=(K,Z)=>(Q,fe,ee,le)=>fe&&Q(fe,K,Z.get(ee.name)),Me=(K,Z)=>(Q,fe,ee,le)=>fe&&Q(fe,K,Z[ee.name]),Ue=(K,Z,Q)=>{const fe=K.type.children.map(le=>e.instance.getVisitFn(le.type)),ee=Q instanceof Map?he(Z,Q):Q instanceof t.Vector?Ie(Z,Q):Array.isArray(Q)?se(Z,Q):Me(Z,Q);K.type.children.forEach((le,Ne)=>ee(fe[Ne],K.children[Ne],le,Ne))},_e=(K,Z,Q)=>{K.type.mode===a.UnionMode.Dense?ke(K,Z,Q):Ee(K,Z,Q)},ke=(K,Z,Q)=>{const fe=K.type.typeIdToChildIndex[K.typeIds[Z]],ee=K.children[fe];e.instance.visit(ee,K.valueOffsets[Z],Q)},Ee=(K,Z,Q)=>{const fe=K.type.typeIdToChildIndex[K.typeIds[Z]],ee=K.children[fe];e.instance.visit(ee,Z,Q)},ye=(K,Z,Q)=>{var fe;(fe=K.dictionary)===null||fe===void 0||fe.set(K.values[Z],Q)},X=(K,Z,Q)=>{K.type.unit===a.IntervalUnit.DAY_TIME?(0,e.setIntervalDayTime)(K,Z,Q):(0,e.setIntervalYearMonth)(K,Z,Q)};e.setIntervalValue=X;const Y=({values:K},Z,Q)=>{K.set(Q.subarray(0,2),2*Z)};e.setIntervalDayTime=Y;const U=({values:K},Z,Q)=>{K[Z]=Q[0]*12+Q[1]%12};e.setIntervalYearMonth=U;const J=(K,Z,Q)=>{const{stride:fe}=K,ee=K.children[0],le=e.instance.getVisitFn(ee);if(Array.isArray(Q))for(let Ne=-1,He=Z*fe;++Ne<fe;)le(ee,He+Ne,Q[Ne]);else for(let Ne=-1,He=Z*fe;++Ne<fe;)le(ee,He+Ne,Q.get(Ne))};c.prototype.visitBool=d(_),c.prototype.visitInt=d(e.setInt),c.prototype.visitInt8=d(e.setInt),c.prototype.visitInt16=d(e.setInt),c.prototype.visitInt32=d(e.setInt),c.prototype.visitInt64=d(e.setInt),c.prototype.visitUint8=d(e.setInt),c.prototype.visitUint16=d(e.setInt),c.prototype.visitUint32=d(e.setInt),c.prototype.visitUint64=d(e.setInt),c.prototype.visitFloat=d(e.setAnyFloat),c.prototype.visitFloat16=d(e.setFloat16),c.prototype.visitFloat32=d(e.setFloat),c.prototype.visitFloat64=d(e.setFloat),c.prototype.visitUtf8=d(x),c.prototype.visitBinary=d(F),c.prototype.visitFixedSizeBinary=d(e.setFixedSizeBinary),c.prototype.visitDate=d(e.setDate),c.prototype.visitDateDay=d(e.setDateDay),c.prototype.visitDateMillisecond=d(e.setDateMillisecond),c.prototype.visitTimestamp=d(e.setTimestamp),c.prototype.visitTimestampSecond=d(e.setTimestampSecond),c.prototype.visitTimestampMillisecond=d(e.setTimestampMillisecond),c.prototype.visitTimestampMicrosecond=d(e.setTimestampMicrosecond),c.prototype.visitTimestampNanosecond=d(e.setTimestampNanosecond),c.prototype.visitTime=d(e.setTime),c.prototype.visitTimeSecond=d(e.setTimeSecond),c.prototype.visitTimeMillisecond=d(e.setTimeMillisecond),c.prototype.visitTimeMicrosecond=d(e.setTimeMicrosecond),c.prototype.visitTimeNanosecond=d(e.setTimeNanosecond),c.prototype.visitDecimal=d(e.setDecimal),c.prototype.visitList=d(ie),c.prototype.visitStruct=d(Ue),c.prototype.visitUnion=d(_e),c.prototype.visitDenseUnion=d(ke),c.prototype.visitSparseUnion=d(Ee),c.prototype.visitDictionary=d(ye),c.prototype.visitInterval=d(e.setIntervalValue),c.prototype.visitIntervalDayTime=d(e.setIntervalDayTime),c.prototype.visitIntervalYearMonth=d(e.setIntervalYearMonth),c.prototype.visitFixedSizeList=d(J),c.prototype.visitMap=d(ce),e.instance=new c}(YB)),YB}var J3;function sA(){if(J3)return z_;J3=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.StructRow=void 0;const e=tA(),t=o_(),n=ya(),i=Symbol.for("parent"),s=Symbol.for("rowIndex");class a{constructor(u,r){return this[i]=u,this[s]=r,new Proxy(this,new d)}toArray(){return Object.values(this.toJSON())}toJSON(){const u=this[s],r=this[i],h=r.type.children,p={};for(let _=-1,l=h.length;++_<l;)p[h[_].name]=t.instance.visit(r.children[_],u);return p}toString(){return`{${[...this].map(([u,r])=>`${(0,e.valueToString)(u)}: ${(0,e.valueToString)(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new c(this[i],this[s])}}z_.StructRow=a;class c{constructor(u,r){this.childIndex=0,this.children=u.children,this.rowIndex=r,this.childFields=u.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const u=this.childIndex;return u<this.numChildren?(this.childIndex=u+1,{done:!1,value:[this.childFields[u].name,t.instance.visit(this.children[u],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(a.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[i]:{writable:!0,enumerable:!1,configurable:!1,value:null},[s]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class d{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(u){return u[i].type.children.map(r=>r.name)}has(u,r){return u[i].type.children.findIndex(h=>h.name===r)!==-1}getOwnPropertyDescriptor(u,r){if(u[i].type.children.findIndex(h=>h.name===r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(u,r){if(Reflect.has(u,r))return u[r];const h=u[i].type.children.findIndex(p=>p.name===r);if(h!==-1){const p=t.instance.visit(u[i].children[h],u[s]);return Reflect.set(u,r,p),p}}set(u,r,h){const p=u[i].type.children.findIndex(_=>_.name===r);return p!==-1?(n.instance.visit(u[i].children[p],u[s],h),Reflect.set(u,r,h)):Reflect.has(u,r)||typeof r=="symbol"?Reflect.set(u,r,h):!1}}return z_}var Q3;function o_(){return Q3||(Q3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.instance=e.GetVisitor=void 0;const t=nA(),n=As(),i=Ms(),s=cE(),a=sA(),c=a_(),d=lE(),f=$n();class u extends i.Visitor{}e.GetVisitor=u;function r(ee){return(le,Ne)=>le.getValid(Ne)?ee(le,Ne):null}const h=(ee,le)=>864e5*ee[le],p=(ee,le)=>4294967296*ee[le+1]+(ee[le]>>>0),_=(ee,le)=>4294967296*(ee[le+1]/1e3)+(ee[le]>>>0)/1e3,l=(ee,le)=>4294967296*(ee[le+1]/1e6)+(ee[le]>>>0)/1e6,b=ee=>new Date(ee),m=(ee,le)=>b(h(ee,le)),E=(ee,le)=>b(p(ee,le)),B=(ee,le)=>null,I=(ee,le,Ne)=>{if(Ne+1>=le.length)return null;const He=le[Ne],ft=le[Ne+1];return ee.subarray(He,ft)},k=({offset:ee,values:le},Ne)=>{const He=ee+Ne;return(le[He>>3]&1<<He%8)!==0},F=({values:ee},le)=>m(ee,le),x=({values:ee},le)=>E(ee,le*2),M=({stride:ee,values:le},Ne)=>le[ee*Ne],R=({stride:ee,values:le},Ne)=>(0,d.uint16ToFloat64)(le[ee*Ne]),P=({values:ee},le)=>ee[le],C=({stride:ee,values:le},Ne)=>le.subarray(ee*Ne,ee*(Ne+1)),D=({values:ee,valueOffsets:le},Ne)=>I(ee,le,Ne),j=({values:ee,valueOffsets:le},Ne)=>{const He=I(ee,le,Ne);return He!==null?(0,c.decodeUtf8)(He):null},$=({values:ee},le)=>ee[le],W=({type:ee,values:le},Ne)=>ee.precision!==f.Precision.HALF?le[Ne]:(0,d.uint16ToFloat64)(le[Ne]),H=(ee,le)=>ee.type.unit===f.DateUnit.DAY?F(ee,le):x(ee,le),G=({values:ee},le)=>1e3*p(ee,le*2),z=({values:ee},le)=>p(ee,le*2),q=({values:ee},le)=>_(ee,le*2),ie=({values:ee},le)=>l(ee,le*2),ce=(ee,le)=>{switch(ee.type.unit){case f.TimeUnit.SECOND:return G(ee,le);case f.TimeUnit.MILLISECOND:return z(ee,le);case f.TimeUnit.MICROSECOND:return q(ee,le);case f.TimeUnit.NANOSECOND:return ie(ee,le)}},se=({values:ee},le)=>ee[le],Ie=({values:ee},le)=>ee[le],he=({values:ee},le)=>ee[le],Me=({values:ee},le)=>ee[le],Ue=(ee,le)=>{switch(ee.type.unit){case f.TimeUnit.SECOND:return se(ee,le);case f.TimeUnit.MILLISECOND:return Ie(ee,le);case f.TimeUnit.MICROSECOND:return he(ee,le);case f.TimeUnit.NANOSECOND:return Me(ee,le)}},_e=({values:ee,stride:le},Ne)=>t.BN.decimal(ee.subarray(le*Ne,le*(Ne+1))),ke=(ee,le)=>{const{valueOffsets:Ne,stride:He,children:ft}=ee,{[le*He]:de,[le*He+1]:ve}=Ne,re=ft[0].slice(de,ve-de);return new n.Vector([re])},Ee=(ee,le)=>{const{valueOffsets:Ne,children:He}=ee,{[le]:ft,[le+1]:de}=Ne,ve=He[0];return new s.MapRow(ve.slice(ft,de-ft))},ye=(ee,le)=>new a.StructRow(ee,le),X=(ee,le)=>ee.type.mode===f.UnionMode.Dense?Y(ee,le):U(ee,le),Y=(ee,le)=>{const Ne=ee.type.typeIdToChildIndex[ee.typeIds[le]],He=ee.children[Ne];return e.instance.visit(He,ee.valueOffsets[le])},U=(ee,le)=>{const Ne=ee.type.typeIdToChildIndex[ee.typeIds[le]],He=ee.children[Ne];return e.instance.visit(He,le)},J=(ee,le)=>{var Ne;return(Ne=ee.dictionary)===null||Ne===void 0?void 0:Ne.get(ee.values[le])},K=(ee,le)=>ee.type.unit===f.IntervalUnit.DAY_TIME?Z(ee,le):Q(ee,le),Z=({values:ee},le)=>ee.subarray(2*le,2*(le+1)),Q=({values:ee},le)=>{const Ne=ee[le],He=new Int32Array(2);return He[0]=Math.trunc(Ne/12),He[1]=Math.trunc(Ne%12),He},fe=(ee,le)=>{const{stride:Ne,children:He}=ee,de=He[0].slice(le*Ne,Ne);return new n.Vector([de])};u.prototype.visitNull=r(B),u.prototype.visitBool=r(k),u.prototype.visitInt=r($),u.prototype.visitInt8=r(M),u.prototype.visitInt16=r(M),u.prototype.visitInt32=r(M),u.prototype.visitInt64=r(P),u.prototype.visitUint8=r(M),u.prototype.visitUint16=r(M),u.prototype.visitUint32=r(M),u.prototype.visitUint64=r(P),u.prototype.visitFloat=r(W),u.prototype.visitFloat16=r(R),u.prototype.visitFloat32=r(M),u.prototype.visitFloat64=r(M),u.prototype.visitUtf8=r(j),u.prototype.visitBinary=r(D),u.prototype.visitFixedSizeBinary=r(C),u.prototype.visitDate=r(H),u.prototype.visitDateDay=r(F),u.prototype.visitDateMillisecond=r(x),u.prototype.visitTimestamp=r(ce),u.prototype.visitTimestampSecond=r(G),u.prototype.visitTimestampMillisecond=r(z),u.prototype.visitTimestampMicrosecond=r(q),u.prototype.visitTimestampNanosecond=r(ie),u.prototype.visitTime=r(Ue),u.prototype.visitTimeSecond=r(se),u.prototype.visitTimeMillisecond=r(Ie),u.prototype.visitTimeMicrosecond=r(he),u.prototype.visitTimeNanosecond=r(Me),u.prototype.visitDecimal=r(_e),u.prototype.visitList=r(ke),u.prototype.visitStruct=r(ye),u.prototype.visitUnion=r(X),u.prototype.visitDenseUnion=r(Y),u.prototype.visitSparseUnion=r(U),u.prototype.visitDictionary=r(J),u.prototype.visitInterval=r(K),u.prototype.visitIntervalDayTime=r(Z),u.prototype.visitIntervalYearMonth=r(Q),u.prototype.visitFixedSizeList=r(fe),u.prototype.visitMap=r(Ee),e.instance=new u}(HB)),HB}var Z3;function cE(){return Z3||(Z3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MapRow=e.kVals=e.kKeys=void 0;const t=As(),n=tA(),i=o_(),s=ya();e.kKeys=Symbol.for("keys"),e.kVals=Symbol.for("vals");class a{constructor(u){return this[e.kKeys]=new t.Vector([u.children[0]]).memoize(),this[e.kVals]=u.children[1],new Proxy(this,new d)}[Symbol.iterator](){return new c(this[e.kKeys],this[e.kVals])}get size(){return this[e.kKeys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const u=this[e.kKeys],r=this[e.kVals],h={};for(let p=-1,_=u.length;++p<_;)h[u.get(p)]=i.instance.visit(r,p);return h}toString(){return`{${[...this].map(([u,r])=>`${(0,n.valueToString)(u)}: ${(0,n.valueToString)(r)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}e.MapRow=a;class c{constructor(u,r){this.keys=u,this.vals=r,this.keyIndex=0,this.numKeys=u.length}[Symbol.iterator](){return this}next(){const u=this.keyIndex;return u===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(u),i.instance.visit(this.vals,u)]})}}class d{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(u){return u[e.kKeys].toArray().map(String)}has(u,r){return u[e.kKeys].includes(r)}getOwnPropertyDescriptor(u,r){if(u[e.kKeys].indexOf(r)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(u,r){if(Reflect.has(u,r))return u[r];const h=u[e.kKeys].indexOf(r);if(h!==-1){const p=i.instance.visit(Reflect.get(u,e.kVals),h);return Reflect.set(u,r,p),p}}set(u,r,h){const p=u[e.kKeys].indexOf(r);return p!==-1?(s.instance.visit(Reflect.get(u,e.kVals),p,h),Reflect.set(u,r,h)):Reflect.has(u,r)?Reflect.set(u,r,h):!1}}Object.defineProperties(a.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[e.kKeys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[e.kVals]:{writable:!0,enumerable:!1,configurable:!1,value:null}})}(GB)),GB}var e6;function dE(){if(e6)return Mo;e6=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.createElementComparator=Mo.clampRange=Mo.clampIndex=void 0;const e=As(),t=cE(),n=sA(),i=ji();function s(E,B,I){const k=E.length,F=B>-1?B:k+B%k;return I?I(E,F):F}Mo.clampIndex=s;let a;function c(E,B,I,k){const{length:F=0}=E;let x=typeof B!="number"?0:B,M=typeof I!="number"?F:I;return x<0&&(x=(x%F+F)%F),M<0&&(M=(M%F+F)%F),M<x&&(a=x,x=M,M=a),M>F&&(M=F),k?k(E,x,M):[x,M]}Mo.clampRange=c;const d=E=>E!==E;function f(E){if(typeof E!=="object"||E===null)return d(E)?d:I=>I===E;if(E instanceof Date){const I=E.valueOf();return k=>k instanceof Date?k.valueOf()===I:!1}return ArrayBuffer.isView(E)?I=>I?(0,i.compareArrayLike)(E,I):!1:E instanceof Map?r(E):Array.isArray(E)?u(E):E instanceof e.Vector?h(E):p(E,!0)}Mo.createElementComparator=f;function u(E){const B=[];for(let I=-1,k=E.length;++I<k;)B[I]=f(E[I]);return _(B)}function r(E){let B=-1;const I=[];for(const k of E.values())I[++B]=f(k);return _(I)}function h(E){const B=[];for(let I=-1,k=E.length;++I<k;)B[I]=f(E.get(I));return _(B)}function p(E,B=!1){const I=Object.keys(E);if(!B&&I.length===0)return()=>!1;const k=[];for(let F=-1,x=I.length;++F<x;)k[F]=f(E[I[F]]);return _(k,I)}function _(E,B){return I=>{if(!I||typeof I!="object")return!1;switch(I.constructor){case Array:return l(E,I);case Map:return m(E,I,I.keys());case t.MapRow:case n.StructRow:case Object:case void 0:return m(E,I,B||Object.keys(I))}return I instanceof e.Vector?b(E,I):!1}}function l(E,B){const I=E.length;if(B.length!==I)return!1;for(let k=-1;++k<I;)if(!E[k](B[k]))return!1;return!0}function b(E,B){const I=E.length;if(B.length!==I)return!1;for(let k=-1;++k<I;)if(!E[k](B.get(k)))return!1;return!0}function m(E,B,I){const k=I[Symbol.iterator](),F=B instanceof Map?B.keys():Object.keys(B)[Symbol.iterator](),x=B instanceof Map?B.values():Object.values(B)[Symbol.iterator]();let M=0;const R=E.length;let P=x.next(),C=k.next(),D=F.next();for(;M<R&&!C.done&&!D.done&&!P.done&&!(C.value!==D.value||!E[M](P.value));++M,C=k.next(),D=F.next(),P=x.next());return M===R&&C.done&&D.done&&P.done?!0:(k.return&&k.return(),F.return&&F.return(),x.return&&x.return(),!1)}return Mo}var XB={},Cn={},t6;function l_(){if(t6)return Cn;t6=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.popcnt_uint32=Cn.popcnt_array=Cn.popcnt_bit_range=Cn.BitIterator=Cn.packBools=Cn.truncateBitmap=Cn.setBool=Cn.getBit=Cn.getBool=void 0;function e(u,r,h,p){return(h&1<<p)!==0}Cn.getBool=e;function t(u,r,h,p){return(h&1<<p)>>p}Cn.getBit=t;function n(u,r,h){return h?!!(u[r>>3]|=1<<r%8)||!0:!(u[r>>3]&=~(1<<r%8))&&!1}Cn.setBool=n;function i(u,r,h){const p=h.byteLength+7&-8;if(u>0||h.byteLength<p){const _=new Uint8Array(p);return _.set(u%8===0?h.subarray(u>>3):s(new a(h,u,r,null,e)).subarray(0,p)),_}return h}Cn.truncateBitmap=i;function s(u){const r=[];let h=0,p=0,_=0;for(const b of u)b&&(_|=1<<p),++p===8&&(r[h++]=_,_=p=0);(h===0||p>0)&&(r[h++]=_);const l=new Uint8Array(r.length+7&-8);return l.set(r),l}Cn.packBools=s;class a{constructor(r,h,p,_,l){this.bytes=r,this.length=p,this.context=_,this.get=l,this.bit=h%8,this.byteIndex=h>>3,this.byte=r[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}Cn.BitIterator=a;function c(u,r,h){if(h-r<=0)return 0;if(h-r<8){let l=0;for(const b of new a(u,r,h-r,u,t))l+=b;return l}const p=h>>3<<3,_=r+(r%8===0?0:8-r%8);return c(u,r,_)+c(u,p,h)+d(u,_>>3,p-_>>3)}Cn.popcnt_bit_range=c;function d(u,r,h){let p=0,_=Math.trunc(r);const l=new DataView(u.buffer,u.byteOffset,u.byteLength),b=h===void 0?u.byteLength:_+h;for(;b-_>=4;)p+=f(l.getUint32(_)),_+=4;for(;b-_>=2;)p+=f(l.getUint16(_)),_+=2;for(;b-_>=1;)p+=f(l.getUint8(_)),_+=1;return p}Cn.popcnt_array=d;function f(u){let r=Math.trunc(u);return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24}return Cn.popcnt_uint32=f,Cn}var n6;function Bl(){return n6||(n6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.makeData=e.Data=e.kUnknownNullCount=void 0;const t=As(),n=$n(),i=wn(),s=l_();e.kUnknownNullCount=-1;class a{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let h=0;const{valueOffsets:p,values:_,nullBitmap:l,typeIds:b}=this;return p&&(h+=p.byteLength),_&&(h+=_.byteLength),l&&(h+=l.byteLength),b&&(h+=b.byteLength),this.children.reduce((m,E)=>m+E.byteLength,h)}get nullCount(){let h=this._nullCount,p;return h<=e.kUnknownNullCount&&(p=this.nullBitmap)&&(this._nullCount=h=this.length-(0,s.popcnt_bit_range)(p,this.offset,this.offset+this.length)),h}constructor(h,p,_,l,b,m=[],E){this.type=h,this.children=m,this.dictionary=E,this.offset=Math.floor(Math.max(p||0,0)),this.length=Math.floor(Math.max(_||0,0)),this._nullCount=Math.floor(Math.max(l||0,-1));let B;b instanceof a?(this.stride=b.stride,this.values=b.values,this.typeIds=b.typeIds,this.nullBitmap=b.nullBitmap,this.valueOffsets=b.valueOffsets):(this.stride=(0,i.strideForType)(h),b&&((B=b[0])&&(this.valueOffsets=B),(B=b[1])&&(this.values=B),(B=b[2])&&(this.nullBitmap=B),(B=b[3])&&(this.typeIds=B))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}getValid(h){if(this.nullable&&this.nullCount>0){const p=this.offset+h;return(this.nullBitmap[p>>3]&1<<p%8)!==0}return!0}setValid(h,p){if(!this.nullable)return p;if(!this.nullBitmap||this.nullBitmap.byteLength<=h>>3){const{nullBitmap:B}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:B,_nullCount:0})}const{nullBitmap:_,offset:l}=this,b=l+h>>3,m=(l+h)%8,E=_[b]>>m&1;return p?E===0&&(_[b]|=1<<m,this._nullCount=this.nullCount+1):E===1&&(_[b]&=~(1<<m),this._nullCount=this.nullCount-1),p}clone(h=this.type,p=this.offset,_=this.length,l=this._nullCount,b=this,m=this.children){return new a(h,p,_,l,b,m,this.dictionary)}slice(h,p){const{stride:_,typeId:l,children:b}=this,m=+(this._nullCount===0)-1,E=l===16?_:1,B=this._sliceBuffers(h,p,_,l);return this.clone(this.type,this.offset+h,p,m,B,b.length===0||this.valueOffsets?b:this._sliceChildren(b,E*h,E*p))}_changeLengthAndBackfillNullBitmap(h){if(this.typeId===n.Type.Null)return this.clone(this.type,0,h,0);const{length:p,nullCount:_}=this,l=new Uint8Array((h+63&-64)>>3).fill(255,0,p>>3);l[p>>3]=(1<<p-(p&-8))-1,_>0&&l.set((0,s.truncateBitmap)(this.offset,p,this.nullBitmap),0);const b=this.buffers;return b[n.BufferType.VALIDITY]=l,this.clone(this.type,0,h,_+(h-p),b)}_sliceBuffers(h,p,_,l){let b;const{buffers:m}=this;return(b=m[n.BufferType.TYPE])&&(m[n.BufferType.TYPE]=b.subarray(h,h+p)),(b=m[n.BufferType.OFFSET])&&(m[n.BufferType.OFFSET]=b.subarray(h,h+p+1))||(b=m[n.BufferType.DATA])&&(m[n.BufferType.DATA]=l===6?b:b.subarray(_*h,_*(h+p))),m}_sliceChildren(h,p,_){return h.map(l=>l.slice(p,_))}}e.Data=a,a.prototype.children=Object.freeze([]);const c=Ms(),d=ji();class f extends c.Visitor{visit(h){return this.getVisitFn(h.type).call(this,h)}visitNull(h){const{["type"]:p,["offset"]:_=0,["length"]:l=0}=h;return new a(p,_,l,0)}visitBool(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.ArrayType,h.data),{["length"]:m=b.length>>3,["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,b,l])}visitInt(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.ArrayType,h.data),{["length"]:m=b.length,["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,b,l])}visitFloat(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.ArrayType,h.data),{["length"]:m=b.length,["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,b,l])}visitUtf8(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.data),b=(0,d.toUint8Array)(h.nullBitmap),m=(0,d.toInt32Array)(h.valueOffsets),{["length"]:E=m.length-1,["nullCount"]:B=h.nullBitmap?-1:0}=h;return new a(p,_,E,B,[m,l,b])}visitBinary(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.data),b=(0,d.toUint8Array)(h.nullBitmap),m=(0,d.toInt32Array)(h.valueOffsets),{["length"]:E=m.length-1,["nullCount"]:B=h.nullBitmap?-1:0}=h;return new a(p,_,E,B,[m,l,b])}visitFixedSizeBinary(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.ArrayType,h.data),{["length"]:m=b.length/(0,i.strideForType)(p),["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,b,l])}visitDate(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.ArrayType,h.data),{["length"]:m=b.length/(0,i.strideForType)(p),["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,b,l])}visitTimestamp(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.ArrayType,h.data),{["length"]:m=b.length/(0,i.strideForType)(p),["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,b,l])}visitTime(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.ArrayType,h.data),{["length"]:m=b.length/(0,i.strideForType)(p),["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,b,l])}visitDecimal(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.ArrayType,h.data),{["length"]:m=b.length/(0,i.strideForType)(p),["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,b,l])}visitList(h){const{["type"]:p,["offset"]:_=0,["child"]:l}=h,b=(0,d.toUint8Array)(h.nullBitmap),m=(0,d.toInt32Array)(h.valueOffsets),{["length"]:E=m.length-1,["nullCount"]:B=h.nullBitmap?-1:0}=h;return new a(p,_,E,B,[m,void 0,b],[l])}visitStruct(h){const{["type"]:p,["offset"]:_=0,["children"]:l=[]}=h,b=(0,d.toUint8Array)(h.nullBitmap),{length:m=l.reduce((B,{length:I})=>Math.max(B,I),0),nullCount:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,void 0,b],l)}visitUnion(h){const{["type"]:p,["offset"]:_=0,["children"]:l=[]}=h,b=(0,d.toUint8Array)(h.nullBitmap),m=(0,d.toArrayBufferView)(p.ArrayType,h.typeIds),{["length"]:E=m.length,["nullCount"]:B=h.nullBitmap?-1:0}=h;if(i.DataType.isSparseUnion(p))return new a(p,_,E,B,[void 0,void 0,b,m],l);const I=(0,d.toInt32Array)(h.valueOffsets);return new a(p,_,E,B,[I,void 0,b,m],l)}visitDictionary(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.indices.ArrayType,h.data),{["dictionary"]:m=new t.Vector([new f().visit({type:p.dictionary})])}=h,{["length"]:E=b.length,["nullCount"]:B=h.nullBitmap?-1:0}=h;return new a(p,_,E,B,[void 0,b,l],[],m)}visitInterval(h){const{["type"]:p,["offset"]:_=0}=h,l=(0,d.toUint8Array)(h.nullBitmap),b=(0,d.toArrayBufferView)(p.ArrayType,h.data),{["length"]:m=b.length/(0,i.strideForType)(p),["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,b,l])}visitFixedSizeList(h){const{["type"]:p,["offset"]:_=0,["child"]:l=new f().visit({type:p.valueType})}=h,b=(0,d.toUint8Array)(h.nullBitmap),{["length"]:m=l.length/(0,i.strideForType)(p),["nullCount"]:E=h.nullBitmap?-1:0}=h;return new a(p,_,m,E,[void 0,void 0,b],[l])}visitMap(h){const{["type"]:p,["offset"]:_=0,["child"]:l=new f().visit({type:p.childType})}=h,b=(0,d.toUint8Array)(h.nullBitmap),m=(0,d.toInt32Array)(h.valueOffsets),{["length"]:E=m.length-1,["nullCount"]:B=h.nullBitmap?-1:0}=h;return new a(p,_,E,B,[m,void 0,b],[l])}}function u(r){return new f().visit(r)}e.makeData=u}(XB)),XB}var Ln={},i6;function rA(){if(i6)return Ln;i6=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.wrapChunkedIndexOf=Ln.wrapChunkedCall2=Ln.wrapChunkedCall1=Ln.isChunkedValid=Ln.binarySearch=Ln.sliceChunks=Ln.computeChunkOffsets=Ln.computeChunkNullCounts=Ln.ChunkedIterator=void 0;class e{constructor(r=0,h){this.numChunks=r,this.getChunkIterator=h,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const r=this.chunkIterator.next();if(!r.done)return r;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}Ln.ChunkedIterator=e;function t(u){return u.reduce((r,h)=>r+h.nullCount,0)}Ln.computeChunkNullCounts=t;function n(u){return u.reduce((r,h,p)=>(r[p+1]=r[p]+h.length,r),new Uint32Array(u.length+1))}Ln.computeChunkOffsets=n;function i(u,r,h,p){const _=[];for(let l=-1,b=u.length;++l<b;){const m=u[l],E=r[l],{length:B}=m;if(E>=p)break;if(h>=E+B)continue;if(E>=h&&E+B<=p){_.push(m);continue}const I=Math.max(0,h-E),k=Math.min(p-E,B);_.push(m.slice(I,k-I))}return _.length===0&&_.push(u[0].slice(0,0)),_}Ln.sliceChunks=i;function s(u,r,h,p){let _=0,l=0,b=r.length-1;do{if(_>=b-1)return h<r[b]?p(u,_,h-r[_]):null;l=_+Math.trunc((b-_)*.5),h<r[l]?b=l:_=l}while(_<b)}Ln.binarySearch=s;function a(u,r){return u.getValid(r)}Ln.isChunkedValid=a;function c(u){function r(h,p,_){return u(h[p],_)}return function(h){const p=this.data;return s(p,this._offsets,h,r)}}Ln.wrapChunkedCall1=c;function d(u){let r;function h(p,_,l){return u(p[_],l,r)}return function(p,_){const l=this.data;r=_;const b=s(l,this._offsets,p,h);return r=void 0,b}}Ln.wrapChunkedCall2=d;function f(u){let r;function h(p,_,l){let b=l,m=0,E=0;for(let B=_-1,I=p.length;++B<I;){const k=p[B];if(~(m=u(k,r,b)))return E+m;b=0,E+=k.length}return-1}return function(p,_){r=p;const l=this.data,b=typeof _!="number"?h(l,0,0):s(l,this._offsets,_,h);return r=void 0,b}}return Ln.wrapChunkedIndexOf=f,Ln}var rd={},s6;function aA(){if(s6)return rd;s6=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.instance=rd.IndexOfVisitor=void 0;const e=Ms(),t=o_(),n=l_(),i=dE();class s extends e.Visitor{}rd.IndexOfVisitor=s;function a(u,r){return r===null&&u.length>0?0:-1}function c(u,r){const{nullBitmap:h}=u;if(!h||u.nullCount<=0)return-1;let p=0;for(const _ of new n.BitIterator(h,u.offset+(r||0),u.length,h,n.getBool)){if(!_)return p;++p}return-1}function d(u,r,h){if(r===void 0)return-1;if(r===null)return c(u,h);const p=t.instance.getVisitFn(u),_=(0,i.createElementComparator)(r);for(let l=(h||0)-1,b=u.length;++l<b;)if(_(p(u,l)))return l;return-1}function f(u,r,h){const p=t.instance.getVisitFn(u),_=(0,i.createElementComparator)(r);for(let l=(h||0)-1,b=u.length;++l<b;)if(_(p(u,l)))return l;return-1}return s.prototype.visitNull=a,s.prototype.visitBool=d,s.prototype.visitInt=d,s.prototype.visitInt8=d,s.prototype.visitInt16=d,s.prototype.visitInt32=d,s.prototype.visitInt64=d,s.prototype.visitUint8=d,s.prototype.visitUint16=d,s.prototype.visitUint32=d,s.prototype.visitUint64=d,s.prototype.visitFloat=d,s.prototype.visitFloat16=d,s.prototype.visitFloat32=d,s.prototype.visitFloat64=d,s.prototype.visitUtf8=d,s.prototype.visitBinary=d,s.prototype.visitFixedSizeBinary=d,s.prototype.visitDate=d,s.prototype.visitDateDay=d,s.prototype.visitDateMillisecond=d,s.prototype.visitTimestamp=d,s.prototype.visitTimestampSecond=d,s.prototype.visitTimestampMillisecond=d,s.prototype.visitTimestampMicrosecond=d,s.prototype.visitTimestampNanosecond=d,s.prototype.visitTime=d,s.prototype.visitTimeSecond=d,s.prototype.visitTimeMillisecond=d,s.prototype.visitTimeMicrosecond=d,s.prototype.visitTimeNanosecond=d,s.prototype.visitDecimal=d,s.prototype.visitList=d,s.prototype.visitStruct=d,s.prototype.visitUnion=d,s.prototype.visitDenseUnion=f,s.prototype.visitSparseUnion=f,s.prototype.visitDictionary=d,s.prototype.visitInterval=d,s.prototype.visitIntervalDayTime=d,s.prototype.visitIntervalYearMonth=d,s.prototype.visitFixedSizeList=d,s.prototype.visitMap=d,rd.instance=new s,rd}var ad={},r6;function oA(){if(r6)return ad;r6=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.instance=ad.IteratorVisitor=void 0;const e=Ms(),t=$n(),n=wn(),i=rA();class s extends e.Visitor{}ad.IteratorVisitor=s;function a(d){const{type:f}=d;if(d.nullCount===0&&d.stride===1&&(f.typeId===t.Type.Timestamp||f instanceof n.Int&&f.bitWidth!==64||f instanceof n.Time&&f.bitWidth!==64||f instanceof n.Float&&f.precision!==t.Precision.HALF))return new i.ChunkedIterator(d.data.length,r=>{const h=d.data[r];return h.values.subarray(0,h.length)[Symbol.iterator]()});let u=0;return new i.ChunkedIterator(d.data.length,r=>{const p=d.data[r].length,_=d.slice(u,u+p);return u+=p,new c(_)})}class c{constructor(f){this.vector=f,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}return s.prototype.visitNull=a,s.prototype.visitBool=a,s.prototype.visitInt=a,s.prototype.visitInt8=a,s.prototype.visitInt16=a,s.prototype.visitInt32=a,s.prototype.visitInt64=a,s.prototype.visitUint8=a,s.prototype.visitUint16=a,s.prototype.visitUint32=a,s.prototype.visitUint64=a,s.prototype.visitFloat=a,s.prototype.visitFloat16=a,s.prototype.visitFloat32=a,s.prototype.visitFloat64=a,s.prototype.visitUtf8=a,s.prototype.visitBinary=a,s.prototype.visitFixedSizeBinary=a,s.prototype.visitDate=a,s.prototype.visitDateDay=a,s.prototype.visitDateMillisecond=a,s.prototype.visitTimestamp=a,s.prototype.visitTimestampSecond=a,s.prototype.visitTimestampMillisecond=a,s.prototype.visitTimestampMicrosecond=a,s.prototype.visitTimestampNanosecond=a,s.prototype.visitTime=a,s.prototype.visitTimeSecond=a,s.prototype.visitTimeMillisecond=a,s.prototype.visitTimeMicrosecond=a,s.prototype.visitTimeNanosecond=a,s.prototype.visitDecimal=a,s.prototype.visitList=a,s.prototype.visitStruct=a,s.prototype.visitUnion=a,s.prototype.visitDenseUnion=a,s.prototype.visitSparseUnion=a,s.prototype.visitDictionary=a,s.prototype.visitInterval=a,s.prototype.visitIntervalDayTime=a,s.prototype.visitIntervalYearMonth=a,s.prototype.visitFixedSizeList=a,s.prototype.visitMap=a,ad.instance=new s,ad}var KB={},a6;function lA(){return a6||(a6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.instance=e.GetByteLengthVisitor=void 0;const t=Ms(),n=$n(),i=(p,_)=>p+_;class s extends t.Visitor{visitNull(_,l){return 0}visitInt(_,l){return _.type.bitWidth/8}visitFloat(_,l){return _.type.ArrayType.BYTES_PER_ELEMENT}visitBool(_,l){return 1/8}visitDecimal(_,l){return _.type.bitWidth/8}visitDate(_,l){return(_.type.unit+1)*4}visitTime(_,l){return _.type.bitWidth/8}visitTimestamp(_,l){return _.type.unit===n.TimeUnit.SECOND?4:8}visitInterval(_,l){return(_.type.unit+1)*4}visitStruct(_,l){return _.children.reduce((b,m)=>b+e.instance.visit(m,l),0)}visitFixedSizeBinary(_,l){return _.type.byteWidth}visitMap(_,l){return 8+_.children.reduce((b,m)=>b+e.instance.visit(m,l),0)}visitDictionary(_,l){var b;return _.type.indices.bitWidth/8+(((b=_.dictionary)===null||b===void 0?void 0:b.getByteLength(_.values[l]))||0)}}e.GetByteLengthVisitor=s;const a=({valueOffsets:p},_)=>8+(p[_+1]-p[_]),c=({valueOffsets:p},_)=>8+(p[_+1]-p[_]),d=({valueOffsets:p,stride:_,children:l},b)=>{const m=l[0],{[b*_]:E}=p,{[b*_+1]:B}=p,I=e.instance.getVisitFn(m.type),k=m.slice(E,B-E);let F=8;for(let x=-1,M=B-E;++x<M;)F+=I(k,x);return F},f=({stride:p,children:_},l)=>{const b=_[0],m=b.slice(l*p,p),E=e.instance.getVisitFn(b.type);let B=0;for(let I=-1,k=m.length;++I<k;)B+=E(m,I);return B},u=(p,_)=>p.type.mode===n.UnionMode.Dense?r(p,_):h(p,_),r=({type:p,children:_,typeIds:l,valueOffsets:b},m)=>{const E=p.typeIdToChildIndex[l[m]];return 8+e.instance.visit(_[E],b[m])},h=({children:p},_)=>4+e.instance.visitMany(p,p.map(()=>_)).reduce(i,0);s.prototype.visitUtf8=a,s.prototype.visitBinary=c,s.prototype.visitList=d,s.prototype.visitFixedSizeList=f,s.prototype.visitUnion=u,s.prototype.visitDenseUnion=r,s.prototype.visitSparseUnion=h,e.instance=new s}(KB)),KB}var o6;function As(){if(o6)return id;o6=1;var e;Object.defineProperty(id,"__esModule",{value:!0}),id.makeVector=id.Vector=void 0;const t=et,n=$n(),i=dE(),s=wn(),a=Bl(),c=rA(),d=pa(),f=o_(),u=ya(),r=aA(),h=oA(),p=lA(),_={},l={};class b{constructor(F){var x,M,R;const P=F[0]instanceof b?F.flatMap(D=>D.data):F;if(P.length===0||P.some(D=>!(D instanceof a.Data)))throw new TypeError("Vector constructor expects an Array of Data instances.");const C=(x=P[0])===null||x===void 0?void 0:x.type;switch(P.length){case 0:this._offsets=[0];break;case 1:{const{get:D,set:j,indexOf:$,byteLength:W}=_[C.typeId],H=P[0];this.isValid=G=>(0,c.isChunkedValid)(H,G),this.get=G=>D(H,G),this.set=(G,z)=>j(H,G,z),this.indexOf=G=>$(H,G),this.getByteLength=G=>W(H,G),this._offsets=[0,H.length];break}default:Object.setPrototypeOf(this,l[C.typeId]),this._offsets=(0,c.computeChunkOffsets)(P);break}this.data=P,this.type=C,this.stride=(0,s.strideForType)(C),this.numChildren=(R=(M=C.children)===null||M===void 0?void 0:M.length)!==null&&R!==void 0?R:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((F,x)=>F+x.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=(0,c.computeChunkNullCounts)(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${n.Type[this.type.typeId]}Vector`}isValid(F){return!1}get(F){return null}set(F,x){}indexOf(F,x){return-1}includes(F,x){return this.indexOf(F,x)>0}getByteLength(F){return 0}[Symbol.iterator](){return h.instance.visit(this)}concat(...F){return new b(this.data.concat(F.flatMap(x=>x.data).flat(Number.POSITIVE_INFINITY)))}slice(F,x){return new b((0,i.clampRange)(this,F,x,({data:M,_offsets:R},P,C)=>(0,c.sliceChunks)(M,R,P,C)))}toJSON(){return[...this]}toArray(){const{type:F,data:x,length:M,stride:R,ArrayType:P}=this;switch(F.typeId){case n.Type.Int:case n.Type.Float:case n.Type.Decimal:case n.Type.Time:case n.Type.Timestamp:switch(x.length){case 0:return new P;case 1:return x[0].values.subarray(0,M*R);default:return x.reduce((C,{values:D,length:j})=>(C.array.set(D.subarray(0,j*R),C.offset),C.offset+=j*R,C),{array:new P(M*R),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(F){var x;return this.getChildAt((x=this.type.children)===null||x===void 0?void 0:x.findIndex(M=>M.name===F))}getChildAt(F){return F>-1&&F<this.numChildren?new b(this.data.map(({children:x})=>x[F])):null}get isMemoized(){return s.DataType.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(s.DataType.isDictionary(this.type)){const F=new m(this.data[0].dictionary),x=this.data.map(M=>{const R=M.clone();return R.dictionary=F,R});return new b(x)}return new m(this)}unmemoize(){if(s.DataType.isDictionary(this.type)&&this.isMemoized){const F=this.data[0].dictionary.unmemoize(),x=this.data.map(M=>{const R=M.clone();return R.dictionary=F,R});return new b(x)}return this}}id.Vector=b,e=Symbol.toStringTag,b[e]=(k=>{k.type=s.DataType.prototype,k.data=[],k.length=0,k.stride=1,k.numChildren=0,k._nullCount=-1,k._byteLength=-1,k._offsets=new Uint32Array([0]),k[Symbol.isConcatSpreadable]=!0;const F=Object.keys(n.Type).map(x=>n.Type[x]).filter(x=>typeof x=="number"&&x!==n.Type.NONE);for(const x of F){const M=f.instance.getVisitFnByTypeId(x),R=u.instance.getVisitFnByTypeId(x),P=r.instance.getVisitFnByTypeId(x),C=p.instance.getVisitFnByTypeId(x);_[x]={get:M,set:R,indexOf:P,byteLength:C},l[x]=Object.create(k,{isValid:{value:(0,c.wrapChunkedCall1)(c.isChunkedValid)},get:{value:(0,c.wrapChunkedCall1)(f.instance.getVisitFnByTypeId(x))},set:{value:(0,c.wrapChunkedCall2)(u.instance.getVisitFnByTypeId(x))},indexOf:{value:(0,c.wrapChunkedIndexOf)(r.instance.getVisitFnByTypeId(x))},getByteLength:{value:(0,c.wrapChunkedCall1)(p.instance.getVisitFnByTypeId(x))}})}return"Vector"})(b.prototype);class m extends b{constructor(F){super(F.data);const x=this.get,M=this.set,R=this.slice,P=new Array(this.length);Object.defineProperty(this,"get",{value(C){const D=P[C];if(D!==void 0)return D;const j=x.call(this,C);return P[C]=j,j}}),Object.defineProperty(this,"set",{value(C,D){M.call(this,C,D),P[C]=D}}),Object.defineProperty(this,"slice",{value:(C,D)=>new m(R.call(this,C,D))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new b(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}const E=t.__importStar(wn());function B(k){if(k){if(k instanceof a.Data)return new b([k]);if(k instanceof b)return new b(k.data);if(k.type instanceof s.DataType)return new b([(0,a.makeData)(k)]);if(Array.isArray(k))return new b(k.flatMap(F=>I(F)));if(ArrayBuffer.isView(k)){k instanceof DataView&&(k=new Uint8Array(k.buffer));const F={offset:0,length:k.length,nullCount:0,data:k};if(k instanceof Int8Array)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Int8}))]);if(k instanceof Int16Array)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Int16}))]);if(k instanceof Int32Array)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Int32}))]);if(k instanceof d.BigInt64Array)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Int64}))]);if(k instanceof Uint8Array||k instanceof Uint8ClampedArray)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Uint8}))]);if(k instanceof Uint16Array)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Uint16}))]);if(k instanceof Uint32Array)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Uint32}))]);if(k instanceof d.BigUint64Array)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Uint64}))]);if(k instanceof Float32Array)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Float32}))]);if(k instanceof Float64Array)return new b([(0,a.makeData)(Object.assign(Object.assign({},F),{type:new E.Float64}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}id.makeVector=B;function I(k){return k instanceof a.Data?[k]:k instanceof b?k.data:B(k).data}return id}var q_={},l6;function iye(){if(l6)return q_;l6=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.createIsValidFunction=void 0;const e=tA();function t(i){if(!i||i.length<=0)return function(d){return!0};let s="";const a=i.filter(c=>c===c);return a.length>0&&(s=`
    switch (x) {${a.map(c=>`
        case ${n(c)}:`).join("")}
            return false;
    }`),i.length!==a.length&&(s=`if (x !== x) return false;
${s}`),new Function("x",`${s}
return true;`)}q_.createIsValidFunction=t;function n(i){return typeof i!="bigint"?(0,e.valueToString)(i):`${(0,e.valueToString)(i)}n`}return q_}var Nr={},c6;function c_(){if(c6)return Nr;c6=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.OffsetsBufferBuilder=Nr.BitmapBufferBuilder=Nr.DataBufferBuilder=Nr.BufferBuilder=void 0;const e=ji(),t=(d,f)=>(Math.ceil(d)*f+63&-64||64)/f,n=(d,f=0)=>d.length>=f?d.subarray(0,f):(0,e.memcpy)(new d.constructor(f),d,0);class i{constructor(f,u=1){this.buffer=f,this.stride=u,this.BYTES_PER_ELEMENT=f.BYTES_PER_ELEMENT,this.ArrayType=f.constructor,this._resize(this.length=Math.ceil(f.length/u))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(f,u){return this}append(f){return this.set(this.length,f)}reserve(f){if(f>0){this.length+=f;const u=this.stride,r=this.length*u,h=this.buffer.length;r>=h&&this._resize(h===0?t(r*1,this.BYTES_PER_ELEMENT):t(r*2,this.BYTES_PER_ELEMENT))}return this}flush(f=this.length){f=t(f*this.stride,this.BYTES_PER_ELEMENT);const u=n(this.buffer,f);return this.clear(),u}clear(){return this.length=0,this._resize(0),this}_resize(f){return this.buffer=(0,e.memcpy)(new this.ArrayType(f),this.buffer)}}Nr.BufferBuilder=i,i.prototype.offset=0;class s extends i{last(){return this.get(this.length-1)}get(f){return this.buffer[f]}set(f,u){return this.reserve(f-this.length+1),this.buffer[f*this.stride]=u,this}}Nr.DataBufferBuilder=s;class a extends s{constructor(f=new Uint8Array(0)){super(f,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(f){return this.buffer[f>>3]>>f%8&1}set(f,u){const{buffer:r}=this.reserve(f-this.length+1),h=f>>3,p=f%8,_=r[h]>>p&1;return u?_===0&&(r[h]|=1<<p,++this.numValid):_===1&&(r[h]&=~(1<<p),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}Nr.BitmapBufferBuilder=a;class c extends s{constructor(f=new Int32Array(1)){super(f,1)}append(f){return this.set(this.length-1,f)}set(f,u){const r=this.length-1,h=this.reserve(f-r+1).buffer;return r<f++&&h.fill(h[r],r,f),h[f]=h[f-1]+u,this}flush(f=this.length-1){return f>this.length&&this.set(f-1,0),super.flush(f+1)}}return Nr.OffsetsBufferBuilder=c,Nr}var d6;function Hn(){if(d6)return xo;d6=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.VariableWidthBuilder=xo.FixedWidthBuilder=xo.Builder=void 0;const e=As(),t=Bl(),n=cE(),i=wn(),s=iye(),a=c_();class c{static throughNode(r){throw new Error('"throughNode" not available in this environment')}static throughDOM(r){throw new Error('"throughDOM" not available in this environment')}constructor({type:r,nullValues:h}){this.length=0,this.finished=!1,this.type=r,this.children=[],this.nullValues=h,this.stride=(0,i.strideForType)(r),this._nulls=new a.BitmapBufferBuilder,h&&h.length>0&&(this._isValid=(0,s.createIsValidFunction)(h))}toVector(){return new e.Vector([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let r=0;const{_offsets:h,_values:p,_nulls:_,_typeIds:l,children:b}=this;return h&&(r+=h.byteLength),p&&(r+=p.byteLength),_&&(r+=_.byteLength),l&&(r+=l.byteLength),b.reduce((m,E)=>m+E.byteLength,r)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let r=0;return this._offsets&&(r+=this._offsets.reservedByteLength),this._values&&(r+=this._values.reservedByteLength),this._nulls&&(r+=this._nulls.reservedByteLength),this._typeIds&&(r+=this._typeIds.reservedByteLength),this.children.reduce((h,p)=>h+p.reservedByteLength,r)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(r){return this.set(this.length,r)}isValid(r){return this._isValid(r)}set(r,h){return this.setValid(r,this.isValid(h))&&this.setValue(r,h),this}setValue(r,h){this._setValue(this,r,h)}setValid(r,h){return this.length=this._nulls.set(r,+h).length,h}addChild(r,h=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(r){return this.children[r]||null}flush(){let r,h,p,_;const{type:l,length:b,nullCount:m,_typeIds:E,_offsets:B,_values:I,_nulls:k}=this;(h=E==null?void 0:E.flush(b))?_=B==null?void 0:B.flush(b):(_=B==null?void 0:B.flush(b))?r=I==null?void 0:I.flush(B.last()):r=I==null?void 0:I.flush(b),m>0&&(p=k==null?void 0:k.flush(b));const F=this.children.map(x=>x.flush());return this.clear(),(0,t.makeData)({type:l,length:b,nullCount:m,children:F,child:F[0],data:r,typeIds:h,nullBitmap:p,valueOffsets:_})}finish(){this.finished=!0;for(const r of this.children)r.finish();return this}clear(){var r,h,p,_;this.length=0,(r=this._nulls)===null||r===void 0||r.clear(),(h=this._values)===null||h===void 0||h.clear(),(p=this._offsets)===null||p===void 0||p.clear(),(_=this._typeIds)===null||_===void 0||_.clear();for(const l of this.children)l.clear();return this}}xo.Builder=c,c.prototype.length=1,c.prototype.stride=1,c.prototype.children=null,c.prototype.finished=!1,c.prototype.nullValues=null,c.prototype._isValid=()=>!0;class d extends c{constructor(r){super(r),this._values=new a.DataBufferBuilder(new this.ArrayType(0),this.stride)}setValue(r,h){const p=this._values;return p.reserve(r-p.length+1),super.setValue(r,h)}}xo.FixedWidthBuilder=d;class f extends c{constructor(r){super(r),this._pendingLength=0,this._offsets=new a.OffsetsBufferBuilder}setValue(r,h){const p=this._pending||(this._pending=new Map),_=p.get(r);_&&(this._pendingLength-=_.length),this._pendingLength+=h instanceof n.MapRow?h[n.kKeys].length:h.length,p.set(r,h)}setValid(r,h){return super.setValid(r,h)?!0:((this._pending||(this._pending=new Map)).set(r,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const r=this._pending,h=this._pendingLength;return this._pendingLength=0,this._pending=void 0,r&&r.size>0&&this._flushPending(r,h),this}}return xo.VariableWidthBuilder=f,xo}var Rs={},od={},V_={},f6;function oG(){if(f6)return V_;f6=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.Block=void 0;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,i){return this.bb_pos=n,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(n,i,s,a){return n.prep(8,24),n.writeInt64(BigInt(a??0)),n.pad(4),n.writeInt32(s),n.writeInt64(BigInt(i??0)),n.offset()}}return V_.Block=e,V_}var G_={};const It=Wz(one);var H_={},u6;function gm(){if(u6)return H_;u6=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.KeyValue=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsKeyValue(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsKeyValue(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}key(s){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.__string(this.bb_pos+a,s):null}value(s){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__string(this.bb_pos+a,s):null}static startKeyValue(s){s.startObject(2)}static addKey(s,a){s.addFieldOffset(0,a,0)}static addValue(s,a){s.addFieldOffset(1,a,0)}static endKeyValue(s){return s.endObject()}static createKeyValue(s,a,c){return n.startKeyValue(s),n.addKey(s,a),n.addValue(s,c),n.endKeyValue(s)}}return H_.KeyValue=n,H_}var JB={},h6;function lG(){return h6||(h6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataVersion=void 0,function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(e.MetadataVersion||(e.MetadataVersion={}))}(JB)),JB}var W_={},QB={},_6;function cG(){return _6||(_6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Endianness=void 0,function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(e.Endianness||(e.Endianness={}))}(QB)),QB}var Y_={},X_={},ZB={},p6;function sye(){return p6||(p6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DictionaryKind=void 0,function(t){t[t.DenseArray=0]="DenseArray"}(e.DictionaryKind||(e.DictionaryKind={}))}(ZB)),ZB}var K_={},y6;function Of(){if(y6)return K_;y6=1,Object.defineProperty(K_,"__esModule",{value:!0}),K_.Int=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsInt(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsInt(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}bitWidth(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}isSigned(){const s=this.bb.__offset(this.bb_pos,6);return s?!!this.bb.readInt8(this.bb_pos+s):!1}static startInt(s){s.startObject(2)}static addBitWidth(s,a){s.addFieldInt32(0,a,0)}static addIsSigned(s,a){s.addFieldInt8(1,+a,0)}static endInt(s){return s.endObject()}static createInt(s,a,c){return n.startInt(s),n.addBitWidth(s,a),n.addIsSigned(s,c),n.endInt(s)}}return K_.Int=n,K_}var g6;function dG(){if(g6)return X_;g6=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.DictionaryEncoding=void 0;const t=et.__importStar(It),n=sye(),i=Of();class s{constructor(){this.bb=null,this.bb_pos=0}__init(c,d){return this.bb_pos=c,this.bb=d,this}static getRootAsDictionaryEncoding(c,d){return(d||new s).__init(c.readInt32(c.position())+c.position(),c)}static getSizePrefixedRootAsDictionaryEncoding(c,d){return c.setPosition(c.position()+t.SIZE_PREFIX_LENGTH),(d||new s).__init(c.readInt32(c.position())+c.position(),c)}id(){const c=this.bb.__offset(this.bb_pos,4);return c?this.bb.readInt64(this.bb_pos+c):BigInt("0")}indexType(c){const d=this.bb.__offset(this.bb_pos,6);return d?(c||new i.Int).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}isOrdered(){const c=this.bb.__offset(this.bb_pos,8);return c?!!this.bb.readInt8(this.bb_pos+c):!1}dictionaryKind(){const c=this.bb.__offset(this.bb_pos,10);return c?this.bb.readInt16(this.bb_pos+c):n.DictionaryKind.DenseArray}static startDictionaryEncoding(c){c.startObject(4)}static addId(c,d){c.addFieldInt64(0,d,BigInt("0"))}static addIndexType(c,d){c.addFieldOffset(1,d,0)}static addIsOrdered(c,d){c.addFieldInt8(2,+d,0)}static addDictionaryKind(c,d){c.addFieldInt16(3,d,n.DictionaryKind.DenseArray)}static endDictionaryEncoding(c){return c.endObject()}}return X_.DictionaryEncoding=s,X_}var eI={},J_={},m6;function fG(){if(m6)return J_;m6=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.Binary=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsBinary(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsBinary(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startBinary(s){s.startObject(0)}static endBinary(s){return s.endObject()}static createBinary(s){return n.startBinary(s),n.endBinary(s)}}return J_.Binary=n,J_}var Q_={},w6;function uG(){if(w6)return Q_;w6=1,Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.Bool=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsBool(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsBool(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startBool(s){s.startObject(0)}static endBool(s){return s.endObject()}static createBool(s){return n.startBool(s),n.endBool(s)}}return Q_.Bool=n,Q_}var Z_={},tI={},b6;function rye(){return b6||(b6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DateUnit=void 0,function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(e.DateUnit||(e.DateUnit={}))}(tI)),tI}var T6;function cA(){if(T6)return Z_;T6=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.Date=void 0;const t=et.__importStar(It),n=rye();class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsDate(a,c){return(c||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsDate(a,c){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(c||new i).__init(a.readInt32(a.position())+a.position(),a)}unit(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.DateUnit.MILLISECOND}static startDate(a){a.startObject(1)}static addUnit(a,c){a.addFieldInt16(0,c,n.DateUnit.MILLISECOND)}static endDate(a){return a.endObject()}static createDate(a,c){return i.startDate(a),i.addUnit(a,c),i.endDate(a)}}return Z_.Date=i,Z_}var ep={},v6;function dA(){if(v6)return ep;v6=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.Decimal=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsDecimal(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDecimal(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}precision(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}scale(){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt32(this.bb_pos+s):0}bitWidth(){const s=this.bb.__offset(this.bb_pos,8);return s?this.bb.readInt32(this.bb_pos+s):128}static startDecimal(s){s.startObject(3)}static addPrecision(s,a){s.addFieldInt32(0,a,0)}static addScale(s,a){s.addFieldInt32(1,a,0)}static addBitWidth(s,a){s.addFieldInt32(2,a,128)}static endDecimal(s){return s.endObject()}static createDecimal(s,a,c,d){return n.startDecimal(s),n.addPrecision(s,a),n.addScale(s,c),n.addBitWidth(s,d),n.endDecimal(s)}}return ep.Decimal=n,ep}var tp={},nI={},E6;function fA(){return E6||(E6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TimeUnit=void 0,function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(e.TimeUnit||(e.TimeUnit={}))}(nI)),nI}var S6;function aye(){if(S6)return tp;S6=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.Duration=void 0;const t=et.__importStar(It),n=fA();class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsDuration(a,c){return(c||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsDuration(a,c){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(c||new i).__init(a.readInt32(a.position())+a.position(),a)}unit(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.TimeUnit.MILLISECOND}static startDuration(a){a.startObject(1)}static addUnit(a,c){a.addFieldInt16(0,c,n.TimeUnit.MILLISECOND)}static endDuration(a){return a.endObject()}static createDuration(a,c){return i.startDuration(a),i.addUnit(a,c),i.endDuration(a)}}return tp.Duration=i,tp}var np={},B6;function uA(){if(B6)return np;B6=1,Object.defineProperty(np,"__esModule",{value:!0}),np.FixedSizeBinary=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsFixedSizeBinary(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsFixedSizeBinary(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}byteWidth(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}static startFixedSizeBinary(s){s.startObject(1)}static addByteWidth(s,a){s.addFieldInt32(0,a,0)}static endFixedSizeBinary(s){return s.endObject()}static createFixedSizeBinary(s,a){return n.startFixedSizeBinary(s),n.addByteWidth(s,a),n.endFixedSizeBinary(s)}}return np.FixedSizeBinary=n,np}var ip={},I6;function hA(){if(I6)return ip;I6=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.FixedSizeList=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsFixedSizeList(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsFixedSizeList(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}listSize(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}static startFixedSizeList(s){s.startObject(1)}static addListSize(s,a){s.addFieldInt32(0,a,0)}static endFixedSizeList(s){return s.endObject()}static createFixedSizeList(s,a){return n.startFixedSizeList(s),n.addListSize(s,a),n.endFixedSizeList(s)}}return ip.FixedSizeList=n,ip}var sp={},iI={},F6;function oye(){return F6||(F6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Precision=void 0,function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(e.Precision||(e.Precision={}))}(iI)),iI}var k6;function _A(){if(k6)return sp;k6=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.FloatingPoint=void 0;const t=et.__importStar(It),n=oye();class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsFloatingPoint(a,c){return(c||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsFloatingPoint(a,c){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(c||new i).__init(a.readInt32(a.position())+a.position(),a)}precision(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.Precision.HALF}static startFloatingPoint(a){a.startObject(1)}static addPrecision(a,c){a.addFieldInt16(0,c,n.Precision.HALF)}static endFloatingPoint(a){return a.endObject()}static createFloatingPoint(a,c){return i.startFloatingPoint(a),i.addPrecision(a,c),i.endFloatingPoint(a)}}return sp.FloatingPoint=i,sp}var rp={},sI={},x6;function lye(){return x6||(x6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.IntervalUnit=void 0,function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(e.IntervalUnit||(e.IntervalUnit={}))}(sI)),sI}var M6;function pA(){if(M6)return rp;M6=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.Interval=void 0;const t=et.__importStar(It),n=lye();class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsInterval(a,c){return(c||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsInterval(a,c){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(c||new i).__init(a.readInt32(a.position())+a.position(),a)}unit(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.IntervalUnit.YEAR_MONTH}static startInterval(a){a.startObject(1)}static addUnit(a,c){a.addFieldInt16(0,c,n.IntervalUnit.YEAR_MONTH)}static endInterval(a){return a.endObject()}static createInterval(a,c){return i.startInterval(a),i.addUnit(a,c),i.endInterval(a)}}return rp.Interval=i,rp}var ap={},A6;function cye(){if(A6)return ap;A6=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.LargeBinary=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsLargeBinary(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsLargeBinary(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startLargeBinary(s){s.startObject(0)}static endLargeBinary(s){return s.endObject()}static createLargeBinary(s){return n.startLargeBinary(s),n.endLargeBinary(s)}}return ap.LargeBinary=n,ap}var op={},O6;function dye(){if(O6)return op;O6=1,Object.defineProperty(op,"__esModule",{value:!0}),op.LargeList=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsLargeList(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsLargeList(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startLargeList(s){s.startObject(0)}static endLargeList(s){return s.endObject()}static createLargeList(s){return n.startLargeList(s),n.endLargeList(s)}}return op.LargeList=n,op}var lp={},N6;function fye(){if(N6)return lp;N6=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.LargeUtf8=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsLargeUtf8(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsLargeUtf8(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startLargeUtf8(s){s.startObject(0)}static endLargeUtf8(s){return s.endObject()}static createLargeUtf8(s){return n.startLargeUtf8(s),n.endLargeUtf8(s)}}return lp.LargeUtf8=n,lp}var cp={},R6;function hG(){if(R6)return cp;R6=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.List=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsList(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsList(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startList(s){s.startObject(0)}static endList(s){return s.endObject()}static createList(s){return n.startList(s),n.endList(s)}}return cp.List=n,cp}var dp={},C6;function yA(){if(C6)return dp;C6=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.Map=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsMap(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsMap(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}keysSorted(){const s=this.bb.__offset(this.bb_pos,4);return s?!!this.bb.readInt8(this.bb_pos+s):!1}static startMap(s){s.startObject(1)}static addKeysSorted(s,a){s.addFieldInt8(0,+a,0)}static endMap(s){return s.endObject()}static createMap(s,a){return n.startMap(s),n.addKeysSorted(s,a),n.endMap(s)}}return dp.Map=n,dp}var fp={},L6;function _G(){if(L6)return fp;L6=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.Null=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsNull(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNull(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startNull(s){s.startObject(0)}static endNull(s){return s.endObject()}static createNull(s){return n.startNull(s),n.endNull(s)}}return fp.Null=n,fp}var up={},P6;function uye(){if(P6)return up;P6=1,Object.defineProperty(up,"__esModule",{value:!0}),up.RunEndEncoded=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsRunEndEncoded(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsRunEndEncoded(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startRunEndEncoded(s){s.startObject(0)}static endRunEndEncoded(s){return s.endObject()}static createRunEndEncoded(s){return n.startRunEndEncoded(s),n.endRunEndEncoded(s)}}return up.RunEndEncoded=n,up}var hp={},D6;function pG(){if(D6)return hp;D6=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.Struct_=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsStruct_(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsStruct_(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startStruct_(s){s.startObject(0)}static endStruct_(s){return s.endObject()}static createStruct_(s){return n.startStruct_(s),n.endStruct_(s)}}return hp.Struct_=n,hp}var _p={},U6;function gA(){if(U6)return _p;U6=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.Time=void 0;const t=et.__importStar(It),n=fA();class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsTime(a,c){return(c||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTime(a,c){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(c||new i).__init(a.readInt32(a.position())+a.position(),a)}unit(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.TimeUnit.MILLISECOND}bitWidth(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt32(this.bb_pos+a):32}static startTime(a){a.startObject(2)}static addUnit(a,c){a.addFieldInt16(0,c,n.TimeUnit.MILLISECOND)}static addBitWidth(a,c){a.addFieldInt32(1,c,32)}static endTime(a){return a.endObject()}static createTime(a,c,d){return i.startTime(a),i.addUnit(a,c),i.addBitWidth(a,d),i.endTime(a)}}return _p.Time=i,_p}var pp={},j6;function mA(){if(j6)return pp;j6=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.Timestamp=void 0;const t=et.__importStar(It),n=fA();class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsTimestamp(a,c){return(c||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTimestamp(a,c){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(c||new i).__init(a.readInt32(a.position())+a.position(),a)}unit(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.TimeUnit.SECOND}timezone(a){const c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__string(this.bb_pos+c,a):null}static startTimestamp(a){a.startObject(2)}static addUnit(a,c){a.addFieldInt16(0,c,n.TimeUnit.SECOND)}static addTimezone(a,c){a.addFieldOffset(1,c,0)}static endTimestamp(a){return a.endObject()}static createTimestamp(a,c,d){return i.startTimestamp(a),i.addUnit(a,c),i.addTimezone(a,d),i.endTimestamp(a)}}return pp.Timestamp=i,pp}var yp={},rI={},$6;function hye(){return $6||($6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UnionMode=void 0,function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(e.UnionMode||(e.UnionMode={}))}(rI)),rI}var z6;function wA(){if(z6)return yp;z6=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.Union=void 0;const t=et.__importStar(It),n=hye();class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsUnion(a,c){return(c||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsUnion(a,c){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(c||new i).__init(a.readInt32(a.position())+a.position(),a)}mode(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.UnionMode.Sparse}typeIds(a){const c=this.bb.__offset(this.bb_pos,6);return c?this.bb.readInt32(this.bb.__vector(this.bb_pos+c)+a*4):0}typeIdsLength(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}typeIdsArray(){const a=this.bb.__offset(this.bb_pos,6);return a?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+a),this.bb.__vector_len(this.bb_pos+a)):null}static startUnion(a){a.startObject(2)}static addMode(a,c){a.addFieldInt16(0,c,n.UnionMode.Sparse)}static addTypeIds(a,c){a.addFieldOffset(1,c,0)}static createTypeIdsVector(a,c){a.startVector(4,c.length,4);for(let d=c.length-1;d>=0;d--)a.addInt32(c[d]);return a.endVector()}static startTypeIdsVector(a,c){a.startVector(4,c,4)}static endUnion(a){return a.endObject()}static createUnion(a,c,d){return i.startUnion(a),i.addMode(a,c),i.addTypeIds(a,d),i.endUnion(a)}}return yp.Union=i,yp}var gp={},q6;function yG(){if(q6)return gp;q6=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.Utf8=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsUtf8(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsUtf8(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static startUtf8(s){s.startObject(0)}static endUtf8(s){return s.endObject()}static createUtf8(s){return n.startUtf8(s),n.endUtf8(s)}}return gp.Utf8=n,gp}var V6;function mm(){return V6||(V6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.unionListToType=e.unionToType=e.Type=void 0;const t=fG(),n=uG(),i=cA(),s=dA(),a=aye(),c=uA(),d=hA(),f=_A(),u=Of(),r=pA(),h=cye(),p=dye(),_=fye(),l=hG(),b=yA(),m=_G(),E=uye(),B=pG(),I=gA(),k=mA(),F=wA(),x=yG();var M;(function(C){C[C.NONE=0]="NONE",C[C.Null=1]="Null",C[C.Int=2]="Int",C[C.FloatingPoint=3]="FloatingPoint",C[C.Binary=4]="Binary",C[C.Utf8=5]="Utf8",C[C.Bool=6]="Bool",C[C.Decimal=7]="Decimal",C[C.Date=8]="Date",C[C.Time=9]="Time",C[C.Timestamp=10]="Timestamp",C[C.Interval=11]="Interval",C[C.List=12]="List",C[C.Struct_=13]="Struct_",C[C.Union=14]="Union",C[C.FixedSizeBinary=15]="FixedSizeBinary",C[C.FixedSizeList=16]="FixedSizeList",C[C.Map=17]="Map",C[C.Duration=18]="Duration",C[C.LargeBinary=19]="LargeBinary",C[C.LargeUtf8=20]="LargeUtf8",C[C.LargeList=21]="LargeList",C[C.RunEndEncoded=22]="RunEndEncoded"})(M=e.Type||(e.Type={}));function R(C,D){switch(M[C]){case"NONE":return null;case"Null":return D(new m.Null);case"Int":return D(new u.Int);case"FloatingPoint":return D(new f.FloatingPoint);case"Binary":return D(new t.Binary);case"Utf8":return D(new x.Utf8);case"Bool":return D(new n.Bool);case"Decimal":return D(new s.Decimal);case"Date":return D(new i.Date);case"Time":return D(new I.Time);case"Timestamp":return D(new k.Timestamp);case"Interval":return D(new r.Interval);case"List":return D(new l.List);case"Struct_":return D(new B.Struct_);case"Union":return D(new F.Union);case"FixedSizeBinary":return D(new c.FixedSizeBinary);case"FixedSizeList":return D(new d.FixedSizeList);case"Map":return D(new b.Map);case"Duration":return D(new a.Duration);case"LargeBinary":return D(new h.LargeBinary);case"LargeUtf8":return D(new _.LargeUtf8);case"LargeList":return D(new p.LargeList);case"RunEndEncoded":return D(new E.RunEndEncoded);default:return null}}e.unionToType=R;function P(C,D,j){switch(M[C]){case"NONE":return null;case"Null":return D(j,new m.Null);case"Int":return D(j,new u.Int);case"FloatingPoint":return D(j,new f.FloatingPoint);case"Binary":return D(j,new t.Binary);case"Utf8":return D(j,new x.Utf8);case"Bool":return D(j,new n.Bool);case"Decimal":return D(j,new s.Decimal);case"Date":return D(j,new i.Date);case"Time":return D(j,new I.Time);case"Timestamp":return D(j,new k.Timestamp);case"Interval":return D(j,new r.Interval);case"List":return D(j,new l.List);case"Struct_":return D(j,new B.Struct_);case"Union":return D(j,new F.Union);case"FixedSizeBinary":return D(j,new c.FixedSizeBinary);case"FixedSizeList":return D(j,new d.FixedSizeList);case"Map":return D(j,new b.Map);case"Duration":return D(j,new a.Duration);case"LargeBinary":return D(j,new h.LargeBinary);case"LargeUtf8":return D(j,new _.LargeUtf8);case"LargeList":return D(j,new p.LargeList);case"RunEndEncoded":return D(j,new E.RunEndEncoded);default:return null}}e.unionListToType=P}(eI)),eI}var G6;function gG(){if(G6)return Y_;G6=1,Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.Field=void 0;const t=et.__importStar(It),n=dG(),i=gm(),s=mm();class a{constructor(){this.bb=null,this.bb_pos=0}__init(d,f){return this.bb_pos=d,this.bb=f,this}static getRootAsField(d,f){return(f||new a).__init(d.readInt32(d.position())+d.position(),d)}static getSizePrefixedRootAsField(d,f){return d.setPosition(d.position()+t.SIZE_PREFIX_LENGTH),(f||new a).__init(d.readInt32(d.position())+d.position(),d)}name(d){const f=this.bb.__offset(this.bb_pos,4);return f?this.bb.__string(this.bb_pos+f,d):null}nullable(){const d=this.bb.__offset(this.bb_pos,6);return d?!!this.bb.readInt8(this.bb_pos+d):!1}typeType(){const d=this.bb.__offset(this.bb_pos,8);return d?this.bb.readUint8(this.bb_pos+d):s.Type.NONE}type(d){const f=this.bb.__offset(this.bb_pos,10);return f?this.bb.__union(d,this.bb_pos+f):null}dictionary(d){const f=this.bb.__offset(this.bb_pos,12);return f?(d||new n.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+f),this.bb):null}children(d,f){const u=this.bb.__offset(this.bb_pos,14);return u?(f||new a).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+d*4),this.bb):null}childrenLength(){const d=this.bb.__offset(this.bb_pos,14);return d?this.bb.__vector_len(this.bb_pos+d):0}customMetadata(d,f){const u=this.bb.__offset(this.bb_pos,16);return u?(f||new i.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+d*4),this.bb):null}customMetadataLength(){const d=this.bb.__offset(this.bb_pos,16);return d?this.bb.__vector_len(this.bb_pos+d):0}static startField(d){d.startObject(7)}static addName(d,f){d.addFieldOffset(0,f,0)}static addNullable(d,f){d.addFieldInt8(1,+f,0)}static addTypeType(d,f){d.addFieldInt8(2,f,s.Type.NONE)}static addType(d,f){d.addFieldOffset(3,f,0)}static addDictionary(d,f){d.addFieldOffset(4,f,0)}static addChildren(d,f){d.addFieldOffset(5,f,0)}static createChildrenVector(d,f){d.startVector(4,f.length,4);for(let u=f.length-1;u>=0;u--)d.addOffset(f[u]);return d.endVector()}static startChildrenVector(d,f){d.startVector(4,f,4)}static addCustomMetadata(d,f){d.addFieldOffset(6,f,0)}static createCustomMetadataVector(d,f){d.startVector(4,f.length,4);for(let u=f.length-1;u>=0;u--)d.addOffset(f[u]);return d.endVector()}static startCustomMetadataVector(d,f){d.startVector(4,f,4)}static endField(d){return d.endObject()}}return Y_.Field=a,Y_}var H6;function bA(){if(H6)return W_;H6=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.Schema=void 0;const t=et.__importStar(It),n=cG(),i=gG(),s=gm();class a{constructor(){this.bb=null,this.bb_pos=0}__init(d,f){return this.bb_pos=d,this.bb=f,this}static getRootAsSchema(d,f){return(f||new a).__init(d.readInt32(d.position())+d.position(),d)}static getSizePrefixedRootAsSchema(d,f){return d.setPosition(d.position()+t.SIZE_PREFIX_LENGTH),(f||new a).__init(d.readInt32(d.position())+d.position(),d)}endianness(){const d=this.bb.__offset(this.bb_pos,4);return d?this.bb.readInt16(this.bb_pos+d):n.Endianness.Little}fields(d,f){const u=this.bb.__offset(this.bb_pos,6);return u?(f||new i.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+d*4),this.bb):null}fieldsLength(){const d=this.bb.__offset(this.bb_pos,6);return d?this.bb.__vector_len(this.bb_pos+d):0}customMetadata(d,f){const u=this.bb.__offset(this.bb_pos,8);return u?(f||new s.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+d*4),this.bb):null}customMetadataLength(){const d=this.bb.__offset(this.bb_pos,8);return d?this.bb.__vector_len(this.bb_pos+d):0}features(d){const f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readInt64(this.bb.__vector(this.bb_pos+f)+d*8):BigInt(0)}featuresLength(){const d=this.bb.__offset(this.bb_pos,10);return d?this.bb.__vector_len(this.bb_pos+d):0}static startSchema(d){d.startObject(4)}static addEndianness(d,f){d.addFieldInt16(0,f,n.Endianness.Little)}static addFields(d,f){d.addFieldOffset(1,f,0)}static createFieldsVector(d,f){d.startVector(4,f.length,4);for(let u=f.length-1;u>=0;u--)d.addOffset(f[u]);return d.endVector()}static startFieldsVector(d,f){d.startVector(4,f,4)}static addCustomMetadata(d,f){d.addFieldOffset(2,f,0)}static createCustomMetadataVector(d,f){d.startVector(4,f.length,4);for(let u=f.length-1;u>=0;u--)d.addOffset(f[u]);return d.endVector()}static startCustomMetadataVector(d,f){d.startVector(4,f,4)}static addFeatures(d,f){d.addFieldOffset(3,f,0)}static createFeaturesVector(d,f){d.startVector(8,f.length,8);for(let u=f.length-1;u>=0;u--)d.addInt64(f[u]);return d.endVector()}static startFeaturesVector(d,f){d.startVector(8,f,8)}static endSchema(d){return d.endObject()}static finishSchemaBuffer(d,f){d.finish(f)}static finishSizePrefixedSchemaBuffer(d,f){d.finish(f,void 0,!0)}static createSchema(d,f,u,r,h){return a.startSchema(d),a.addEndianness(d,f),a.addFields(d,u),a.addCustomMetadata(d,r),a.addFeatures(d,h),a.endSchema(d)}}return W_.Schema=a,W_}var W6;function _ye(){if(W6)return G_;W6=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.Footer=void 0;const t=et.__importStar(It),n=oG(),i=gm(),s=lG(),a=bA();class c{constructor(){this.bb=null,this.bb_pos=0}__init(f,u){return this.bb_pos=f,this.bb=u,this}static getRootAsFooter(f,u){return(u||new c).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsFooter(f,u){return f.setPosition(f.position()+t.SIZE_PREFIX_LENGTH),(u||new c).__init(f.readInt32(f.position())+f.position(),f)}version(){const f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readInt16(this.bb_pos+f):s.MetadataVersion.V1}schema(f){const u=this.bb.__offset(this.bb_pos,6);return u?(f||new a.Schema).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}dictionaries(f,u){const r=this.bb.__offset(this.bb_pos,8);return r?(u||new n.Block).__init(this.bb.__vector(this.bb_pos+r)+f*24,this.bb):null}dictionariesLength(){const f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}recordBatches(f,u){const r=this.bb.__offset(this.bb_pos,10);return r?(u||new n.Block).__init(this.bb.__vector(this.bb_pos+r)+f*24,this.bb):null}recordBatchesLength(){const f=this.bb.__offset(this.bb_pos,10);return f?this.bb.__vector_len(this.bb_pos+f):0}customMetadata(f,u){const r=this.bb.__offset(this.bb_pos,12);return r?(u||new i.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+f*4),this.bb):null}customMetadataLength(){const f=this.bb.__offset(this.bb_pos,12);return f?this.bb.__vector_len(this.bb_pos+f):0}static startFooter(f){f.startObject(5)}static addVersion(f,u){f.addFieldInt16(0,u,s.MetadataVersion.V1)}static addSchema(f,u){f.addFieldOffset(1,u,0)}static addDictionaries(f,u){f.addFieldOffset(2,u,0)}static startDictionariesVector(f,u){f.startVector(24,u,8)}static addRecordBatches(f,u){f.addFieldOffset(3,u,0)}static startRecordBatchesVector(f,u){f.startVector(24,u,8)}static addCustomMetadata(f,u){f.addFieldOffset(4,u,0)}static createCustomMetadataVector(f,u){f.startVector(4,u.length,4);for(let r=u.length-1;r>=0;r--)f.addOffset(u[r]);return f.endVector()}static startCustomMetadataVector(f,u){f.startVector(4,u,4)}static endFooter(f){return f.endObject()}static finishFooterBuffer(f,u){f.finish(u)}static finishSizePrefixedFooterBuffer(f,u){f.finish(u,void 0,!0)}}return G_.Footer=c,G_}var ld={},Y6;function ir(){if(Y6)return ld;Y6=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.Field=ld.Schema=void 0;const e=wn();class t{constructor(c=[],d,f){this.fields=c||[],this.metadata=d||new Map,f||(f=s(c)),this.dictionaries=f}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(c=>c.name)}toString(){return`Schema<{ ${this.fields.map((c,d)=>`${d}: ${c}`).join(", ")} }>`}select(c){const d=new Set(c),f=this.fields.filter(u=>d.has(u.name));return new t(f,this.metadata)}selectAt(c){const d=c.map(f=>this.fields[f]).filter(Boolean);return new t(d,this.metadata)}assign(...c){const d=c[0]instanceof t?c[0]:Array.isArray(c[0])?new t(c[0]):new t(c),f=[...this.fields],u=i(i(new Map,this.metadata),d.metadata),r=d.fields.filter(p=>{const _=f.findIndex(l=>l.name===p.name);return~_?(f[_]=p.clone({metadata:i(i(new Map,f[_].metadata),p.metadata)}))&&!1:!0}),h=s(r,new Map);return new t([...f,...r],u,new Map([...this.dictionaries,...h]))}}ld.Schema=t,t.prototype.fields=null,t.prototype.metadata=null,t.prototype.dictionaries=null;class n{static new(...c){let[d,f,u,r]=c;return c[0]&&typeof c[0]=="object"&&({name:d}=c[0],f===void 0&&(f=c[0].type),u===void 0&&(u=c[0].nullable),r===void 0&&(r=c[0].metadata)),new n(`${d}`,f,u,r)}constructor(c,d,f=!1,u){this.name=c,this.type=d,this.nullable=f,this.metadata=u||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...c){let[d,f,u,r]=c;return!c[0]||typeof c[0]!="object"?[d=this.name,f=this.type,u=this.nullable,r=this.metadata]=c:{name:d=this.name,type:f=this.type,nullable:u=this.nullable,metadata:r=this.metadata}=c[0],n.new(d,f,u,r)}}ld.Field=n,n.prototype.type=null,n.prototype.name=null,n.prototype.nullable=null,n.prototype.metadata=null;function i(a,c){return new Map([...a||new Map,...c||new Map])}function s(a,c=new Map){for(let d=-1,f=a.length;++d<f;){const r=a[d].type;if(e.DataType.isDictionary(r)){if(!c.has(r.id))c.set(r.id,r.dictionary);else if(c.get(r.id)!==r.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}r.children&&r.children.length>0&&s(r.children,c)}return c}return ld}var X6;function mG(){if(X6)return od;X6=1,Object.defineProperty(od,"__esModule",{value:!0}),od.FileBlock=od.Footer=void 0;const e=et,t=oG(),n=_ye(),i=e.__importStar(It);var s=i.Builder,a=i.ByteBuffer;const c=ir(),d=$n(),f=ji(),u=iA();class r{static decode(l){l=new a((0,f.toUint8Array)(l));const b=n.Footer.getRootAsFooter(l),m=c.Schema.decode(b.schema());return new h(m,b)}static encode(l){const b=new s,m=c.Schema.encode(b,l.schema);n.Footer.startRecordBatchesVector(b,l.numRecordBatches);for(const I of[...l.recordBatches()].slice().reverse())p.encode(b,I);const E=b.endVector();n.Footer.startDictionariesVector(b,l.numDictionaries);for(const I of[...l.dictionaryBatches()].slice().reverse())p.encode(b,I);const B=b.endVector();return n.Footer.startFooter(b),n.Footer.addSchema(b,m),n.Footer.addVersion(b,d.MetadataVersion.V4),n.Footer.addRecordBatches(b,E),n.Footer.addDictionaries(b,B),n.Footer.finishFooterBuffer(b,n.Footer.endFooter(b)),b.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(l,b=d.MetadataVersion.V4,m,E){this.schema=l,this.version=b,m&&(this._recordBatches=m),E&&(this._dictionaryBatches=E)}*recordBatches(){for(let l,b=-1,m=this.numRecordBatches;++b<m;)(l=this.getRecordBatch(b))&&(yield l)}*dictionaryBatches(){for(let l,b=-1,m=this.numDictionaries;++b<m;)(l=this.getDictionaryBatch(b))&&(yield l)}getRecordBatch(l){return l>=0&&l<this.numRecordBatches&&this._recordBatches[l]||null}getDictionaryBatch(l){return l>=0&&l<this.numDictionaries&&this._dictionaryBatches[l]||null}}od.Footer=r;class h extends r{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(l,b){super(l,b.version()),this._footer=b}getRecordBatch(l){if(l>=0&&l<this.numRecordBatches){const b=this._footer.recordBatches(l);if(b)return p.decode(b)}return null}getDictionaryBatch(l){if(l>=0&&l<this.numDictionaries){const b=this._footer.dictionaries(l);if(b)return p.decode(b)}return null}}class p{static decode(l){return new p(l.metaDataLength(),l.bodyLength(),l.offset())}static encode(l,b){const{metaDataLength:m}=b,E=BigInt(b.offset),B=BigInt(b.bodyLength);return t.Block.createBlock(l,E,m,B)}constructor(l,b,m){this.metaDataLength=l,this.offset=(0,u.bigIntToNumber)(m),this.bodyLength=(0,u.bigIntToNumber)(b)}}return od.FileBlock=p,od}var Ao={},aI={},K6;function fE(){return K6||(K6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncQueue=e.ReadableInterop=e.ArrowJSON=e.ITERATOR_DONE=void 0;const t=et,n=t.__importDefault(oE());e.ITERATOR_DONE=Object.freeze({done:!0,value:void 0});class i{constructor(d){this._json=d}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}e.ArrowJSON=i;class s{tee(){return this._getDOMStream().tee()}pipe(d,f){return this._getNodeStream().pipe(d,f)}pipeTo(d,f){return this._getDOMStream().pipeTo(d,f)}pipeThrough(d,f){return this._getDOMStream().pipeThrough(d,f)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}e.ReadableInterop=s;class a extends s{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(d=>this._closedPromiseResolve=d)}get closed(){return this._closedPromise}cancel(d){return t.__awaiter(this,void 0,void 0,function*(){yield this.return(d)})}write(d){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(d):this.resolvers.shift().resolve({done:!1,value:d}))}abort(d){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:d}:this.resolvers.shift().reject({done:!0,value:d}))}close(){if(this._closedPromiseResolve){const{resolvers:d}=this;for(;d.length>0;)d.shift().resolve(e.ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(d){return n.default.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,d)}toNodeStream(d){return n.default.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,d)}throw(d){return t.__awaiter(this,void 0,void 0,function*(){return yield this.abort(d),e.ITERATOR_DONE})}return(d){return t.__awaiter(this,void 0,void 0,function*(){return yield this.close(),e.ITERATOR_DONE})}read(d){return t.__awaiter(this,void 0,void 0,function*(){return(yield this.next(d,"read")).value})}peek(d){return t.__awaiter(this,void 0,void 0,function*(){return(yield this.next(d,"peek")).value})}next(...d){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((f,u)=>{this.resolvers.push({resolve:f,reject:u})}):Promise.resolve(e.ITERATOR_DONE)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}e.AsyncQueue=a}(aI)),aI}var J6;function Nf(){if(J6)return Ao;J6=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.AsyncByteStream=Ao.ByteStream=Ao.AsyncByteQueue=void 0;const e=et,t=e.__importDefault(oE()),n=a_(),i=fE(),s=ji(),a=pa();class c extends i.AsyncQueue{write(p){if((p=(0,s.toUint8Array)(p)).byteLength>0)return super.write(p)}toString(p=!1){return p?(0,n.decodeUtf8)(this.toUint8Array(!0)):this.toUint8Array(!1).then(n.decodeUtf8)}toUint8Array(p=!1){return p?(0,s.joinUint8Arrays)(this._values)[0]:e.__awaiter(this,void 0,void 0,function*(){var _,l,b,m;const E=[];let B=0;try{for(var I=!0,k=e.__asyncValues(this),F;F=yield k.next(),_=F.done,!_;){m=F.value,I=!1;try{const x=m;E.push(x),B+=x.byteLength}finally{I=!0}}}catch(x){l={error:x}}finally{try{!I&&!_&&(b=k.return)&&(yield b.call(k))}finally{if(l)throw l.error}}return(0,s.joinUint8Arrays)(E,B)[0]})}}Ao.AsyncByteQueue=c;class d{constructor(p){p&&(this.source=new u(t.default.fromIterable(p)))}[Symbol.iterator](){return this}next(p){return this.source.next(p)}throw(p){return this.source.throw(p)}return(p){return this.source.return(p)}peek(p){return this.source.peek(p)}read(p){return this.source.read(p)}}Ao.ByteStream=d;class f{constructor(p){p instanceof f?this.source=p.source:p instanceof c?this.source=new r(t.default.fromAsyncIterable(p)):(0,a.isReadableNodeStream)(p)?this.source=new r(t.default.fromNodeStream(p)):(0,a.isReadableDOMStream)(p)?this.source=new r(t.default.fromDOMStream(p)):(0,a.isFetchResponse)(p)?this.source=new r(t.default.fromDOMStream(p.body)):(0,a.isIterable)(p)?this.source=new r(t.default.fromIterable(p)):(0,a.isPromise)(p)?this.source=new r(t.default.fromAsyncIterable(p)):(0,a.isAsyncIterable)(p)&&(this.source=new r(t.default.fromAsyncIterable(p)))}[Symbol.asyncIterator](){return this}next(p){return this.source.next(p)}throw(p){return this.source.throw(p)}return(p){return this.source.return(p)}get closed(){return this.source.closed}cancel(p){return this.source.cancel(p)}peek(p){return this.source.peek(p)}read(p){return this.source.read(p)}}Ao.AsyncByteStream=f;class u{constructor(p){this.source=p}cancel(p){this.return(p)}peek(p){return this.next(p,"peek").value}read(p){return this.next(p,"read").value}next(p,_="read"){return this.source.next({cmd:_,size:p})}throw(p){return Object.create(this.source.throw&&this.source.throw(p)||i.ITERATOR_DONE)}return(p){return Object.create(this.source.return&&this.source.return(p)||i.ITERATOR_DONE)}}class r{constructor(p){this.source=p,this._closedPromise=new Promise(_=>this._closedPromiseResolve=_)}cancel(p){return e.__awaiter(this,void 0,void 0,function*(){yield this.return(p)})}get closed(){return this._closedPromise}read(p){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(p,"read")).value})}peek(p){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(p,"peek")).value})}next(p,_="read"){return e.__awaiter(this,void 0,void 0,function*(){return yield this.source.next({cmd:_,size:p})})}throw(p){return e.__awaiter(this,void 0,void 0,function*(){const _=this.source.throw&&(yield this.source.throw(p))||i.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(_)})}return(p){return e.__awaiter(this,void 0,void 0,function*(){const _=this.source.return&&(yield this.source.return(p))||i.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(_)})}}return Ao}var cd={},Q6;function wG(){if(Q6)return cd;Q6=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.AsyncRandomAccessFile=cd.RandomAccessFile=void 0;const e=et,t=Nf(),n=ji();class i extends t.ByteStream{constructor(c,d){super(),this.position=0,this.buffer=(0,n.toUint8Array)(c),this.size=d===void 0?this.buffer.byteLength:d}readInt32(c){const{buffer:d,byteOffset:f}=this.readAt(c,4);return new DataView(d,f).getInt32(0,!0)}seek(c){return this.position=Math.min(c,this.size),c<this.size}read(c){const{buffer:d,size:f,position:u}=this;return d&&u<f?(typeof c!="number"&&(c=Number.POSITIVE_INFINITY),this.position=Math.min(f,u+Math.min(f-u,c)),d.subarray(u,this.position)):null}readAt(c,d){const f=this.buffer,u=Math.min(this.size,c+d);return f?f.subarray(c,u):new Uint8Array(d)}close(){this.buffer&&(this.buffer=null)}throw(c){return this.close(),{done:!0,value:c}}return(c){return this.close(),{done:!0,value:c}}}cd.RandomAccessFile=i;class s extends t.AsyncByteStream{constructor(c,d){super(),this.position=0,this._handle=c,typeof d=="number"?this.size=d:this._pending=e.__awaiter(this,void 0,void 0,function*(){this.size=(yield c.stat()).size,delete this._pending})}readInt32(c){return e.__awaiter(this,void 0,void 0,function*(){const{buffer:d,byteOffset:f}=yield this.readAt(c,4);return new DataView(d,f).getInt32(0,!0)})}seek(c){return e.__awaiter(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(c,this.size),c<this.size})}read(c){return e.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:d,size:f,position:u}=this;if(d&&u<f){typeof c!="number"&&(c=Number.POSITIVE_INFINITY);let r=u,h=0,p=0;const _=Math.min(f,r+Math.min(f-r,c)),l=new Uint8Array(Math.max(0,(this.position=_)-r));for(;(r+=p)<_&&(h+=p)<l.byteLength;)({bytesRead:p}=yield d.read(l,h,l.byteLength-h,r));return l}return null})}readAt(c,d){return e.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:f,size:u}=this;if(f&&c+d<u){const r=Math.min(u,c+d),h=new Uint8Array(r-c);return(yield f.read(h,0,d,c)).buffer}return new Uint8Array(d)})}close(){return e.__awaiter(this,void 0,void 0,function*(){const c=this._handle;this._handle=null,c&&(yield c.close())})}throw(c){return e.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:c}})}return(c){return e.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:c}})}}return cd.AsyncRandomAccessFile=s,cd}var dd={},Rr={},Z6;function bG(){if(Z6)return Rr;Z6=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.Int128=Rr.Int64=Rr.Uint64=Rr.BaseInt64=void 0;const e=65536;function t(f){return f<0&&(f=4294967295+f+1),`0x${f.toString(16)}`}const n=8,i=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class s{constructor(u){this.buffer=u}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(u){const r=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),h=new Uint32Array([u.buffer[1]>>>16,u.buffer[1]&65535,u.buffer[0]>>>16,u.buffer[0]&65535]);let p=r[3]*h[3];this.buffer[0]=p&65535;let _=p>>>16;return p=r[2]*h[3],_+=p,p=r[3]*h[2]>>>0,_+=p,this.buffer[0]+=_<<16,this.buffer[1]=_>>>0<p?e:0,this.buffer[1]+=_>>>16,this.buffer[1]+=r[1]*h[3]+r[2]*h[2]+r[3]*h[1],this.buffer[1]+=r[0]*h[3]+r[1]*h[2]+r[2]*h[1]+r[3]*h[0]<<16,this}_plus(u){const r=this.buffer[0]+u.buffer[0]>>>0;this.buffer[1]+=u.buffer[1],r<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=r}lessThan(u){return this.buffer[1]<u.buffer[1]||this.buffer[1]===u.buffer[1]&&this.buffer[0]<u.buffer[0]}equals(u){return this.buffer[1]===u.buffer[1]&&this.buffer[0]==u.buffer[0]}greaterThan(u){return u.lessThan(this)}hex(){return`${t(this.buffer[1])} ${t(this.buffer[0])}`}}Rr.BaseInt64=s;class a extends s{times(u){return this._times(u),this}plus(u){return this._plus(u),this}static from(u,r=new Uint32Array(2)){return a.fromString(typeof u=="string"?u:u.toString(),r)}static fromNumber(u,r=new Uint32Array(2)){return a.fromString(u.toString(),r)}static fromString(u,r=new Uint32Array(2)){const h=u.length,p=new a(r);for(let _=0;_<h;){const l=n<h-_?n:h-_,b=new a(new Uint32Array([Number.parseInt(u.slice(_,_+l),10),0])),m=new a(new Uint32Array([i[l],0]));p.times(m),p.plus(b),_+=l}return p}static convertArray(u){const r=new Uint32Array(u.length*2);for(let h=-1,p=u.length;++h<p;)a.from(u[h],new Uint32Array(r.buffer,r.byteOffset+2*h*4,2));return r}static multiply(u,r){return new a(new Uint32Array(u.buffer)).times(r)}static add(u,r){return new a(new Uint32Array(u.buffer)).plus(r)}}Rr.Uint64=a;class c extends s{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(u){return this._times(u),this}plus(u){return this._plus(u),this}lessThan(u){const r=this.buffer[1]<<0,h=u.buffer[1]<<0;return r<h||r===h&&this.buffer[0]<u.buffer[0]}static from(u,r=new Uint32Array(2)){return c.fromString(typeof u=="string"?u:u.toString(),r)}static fromNumber(u,r=new Uint32Array(2)){return c.fromString(u.toString(),r)}static fromString(u,r=new Uint32Array(2)){const h=u.startsWith("-"),p=u.length,_=new c(r);for(let l=h?1:0;l<p;){const b=n<p-l?n:p-l,m=new c(new Uint32Array([Number.parseInt(u.slice(l,l+b),10),0])),E=new c(new Uint32Array([i[b],0]));_.times(E),_.plus(m),l+=b}return h?_.negate():_}static convertArray(u){const r=new Uint32Array(u.length*2);for(let h=-1,p=u.length;++h<p;)c.from(u[h],new Uint32Array(r.buffer,r.byteOffset+2*h*4,2));return r}static multiply(u,r){return new c(new Uint32Array(u.buffer)).times(r)}static add(u,r){return new c(new Uint32Array(u.buffer)).plus(r)}}Rr.Int64=c;class d{constructor(u){this.buffer=u}high(){return new c(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new c(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(u){const r=new a(new Uint32Array([this.buffer[3],0])),h=new a(new Uint32Array([this.buffer[2],0])),p=new a(new Uint32Array([this.buffer[1],0])),_=new a(new Uint32Array([this.buffer[0],0])),l=new a(new Uint32Array([u.buffer[3],0])),b=new a(new Uint32Array([u.buffer[2],0])),m=new a(new Uint32Array([u.buffer[1],0])),E=new a(new Uint32Array([u.buffer[0],0]));let B=a.multiply(_,E);this.buffer[0]=B.low();const I=new a(new Uint32Array([B.high(),0]));return B=a.multiply(p,E),I.plus(B),B=a.multiply(_,m),I.plus(B),this.buffer[1]=I.low(),this.buffer[3]=I.lessThan(B)?1:0,this.buffer[2]=I.high(),new a(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(a.multiply(h,E)).plus(a.multiply(p,m)).plus(a.multiply(_,b)),this.buffer[3]+=a.multiply(r,E).plus(a.multiply(h,m)).plus(a.multiply(p,b)).plus(a.multiply(_,l)).low(),this}plus(u){const r=new Uint32Array(4);return r[3]=this.buffer[3]+u.buffer[3]>>>0,r[2]=this.buffer[2]+u.buffer[2]>>>0,r[1]=this.buffer[1]+u.buffer[1]>>>0,r[0]=this.buffer[0]+u.buffer[0]>>>0,r[0]<this.buffer[0]>>>0&&++r[1],r[1]<this.buffer[1]>>>0&&++r[2],r[2]<this.buffer[2]>>>0&&++r[3],this.buffer[3]=r[3],this.buffer[2]=r[2],this.buffer[1]=r[1],this.buffer[0]=r[0],this}hex(){return`${t(this.buffer[3])} ${t(this.buffer[2])} ${t(this.buffer[1])} ${t(this.buffer[0])}`}static multiply(u,r){return new d(new Uint32Array(u.buffer)).times(r)}static add(u,r){return new d(new Uint32Array(u.buffer)).plus(r)}static from(u,r=new Uint32Array(4)){return d.fromString(typeof u=="string"?u:u.toString(),r)}static fromNumber(u,r=new Uint32Array(4)){return d.fromString(u.toString(),r)}static fromString(u,r=new Uint32Array(4)){const h=u.startsWith("-"),p=u.length,_=new d(r);for(let l=h?1:0;l<p;){const b=n<p-l?n:p-l,m=new d(new Uint32Array([Number.parseInt(u.slice(l,l+b),10),0,0,0])),E=new d(new Uint32Array([i[b],0,0,0]));_.times(E),_.plus(m),l+=b}return h?_.negate():_}static convertArray(u){const r=new Uint32Array(u.length*4);for(let h=-1,p=u.length;++h<p;)d.from(u[h],new Uint32Array(r.buffer,r.byteOffset+4*4*h,4));return r}}return Rr.Int128=d,Rr}var e4;function pye(){if(e4)return dd;e4=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.JSONVectorLoader=dd.VectorLoader=void 0;const e=Bl(),t=ir(),n=wn(),i=Ms(),s=l_(),a=a_(),c=bG(),d=$n(),f=ji();class u extends i.Visitor{constructor(_,l,b,m){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=_,this.nodes=l,this.buffers=b,this.dictionaries=m}visit(_){return super.visit(_ instanceof t.Field?_.type:_)}visitNull(_,{length:l}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l})}visitBool(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_)})}visitInt(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_)})}visitFloat(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_)})}visitUtf8(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),valueOffsets:this.readOffsets(_),data:this.readData(_)})}visitBinary(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),valueOffsets:this.readOffsets(_),data:this.readData(_)})}visitFixedSizeBinary(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_)})}visitDate(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_)})}visitTimestamp(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_)})}visitTime(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_)})}visitDecimal(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_)})}visitList(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),valueOffsets:this.readOffsets(_),child:this.visit(_.children[0])})}visitStruct(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),children:this.visitMany(_.children)})}visitUnion(_){return _.mode===d.UnionMode.Sparse?this.visitSparseUnion(_):this.visitDenseUnion(_)}visitDenseUnion(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),typeIds:this.readTypeIds(_),valueOffsets:this.readOffsets(_),children:this.visitMany(_.children)})}visitSparseUnion(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),typeIds:this.readTypeIds(_),children:this.visitMany(_.children)})}visitDictionary(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_.indices),dictionary:this.readDictionary(_)})}visitInterval(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),data:this.readData(_)})}visitFixedSizeList(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),child:this.visit(_.children[0])})}visitMap(_,{length:l,nullCount:b}=this.nextFieldNode()){return(0,e.makeData)({type:_,length:l,nullCount:b,nullBitmap:this.readNullBitmap(_,b),valueOffsets:this.readOffsets(_),child:this.visit(_.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(_,l,b=this.nextBufferRange()){return l>0&&this.readData(_,b)||new Uint8Array(0)}readOffsets(_,l){return this.readData(_,l)}readTypeIds(_,l){return this.readData(_,l)}readData(_,{length:l,offset:b}=this.nextBufferRange()){return this.bytes.subarray(b,b+l)}readDictionary(_){return this.dictionaries.get(_.id)}}dd.VectorLoader=u;class r extends u{constructor(_,l,b,m){super(new Uint8Array(0),l,b,m),this.sources=_}readNullBitmap(_,l,{offset:b}=this.nextBufferRange()){return l<=0?new Uint8Array(0):(0,s.packBools)(this.sources[b])}readOffsets(_,{offset:l}=this.nextBufferRange()){return(0,f.toArrayBufferView)(Uint8Array,(0,f.toArrayBufferView)(Int32Array,this.sources[l]))}readTypeIds(_,{offset:l}=this.nextBufferRange()){return(0,f.toArrayBufferView)(Uint8Array,(0,f.toArrayBufferView)(_.ArrayType,this.sources[l]))}readData(_,{offset:l}=this.nextBufferRange()){const{sources:b}=this;return n.DataType.isTimestamp(_)||(n.DataType.isInt(_)||n.DataType.isTime(_))&&_.bitWidth===64||n.DataType.isDate(_)&&_.unit===d.DateUnit.MILLISECOND?(0,f.toArrayBufferView)(Uint8Array,c.Int64.convertArray(b[l])):n.DataType.isDecimal(_)?(0,f.toArrayBufferView)(Uint8Array,c.Int128.convertArray(b[l])):n.DataType.isBinary(_)||n.DataType.isFixedSizeBinary(_)?h(b[l]):n.DataType.isBool(_)?(0,s.packBools)(b[l]):n.DataType.isUtf8(_)?(0,a.encodeUtf8)(b[l].join("")):(0,f.toArrayBufferView)(Uint8Array,(0,f.toArrayBufferView)(_.ArrayType,b[l].map(m=>+m)))}}dd.JSONVectorLoader=r;function h(p){const _=p.join(""),l=new Uint8Array(_.length/2);for(let b=0;b<_.length;b+=2)l[b>>1]=Number.parseInt(_.slice(b,b+2),16);return l}return dd}var fd={},Oo={},Cs={},ud={},mp={},t4;function TA(){if(t4)return mp;t4=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.BinaryBuilder=void 0;const e=ji(),t=c_(),n=Hn();class i extends n.VariableWidthBuilder{constructor(a){super(a),this._values=new t.BufferBuilder(new Uint8Array(0))}get byteLength(){let a=this._pendingLength+this.length*4;return this._offsets&&(a+=this._offsets.byteLength),this._values&&(a+=this._values.byteLength),this._nulls&&(a+=this._nulls.byteLength),a}setValue(a,c){return super.setValue(a,(0,e.toUint8Array)(c))}_flushPending(a,c){const d=this._offsets,f=this._values.reserve(c).buffer;let u=0;for(const[r,h]of a)if(h===void 0)d.set(r,0);else{const p=h.length;f.set(h,u),d.set(r,p),u+=p}}}return mp.BinaryBuilder=i,mp}var wp={},n4;function TG(){if(n4)return wp;n4=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.BoolBuilder=void 0;const e=c_(),t=Hn();class n extends t.Builder{constructor(s){super(s),this._values=new e.BitmapBufferBuilder}setValue(s,a){this._values.set(s,+a)}}return wp.BoolBuilder=n,wp}var No={},i4;function vG(){if(i4)return No;i4=1,Object.defineProperty(No,"__esModule",{value:!0}),No.DateMillisecondBuilder=No.DateDayBuilder=No.DateBuilder=void 0;const e=Hn(),t=ya();class n extends e.FixedWidthBuilder{}No.DateBuilder=n,n.prototype._setValue=t.setDate;class i extends n{}No.DateDayBuilder=i,i.prototype._setValue=t.setDateDay;class s extends n{}return No.DateMillisecondBuilder=s,s.prototype._setValue=t.setDateMillisecond,No}var bp={},s4;function EG(){if(s4)return bp;s4=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.DecimalBuilder=void 0;const e=Hn(),t=ya();class n extends e.FixedWidthBuilder{}return bp.DecimalBuilder=n,n.prototype._setValue=t.setDecimal,bp}var Tp={},r4;function SG(){if(r4)return Tp;r4=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.DictionaryBuilder=void 0;const e=wn(),t=Hn(),n=hE();class i extends t.Builder{constructor({type:a,nullValues:c,dictionaryHashFunction:d}){super({type:new e.Dictionary(a.dictionary,a.indices,a.id,a.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=(0,n.makeBuilder)({type:this.type.indices,nullValues:c}),this.dictionary=(0,n.makeBuilder)({type:this.type.dictionary,nullValues:null}),typeof d=="function"&&(this.valueToKey=d)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(a){return this.indices.isValid(a)}setValid(a,c){const d=this.indices;return c=d.setValid(a,c),this.length=d.length,c}setValue(a,c){const d=this._keysToIndices,f=this.valueToKey(c);let u=d[f];return u===void 0&&(d[f]=u=this._dictionaryOffset+this.dictionary.append(c).length-1),this.indices.setValue(a,u)}flush(){const a=this.type,c=this._dictionary,d=this.dictionary.toVector(),f=this.indices.flush().clone(a);return f.dictionary=c?c.concat(d):d,this.finished||(this._dictionaryOffset+=d.length),this._dictionary=f.dictionary,this.clear(),f}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(a){return typeof a=="string"?a:`${a}`}}return Tp.DictionaryBuilder=i,Tp}var vp={},a4;function BG(){if(a4)return vp;a4=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.FixedSizeBinaryBuilder=void 0;const e=Hn(),t=ya();class n extends e.FixedWidthBuilder{}return vp.FixedSizeBinaryBuilder=n,n.prototype._setValue=t.setFixedSizeBinary,vp}var Ep={},o4;function IG(){if(o4)return Ep;o4=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.FixedSizeListBuilder=void 0;const e=ir(),t=Hn(),n=wn();class i extends t.Builder{setValue(a,c){const[d]=this.children,f=a*this.stride;for(let u=-1,r=c.length;++u<r;)d.set(f+u,c[u])}addChild(a,c="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const d=this.children.push(a);return this.type=new n.FixedSizeList(this.type.listSize,new e.Field(c,a.type,!0)),d}}return Ep.FixedSizeListBuilder=i,Ep}var Cr={},l4;function FG(){if(l4)return Cr;l4=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Float64Builder=Cr.Float32Builder=Cr.Float16Builder=Cr.FloatBuilder=void 0;const e=lE(),t=Hn();class n extends t.FixedWidthBuilder{setValue(d,f){this._values.set(d,f)}}Cr.FloatBuilder=n;class i extends n{setValue(d,f){super.setValue(d,(0,e.float64ToUint16)(f))}}Cr.Float16Builder=i;class s extends n{}Cr.Float32Builder=s;class a extends n{}return Cr.Float64Builder=a,Cr}var Ro={},c4;function kG(){if(c4)return Ro;c4=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.IntervalYearMonthBuilder=Ro.IntervalDayTimeBuilder=Ro.IntervalBuilder=void 0;const e=Hn(),t=ya();class n extends e.FixedWidthBuilder{}Ro.IntervalBuilder=n,n.prototype._setValue=t.setIntervalValue;class i extends n{}Ro.IntervalDayTimeBuilder=i,i.prototype._setValue=t.setIntervalDayTime;class s extends n{}return Ro.IntervalYearMonthBuilder=s,s.prototype._setValue=t.setIntervalYearMonth,Ro}var Pn={},d4;function xG(){if(d4)return Pn;d4=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.Uint64Builder=Pn.Uint32Builder=Pn.Uint16Builder=Pn.Uint8Builder=Pn.Int64Builder=Pn.Int32Builder=Pn.Int16Builder=Pn.Int8Builder=Pn.IntBuilder=void 0;const e=Hn();class t extends e.FixedWidthBuilder{setValue(h,p){this._values.set(h,p)}}Pn.IntBuilder=t;class n extends t{}Pn.Int8Builder=n;class i extends t{}Pn.Int16Builder=i;class s extends t{}Pn.Int32Builder=s;class a extends t{}Pn.Int64Builder=a;class c extends t{}Pn.Uint8Builder=c;class d extends t{}Pn.Uint16Builder=d;class f extends t{}Pn.Uint32Builder=f;class u extends t{}return Pn.Uint64Builder=u,Pn}var Sp={},f4;function MG(){if(f4)return Sp;f4=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.ListBuilder=void 0;const e=ir(),t=wn(),n=c_(),i=Hn();class s extends i.VariableWidthBuilder{constructor(c){super(c),this._offsets=new n.OffsetsBufferBuilder}addChild(c,d="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=c,this.type=new t.List(new e.Field(d,c.type,!0)),this.numChildren-1}_flushPending(c){const d=this._offsets,[f]=this.children;for(const[u,r]of c)if(typeof r>"u")d.set(u,0);else{const h=r.length,p=d.set(u,h).buffer[u];for(let _=-1;++_<h;)f.set(p+_,r[_])}}}return Sp.ListBuilder=s,Sp}var Bp={},u4;function AG(){if(u4)return Bp;u4=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.MapBuilder=void 0;const e=ir(),t=wn(),n=Hn();class i extends n.VariableWidthBuilder{set(a,c){return super.set(a,c)}setValue(a,c){const d=c instanceof Map?c:new Map(Object.entries(c)),f=this._pending||(this._pending=new Map),u=f.get(a);u&&(this._pendingLength-=u.size),this._pendingLength+=d.size,f.set(a,d)}addChild(a,c=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=a,this.type=new t.Map_(new e.Field(c,a.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(a){const c=this._offsets,[d]=this.children;for(const[f,u]of a)if(u===void 0)c.set(f,0);else{let{[f]:r,[f+1]:h}=c.set(f,u.size).buffer;for(const p of u.entries())if(d.set(r,p),++r>=h)break}}}return Bp.MapBuilder=i,Bp}var Ip={},h4;function OG(){if(h4)return Ip;h4=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.NullBuilder=void 0;const e=Hn();class t extends e.Builder{setValue(i,s){}setValid(i,s){return this.length=Math.max(i+1,this.length),s}}return Ip.NullBuilder=t,Ip}var Fp={},_4;function NG(){if(_4)return Fp;_4=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.StructBuilder=void 0;const e=ir(),t=Hn(),n=wn();class i extends t.Builder{setValue(a,c){const{children:d,type:f}=this;switch(Array.isArray(c)||c.constructor){case!0:return f.children.forEach((u,r)=>d[r].set(a,c[r]));case Map:return f.children.forEach((u,r)=>d[r].set(a,c.get(u.name)));default:return f.children.forEach((u,r)=>d[r].set(a,c[u.name]))}}setValid(a,c){return super.setValid(a,c)||this.children.forEach(d=>d.setValid(a,c)),c}addChild(a,c=`${this.numChildren}`){const d=this.children.push(a);return this.type=new n.Struct([...this.type.children,new e.Field(c,a.type,!0)]),d}}return Fp.StructBuilder=i,Fp}var Ls={},p4;function RG(){if(p4)return Ls;p4=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.TimestampNanosecondBuilder=Ls.TimestampMicrosecondBuilder=Ls.TimestampMillisecondBuilder=Ls.TimestampSecondBuilder=Ls.TimestampBuilder=void 0;const e=Hn(),t=ya();class n extends e.FixedWidthBuilder{}Ls.TimestampBuilder=n,n.prototype._setValue=t.setTimestamp;class i extends n{}Ls.TimestampSecondBuilder=i,i.prototype._setValue=t.setTimestampSecond;class s extends n{}Ls.TimestampMillisecondBuilder=s,s.prototype._setValue=t.setTimestampMillisecond;class a extends n{}Ls.TimestampMicrosecondBuilder=a,a.prototype._setValue=t.setTimestampMicrosecond;class c extends n{}return Ls.TimestampNanosecondBuilder=c,c.prototype._setValue=t.setTimestampNanosecond,Ls}var Ps={},y4;function CG(){if(y4)return Ps;y4=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.TimeNanosecondBuilder=Ps.TimeMicrosecondBuilder=Ps.TimeMillisecondBuilder=Ps.TimeSecondBuilder=Ps.TimeBuilder=void 0;const e=Hn(),t=ya();class n extends e.FixedWidthBuilder{}Ps.TimeBuilder=n,n.prototype._setValue=t.setTime;class i extends n{}Ps.TimeSecondBuilder=i,i.prototype._setValue=t.setTimeSecond;class s extends n{}Ps.TimeMillisecondBuilder=s,s.prototype._setValue=t.setTimeMillisecond;class a extends n{}Ps.TimeMicrosecondBuilder=a,a.prototype._setValue=t.setTimeMicrosecond;class c extends n{}return Ps.TimeNanosecondBuilder=c,c.prototype._setValue=t.setTimeNanosecond,Ps}var Co={},g4;function LG(){if(g4)return Co;g4=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.DenseUnionBuilder=Co.SparseUnionBuilder=Co.UnionBuilder=void 0;const e=ir(),t=c_(),n=Hn(),i=wn();class s extends n.Builder{constructor(f){super(f),this._typeIds=new t.DataBufferBuilder(new Int8Array(0),1),typeof f.valueToChildTypeId=="function"&&(this._valueToChildTypeId=f.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(f,u){return this.set(this.length,f,u)}set(f,u,r){return r===void 0&&(r=this._valueToChildTypeId(this,u,f)),this.setValid(f,this.isValid(u))&&this.setValue(f,u,r),this}setValue(f,u,r){this._typeIds.set(f,r);const h=this.type.typeIdToChildIndex[r],p=this.children[h];p==null||p.set(f,u)}addChild(f,u=`${this.children.length}`){const r=this.children.push(f),{type:{children:h,mode:p,typeIds:_}}=this,l=[...h,new e.Field(u,f.type)];return this.type=new i.Union(p,[..._,r],l),r}_valueToChildTypeId(f,u,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}Co.UnionBuilder=s;class a extends s{}Co.SparseUnionBuilder=a;class c extends s{constructor(f){super(f),this._offsets=new t.DataBufferBuilder(new Int32Array(0))}setValue(f,u,r){const h=this._typeIds.set(f,r).buffer[f],p=this.getChildAt(this.type.typeIdToChildIndex[h]),_=this._offsets.set(f,p.length).buffer[f];p==null||p.set(_,u)}}return Co.DenseUnionBuilder=c,Co}var kp={},m4;function PG(){if(m4)return kp;m4=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.Utf8Builder=void 0;const e=a_(),t=TA(),n=c_(),i=Hn();class s extends i.VariableWidthBuilder{constructor(c){super(c),this._values=new n.BufferBuilder(new Uint8Array(0))}get byteLength(){let c=this._pendingLength+this.length*4;return this._offsets&&(c+=this._offsets.byteLength),this._values&&(c+=this._values.byteLength),this._nulls&&(c+=this._nulls.byteLength),c}setValue(c,d){return super.setValue(c,(0,e.encodeUtf8)(d))}_flushPending(c,d){}}return kp.Utf8Builder=s,s.prototype._flushPending=t.BinaryBuilder.prototype._flushPending,kp}var w4;function yye(){if(w4)return ud;w4=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.instance=ud.GetBuilderCtor=void 0;const e=Ms(),t=TA(),n=TG(),i=vG(),s=EG(),a=SG(),c=BG(),d=IG(),f=FG(),u=kG(),r=xG(),h=MG(),p=AG(),_=OG(),l=NG(),b=RG(),m=CG(),E=LG(),B=PG();class I extends e.Visitor{visitNull(){return _.NullBuilder}visitBool(){return n.BoolBuilder}visitInt(){return r.IntBuilder}visitInt8(){return r.Int8Builder}visitInt16(){return r.Int16Builder}visitInt32(){return r.Int32Builder}visitInt64(){return r.Int64Builder}visitUint8(){return r.Uint8Builder}visitUint16(){return r.Uint16Builder}visitUint32(){return r.Uint32Builder}visitUint64(){return r.Uint64Builder}visitFloat(){return f.FloatBuilder}visitFloat16(){return f.Float16Builder}visitFloat32(){return f.Float32Builder}visitFloat64(){return f.Float64Builder}visitUtf8(){return B.Utf8Builder}visitBinary(){return t.BinaryBuilder}visitFixedSizeBinary(){return c.FixedSizeBinaryBuilder}visitDate(){return i.DateBuilder}visitDateDay(){return i.DateDayBuilder}visitDateMillisecond(){return i.DateMillisecondBuilder}visitTimestamp(){return b.TimestampBuilder}visitTimestampSecond(){return b.TimestampSecondBuilder}visitTimestampMillisecond(){return b.TimestampMillisecondBuilder}visitTimestampMicrosecond(){return b.TimestampMicrosecondBuilder}visitTimestampNanosecond(){return b.TimestampNanosecondBuilder}visitTime(){return m.TimeBuilder}visitTimeSecond(){return m.TimeSecondBuilder}visitTimeMillisecond(){return m.TimeMillisecondBuilder}visitTimeMicrosecond(){return m.TimeMicrosecondBuilder}visitTimeNanosecond(){return m.TimeNanosecondBuilder}visitDecimal(){return s.DecimalBuilder}visitList(){return h.ListBuilder}visitStruct(){return l.StructBuilder}visitUnion(){return E.UnionBuilder}visitDenseUnion(){return E.DenseUnionBuilder}visitSparseUnion(){return E.SparseUnionBuilder}visitDictionary(){return a.DictionaryBuilder}visitInterval(){return u.IntervalBuilder}visitIntervalDayTime(){return u.IntervalDayTimeBuilder}visitIntervalYearMonth(){return u.IntervalYearMonthBuilder}visitFixedSizeList(){return d.FixedSizeListBuilder}visitMap(){return p.MapBuilder}}return ud.GetBuilderCtor=I,ud.instance=new I,ud}var oI={},b4;function uE(){return b4||(b4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compareTypes=e.compareFields=e.compareSchemas=e.instance=e.TypeComparator=void 0;const t=Ms();class n extends t.Visitor{compareSchemas(x,M){return x===M||M instanceof x.constructor&&this.compareManyFields(x.fields,M.fields)}compareManyFields(x,M){return x===M||Array.isArray(x)&&Array.isArray(M)&&x.length===M.length&&x.every((R,P)=>this.compareFields(R,M[P]))}compareFields(x,M){return x===M||M instanceof x.constructor&&x.name===M.name&&x.nullable===M.nullable&&this.visit(x.type,M.type)}}e.TypeComparator=n;function i(F,x){return x instanceof F.constructor}function s(F,x){return F===x||i(F,x)}function a(F,x){return F===x||i(F,x)&&F.bitWidth===x.bitWidth&&F.isSigned===x.isSigned}function c(F,x){return F===x||i(F,x)&&F.precision===x.precision}function d(F,x){return F===x||i(F,x)&&F.byteWidth===x.byteWidth}function f(F,x){return F===x||i(F,x)&&F.unit===x.unit}function u(F,x){return F===x||i(F,x)&&F.unit===x.unit&&F.timezone===x.timezone}function r(F,x){return F===x||i(F,x)&&F.unit===x.unit&&F.bitWidth===x.bitWidth}function h(F,x){return F===x||i(F,x)&&F.children.length===x.children.length&&e.instance.compareManyFields(F.children,x.children)}function p(F,x){return F===x||i(F,x)&&F.children.length===x.children.length&&e.instance.compareManyFields(F.children,x.children)}function _(F,x){return F===x||i(F,x)&&F.mode===x.mode&&F.typeIds.every((M,R)=>M===x.typeIds[R])&&e.instance.compareManyFields(F.children,x.children)}function l(F,x){return F===x||i(F,x)&&F.id===x.id&&F.isOrdered===x.isOrdered&&e.instance.visit(F.indices,x.indices)&&e.instance.visit(F.dictionary,x.dictionary)}function b(F,x){return F===x||i(F,x)&&F.unit===x.unit}function m(F,x){return F===x||i(F,x)&&F.listSize===x.listSize&&F.children.length===x.children.length&&e.instance.compareManyFields(F.children,x.children)}function E(F,x){return F===x||i(F,x)&&F.keysSorted===x.keysSorted&&F.children.length===x.children.length&&e.instance.compareManyFields(F.children,x.children)}n.prototype.visitNull=s,n.prototype.visitBool=s,n.prototype.visitInt=a,n.prototype.visitInt8=a,n.prototype.visitInt16=a,n.prototype.visitInt32=a,n.prototype.visitInt64=a,n.prototype.visitUint8=a,n.prototype.visitUint16=a,n.prototype.visitUint32=a,n.prototype.visitUint64=a,n.prototype.visitFloat=c,n.prototype.visitFloat16=c,n.prototype.visitFloat32=c,n.prototype.visitFloat64=c,n.prototype.visitUtf8=s,n.prototype.visitBinary=s,n.prototype.visitFixedSizeBinary=d,n.prototype.visitDate=f,n.prototype.visitDateDay=f,n.prototype.visitDateMillisecond=f,n.prototype.visitTimestamp=u,n.prototype.visitTimestampSecond=u,n.prototype.visitTimestampMillisecond=u,n.prototype.visitTimestampMicrosecond=u,n.prototype.visitTimestampNanosecond=u,n.prototype.visitTime=r,n.prototype.visitTimeSecond=r,n.prototype.visitTimeMillisecond=r,n.prototype.visitTimeMicrosecond=r,n.prototype.visitTimeNanosecond=r,n.prototype.visitDecimal=s,n.prototype.visitList=h,n.prototype.visitStruct=p,n.prototype.visitUnion=_,n.prototype.visitDenseUnion=_,n.prototype.visitSparseUnion=_,n.prototype.visitDictionary=l,n.prototype.visitInterval=b,n.prototype.visitIntervalDayTime=b,n.prototype.visitIntervalYearMonth=b,n.prototype.visitFixedSizeList=m,n.prototype.visitMap=E,e.instance=new n;function B(F,x){return e.instance.compareSchemas(F,x)}e.compareSchemas=B;function I(F,x){return e.instance.compareFields(F,x)}e.compareFields=I;function k(F,x){return e.instance.visit(F,x)}e.compareTypes=k}(oI)),oI}var T4;function hE(){if(T4)return Cs;T4=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.builderThroughAsyncIterable=Cs.builderThroughIterable=Cs.tableFromJSON=Cs.vectorFromArray=Cs.makeBuilder=void 0;const e=et,t=ir(),n=e.__importStar(wn()),i=Bl(),s=As(),a=yye(),c=wm(),d=Rf(),f=uE();function u(b){const m=b.type,E=new(a.instance.getVisitFn(m)())(b);if(m.children&&m.children.length>0){const B=b.children||[],I={nullValues:b.nullValues},k=Array.isArray(B)?(F,x)=>B[x]||I:({name:F})=>B[F]||I;for(const[F,x]of m.children.entries()){const{type:M}=x,R=k(x,F);E.children.push(u(Object.assign(Object.assign({},R),{type:M})))}}return E}Cs.makeBuilder=u;function r(b,m){if(b instanceof i.Data||b instanceof s.Vector||b.type instanceof n.DataType||ArrayBuffer.isView(b))return(0,s.makeVector)(b);const E={type:m??p(b),nullValues:[null]},B=[..._(E)(b)],I=B.length===1?B[0]:B.reduce((k,F)=>k.concat(F));return n.DataType.isDictionary(I.type)?I.memoize():I}Cs.vectorFromArray=r;function h(b){const m=r(b),E=new d.RecordBatch(new t.Schema(m.type.children),m.data[0]);return new c.Table(E)}Cs.tableFromJSON=h;function p(b){if(b.length===0)return new n.Null;let m=0,E=0,B=0,I=0,k=0,F=0,x=0,M=0;for(const R of b){if(R==null){++m;continue}switch(typeof R){case"bigint":++F;continue;case"boolean":++x;continue;case"number":++I;continue;case"string":++k;continue;case"object":Array.isArray(R)?++E:Object.prototype.toString.call(R)==="[object Date]"?++M:++B;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}if(I+m===b.length)return new n.Float64;if(k+m===b.length)return new n.Dictionary(new n.Utf8,new n.Int32);if(F+m===b.length)return new n.Int64;if(x+m===b.length)return new n.Bool;if(M+m===b.length)return new n.DateMillisecond;if(E+m===b.length){const R=b,P=p(R[R.findIndex(C=>C!=null)]);if(R.every(C=>C==null||(0,f.compareTypes)(P,p(C))))return new n.List(new t.Field("",P,!0))}else if(B+m===b.length){const R=new Map;for(const P of b)for(const C of Object.keys(P))!R.has(C)&&P[C]!=null&&R.set(C,new t.Field(C,p([P[C]]),!0));return new n.Struct([...R.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function _(b){const{["queueingStrategy"]:m="count"}=b,{["highWaterMark"]:E=m!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=b,B=m!=="bytes"?"length":"byteLength";return function*(I){let k=0;const F=u(b);for(const x of I)F.append(x)[B]>=E&&++k&&(yield F.toVector());(F.finish().length>0||k===0)&&(yield F.toVector())}}Cs.builderThroughIterable=_;function l(b){const{["queueingStrategy"]:m="count"}=b,{["highWaterMark"]:E=m!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=b,B=m!=="bytes"?"length":"byteLength";return function(I){return e.__asyncGenerator(this,arguments,function*(){var k,F,x,M;let R=0;const P=u(b);try{for(var C=!0,D=e.__asyncValues(I),j;j=yield e.__await(D.next()),k=j.done,!k;){M=j.value,C=!1;try{const $=M;P.append($)[B]>=E&&++R&&(yield yield e.__await(P.toVector()))}finally{C=!0}}}catch($){F={error:$}}finally{try{!C&&!k&&(x=D.return)&&(yield e.__await(x.call(D)))}finally{if(F)throw F.error}}(P.finish().length>0||R===0)&&(yield yield e.__await(P.toVector()))})}}return Cs.builderThroughAsyncIterable=l,Cs}var xp={},v4;function gye(){if(v4)return xp;v4=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.distributeVectorsIntoRecordBatches=void 0;const e=Bl(),t=wn(),n=Rf();function i(c,d){return s(c,d.map(f=>f.data.concat()))}xp.distributeVectorsIntoRecordBatches=i;function s(c,d){const f=[...c.fields],u=[],r={numBatches:d.reduce((E,B)=>Math.max(E,B.length),0)};let h=0,p=0,_=-1;const l=d.length;let b,m=[];for(;r.numBatches-- >0;){for(p=Number.POSITIVE_INFINITY,_=-1;++_<l;)m[_]=b=d[_].shift(),p=Math.min(p,b?b.length:p);Number.isFinite(p)&&(m=a(f,p,m,d,r),p>0&&(u[h++]=(0,e.makeData)({type:new t.Struct(f),length:p,nullCount:0,children:m.slice()})))}return[c=c.assign(f),u.map(E=>new n.RecordBatch(c,E))]}function a(c,d,f,u,r){var h;const p=(d+63&-64)>>3;for(let _=-1,l=u.length;++_<l;){const b=f[_],m=b==null?void 0:b.length;if(m>=d)m===d?f[_]=b:(f[_]=b.slice(0,d),r.numBatches=Math.max(r.numBatches,u[_].unshift(b.slice(d,m-d))));else{const E=c[_];c[_]=E.clone({nullable:!0}),f[_]=(h=b==null?void 0:b._changeLengthAndBackfillNullBitmap(d))!==null&&h!==void 0?h:(0,e.makeData)({type:E.type,length:d,nullCount:d,nullBitmap:new Uint8Array(p)})}}return f}return xp}var E4;function wm(){if(E4)return Oo;E4=1;var e;Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.tableFromArrays=Oo.makeTable=Oo.Table=void 0;const t=$n(),n=Bl(),i=hE(),s=As(),a=ir(),c=wn(),d=uE(),f=gye(),u=rA(),r=o_(),h=ya(),p=aA(),_=oA(),l=lA(),b=dE(),m=Rf();class E{constructor(...F){var x,M;if(F.length===0)return this.batches=[],this.schema=new a.Schema([]),this._offsets=[0],this;let R,P;F[0]instanceof a.Schema&&(R=F.shift()),F[F.length-1]instanceof Uint32Array&&(P=F.pop());const C=j=>{if(j){if(j instanceof m.RecordBatch)return[j];if(j instanceof E)return j.batches;if(j instanceof n.Data){if(j.type instanceof c.Struct)return[new m.RecordBatch(new a.Schema(j.type.children),j)]}else{if(Array.isArray(j))return j.flatMap($=>C($));if(typeof j[Symbol.iterator]=="function")return[...j].flatMap($=>C($));if(typeof j=="object"){const $=Object.keys(j),W=$.map(z=>new s.Vector([j[z]])),H=new a.Schema($.map((z,q)=>new a.Field(String(z),W[q].type))),[,G]=(0,f.distributeVectorsIntoRecordBatches)(H,W);return G.length===0?[new m.RecordBatch(j)]:G}}}return[]},D=F.flatMap(j=>C(j));if(R=(M=R??((x=D[0])===null||x===void 0?void 0:x.schema))!==null&&M!==void 0?M:new a.Schema([]),!(R instanceof a.Schema))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const j of D){if(!(j instanceof m.RecordBatch))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!(0,d.compareSchemas)(R,j.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=R,this.batches=D,this._offsets=P??(0,u.computeChunkOffsets)(this.data)}get data(){return this.batches.map(({data:F})=>F)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((F,x)=>F+x.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=(0,u.computeChunkNullCounts)(this.data)),this._nullCount}isValid(F){return!1}get(F){return null}set(F,x){}indexOf(F,x){return-1}getByteLength(F){return 0}[Symbol.iterator](){return this.batches.length>0?_.instance.visit(new s.Vector(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...F){const x=this.schema,M=this.data.concat(F.flatMap(({data:R})=>R));return new E(x,M.map(R=>new m.RecordBatch(x,R)))}slice(F,x){const M=this.schema;[F,x]=(0,b.clampRange)({length:this.numRows},F,x);const R=(0,u.sliceChunks)(this.data,this._offsets,F,x);return new E(M,R.map(P=>new m.RecordBatch(M,P)))}getChild(F){return this.getChildAt(this.schema.fields.findIndex(x=>x.name===F))}getChildAt(F){if(F>-1&&F<this.schema.fields.length){const x=this.data.map(M=>M.children[F]);if(x.length===0){const{type:M}=this.schema.fields[F],R=(0,n.makeData)({type:M,length:0,nullCount:0});x.push(R._changeLengthAndBackfillNullBitmap(this.numRows))}return new s.Vector(x)}return null}setChild(F,x){var M;return this.setChildAt((M=this.schema.fields)===null||M===void 0?void 0:M.findIndex(R=>R.name===F),x)}setChildAt(F,x){let M=this.schema,R=[...this.batches];if(F>-1&&F<this.numCols){x||(x=new s.Vector([(0,n.makeData)({type:new c.Null,length:this.numRows})]));const P=M.fields.slice(),C=P[F].clone({type:x.type}),D=this.schema.fields.map((j,$)=>this.getChildAt($));[P[F],D[F]]=[C,x],[M,R]=(0,f.distributeVectorsIntoRecordBatches)(M,D)}return new E(M,R)}select(F){const x=this.schema.fields.reduce((M,R,P)=>M.set(R.name,P),new Map);return this.selectAt(F.map(M=>x.get(M)).filter(M=>M>-1))}selectAt(F){const x=this.schema.selectAt(F),M=this.batches.map(R=>R.selectAt(F));return new E(x,M)}assign(F){const x=this.schema.fields,[M,R]=F.schema.fields.reduce((D,j,$)=>{const[W,H]=D,G=x.findIndex(z=>z.name===j.name);return~G?H[G]=$:W.push($),D},[[],[]]),P=this.schema.assign(F.schema),C=[...x.map((D,j)=>[j,R[j]]).map(([D,j])=>j===void 0?this.getChildAt(D):F.getChildAt(j)),...M.map(D=>F.getChildAt(D))].filter(Boolean);return new E(...(0,f.distributeVectorsIntoRecordBatches)(P,C))}}Oo.Table=E,e=Symbol.toStringTag,E[e]=(k=>(k.schema=null,k.batches=[],k._offsets=new Uint32Array([0]),k._nullCount=-1,k[Symbol.isConcatSpreadable]=!0,k.isValid=(0,u.wrapChunkedCall1)(u.isChunkedValid),k.get=(0,u.wrapChunkedCall1)(r.instance.getVisitFn(t.Type.Struct)),k.set=(0,u.wrapChunkedCall2)(h.instance.getVisitFn(t.Type.Struct)),k.indexOf=(0,u.wrapChunkedIndexOf)(p.instance.getVisitFn(t.Type.Struct)),k.getByteLength=(0,u.wrapChunkedCall1)(l.instance.getVisitFn(t.Type.Struct)),"Table"))(E.prototype);function B(k){const F={},x=Object.entries(k);for(const[M,R]of x)F[M]=(0,s.makeVector)(R);return new E(F)}Oo.makeTable=B;function I(k){const F={},x=Object.entries(k);for(const[M,R]of x)F[M]=(0,i.vectorFromArray)(R);return new E(F)}return Oo.tableFromArrays=I,Oo}var S4;function Rf(){if(S4)return fd;S4=1;var e;Object.defineProperty(fd,"__esModule",{value:!0}),fd._InternalEmptyPlaceholderRecordBatch=fd.RecordBatch=void 0;const t=Bl(),n=wm(),i=As(),s=ir(),a=wn(),c=o_(),d=ya(),f=aA(),u=oA(),r=lA();class h{constructor(...m){switch(m.length){case 2:{if([this.schema]=m,!(this.schema instanceof s.Schema))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=(0,t.makeData)({nullCount:0,type:new a.Struct(this.schema.fields),children:this.schema.fields.map(E=>(0,t.makeData)({type:E.type,nullCount:0}))})]=m,!(this.data instanceof t.Data))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=p(this.schema,this.data.children);break}case 1:{const[E]=m,{fields:B,children:I,length:k}=Object.keys(E).reduce((M,R,P)=>(M.children[P]=E[R],M.length=Math.max(M.length,E[R].length),M.fields[P]=s.Field.new({name:R,type:E[R].type,nullable:!0}),M),{length:0,fields:new Array,children:new Array}),F=new s.Schema(B),x=(0,t.makeData)({type:new a.Struct(B),length:k,children:I,nullCount:0});[this.schema,this.data]=p(F,x.children,k);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=_(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(m){return this.data.getValid(m)}get(m){return c.instance.visit(this.data,m)}set(m,E){return d.instance.visit(this.data,m,E)}indexOf(m,E){return f.instance.visit(this.data,m,E)}getByteLength(m){return r.instance.visit(this.data,m)}[Symbol.iterator](){return u.instance.visit(new i.Vector([this.data]))}toArray(){return[...this]}concat(...m){return new n.Table(this.schema,[this,...m])}slice(m,E){const[B]=new i.Vector([this.data]).slice(m,E).data;return new h(this.schema,B)}getChild(m){var E;return this.getChildAt((E=this.schema.fields)===null||E===void 0?void 0:E.findIndex(B=>B.name===m))}getChildAt(m){return m>-1&&m<this.schema.fields.length?new i.Vector([this.data.children[m]]):null}setChild(m,E){var B;return this.setChildAt((B=this.schema.fields)===null||B===void 0?void 0:B.findIndex(I=>I.name===m),E)}setChildAt(m,E){let B=this.schema,I=this.data;if(m>-1&&m<this.numCols){E||(E=new i.Vector([(0,t.makeData)({type:new a.Null,length:this.numRows})]));const k=B.fields.slice(),F=I.children.slice(),x=k[m].clone({type:E.type});[k[m],F[m]]=[x,E.data[0]],B=new s.Schema(k,new Map(this.schema.metadata)),I=(0,t.makeData)({type:new a.Struct(k),children:F})}return new h(B,I)}select(m){const E=this.schema.select(m),B=new a.Struct(E.fields),I=[];for(const k of m){const F=this.schema.fields.findIndex(x=>x.name===k);~F&&(I[F]=this.data.children[F])}return new h(E,(0,t.makeData)({type:B,length:this.numRows,children:I}))}selectAt(m){const E=this.schema.selectAt(m),B=m.map(k=>this.data.children[k]).filter(Boolean),I=(0,t.makeData)({type:new a.Struct(E.fields),length:this.numRows,children:B});return new h(E,I)}}fd.RecordBatch=h,e=Symbol.toStringTag,h[e]=(b=>(b._nullCount=-1,b[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(h.prototype);function p(b,m,E=m.reduce((B,I)=>Math.max(B,I.length),0)){var B;const I=[...b.fields],k=[...m],F=(E+63&-64)>>3;for(const[x,M]of b.fields.entries()){const R=m[x];(!R||R.length!==E)&&(I[x]=M.clone({nullable:!0}),k[x]=(B=R==null?void 0:R._changeLengthAndBackfillNullBitmap(E))!==null&&B!==void 0?B:(0,t.makeData)({type:M.type,length:E,nullCount:E,nullBitmap:new Uint8Array(F)}))}return[b.assign(I),(0,t.makeData)({type:new a.Struct(I),length:E,children:k})]}function _(b,m,E=new Map){for(let B=-1,I=b.length;++B<I;){const F=b[B].type,x=m[B];if(a.DataType.isDictionary(F)){if(!E.has(F.id))x.dictionary&&E.set(F.id,x.dictionary);else if(E.get(F.id)!==x.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}F.children&&F.children.length>0&&_(F.children,x.children,E)}return E}class l extends h{constructor(m){const E=m.fields.map(I=>(0,t.makeData)({type:I.type})),B=(0,t.makeData)({type:new a.Struct(m.fields),nullCount:0,children:E});super(m,B)}}return fd._InternalEmptyPlaceholderRecordBatch=l,fd}var lI={},Ds={},Mp={},Ap={},cI={},B4;function mye(){return B4||(B4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BodyCompressionMethod=void 0,function(t){t[t.BUFFER=0]="BUFFER"}(e.BodyCompressionMethod||(e.BodyCompressionMethod={}))}(cI)),cI}var dI={},I4;function wye(){return I4||(I4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CompressionType=void 0,function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(e.CompressionType||(e.CompressionType={}))}(dI)),dI}var F4;function bye(){if(F4)return Ap;F4=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.BodyCompression=void 0;const t=et.__importStar(It),n=mye(),i=wye();class s{constructor(){this.bb=null,this.bb_pos=0}__init(c,d){return this.bb_pos=c,this.bb=d,this}static getRootAsBodyCompression(c,d){return(d||new s).__init(c.readInt32(c.position())+c.position(),c)}static getSizePrefixedRootAsBodyCompression(c,d){return c.setPosition(c.position()+t.SIZE_PREFIX_LENGTH),(d||new s).__init(c.readInt32(c.position())+c.position(),c)}codec(){const c=this.bb.__offset(this.bb_pos,4);return c?this.bb.readInt8(this.bb_pos+c):i.CompressionType.LZ4_FRAME}method(){const c=this.bb.__offset(this.bb_pos,6);return c?this.bb.readInt8(this.bb_pos+c):n.BodyCompressionMethod.BUFFER}static startBodyCompression(c){c.startObject(2)}static addCodec(c,d){c.addFieldInt8(0,d,i.CompressionType.LZ4_FRAME)}static addMethod(c,d){c.addFieldInt8(1,d,n.BodyCompressionMethod.BUFFER)}static endBodyCompression(c){return c.endObject()}static createBodyCompression(c,d,f){return s.startBodyCompression(c),s.addCodec(c,d),s.addMethod(c,f),s.endBodyCompression(c)}}return Ap.BodyCompression=s,Ap}var Op={},k4;function Cf(){if(k4)return Op;k4=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.Buffer=void 0;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,i){return this.bb_pos=n,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(n,i,s){return n.prep(8,16),n.writeInt64(BigInt(s??0)),n.writeInt64(BigInt(i??0)),n.offset()}}return Op.Buffer=e,Op}var Np={},x4;function DG(){if(x4)return Np;x4=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.FieldNode=void 0;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,i){return this.bb_pos=n,this.bb=i,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(n,i,s){return n.prep(8,16),n.writeInt64(BigInt(s??0)),n.writeInt64(BigInt(i??0)),n.offset()}}return Np.FieldNode=e,Np}var M4;function vA(){if(M4)return Mp;M4=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.RecordBatch=void 0;const t=et.__importStar(It),n=bye(),i=Cf(),s=DG();class a{constructor(){this.bb=null,this.bb_pos=0}__init(d,f){return this.bb_pos=d,this.bb=f,this}static getRootAsRecordBatch(d,f){return(f||new a).__init(d.readInt32(d.position())+d.position(),d)}static getSizePrefixedRootAsRecordBatch(d,f){return d.setPosition(d.position()+t.SIZE_PREFIX_LENGTH),(f||new a).__init(d.readInt32(d.position())+d.position(),d)}length(){const d=this.bb.__offset(this.bb_pos,4);return d?this.bb.readInt64(this.bb_pos+d):BigInt("0")}nodes(d,f){const u=this.bb.__offset(this.bb_pos,6);return u?(f||new s.FieldNode).__init(this.bb.__vector(this.bb_pos+u)+d*16,this.bb):null}nodesLength(){const d=this.bb.__offset(this.bb_pos,6);return d?this.bb.__vector_len(this.bb_pos+d):0}buffers(d,f){const u=this.bb.__offset(this.bb_pos,8);return u?(f||new i.Buffer).__init(this.bb.__vector(this.bb_pos+u)+d*16,this.bb):null}buffersLength(){const d=this.bb.__offset(this.bb_pos,8);return d?this.bb.__vector_len(this.bb_pos+d):0}compression(d){const f=this.bb.__offset(this.bb_pos,10);return f?(d||new n.BodyCompression).__init(this.bb.__indirect(this.bb_pos+f),this.bb):null}static startRecordBatch(d){d.startObject(4)}static addLength(d,f){d.addFieldInt64(0,f,BigInt("0"))}static addNodes(d,f){d.addFieldOffset(1,f,0)}static startNodesVector(d,f){d.startVector(16,f,8)}static addBuffers(d,f){d.addFieldOffset(2,f,0)}static startBuffersVector(d,f){d.startVector(16,f,8)}static addCompression(d,f){d.addFieldOffset(3,f,0)}static endRecordBatch(d){return d.endObject()}}return Mp.RecordBatch=a,Mp}var Rp={},A4;function UG(){if(A4)return Rp;A4=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.DictionaryBatch=void 0;const t=et.__importStar(It),n=vA();class i{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsDictionaryBatch(a,c){return(c||new i).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsDictionaryBatch(a,c){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(c||new i).__init(a.readInt32(a.position())+a.position(),a)}id(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt64(this.bb_pos+a):BigInt("0")}data(a){const c=this.bb.__offset(this.bb_pos,6);return c?(a||new n.RecordBatch).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}isDelta(){const a=this.bb.__offset(this.bb_pos,8);return a?!!this.bb.readInt8(this.bb_pos+a):!1}static startDictionaryBatch(a){a.startObject(3)}static addId(a,c){a.addFieldInt64(0,c,BigInt("0"))}static addData(a,c){a.addFieldOffset(1,c,0)}static addIsDelta(a,c){a.addFieldInt8(2,+c,0)}static endDictionaryBatch(a){return a.endObject()}}return Rp.DictionaryBatch=i,Rp}var Cp={},fI={},Lp={},uI={},Pp={},hI={},O4;function Tye(){return O4||(O4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SparseMatrixCompressedAxis=void 0,function(t){t[t.Row=0]="Row",t[t.Column=1]="Column"}(e.SparseMatrixCompressedAxis||(e.SparseMatrixCompressedAxis={}))}(hI)),hI}var N4;function vye(){if(N4)return Pp;N4=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.SparseMatrixIndexCSX=void 0;const t=et.__importStar(It),n=Cf(),i=Of(),s=Tye();class a{constructor(){this.bb=null,this.bb_pos=0}__init(d,f){return this.bb_pos=d,this.bb=f,this}static getRootAsSparseMatrixIndexCSX(d,f){return(f||new a).__init(d.readInt32(d.position())+d.position(),d)}static getSizePrefixedRootAsSparseMatrixIndexCSX(d,f){return d.setPosition(d.position()+t.SIZE_PREFIX_LENGTH),(f||new a).__init(d.readInt32(d.position())+d.position(),d)}compressedAxis(){const d=this.bb.__offset(this.bb_pos,4);return d?this.bb.readInt16(this.bb_pos+d):s.SparseMatrixCompressedAxis.Row}indptrType(d){const f=this.bb.__offset(this.bb_pos,6);return f?(d||new i.Int).__init(this.bb.__indirect(this.bb_pos+f),this.bb):null}indptrBuffer(d){const f=this.bb.__offset(this.bb_pos,8);return f?(d||new n.Buffer).__init(this.bb_pos+f,this.bb):null}indicesType(d){const f=this.bb.__offset(this.bb_pos,10);return f?(d||new i.Int).__init(this.bb.__indirect(this.bb_pos+f),this.bb):null}indicesBuffer(d){const f=this.bb.__offset(this.bb_pos,12);return f?(d||new n.Buffer).__init(this.bb_pos+f,this.bb):null}static startSparseMatrixIndexCSX(d){d.startObject(5)}static addCompressedAxis(d,f){d.addFieldInt16(0,f,s.SparseMatrixCompressedAxis.Row)}static addIndptrType(d,f){d.addFieldOffset(1,f,0)}static addIndptrBuffer(d,f){d.addFieldStruct(2,f,0)}static addIndicesType(d,f){d.addFieldOffset(3,f,0)}static addIndicesBuffer(d,f){d.addFieldStruct(4,f,0)}static endSparseMatrixIndexCSX(d){const f=d.endObject();return d.requiredField(f,6),d.requiredField(f,8),d.requiredField(f,10),d.requiredField(f,12),f}}return Pp.SparseMatrixIndexCSX=a,Pp}var Dp={},R4;function Eye(){if(R4)return Dp;R4=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.SparseTensorIndexCOO=void 0;const t=et.__importStar(It),n=Cf(),i=Of();class s{constructor(){this.bb=null,this.bb_pos=0}__init(c,d){return this.bb_pos=c,this.bb=d,this}static getRootAsSparseTensorIndexCOO(c,d){return(d||new s).__init(c.readInt32(c.position())+c.position(),c)}static getSizePrefixedRootAsSparseTensorIndexCOO(c,d){return c.setPosition(c.position()+t.SIZE_PREFIX_LENGTH),(d||new s).__init(c.readInt32(c.position())+c.position(),c)}indicesType(c){const d=this.bb.__offset(this.bb_pos,4);return d?(c||new i.Int).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}indicesStrides(c){const d=this.bb.__offset(this.bb_pos,6);return d?this.bb.readInt64(this.bb.__vector(this.bb_pos+d)+c*8):BigInt(0)}indicesStridesLength(){const c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__vector_len(this.bb_pos+c):0}indicesBuffer(c){const d=this.bb.__offset(this.bb_pos,8);return d?(c||new n.Buffer).__init(this.bb_pos+d,this.bb):null}isCanonical(){const c=this.bb.__offset(this.bb_pos,10);return c?!!this.bb.readInt8(this.bb_pos+c):!1}static startSparseTensorIndexCOO(c){c.startObject(4)}static addIndicesType(c,d){c.addFieldOffset(0,d,0)}static addIndicesStrides(c,d){c.addFieldOffset(1,d,0)}static createIndicesStridesVector(c,d){c.startVector(8,d.length,8);for(let f=d.length-1;f>=0;f--)c.addInt64(d[f]);return c.endVector()}static startIndicesStridesVector(c,d){c.startVector(8,d,8)}static addIndicesBuffer(c,d){c.addFieldStruct(2,d,0)}static addIsCanonical(c,d){c.addFieldInt8(3,+d,0)}static endSparseTensorIndexCOO(c){const d=c.endObject();return c.requiredField(d,4),c.requiredField(d,8),d}}return Dp.SparseTensorIndexCOO=s,Dp}var Up={},C4;function Sye(){if(C4)return Up;C4=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.SparseTensorIndexCSF=void 0;const t=et.__importStar(It),n=Cf(),i=Of();class s{constructor(){this.bb=null,this.bb_pos=0}__init(c,d){return this.bb_pos=c,this.bb=d,this}static getRootAsSparseTensorIndexCSF(c,d){return(d||new s).__init(c.readInt32(c.position())+c.position(),c)}static getSizePrefixedRootAsSparseTensorIndexCSF(c,d){return c.setPosition(c.position()+t.SIZE_PREFIX_LENGTH),(d||new s).__init(c.readInt32(c.position())+c.position(),c)}indptrType(c){const d=this.bb.__offset(this.bb_pos,4);return d?(c||new i.Int).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}indptrBuffers(c,d){const f=this.bb.__offset(this.bb_pos,6);return f?(d||new n.Buffer).__init(this.bb.__vector(this.bb_pos+f)+c*16,this.bb):null}indptrBuffersLength(){const c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__vector_len(this.bb_pos+c):0}indicesType(c){const d=this.bb.__offset(this.bb_pos,8);return d?(c||new i.Int).__init(this.bb.__indirect(this.bb_pos+d),this.bb):null}indicesBuffers(c,d){const f=this.bb.__offset(this.bb_pos,10);return f?(d||new n.Buffer).__init(this.bb.__vector(this.bb_pos+f)+c*16,this.bb):null}indicesBuffersLength(){const c=this.bb.__offset(this.bb_pos,10);return c?this.bb.__vector_len(this.bb_pos+c):0}axisOrder(c){const d=this.bb.__offset(this.bb_pos,12);return d?this.bb.readInt32(this.bb.__vector(this.bb_pos+d)+c*4):0}axisOrderLength(){const c=this.bb.__offset(this.bb_pos,12);return c?this.bb.__vector_len(this.bb_pos+c):0}axisOrderArray(){const c=this.bb.__offset(this.bb_pos,12);return c?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+c),this.bb.__vector_len(this.bb_pos+c)):null}static startSparseTensorIndexCSF(c){c.startObject(5)}static addIndptrType(c,d){c.addFieldOffset(0,d,0)}static addIndptrBuffers(c,d){c.addFieldOffset(1,d,0)}static startIndptrBuffersVector(c,d){c.startVector(16,d,8)}static addIndicesType(c,d){c.addFieldOffset(2,d,0)}static addIndicesBuffers(c,d){c.addFieldOffset(3,d,0)}static startIndicesBuffersVector(c,d){c.startVector(16,d,8)}static addAxisOrder(c,d){c.addFieldOffset(4,d,0)}static createAxisOrderVector(c,d){c.startVector(4,d.length,4);for(let f=d.length-1;f>=0;f--)c.addInt32(d[f]);return c.endVector()}static startAxisOrderVector(c,d){c.startVector(4,d,4)}static endSparseTensorIndexCSF(c){const d=c.endObject();return c.requiredField(d,4),c.requiredField(d,6),c.requiredField(d,8),c.requiredField(d,10),c.requiredField(d,12),d}}return Up.SparseTensorIndexCSF=s,Up}var L4;function Bye(){return L4||(L4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.unionListToSparseTensorIndex=e.unionToSparseTensorIndex=e.SparseTensorIndex=void 0;const t=vye(),n=Eye(),i=Sye();var s;(function(d){d[d.NONE=0]="NONE",d[d.SparseTensorIndexCOO=1]="SparseTensorIndexCOO",d[d.SparseMatrixIndexCSX=2]="SparseMatrixIndexCSX",d[d.SparseTensorIndexCSF=3]="SparseTensorIndexCSF"})(s=e.SparseTensorIndex||(e.SparseTensorIndex={}));function a(d,f){switch(s[d]){case"NONE":return null;case"SparseTensorIndexCOO":return f(new n.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return f(new t.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return f(new i.SparseTensorIndexCSF);default:return null}}e.unionToSparseTensorIndex=a;function c(d,f,u){switch(s[d]){case"NONE":return null;case"SparseTensorIndexCOO":return f(u,new n.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return f(u,new t.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return f(u,new i.SparseTensorIndexCSF);default:return null}}e.unionListToSparseTensorIndex=c}(uI)),uI}var jp={},P4;function jG(){if(P4)return jp;P4=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.TensorDim=void 0;const t=et.__importStar(It);class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsTensorDim(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensorDim(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}size(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt64(this.bb_pos+s):BigInt("0")}name(s){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__string(this.bb_pos+a,s):null}static startTensorDim(s){s.startObject(2)}static addSize(s,a){s.addFieldInt64(0,a,BigInt("0"))}static addName(s,a){s.addFieldOffset(1,a,0)}static endTensorDim(s){return s.endObject()}static createTensorDim(s,a,c){return n.startTensorDim(s),n.addSize(s,a),n.addName(s,c),n.endTensorDim(s)}}return jp.TensorDim=n,jp}var D4;function Iye(){if(D4)return Lp;D4=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.SparseTensor=void 0;const t=et.__importStar(It),n=Cf(),i=Bye(),s=jG(),a=mm();class c{constructor(){this.bb=null,this.bb_pos=0}__init(f,u){return this.bb_pos=f,this.bb=u,this}static getRootAsSparseTensor(f,u){return(u||new c).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsSparseTensor(f,u){return f.setPosition(f.position()+t.SIZE_PREFIX_LENGTH),(u||new c).__init(f.readInt32(f.position())+f.position(),f)}typeType(){const f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readUint8(this.bb_pos+f):a.Type.NONE}type(f){const u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__union(f,this.bb_pos+u):null}shape(f,u){const r=this.bb.__offset(this.bb_pos,8);return r?(u||new s.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+f*4),this.bb):null}shapeLength(){const f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}nonZeroLength(){const f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readInt64(this.bb_pos+f):BigInt("0")}sparseIndexType(){const f=this.bb.__offset(this.bb_pos,12);return f?this.bb.readUint8(this.bb_pos+f):i.SparseTensorIndex.NONE}sparseIndex(f){const u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__union(f,this.bb_pos+u):null}data(f){const u=this.bb.__offset(this.bb_pos,16);return u?(f||new n.Buffer).__init(this.bb_pos+u,this.bb):null}static startSparseTensor(f){f.startObject(7)}static addTypeType(f,u){f.addFieldInt8(0,u,a.Type.NONE)}static addType(f,u){f.addFieldOffset(1,u,0)}static addShape(f,u){f.addFieldOffset(2,u,0)}static createShapeVector(f,u){f.startVector(4,u.length,4);for(let r=u.length-1;r>=0;r--)f.addOffset(u[r]);return f.endVector()}static startShapeVector(f,u){f.startVector(4,u,4)}static addNonZeroLength(f,u){f.addFieldInt64(3,u,BigInt("0"))}static addSparseIndexType(f,u){f.addFieldInt8(4,u,i.SparseTensorIndex.NONE)}static addSparseIndex(f,u){f.addFieldOffset(5,u,0)}static addData(f,u){f.addFieldStruct(6,u,0)}static endSparseTensor(f){const u=f.endObject();return f.requiredField(u,6),f.requiredField(u,8),f.requiredField(u,14),f.requiredField(u,16),u}static finishSparseTensorBuffer(f,u){f.finish(u)}static finishSizePrefixedSparseTensorBuffer(f,u){f.finish(u,void 0,!0)}}return Lp.SparseTensor=c,Lp}var $p={},U4;function Fye(){if(U4)return $p;U4=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.Tensor=void 0;const t=et.__importStar(It),n=Cf(),i=jG(),s=mm();class a{constructor(){this.bb=null,this.bb_pos=0}__init(d,f){return this.bb_pos=d,this.bb=f,this}static getRootAsTensor(d,f){return(f||new a).__init(d.readInt32(d.position())+d.position(),d)}static getSizePrefixedRootAsTensor(d,f){return d.setPosition(d.position()+t.SIZE_PREFIX_LENGTH),(f||new a).__init(d.readInt32(d.position())+d.position(),d)}typeType(){const d=this.bb.__offset(this.bb_pos,4);return d?this.bb.readUint8(this.bb_pos+d):s.Type.NONE}type(d){const f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__union(d,this.bb_pos+f):null}shape(d,f){const u=this.bb.__offset(this.bb_pos,8);return u?(f||new i.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+d*4),this.bb):null}shapeLength(){const d=this.bb.__offset(this.bb_pos,8);return d?this.bb.__vector_len(this.bb_pos+d):0}strides(d){const f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readInt64(this.bb.__vector(this.bb_pos+f)+d*8):BigInt(0)}stridesLength(){const d=this.bb.__offset(this.bb_pos,10);return d?this.bb.__vector_len(this.bb_pos+d):0}data(d){const f=this.bb.__offset(this.bb_pos,12);return f?(d||new n.Buffer).__init(this.bb_pos+f,this.bb):null}static startTensor(d){d.startObject(5)}static addTypeType(d,f){d.addFieldInt8(0,f,s.Type.NONE)}static addType(d,f){d.addFieldOffset(1,f,0)}static addShape(d,f){d.addFieldOffset(2,f,0)}static createShapeVector(d,f){d.startVector(4,f.length,4);for(let u=f.length-1;u>=0;u--)d.addOffset(f[u]);return d.endVector()}static startShapeVector(d,f){d.startVector(4,f,4)}static addStrides(d,f){d.addFieldOffset(3,f,0)}static createStridesVector(d,f){d.startVector(8,f.length,8);for(let u=f.length-1;u>=0;u--)d.addInt64(f[u]);return d.endVector()}static startStridesVector(d,f){d.startVector(8,f,8)}static addData(d,f){d.addFieldStruct(4,f,0)}static endTensor(d){const f=d.endObject();return d.requiredField(f,6),d.requiredField(f,8),d.requiredField(f,12),f}static finishTensorBuffer(d,f){d.finish(f)}static finishSizePrefixedTensorBuffer(d,f){d.finish(f,void 0,!0)}}return $p.Tensor=a,$p}var j4;function $G(){return j4||(j4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.unionListToMessageHeader=e.unionToMessageHeader=e.MessageHeader=void 0;const t=UG(),n=vA(),i=bA(),s=Iye(),a=Fye();var c;(function(u){u[u.NONE=0]="NONE",u[u.Schema=1]="Schema",u[u.DictionaryBatch=2]="DictionaryBatch",u[u.RecordBatch=3]="RecordBatch",u[u.Tensor=4]="Tensor",u[u.SparseTensor=5]="SparseTensor"})(c=e.MessageHeader||(e.MessageHeader={}));function d(u,r){switch(c[u]){case"NONE":return null;case"Schema":return r(new i.Schema);case"DictionaryBatch":return r(new t.DictionaryBatch);case"RecordBatch":return r(new n.RecordBatch);case"Tensor":return r(new a.Tensor);case"SparseTensor":return r(new s.SparseTensor);default:return null}}e.unionToMessageHeader=d;function f(u,r,h){switch(c[u]){case"NONE":return null;case"Schema":return r(h,new i.Schema);case"DictionaryBatch":return r(h,new t.DictionaryBatch);case"RecordBatch":return r(h,new n.RecordBatch);case"Tensor":return r(h,new a.Tensor);case"SparseTensor":return r(h,new s.SparseTensor);default:return null}}e.unionListToMessageHeader=f}(fI)),fI}var $4;function kye(){if($4)return Cp;$4=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.Message=void 0;const t=et.__importStar(It),n=gm(),i=$G(),s=lG();class a{constructor(){this.bb=null,this.bb_pos=0}__init(d,f){return this.bb_pos=d,this.bb=f,this}static getRootAsMessage(d,f){return(f||new a).__init(d.readInt32(d.position())+d.position(),d)}static getSizePrefixedRootAsMessage(d,f){return d.setPosition(d.position()+t.SIZE_PREFIX_LENGTH),(f||new a).__init(d.readInt32(d.position())+d.position(),d)}version(){const d=this.bb.__offset(this.bb_pos,4);return d?this.bb.readInt16(this.bb_pos+d):s.MetadataVersion.V1}headerType(){const d=this.bb.__offset(this.bb_pos,6);return d?this.bb.readUint8(this.bb_pos+d):i.MessageHeader.NONE}header(d){const f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__union(d,this.bb_pos+f):null}bodyLength(){const d=this.bb.__offset(this.bb_pos,10);return d?this.bb.readInt64(this.bb_pos+d):BigInt("0")}customMetadata(d,f){const u=this.bb.__offset(this.bb_pos,12);return u?(f||new n.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+d*4),this.bb):null}customMetadataLength(){const d=this.bb.__offset(this.bb_pos,12);return d?this.bb.__vector_len(this.bb_pos+d):0}static startMessage(d){d.startObject(5)}static addVersion(d,f){d.addFieldInt16(0,f,s.MetadataVersion.V1)}static addHeaderType(d,f){d.addFieldInt8(1,f,i.MessageHeader.NONE)}static addHeader(d,f){d.addFieldOffset(2,f,0)}static addBodyLength(d,f){d.addFieldInt64(3,f,BigInt("0"))}static addCustomMetadata(d,f){d.addFieldOffset(4,f,0)}static createCustomMetadataVector(d,f){d.startVector(4,f.length,4);for(let u=f.length-1;u>=0;u--)d.addOffset(f[u]);return d.endVector()}static startCustomMetadataVector(d,f){d.startVector(4,f,4)}static endMessage(d){return d.endObject()}static finishMessageBuffer(d,f){d.finish(f)}static finishSizePrefixedMessageBuffer(d,f){d.finish(f,void 0,!0)}static createMessage(d,f,u,r,h,p){return a.startMessage(d),a.addVersion(d,f),a.addHeaderType(d,u),a.addHeader(d,r),a.addBodyLength(d,h),a.addCustomMetadata(d,p),a.endMessage(d)}}return Cp.Message=a,Cp}var hd={},z4;function xye(){if(z4)return hd;z4=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.instance=hd.TypeAssembler=void 0;const e=Ms(),t=_G(),n=Of(),i=_A(),s=fG(),a=uG(),c=yG(),d=dA(),f=cA(),u=gA(),r=mA(),h=pA(),p=hG(),_=pG(),l=wA(),b=dG(),m=uA(),E=hA(),B=yA();class I extends e.Visitor{visit(F,x){return F==null||x==null?void 0:super.visit(F,x)}visitNull(F,x){return t.Null.startNull(x),t.Null.endNull(x)}visitInt(F,x){return n.Int.startInt(x),n.Int.addBitWidth(x,F.bitWidth),n.Int.addIsSigned(x,F.isSigned),n.Int.endInt(x)}visitFloat(F,x){return i.FloatingPoint.startFloatingPoint(x),i.FloatingPoint.addPrecision(x,F.precision),i.FloatingPoint.endFloatingPoint(x)}visitBinary(F,x){return s.Binary.startBinary(x),s.Binary.endBinary(x)}visitBool(F,x){return a.Bool.startBool(x),a.Bool.endBool(x)}visitUtf8(F,x){return c.Utf8.startUtf8(x),c.Utf8.endUtf8(x)}visitDecimal(F,x){return d.Decimal.startDecimal(x),d.Decimal.addScale(x,F.scale),d.Decimal.addPrecision(x,F.precision),d.Decimal.addBitWidth(x,F.bitWidth),d.Decimal.endDecimal(x)}visitDate(F,x){return f.Date.startDate(x),f.Date.addUnit(x,F.unit),f.Date.endDate(x)}visitTime(F,x){return u.Time.startTime(x),u.Time.addUnit(x,F.unit),u.Time.addBitWidth(x,F.bitWidth),u.Time.endTime(x)}visitTimestamp(F,x){const M=F.timezone&&x.createString(F.timezone)||void 0;return r.Timestamp.startTimestamp(x),r.Timestamp.addUnit(x,F.unit),M!==void 0&&r.Timestamp.addTimezone(x,M),r.Timestamp.endTimestamp(x)}visitInterval(F,x){return h.Interval.startInterval(x),h.Interval.addUnit(x,F.unit),h.Interval.endInterval(x)}visitList(F,x){return p.List.startList(x),p.List.endList(x)}visitStruct(F,x){return _.Struct_.startStruct_(x),_.Struct_.endStruct_(x)}visitUnion(F,x){l.Union.startTypeIdsVector(x,F.typeIds.length);const M=l.Union.createTypeIdsVector(x,F.typeIds);return l.Union.startUnion(x),l.Union.addMode(x,F.mode),l.Union.addTypeIds(x,M),l.Union.endUnion(x)}visitDictionary(F,x){const M=this.visit(F.indices,x);return b.DictionaryEncoding.startDictionaryEncoding(x),b.DictionaryEncoding.addId(x,BigInt(F.id)),b.DictionaryEncoding.addIsOrdered(x,F.isOrdered),M!==void 0&&b.DictionaryEncoding.addIndexType(x,M),b.DictionaryEncoding.endDictionaryEncoding(x)}visitFixedSizeBinary(F,x){return m.FixedSizeBinary.startFixedSizeBinary(x),m.FixedSizeBinary.addByteWidth(x,F.byteWidth),m.FixedSizeBinary.endFixedSizeBinary(x)}visitFixedSizeList(F,x){return E.FixedSizeList.startFixedSizeList(x),E.FixedSizeList.addListSize(x,F.listSize),E.FixedSizeList.endFixedSizeList(x)}visitMap(F,x){return B.Map.startMap(x),B.Map.addKeysSorted(x,F.keysSorted),B.Map.endMap(x)}}return hd.TypeAssembler=I,hd.instance=new I,hd}var Lr={},q4;function Mye(){if(q4)return Lr;q4=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.fieldFromJSON=Lr.dictionaryBatchFromJSON=Lr.recordBatchFromJSON=Lr.schemaFromJSON=void 0;const e=ir(),t=wn(),n=mh(),i=$n();function s(m,E=new Map){return new e.Schema(d(m,E),_(m.customMetadata),E)}Lr.schemaFromJSON=s;function a(m){return new n.RecordBatch(m.count,u(m.columns),r(m.columns))}Lr.recordBatchFromJSON=a;function c(m){return new n.DictionaryBatch(a(m.data),m.id,m.isDelta)}Lr.dictionaryBatchFromJSON=c;function d(m,E){return(m.fields||[]).filter(Boolean).map(B=>e.Field.fromJSON(B,E))}function f(m,E){return(m.children||[]).filter(Boolean).map(B=>e.Field.fromJSON(B,E))}function u(m){return(m||[]).reduce((E,B)=>[...E,new n.FieldNode(B.count,h(B.VALIDITY)),...u(B.children)],[])}function r(m,E=[]){for(let B=-1,I=(m||[]).length;++B<I;){const k=m[B];k.VALIDITY&&E.push(new n.BufferRegion(E.length,k.VALIDITY.length)),k.TYPE&&E.push(new n.BufferRegion(E.length,k.TYPE.length)),k.OFFSET&&E.push(new n.BufferRegion(E.length,k.OFFSET.length)),k.DATA&&E.push(new n.BufferRegion(E.length,k.DATA.length)),E=r(k.children,E)}return E}function h(m){return(m||[]).reduce((E,B)=>E+ +(B===0),0)}function p(m,E){let B,I,k,F,x,M;return!E||!(F=m.dictionary)?(x=b(m,f(m,E)),k=new e.Field(m.name,x,m.nullable,_(m.customMetadata))):E.has(B=F.id)?(I=(I=F.indexType)?l(I):new t.Int32,M=new t.Dictionary(E.get(B),I,B,F.isOrdered),k=new e.Field(m.name,M,m.nullable,_(m.customMetadata))):(I=(I=F.indexType)?l(I):new t.Int32,E.set(B,x=b(m,f(m,E))),M=new t.Dictionary(x,I,B,F.isOrdered),k=new e.Field(m.name,M,m.nullable,_(m.customMetadata))),k||null}Lr.fieldFromJSON=p;function _(m){return new Map(Object.entries(m||{}))}function l(m){return new t.Int(m.isSigned,m.bitWidth)}function b(m,E){const B=m.type.name;switch(B){case"NONE":return new t.Null;case"null":return new t.Null;case"binary":return new t.Binary;case"utf8":return new t.Utf8;case"bool":return new t.Bool;case"list":return new t.List((E||[])[0]);case"struct":return new t.Struct(E||[]);case"struct_":return new t.Struct(E||[])}switch(B){case"int":{const I=m.type;return new t.Int(I.isSigned,I.bitWidth)}case"floatingpoint":{const I=m.type;return new t.Float(i.Precision[I.precision])}case"decimal":{const I=m.type;return new t.Decimal(I.scale,I.precision,I.bitWidth)}case"date":{const I=m.type;return new t.Date_(i.DateUnit[I.unit])}case"time":{const I=m.type;return new t.Time(i.TimeUnit[I.unit],I.bitWidth)}case"timestamp":{const I=m.type;return new t.Timestamp(i.TimeUnit[I.unit],I.timezone)}case"interval":{const I=m.type;return new t.Interval(i.IntervalUnit[I.unit])}case"union":{const I=m.type;return new t.Union(i.UnionMode[I.mode],I.typeIds||[],E||[])}case"fixedsizebinary":{const I=m.type;return new t.FixedSizeBinary(I.byteWidth)}case"fixedsizelist":{const I=m.type;return new t.FixedSizeList(I.listSize,(E||[])[0])}case"map":{const I=m.type;return new t.Map_((E||[])[0],I.keysSorted)}}throw new Error(`Unrecognized type: "${B}"`)}return Lr}var V4;function mh(){if(V4)return Ds;V4=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.FieldNode=Ds.BufferRegion=Ds.DictionaryBatch=Ds.RecordBatch=Ds.Message=void 0;const t=et.__importStar(It),n=bA(),i=Of(),s=vA(),a=UG(),c=Cf(),d=gG(),f=DG(),u=mm(),r=gm(),h=cG(),p=_A(),_=dA(),l=cA(),b=gA(),m=mA(),E=pA(),B=wA(),I=uA(),k=hA(),F=yA(),x=kye(),M=ir(),R=ji(),P=iA(),C=$n(),D=xye(),j=Mye();var $=t.Builder,W=t.ByteBuffer;const H=wn();class G{static fromJSON(ve,Ce){const re=new G(0,C.MetadataVersion.V4,Ce);return re._createHeader=se(ve,Ce),re}static decode(ve){ve=new W((0,R.toUint8Array)(ve));const Ce=x.Message.getRootAsMessage(ve),re=Ce.bodyLength(),rt=Ce.version(),tt=Ce.headerType(),Rt=new G(re,rt,tt);return Rt._createHeader=Ie(Ce,tt),Rt}static encode(ve){const Ce=new $;let re=-1;return ve.isSchema()?re=M.Schema.encode(Ce,ve.header()):ve.isRecordBatch()?re=z.encode(Ce,ve.header()):ve.isDictionaryBatch()&&(re=q.encode(Ce,ve.header())),x.Message.startMessage(Ce),x.Message.addVersion(Ce,C.MetadataVersion.V4),x.Message.addHeader(Ce,re),x.Message.addHeaderType(Ce,ve.headerType),x.Message.addBodyLength(Ce,BigInt(ve.bodyLength)),x.Message.finishMessageBuffer(Ce,x.Message.endMessage(Ce)),Ce.asUint8Array()}static from(ve,Ce=0){if(ve instanceof M.Schema)return new G(0,C.MetadataVersion.V4,C.MessageHeader.Schema,ve);if(ve instanceof z)return new G(Ce,C.MetadataVersion.V4,C.MessageHeader.RecordBatch,ve);if(ve instanceof q)return new G(Ce,C.MetadataVersion.V4,C.MessageHeader.DictionaryBatch,ve);throw new Error(`Unrecognized Message header: ${ve}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===C.MessageHeader.Schema}isRecordBatch(){return this.headerType===C.MessageHeader.RecordBatch}isDictionaryBatch(){return this.headerType===C.MessageHeader.DictionaryBatch}constructor(ve,Ce,re,rt){this._version=Ce,this._headerType=re,this.body=new Uint8Array(0),rt&&(this._createHeader=()=>rt),this._bodyLength=(0,P.bigIntToNumber)(ve)}}Ds.Message=G;class z{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(ve,Ce,re){this._nodes=Ce,this._buffers=re,this._length=(0,P.bigIntToNumber)(ve)}}Ds.RecordBatch=z;class q{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(ve,Ce,re=!1){this._data=ve,this._isDelta=re,this._id=(0,P.bigIntToNumber)(Ce)}}Ds.DictionaryBatch=q;class ie{constructor(ve,Ce){this.offset=(0,P.bigIntToNumber)(ve),this.length=(0,P.bigIntToNumber)(Ce)}}Ds.BufferRegion=ie;class ce{constructor(ve,Ce){this.length=(0,P.bigIntToNumber)(ve),this.nullCount=(0,P.bigIntToNumber)(Ce)}}Ds.FieldNode=ce;function se(de,ve){return()=>{switch(ve){case C.MessageHeader.Schema:return M.Schema.fromJSON(de);case C.MessageHeader.RecordBatch:return z.fromJSON(de);case C.MessageHeader.DictionaryBatch:return q.fromJSON(de)}throw new Error(`Unrecognized Message type: { name: ${C.MessageHeader[ve]}, type: ${ve} }`)}}function Ie(de,ve){return()=>{switch(ve){case C.MessageHeader.Schema:return M.Schema.decode(de.header(new n.Schema));case C.MessageHeader.RecordBatch:return z.decode(de.header(new s.RecordBatch),de.version());case C.MessageHeader.DictionaryBatch:return q.decode(de.header(new a.DictionaryBatch),de.version())}throw new Error(`Unrecognized Message type: { name: ${C.MessageHeader[ve]}, type: ${ve} }`)}}M.Field.encode=fe,M.Field.decode=U,M.Field.fromJSON=j.fieldFromJSON,M.Schema.encode=Q,M.Schema.decode=he,M.Schema.fromJSON=j.schemaFromJSON,z.encode=ee,z.decode=Me,z.fromJSON=j.recordBatchFromJSON,q.encode=le,q.decode=Ue,q.fromJSON=j.dictionaryBatchFromJSON,ce.encode=Ne,ce.decode=ke,ie.encode=He,ie.decode=_e;function he(de,ve=new Map){const Ce=X(de,ve);return new M.Schema(Ce,J(de),ve)}function Me(de,ve=C.MetadataVersion.V4){if(de.compression()!==null)throw new Error("Record batch compression not implemented");return new z(de.length(),Ee(de),ye(de,ve))}function Ue(de,ve=C.MetadataVersion.V4){return new q(z.decode(de.data(),ve),de.id(),de.isDelta())}function _e(de){return new ie(de.offset(),de.length())}function ke(de){return new ce(de.length(),de.nullCount())}function Ee(de){const ve=[];for(let Ce,re=-1,rt=-1,tt=de.nodesLength();++re<tt;)(Ce=de.nodes(re))&&(ve[++rt]=ce.decode(Ce));return ve}function ye(de,ve){const Ce=[];for(let re,rt=-1,tt=-1,Rt=de.buffersLength();++rt<Rt;)(re=de.buffers(rt))&&(ve<C.MetadataVersion.V4&&(re.bb_pos+=8*(rt+1)),Ce[++tt]=ie.decode(re));return Ce}function X(de,ve){const Ce=[];for(let re,rt=-1,tt=-1,Rt=de.fieldsLength();++rt<Rt;)(re=de.fields(rt))&&(Ce[++tt]=M.Field.decode(re,ve));return Ce}function Y(de,ve){const Ce=[];for(let re,rt=-1,tt=-1,Rt=de.childrenLength();++rt<Rt;)(re=de.children(rt))&&(Ce[++tt]=M.Field.decode(re,ve));return Ce}function U(de,ve){let Ce,re,rt,tt,Rt,$t;return!ve||!($t=de.dictionary())?(rt=Z(de,Y(de,ve)),re=new M.Field(de.name(),rt,de.nullable(),J(de))):ve.has(Ce=(0,P.bigIntToNumber)($t.id()))?(tt=(tt=$t.indexType())?K(tt):new H.Int32,Rt=new H.Dictionary(ve.get(Ce),tt,Ce,$t.isOrdered()),re=new M.Field(de.name(),Rt,de.nullable(),J(de))):(tt=(tt=$t.indexType())?K(tt):new H.Int32,ve.set(Ce,rt=Z(de,Y(de,ve))),Rt=new H.Dictionary(rt,tt,Ce,$t.isOrdered()),re=new M.Field(de.name(),Rt,de.nullable(),J(de))),re||null}function J(de){const ve=new Map;if(de)for(let Ce,re,rt=-1,tt=Math.trunc(de.customMetadataLength());++rt<tt;)(Ce=de.customMetadata(rt))&&(re=Ce.key())!=null&&ve.set(re,Ce.value());return ve}function K(de){return new H.Int(de.isSigned(),de.bitWidth())}function Z(de,ve){const Ce=de.typeType();switch(Ce){case u.Type.NONE:return new H.Null;case u.Type.Null:return new H.Null;case u.Type.Binary:return new H.Binary;case u.Type.Utf8:return new H.Utf8;case u.Type.Bool:return new H.Bool;case u.Type.List:return new H.List((ve||[])[0]);case u.Type.Struct_:return new H.Struct(ve||[])}switch(Ce){case u.Type.Int:{const re=de.type(new i.Int);return new H.Int(re.isSigned(),re.bitWidth())}case u.Type.FloatingPoint:{const re=de.type(new p.FloatingPoint);return new H.Float(re.precision())}case u.Type.Decimal:{const re=de.type(new _.Decimal);return new H.Decimal(re.scale(),re.precision(),re.bitWidth())}case u.Type.Date:{const re=de.type(new l.Date);return new H.Date_(re.unit())}case u.Type.Time:{const re=de.type(new b.Time);return new H.Time(re.unit(),re.bitWidth())}case u.Type.Timestamp:{const re=de.type(new m.Timestamp);return new H.Timestamp(re.unit(),re.timezone())}case u.Type.Interval:{const re=de.type(new E.Interval);return new H.Interval(re.unit())}case u.Type.Union:{const re=de.type(new B.Union);return new H.Union(re.mode(),re.typeIdsArray()||[],ve||[])}case u.Type.FixedSizeBinary:{const re=de.type(new I.FixedSizeBinary);return new H.FixedSizeBinary(re.byteWidth())}case u.Type.FixedSizeList:{const re=de.type(new k.FixedSizeList);return new H.FixedSizeList(re.listSize(),(ve||[])[0])}case u.Type.Map:{const re=de.type(new F.Map);return new H.Map_((ve||[])[0],re.keysSorted())}}throw new Error(`Unrecognized type: "${u.Type[Ce]}" (${Ce})`)}function Q(de,ve){const Ce=ve.fields.map(tt=>M.Field.encode(de,tt));n.Schema.startFieldsVector(de,Ce.length);const re=n.Schema.createFieldsVector(de,Ce),rt=ve.metadata&&ve.metadata.size>0?n.Schema.createCustomMetadataVector(de,[...ve.metadata].map(([tt,Rt])=>{const $t=de.createString(`${tt}`),ds=de.createString(`${Rt}`);return r.KeyValue.startKeyValue(de),r.KeyValue.addKey(de,$t),r.KeyValue.addValue(de,ds),r.KeyValue.endKeyValue(de)})):-1;return n.Schema.startSchema(de),n.Schema.addFields(de,re),n.Schema.addEndianness(de,ft?h.Endianness.Little:h.Endianness.Big),rt!==-1&&n.Schema.addCustomMetadata(de,rt),n.Schema.endSchema(de)}function fe(de,ve){let Ce=-1,re=-1,rt=-1;const tt=ve.type;let Rt=ve.typeId;H.DataType.isDictionary(tt)?(Rt=tt.dictionary.typeId,rt=D.instance.visit(tt,de),re=D.instance.visit(tt.dictionary,de)):re=D.instance.visit(tt,de);const $t=(tt.children||[]).map(pe=>M.Field.encode(de,pe)),ds=d.Field.createChildrenVector(de,$t),me=ve.metadata&&ve.metadata.size>0?d.Field.createCustomMetadataVector(de,[...ve.metadata].map(([pe,qt])=>{const L=de.createString(`${pe}`),O=de.createString(`${qt}`);return r.KeyValue.startKeyValue(de),r.KeyValue.addKey(de,L),r.KeyValue.addValue(de,O),r.KeyValue.endKeyValue(de)})):-1;return ve.name&&(Ce=de.createString(ve.name)),d.Field.startField(de),d.Field.addType(de,re),d.Field.addTypeType(de,Rt),d.Field.addChildren(de,ds),d.Field.addNullable(de,!!ve.nullable),Ce!==-1&&d.Field.addName(de,Ce),rt!==-1&&d.Field.addDictionary(de,rt),me!==-1&&d.Field.addCustomMetadata(de,me),d.Field.endField(de)}function ee(de,ve){const Ce=ve.nodes||[],re=ve.buffers||[];s.RecordBatch.startNodesVector(de,Ce.length);for(const Rt of Ce.slice().reverse())ce.encode(de,Rt);const rt=de.endVector();s.RecordBatch.startBuffersVector(de,re.length);for(const Rt of re.slice().reverse())ie.encode(de,Rt);const tt=de.endVector();return s.RecordBatch.startRecordBatch(de),s.RecordBatch.addLength(de,BigInt(ve.length)),s.RecordBatch.addNodes(de,rt),s.RecordBatch.addBuffers(de,tt),s.RecordBatch.endRecordBatch(de)}function le(de,ve){const Ce=z.encode(de,ve.data);return a.DictionaryBatch.startDictionaryBatch(de),a.DictionaryBatch.addId(de,BigInt(ve.id)),a.DictionaryBatch.addIsDelta(de,ve.isDelta),a.DictionaryBatch.addData(de,Ce),a.DictionaryBatch.endDictionaryBatch(de)}function Ne(de,ve){return f.FieldNode.createFieldNode(de,BigInt(ve.length),BigInt(ve.nullCount))}function He(de,ve){return c.Buffer.createBuffer(de,BigInt(ve.offset),BigInt(ve.length))}const ft=(()=>{const de=new ArrayBuffer(2);return new DataView(de).setInt16(0,256,!0),new Int16Array(de)[0]===256})();return Ds}var G4;function EA(){return G4||(G4=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.magicX2AndPadding=e.magicAndPadding=e.magicLength=e.checkForMagicArrowString=e.MAGIC=e.MAGIC_STR=e.PADDING=e.JSONMessageReader=e.AsyncMessageReader=e.MessageReader=void 0;const t=et,n=$n(),i=It,s=mh(),a=pa(),c=wG(),d=ji(),f=Nf(),u=fE(),r=B=>`Expected ${n.MessageHeader[B]} Message in stream, but was null or length 0.`,h=B=>`Header pointer of flatbuffer-encoded ${n.MessageHeader[B]} Message is null or length 0.`,p=(B,I)=>`Expected to read ${B} metadata bytes, but only read ${I}.`,_=(B,I)=>`Expected to read ${B} bytes for message body, but only read ${I}.`;class l{constructor(I){this.source=I instanceof f.ByteStream?I:new f.ByteStream(I)}[Symbol.iterator](){return this}next(){let I;return(I=this.readMetadataLength()).done||I.value===-1&&(I=this.readMetadataLength()).done||(I=this.readMetadata(I.value)).done?u.ITERATOR_DONE:I}throw(I){return this.source.throw(I)}return(I){return this.source.return(I)}readMessage(I){let k;if((k=this.next()).done)return null;if(I!=null&&k.value.headerType!==I)throw new Error(r(I));return k.value}readMessageBody(I){if(I<=0)return new Uint8Array(0);const k=(0,d.toUint8Array)(this.source.read(I));if(k.byteLength<I)throw new Error(_(I,k.byteLength));return k.byteOffset%8===0&&k.byteOffset+k.byteLength<=k.buffer.byteLength?k:k.slice()}readSchema(I=!1){const k=n.MessageHeader.Schema,F=this.readMessage(k),x=F==null?void 0:F.header();if(I&&!x)throw new Error(h(k));return x}readMetadataLength(){const I=this.source.read(e.PADDING),k=I&&new i.ByteBuffer(I),F=(k==null?void 0:k.readInt32(0))||0;return{done:F===0,value:F}}readMetadata(I){const k=this.source.read(I);if(!k)return u.ITERATOR_DONE;if(k.byteLength<I)throw new Error(p(I,k.byteLength));return{done:!1,value:s.Message.decode(k)}}}e.MessageReader=l;class b{constructor(I,k){this.source=I instanceof f.AsyncByteStream?I:(0,a.isFileHandle)(I)?new c.AsyncRandomAccessFile(I,k):new f.AsyncByteStream(I)}[Symbol.asyncIterator](){return this}next(){return t.__awaiter(this,void 0,void 0,function*(){let I;return(I=yield this.readMetadataLength()).done||I.value===-1&&(I=yield this.readMetadataLength()).done||(I=yield this.readMetadata(I.value)).done?u.ITERATOR_DONE:I})}throw(I){return t.__awaiter(this,void 0,void 0,function*(){return yield this.source.throw(I)})}return(I){return t.__awaiter(this,void 0,void 0,function*(){return yield this.source.return(I)})}readMessage(I){return t.__awaiter(this,void 0,void 0,function*(){let k;if((k=yield this.next()).done)return null;if(I!=null&&k.value.headerType!==I)throw new Error(r(I));return k.value})}readMessageBody(I){return t.__awaiter(this,void 0,void 0,function*(){if(I<=0)return new Uint8Array(0);const k=(0,d.toUint8Array)(yield this.source.read(I));if(k.byteLength<I)throw new Error(_(I,k.byteLength));return k.byteOffset%8===0&&k.byteOffset+k.byteLength<=k.buffer.byteLength?k:k.slice()})}readSchema(I=!1){return t.__awaiter(this,void 0,void 0,function*(){const k=n.MessageHeader.Schema,F=yield this.readMessage(k),x=F==null?void 0:F.header();if(I&&!x)throw new Error(h(k));return x})}readMetadataLength(){return t.__awaiter(this,void 0,void 0,function*(){const I=yield this.source.read(e.PADDING),k=I&&new i.ByteBuffer(I),F=(k==null?void 0:k.readInt32(0))||0;return{done:F===0,value:F}})}readMetadata(I){return t.__awaiter(this,void 0,void 0,function*(){const k=yield this.source.read(I);if(!k)return u.ITERATOR_DONE;if(k.byteLength<I)throw new Error(p(I,k.byteLength));return{done:!1,value:s.Message.decode(k)}})}}e.AsyncMessageReader=b;class m extends l{constructor(I){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=I instanceof u.ArrowJSON?I:new u.ArrowJSON(I)}next(){const{_json:I}=this;if(!this._schema)return this._schema=!0,{done:!1,value:s.Message.fromJSON(I.schema,n.MessageHeader.Schema)};if(this._dictionaryIndex<I.dictionaries.length){const k=I.dictionaries[this._dictionaryIndex++];return this._body=k.data.columns,{done:!1,value:s.Message.fromJSON(k,n.MessageHeader.DictionaryBatch)}}if(this._batchIndex<I.batches.length){const k=I.batches[this._batchIndex++];return this._body=k.columns,{done:!1,value:s.Message.fromJSON(k,n.MessageHeader.RecordBatch)}}return this._body=[],u.ITERATOR_DONE}readMessageBody(I){return k(this._body);function k(F){return(F||[]).reduce((x,M)=>[...x,...M.VALIDITY&&[M.VALIDITY]||[],...M.TYPE&&[M.TYPE]||[],...M.OFFSET&&[M.OFFSET]||[],...M.DATA&&[M.DATA]||[],...k(M.children)],[])}}readMessage(I){let k;if((k=this.next()).done)return null;if(I!=null&&k.value.headerType!==I)throw new Error(r(I));return k.value}readSchema(){const I=n.MessageHeader.Schema,k=this.readMessage(I),F=k==null?void 0:k.header();if(!k||!F)throw new Error(h(I));return F}}e.JSONMessageReader=m,e.PADDING=4,e.MAGIC_STR="ARROW1",e.MAGIC=new Uint8Array(e.MAGIC_STR.length);for(let B=0;B<e.MAGIC_STR.length;B+=1)e.MAGIC[B]=e.MAGIC_STR.codePointAt(B);function E(B,I=0){for(let k=-1,F=e.MAGIC.length;++k<F;)if(e.MAGIC[k]!==B[I+k])return!1;return!0}e.checkForMagicArrowString=E,e.magicLength=e.MAGIC.length,e.magicAndPadding=e.magicLength+e.PADDING,e.magicX2AndPadding=e.magicLength*2+e.PADDING}(lI)),lI}var H4;function _E(){if(H4)return Rs;H4=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.AsyncRecordBatchFileReader=Rs.RecordBatchFileReader=Rs.AsyncRecordBatchStreamReader=Rs.RecordBatchStreamReader=Rs.RecordBatchReader=void 0;const e=et,t=Bl(),n=As(),i=wn(),s=$n(),a=mG(),c=e.__importDefault(oE()),d=Nf(),f=wG(),u=pye(),r=Rf(),h=fE(),p=EA(),_=pa();class l extends h.ReadableInterop{constructor(z){super(),this._impl=z}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(z){return this._impl.throw(z)}return(z){return this._impl.return(z)}cancel(){return this._impl.cancel()}reset(z){return this._impl.reset(z),this._DOMStream=void 0,this._nodeStream=void 0,this}open(z){const q=this._impl.open(z);return(0,_.isPromise)(q)?q.then(()=>this):this}readRecordBatch(z){return this._impl.isFile()?this._impl.readRecordBatch(z):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return c.default.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return c.default.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(z){throw new Error('"throughNode" not available in this environment')}static throughDOM(z,q){throw new Error('"throughDOM" not available in this environment')}static from(z){return z instanceof l?z:(0,_.isArrowJSON)(z)?j(z):(0,_.isFileHandle)(z)?H(z):(0,_.isPromise)(z)?e.__awaiter(this,void 0,void 0,function*(){return yield l.from(yield z)}):(0,_.isFetchResponse)(z)||(0,_.isReadableDOMStream)(z)||(0,_.isReadableNodeStream)(z)||(0,_.isAsyncIterable)(z)?W(new d.AsyncByteStream(z)):$(new d.ByteStream(z))}static readAll(z){return z instanceof l?z.isSync()?C(z):D(z):(0,_.isArrowJSON)(z)||ArrayBuffer.isView(z)||(0,_.isIterable)(z)||(0,_.isIteratorResult)(z)?C(z):D(z)}}Rs.RecordBatchReader=l;class b extends l{constructor(z){super(z),this._impl=z}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return e.__asyncGenerator(this,arguments,function*(){yield e.__await(yield*e.__asyncDelegator(e.__asyncValues(this[Symbol.iterator]())))})}}Rs.RecordBatchStreamReader=b;class m extends l{constructor(z){super(z),this._impl=z}readAll(){var z,q,ie,ce;return e.__awaiter(this,void 0,void 0,function*(){const se=new Array;try{for(var Ie=!0,he=e.__asyncValues(this),Me;Me=yield he.next(),z=Me.done,!z;){ce=Me.value,Ie=!1;try{const Ue=ce;se.push(Ue)}finally{Ie=!0}}}catch(Ue){q={error:Ue}}finally{try{!Ie&&!z&&(ie=he.return)&&(yield ie.call(he))}finally{if(q)throw q.error}}return se})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}Rs.AsyncRecordBatchStreamReader=m;class E extends b{constructor(z){super(z),this._impl=z}}Rs.RecordBatchFileReader=E;class B extends m{constructor(z){super(z),this._impl=z}}Rs.AsyncRecordBatchFileReader=B;class I{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(z=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=z}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(z){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=z,this.dictionaries=new Map,this}_loadRecordBatch(z,q){const ie=this._loadVectors(z,q,this.schema.fields),ce=(0,t.makeData)({type:new i.Struct(this.schema.fields),length:z.length,children:ie});return new r.RecordBatch(this.schema,ce)}_loadDictionaryBatch(z,q){const{id:ie,isDelta:ce}=z,{dictionaries:se,schema:Ie}=this,he=se.get(ie);if(ce||!he){const Me=Ie.dictionaries.get(ie),Ue=this._loadVectors(z.data,q,[Me]);return(he&&ce?he.concat(new n.Vector(Ue)):new n.Vector(Ue)).memoize()}return he.memoize()}_loadVectors(z,q,ie){return new u.VectorLoader(q,z.nodes,z.buffers,this.dictionaries).visitMany(ie)}}class k extends I{constructor(z,q){super(q),this._reader=(0,_.isArrowJSON)(z)?new p.JSONMessageReader(this._handle=z):new p.MessageReader(this._handle=z)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(z){return this.closed||(this.autoDestroy=P(this,z),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(z){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(z):h.ITERATOR_DONE}return(z){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(z):h.ITERATOR_DONE}next(){if(this.closed)return h.ITERATOR_DONE;let z;const{_reader:q}=this;for(;z=this._readNextMessageAndValidate();)if(z.isSchema())this.reset(z.header());else if(z.isRecordBatch()){this._recordBatchIndex++;const ie=z.header(),ce=q.readMessageBody(z.bodyLength);return{done:!1,value:this._loadRecordBatch(ie,ce)}}else if(z.isDictionaryBatch()){this._dictionaryIndex++;const ie=z.header(),ce=q.readMessageBody(z.bodyLength),se=this._loadDictionaryBatch(ie,ce);this.dictionaries.set(ie.id,se)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new r._InternalEmptyPlaceholderRecordBatch(this.schema)}):this.return()}_readNextMessageAndValidate(z){return this._reader.readMessage(z)}}class F extends I{constructor(z,q){super(q),this._reader=new p.AsyncMessageReader(this._handle=z)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return e.__awaiter(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(z){return e.__awaiter(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=P(this,z),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(z){return e.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(z):h.ITERATOR_DONE})}return(z){return e.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(z):h.ITERATOR_DONE})}next(){return e.__awaiter(this,void 0,void 0,function*(){if(this.closed)return h.ITERATOR_DONE;let z;const{_reader:q}=this;for(;z=yield this._readNextMessageAndValidate();)if(z.isSchema())yield this.reset(z.header());else if(z.isRecordBatch()){this._recordBatchIndex++;const ie=z.header(),ce=yield q.readMessageBody(z.bodyLength);return{done:!1,value:this._loadRecordBatch(ie,ce)}}else if(z.isDictionaryBatch()){this._dictionaryIndex++;const ie=z.header(),ce=yield q.readMessageBody(z.bodyLength),se=this._loadDictionaryBatch(ie,ce);this.dictionaries.set(ie.id,se)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new r._InternalEmptyPlaceholderRecordBatch(this.schema)}):yield this.return()})}_readNextMessageAndValidate(z){return e.__awaiter(this,void 0,void 0,function*(){return yield this._reader.readMessage(z)})}}class x extends k{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(z,q){super(z instanceof f.RandomAccessFile?z:new f.RandomAccessFile(z),q)}isSync(){return!0}isFile(){return!0}open(z){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const q of this._footer.dictionaryBatches())q&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(z)}readRecordBatch(z){var q;if(this.closed)return null;this._footer||this.open();const ie=(q=this._footer)===null||q===void 0?void 0:q.getRecordBatch(z);if(ie&&this._handle.seek(ie.offset)){const ce=this._reader.readMessage(s.MessageHeader.RecordBatch);if(ce!=null&&ce.isRecordBatch()){const se=ce.header(),Ie=this._reader.readMessageBody(ce.bodyLength);return this._loadRecordBatch(se,Ie)}}return null}_readDictionaryBatch(z){var q;const ie=(q=this._footer)===null||q===void 0?void 0:q.getDictionaryBatch(z);if(ie&&this._handle.seek(ie.offset)){const ce=this._reader.readMessage(s.MessageHeader.DictionaryBatch);if(ce!=null&&ce.isDictionaryBatch()){const se=ce.header(),Ie=this._reader.readMessageBody(ce.bodyLength),he=this._loadDictionaryBatch(se,Ie);this.dictionaries.set(se.id,he)}}}_readFooter(){const{_handle:z}=this,q=z.size-p.magicAndPadding,ie=z.readInt32(q),ce=z.readAt(q-ie,ie);return a.Footer.decode(ce)}_readNextMessageAndValidate(z){var q;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const ie=(q=this._footer)===null||q===void 0?void 0:q.getRecordBatch(this._recordBatchIndex);if(ie&&this._handle.seek(ie.offset))return this._reader.readMessage(z)}return null}}class M extends F{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(z,...q){const ie=typeof q[0]!="number"?q.shift():void 0,ce=q[0]instanceof Map?q.shift():void 0;super(z instanceof f.AsyncRandomAccessFile?z:new f.AsyncRandomAccessFile(z,ie),ce)}isFile(){return!0}isAsync(){return!0}open(z){const q=Object.create(null,{open:{get:()=>super.open}});return e.__awaiter(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const ie of this._footer.dictionaryBatches())ie&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield q.open.call(this,z)})}readRecordBatch(z){var q;return e.__awaiter(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const ie=(q=this._footer)===null||q===void 0?void 0:q.getRecordBatch(z);if(ie&&(yield this._handle.seek(ie.offset))){const ce=yield this._reader.readMessage(s.MessageHeader.RecordBatch);if(ce!=null&&ce.isRecordBatch()){const se=ce.header(),Ie=yield this._reader.readMessageBody(ce.bodyLength);return this._loadRecordBatch(se,Ie)}}return null})}_readDictionaryBatch(z){var q;return e.__awaiter(this,void 0,void 0,function*(){const ie=(q=this._footer)===null||q===void 0?void 0:q.getDictionaryBatch(z);if(ie&&(yield this._handle.seek(ie.offset))){const ce=yield this._reader.readMessage(s.MessageHeader.DictionaryBatch);if(ce!=null&&ce.isDictionaryBatch()){const se=ce.header(),Ie=yield this._reader.readMessageBody(ce.bodyLength),he=this._loadDictionaryBatch(se,Ie);this.dictionaries.set(se.id,he)}}})}_readFooter(){return e.__awaiter(this,void 0,void 0,function*(){const{_handle:z}=this;z._pending&&(yield z._pending);const q=z.size-p.magicAndPadding,ie=yield z.readInt32(q),ce=yield z.readAt(q-ie,ie);return a.Footer.decode(ce)})}_readNextMessageAndValidate(z){return e.__awaiter(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const q=this._footer.getRecordBatch(this._recordBatchIndex);if(q&&(yield this._handle.seek(q.offset)))return yield this._reader.readMessage(z)}return null})}}class R extends k{constructor(z,q){super(z,q)}_loadVectors(z,q,ie){return new u.JSONVectorLoader(q,z.nodes,z.buffers,this.dictionaries).visitMany(ie)}}function P(G,z){return z&&typeof z.autoDestroy=="boolean"?z.autoDestroy:G.autoDestroy}function*C(G){const z=l.from(G);try{if(!z.open({autoDestroy:!1}).closed)do yield z;while(!z.reset().open().closed)}finally{z.cancel()}}function D(G){return e.__asyncGenerator(this,arguments,function*(){const q=yield e.__await(l.from(G));try{if(!(yield e.__await(q.open({autoDestroy:!1}))).closed)do yield yield e.__await(q);while(!(yield e.__await(q.reset().open())).closed)}finally{yield e.__await(q.cancel())}})}function j(G){return new b(new R(G))}function $(G){const z=G.peek(p.magicLength+7&-8);return z&&z.byteLength>=4?(0,p.checkForMagicArrowString)(z)?new E(new x(G.read())):new b(new k(G)):new b(new k(function*(){}()))}function W(G){return e.__awaiter(this,void 0,void 0,function*(){const z=yield G.peek(p.magicLength+7&-8);return z&&z.byteLength>=4?(0,p.checkForMagicArrowString)(z)?new E(new x(yield G.read())):new m(new F(G)):new m(new F(function(){return e.__asyncGenerator(this,arguments,function*(){})}()))})}function H(G){return e.__awaiter(this,void 0,void 0,function*(){const{size:z}=yield G.stat(),q=new f.AsyncRandomAccessFile(G,z);return z>=p.magicX2AndPadding&&(0,p.checkForMagicArrowString)(yield q.readAt(0,p.magicLength+7&-8))?new B(new M(q)):new m(new F(q))})}return Rs}var Pr={},zp={},W4;function Aye(){if(W4)return zp;W4=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.VectorAssembler=void 0;const e=As(),t=Ms(),n=$n(),i=Rf(),s=ji(),a=l_(),c=mh(),d=wn();class f extends t.Visitor{static assemble(...E){const B=k=>k.flatMap(F=>Array.isArray(F)?B(F):F instanceof i.RecordBatch?F.data.children:F.data),I=new f;return I.visitMany(B(E)),I}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(E){if(E instanceof e.Vector)return this.visitMany(E.data),this;const{type:B}=E;if(!d.DataType.isDictionary(B)){const{length:I,nullCount:k}=E;if(I>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");d.DataType.isNull(B)||u.call(this,k<=0?new Uint8Array(0):(0,a.truncateBitmap)(E.offset,I,E.nullBitmap)),this.nodes.push(new c.FieldNode(I,k))}return super.visit(E)}visitNull(E){return this}visitDictionary(E){return this.visit(E.clone(E.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}zp.VectorAssembler=f;function u(m){const E=m.byteLength+7&-8;return this.buffers.push(m),this.bufferRegions.push(new c.BufferRegion(this._byteLength,E)),this._byteLength+=E,this}function r(m){const{type:E,length:B,typeIds:I,valueOffsets:k}=m;if(u.call(this,I),E.mode===n.UnionMode.Sparse)return b.call(this,m);if(E.mode===n.UnionMode.Dense){if(m.offset<=0)return u.call(this,k),b.call(this,m);{const F=I.reduce((C,D)=>Math.max(C,D),I[0]),x=new Int32Array(F+1),M=new Int32Array(F+1).fill(-1),R=new Int32Array(B),P=(0,s.rebaseValueOffsets)(-k[0],B,k);for(let C,D,j=-1;++j<B;)(D=M[C=I[j]])===-1&&(D=M[C]=P[C]),R[j]=P[j]-D,++x[C];u.call(this,R);for(let C,D=-1,j=E.children.length;++D<j;)if(C=m.children[D]){const $=E.typeIds[D],W=Math.min(B,x[$]);this.visit(C.slice(M[$],W))}}}return this}function h(m){let E;return m.nullCount>=m.length?u.call(this,new Uint8Array(0)):(E=m.values)instanceof Uint8Array?u.call(this,(0,a.truncateBitmap)(m.offset,m.length,E)):u.call(this,(0,a.packBools)(m.values))}function p(m){return u.call(this,m.values.subarray(0,m.length*m.stride))}function _(m){const{length:E,values:B,valueOffsets:I}=m,k=I[0],F=I[E],x=Math.min(F-k,B.byteLength-k);return u.call(this,(0,s.rebaseValueOffsets)(-I[0],E,I)),u.call(this,B.subarray(k,k+x)),this}function l(m){const{length:E,valueOffsets:B}=m;return B&&u.call(this,(0,s.rebaseValueOffsets)(B[0],E,B)),this.visit(m.children[0])}function b(m){return this.visitMany(m.type.children.map((E,B)=>m.children[B]).filter(Boolean))[0]}return f.prototype.visitBool=h,f.prototype.visitInt=p,f.prototype.visitFloat=p,f.prototype.visitUtf8=_,f.prototype.visitBinary=_,f.prototype.visitFixedSizeBinary=p,f.prototype.visitDate=p,f.prototype.visitTimestamp=p,f.prototype.visitTime=p,f.prototype.visitDecimal=p,f.prototype.visitList=l,f.prototype.visitStruct=b,f.prototype.visitUnion=r,f.prototype.visitInterval=p,f.prototype.visitFixedSizeList=l,f.prototype.visitMap=l,zp}var qp={},Y4;function Oye(){if(Y4)return qp;Y4=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.JSONTypeAssembler=void 0;const e=Ms(),t=mm(),n=$n();class i extends e.Visitor{visit(a){return a==null?void 0:super.visit(a)}visitNull({typeId:a}){return{name:t.Type[a].toLowerCase()}}visitInt({typeId:a,bitWidth:c,isSigned:d}){return{name:t.Type[a].toLowerCase(),bitWidth:c,isSigned:d}}visitFloat({typeId:a,precision:c}){return{name:t.Type[a].toLowerCase(),precision:n.Precision[c]}}visitBinary({typeId:a}){return{name:t.Type[a].toLowerCase()}}visitBool({typeId:a}){return{name:t.Type[a].toLowerCase()}}visitUtf8({typeId:a}){return{name:t.Type[a].toLowerCase()}}visitDecimal({typeId:a,scale:c,precision:d,bitWidth:f}){return{name:t.Type[a].toLowerCase(),scale:c,precision:d,bitWidth:f}}visitDate({typeId:a,unit:c}){return{name:t.Type[a].toLowerCase(),unit:n.DateUnit[c]}}visitTime({typeId:a,unit:c,bitWidth:d}){return{name:t.Type[a].toLowerCase(),unit:n.TimeUnit[c],bitWidth:d}}visitTimestamp({typeId:a,timezone:c,unit:d}){return{name:t.Type[a].toLowerCase(),unit:n.TimeUnit[d],timezone:c}}visitInterval({typeId:a,unit:c}){return{name:t.Type[a].toLowerCase(),unit:n.IntervalUnit[c]}}visitList({typeId:a}){return{name:t.Type[a].toLowerCase()}}visitStruct({typeId:a}){return{name:t.Type[a].toLowerCase()}}visitUnion({typeId:a,mode:c,typeIds:d}){return{name:t.Type[a].toLowerCase(),mode:n.UnionMode[c],typeIds:[...d]}}visitDictionary(a){return this.visit(a.dictionary)}visitFixedSizeBinary({typeId:a,byteWidth:c}){return{name:t.Type[a].toLowerCase(),byteWidth:c}}visitFixedSizeList({typeId:a,listSize:c}){return{name:t.Type[a].toLowerCase(),listSize:c}}visitMap({typeId:a,keysSorted:c}){return{name:t.Type[a].toLowerCase(),keysSorted:c}}}return qp.JSONTypeAssembler=i,qp}var Vp={},X4;function Nye(){if(X4)return Vp;X4=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.JSONVectorAssembler=void 0;const e=nA(),t=As(),n=Ms(),i=$n(),s=$n(),a=l_(),c=wn();class d extends n.Visitor{static assemble(...h){const p=new d;return h.map(({schema:_,data:l})=>p.visitMany(_.fields,l.children))}visit({name:h},p){const{length:_}=p,{offset:l,nullCount:b,nullBitmap:m}=p,E=c.DataType.isDictionary(p.type)?p.type.indices:p.type,B=Object.assign([],p.buffers,{[i.BufferType.VALIDITY]:void 0});return Object.assign({name:h,count:_,VALIDITY:c.DataType.isNull(E)?void 0:b<=0?Array.from({length:_},()=>1):[...new a.BitIterator(m,l,_,null,a.getBit)]},super.visit(p.clone(E,l,_,0,B)))}visitNull(){return{}}visitBool({values:h,offset:p,length:_}){return{DATA:[...new a.BitIterator(h,p,_,null,a.getBool)]}}visitInt(h){return{DATA:h.type.bitWidth<64?[...h.values]:[...u(h.values,2)]}}visitFloat(h){return{DATA:[...h.values]}}visitUtf8(h){return{DATA:[...new t.Vector([h])],OFFSET:[...h.valueOffsets]}}visitBinary(h){return{DATA:[...f(new t.Vector([h]))],OFFSET:[...h.valueOffsets]}}visitFixedSizeBinary(h){return{DATA:[...f(new t.Vector([h]))]}}visitDate(h){return{DATA:h.type.unit===s.DateUnit.DAY?[...h.values]:[...u(h.values,2)]}}visitTimestamp(h){return{DATA:[...u(h.values,2)]}}visitTime(h){return{DATA:h.type.unit<s.TimeUnit.MICROSECOND?[...h.values]:[...u(h.values,2)]}}visitDecimal(h){return{DATA:[...u(h.values,4)]}}visitList(h){return{OFFSET:[...h.valueOffsets],children:this.visitMany(h.type.children,h.children)}}visitStruct(h){return{children:this.visitMany(h.type.children,h.children)}}visitUnion(h){return{TYPE:[...h.typeIds],OFFSET:h.type.mode===s.UnionMode.Dense?[...h.valueOffsets]:void 0,children:this.visitMany(h.type.children,h.children)}}visitInterval(h){return{DATA:[...h.values]}}visitFixedSizeList(h){return{children:this.visitMany(h.type.children,h.children)}}visitMap(h){return{OFFSET:[...h.valueOffsets],children:this.visitMany(h.type.children,h.children)}}}Vp.JSONVectorAssembler=d;function*f(r){for(const h of r)yield h.reduce((p,_)=>`${p}${("0"+(_&255).toString(16)).slice(-2)}`,"").toUpperCase()}function*u(r,h){const p=new Uint32Array(r.buffer);for(let _=-1,l=p.length/h;++_<l;)yield`${e.BN.new(p.subarray((_+0)*h,(_+1)*h),!1)}`}return Vp}var K4;function SA(){if(K4)return Pr;K4=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.RecordBatchJSONWriter=Pr.RecordBatchFileWriter=Pr.RecordBatchStreamWriter=Pr.RecordBatchWriter=void 0;const e=et,t=wm(),n=EA(),i=As(),s=wn(),a=mh(),c=e.__importStar(mh()),d=mG(),f=$n(),u=uE(),r=Nf(),h=Aye(),p=Oye(),_=Nye(),l=ji(),b=Rf(),m=fE(),E=pa();class B extends m.ReadableInterop{static throughNode(j){throw new Error('"throughNode" not available in this environment')}static throughDOM(j,$){throw new Error('"throughDOM" not available in this environment')}constructor(j){super(),this._position=0,this._started=!1,this._sink=new r.AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(0,E.isObject)(j)||(j={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof j.autoDestroy=="boolean"?j.autoDestroy:!0,this._writeLegacyIpcFormat=typeof j.writeLegacyIpcFormat=="boolean"?j.writeLegacyIpcFormat:!1}toString(j=!1){return this._sink.toString(j)}toUint8Array(j=!1){return this._sink.toUint8Array(j)}writeAll(j){return(0,E.isPromise)(j)?j.then($=>this.writeAll($)):(0,E.isAsyncIterable)(j)?M(this,j):x(this,j)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(j){return this._sink.toDOMStream(j)}toNodeStream(j){return this._sink.toNodeStream(j)}close(){return this.reset()._sink.close()}abort(j){return this.reset()._sink.abort(j)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(j=this._sink,$=null){return j===this._sink||j instanceof r.AsyncByteQueue?this._sink=j:(this._sink=new r.AsyncByteQueue,j&&(0,E.isWritableDOMStream)(j)?this.toDOMStream({type:"bytes"}).pipeTo(j):j&&(0,E.isWritableNodeStream)(j)&&this.toNodeStream({objectMode:!1}).pipe(j)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!$||!(0,u.compareSchemas)($,this._schema))&&($==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=$,this._writeSchema($))),this}write(j){let $=null;if(this._sink){if(j==null)return this.finish()&&void 0;if(j instanceof t.Table&&!($=j.schema))return this.finish()&&void 0;if(j instanceof b.RecordBatch&&!($=j.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if($&&!(0,u.compareSchemas)($,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,$)}j instanceof b.RecordBatch?j instanceof b._InternalEmptyPlaceholderRecordBatch||this._writeRecordBatch(j):j instanceof t.Table?this.writeAll(j.batches):(0,E.isIterable)(j)&&this.writeAll(j)}_writeMessage(j,$=8){const W=$-1,H=a.Message.encode(j),G=H.byteLength,z=this._writeLegacyIpcFormat?4:8,q=G+z+W&~W,ie=q-G-z;return j.headerType===f.MessageHeader.RecordBatch?this._recordBatchBlocks.push(new d.FileBlock(q,j.bodyLength,this._position)):j.headerType===f.MessageHeader.DictionaryBatch&&this._dictionaryBlocks.push(new d.FileBlock(q,j.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(q-z)),G>0&&this._write(H),this._writePadding(ie)}_write(j){if(this._started){const $=(0,l.toUint8Array)(j);$&&$.byteLength>0&&(this._sink.write($),this._position+=$.byteLength)}return this}_writeSchema(j){return this._writeMessage(a.Message.from(j))}_writeFooter(j){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(n.MAGIC)}_writePadding(j){return j>0?this._write(new Uint8Array(j)):this}_writeRecordBatch(j){const{byteLength:$,nodes:W,bufferRegions:H,buffers:G}=h.VectorAssembler.assemble(j),z=new c.RecordBatch(j.numRows,W,H),q=a.Message.from(z,$);return this._writeDictionaries(j)._writeMessage(q)._writeBodyBuffers(G)}_writeDictionaryBatch(j,$,W=!1){this._dictionaryDeltaOffsets.set($,j.length+(this._dictionaryDeltaOffsets.get($)||0));const{byteLength:H,nodes:G,bufferRegions:z,buffers:q}=h.VectorAssembler.assemble(new i.Vector([j])),ie=new c.RecordBatch(j.length,G,z),ce=new c.DictionaryBatch(ie,$,W),se=a.Message.from(ce,H);return this._writeMessage(se)._writeBodyBuffers(q)}_writeBodyBuffers(j){let $,W,H;for(let G=-1,z=j.length;++G<z;)($=j[G])&&(W=$.byteLength)>0&&(this._write($),(H=(W+7&-8)-W)>0&&this._writePadding(H));return this}_writeDictionaries(j){for(let[$,W]of j.dictionaries){let H=this._dictionaryDeltaOffsets.get($)||0;if(H===0||(W=W==null?void 0:W.slice(H)).length>0)for(const G of W.data)this._writeDictionaryBatch(G,$,H>0),H+=G.length}return this}}Pr.RecordBatchWriter=B;class I extends B{static writeAll(j,$){const W=new I($);return(0,E.isPromise)(j)?j.then(H=>W.writeAll(H)):(0,E.isAsyncIterable)(j)?M(W,j):x(W,j)}}Pr.RecordBatchStreamWriter=I;class k extends B{static writeAll(j){const $=new k;return(0,E.isPromise)(j)?j.then(W=>$.writeAll(W)):(0,E.isAsyncIterable)(j)?M($,j):x($,j)}constructor(){super(),this._autoDestroy=!0}_writeSchema(j){return this._writeMagic()._writePadding(2)}_writeFooter(j){const $=d.Footer.encode(new d.Footer(j,f.MetadataVersion.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(j)._write($)._write(Int32Array.of($.byteLength))._writeMagic()}}Pr.RecordBatchFileWriter=k;class F extends B{static writeAll(j){return new F().writeAll(j)}constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._dictionaries=[]}_writeMessage(){return this}_writeFooter(j){return this}_writeSchema(j){return this._write(`{
  "schema": ${JSON.stringify({fields:j.fields.map($=>R($))},null,2)}`)}_writeDictionaries(j){return j.dictionaries.size>0&&this._dictionaries.push(j),this}_writeDictionaryBatch(j,$,W=!1){return this._dictionaryDeltaOffsets.set($,j.length+(this._dictionaryDeltaOffsets.get($)||0)),this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(`${P(j,$,W)}`),this._dictionaryBlocks.push(new d.FileBlock(0,0,0)),this}_writeRecordBatch(j){return this._writeDictionaries(j),this._recordBatches.push(j),this}close(){if(this._dictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(const j of this._dictionaries)super._writeDictionaries(j);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let j=-1,$=this._recordBatches.length;++j<$;)this._write(j===0?`,
  "batches": [
    `:`,
    `),this._write(`${C(this._recordBatches[j])}`),this._recordBatchBlocks.push(new d.FileBlock(0,0,0));this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._dictionaries=[],this._recordBatches=[],super.close()}}Pr.RecordBatchJSONWriter=F;function x(D,j){let $=j;j instanceof t.Table&&($=j.batches,D.reset(void 0,j.schema));for(const W of $)D.write(W);return D.finish()}function M(D,j){var $,W,H,G,z,q,ie;return e.__awaiter(this,void 0,void 0,function*(){try{for($=!0,W=e.__asyncValues(j);H=yield W.next(),G=H.done,!G;){ie=H.value,$=!1;try{const ce=ie;D.write(ce)}finally{$=!0}}}catch(ce){z={error:ce}}finally{try{!$&&!G&&(q=W.return)&&(yield q.call(W))}finally{if(z)throw z.error}}return D.finish()})}function R({name:D,type:j,nullable:$}){const W=new p.JSONTypeAssembler;return{name:D,nullable:$,type:W.visit(j),children:(j.children||[]).map(H=>R(H)),dictionary:s.DataType.isDictionary(j)?{id:j.id,isOrdered:j.isOrdered,indexType:W.visit(j.indices)}:void 0}}function P(D,j,$=!1){const[W]=_.JSONVectorAssembler.assemble(new b.RecordBatch({[j]:D}));return JSON.stringify({id:j,isDelta:$,data:{count:D.length,columns:W}},null,2)}function C(D){const[j]=_.JSONVectorAssembler.assemble(D);return JSON.stringify({count:D.numRows,columns:j},null,2)}return Pr}var Gp={},J4;function Rye(){if(J4)return Gp;J4=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.toDOMStream=void 0;const e=et,t=ji(),n=pa();function i(c,d){if((0,n.isAsyncIterable)(c))return a(c,d);if((0,n.isIterable)(c))return s(c,d);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}Gp.toDOMStream=i;function s(c,d){let f=null;const u=(d==null?void 0:d.type)==="bytes"||!1,r=(d==null?void 0:d.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},d),{start(p){h(p,f||(f=c[Symbol.iterator]()))},pull(p){f?h(p,f):p.close()},cancel(){(f!=null&&f.return&&f.return()||!0)&&(f=null)}}),Object.assign({highWaterMark:u?r:void 0},d));function h(p,_){let l,b=null,m=p.desiredSize||null;for(;!(b=_.next(u?m:null)).done;)if(ArrayBuffer.isView(b.value)&&(l=(0,t.toUint8Array)(b.value))&&(m!=null&&u&&(m=m-l.byteLength+1),b.value=l),p.enqueue(b.value),m!=null&&--m<=0)return;p.close()}}function a(c,d){let f=null;const u=(d==null?void 0:d.type)==="bytes"||!1,r=(d==null?void 0:d.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},d),{start(p){return e.__awaiter(this,void 0,void 0,function*(){yield h(p,f||(f=c[Symbol.asyncIterator]()))})},pull(p){return e.__awaiter(this,void 0,void 0,function*(){f?yield h(p,f):p.close()})},cancel(){return e.__awaiter(this,void 0,void 0,function*(){(f!=null&&f.return&&(yield f.return())||!0)&&(f=null)})}}),Object.assign({highWaterMark:u?r:void 0},d));function h(p,_){return e.__awaiter(this,void 0,void 0,function*(){let l,b=null,m=p.desiredSize||null;for(;!(b=yield _.next(u?m:null)).done;)if(ArrayBuffer.isView(b.value)&&(l=(0,t.toUint8Array)(b.value))&&(m!=null&&u&&(m=m-l.byteLength+1),b.value=l),p.enqueue(b.value),m!=null&&--m<=0)return;p.close()})}}return Gp}var _d={},Q4;function Cye(){if(Q4)return _d;Q4=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.BuilderTransform=_d.builderThroughDOMStream=void 0;const e=et,t=hE();function n(c){return new i(c)}_d.builderThroughDOMStream=n;class i{constructor(d){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:f,["writableStrategy"]:u,["queueingStrategy"]:r="count"}=d,h=e.__rest(d,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=(0,t.makeBuilder)(h),this._getSize=r!=="bytes"?s:a;const{["highWaterMark"]:p=r==="bytes"?Math.pow(2,14):1e3}=Object.assign({},f),{["highWaterMark"]:_=r==="bytes"?Math.pow(2,14):1e3}=Object.assign({},u);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:l=>{this._maybeFlush(this._builder,this._controller=l)},start:l=>{this._maybeFlush(this._builder,this._controller=l)}},{highWaterMark:p,size:r!=="bytes"?s:a}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:_,size:l=>this._writeValueAndReturnChunkSize(l)})}_writeValueAndReturnChunkSize(d){const f=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(d)),this._bufferedSize-f}_maybeFlush(d,f){f!=null&&(this._bufferedSize>=f.desiredSize&&++this._numChunks&&this._enqueue(f,d.toVector()),d.finished&&((d.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(f,d.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(f,null)))}_enqueue(d,f){this._bufferedSize=0,this._controller=null,f==null?d.close():d.enqueue(f)}}_d.BuilderTransform=i;const s=c=>{var d;return(d=c==null?void 0:c.length)!==null&&d!==void 0?d:0},a=c=>{var d;return(d=c==null?void 0:c.byteLength)!==null&&d!==void 0?d:0};return _d}var Hp={},Z4;function Lye(){if(Z4)return Hp;Z4=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.recordBatchReaderThroughDOMStream=void 0;const e=et,t=Nf(),n=_E();function i(s,a){const c=new t.AsyncByteQueue;let d=null;const f=new ReadableStream({cancel(){return e.__awaiter(this,void 0,void 0,function*(){yield c.close()})},start(h){return e.__awaiter(this,void 0,void 0,function*(){yield r(h,d||(d=yield u()))})},pull(h){return e.__awaiter(this,void 0,void 0,function*(){d?yield r(h,d):h.close()})}});return{writable:new WritableStream(c,Object.assign({highWaterMark:Math.pow(2,14)},s)),readable:f};function u(){return e.__awaiter(this,void 0,void 0,function*(){return yield(yield n.RecordBatchReader.from(c)).open(a)})}function r(h,p){return e.__awaiter(this,void 0,void 0,function*(){let _=h.desiredSize,l=null;for(;!(l=yield p.next()).done;)if(h.enqueue(l.value),_!=null&&--_<=0)return;h.close()})}}return Hp.recordBatchReaderThroughDOMStream=i,Hp}var Wp={},eU;function Pye(){if(eU)return Wp;eU=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.recordBatchWriterThroughDOMStream=void 0;const e=et,t=Nf();function n(i,s){const a=new this(i),c=new t.AsyncByteStream(a),d=new ReadableStream({cancel(){return e.__awaiter(this,void 0,void 0,function*(){yield c.cancel()})},pull(u){return e.__awaiter(this,void 0,void 0,function*(){yield f(u)})},start(u){return e.__awaiter(this,void 0,void 0,function*(){yield f(u)})}},Object.assign({highWaterMark:Math.pow(2,14)},s));return{writable:new WritableStream(a,i),readable:d};function f(u){return e.__awaiter(this,void 0,void 0,function*(){let r=null,h=u.desiredSize;for(;r=yield c.read(h||null);)if(u.enqueue(r),h!=null&&(h-=r.byteLength)<=0)return;u.close()})}}return Wp.recordBatchWriterThroughDOMStream=n,Wp}var _I={},pd={},tU;function Dye(){if(tU)return pd;tU=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.tableToIPC=pd.tableFromIPC=void 0;const e=wm(),t=pa(),n=_E(),i=SA();function s(c){const d=n.RecordBatchReader.from(c);return(0,t.isPromise)(d)?d.then(f=>s(f)):d.isAsync()?d.readAll().then(f=>new e.Table(f)):new e.Table(d.readAll())}pd.tableFromIPC=s;function a(c,d="stream"){return(d==="stream"?i.RecordBatchStreamWriter:i.RecordBatchFileWriter).writeAll(c).toUint8Array(!0)}return pd.tableToIPC=a,pd}var nU;function iU(){return nU||(nU=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Dictionary=e.SparseUnion=e.DenseUnion=e.Union=e.Struct=e.List=e.Decimal=e.TimeNanosecond=e.TimeMicrosecond=e.TimeMillisecond=e.TimeSecond=e.Time=e.TimestampNanosecond=e.TimestampMicrosecond=e.TimestampMillisecond=e.TimestampSecond=e.Timestamp=e.DateMillisecond=e.DateDay=e.Date_=e.FixedSizeBinary=e.Binary=e.Utf8=e.Float64=e.Float32=e.Float16=e.Float=e.Uint64=e.Uint32=e.Uint16=e.Uint8=e.Int64=e.Int32=e.Int16=e.Int8=e.Int=e.Bool=e.Null=e.DataType=e.makeData=e.Data=e.MetadataVersion=e.IntervalUnit=e.UnionMode=e.Precision=e.TimeUnit=e.DateUnit=e.BufferType=e.Type=e.MessageHeader=void 0,e.TimestampMillisecondBuilder=e.TimestampSecondBuilder=e.TimestampBuilder=e.TimeNanosecondBuilder=e.TimeMicrosecondBuilder=e.TimeMillisecondBuilder=e.TimeSecondBuilder=e.TimeBuilder=e.Uint64Builder=e.Uint32Builder=e.Uint16Builder=e.Uint8Builder=e.Int64Builder=e.Int32Builder=e.Int16Builder=e.Int8Builder=e.IntBuilder=e.Float64Builder=e.Float32Builder=e.Float16Builder=e.FloatBuilder=e.FixedSizeBinaryBuilder=e.DictionaryBuilder=e.DecimalBuilder=e.DateMillisecondBuilder=e.DateDayBuilder=e.DateBuilder=e.NullBuilder=e.BoolBuilder=e.builderThroughAsyncIterable=e.builderThroughIterable=e.tableFromJSON=e.vectorFromArray=e.makeBuilder=e.Builder=e.StructRow=e.MapRow=e.Field=e.Schema=e.Visitor=e.makeVector=e.Vector=e.tableFromArrays=e.makeTable=e.Table=e.Map_=e.FixedSizeList=e.IntervalYearMonth=e.IntervalDayTime=e.Interval=void 0,e.util=e.RecordBatch=e.Message=e.JSONMessageReader=e.AsyncMessageReader=e.MessageReader=e.tableFromIPC=e.tableToIPC=e.RecordBatchJSONWriter=e.RecordBatchStreamWriter=e.RecordBatchFileWriter=e.RecordBatchWriter=e.AsyncRecordBatchStreamReader=e.AsyncRecordBatchFileReader=e.RecordBatchStreamReader=e.RecordBatchFileReader=e.RecordBatchReader=e.AsyncByteQueue=e.AsyncByteStream=e.ByteStream=e.DenseUnionBuilder=e.SparseUnionBuilder=e.UnionBuilder=e.StructBuilder=e.MapBuilder=e.FixedSizeListBuilder=e.ListBuilder=e.BinaryBuilder=e.Utf8Builder=e.IntervalYearMonthBuilder=e.IntervalDayTimeBuilder=e.IntervalBuilder=e.TimestampNanosecondBuilder=e.TimestampMicrosecondBuilder=void 0;const t=et;var n=$G();Object.defineProperty(e,"MessageHeader",{enumerable:!0,get:function(){return n.MessageHeader}});var i=$n();Object.defineProperty(e,"Type",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(e,"BufferType",{enumerable:!0,get:function(){return i.BufferType}}),Object.defineProperty(e,"DateUnit",{enumerable:!0,get:function(){return i.DateUnit}}),Object.defineProperty(e,"TimeUnit",{enumerable:!0,get:function(){return i.TimeUnit}}),Object.defineProperty(e,"Precision",{enumerable:!0,get:function(){return i.Precision}}),Object.defineProperty(e,"UnionMode",{enumerable:!0,get:function(){return i.UnionMode}}),Object.defineProperty(e,"IntervalUnit",{enumerable:!0,get:function(){return i.IntervalUnit}}),Object.defineProperty(e,"MetadataVersion",{enumerable:!0,get:function(){return i.MetadataVersion}});var s=Bl();Object.defineProperty(e,"Data",{enumerable:!0,get:function(){return s.Data}}),Object.defineProperty(e,"makeData",{enumerable:!0,get:function(){return s.makeData}});var a=wn();Object.defineProperty(e,"DataType",{enumerable:!0,get:function(){return a.DataType}}),Object.defineProperty(e,"Null",{enumerable:!0,get:function(){return a.Null}}),Object.defineProperty(e,"Bool",{enumerable:!0,get:function(){return a.Bool}}),Object.defineProperty(e,"Int",{enumerable:!0,get:function(){return a.Int}}),Object.defineProperty(e,"Int8",{enumerable:!0,get:function(){return a.Int8}}),Object.defineProperty(e,"Int16",{enumerable:!0,get:function(){return a.Int16}}),Object.defineProperty(e,"Int32",{enumerable:!0,get:function(){return a.Int32}}),Object.defineProperty(e,"Int64",{enumerable:!0,get:function(){return a.Int64}}),Object.defineProperty(e,"Uint8",{enumerable:!0,get:function(){return a.Uint8}}),Object.defineProperty(e,"Uint16",{enumerable:!0,get:function(){return a.Uint16}}),Object.defineProperty(e,"Uint32",{enumerable:!0,get:function(){return a.Uint32}}),Object.defineProperty(e,"Uint64",{enumerable:!0,get:function(){return a.Uint64}}),Object.defineProperty(e,"Float",{enumerable:!0,get:function(){return a.Float}}),Object.defineProperty(e,"Float16",{enumerable:!0,get:function(){return a.Float16}}),Object.defineProperty(e,"Float32",{enumerable:!0,get:function(){return a.Float32}}),Object.defineProperty(e,"Float64",{enumerable:!0,get:function(){return a.Float64}}),Object.defineProperty(e,"Utf8",{enumerable:!0,get:function(){return a.Utf8}}),Object.defineProperty(e,"Binary",{enumerable:!0,get:function(){return a.Binary}}),Object.defineProperty(e,"FixedSizeBinary",{enumerable:!0,get:function(){return a.FixedSizeBinary}}),Object.defineProperty(e,"Date_",{enumerable:!0,get:function(){return a.Date_}}),Object.defineProperty(e,"DateDay",{enumerable:!0,get:function(){return a.DateDay}}),Object.defineProperty(e,"DateMillisecond",{enumerable:!0,get:function(){return a.DateMillisecond}}),Object.defineProperty(e,"Timestamp",{enumerable:!0,get:function(){return a.Timestamp}}),Object.defineProperty(e,"TimestampSecond",{enumerable:!0,get:function(){return a.TimestampSecond}}),Object.defineProperty(e,"TimestampMillisecond",{enumerable:!0,get:function(){return a.TimestampMillisecond}}),Object.defineProperty(e,"TimestampMicrosecond",{enumerable:!0,get:function(){return a.TimestampMicrosecond}}),Object.defineProperty(e,"TimestampNanosecond",{enumerable:!0,get:function(){return a.TimestampNanosecond}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"TimeSecond",{enumerable:!0,get:function(){return a.TimeSecond}}),Object.defineProperty(e,"TimeMillisecond",{enumerable:!0,get:function(){return a.TimeMillisecond}}),Object.defineProperty(e,"TimeMicrosecond",{enumerable:!0,get:function(){return a.TimeMicrosecond}}),Object.defineProperty(e,"TimeNanosecond",{enumerable:!0,get:function(){return a.TimeNanosecond}}),Object.defineProperty(e,"Decimal",{enumerable:!0,get:function(){return a.Decimal}}),Object.defineProperty(e,"List",{enumerable:!0,get:function(){return a.List}}),Object.defineProperty(e,"Struct",{enumerable:!0,get:function(){return a.Struct}}),Object.defineProperty(e,"Union",{enumerable:!0,get:function(){return a.Union}}),Object.defineProperty(e,"DenseUnion",{enumerable:!0,get:function(){return a.DenseUnion}}),Object.defineProperty(e,"SparseUnion",{enumerable:!0,get:function(){return a.SparseUnion}}),Object.defineProperty(e,"Dictionary",{enumerable:!0,get:function(){return a.Dictionary}}),Object.defineProperty(e,"Interval",{enumerable:!0,get:function(){return a.Interval}}),Object.defineProperty(e,"IntervalDayTime",{enumerable:!0,get:function(){return a.IntervalDayTime}}),Object.defineProperty(e,"IntervalYearMonth",{enumerable:!0,get:function(){return a.IntervalYearMonth}}),Object.defineProperty(e,"FixedSizeList",{enumerable:!0,get:function(){return a.FixedSizeList}}),Object.defineProperty(e,"Map_",{enumerable:!0,get:function(){return a.Map_}});var c=wm();Object.defineProperty(e,"Table",{enumerable:!0,get:function(){return c.Table}}),Object.defineProperty(e,"makeTable",{enumerable:!0,get:function(){return c.makeTable}}),Object.defineProperty(e,"tableFromArrays",{enumerable:!0,get:function(){return c.tableFromArrays}});var d=As();Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return d.Vector}}),Object.defineProperty(e,"makeVector",{enumerable:!0,get:function(){return d.makeVector}});var f=Ms();Object.defineProperty(e,"Visitor",{enumerable:!0,get:function(){return f.Visitor}});var u=ir();Object.defineProperty(e,"Schema",{enumerable:!0,get:function(){return u.Schema}}),Object.defineProperty(e,"Field",{enumerable:!0,get:function(){return u.Field}});var r=cE();Object.defineProperty(e,"MapRow",{enumerable:!0,get:function(){return r.MapRow}});var h=sA();Object.defineProperty(e,"StructRow",{enumerable:!0,get:function(){return h.StructRow}});var p=Hn();Object.defineProperty(e,"Builder",{enumerable:!0,get:function(){return p.Builder}});var _=hE();Object.defineProperty(e,"makeBuilder",{enumerable:!0,get:function(){return _.makeBuilder}}),Object.defineProperty(e,"vectorFromArray",{enumerable:!0,get:function(){return _.vectorFromArray}}),Object.defineProperty(e,"tableFromJSON",{enumerable:!0,get:function(){return _.tableFromJSON}}),Object.defineProperty(e,"builderThroughIterable",{enumerable:!0,get:function(){return _.builderThroughIterable}}),Object.defineProperty(e,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return _.builderThroughAsyncIterable}});var l=TG();Object.defineProperty(e,"BoolBuilder",{enumerable:!0,get:function(){return l.BoolBuilder}});var b=OG();Object.defineProperty(e,"NullBuilder",{enumerable:!0,get:function(){return b.NullBuilder}});var m=vG();Object.defineProperty(e,"DateBuilder",{enumerable:!0,get:function(){return m.DateBuilder}}),Object.defineProperty(e,"DateDayBuilder",{enumerable:!0,get:function(){return m.DateDayBuilder}}),Object.defineProperty(e,"DateMillisecondBuilder",{enumerable:!0,get:function(){return m.DateMillisecondBuilder}});var E=EG();Object.defineProperty(e,"DecimalBuilder",{enumerable:!0,get:function(){return E.DecimalBuilder}});var B=SG();Object.defineProperty(e,"DictionaryBuilder",{enumerable:!0,get:function(){return B.DictionaryBuilder}});var I=BG();Object.defineProperty(e,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return I.FixedSizeBinaryBuilder}});var k=FG();Object.defineProperty(e,"FloatBuilder",{enumerable:!0,get:function(){return k.FloatBuilder}}),Object.defineProperty(e,"Float16Builder",{enumerable:!0,get:function(){return k.Float16Builder}}),Object.defineProperty(e,"Float32Builder",{enumerable:!0,get:function(){return k.Float32Builder}}),Object.defineProperty(e,"Float64Builder",{enumerable:!0,get:function(){return k.Float64Builder}});var F=xG();Object.defineProperty(e,"IntBuilder",{enumerable:!0,get:function(){return F.IntBuilder}}),Object.defineProperty(e,"Int8Builder",{enumerable:!0,get:function(){return F.Int8Builder}}),Object.defineProperty(e,"Int16Builder",{enumerable:!0,get:function(){return F.Int16Builder}}),Object.defineProperty(e,"Int32Builder",{enumerable:!0,get:function(){return F.Int32Builder}}),Object.defineProperty(e,"Int64Builder",{enumerable:!0,get:function(){return F.Int64Builder}}),Object.defineProperty(e,"Uint8Builder",{enumerable:!0,get:function(){return F.Uint8Builder}}),Object.defineProperty(e,"Uint16Builder",{enumerable:!0,get:function(){return F.Uint16Builder}}),Object.defineProperty(e,"Uint32Builder",{enumerable:!0,get:function(){return F.Uint32Builder}}),Object.defineProperty(e,"Uint64Builder",{enumerable:!0,get:function(){return F.Uint64Builder}});var x=CG();Object.defineProperty(e,"TimeBuilder",{enumerable:!0,get:function(){return x.TimeBuilder}}),Object.defineProperty(e,"TimeSecondBuilder",{enumerable:!0,get:function(){return x.TimeSecondBuilder}}),Object.defineProperty(e,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return x.TimeMillisecondBuilder}}),Object.defineProperty(e,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return x.TimeMicrosecondBuilder}}),Object.defineProperty(e,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return x.TimeNanosecondBuilder}});var M=RG();Object.defineProperty(e,"TimestampBuilder",{enumerable:!0,get:function(){return M.TimestampBuilder}}),Object.defineProperty(e,"TimestampSecondBuilder",{enumerable:!0,get:function(){return M.TimestampSecondBuilder}}),Object.defineProperty(e,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return M.TimestampMillisecondBuilder}}),Object.defineProperty(e,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return M.TimestampMicrosecondBuilder}}),Object.defineProperty(e,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return M.TimestampNanosecondBuilder}});var R=kG();Object.defineProperty(e,"IntervalBuilder",{enumerable:!0,get:function(){return R.IntervalBuilder}}),Object.defineProperty(e,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return R.IntervalDayTimeBuilder}}),Object.defineProperty(e,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return R.IntervalYearMonthBuilder}});var P=PG();Object.defineProperty(e,"Utf8Builder",{enumerable:!0,get:function(){return P.Utf8Builder}});var C=TA();Object.defineProperty(e,"BinaryBuilder",{enumerable:!0,get:function(){return C.BinaryBuilder}});var D=MG();Object.defineProperty(e,"ListBuilder",{enumerable:!0,get:function(){return D.ListBuilder}});var j=IG();Object.defineProperty(e,"FixedSizeListBuilder",{enumerable:!0,get:function(){return j.FixedSizeListBuilder}});var $=AG();Object.defineProperty(e,"MapBuilder",{enumerable:!0,get:function(){return $.MapBuilder}});var W=NG();Object.defineProperty(e,"StructBuilder",{enumerable:!0,get:function(){return W.StructBuilder}});var H=LG();Object.defineProperty(e,"UnionBuilder",{enumerable:!0,get:function(){return H.UnionBuilder}}),Object.defineProperty(e,"SparseUnionBuilder",{enumerable:!0,get:function(){return H.SparseUnionBuilder}}),Object.defineProperty(e,"DenseUnionBuilder",{enumerable:!0,get:function(){return H.DenseUnionBuilder}});var G=Nf();Object.defineProperty(e,"ByteStream",{enumerable:!0,get:function(){return G.ByteStream}}),Object.defineProperty(e,"AsyncByteStream",{enumerable:!0,get:function(){return G.AsyncByteStream}}),Object.defineProperty(e,"AsyncByteQueue",{enumerable:!0,get:function(){return G.AsyncByteQueue}});var z=_E();Object.defineProperty(e,"RecordBatchReader",{enumerable:!0,get:function(){return z.RecordBatchReader}}),Object.defineProperty(e,"RecordBatchFileReader",{enumerable:!0,get:function(){return z.RecordBatchFileReader}}),Object.defineProperty(e,"RecordBatchStreamReader",{enumerable:!0,get:function(){return z.RecordBatchStreamReader}}),Object.defineProperty(e,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return z.AsyncRecordBatchFileReader}}),Object.defineProperty(e,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return z.AsyncRecordBatchStreamReader}});var q=SA();Object.defineProperty(e,"RecordBatchWriter",{enumerable:!0,get:function(){return q.RecordBatchWriter}}),Object.defineProperty(e,"RecordBatchFileWriter",{enumerable:!0,get:function(){return q.RecordBatchFileWriter}}),Object.defineProperty(e,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return q.RecordBatchStreamWriter}}),Object.defineProperty(e,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return q.RecordBatchJSONWriter}});var ie=Dye();Object.defineProperty(e,"tableToIPC",{enumerable:!0,get:function(){return ie.tableToIPC}}),Object.defineProperty(e,"tableFromIPC",{enumerable:!0,get:function(){return ie.tableFromIPC}});var ce=EA();Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return ce.MessageReader}}),Object.defineProperty(e,"AsyncMessageReader",{enumerable:!0,get:function(){return ce.AsyncMessageReader}}),Object.defineProperty(e,"JSONMessageReader",{enumerable:!0,get:function(){return ce.JSONMessageReader}});var se=mh();Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return se.Message}});var Ie=Rf();Object.defineProperty(e,"RecordBatch",{enumerable:!0,get:function(){return Ie.RecordBatch}});const he=t.__importStar(nA()),Me=t.__importStar(bG()),Ue=t.__importStar(l_()),_e=t.__importStar(lE()),ke=t.__importStar(ji()),Ee=t.__importStar(dE()),ye=uE();e.util=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},he),Me),Ue),_e),ke),Ee),{compareSchemas:ye.compareSchemas,compareFields:ye.compareFields,compareTypes:ye.compareTypes})}(_I)),_I}var sU;function Uye(){return sU||(sU=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SparseUnion=e.DenseUnion=e.Union=e.StructRow=e.Struct=e.List=e.Decimal=e.TimeNanosecond=e.TimeMicrosecond=e.TimeMillisecond=e.TimeSecond=e.Time=e.TimestampNanosecond=e.TimestampMicrosecond=e.TimestampMillisecond=e.TimestampSecond=e.Timestamp=e.DateMillisecond=e.DateDay=e.Date_=e.FixedSizeBinary=e.Binary=e.Utf8=e.Float64=e.Float32=e.Float16=e.Float=e.Uint64=e.Uint32=e.Uint16=e.Uint8=e.Int64=e.Int32=e.Int16=e.Int8=e.Int=e.Bool=e.Null=e.DataType=e.makeData=e.Data=e.BufferType=e.UnionMode=e.Type=e.TimeUnit=e.Precision=e.MetadataVersion=e.MessageHeader=e.IntervalUnit=e.DateUnit=void 0,e.FixedSizeListBuilder=e.FixedSizeBinaryBuilder=e.DictionaryBuilder=e.DecimalBuilder=e.DateMillisecondBuilder=e.DateDayBuilder=e.DateBuilder=e.BoolBuilder=e.BinaryBuilder=e.builderThroughAsyncIterable=e.builderThroughIterable=e.makeBuilder=e.Builder=e.util=e.RecordBatch=e.Message=e.JSONMessageReader=e.AsyncMessageReader=e.MessageReader=e.tableToIPC=e.tableFromIPC=e.RecordBatchJSONWriter=e.RecordBatchStreamWriter=e.RecordBatchFileWriter=e.RecordBatchWriter=e.AsyncRecordBatchStreamReader=e.AsyncRecordBatchFileReader=e.RecordBatchStreamReader=e.RecordBatchFileReader=e.RecordBatchReader=e.AsyncByteQueue=e.AsyncByteStream=e.ByteStream=e.tableFromJSON=e.vectorFromArray=e.makeVector=e.Vector=e.Visitor=e.Field=e.Schema=e.tableFromArrays=e.makeTable=e.Table=e.MapRow=e.Map_=e.FixedSizeList=e.IntervalYearMonth=e.IntervalDayTime=e.Interval=e.Dictionary=void 0,e.Utf8Builder=e.SparseUnionBuilder=e.DenseUnionBuilder=e.UnionBuilder=e.TimeNanosecondBuilder=e.TimeMicrosecondBuilder=e.TimeMillisecondBuilder=e.TimeSecondBuilder=e.TimeBuilder=e.TimestampNanosecondBuilder=e.TimestampMicrosecondBuilder=e.TimestampMillisecondBuilder=e.TimestampSecondBuilder=e.TimestampBuilder=e.StructBuilder=e.NullBuilder=e.MapBuilder=e.ListBuilder=e.Uint64Builder=e.Uint32Builder=e.Uint16Builder=e.Uint8Builder=e.Int64Builder=e.Int32Builder=e.Int16Builder=e.Int8Builder=e.IntBuilder=e.IntervalYearMonthBuilder=e.IntervalDayTimeBuilder=e.IntervalBuilder=e.Float64Builder=e.Float32Builder=e.Float16Builder=e.FloatBuilder=void 0;const n=et.__importDefault(oE()),i=Hn(),s=_E(),a=SA(),c=Rye(),d=Cye(),f=Lye(),u=Pye();n.default.toDOMStream=c.toDOMStream,i.Builder.throughDOM=d.builderThroughDOMStream,s.RecordBatchReader.throughDOM=f.recordBatchReaderThroughDOMStream,s.RecordBatchFileReader.throughDOM=f.recordBatchReaderThroughDOMStream,s.RecordBatchStreamReader.throughDOM=f.recordBatchReaderThroughDOMStream,a.RecordBatchWriter.throughDOM=u.recordBatchWriterThroughDOMStream,a.RecordBatchFileWriter.throughDOM=u.recordBatchWriterThroughDOMStream,a.RecordBatchStreamWriter.throughDOM=u.recordBatchWriterThroughDOMStream;var r=iU();Object.defineProperty(e,"DateUnit",{enumerable:!0,get:function(){return r.DateUnit}}),Object.defineProperty(e,"IntervalUnit",{enumerable:!0,get:function(){return r.IntervalUnit}}),Object.defineProperty(e,"MessageHeader",{enumerable:!0,get:function(){return r.MessageHeader}}),Object.defineProperty(e,"MetadataVersion",{enumerable:!0,get:function(){return r.MetadataVersion}}),Object.defineProperty(e,"Precision",{enumerable:!0,get:function(){return r.Precision}}),Object.defineProperty(e,"TimeUnit",{enumerable:!0,get:function(){return r.TimeUnit}}),Object.defineProperty(e,"Type",{enumerable:!0,get:function(){return r.Type}}),Object.defineProperty(e,"UnionMode",{enumerable:!0,get:function(){return r.UnionMode}}),Object.defineProperty(e,"BufferType",{enumerable:!0,get:function(){return r.BufferType}}),Object.defineProperty(e,"Data",{enumerable:!0,get:function(){return r.Data}}),Object.defineProperty(e,"makeData",{enumerable:!0,get:function(){return r.makeData}}),Object.defineProperty(e,"DataType",{enumerable:!0,get:function(){return r.DataType}}),Object.defineProperty(e,"Null",{enumerable:!0,get:function(){return r.Null}}),Object.defineProperty(e,"Bool",{enumerable:!0,get:function(){return r.Bool}}),Object.defineProperty(e,"Int",{enumerable:!0,get:function(){return r.Int}}),Object.defineProperty(e,"Int8",{enumerable:!0,get:function(){return r.Int8}}),Object.defineProperty(e,"Int16",{enumerable:!0,get:function(){return r.Int16}}),Object.defineProperty(e,"Int32",{enumerable:!0,get:function(){return r.Int32}}),Object.defineProperty(e,"Int64",{enumerable:!0,get:function(){return r.Int64}}),Object.defineProperty(e,"Uint8",{enumerable:!0,get:function(){return r.Uint8}}),Object.defineProperty(e,"Uint16",{enumerable:!0,get:function(){return r.Uint16}}),Object.defineProperty(e,"Uint32",{enumerable:!0,get:function(){return r.Uint32}}),Object.defineProperty(e,"Uint64",{enumerable:!0,get:function(){return r.Uint64}}),Object.defineProperty(e,"Float",{enumerable:!0,get:function(){return r.Float}}),Object.defineProperty(e,"Float16",{enumerable:!0,get:function(){return r.Float16}}),Object.defineProperty(e,"Float32",{enumerable:!0,get:function(){return r.Float32}}),Object.defineProperty(e,"Float64",{enumerable:!0,get:function(){return r.Float64}}),Object.defineProperty(e,"Utf8",{enumerable:!0,get:function(){return r.Utf8}}),Object.defineProperty(e,"Binary",{enumerable:!0,get:function(){return r.Binary}}),Object.defineProperty(e,"FixedSizeBinary",{enumerable:!0,get:function(){return r.FixedSizeBinary}}),Object.defineProperty(e,"Date_",{enumerable:!0,get:function(){return r.Date_}}),Object.defineProperty(e,"DateDay",{enumerable:!0,get:function(){return r.DateDay}}),Object.defineProperty(e,"DateMillisecond",{enumerable:!0,get:function(){return r.DateMillisecond}}),Object.defineProperty(e,"Timestamp",{enumerable:!0,get:function(){return r.Timestamp}}),Object.defineProperty(e,"TimestampSecond",{enumerable:!0,get:function(){return r.TimestampSecond}}),Object.defineProperty(e,"TimestampMillisecond",{enumerable:!0,get:function(){return r.TimestampMillisecond}}),Object.defineProperty(e,"TimestampMicrosecond",{enumerable:!0,get:function(){return r.TimestampMicrosecond}}),Object.defineProperty(e,"TimestampNanosecond",{enumerable:!0,get:function(){return r.TimestampNanosecond}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return r.Time}}),Object.defineProperty(e,"TimeSecond",{enumerable:!0,get:function(){return r.TimeSecond}}),Object.defineProperty(e,"TimeMillisecond",{enumerable:!0,get:function(){return r.TimeMillisecond}}),Object.defineProperty(e,"TimeMicrosecond",{enumerable:!0,get:function(){return r.TimeMicrosecond}}),Object.defineProperty(e,"TimeNanosecond",{enumerable:!0,get:function(){return r.TimeNanosecond}}),Object.defineProperty(e,"Decimal",{enumerable:!0,get:function(){return r.Decimal}}),Object.defineProperty(e,"List",{enumerable:!0,get:function(){return r.List}}),Object.defineProperty(e,"Struct",{enumerable:!0,get:function(){return r.Struct}}),Object.defineProperty(e,"StructRow",{enumerable:!0,get:function(){return r.StructRow}}),Object.defineProperty(e,"Union",{enumerable:!0,get:function(){return r.Union}}),Object.defineProperty(e,"DenseUnion",{enumerable:!0,get:function(){return r.DenseUnion}}),Object.defineProperty(e,"SparseUnion",{enumerable:!0,get:function(){return r.SparseUnion}}),Object.defineProperty(e,"Dictionary",{enumerable:!0,get:function(){return r.Dictionary}}),Object.defineProperty(e,"Interval",{enumerable:!0,get:function(){return r.Interval}}),Object.defineProperty(e,"IntervalDayTime",{enumerable:!0,get:function(){return r.IntervalDayTime}}),Object.defineProperty(e,"IntervalYearMonth",{enumerable:!0,get:function(){return r.IntervalYearMonth}}),Object.defineProperty(e,"FixedSizeList",{enumerable:!0,get:function(){return r.FixedSizeList}}),Object.defineProperty(e,"Map_",{enumerable:!0,get:function(){return r.Map_}}),Object.defineProperty(e,"MapRow",{enumerable:!0,get:function(){return r.MapRow}}),Object.defineProperty(e,"Table",{enumerable:!0,get:function(){return r.Table}}),Object.defineProperty(e,"makeTable",{enumerable:!0,get:function(){return r.makeTable}}),Object.defineProperty(e,"tableFromArrays",{enumerable:!0,get:function(){return r.tableFromArrays}}),Object.defineProperty(e,"Schema",{enumerable:!0,get:function(){return r.Schema}}),Object.defineProperty(e,"Field",{enumerable:!0,get:function(){return r.Field}}),Object.defineProperty(e,"Visitor",{enumerable:!0,get:function(){return r.Visitor}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return r.Vector}}),Object.defineProperty(e,"makeVector",{enumerable:!0,get:function(){return r.makeVector}}),Object.defineProperty(e,"vectorFromArray",{enumerable:!0,get:function(){return r.vectorFromArray}}),Object.defineProperty(e,"tableFromJSON",{enumerable:!0,get:function(){return r.tableFromJSON}}),Object.defineProperty(e,"ByteStream",{enumerable:!0,get:function(){return r.ByteStream}}),Object.defineProperty(e,"AsyncByteStream",{enumerable:!0,get:function(){return r.AsyncByteStream}}),Object.defineProperty(e,"AsyncByteQueue",{enumerable:!0,get:function(){return r.AsyncByteQueue}}),Object.defineProperty(e,"RecordBatchReader",{enumerable:!0,get:function(){return r.RecordBatchReader}}),Object.defineProperty(e,"RecordBatchFileReader",{enumerable:!0,get:function(){return r.RecordBatchFileReader}}),Object.defineProperty(e,"RecordBatchStreamReader",{enumerable:!0,get:function(){return r.RecordBatchStreamReader}}),Object.defineProperty(e,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return r.AsyncRecordBatchFileReader}}),Object.defineProperty(e,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return r.AsyncRecordBatchStreamReader}}),Object.defineProperty(e,"RecordBatchWriter",{enumerable:!0,get:function(){return r.RecordBatchWriter}}),Object.defineProperty(e,"RecordBatchFileWriter",{enumerable:!0,get:function(){return r.RecordBatchFileWriter}}),Object.defineProperty(e,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return r.RecordBatchStreamWriter}}),Object.defineProperty(e,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return r.RecordBatchJSONWriter}}),Object.defineProperty(e,"tableFromIPC",{enumerable:!0,get:function(){return r.tableFromIPC}}),Object.defineProperty(e,"tableToIPC",{enumerable:!0,get:function(){return r.tableToIPC}}),Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return r.MessageReader}}),Object.defineProperty(e,"AsyncMessageReader",{enumerable:!0,get:function(){return r.AsyncMessageReader}}),Object.defineProperty(e,"JSONMessageReader",{enumerable:!0,get:function(){return r.JSONMessageReader}}),Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return r.Message}}),Object.defineProperty(e,"RecordBatch",{enumerable:!0,get:function(){return r.RecordBatch}}),Object.defineProperty(e,"util",{enumerable:!0,get:function(){return r.util}}),Object.defineProperty(e,"Builder",{enumerable:!0,get:function(){return r.Builder}}),Object.defineProperty(e,"makeBuilder",{enumerable:!0,get:function(){return r.makeBuilder}}),Object.defineProperty(e,"builderThroughIterable",{enumerable:!0,get:function(){return r.builderThroughIterable}}),Object.defineProperty(e,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return r.builderThroughAsyncIterable}});var h=iU();Object.defineProperty(e,"BinaryBuilder",{enumerable:!0,get:function(){return h.BinaryBuilder}}),Object.defineProperty(e,"BoolBuilder",{enumerable:!0,get:function(){return h.BoolBuilder}}),Object.defineProperty(e,"DateBuilder",{enumerable:!0,get:function(){return h.DateBuilder}}),Object.defineProperty(e,"DateDayBuilder",{enumerable:!0,get:function(){return h.DateDayBuilder}}),Object.defineProperty(e,"DateMillisecondBuilder",{enumerable:!0,get:function(){return h.DateMillisecondBuilder}}),Object.defineProperty(e,"DecimalBuilder",{enumerable:!0,get:function(){return h.DecimalBuilder}}),Object.defineProperty(e,"DictionaryBuilder",{enumerable:!0,get:function(){return h.DictionaryBuilder}}),Object.defineProperty(e,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return h.FixedSizeBinaryBuilder}}),Object.defineProperty(e,"FixedSizeListBuilder",{enumerable:!0,get:function(){return h.FixedSizeListBuilder}}),Object.defineProperty(e,"FloatBuilder",{enumerable:!0,get:function(){return h.FloatBuilder}}),Object.defineProperty(e,"Float16Builder",{enumerable:!0,get:function(){return h.Float16Builder}}),Object.defineProperty(e,"Float32Builder",{enumerable:!0,get:function(){return h.Float32Builder}}),Object.defineProperty(e,"Float64Builder",{enumerable:!0,get:function(){return h.Float64Builder}}),Object.defineProperty(e,"IntervalBuilder",{enumerable:!0,get:function(){return h.IntervalBuilder}}),Object.defineProperty(e,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return h.IntervalDayTimeBuilder}}),Object.defineProperty(e,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return h.IntervalYearMonthBuilder}}),Object.defineProperty(e,"IntBuilder",{enumerable:!0,get:function(){return h.IntBuilder}}),Object.defineProperty(e,"Int8Builder",{enumerable:!0,get:function(){return h.Int8Builder}}),Object.defineProperty(e,"Int16Builder",{enumerable:!0,get:function(){return h.Int16Builder}}),Object.defineProperty(e,"Int32Builder",{enumerable:!0,get:function(){return h.Int32Builder}}),Object.defineProperty(e,"Int64Builder",{enumerable:!0,get:function(){return h.Int64Builder}}),Object.defineProperty(e,"Uint8Builder",{enumerable:!0,get:function(){return h.Uint8Builder}}),Object.defineProperty(e,"Uint16Builder",{enumerable:!0,get:function(){return h.Uint16Builder}}),Object.defineProperty(e,"Uint32Builder",{enumerable:!0,get:function(){return h.Uint32Builder}}),Object.defineProperty(e,"Uint64Builder",{enumerable:!0,get:function(){return h.Uint64Builder}}),Object.defineProperty(e,"ListBuilder",{enumerable:!0,get:function(){return h.ListBuilder}}),Object.defineProperty(e,"MapBuilder",{enumerable:!0,get:function(){return h.MapBuilder}}),Object.defineProperty(e,"NullBuilder",{enumerable:!0,get:function(){return h.NullBuilder}}),Object.defineProperty(e,"StructBuilder",{enumerable:!0,get:function(){return h.StructBuilder}}),Object.defineProperty(e,"TimestampBuilder",{enumerable:!0,get:function(){return h.TimestampBuilder}}),Object.defineProperty(e,"TimestampSecondBuilder",{enumerable:!0,get:function(){return h.TimestampSecondBuilder}}),Object.defineProperty(e,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return h.TimestampMillisecondBuilder}}),Object.defineProperty(e,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return h.TimestampMicrosecondBuilder}}),Object.defineProperty(e,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return h.TimestampNanosecondBuilder}}),Object.defineProperty(e,"TimeBuilder",{enumerable:!0,get:function(){return h.TimeBuilder}}),Object.defineProperty(e,"TimeSecondBuilder",{enumerable:!0,get:function(){return h.TimeSecondBuilder}}),Object.defineProperty(e,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return h.TimeMillisecondBuilder}}),Object.defineProperty(e,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return h.TimeMicrosecondBuilder}}),Object.defineProperty(e,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return h.TimeNanosecondBuilder}}),Object.defineProperty(e,"UnionBuilder",{enumerable:!0,get:function(){return h.UnionBuilder}}),Object.defineProperty(e,"DenseUnionBuilder",{enumerable:!0,get:function(){return h.DenseUnionBuilder}}),Object.defineProperty(e,"SparseUnionBuilder",{enumerable:!0,get:function(){return h.SparseUnionBuilder}}),Object.defineProperty(e,"Utf8Builder",{enumerable:!0,get:function(){return h.Utf8Builder}})}(zB)),zB}(function(e,t){(function(i,s){e.exports=s(Uye())})(dne,function(n){return(()=>{var i={2190:c=>{c.exports=function(f,u,r){if(f.filter)return f.filter(u,r);if(f==null)throw new TypeError;if(typeof u!="function")throw new TypeError;for(var h=[],p=0;p<f.length;p++)if(d.call(f,p)){var _=f[p];u.call(r,_,p,f)&&h.push(_)}return h};var d=Object.prototype.hasOwnProperty},6314:(c,d,f)=>{var u=f(2190);c.exports=function(){return u(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(h){return typeof f.g[h]=="function"})}},7123:(c,d,f)=>{f.r(d),f.d(d,{DbCon:()=>Ee,default:()=>ye,Client:()=>m.Client,Processor:()=>m.Processor});var u=f(6729),r=f.n(u),h=f(2003),p=f(9539),_=f.n(p),l=f(2818),b=f(2607),m=f(4221),E=f(9262),B=f(5141),I=f(2033),M={};for(const X in l)["default","DbCon","Client","Processor"].indexOf(X)<0&&(M[X]=()=>l[X]);f.d(d,M);var k=f(4494),M={};for(const X in k)["default","DbCon","Client","Processor"].indexOf(X)<0&&(M[X]=()=>k[X]);f.d(d,M);var F=f(1396),M={};for(const X in F)["default","DbCon","Client","Processor"].indexOf(X)<0&&(M[X]=()=>F[X]);f.d(d,M);var M={};for(const X in b)["default","DbCon","Client","Processor"].indexOf(X)<0&&(M[X]=()=>b[X]);f.d(d,M);var x=f(3962),M={};for(const X in x)["default","DbCon","Client","Processor"].indexOf(X)<0&&(M[X]=()=>x[X]);f.d(d,M);var R=f(8764).Buffer;function P(X,Y){var U=Object.keys(X);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(X);Y&&(J=J.filter(function(K){return Object.getOwnPropertyDescriptor(X,K).enumerable})),U.push.apply(U,J)}return U}function C(X){for(var Y=1;Y<arguments.length;Y++){var U=arguments[Y]!=null?arguments[Y]:{};Y%2?P(Object(U),!0).forEach(function(J){se(X,J,U[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(U)):P(Object(U)).forEach(function(J){Object.defineProperty(X,J,Object.getOwnPropertyDescriptor(U,J))})}return X}function D(X){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(U){return typeof U}:D=function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},D(X)}function j(X,Y){return z(X)||G(X,Y)||W(X,Y)||$()}function $(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W(X,Y){if(X){if(typeof X=="string")return H(X,Y);var U=Object.prototype.toString.call(X).slice(8,-1);if(U==="Object"&&X.constructor&&(U=X.constructor.name),U==="Map"||U==="Set")return Array.from(X);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return H(X,Y)}}function H(X,Y){(Y==null||Y>X.length)&&(Y=X.length);for(var U=0,J=new Array(Y);U<Y;U++)J[U]=X[U];return J}function G(X,Y){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(X)))){var U=[],J=!0,K=!1,Z=void 0;try{for(var Q=X[Symbol.iterator](),fe;!(J=(fe=Q.next()).done)&&(U.push(fe.value),!(Y&&U.length===Y));J=!0);}catch(ee){K=!0,Z=ee}finally{try{!J&&Q.return!=null&&Q.return()}finally{if(K)throw Z}}return U}}function z(X){if(Array.isArray(X))return X}function q(X,Y){if(!(X instanceof Y))throw new TypeError("Cannot call a class as a function")}function ie(X,Y){for(var U=0;U<Y.length;U++){var J=Y[U];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(X,J.key,J)}}function ce(X,Y,U){return Y&&ie(X.prototype,Y),X}function se(X,Y,U){return Y in X?Object.defineProperty(X,Y,{value:U,enumerable:!0,configurable:!0,writable:!0}):X[Y]=U,X}var Ie=3;function he(X){return Array.isArray(X)?X:[X]}function Me(X,Y,U){var J=this;E.XHRConnection.call(this,X,Y,U),U.headers["Content-Type"]==="application/vnd.apache.thrift.binary"&&(this.flush=function(){if(J.url===void 0||J.url==="")return J.send_buf;var K=J.getXmlHttpRequestObject();K.responseType="arraybuffer",K.onreadystatechange=function(){K.readyState===4&&K.status===200&&J.setRecvBuffer(K.response)},K.open("POST",J.url,!0),Object.keys(J.headers).forEach(function(Z){K.setRequestHeader(Z,J.headers[Z])}),K.send(J.send_buf)})}_().inherits(Me,E.XHRConnection),Me.prototype.getXmlHttpRequestObject=function(){var X=E.XHRConnection.prototype.getXmlHttpRequestObject.call(this);return X.withCredentials=Me.withCredentials,X};function Ue(){for(var X=arguments.length,Y=new Array(X),U=0;U<X;U++)Y[U]=arguments[U];E.TJSONProtocol.apply(this,Y)}_().inherits(Ue,E.TJSONProtocol),Ue.prototype.writeString=function(X){return X instanceof R||(X=String(X)),E.TJSONProtocol.prototype.writeString.call(this,X)},Ue.prototype.readI64=function(){var X=E.TJSONProtocol.prototype.readI64.call(this);return X.toNumber(!0)},Ue.prototype.readBinary=function(){return E.TJSONProtocol.prototype.readString.call(this)};function _e(){for(var X=arguments.length,Y=new Array(X),U=0;U<X;U++)Y[U]=arguments[U];E.TBinaryProtocol.apply(this,Y)}_().inherits(_e,E.TBinaryProtocol),_e.prototype.writeString=function(X){return X instanceof R||(X=String(X)),E.TBinaryProtocol.prototype.writeString.call(this,X)},_e.prototype.readI64=function(){var X=E.TBinaryProtocol.prototype.readI64.call(this);return X.toNumber(!0)},_e.prototype.readBinary=function(){return E.TBinaryProtocol.prototype.readBinary.call(this).toString("base64")};function ke(X,Y){var U=new URL(X),J=U.protocol,K=U.hostname,Z=U.port;Z===""&&(Z=J==="https:"?"443":"80");var Q=null;{var fe=new Me(K,Z,{transport:E.TBufferedTransport,protocol:Y?_e:Ue,path:"/",headers:{"Content-Type":"application/vnd.apache.thrift.".concat(Y?"binary":"json")},https:J==="https:"});fe.on("error",console.error),Q=(0,E.createXHRClient)(m,fe)}return Q}var Ee=function(){function X(){var Y=this;return q(this,X),se(this,"updateQueryTimes",function(U,J,K,Z){Y.queryTimes[J]=Z}),se(this,"events",new(r())),se(this,"EVENT_NAMES",{ERROR:"error",METHOD_CALLED:"method-called"}),se(this,"handleErrors",function(U){return function(){for(var J=arguments.length,K=new Array(J),Z=0;Z<J;Z++)K[Z]=arguments[Z];return U.apply(Y,K).catch(function(Q){throw Y.events.emit(Y.EVENT_NAMES.ERROR,Q),Q})}}),se(this,"callbackify",function(U,J){return function(){for(var K=null,Z=arguments.length,Q=new Array(Z),fe=0;fe<Z;fe++)Q[fe]=arguments[fe];Q.length===J+1&&(K=Q.pop());var ee=Y[U].apply(Y,Q);return K&&ee.catch(function(le){return K(le)}).then(function(le){return K(null,le)}),ee}}),se(this,"overSingleClient","SINGLE_CLIENT"),se(this,"overAllClients","ALL_CLIENTS"),se(this,"wrapThrift",function(U,J,K){return function(){if(Y._sessionId){for(var Z=arguments.length,Q=new Array(Z),fe=0;fe<Z;fe++)Q[fe]=arguments[fe];var ee=K(Q);return Y.events.emit(Y.EVENT_NAMES.METHOD_CALLED,U),J===Y.overSingleClient?Y._client[0][U].apply(Y._client[0],[Y._sessionId[0]].concat(ee)):Promise.all(Y._client.map(function(le,Ne){return le[U].apply(le,[Y._sessionId[Ne]].concat(ee))}))}else return Promise.reject(new Error("You are not connected to a server. Try running the connect method first."))}}),se(this,"connect",this.callbackify("connectAsync",0)),se(this,"disconnectAsync",this.handleErrors(function(){return Promise.all(Y._client.map(function(U,J){return U.disconnect(Y._sessionId[J]).catch(function(K){if(K&&!Y.isTimeoutError(K))throw K})})).then(function(){return Y._sessionId=null,Y._client=null,Y._numConnections=0,Y.serverPingTimes=null,Y})})),se(this,"disconnect",this.callbackify("disconnectAsync",0)),se(this,"getStatusAsync",this.handleErrors(this.wrapThrift("get_status",this.overSingleClient,function(U){return U}))),se(this,"getStatus",this.callbackify("getStatusAsync",0)),se(this,"getHardwareInfoAsync",this.handleErrors(this.wrapThrift("get_hardware_info",this.overSingleClient,function(U){return U}))),se(this,"getHardwareInfo",this.callbackify("getHardwareInfoAsync",0)),se(this,"getFirstGeoFileInArchiveAsync",this.handleErrors(this.wrapThrift("get_first_geo_file_in_archive",this.overSingleClient,function(U){return U}))),se(this,"getFilesInArchiveAsync",this.handleErrors(this.wrapThrift("get_all_files_in_archive",this.overSingleClient,function(U){return U}))),se(this,"getUsersAsync",this.handleErrors(this.wrapThrift("get_users",this.overSingleClient,function(U){return U}))),se(this,"importTableStatusAsync",this.handleErrors(this.wrapThrift("import_table_status",this.overSingleClient,function(U){return U}))),se(this,"getRolesAsync",this.handleErrors(this.wrapThrift("get_roles",this.overSingleClient,function(U){return U}))),se(this,"getDashboardsAsync",this.handleErrors(this.wrapThrift("get_dashboards",this.overSingleClient,function(U){return U}))),se(this,"getDashboardAsync",this.handleErrors(this.wrapThrift("get_dashboard",this.overSingleClient,function(U){return U}))),se(this,"createDashboardAsync",this.handleErrors(this.wrapThrift("create_dashboard",this.overAllClients,function(U){return U}))),se(this,"replaceDashboardAsync",this.handleErrors(this.wrapThrift("replace_dashboard",this.overAllClients,function(U){return U}))),se(this,"deleteDashboardAsync",this.handleErrors(this.wrapThrift("delete_dashboard",this.overAllClients,function(U){return U}))),se(this,"deleteDashboardsAsync",this.handleErrors(this.wrapThrift("delete_dashboards",this.overAllClients,function(U){return U}))),se(this,"shareDashboardAsync",this.handleErrors(this.wrapThrift("share_dashboard",this.overAllClients,function(U){var J=j(U,4),K=J[0],Z=J[1],Q=J[2],fe=J[3];return[K,Z,Q,new b.TDashboardPermissions(fe)]}))),se(this,"shareDashboardsAsync",this.handleErrors(this.wrapThrift("share_dashboards",this.overAllClients,function(U){var J=j(U,3),K=J[0],Z=J[1],Q=J[2];return[K,Z,new b.TDashboardPermissions(Q)]}))),se(this,"unshareDashboardAsync",this.handleErrors(this.wrapThrift("unshare_dashboard",this.overAllClients,function(U){var J=j(U,4),K=J[0],Z=J[1],Q=J[2],fe=J[3];return[K,Z,Q,new b.TDashboardPermissions(fe)]}))),se(this,"unshareDashboardsAsync",this.handleErrors(this.wrapThrift("unshare_dashboards",this.overAllClients,function(U){var J=j(U,3),K=J[0],Z=J[1],Q=J[2];return[K,Z,new b.TDashboardPermissions(Q)]}))),se(this,"getDashboardGranteesAsync",this.handleErrors(this.wrapThrift("get_dashboard_grantees",this.overSingleClient,function(U){return U}))),se(this,"getDbObjectsForGranteeAsync",this.handleErrors(this.wrapThrift("get_db_objects_for_grantee",this.overSingleClient,function(U){return U}))),se(this,"getDbObjectPrivsAsync",this.handleErrors(this.wrapThrift("get_db_object_privs",this.overSingleClient,function(U){var J=j(U,2),K=J[0],Z=J[1];return[K,b.TDBObjectType[Z]]}))),se(this,"getAllRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_roles_for_user",this.overSingleClient,function(U){return U}))),se(this,"getAllEffectiveRolesForUserAsync",this.handleErrors(this.wrapThrift("get_all_effective_roles_for_user",this.overSingleClient,function(U){return U}))),se(this,"hasObjectPrivilegesAsync",this.handleErrors(this.wrapThrift("has_object_privilege",this.overSingleClient,function(U){return U}))),se(this,"hasDbPrivilegesAsync",function(U,J,K){return Y.hasObjectPrivilegesAsync(U,J,b.TDBObjectType.DatabaseDBObjectType,new b.TDBObjectPermissions({database_permissions_:new b.TDatabasePermissions(K)}))}),se(this,"getSessionInfoAsync",this.handleErrors(this.wrapThrift("get_session_info",this.overSingleClient,function(U){return U}))),se(this,"createCustomExpressionAsync",this.handleErrors(this.wrapThrift("create_custom_expression",this.overSingleClient,function(U){return U}))),se(this,"getCustomExpressionsAsync",this.handleErrors(this.wrapThrift("get_custom_expressions",this.overSingleClient,function(U){return U}))),se(this,"updateCustomExpressionAsync",this.handleErrors(this.wrapThrift("update_custom_expression",this.overSingleClient,function(U){return U}))),se(this,"deleteCustomExpressionsAsync",this.handleErrors(this.wrapThrift("delete_custom_expressions",this.overSingleClient,function(U){return U}))),se(this,"detectColumnTypesAsync",this.handleErrors(function(U,J){var K=Y.wrapThrift("detect_column_types",Y.overSingleClient,function(){return[U,I.Dq(J)]});return K().then(function(Z){return Y.importerRowDesc=Z.row_set.row_desc,Z})})),se(this,"queryAsync",this.handleErrors(function(U,J){var K=!0,Z=!1,Q=null,fe=!1,ee=-1,le=(Y._nonce++).toString();J&&(K=J.hasOwnProperty("columnarResults")?J.columnarResults:K,Z=J.hasOwnProperty("eliminateNullRows")?J.eliminateNullRows:Z,Q=J.hasOwnProperty("queryId")?J.queryId:Q,fe=J.hasOwnProperty("returnTiming")?J.returnTiming:fe,ee=J.hasOwnProperty("limit")?J.limit:ee,le=J.hasOwnProperty("logValues")?D(J.logValues)==="object"?JSON.stringify(J.logValues):J.logValues:le);var Ne=Q in Y.queryTimes?Y.queryTimes[Q]:Y.DEFAULT_QUERY_TIME,He=0,ft={returnTiming:fe,eliminateNullRows:Z,query:U,queryId:Q,conId:He,estimatedQueryTime:Ne,startTime:Date.now()},de=-1,ve=Y.wrapThrift("sql_execute",Y.overSingleClient,function(re){return re}),Ce=function re(){return ve(U,K,le,ee,de).catch(function(rt){if(rt.name==="NetworkError"){if(Y.removeConnection(0),Y._numConnections===0)throw rt.msg="No remaining database connections",rt;return re()}throw rt})};return Y.processResults(ft,Ce())})),se(this,"query",this.callbackify("queryAsync",2)),se(this,"queryDFAsync",this.handleErrors(function(U,J){var K=0,Z=-1,Q=Y.wrapThrift("sql_execute_df",Y.overSingleClient,function(){return[U,l.TDeviceType.CPU,K,Z,b.TArrowTransport.WIRE]});return Q().then(function(fe){Y._logging&&console.log(U,"on Server",0,"- Execution Time:",fe.execution_time_ms,"ms");var ee=R.from(fe.df_buffer,"base64"),le=(0,h.tableFromIPC)(ee);return J&&J.returnTiming&&(le={results:le,timing:{execution_time_ms:fe.execution_time_ms}}),le})})),se(this,"queryDF",this.callbackify("queryDFAsync",2)),se(this,"validateQuery",this.handleErrors(function(U){var J=Y.wrapThrift("sql_validate",Y.overSingleClient,function(K){return K});return J(U).then(function(K){var Z=K.reduce(function(Q,fe){return Q[fe.col_name]=fe,Q},{});return Y.convertFromThriftTypes(Z)})})),se(this,"getTablesAsync",this.handleErrors(function(){var U=Y.wrapThrift("get_tables",Y.overSingleClient,function(J){return J});return U().then(function(J){return J.map(function(K){return{name:K,label:"obs"}})})})),se(this,"getTables",this.callbackify("getTablesAsync",0)),se(this,"getTablesWithMetaAsync",this.handleErrors(function(){var U=Y.wrapThrift("get_tables_meta",Y.overSingleClient,function(J){return J});return U().then(function(J){return J.map(function(K){return{name:K.table_name,num_cols:Number(K.num_cols.toString()),col_datum_types:K.col_types.map(function(Z){return Y._datumEnum[Z.type]}),is_view:K.is_view,is_replicated:K.is_replicated,shard_count:Number(K.shard_count.toString()),max_rows:isFinite(K.max_rows)?Number(K.max_rows.toString()):-1}})})})),se(this,"getTablesWithMeta",this.callbackify("getTablesWithMetaAsync",0)),se(this,"getTablesMetaAsync",this.handleErrors(this.wrapThrift("get_tables_meta",this.overSingleClient,function(U){return U}))),se(this,"getTablesMeta",this.callbackify("getTablesMetaAsync",0)),se(this,"getTableEpochByNameAsync",this.handleErrors(this.wrapThrift("get_table_epoch_by_name",this.overSingleClient,function(U){return U}))),se(this,"getTableEpochByName",this.callbackify("getTableEpochByNameAsync",0)),se(this,"getTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_table_function_names",this.overSingleClient,function(U){return U}))),se(this,"getTableFunctionNames",this.callbackify("getTableFunctionNamesAsync",0)),se(this,"getRuntimeTableFunctionNamesAsync",this.handleErrors(this.wrapThrift("get_runtime_table_function_names",this.overSingleClient,function(U){return U}))),se(this,"getRuntimeTableFunctionNames",this.callbackify("getRuntimeTableFunctionNamesAsync",0)),se(this,"getTableFunctionDetailsAsync",this.handleErrors(this.wrapThrift("get_table_function_details",this.overSingleClient,function(U){return U}))),se(this,"getTableFunctionDetails",this.callbackify("getTableFunctionDetailsAsync",0)),se(this,"getCompletionHintsAsync",this.handleErrors(this.wrapThrift("get_completion_hints",this.overSingleClient,function(U){var J=j(U,2),K=J[0],Z=J[1].cursor;return[K,Z]}))),se(this,"getCompletionHints",this.callbackify("getCompletionHintsAsync",2)),se(this,"buildTFileTypeMap",function(){for(var U in b.TFileType)b.TFileType.hasOwnProperty(U)&&(Y.TFileTypeMap[b.TFileType[U]]=U)}),se(this,"buildTImportHeaderRowMap",function(){for(var U in b.TImportHeaderRow)b.TImportHeaderRow.hasOwnProperty(U)&&(Y.TImportHeaderRowMap[b.TImportHeaderRow[U]]=U)}),se(this,"buildTEncodingTypeMap",function(){for(var U in l.TEncodingType)l.TEncodingType.hasOwnProperty(U)&&(Y.TEncodingTypeMap[l.TEncodingType[U]]=U)}),se(this,"buildTRasterPointTypeMap",function(){for(var U in b.TRasterPointType)b.TRasterPointType.hasOwnProperty(U)&&(Y.TRasterPointTypeMap[b.TRasterPointType[U]]=U)}),se(this,"buildTRasterPointTransformMap",function(){for(var U in b.TRasterPointTransform)b.TRasterPointTransform.hasOwnProperty(U)&&(Y.TRasterPointTransformMap[b.TRasterPointTransform[U]]=U)}),se(this,"buildTSourceTypeMap",function(){for(var U in b.TSourceType)b.TSourceType.hasOwnProperty(U)&&(Y.TSourceTypeMap[b.TSourceType[U]]=U)}),se(this,"getFieldsAsync",this.handleErrors(function(U){var J=Y.wrapThrift("get_table_details",Y.overSingleClient,function(K){return K});return J(U).then(function(K){if(K){var Z=K.row_desc.reduce(function(Q,fe){return Q[fe.col_name]=fe,Q},{});return C(C({},K),{},{columns:Y.convertFromThriftTypes(Z)})}else throw new Error("Table (".concat(U,") not found"))})})),se(this,"getFields",this.callbackify("getFieldsAsync",1)),se(this,"createTableAsync",this.handleErrors(this.wrapThrift("create_table",this.overAllClients,function(U){var J=j(U,3),K=J[0],Z=J[1],Q=J[2];return[K,I.HP(Z,Y.importerRowDesc),Q]}))),se(this,"createTable",this.callbackify("createTableAsync",4)),se(this,"importTableAsync",this.handleErrors(this.wrapThrift("import_table",this.overAllClients,function(U){var J=j(U,3),K=J[0],Z=J[1],Q=J[2];return[K,Z,I.Dq(Q)]}))),se(this,"importTableGeoAsync",this.handleErrors(this.wrapThrift("import_geo_table",this.overAllClients,function(U){var J=j(U,4),K=J[0],Z=J[1],Q=J[2],fe=J[3];return[K,Z,I.Dq(Q),I.HP(fe,Y.importerRowDesc),new b.TCreateParams]}))),se(this,"renderVegaAsync",this.handleErrors(function(U,J,K){var Z=null,Q=Ie;K&&(Z=K.hasOwnProperty("queryId")?K.queryId:Z,Q=K.hasOwnProperty("compressionLevel")?K.compressionLevel:Q);var fe=Z in Y.queryTimes?Y.queryTimes[Z]:Y.DEFAULT_QUERY_TIME,ee=(Y._nonce++).toString();K&&(ee=K.hasOwnProperty("logValues")?D(K.logValues)==="object"?JSON.stringify(K.logValues):K.logValues:ee);var le=0;Y._lastRenderCon=le;var Ne={isImage:!0,query:"render: ".concat(J),queryId:Z,conId:le,estimatedQueryTime:fe},He=Y.wrapThrift("render_vega",Y.overSingleClient,function(ft){return ft});return Y.processResults(Ne,He(U,J,Q,ee))})),se(this,"renderVega",this.callbackify("renderVegaAsync",3)),se(this,"getResultRowForPixelAsync",this.handleErrors(function(U,J,K){var Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:2;J instanceof b.TPixel||(J=new b.TPixel(J));var Q=!0,fe=(Y._nonce++).toString();return Y._client[Y._lastRenderCon].get_result_row_for_pixel(Y._sessionId[Y._lastRenderCon],U,J,K,Q,Z,fe).then(function(ee){ee=Array.isArray(ee)?ee.pixel_rows:[ee];for(var le={isImage:!1,eliminateNullRows:!1,query:"pixel request",queryId:-2},Ne=(0,B.Z)(Y._logging,Y.updateQueryTimes),He=ee.length,ft=0;ft<He;ft++)ee[ft].row_set=Ne(le,Y._datumEnum,ee[ft]);return ee})})),se(this,"getResultRowForPixel",this.callbackify("getResultRowForPixelAsync",4)),this._useBinaryProtocol=!1,this._host=null,this._user=null,this._password=null,this._port=null,this._dbName=null,this._client=null,this._sessionId=null,this._protocol=null,this._disableAutoReconnect=!1,this._datumEnum={},this.TFileTypeMap={},this.TEncodingTypeMap={},this.TImportHeaderRowMap={},this.TRasterPointTypeMap={},this.TRasterPointTransformMap={},this.TSourceTypeMap={},this._logging=!1,this._platform="heavydb",this._nonce=0,this._balanceStrategy="adaptive",this._numConnections=0,this._lastRenderCon=0,this.queryTimes={},this.serverQueueTimes=null,this.serverPingTimes=null,this.pingCount=null,this.DEFAULT_QUERY_TIME=50,this.NUM_PINGS_PER_SERVER=4,this.importerRowDesc=null,this.invertDatumTypes(),this.buildTFileTypeMap(),this.buildTEncodingTypeMap(),this.buildTImportHeaderRowMap(),this.buildTRasterPointTypeMap(),this.buildTRasterPointTransformMap(),this.buildTSourceTypeMap(),this.processResults=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=arguments.length>1?arguments[1]:void 0;return J.catch(function(K){throw Y._logging&&U.query&&console.error(U.query,`
`,K),K}).then(function(K){var Z=(0,B.Z)(Y._logging,Y.updateQueryTimes),Q=Z(U,Y._datumEnum,K);return Q})},this}return ce(X,[{key:"removeConnection",value:function(U){if(U<0||U>=this.numConnections){var J={msg:"Remove connection id invalid"};throw J}this._client.splice(U,1),this._sessionId.splice(U,1),this._numConnections--}},{key:"xhrWithCredentials",value:function(U){Me.withCredentials=!!U}},{key:"initClients",value:function(){var U=Array.isArray(this._host)&&Array.isArray(this._port)&&Array.isArray(this._dbName);if(!U)throw new Error("Host, port, and dbName must be arrays.");if(this._client=[],this._sessionId=[],this._host[0]){if(!this._port[0])throw new Error("Please enter a port.")}else throw new Error("Please enter a host name.");var J=this._host.length;if(J<1)throw new Error("Must have at least one server to connect to.");if(J!==this._port.length)throw new Error("Array connection parameters must be of equal length.");this._protocol||(this._protocol=this._host.map(function(){return window.location.protocol.replace(":","")}));for(var K=this.getEndpoints(),Z=[],Q=0;Q<J;Q++){var fe=ke(K[Q],this._useBinaryProtocol);Z.push(fe)}return this._client=Z,this._numConnections=this._client.length,this}},{key:"connectAsync",value:function(){var U=this;if(!Array.isArray(this._user)||!Array.isArray(this._password))return Promise.reject("Username and password must be arrays.");if(this._dbName[0])if(this._user[0]){if(!this._password[0])return Promise.reject("Please enter a password.")}else return Promise.reject("Please enter a username.");else return Promise.reject("Please enter a database.");var J=this._host.length;if(J<1)return Promise.reject("Must have at least one server to connect to.");if(J!==this._port.length||J!==this._user.length||J!==this._password.length||J!==this._dbName.length)return Promise.reject("Array connection parameters must be of equal length.");var K=[];return this.initClients(),K=this._client,this._client=[],Promise.all(K.map(function(Z,Q){return Z.connect(U._user[Q],U._password[Q],U._dbName[Q]).then(function(fe){return U._client.push(Z),U._sessionId.push(fe),null})})).then(function(){return U})}},{key:"convertFromThriftTypes",value:function(U){var J=[];for(var K in U)U.hasOwnProperty(K)&&J.push({name:K,type:this._datumEnum[U[K].col_type.type],precision:U[K].col_type.precision,is_array:U[K].col_type.is_array,is_dict:U[K].col_type.encoding===l.TEncodingType.DICT});return J}},{key:"invertDatumTypes",value:function(){var U=l.TDatumType;for(var J in U)U.hasOwnProperty(J)&&(this._datumEnum[U[J]]=J)}},{key:"importTableAsyncWrapper",value:function(U){return U?this.importTableGeoAsync.bind(this):this.importTableAsync.bind(this)}},{key:"importTable",value:function(U,J,K,Z,Q,fe){if(Q){var ee=this.callbackify("importTableGeoAsync",4);return ee(U,J,K,Z,fe)}else{var le=this.callbackify("importTableAsync",3);return le(U,J,K,fe)}}},{key:"sessionId",value:function(U){return arguments.length?(this._sessionId=he(U),this):this._sessionId}},{key:"useBinaryProtocol",value:function(U){return arguments.length?(this._useBinaryProtocol=!!U,this):this._useBinaryProtocol}},{key:"host",value:function(U){return arguments.length?(this._host=he(U),this):this._host}},{key:"port",value:function(U){return arguments.length?(this._port=he(U),this):this._port}},{key:"user",value:function(U){return arguments.length?(this._user=he(U),this):this._user}},{key:"password",value:function(U){return arguments.length?(this._password=he(U),this):this._password}},{key:"dbName",value:function(U){return arguments.length?(this._dbName=he(U),this):this._dbName}},{key:"logging",value:function(U){if(typeof U>"u")return this._logging;if(typeof U!="boolean")return"logging can only be set with boolean values";this._logging=U;var J=U?"enabled":"disabled";return"SQL logging is now ".concat(J)}},{key:"platform",value:function(U){return arguments.length?(this._platform=U,this):this._platform}},{key:"numConnections",value:function(){return this._numConnections}},{key:"protocol",value:function(U){return arguments.length?(this._protocol=he(U),this):this._protocol}},{key:"disableAutoReconnect",value:function(U){return arguments.length?(this._disableAutoReconnect=U,this):this._disableAutoReconnect}},{key:"getEndpoints",value:function(){var U=this;return this._host.map(function(J,K){return"".concat(U._protocol[K],"://").concat(J,":").concat(U._port[K])})}},{key:"setLicenseKey",value:function(U,J){var K=J.protocol,Z=J.host,Q=J.port,fe=Array.isArray(this._client)&&this._client[0],ee=this._sessionId&&this._sessionId[0];if(!fe){var le="".concat(K,"://").concat(Z,":").concat(Q);fe=ke(le,this._useBinaryProtocol),ee=""}return fe.set_license_key(ee,U,this._nonce++)}},{key:"getLicenseClaims",value:function(U){var J=U.protocol,K=U.host,Z=U.port,Q=Array.isArray(this._client)&&this._client[0],fe=this._sessionId&&this._sessionId[0];if(!Q){var ee="".concat(J,"://").concat(K,":").concat(Z);Q=ke(ee,this._useBinaryProtocol),fe=""}return Q.get_license_claims(fe,this._nonce++)}},{key:"isTimeoutError",value:function(U){return U instanceof b.TDBException&&(String(U.error_msg).indexOf("Session not valid.")!==-1||String(U.error_msg).indexOf("User should re-authenticate.")!==-1)}}]),X}();const ye=Ee},2033:(c,d,f)=>{f.d(d,{Dq:()=>r,HP:()=>h,RK:()=>p,kS:()=>_});var u=f(2607),r=function(b){return new u.TCopyParams(b)},h=function(b,m){return b.forEach(function(E,B){m[B].col_name=E.clean_col_name,m[B].col_type.encoding=E.col_type.encoding,m[B].col_type.precision=E.col_type.precision,m[B].col_type.comp_param=E.col_type.comp_param,m[B].col_type.scale=E.col_type.scale,m[B].col_type.type=E.col_type.type}),m};function p(l,b){var m=Math.pow(10,b-3),E=l/m;return E}function _(l){return l.toNumber?!!l.toNumber(!0):!!l}},5141:(c,d,f)=>{f.d(d,{Z:()=>p});var u=f(2033);function r(_,l,b){var m={fields:[],results:[]},E=_.row_desc.length,B=typeof _.columns[0]>"u"?0:_.columns[0].nulls.length;m.fields=_.row_desc.map(function(z){return{name:z.col_name,type:b[z.col_type.type],is_array:z.col_type.is_array}});for(var I=0;I<B;I++){if(l){for(var k=!1,F=0;F<E;F++)if(_.columns[F].nulls[I]){k=!0;break}if(k)continue}for(var x={},M=0;M<E;M++){var R=m.fields[M].name,P=m.fields[M].type,C=m.fields[M].is_array,D=_.columns[M].nulls[I],j=_.row_desc[M].col_type.precision;if(D){x[R]=null;continue}if(C){x[R]=[];for(var $=_.columns[M].data.arr_col[I].nulls.length,W=0;W<$;W++){if(_.columns[M].data.arr_col[I].nulls[W]){x[R].push("NULL");continue}switch(P){case"BOOL":x[R].push((0,u.kS)(_.columns[M].data.arr_col[I].data.int_col[W]));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":x[R].push(_.columns[M].data.arr_col[I].data.int_col[W]);break;case"FLOAT":case"DOUBLE":case"DECIMAL":x[R].push(_.columns[M].data.arr_col[I].data.real_col[W]);break;case"STR":x[R].push(_.columns[M].data.arr_col[I].data.str_col[W]);break;case"TIME":case"TIMESTAMP":case"DATE":var H=(0,u.RK)(_.columns[M].data.int_col[I],j);x[R].push(H);break;default:throw new Error("Unrecognized array field type: ".concat(P))}}}else switch(P){case"BOOL":x[R]=(0,u.kS)(_.columns[M].data.int_col[I]);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":x[R]=_.columns[M].data.int_col[I];break;case"FLOAT":case"DOUBLE":case"DECIMAL":x[R]=_.columns[M].data.real_col[I];break;case"STR":x[R]=_.columns[M].data.str_col[I];break;case"TIME":case"TIMESTAMP":case"DATE":var G=(0,u.RK)(_.columns[M].data.int_col[I],j);x[R]=new Date(G);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":x[R]=_.columns[M].data.str_col[I];break;default:throw new Error("Unrecognized field type: ".concat(P))}}m.results.push(x)}return m}function h(_,l,b){var m=_.row_desc.length,E={fields:[],results:[]};E.fields=_.row_desc.map(function(q){return{name:q.col_name,type:b[q.col_type.type],is_array:q.col_type.is_array}}),E.results=[];var B=0;typeof _.rows<"u"&&_.rows!==null&&(B=_.rows.length);for(var I=0;I<B;I++){if(l){for(var k=!1,F=0;F<m;F++)if(_.rows[I].columns[F].is_null){k=!0;break}if(k)continue}for(var x={},M=0;M<m;M++){var R=E.fields[M].name,P=E.fields[M].type,C=E.fields[M].is_array,D=_.row_desc[M].col_type.precision;if(C){if(_.rows[I].cols[M].is_null){x[R]="NULL";continue}x[R]=[];for(var j=_.rows[I].cols[M].val.arr_val.length,$=0;$<j;$++){var W=_.rows[I].cols[M].val.arr_val[$];if(W.is_null){x[R].push("NULL");continue}switch(P){case"BOOL":x[R].push((0,u.kS)(W.val.int_val));break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":x[R].push(W.val.int_val);break;case"FLOAT":case"DOUBLE":case"DECIMAL":x[R].push(W.val.real_val);break;case"STR":x[R].push(W.val.str_val);break;case"TIME":case"TIMESTAMP":case"DATE":var H=(0,u.RK)(W.val.int_val,D);x[R].push(H);break;default:throw new Error("Unrecognized array field type: ".concat(P))}}}else{var G=_.rows[I].cols[M];if(G.is_null){x[R]="NULL";continue}switch(P){case"BOOL":x[R]=(0,u.kS)(G.val.int_val);break;case"SMALLINT":case"INT":case"BIGINT":case"TINYINT":x[R]=G.val.int_val;break;case"FLOAT":case"DOUBLE":case"DECIMAL":x[R]=G.val.real_val;break;case"STR":x[R]=G.val.str_val;break;case"TIME":case"TIMESTAMP":case"DATE":var z=(0,u.RK)(G.val.int_val,D);x[R]=new Date(z);break;case"POINT":case"LINESTRING":case"POLYGON":case"MULTIPOLYGON":x[R]=G.val.str_val;break;default:throw new Error("Unrecognized field type: ".concat(P))}}}E.results.push(x)}return E}function p(_,l){return function(b,m,E){var B=!1,I=!1,k=null,F=null,x=null,M=null;if(typeof b<"u"&&(B=b.isImage?b.isImage:!1,I=b.eliminateNullRows?b.eliminateNullRows:!1,k=b.query?b.query:null,F=b.queryId?b.queryId:null,x=typeof b.conId>"u"?null:b.conId,M=typeof b.estimatedQueryTime>"u"?null:b.estimatedQueryTime),E.execution_time_ms&&x!==null&&M!==null&&l(x,F,M,E.execution_time_ms),_&&E.execution_time_ms&&console.log(k,"on Server",x,"- Execution Time:",E.execution_time_ms,"ms, Total Time:",E.total_time_ms,"ms, Real Time:",b.startTime?Date.now()-b.startTime:void 0,"ms"),B)return E;var R=null;if(!E.row_set)throw new Error("No result to process");return E.row_set.is_columnar?R=r(E.row_set,I,m):R=h(E.row_set,I,m),R.timing={execution_time_ms:E.execution_time_ms,total_time_ms:E.total_time_ms},b.returnTiming?R:R.results}}},9742:(c,d)=>{d.byteLength=b,d.toByteArray=E,d.fromByteArray=k;for(var f=[],u=[],r=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,_=h.length;p<_;++p)f[p]=h[p],u[h.charCodeAt(p)]=p;u[45]=62,u[95]=63;function l(F){var x=F.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=F.indexOf("=");M===-1&&(M=x);var R=M===x?0:4-M%4;return[M,R]}function b(F){var x=l(F),M=x[0],R=x[1];return(M+R)*3/4-R}function m(F,x,M){return(x+M)*3/4-M}function E(F){var x,M=l(F),R=M[0],P=M[1],C=new r(m(F,R,P)),D=0,j=P>0?R-4:R,$;for($=0;$<j;$+=4)x=u[F.charCodeAt($)]<<18|u[F.charCodeAt($+1)]<<12|u[F.charCodeAt($+2)]<<6|u[F.charCodeAt($+3)],C[D++]=x>>16&255,C[D++]=x>>8&255,C[D++]=x&255;return P===2&&(x=u[F.charCodeAt($)]<<2|u[F.charCodeAt($+1)]>>4,C[D++]=x&255),P===1&&(x=u[F.charCodeAt($)]<<10|u[F.charCodeAt($+1)]<<4|u[F.charCodeAt($+2)]>>2,C[D++]=x>>8&255,C[D++]=x&255),C}function B(F){return f[F>>18&63]+f[F>>12&63]+f[F>>6&63]+f[F&63]}function I(F,x,M){for(var R,P=[],C=x;C<M;C+=3)R=(F[C]<<16&16711680)+(F[C+1]<<8&65280)+(F[C+2]&255),P.push(B(R));return P.join("")}function k(F){for(var x,M=F.length,R=M%3,P=[],C=16383,D=0,j=M-R;D<j;D+=C)P.push(I(F,D,D+C>j?j:D+C));return R===1?(x=F[M-1],P.push(f[x>>2]+f[x<<4&63]+"==")):R===2&&(x=(F[M-2]<<8)+F[M-1],P.push(f[x>>10]+f[x>>4&63]+f[x<<2&63]+"=")),P.join("")}},3818:(c,d)=>{Object.defineProperty(d,"__esModule",{value:!0});var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u=typeof window<"u"&&typeof window.document<"u",r=(typeof self>"u"?"undefined":f(self))==="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",h=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,p=function(){return typeof window<"u"&&window.name==="nodejs"||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")};d.isBrowser=u,d.isWebWorker=r,d.isNode=h,d.isJsDom=p},8764:(c,d,f)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const u=f(9742),r=f(645),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.Buffer=b,d.SlowBuffer=C,d.INSPECT_MAX_BYTES=50;const p=2147483647;d.kMaxLength=p,b.TYPED_ARRAY_SUPPORT=_(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function _(){try{const L=new Uint8Array(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,Uint8Array.prototype),Object.setPrototypeOf(L,O),L.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function l(L){if(L>p)throw new RangeError('The value "'+L+'" is invalid for option "size"');const O=new Uint8Array(L);return Object.setPrototypeOf(O,b.prototype),O}function b(L,O,N){if(typeof L=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(L)}return m(L,O,N)}b.poolSize=8192;function m(L,O,N){if(typeof L=="string")return k(L,O);if(ArrayBuffer.isView(L))return x(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if($t(L,ArrayBuffer)||L&&$t(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($t(L,SharedArrayBuffer)||L&&$t(L.buffer,SharedArrayBuffer)))return M(L,O,N);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const V=L.valueOf&&L.valueOf();if(V!=null&&V!==L)return b.from(V,O,N);const te=R(L);if(te)return te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return b.from(L[Symbol.toPrimitive]("string"),O,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}b.from=function(L,O,N){return m(L,O,N)},Object.setPrototypeOf(b.prototype,Uint8Array.prototype),Object.setPrototypeOf(b,Uint8Array);function E(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function B(L,O,N){return E(L),L<=0?l(L):O!==void 0?typeof N=="string"?l(L).fill(O,N):l(L).fill(O):l(L)}b.alloc=function(L,O,N){return B(L,O,N)};function I(L){return E(L),l(L<0?0:P(L)|0)}b.allocUnsafe=function(L){return I(L)},b.allocUnsafeSlow=function(L){return I(L)};function k(L,O){if((typeof O!="string"||O==="")&&(O="utf8"),!b.isEncoding(O))throw new TypeError("Unknown encoding: "+O);const N=D(L,O)|0;let V=l(N);const te=V.write(L,O);return te!==N&&(V=V.slice(0,te)),V}function F(L){const O=L.length<0?0:P(L.length)|0,N=l(O);for(let V=0;V<O;V+=1)N[V]=L[V]&255;return N}function x(L){if($t(L,Uint8Array)){const O=new Uint8Array(L);return M(O.buffer,O.byteOffset,O.byteLength)}return F(L)}function M(L,O,N){if(O<0||L.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<O+(N||0))throw new RangeError('"length" is outside of buffer bounds');let V;return O===void 0&&N===void 0?V=new Uint8Array(L):N===void 0?V=new Uint8Array(L,O):V=new Uint8Array(L,O,N),Object.setPrototypeOf(V,b.prototype),V}function R(L){if(b.isBuffer(L)){const O=P(L.length)|0,N=l(O);return N.length===0||L.copy(N,0,0,O),N}if(L.length!==void 0)return typeof L.length!="number"||ds(L.length)?l(0):F(L);if(L.type==="Buffer"&&Array.isArray(L.data))return F(L.data)}function P(L){if(L>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return L|0}function C(L){return+L!=L&&(L=0),b.alloc(+L)}b.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==b.prototype},b.compare=function(O,N){if($t(O,Uint8Array)&&(O=b.from(O,O.offset,O.byteLength)),$t(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),!b.isBuffer(O)||!b.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===N)return 0;let V=O.length,te=N.length;for(let oe=0,ue=Math.min(V,te);oe<ue;++oe)if(O[oe]!==N[oe]){V=O[oe],te=N[oe];break}return V<te?-1:te<V?1:0},b.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(O,N){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return b.alloc(0);let V;if(N===void 0)for(N=0,V=0;V<O.length;++V)N+=O[V].length;const te=b.allocUnsafe(N);let oe=0;for(V=0;V<O.length;++V){let ue=O[V];if($t(ue,Uint8Array))oe+ue.length>te.length?(b.isBuffer(ue)||(ue=b.from(ue)),ue.copy(te,oe)):Uint8Array.prototype.set.call(te,ue,oe);else if(b.isBuffer(ue))ue.copy(te,oe);else throw new TypeError('"list" argument must be an Array of Buffers');oe+=ue.length}return te};function D(L,O){if(b.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||$t(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const N=L.length,V=arguments.length>2&&arguments[2]===!0;if(!V&&N===0)return 0;let te=!1;for(;;)switch(O){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return Ce(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return tt(L).length;default:if(te)return V?-1:Ce(L).length;O=(""+O).toLowerCase(),te=!0}}b.byteLength=D;function j(L,O,N){let V=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,O>>>=0,N<=O))return"";for(L||(L="utf8");;)switch(L){case"hex":return ke(this,O,N);case"utf8":case"utf-8":return Ie(this,O,N);case"ascii":return Ue(this,O,N);case"latin1":case"binary":return _e(this,O,N);case"base64":return se(this,O,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ee(this,O,N);default:if(V)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),V=!0}}b.prototype._isBuffer=!0;function $(L,O,N){const V=L[O];L[O]=L[N],L[N]=V}b.prototype.swap16=function(){const O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<O;N+=2)$(this,N,N+1);return this},b.prototype.swap32=function(){const O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<O;N+=4)$(this,N,N+3),$(this,N+1,N+2);return this},b.prototype.swap64=function(){const O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<O;N+=8)$(this,N,N+7),$(this,N+1,N+6),$(this,N+2,N+5),$(this,N+3,N+4);return this},b.prototype.toString=function(){const O=this.length;return O===0?"":arguments.length===0?Ie(this,0,O):j.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(O){if(!b.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:b.compare(this,O)===0},b.prototype.inspect=function(){let O="";const N=d.INSPECT_MAX_BYTES;return O=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(O+=" ... "),"<Buffer "+O+">"},h&&(b.prototype[h]=b.prototype.inspect),b.prototype.compare=function(O,N,V,te,oe){if($t(O,Uint8Array)&&(O=b.from(O,O.offset,O.byteLength)),!b.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(N===void 0&&(N=0),V===void 0&&(V=O?O.length:0),te===void 0&&(te=0),oe===void 0&&(oe=this.length),N<0||V>O.length||te<0||oe>this.length)throw new RangeError("out of range index");if(te>=oe&&N>=V)return 0;if(te>=oe)return-1;if(N>=V)return 1;if(N>>>=0,V>>>=0,te>>>=0,oe>>>=0,this===O)return 0;let ue=oe-te,Ge=V-N;const Ze=Math.min(ue,Ge),nt=this.slice(te,oe),ut=O.slice(N,V);for(let ht=0;ht<Ze;++ht)if(nt[ht]!==ut[ht]){ue=nt[ht],Ge=ut[ht];break}return ue<Ge?-1:Ge<ue?1:0};function W(L,O,N,V,te){if(L.length===0)return-1;if(typeof N=="string"?(V=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,ds(N)&&(N=te?0:L.length-1),N<0&&(N=L.length+N),N>=L.length){if(te)return-1;N=L.length-1}else if(N<0)if(te)N=0;else return-1;if(typeof O=="string"&&(O=b.from(O,V)),b.isBuffer(O))return O.length===0?-1:H(L,O,N,V,te);if(typeof O=="number")return O=O&255,typeof Uint8Array.prototype.indexOf=="function"?te?Uint8Array.prototype.indexOf.call(L,O,N):Uint8Array.prototype.lastIndexOf.call(L,O,N):H(L,[O],N,V,te);throw new TypeError("val must be string, number or Buffer")}function H(L,O,N,V,te){let oe=1,ue=L.length,Ge=O.length;if(V!==void 0&&(V=String(V).toLowerCase(),V==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(L.length<2||O.length<2)return-1;oe=2,ue/=2,Ge/=2,N/=2}function Ze(ut,ht){return oe===1?ut[ht]:ut.readUInt16BE(ht*oe)}let nt;if(te){let ut=-1;for(nt=N;nt<ue;nt++)if(Ze(L,nt)===Ze(O,ut===-1?0:nt-ut)){if(ut===-1&&(ut=nt),nt-ut+1===Ge)return ut*oe}else ut!==-1&&(nt-=nt-ut),ut=-1}else for(N+Ge>ue&&(N=ue-Ge),nt=N;nt>=0;nt--){let ut=!0;for(let ht=0;ht<Ge;ht++)if(Ze(L,nt+ht)!==Ze(O,ht)){ut=!1;break}if(ut)return nt}return-1}b.prototype.includes=function(O,N,V){return this.indexOf(O,N,V)!==-1},b.prototype.indexOf=function(O,N,V){return W(this,O,N,V,!0)},b.prototype.lastIndexOf=function(O,N,V){return W(this,O,N,V,!1)};function G(L,O,N,V){N=Number(N)||0;const te=L.length-N;V?(V=Number(V),V>te&&(V=te)):V=te;const oe=O.length;V>oe/2&&(V=oe/2);let ue;for(ue=0;ue<V;++ue){const Ge=parseInt(O.substr(ue*2,2),16);if(ds(Ge))return ue;L[N+ue]=Ge}return ue}function z(L,O,N,V){return Rt(Ce(O,L.length-N),L,N,V)}function q(L,O,N,V){return Rt(re(O),L,N,V)}function ie(L,O,N,V){return Rt(tt(O),L,N,V)}function ce(L,O,N,V){return Rt(rt(O,L.length-N),L,N,V)}b.prototype.write=function(O,N,V,te){if(N===void 0)te="utf8",V=this.length,N=0;else if(V===void 0&&typeof N=="string")te=N,V=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(V)?(V=V>>>0,te===void 0&&(te="utf8")):(te=V,V=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const oe=this.length-N;if((V===void 0||V>oe)&&(V=oe),O.length>0&&(V<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let ue=!1;for(;;)switch(te){case"hex":return G(this,O,N,V);case"utf8":case"utf-8":return z(this,O,N,V);case"ascii":case"latin1":case"binary":return q(this,O,N,V);case"base64":return ie(this,O,N,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,O,N,V);default:if(ue)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ue=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function se(L,O,N){return O===0&&N===L.length?u.fromByteArray(L):u.fromByteArray(L.slice(O,N))}function Ie(L,O,N){N=Math.min(L.length,N);const V=[];let te=O;for(;te<N;){const oe=L[te];let ue=null,Ge=oe>239?4:oe>223?3:oe>191?2:1;if(te+Ge<=N){let Ze,nt,ut,ht;switch(Ge){case 1:oe<128&&(ue=oe);break;case 2:Ze=L[te+1],(Ze&192)===128&&(ht=(oe&31)<<6|Ze&63,ht>127&&(ue=ht));break;case 3:Ze=L[te+1],nt=L[te+2],(Ze&192)===128&&(nt&192)===128&&(ht=(oe&15)<<12|(Ze&63)<<6|nt&63,ht>2047&&(ht<55296||ht>57343)&&(ue=ht));break;case 4:Ze=L[te+1],nt=L[te+2],ut=L[te+3],(Ze&192)===128&&(nt&192)===128&&(ut&192)===128&&(ht=(oe&15)<<18|(Ze&63)<<12|(nt&63)<<6|ut&63,ht>65535&&ht<1114112&&(ue=ht))}}ue===null?(ue=65533,Ge=1):ue>65535&&(ue-=65536,V.push(ue>>>10&1023|55296),ue=56320|ue&1023),V.push(ue),te+=Ge}return Me(V)}const he=4096;function Me(L){const O=L.length;if(O<=he)return String.fromCharCode.apply(String,L);let N="",V=0;for(;V<O;)N+=String.fromCharCode.apply(String,L.slice(V,V+=he));return N}function Ue(L,O,N){let V="";N=Math.min(L.length,N);for(let te=O;te<N;++te)V+=String.fromCharCode(L[te]&127);return V}function _e(L,O,N){let V="";N=Math.min(L.length,N);for(let te=O;te<N;++te)V+=String.fromCharCode(L[te]);return V}function ke(L,O,N){const V=L.length;(!O||O<0)&&(O=0),(!N||N<0||N>V)&&(N=V);let te="";for(let oe=O;oe<N;++oe)te+=me[L[oe]];return te}function Ee(L,O,N){const V=L.slice(O,N);let te="";for(let oe=0;oe<V.length-1;oe+=2)te+=String.fromCharCode(V[oe]+V[oe+1]*256);return te}b.prototype.slice=function(O,N){const V=this.length;O=~~O,N=N===void 0?V:~~N,O<0?(O+=V,O<0&&(O=0)):O>V&&(O=V),N<0?(N+=V,N<0&&(N=0)):N>V&&(N=V),N<O&&(N=O);const te=this.subarray(O,N);return Object.setPrototypeOf(te,b.prototype),te};function ye(L,O,N){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+O>N)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(O,N,V){O=O>>>0,N=N>>>0,V||ye(O,N,this.length);let te=this[O],oe=1,ue=0;for(;++ue<N&&(oe*=256);)te+=this[O+ue]*oe;return te},b.prototype.readUintBE=b.prototype.readUIntBE=function(O,N,V){O=O>>>0,N=N>>>0,V||ye(O,N,this.length);let te=this[O+--N],oe=1;for(;N>0&&(oe*=256);)te+=this[O+--N]*oe;return te},b.prototype.readUint8=b.prototype.readUInt8=function(O,N){return O=O>>>0,N||ye(O,1,this.length),this[O]},b.prototype.readUint16LE=b.prototype.readUInt16LE=function(O,N){return O=O>>>0,N||ye(O,2,this.length),this[O]|this[O+1]<<8},b.prototype.readUint16BE=b.prototype.readUInt16BE=function(O,N){return O=O>>>0,N||ye(O,2,this.length),this[O]<<8|this[O+1]},b.prototype.readUint32LE=b.prototype.readUInt32LE=function(O,N){return O=O>>>0,N||ye(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},b.prototype.readUint32BE=b.prototype.readUInt32BE=function(O,N){return O=O>>>0,N||ye(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},b.prototype.readBigUInt64LE=pe(function(O){O=O>>>0,He(O,"offset");const N=this[O],V=this[O+7];(N===void 0||V===void 0)&&ft(O,this.length-8);const te=N+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24,oe=this[++O]+this[++O]*2**8+this[++O]*2**16+V*2**24;return BigInt(te)+(BigInt(oe)<<BigInt(32))}),b.prototype.readBigUInt64BE=pe(function(O){O=O>>>0,He(O,"offset");const N=this[O],V=this[O+7];(N===void 0||V===void 0)&&ft(O,this.length-8);const te=N*2**24+this[++O]*2**16+this[++O]*2**8+this[++O],oe=this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+V;return(BigInt(te)<<BigInt(32))+BigInt(oe)}),b.prototype.readIntLE=function(O,N,V){O=O>>>0,N=N>>>0,V||ye(O,N,this.length);let te=this[O],oe=1,ue=0;for(;++ue<N&&(oe*=256);)te+=this[O+ue]*oe;return oe*=128,te>=oe&&(te-=Math.pow(2,8*N)),te},b.prototype.readIntBE=function(O,N,V){O=O>>>0,N=N>>>0,V||ye(O,N,this.length);let te=N,oe=1,ue=this[O+--te];for(;te>0&&(oe*=256);)ue+=this[O+--te]*oe;return oe*=128,ue>=oe&&(ue-=Math.pow(2,8*N)),ue},b.prototype.readInt8=function(O,N){return O=O>>>0,N||ye(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},b.prototype.readInt16LE=function(O,N){O=O>>>0,N||ye(O,2,this.length);const V=this[O]|this[O+1]<<8;return V&32768?V|4294901760:V},b.prototype.readInt16BE=function(O,N){O=O>>>0,N||ye(O,2,this.length);const V=this[O+1]|this[O]<<8;return V&32768?V|4294901760:V},b.prototype.readInt32LE=function(O,N){return O=O>>>0,N||ye(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},b.prototype.readInt32BE=function(O,N){return O=O>>>0,N||ye(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},b.prototype.readBigInt64LE=pe(function(O){O=O>>>0,He(O,"offset");const N=this[O],V=this[O+7];(N===void 0||V===void 0)&&ft(O,this.length-8);const te=this[O+4]+this[O+5]*2**8+this[O+6]*2**16+(V<<24);return(BigInt(te)<<BigInt(32))+BigInt(N+this[++O]*256+this[++O]*65536+this[++O]*16777216)}),b.prototype.readBigInt64BE=pe(function(O){O=O>>>0,He(O,"offset");const N=this[O],V=this[O+7];(N===void 0||V===void 0)&&ft(O,this.length-8);const te=(N<<24)+this[++O]*2**16+this[++O]*2**8+this[++O];return(BigInt(te)<<BigInt(32))+BigInt(this[++O]*16777216+this[++O]*65536+this[++O]*256+V)}),b.prototype.readFloatLE=function(O,N){return O=O>>>0,N||ye(O,4,this.length),r.read(this,O,!0,23,4)},b.prototype.readFloatBE=function(O,N){return O=O>>>0,N||ye(O,4,this.length),r.read(this,O,!1,23,4)},b.prototype.readDoubleLE=function(O,N){return O=O>>>0,N||ye(O,8,this.length),r.read(this,O,!0,52,8)},b.prototype.readDoubleBE=function(O,N){return O=O>>>0,N||ye(O,8,this.length),r.read(this,O,!1,52,8)};function X(L,O,N,V,te,oe){if(!b.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>te||O<oe)throw new RangeError('"value" argument is out of bounds');if(N+V>L.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(O,N,V,te){if(O=+O,N=N>>>0,V=V>>>0,!te){const Ge=Math.pow(2,8*V)-1;X(this,O,N,V,Ge,0)}let oe=1,ue=0;for(this[N]=O&255;++ue<V&&(oe*=256);)this[N+ue]=O/oe&255;return N+V},b.prototype.writeUintBE=b.prototype.writeUIntBE=function(O,N,V,te){if(O=+O,N=N>>>0,V=V>>>0,!te){const Ge=Math.pow(2,8*V)-1;X(this,O,N,V,Ge,0)}let oe=V-1,ue=1;for(this[N+oe]=O&255;--oe>=0&&(ue*=256);)this[N+oe]=O/ue&255;return N+V},b.prototype.writeUint8=b.prototype.writeUInt8=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,1,255,0),this[N]=O&255,N+1},b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,2,65535,0),this[N]=O&255,this[N+1]=O>>>8,N+2},b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,2,65535,0),this[N]=O>>>8,this[N+1]=O&255,N+2},b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,4,4294967295,0),this[N+3]=O>>>24,this[N+2]=O>>>16,this[N+1]=O>>>8,this[N]=O&255,N+4},b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,4,4294967295,0),this[N]=O>>>24,this[N+1]=O>>>16,this[N+2]=O>>>8,this[N+3]=O&255,N+4};function Y(L,O,N,V,te){Ne(O,V,te,L,N,7);let oe=Number(O&BigInt(4294967295));L[N++]=oe,oe=oe>>8,L[N++]=oe,oe=oe>>8,L[N++]=oe,oe=oe>>8,L[N++]=oe;let ue=Number(O>>BigInt(32)&BigInt(4294967295));return L[N++]=ue,ue=ue>>8,L[N++]=ue,ue=ue>>8,L[N++]=ue,ue=ue>>8,L[N++]=ue,N}function U(L,O,N,V,te){Ne(O,V,te,L,N,7);let oe=Number(O&BigInt(4294967295));L[N+7]=oe,oe=oe>>8,L[N+6]=oe,oe=oe>>8,L[N+5]=oe,oe=oe>>8,L[N+4]=oe;let ue=Number(O>>BigInt(32)&BigInt(4294967295));return L[N+3]=ue,ue=ue>>8,L[N+2]=ue,ue=ue>>8,L[N+1]=ue,ue=ue>>8,L[N]=ue,N+8}b.prototype.writeBigUInt64LE=pe(function(O,N=0){return Y(this,O,N,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeBigUInt64BE=pe(function(O,N=0){return U(this,O,N,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeIntLE=function(O,N,V,te){if(O=+O,N=N>>>0,!te){const Ze=Math.pow(2,8*V-1);X(this,O,N,V,Ze-1,-Ze)}let oe=0,ue=1,Ge=0;for(this[N]=O&255;++oe<V&&(ue*=256);)O<0&&Ge===0&&this[N+oe-1]!==0&&(Ge=1),this[N+oe]=(O/ue>>0)-Ge&255;return N+V},b.prototype.writeIntBE=function(O,N,V,te){if(O=+O,N=N>>>0,!te){const Ze=Math.pow(2,8*V-1);X(this,O,N,V,Ze-1,-Ze)}let oe=V-1,ue=1,Ge=0;for(this[N+oe]=O&255;--oe>=0&&(ue*=256);)O<0&&Ge===0&&this[N+oe+1]!==0&&(Ge=1),this[N+oe]=(O/ue>>0)-Ge&255;return N+V},b.prototype.writeInt8=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,1,127,-128),O<0&&(O=255+O+1),this[N]=O&255,N+1},b.prototype.writeInt16LE=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,2,32767,-32768),this[N]=O&255,this[N+1]=O>>>8,N+2},b.prototype.writeInt16BE=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,2,32767,-32768),this[N]=O>>>8,this[N+1]=O&255,N+2},b.prototype.writeInt32LE=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,4,2147483647,-2147483648),this[N]=O&255,this[N+1]=O>>>8,this[N+2]=O>>>16,this[N+3]=O>>>24,N+4},b.prototype.writeInt32BE=function(O,N,V){return O=+O,N=N>>>0,V||X(this,O,N,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[N]=O>>>24,this[N+1]=O>>>16,this[N+2]=O>>>8,this[N+3]=O&255,N+4},b.prototype.writeBigInt64LE=pe(function(O,N=0){return Y(this,O,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),b.prototype.writeBigInt64BE=pe(function(O,N=0){return U(this,O,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function J(L,O,N,V,te,oe){if(N+V>L.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function K(L,O,N,V,te){return O=+O,N=N>>>0,te||J(L,O,N,4),r.write(L,O,N,V,23,4),N+4}b.prototype.writeFloatLE=function(O,N,V){return K(this,O,N,!0,V)},b.prototype.writeFloatBE=function(O,N,V){return K(this,O,N,!1,V)};function Z(L,O,N,V,te){return O=+O,N=N>>>0,te||J(L,O,N,8),r.write(L,O,N,V,52,8),N+8}b.prototype.writeDoubleLE=function(O,N,V){return Z(this,O,N,!0,V)},b.prototype.writeDoubleBE=function(O,N,V){return Z(this,O,N,!1,V)},b.prototype.copy=function(O,N,V,te){if(!b.isBuffer(O))throw new TypeError("argument should be a Buffer");if(V||(V=0),!te&&te!==0&&(te=this.length),N>=O.length&&(N=O.length),N||(N=0),te>0&&te<V&&(te=V),te===V||O.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),O.length-N<te-V&&(te=O.length-N+V);const oe=te-V;return this===O&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,V,te):Uint8Array.prototype.set.call(O,this.subarray(V,te),N),oe},b.prototype.fill=function(O,N,V,te){if(typeof O=="string"){if(typeof N=="string"?(te=N,N=0,V=this.length):typeof V=="string"&&(te=V,V=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!b.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(O.length===1){const ue=O.charCodeAt(0);(te==="utf8"&&ue<128||te==="latin1")&&(O=ue)}}else typeof O=="number"?O=O&255:typeof O=="boolean"&&(O=Number(O));if(N<0||this.length<N||this.length<V)throw new RangeError("Out of range index");if(V<=N)return this;N=N>>>0,V=V===void 0?this.length:V>>>0,O||(O=0);let oe;if(typeof O=="number")for(oe=N;oe<V;++oe)this[oe]=O;else{const ue=b.isBuffer(O)?O:b.from(O,te),Ge=ue.length;if(Ge===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(oe=0;oe<V-N;++oe)this[oe+N]=ue[oe%Ge]}return this};const Q={};function fe(L,O,N){Q[L]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:O.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}fe("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),fe("ERR_INVALID_ARG_TYPE",function(L,O){return`The "${L}" argument must be of type number. Received type ${typeof O}`},TypeError),fe("ERR_OUT_OF_RANGE",function(L,O,N){let V=`The value of "${L}" is out of range.`,te=N;return Number.isInteger(N)&&Math.abs(N)>4294967296?te=ee(String(N)):typeof N=="bigint"&&(te=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(te=ee(te)),te+="n"),V+=` It must be ${O}. Received ${te}`,V},RangeError);function ee(L){let O="",N=L.length;const V=L[0]==="-"?1:0;for(;N>=V+4;N-=3)O=`_${L.slice(N-3,N)}${O}`;return`${L.slice(0,N)}${O}`}function le(L,O,N){He(O,"offset"),(L[O]===void 0||L[O+N]===void 0)&&ft(O,L.length-(N+1))}function Ne(L,O,N,V,te,oe){if(L>N||L<O){const ue=typeof O=="bigint"?"n":"";let Ge;throw O===0||O===BigInt(0)?Ge=`>= 0${ue} and < 2${ue} ** ${(oe+1)*8}${ue}`:Ge=`>= -(2${ue} ** ${(oe+1)*8-1}${ue}) and < 2 ** ${(oe+1)*8-1}${ue}`,new Q.ERR_OUT_OF_RANGE("value",Ge,L)}le(V,te,oe)}function He(L,O){if(typeof L!="number")throw new Q.ERR_INVALID_ARG_TYPE(O,"number",L)}function ft(L,O,N){throw Math.floor(L)!==L?(He(L,N),new Q.ERR_OUT_OF_RANGE("offset","an integer",L)):O<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${O}`,L)}const de=/[^+/0-9A-Za-z-_]/g;function ve(L){if(L=L.split("=")[0],L=L.trim().replace(de,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function Ce(L,O){O=O||1/0;let N;const V=L.length;let te=null;const oe=[];for(let ue=0;ue<V;++ue){if(N=L.charCodeAt(ue),N>55295&&N<57344){if(!te){if(N>56319){(O-=3)>-1&&oe.push(239,191,189);continue}else if(ue+1===V){(O-=3)>-1&&oe.push(239,191,189);continue}te=N;continue}if(N<56320){(O-=3)>-1&&oe.push(239,191,189),te=N;continue}N=(te-55296<<10|N-56320)+65536}else te&&(O-=3)>-1&&oe.push(239,191,189);if(te=null,N<128){if((O-=1)<0)break;oe.push(N)}else if(N<2048){if((O-=2)<0)break;oe.push(N>>6|192,N&63|128)}else if(N<65536){if((O-=3)<0)break;oe.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((O-=4)<0)break;oe.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return oe}function re(L){const O=[];for(let N=0;N<L.length;++N)O.push(L.charCodeAt(N)&255);return O}function rt(L,O){let N,V,te;const oe=[];for(let ue=0;ue<L.length&&!((O-=2)<0);++ue)N=L.charCodeAt(ue),V=N>>8,te=N%256,oe.push(te),oe.push(V);return oe}function tt(L){return u.toByteArray(ve(L))}function Rt(L,O,N,V){let te;for(te=0;te<V&&!(te+N>=O.length||te>=L.length);++te)O[te+N]=L[te];return te}function $t(L,O){return L instanceof O||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===O.name}function ds(L){return L!==L}const me=function(){const L="0123456789abcdef",O=new Array(256);for(let N=0;N<16;++N){const V=N*16;for(let te=0;te<16;++te)O[V+te]=L[N]+L[te]}return O}();function pe(L){return typeof BigInt>"u"?qt:L}function qt(){throw new Error("BigInt not supported")}},8769:(c,d,f)=>{var u,r=TypeError,h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch{h=null}var p=function(){throw new r},_=h?function(){try{return arguments.callee,p}catch{try{return h(arguments,"callee").get}catch{return p}}}():p,l=f(1405)(),b=Object.getPrototypeOf||function(D){return D.__proto__},m=u,E=u,B=u,I=typeof Uint8Array>"u"?u:b(Uint8Array),k={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?u:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?u:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":l?b([][Symbol.iterator]()):u,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":u,"%AsyncFunction%":E,"%AsyncFunctionPrototype%":u,"%AsyncGenerator%":u,"%AsyncGeneratorFunction%":B,"%AsyncGeneratorPrototype%":u,"%AsyncIteratorPrototype%":u,"%Atomics%":typeof Atomics>"u"?u:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?u:DataView,"%DataViewPrototype%":typeof DataView>"u"?u:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?u:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?u:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?u:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?u:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":u,"%GeneratorFunction%":m,"%GeneratorPrototype%":u,"%Int8Array%":typeof Int8Array>"u"?u:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?u:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?u:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?u:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?u:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?u:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?b(b([][Symbol.iterator]())):u,"%JSON%":typeof JSON=="object"?JSON:u,"%JSONParse%":typeof JSON=="object"?JSON.parse:u,"%Map%":typeof Map>"u"?u:Map,"%MapIteratorPrototype%":typeof Map>"u"||!l?u:b(new Map()[Symbol.iterator]()),"%MapPrototype%":typeof Map>"u"?u:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?u:Promise,"%PromisePrototype%":typeof Promise>"u"?u:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?u:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?u:Promise.all,"%Promise_reject%":typeof Promise>"u"?u:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?u:Promise.resolve,"%Proxy%":typeof Proxy>"u"?u:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?u:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?u:Set,"%SetIteratorPrototype%":typeof Set>"u"||!l?u:b(new Set()[Symbol.iterator]()),"%SetPrototype%":typeof Set>"u"?u:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?u:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":l?b(""[Symbol.iterator]()):u,"%StringPrototype%":String.prototype,"%Symbol%":l?Symbol:u,"%SymbolPrototype%":l?Symbol.prototype:u,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":_,"%TypedArray%":I,"%TypedArrayPrototype%":I?I.prototype:u,"%TypeError%":r,"%TypeErrorPrototype%":r.prototype,"%Uint8Array%":typeof Uint8Array>"u"?u:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?u:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?u:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?u:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?u:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?u:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?u:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?u:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?u:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?u:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?u:WeakSet.prototype},F=f(8612),x=F.call(Function.call,String.prototype.replace),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,R=/\\(\\)?/g,P=function(j){var $=[];return x(j,M,function(W,H,G,z){$[$.length]=G?x(z,R,"$1"):H||W}),$},C=function(j,$){if(!(j in k))throw new SyntaxError("intrinsic "+j+" does not exist!");if(typeof k[j]>"u"&&!$)throw new r("intrinsic "+j+" exists, but is not available. Please file an issue!");return k[j]};c.exports=function(j,$){if(typeof j!="string"||j.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var W=P(j),H=C("%"+(W.length>0?W[0]:"")+"%",$),G=1;G<W.length;G+=1)if(H!=null)if(h&&G+1>=W.length){var z=h(H,W[G]);if(!$&&!(W[G]in H))throw new r("base intrinsic for "+j+" exists, but the property is not available.");H=z&&"get"in z&&!("originalValue"in z.get)?z.get:H[W[G]]}else H=H[W[G]];return H}},4147:(c,d,f)=>{var u=f(8612),r=f(8769),h=r("%Function.prototype.apply%"),p=r("%Function.prototype.call%"),_=r("%Reflect.apply%",!0)||u.call(p,h),l=r("%Object.defineProperty%",!0);if(l)try{l({},"a",{value:1})}catch{l=null}c.exports=function(){return _(u,p,arguments)};var b=function(){return _(u,h,arguments)};l?l(c.exports,"apply",{value:b}):c.exports.apply=b},8914:(c,d,f)=>{var u=f(8769),r=f(4147),h=r(u("String.prototype.indexOf"));c.exports=function(_,l){var b=u(_,!!l);return typeof b=="function"&&h(_,".prototype.")?r(b):b}},4079:(c,d,f)=>{var u=f(8769),r=u("%Object.getOwnPropertyDescriptor%");if(r)try{r([],"length")}catch{r=null}c.exports=r},6729:c=>{var d=Object.prototype.hasOwnProperty,f="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(f=!1));function r(l,b,m){this.fn=l,this.context=b,this.once=m||!1}function h(l,b,m,E,B){if(typeof m!="function")throw new TypeError("The listener must be a function");var I=new r(m,E||l,B),k=f?f+b:b;return l._events[k]?l._events[k].fn?l._events[k]=[l._events[k],I]:l._events[k].push(I):(l._events[k]=I,l._eventsCount++),l}function p(l,b){--l._eventsCount===0?l._events=new u:delete l._events[b]}function _(){this._events=new u,this._eventsCount=0}_.prototype.eventNames=function(){var b=[],m,E;if(this._eventsCount===0)return b;for(E in m=this._events)d.call(m,E)&&b.push(f?E.slice(1):E);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(m)):b},_.prototype.listeners=function(b){var m=f?f+b:b,E=this._events[m];if(!E)return[];if(E.fn)return[E.fn];for(var B=0,I=E.length,k=new Array(I);B<I;B++)k[B]=E[B].fn;return k},_.prototype.listenerCount=function(b){var m=f?f+b:b,E=this._events[m];return E?E.fn?1:E.length:0},_.prototype.emit=function(b,m,E,B,I,k){var F=f?f+b:b;if(!this._events[F])return!1;var x=this._events[F],M=arguments.length,R,P;if(x.fn){switch(x.once&&this.removeListener(b,x.fn,void 0,!0),M){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,m),!0;case 3:return x.fn.call(x.context,m,E),!0;case 4:return x.fn.call(x.context,m,E,B),!0;case 5:return x.fn.call(x.context,m,E,B,I),!0;case 6:return x.fn.call(x.context,m,E,B,I,k),!0}for(P=1,R=new Array(M-1);P<M;P++)R[P-1]=arguments[P];x.fn.apply(x.context,R)}else{var C=x.length,D;for(P=0;P<C;P++)switch(x[P].once&&this.removeListener(b,x[P].fn,void 0,!0),M){case 1:x[P].fn.call(x[P].context);break;case 2:x[P].fn.call(x[P].context,m);break;case 3:x[P].fn.call(x[P].context,m,E);break;case 4:x[P].fn.call(x[P].context,m,E,B);break;default:if(!R)for(D=1,R=new Array(M-1);D<M;D++)R[D-1]=arguments[D];x[P].fn.apply(x[P].context,R)}}return!0},_.prototype.on=function(b,m,E){return h(this,b,m,E,!1)},_.prototype.once=function(b,m,E){return h(this,b,m,E,!0)},_.prototype.removeListener=function(b,m,E,B){var I=f?f+b:b;if(!this._events[I])return this;if(!m)return p(this,I),this;var k=this._events[I];if(k.fn)k.fn===m&&(!B||k.once)&&(!E||k.context===E)&&p(this,I);else{for(var F=0,x=[],M=k.length;F<M;F++)(k[F].fn!==m||B&&!k[F].once||E&&k[F].context!==E)&&x.push(k[F]);x.length?this._events[I]=x.length===1?x[0]:x:p(this,I)}return this},_.prototype.removeAllListeners=function(b){var m;return b?(m=f?f+b:b,this._events[m]&&p(this,m)):(this._events=new u,this._eventsCount=0),this},_.prototype.off=_.prototype.removeListener,_.prototype.addListener=_.prototype.on,_.prefixed=f,_.EventEmitter=_,c.exports=_},7187:c=>{var d=typeof Reflect=="object"?Reflect:null,f=d&&typeof d.apply=="function"?d.apply:function(C,D,j){return Function.prototype.apply.call(C,D,j)},u;d&&typeof d.ownKeys=="function"?u=d.ownKeys:Object.getOwnPropertySymbols?u=function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:u=function(C){return Object.getOwnPropertyNames(C)};function r(P){console&&console.warn&&console.warn(P)}var h=Number.isNaN||function(C){return C!==C};function p(){p.init.call(this)}c.exports=p,c.exports.once=R,p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var _=10;function l(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(P){if(typeof P!="number"||P<0||h(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");_=P}}),p.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||h(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this};function b(P){return P._maxListeners===void 0?p.defaultMaxListeners:P._maxListeners}p.prototype.getMaxListeners=function(){return b(this)},p.prototype.emit=function(C){for(var D=[],j=1;j<arguments.length;j++)D.push(arguments[j]);var $=C==="error",W=this._events;if(W!==void 0)$=$&&W.error===void 0;else if(!$)return!1;if($){var H;if(D.length>0&&(H=D[0]),H instanceof Error)throw H;var G=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw G.context=H,G}var z=W[C];if(z===void 0)return!1;if(typeof z=="function")f(z,this,D);else for(var q=z.length,ie=F(z,q),j=0;j<q;++j)f(ie[j],this,D);return!0};function m(P,C,D,j){var $,W,H;if(l(D),W=P._events,W===void 0?(W=P._events=Object.create(null),P._eventsCount=0):(W.newListener!==void 0&&(P.emit("newListener",C,D.listener?D.listener:D),W=P._events),H=W[C]),H===void 0)H=W[C]=D,++P._eventsCount;else if(typeof H=="function"?H=W[C]=j?[D,H]:[H,D]:j?H.unshift(D):H.push(D),$=b(P),$>0&&H.length>$&&!H.warned){H.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=P,G.type=C,G.count=H.length,r(G)}return P}p.prototype.addListener=function(C,D){return m(this,C,D,!1)},p.prototype.on=p.prototype.addListener,p.prototype.prependListener=function(C,D){return m(this,C,D,!0)};function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(P,C,D){var j={fired:!1,wrapFn:void 0,target:P,type:C,listener:D},$=E.bind(j);return $.listener=D,j.wrapFn=$,$}p.prototype.once=function(C,D){return l(D),this.on(C,B(this,C,D)),this},p.prototype.prependOnceListener=function(C,D){return l(D),this.prependListener(C,B(this,C,D)),this},p.prototype.removeListener=function(C,D){var j,$,W,H,G;if(l(D),$=this._events,$===void 0)return this;if(j=$[C],j===void 0)return this;if(j===D||j.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete $[C],$.removeListener&&this.emit("removeListener",C,j.listener||D));else if(typeof j!="function"){for(W=-1,H=j.length-1;H>=0;H--)if(j[H]===D||j[H].listener===D){G=j[H].listener,W=H;break}if(W<0)return this;W===0?j.shift():x(j,W),j.length===1&&($[C]=j[0]),$.removeListener!==void 0&&this.emit("removeListener",C,G||D)}return this},p.prototype.off=p.prototype.removeListener,p.prototype.removeAllListeners=function(C){var D,j,$;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[C]),this;if(arguments.length===0){var W=Object.keys(j),H;for($=0;$<W.length;++$)H=W[$],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=j[C],typeof D=="function")this.removeListener(C,D);else if(D!==void 0)for($=D.length-1;$>=0;$--)this.removeListener(C,D[$]);return this};function I(P,C,D){var j=P._events;if(j===void 0)return[];var $=j[C];return $===void 0?[]:typeof $=="function"?D?[$.listener||$]:[$]:D?M($):F($,$.length)}p.prototype.listeners=function(C){return I(this,C,!0)},p.prototype.rawListeners=function(C){return I(this,C,!1)},p.listenerCount=function(P,C){return typeof P.listenerCount=="function"?P.listenerCount(C):k.call(P,C)},p.prototype.listenerCount=k;function k(P){var C=this._events;if(C!==void 0){var D=C[P];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}p.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function F(P,C){for(var D=new Array(C),j=0;j<C;++j)D[j]=P[j];return D}function x(P,C){for(;C+1<P.length;C++)P[C]=P[C+1];P.pop()}function M(P){for(var C=new Array(P.length),D=0;D<C.length;++D)C[D]=P[D].listener||P[D];return C}function R(P,C){return new Promise(function(D,j){function $(){W!==void 0&&P.removeListener("error",W),D([].slice.call(arguments))}var W;C!=="error"&&(W=function(G){P.removeListener(C,$),j(G)},P.once("error",W)),P.once(C,$)})}},9804:c=>{var d=Object.prototype.hasOwnProperty,f=Object.prototype.toString;c.exports=function(r,h,p){if(f.call(h)!=="[object Function]")throw new TypeError("iterator must be a function");var _=r.length;if(_===+_)for(var l=0;l<_;l++)h.call(p,r[l],l,r);else for(var b in r)d.call(r,b)&&h.call(p,r[b],b,r)}},7648:c=>{var d="Function.prototype.bind called on incompatible ",f=Array.prototype.slice,u=Object.prototype.toString,r="[object Function]";c.exports=function(p){var _=this;if(typeof _!="function"||u.call(_)!==r)throw new TypeError(d+_);for(var l=f.call(arguments,1),b,m=function(){if(this instanceof b){var F=_.apply(this,l.concat(f.call(arguments)));return Object(F)===F?F:this}else return _.apply(p,l.concat(f.call(arguments)))},E=Math.max(0,_.length-l.length),B=[],I=0;I<E;I++)B.push("$"+I);if(b=Function("binder","return function ("+B.join(",")+"){ return binder.apply(this,arguments); }")(m),_.prototype){var k=function(){};k.prototype=_.prototype,b.prototype=new k,k.prototype=null}return b}},8612:(c,d,f)=>{var u=f(7648);c.exports=Function.prototype.bind||u},1405:(c,d,f)=>{var u=f.g.Symbol,r=f(5419);c.exports=function(){return typeof u!="function"||typeof Symbol!="function"||typeof u("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:r()}},5419:c=>{c.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var f={},u=Symbol("test"),r=Object(u);if(typeof u=="string"||Object.prototype.toString.call(u)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var h=42;f[u]=h;for(u in f)return!1;if(typeof Object.keys=="function"&&Object.keys(f).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(f).length!==0)return!1;var p=Object.getOwnPropertySymbols(f);if(p.length!==1||p[0]!==u||!Object.prototype.propertyIsEnumerable.call(f,u))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var _=Object.getOwnPropertyDescriptor(f,u);if(_.value!==h||_.enumerable!==!0)return!1}return!0}},645:(c,d)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(f,u,r,h,p){var _,l,b=p*8-h-1,m=(1<<b)-1,E=m>>1,B=-7,I=r?p-1:0,k=r?-1:1,F=f[u+I];for(I+=k,_=F&(1<<-B)-1,F>>=-B,B+=b;B>0;_=_*256+f[u+I],I+=k,B-=8);for(l=_&(1<<-B)-1,_>>=-B,B+=h;B>0;l=l*256+f[u+I],I+=k,B-=8);if(_===0)_=1-E;else{if(_===m)return l?NaN:(F?-1:1)*(1/0);l=l+Math.pow(2,h),_=_-E}return(F?-1:1)*l*Math.pow(2,_-h)},d.write=function(f,u,r,h,p,_){var l,b,m,E=_*8-p-1,B=(1<<E)-1,I=B>>1,k=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=h?0:_-1,x=h?1:-1,M=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(b=isNaN(u)?1:0,l=B):(l=Math.floor(Math.log(u)/Math.LN2),u*(m=Math.pow(2,-l))<1&&(l--,m*=2),l+I>=1?u+=k/m:u+=k*Math.pow(2,1-I),u*m>=2&&(l++,m/=2),l+I>=B?(b=0,l=B):l+I>=1?(b=(u*m-1)*Math.pow(2,p),l=l+I):(b=u*Math.pow(2,I-1)*Math.pow(2,p),l=0));p>=8;f[r+F]=b&255,F+=x,b/=256,p-=8);for(l=l<<p|b,E+=p;E>0;f[r+F]=l&255,F+=x,l/=256,E-=8);f[r+F-x]|=M*128}},5717:c=>{typeof Object.create=="function"?c.exports=function(f,u){u&&(f.super_=u,f.prototype=Object.create(u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(f,u){if(u){f.super_=u;var r=function(){};r.prototype=u.prototype,f.prototype=new r,f.prototype.constructor=f}}},2584:c=>{var d=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",f=Object.prototype.toString,u=function(_){return d&&_&&typeof _=="object"&&Symbol.toStringTag in _?!1:f.call(_)==="[object Arguments]"},r=function(_){return u(_)?!0:_!==null&&typeof _=="object"&&typeof _.length=="number"&&_.length>=0&&f.call(_)!=="[object Array]"&&f.call(_.callee)==="[object Function]"},h=function(){return u(arguments)}();u.isLegacyArguments=r,c.exports=h?u:r},8662:c=>{var d=Object.prototype.toString,f=Function.prototype.toString,u=/^\s*(?:function)?\*/,r=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",h=Object.getPrototypeOf,p=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},_=p(),l=_?h(_):{};c.exports=function(m){if(typeof m!="function")return!1;if(u.test(f.call(m)))return!0;if(!r){var E=d.call(m);return E==="[object GeneratorFunction]"}return h(m)===l}},5692:(c,d,f)=>{var u=f(9804),r=f(6314),h=f(8914),p=h("Object.prototype.toString"),_=f(1405)(),l=_&&typeof Symbol.toStringTag=="symbol",b=r(),m=h("Array.prototype.indexOf",!0)||function(M,R){for(var P=0;P<M.length;P+=1)if(M[P]===R)return P;return-1},E=h("String.prototype.slice"),B={},I=f(4079),k=Object.getPrototypeOf;l&&I&&k&&u(b,function(x){var M=new f.g[x];if(!(Symbol.toStringTag in M))throw new EvalError("this engine has support for Symbol.toStringTag, but "+x+" does not have the property! Please report this.");var R=k(M),P=I(R,Symbol.toStringTag);if(!P){var C=k(R);P=I(C,Symbol.toStringTag)}B[x]=P.get});var F=function(M){var R=!1;return u(B,function(P,C){if(!R)try{R=P.call(M)===C}catch{}}),R};c.exports=function(M){if(!M||typeof M!="object")return!1;if(!l){var R=E(p(M),8,-1);return m(b,R)>-1}return I?F(M):!1}},6792:(c,d,f)=>{var u=null;typeof WebSocket<"u"?u=WebSocket:typeof MozWebSocket<"u"?u=MozWebSocket:typeof f.g<"u"?u=f.g.WebSocket||f.g.MozWebSocket:typeof window<"u"?u=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(u=self.WebSocket||self.MozWebSocket),c.exports=u},135:(c,d,f)=>{for(var u=f(8764).Buffer,r=4294967296,h=[],p=0;p<256;p++)h[p]=(p>15?"":"0")+p.toString(16);var _=c.exports=function(l,b){l instanceof u?(this.buffer=l,this.offset=b||0):Object.prototype.toString.call(l)=="[object Uint8Array]"?(this.buffer=new u(l),this.offset=b||0):(this.buffer=this.buffer||new u(8),this.offset=0,this.setValue.apply(this,arguments))};_.MAX_INT=Math.pow(2,53),_.MIN_INT=-Math.pow(2,53),_.prototype={constructor:_,_2scomp:function(){for(var l=this.buffer,b=this.offset,m=1,E=b+7;E>=b;E--){var B=(l[E]^255)+m;l[E]=B&255,m=B>>8}},setValue:function(l,b){var m=!1;if(arguments.length==1)if(typeof l=="number"){if(m=l<0,l=Math.abs(l),b=l%r,l=l/r,l>r)throw new RangeError(l+" is outside Int64 range");l=l|0}else if(typeof l=="string")l=(l+"").replace(/^0x/,""),b=l.substr(-8),l=l.length>8?l.substr(0,l.length-8):"",l=parseInt(l,16),b=parseInt(b,16);else throw new Error(l+" must be a Number or String");for(var E=this.buffer,B=this.offset,I=7;I>=0;I--)E[B+I]=b&255,b=I==4?l:b>>>8;m&&this._2scomp()},toNumber:function(l){for(var b=this.buffer,m=this.offset,E=b[m]&128,B=0,I=1,k=7,F=1;k>=0;k--,F*=256){var x=b[m+k];E&&(x=(x^255)+I,I=x>>8,x=x&255),B+=x*F}return!l&&B>=_.MAX_INT?E?-1/0:1/0:E?-B:B},valueOf:function(){return this.toNumber(!1)},toString:function(l){return this.valueOf().toString(l||10)},toOctetString:function(l){for(var b=new Array(8),m=this.buffer,E=this.offset,B=0;B<8;B++)b[B]=h[m[E+B]];return b.join(l||"")},toBuffer:function(l){if(l&&this.offset===0)return this.buffer;var b=new u(8);return this.buffer.copy(b,0,this.offset,this.offset+8),b},copy:function(l,b){this.buffer.copy(l,b||0,this.offset,this.offset+8)},compare:function(l){if((this.buffer[this.offset]&128)!=(l.buffer[l.offset]&128))return l.buffer[l.offset]-this.buffer[this.offset];for(var b=0;b<8;b++)if(this.buffer[this.offset+b]!==l.buffer[l.offset+b])return this.buffer[this.offset+b]-l.buffer[l.offset+b];return 0},equals:function(l){return this.compare(l)===0},inspect:function(){return"[Int64 value:"+this+" octets:"+this.toOctetString(" ")+"]"}}},8486:c=>{/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(function(d){typeof bootstrap=="function"?bootstrap("promise",d):c.exports=d()})(function(){var d=!1;try{throw new Error}catch(L){d=!!L.stack}var f=G(),u,r=function(){},h=function(){var L={task:void 0,next:null},O=L,N=!1,V=void 0,te=!1,oe=[];function ue(){for(var ut,ht;L.next;)L=L.next,ut=L.task,L.task=void 0,ht=L.domain,ht&&(L.domain=void 0,ht.enter()),Ge(ut,ht);for(;oe.length;)ut=oe.pop(),Ge(ut);N=!1}function Ge(ut,ht){try{ut()}catch(Cl){if(te)throw ht&&ht.exit(),setTimeout(ue,0),ht&&ht.enter(),Cl;setTimeout(function(){throw Cl},0)}ht&&ht.exit()}if(h=function(ut){O=O.next={task:ut,domain:te&&process.domain,next:null},N||(N=!0,V())},typeof process=="object"&&process.toString()==="[object process]"&&process.nextTick)te=!0,V=function(){process.nextTick(ue)};else if(typeof setImmediate=="function")typeof window<"u"?V=setImmediate.bind(window,ue):V=function(){setImmediate(ue)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel;Ze.port1.onmessage=function(){V=nt,Ze.port1.onmessage=ue,ue()};var nt=function(){Ze.port2.postMessage(0)};V=function(){setTimeout(ue,0),nt()}}else V=function(){setTimeout(ue,0)};return h.runAfter=function(ut){oe.push(ut),N||(N=!0,V())},h}(),p=Function.call;function _(L){return function(){return p.apply(L,arguments)}}var l=_(Array.prototype.slice),b=_(Array.prototype.reduce||function(L,O){var N=0,V=this.length;if(arguments.length===1)do{if(N in this){O=this[N++];break}if(++N>=V)throw new TypeError}while(!0);for(;N<V;N++)N in this&&(O=L(O,this[N],N));return O}),m=_(Array.prototype.indexOf||function(L){for(var O=0;O<this.length;O++)if(this[O]===L)return O;return-1}),E=_(Array.prototype.map||function(L,O){var N=this,V=[];return b(N,function(te,oe,ue){V.push(L.call(O,oe,ue,N))},void 0),V}),B=Object.create||function(L){function O(){}return O.prototype=L,new O},I=Object.defineProperty||function(L,O,N){return L[O]=N.value,L},k=_(Object.prototype.hasOwnProperty),F=Object.keys||function(L){var O=[];for(var N in L)k(L,N)&&O.push(N);return O},x=_(Object.prototype.toString);function M(L){return L===Object(L)}function R(L){return x(L)==="[object StopIteration]"||L instanceof P}var P;typeof ReturnValue<"u"?P=ReturnValue:P=function(L){this.value=L};var C="From previous event:";function D(L,O){if(d&&O.stack&&typeof L=="object"&&L!==null&&L.stack){for(var N=[],V=O;V;V=V.source)V.stack&&(!L.__minimumStackCounter__||L.__minimumStackCounter__>V.stackCounter)&&(I(L,"__minimumStackCounter__",{value:V.stackCounter,configurable:!0}),N.unshift(V.stack));N.unshift(L.stack);var te=N.join(`
`+C+`
`),oe=j(te);I(L,"stack",{value:oe,configurable:!0})}}function j(L){for(var O=L.split(`
`),N=[],V=0;V<O.length;++V){var te=O[V];!H(te)&&!$(te)&&te&&N.push(te)}return N.join(`
`)}function $(L){return L.indexOf("(module.js:")!==-1||L.indexOf("(node.js:")!==-1}function W(L){var O=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(L);if(O)return[O[1],Number(O[2])];var N=/at ([^ ]+):(\d+):(?:\d+)$/.exec(L);if(N)return[N[1],Number(N[2])];var V=/.*@(.+):(\d+)$/.exec(L);if(V)return[V[1],Number(V[2])]}function H(L){var O=W(L);if(!O)return!1;var N=O[0],V=O[1];return N===u&&V>=f&&V<=qt}function G(){if(d)try{throw new Error}catch(V){var L=V.stack.split(`
`),O=L[0].indexOf("@")>0?L[1]:L[2],N=W(O);return N?(u=N[0],N[1]):void 0}}function z(L,O,N){return function(){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(O+" is deprecated, use "+N+" instead.",new Error("").stack),L.apply(L,arguments)}}function q(L){return L instanceof he?L:ke(L)?Ne(L):le(L)}q.resolve=q,q.nextTick=h,q.longStackSupport=!1;var ie=1;typeof process=="object"&&process&&{BROWSER:!0}.Q_DEBUG&&(q.longStackSupport=!0),q.defer=ce;function ce(){var L=[],O=[],N,V=B(ce.prototype),te=B(he.prototype);if(te.promiseDispatch=function(ue,Ge,Ze){var nt=l(arguments);L?(L.push(nt),Ge==="when"&&Ze[1]&&O.push(Ze[1])):q.nextTick(function(){N.promiseDispatch.apply(N,nt)})},te.valueOf=function(){if(L)return te;var ue=Ue(N);return _e(ue)&&(N=ue),ue},te.inspect=function(){return N?N.inspect():{state:"pending"}},q.longStackSupport&&d)try{throw new Error}catch(ue){te.stack=ue.stack.substring(ue.stack.indexOf(`
`)+1),te.stackCounter=ie++}function oe(ue){N=ue,q.longStackSupport&&d&&(te.source=ue),b(L,function(Ge,Ze){q.nextTick(function(){ue.promiseDispatch.apply(ue,Ze)})},void 0),L=void 0,O=void 0}return V.promise=te,V.resolve=function(ue){N||oe(q(ue))},V.fulfill=function(ue){N||oe(le(ue))},V.reject=function(ue){N||oe(ee(ue))},V.notify=function(ue){N||b(O,function(Ge,Ze){q.nextTick(function(){Ze(ue)})},void 0)},V}ce.prototype.makeNodeResolver=function(){var L=this;return function(O,N){O?L.reject(O):arguments.length>2?L.resolve(l(arguments,1)):L.resolve(N)}},q.Promise=se,q.promise=se;function se(L){if(typeof L!="function")throw new TypeError("resolver must be a function.");var O=ce();try{L(O.resolve,O.reject,O.notify)}catch(N){O.reject(N)}return O.promise}se.race=Ie,se.all=tt,se.reject=ee,se.resolve=q,q.passByCopy=function(L){return L},he.prototype.passByCopy=function(){return this},q.join=function(L,O){return q(L).join(O)},he.prototype.join=function(L){return q([this,L]).spread(function(O,N){if(O===N)return O;throw new Error("Q can't join: not the same: "+O+" "+N)})},q.race=Ie;function Ie(L){return se(function(O,N){for(var V=0,te=L.length;V<te;V++)q(L[V]).then(O,N)})}he.prototype.race=function(){return this.then(q.race)},q.makePromise=he;function he(L,O,N){O===void 0&&(O=function(oe){return ee(new Error("Promise does not support operation: "+oe))}),N===void 0&&(N=function(){return{state:"unknown"}});var V=B(he.prototype);if(V.promiseDispatch=function(oe,ue,Ge){var Ze;try{L[ue]?Ze=L[ue].apply(V,Ge):Ze=O.call(V,ue,Ge)}catch(nt){Ze=ee(nt)}oe&&oe(Ze)},V.inspect=N,N){var te=N();te.state==="rejected"&&(V.exception=te.reason),V.valueOf=function(){var oe=N();return oe.state==="pending"||oe.state==="rejected"?V:oe.value}}return V}he.prototype.toString=function(){return"[object Promise]"},he.prototype.then=function(L,O,N){var V=this,te=ce(),oe=!1;function ue(nt){try{return typeof L=="function"?L(nt):nt}catch(ut){return ee(ut)}}function Ge(nt){if(typeof O=="function"){D(nt,V);try{return O(nt)}catch(ut){return ee(ut)}}return ee(nt)}function Ze(nt){return typeof N=="function"?N(nt):nt}return q.nextTick(function(){V.promiseDispatch(function(nt){oe||(oe=!0,te.resolve(ue(nt)))},"when",[function(nt){oe||(oe=!0,te.resolve(Ge(nt)))}])}),V.promiseDispatch(void 0,"when",[void 0,function(nt){var ut,ht=!1;try{ut=Ze(nt)}catch(Cl){if(ht=!0,q.onerror)q.onerror(Cl);else throw Cl}ht||te.notify(ut)}]),te.promise},q.tap=function(L,O){return q(L).tap(O)},he.prototype.tap=function(L){return L=q(L),this.then(function(O){return L.fcall(O).thenResolve(O)})},q.when=Me;function Me(L,O,N,V){return q(L).then(O,N,V)}he.prototype.thenResolve=function(L){return this.then(function(){return L})},q.thenResolve=function(L,O){return q(L).thenResolve(O)},he.prototype.thenReject=function(L){return this.then(function(){throw L})},q.thenReject=function(L,O){return q(L).thenReject(O)},q.nearer=Ue;function Ue(L){if(_e(L)){var O=L.inspect();if(O.state==="fulfilled")return O.value}return L}q.isPromise=_e;function _e(L){return L instanceof he}q.isPromiseAlike=ke;function ke(L){return M(L)&&typeof L.then=="function"}q.isPending=Ee;function Ee(L){return _e(L)&&L.inspect().state==="pending"}he.prototype.isPending=function(){return this.inspect().state==="pending"},q.isFulfilled=ye;function ye(L){return!_e(L)||L.inspect().state==="fulfilled"}he.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},q.isRejected=X;function X(L){return _e(L)&&L.inspect().state==="rejected"}he.prototype.isRejected=function(){return this.inspect().state==="rejected"};var Y=[],U=[],J=[],K=!0;function Z(){Y.length=0,U.length=0,K||(K=!0)}function Q(L,O){K&&(typeof process=="object"&&typeof process.emit=="function"&&q.nextTick.runAfter(function(){m(U,L)!==-1&&(process.emit("unhandledRejection",O,L),J.push(L))}),U.push(L),O&&typeof O.stack<"u"?Y.push(O.stack):Y.push("(no stack) "+O))}function fe(L){if(K){var O=m(U,L);O!==-1&&(typeof process=="object"&&typeof process.emit=="function"&&q.nextTick.runAfter(function(){var N=m(J,L);N!==-1&&(process.emit("rejectionHandled",Y[O],L),J.splice(N,1))}),U.splice(O,1),Y.splice(O,1))}}q.resetUnhandledRejections=Z,q.getUnhandledReasons=function(){return Y.slice()},q.stopUnhandledRejectionTracking=function(){Z(),K=!1},Z(),q.reject=ee;function ee(L){var O=he({when:function(N){return N&&fe(this),N?N(L):this}},function(){return this},function(){return{state:"rejected",reason:L}});return Q(O,L),O}q.fulfill=le;function le(L){return he({when:function(){return L},get:function(O){return L[O]},set:function(O,N){L[O]=N},delete:function(O){delete L[O]},post:function(O,N){return O==null?L.apply(void 0,N):L[O].apply(L,N)},apply:function(O,N){return L.apply(O,N)},keys:function(){return F(L)}},void 0,function(){return{state:"fulfilled",value:L}})}function Ne(L){var O=ce();return q.nextTick(function(){try{L.then(O.resolve,O.reject,O.notify)}catch(N){O.reject(N)}}),O.promise}q.master=He;function He(L){return he({isDef:function(){}},function(N,V){return rt(L,N,V)},function(){return q(L).inspect()})}q.spread=ft;function ft(L,O,N){return q(L).spread(O,N)}he.prototype.spread=function(L,O){return this.all().then(function(N){return L.apply(void 0,N)},O)},q.async=de;function de(L){return function(){function O(oe,ue){var Ge;if(typeof StopIteration>"u"){try{Ge=N[oe](ue)}catch(Ze){return ee(Ze)}return Ge.done?q(Ge.value):Me(Ge.value,V,te)}else{try{Ge=N[oe](ue)}catch(Ze){return R(Ze)?q(Ze.value):ee(Ze)}return Me(Ge,V,te)}}var N=L.apply(this,arguments),V=O.bind(O,"next"),te=O.bind(O,"throw");return V()}}q.spawn=ve;function ve(L){q.done(q.async(L)())}q.return=Ce;function Ce(L){throw new P(L)}q.promised=re;function re(L){return function(){return ft([this,tt(arguments)],function(O,N){return L.apply(O,N)})}}q.dispatch=rt;function rt(L,O,N){return q(L).dispatch(O,N)}he.prototype.dispatch=function(L,O){var N=this,V=ce();return q.nextTick(function(){N.promiseDispatch(V.resolve,L,O)}),V.promise},q.get=function(L,O){return q(L).dispatch("get",[O])},he.prototype.get=function(L){return this.dispatch("get",[L])},q.set=function(L,O,N){return q(L).dispatch("set",[O,N])},he.prototype.set=function(L,O){return this.dispatch("set",[L,O])},q.del=q.delete=function(L,O){return q(L).dispatch("delete",[O])},he.prototype.del=he.prototype.delete=function(L){return this.dispatch("delete",[L])},q.mapply=q.post=function(L,O,N){return q(L).dispatch("post",[O,N])},he.prototype.mapply=he.prototype.post=function(L,O){return this.dispatch("post",[L,O])},q.send=q.mcall=q.invoke=function(L,O){return q(L).dispatch("post",[O,l(arguments,2)])},he.prototype.send=he.prototype.mcall=he.prototype.invoke=function(L){return this.dispatch("post",[L,l(arguments,1)])},q.fapply=function(L,O){return q(L).dispatch("apply",[void 0,O])},he.prototype.fapply=function(L){return this.dispatch("apply",[void 0,L])},q.try=q.fcall=function(L){return q(L).dispatch("apply",[void 0,l(arguments,1)])},he.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])},q.fbind=function(L){var O=q(L),N=l(arguments,1);return function(){return O.dispatch("apply",[this,N.concat(l(arguments))])}},he.prototype.fbind=function(){var L=this,O=l(arguments);return function(){return L.dispatch("apply",[this,O.concat(l(arguments))])}},q.keys=function(L){return q(L).dispatch("keys",[])},he.prototype.keys=function(){return this.dispatch("keys",[])},q.all=tt;function tt(L){return Me(L,function(O){var N=0,V=ce();return b(O,function(te,oe,ue){var Ge;_e(oe)&&(Ge=oe.inspect()).state==="fulfilled"?O[ue]=Ge.value:(++N,Me(oe,function(Ze){O[ue]=Ze,--N===0&&V.resolve(O)},V.reject,function(Ze){V.notify({index:ue,value:Ze})}))},void 0),N===0&&V.resolve(O),V.promise})}he.prototype.all=function(){return tt(this)},q.any=Rt;function Rt(L){if(L.length===0)return q.resolve();var O=q.defer(),N=0;return b(L,function(V,te,oe){var ue=L[oe];N++,Me(ue,Ge,Ze,nt);function Ge(ut){O.resolve(ut)}function Ze(ut){if(N--,N===0){var ht=ut||new Error(""+ut);ht.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+ht.message,O.reject(ht)}}function nt(ut){O.notify({index:oe,value:ut})}},void 0),O.promise}he.prototype.any=function(){return Rt(this)},q.allResolved=z($t,"allResolved","allSettled");function $t(L){return Me(L,function(O){return O=E(O,q),Me(tt(E(O,function(N){return Me(N,r,r)})),function(){return O})})}he.prototype.allResolved=function(){return $t(this)},q.allSettled=ds;function ds(L){return q(L).allSettled()}he.prototype.allSettled=function(){return this.then(function(L){return tt(E(L,function(O){O=q(O);function N(){return O.inspect()}return O.then(N,N)}))})},q.fail=q.catch=function(L,O){return q(L).then(void 0,O)},he.prototype.fail=he.prototype.catch=function(L){return this.then(void 0,L)},q.progress=me;function me(L,O){return q(L).then(void 0,void 0,O)}he.prototype.progress=function(L){return this.then(void 0,void 0,L)},q.fin=q.finally=function(L,O){return q(L).finally(O)},he.prototype.fin=he.prototype.finally=function(L){if(!L||typeof L.apply!="function")throw new Error("Q can't apply finally callback");return L=q(L),this.then(function(O){return L.fcall().then(function(){return O})},function(O){return L.fcall().then(function(){throw O})})},q.done=function(L,O,N,V){return q(L).done(O,N,V)},he.prototype.done=function(L,O,N){var V=function(oe){q.nextTick(function(){if(D(oe,te),q.onerror)q.onerror(oe);else throw oe})},te=L||O||N?this.then(L,O,N):this;typeof process=="object"&&process&&process.domain&&(V=process.domain.bind(V)),te.then(void 0,V)},q.timeout=function(L,O,N){return q(L).timeout(O,N)},he.prototype.timeout=function(L,O){var N=ce(),V=setTimeout(function(){(!O||typeof O=="string")&&(O=new Error(O||"Timed out after "+L+" ms"),O.code="ETIMEDOUT"),N.reject(O)},L);return this.then(function(te){clearTimeout(V),N.resolve(te)},function(te){clearTimeout(V),N.reject(te)},N.notify),N.promise},q.delay=function(L,O){return O===void 0&&(O=L,L=void 0),q(L).delay(O)},he.prototype.delay=function(L){return this.then(function(O){var N=ce();return setTimeout(function(){N.resolve(O)},L),N.promise})},q.nfapply=function(L,O){return q(L).nfapply(O)},he.prototype.nfapply=function(L){var O=ce(),N=l(L);return N.push(O.makeNodeResolver()),this.fapply(N).fail(O.reject),O.promise},q.nfcall=function(L){var O=l(arguments,1);return q(L).nfapply(O)},he.prototype.nfcall=function(){var L=l(arguments),O=ce();return L.push(O.makeNodeResolver()),this.fapply(L).fail(O.reject),O.promise},q.nfbind=q.denodeify=function(L){if(L===void 0)throw new Error("Q can't wrap an undefined function");var O=l(arguments,1);return function(){var N=O.concat(l(arguments)),V=ce();return N.push(V.makeNodeResolver()),q(L).fapply(N).fail(V.reject),V.promise}},he.prototype.nfbind=he.prototype.denodeify=function(){var L=l(arguments);return L.unshift(this),q.denodeify.apply(void 0,L)},q.nbind=function(L,O){var N=l(arguments,2);return function(){var V=N.concat(l(arguments)),te=ce();V.push(te.makeNodeResolver());function oe(){return L.apply(O,arguments)}return q(oe).fapply(V).fail(te.reject),te.promise}},he.prototype.nbind=function(){var L=l(arguments,0);return L.unshift(this),q.nbind.apply(void 0,L)},q.nmapply=q.npost=function(L,O,N){return q(L).npost(O,N)},he.prototype.nmapply=he.prototype.npost=function(L,O){var N=l(O||[]),V=ce();return N.push(V.makeNodeResolver()),this.dispatch("post",[L,N]).fail(V.reject),V.promise},q.nsend=q.nmcall=q.ninvoke=function(L,O){var N=l(arguments,2),V=ce();return N.push(V.makeNodeResolver()),q(L).dispatch("post",[O,N]).fail(V.reject),V.promise},he.prototype.nsend=he.prototype.nmcall=he.prototype.ninvoke=function(L){var O=l(arguments,1),N=ce();return O.push(N.makeNodeResolver()),this.dispatch("post",[L,O]).fail(N.reject),N.promise},q.nodeify=pe;function pe(L,O){return q(L).nodeify(O)}he.prototype.nodeify=function(L){if(L)this.then(function(O){q.nextTick(function(){L(null,O)})},function(O){q.nextTick(function(){L(O)})});else return this},q.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var qt=G();return q})},7533:(c,d)=>{var f=Math.pow(2,8),u=Math.pow(2,16),r=Math.pow(2,24),h=Math.pow(2,32),p=Math.pow(2,40),_=Math.pow(2,48),l=Math.pow(2,52),b=Math.pow(2,1022);d.readByte=function(m){return m>127?m-256:m},d.readI16=function(m,E){E=E||0;var B=m[E+1];return B+=m[E]<<8,m[E]&128&&(B-=u),B},d.readI32=function(m,E){E=E||0;var B=m[E+3];return B+=m[E+2]<<8,B+=m[E+1]<<16,B+=m[E]*r,m[E]&128&&(B-=h),B},d.writeI16=function(m,E){return m[1]=E&255,E>>=8,m[0]=E&255,m},d.writeI32=function(m,E){return m[3]=E&255,E>>=8,m[2]=E&255,E>>=8,m[1]=E&255,E>>=8,m[0]=E&255,m},d.readDouble=function(m,E){E=E||0;var B=m[E]&128,I=(m[E+1]&240)>>4;I+=(m[E]&127)<<4;var k=m[E+7];switch(k+=m[E+6]<<8,k+=m[E+5]<<16,k+=m[E+4]*r,k+=m[E+3]*h,k+=m[E+2]*p,k+=(m[E+1]&15)*_,I){case 0:I=-1022;break;case 2047:return k?NaN:B?-1/0:1/0;default:k+=l,I-=1023}return B&&(k*=-1),k*Math.pow(2,I-52)},d.writeDouble=function(m,E){var B,I,k;return m[0]=E<0?128:0,E=Math.abs(E),E!==E?(B=0x8000000000000,I=2047):E===1/0?(B=0,I=2047):(I=Math.floor(Math.log(E)/Math.LN2),k=Math.pow(2,-I),E*k<1&&(I--,k*=2),I+1023>=2047?(B=0,I=2047):I+1023>=1?(B=(E*k-1)*l,I+=1023):(B=E*b*l,I=0)),m[1]=I<<4&240,m[0]|=I>>4&127,m[7]=B&255,B=Math.floor(B/f),m[6]=B&255,B=Math.floor(B/f),m[5]=B&255,B=Math.floor(B/f),m[4]=B&255,B>>=8,m[3]=B&255,B>>=8,m[2]=B&255,B>>=8,m[1]|=B&15,m}},4711:(c,d,f)=>{var u=f(8764).Buffer,r=f(1291),h=f(7533),p=f(135),_=f(5406),l=_.Type;c.exports=B;var b=-65536,m=-2147418112,E=255;B.VERSION_MASK=b,B.VERSION_1=m,B.TYPE_MASK=E;function B(I,k,F){this.trans=I,this.strictRead=k!==void 0?k:!1,this.strictWrite=F!==void 0?F:!0,this._seqid=null}B.prototype.flush=function(){return this.trans.flush()},B.prototype.writeMessageBegin=function(I,k,F){this.strictWrite?(this.writeI32(m|k),this.writeString(I),this.writeI32(F)):(this.writeString(I),this.writeByte(k),this.writeI32(F)),this._seqid!==null?r.warning("SeqId already set",{name:I}):(this._seqid=F,this.trans.setCurrSeqId(F))},B.prototype.writeMessageEnd=function(){this._seqid!==null?this._seqid=null:r.warning("No seqid to unset")},B.prototype.writeStructBegin=function(I){},B.prototype.writeStructEnd=function(){},B.prototype.writeFieldBegin=function(I,k,F){this.writeByte(k),this.writeI16(F)},B.prototype.writeFieldEnd=function(){},B.prototype.writeFieldStop=function(){this.writeByte(l.STOP)},B.prototype.writeMapBegin=function(I,k,F){this.writeByte(I),this.writeByte(k),this.writeI32(F)},B.prototype.writeMapEnd=function(){},B.prototype.writeListBegin=function(I,k){this.writeByte(I),this.writeI32(k)},B.prototype.writeListEnd=function(){},B.prototype.writeSetBegin=function(I,k){this.writeByte(I),this.writeI32(k)},B.prototype.writeSetEnd=function(){},B.prototype.writeBool=function(I){I?this.writeByte(1):this.writeByte(0)},B.prototype.writeByte=function(I){this.trans.write(new u([I]))},B.prototype.writeI16=function(I){this.trans.write(h.writeI16(new u(2),I))},B.prototype.writeI32=function(I){this.trans.write(h.writeI32(new u(4),I))},B.prototype.writeI64=function(I){I.buffer?this.trans.write(I.buffer):this.trans.write(new p(I).buffer)},B.prototype.writeDouble=function(I){this.trans.write(h.writeDouble(new u(8),I))},B.prototype.writeStringOrBinary=function(I,k,F){if(typeof F=="string")this.writeI32(u.byteLength(F,k)),this.trans.write(new u(F,k));else if(F instanceof u||Object.prototype.toString.call(F)=="[object Uint8Array]")this.writeI32(F.length),this.trans.write(F);else throw new Error(I+" called without a string/Buffer argument: "+F)},B.prototype.writeString=function(I){this.writeStringOrBinary("writeString","utf8",I)},B.prototype.writeBinary=function(I){this.writeStringOrBinary("writeBinary","binary",I)},B.prototype.readMessageBegin=function(){var I=this.readI32(),k,F,x;if(I<0){var M=I&b;if(M!=m)throw new _.TProtocolException(_.TProtocolExceptionType.BAD_VERSION,"Bad version in readMessageBegin: "+I);k=I&E,F=this.readString(),x=this.readI32()}else{if(this.strictRead)throw new _.TProtocolException(_.TProtocolExceptionType.BAD_VERSION,"No protocol version header");F=this.trans.read(I),k=this.readByte(),x=this.readI32()}return{fname:F,mtype:k,rseqid:x}},B.prototype.readMessageEnd=function(){},B.prototype.readStructBegin=function(){return{fname:""}},B.prototype.readStructEnd=function(){},B.prototype.readFieldBegin=function(){var I=this.readByte();if(I==l.STOP)return{fname:null,ftype:I,fid:0};var k=this.readI16();return{fname:null,ftype:I,fid:k}},B.prototype.readFieldEnd=function(){},B.prototype.readMapBegin=function(){var I=this.readByte(),k=this.readByte(),F=this.readI32();return{ktype:I,vtype:k,size:F}},B.prototype.readMapEnd=function(){},B.prototype.readListBegin=function(){var I=this.readByte(),k=this.readI32();return{etype:I,size:k}},B.prototype.readListEnd=function(){},B.prototype.readSetBegin=function(){var I=this.readByte(),k=this.readI32();return{etype:I,size:k}},B.prototype.readSetEnd=function(){},B.prototype.readBool=function(){var I=this.readByte();return I!==0},B.prototype.readByte=function(){return this.trans.readByte()},B.prototype.readI16=function(){return this.trans.readI16()},B.prototype.readI32=function(){return this.trans.readI32()},B.prototype.readI64=function(){var I=this.trans.read(8);return new p(I)},B.prototype.readDouble=function(){return this.trans.readDouble()},B.prototype.readBinary=function(){var I=this.readI32();if(I===0)return new u(0);if(I<0)throw new _.TProtocolException(_.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(I)},B.prototype.readString=function(){var I=this.readI32();if(I===0)return"";if(I<0)throw new _.TProtocolException(_.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(I)},B.prototype.getTransport=function(){return this.trans},B.prototype.skip=function(I){switch(I){case l.BOOL:this.readBool();break;case l.BYTE:this.readByte();break;case l.I16:this.readI16();break;case l.I32:this.readI32();break;case l.I64:this.readI64();break;case l.DOUBLE:this.readDouble();break;case l.STRING:this.readString();break;case l.STRUCT:for(this.readStructBegin();;){var k=this.readFieldBegin();if(k.ftype===l.STOP)break;this.skip(k.ftype),this.readFieldEnd()}this.readStructEnd();break;case l.MAP:for(var F=this.readMapBegin(),x=0;x<F.size;++x)this.skip(F.ktype),this.skip(F.vtype);this.readMapEnd();break;case l.SET:for(var M=this.readSetBegin(),R=0;R<M.size;++R)this.skip(M.etype);this.readSetEnd();break;case l.LIST:for(var P=this.readListBegin(),C=0;C<P.size;++C)this.skip(P.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+I)}}},9262:(c,d,f)=>{d.Thrift=f(5406);var u=f(5455);d.WSConnection=u.WSConnection,d.createWSConnection=u.createWSConnection,d.createWSClient=u.createWSClient;var r=f(4050);d.XHRConnection=r.XHRConnection,d.createXHRConnection=r.createXHRConnection,d.createXHRClient=r.createXHRClient,d.Int64=f(135),d.Q=f(8486);var h=f(4184);d.Multiplexer=h.Multiplexer,d.TBufferedTransport=f(8869),d.TFramedTransport=f(7584),d.TWebSocketTransport=f(5764),d.Protocol=f(5086),d.TJSONProtocol=f(5086),d.TBinaryProtocol=f(4711),d.TCompactProtocol=f(9277)},8869:(c,d,f)=>{var u=f(8764).Buffer,r=f(7533),h=f(3590),p=f(5190);c.exports=_;function _(l,b){this.defaultReadBufferSize=1024,this.writeBufferSize=512,this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0,this.onFlush=b}_.prototype=new p,_.prototype.reset=function(){this.inBuf=new u(this.defaultReadBufferSize),this.readCursor=0,this.writeCursor=0,this.outBuffers=[],this.outCount=0},_.receiver=function(l,b){var m=new _;return function(E){if(m.writeCursor+E.length>m.inBuf.length){var B=new u(m.writeCursor+E.length);m.inBuf.copy(B,0,0,m.writeCursor),m.inBuf=B}E.copy(m.inBuf,m.writeCursor,0),m.writeCursor+=E.length,l(m,b)}},_.prototype.commitPosition=function(){var l=this.writeCursor-this.readCursor,b=l*2>this.defaultReadBufferSize?l*2:this.defaultReadBufferSize,m=new u(b);l>0&&this.inBuf.copy(m,0,this.readCursor,this.writeCursor),this.readCursor=0,this.writeCursor=l,this.inBuf=m},_.prototype.rollbackPosition=function(){this.readCursor=0},_.prototype.isOpen=function(){return!0},_.prototype.open=function(){},_.prototype.close=function(){},_.prototype.setCurrSeqId=function(l){this._seqid=l},_.prototype.ensureAvailable=function(l){if(this.readCursor+l>this.writeCursor)throw new h},_.prototype.read=function(l){this.ensureAvailable(l);var b=new u(l);return this.inBuf.copy(b,0,this.readCursor,this.readCursor+l),this.readCursor+=l,b},_.prototype.readByte=function(){return this.ensureAvailable(1),r.readByte(this.inBuf[this.readCursor++])},_.prototype.readI16=function(){this.ensureAvailable(2);var l=r.readI16(this.inBuf,this.readCursor);return this.readCursor+=2,l},_.prototype.readI32=function(){this.ensureAvailable(4);var l=r.readI32(this.inBuf,this.readCursor);return this.readCursor+=4,l},_.prototype.readDouble=function(){this.ensureAvailable(8);var l=r.readDouble(this.inBuf,this.readCursor);return this.readCursor+=8,l},_.prototype.readString=function(l){this.ensureAvailable(l);var b=this.inBuf.toString("utf8",this.readCursor,this.readCursor+l);return this.readCursor+=l,b},_.prototype.borrow=function(){var l={buf:this.inBuf,readIndex:this.readCursor,writeIndex:this.writeCursor};return l},_.prototype.consume=function(l){this.readCursor+=l},_.prototype.write=function(l){typeof l=="string"&&(l=new u(l,"utf8")),this.outBuffers.push(l),this.outCount+=l.length},_.prototype.flush=function(){var l=this._seqid;if(this._seqid=null,!(this.outCount<1)){var b=new u(this.outCount),m=0;this.outBuffers.forEach(function(E){E.copy(b,m,0),m+=E.length}),this.onFlush&&this.onFlush(b,l),this.outBuffers=[],this.outCount=0}}},9277:(c,d,f)=>{var u=f(8764).Buffer,r=f(1291),h=f(135),p=f(5406),_=p.Type;c.exports=F;var l=Math.pow(2,8),b=Math.pow(2,24),m=Math.pow(2,32),E=Math.pow(2,40),B=Math.pow(2,48),I=Math.pow(2,52),k=Math.pow(2,1022);function F(x){this.trans=x,this.lastField_=[],this.lastFieldId_=0,this.string_limit_=0,this.string_buf_=null,this.string_buf_size_=0,this.container_limit_=0,this.booleanField_={name:null,hasBoolValue:!1},this.boolValue_={hasBoolValue:!1,boolValue:!1}}F.PROTOCOL_ID=-126,F.VERSION_N=1,F.VERSION_MASK=31,F.TYPE_MASK=-32,F.TYPE_BITS=7,F.TYPE_SHIFT_AMOUNT=5,F.Types={CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12},F.TTypeToCType=[F.Types.CT_STOP,0,F.Types.CT_BOOLEAN_TRUE,F.Types.CT_BYTE,F.Types.CT_DOUBLE,0,F.Types.CT_I16,0,F.Types.CT_I32,0,F.Types.CT_I64,F.Types.CT_BINARY,F.Types.CT_STRUCT,F.Types.CT_MAP,F.Types.CT_SET,F.Types.CT_LIST],F.prototype.getTransport=function(){return this.trans},F.prototype.getCompactType=function(x){return F.TTypeToCType[x]},F.prototype.getTType=function(x){switch(x){case _.STOP:return _.STOP;case F.Types.CT_BOOLEAN_FALSE:case F.Types.CT_BOOLEAN_TRUE:return _.BOOL;case F.Types.CT_BYTE:return _.BYTE;case F.Types.CT_I16:return _.I16;case F.Types.CT_I32:return _.I32;case F.Types.CT_I64:return _.I64;case F.Types.CT_DOUBLE:return _.DOUBLE;case F.Types.CT_BINARY:return _.STRING;case F.Types.CT_LIST:return _.LIST;case F.Types.CT_SET:return _.SET;case F.Types.CT_MAP:return _.MAP;case F.Types.CT_STRUCT:return _.STRUCT;default:throw new p.TProtocolException(p.TProtocolExceptionType.INVALID_DATA,"Unknown type: "+x)}return _.STOP},F.prototype.flush=function(){return this.trans.flush()},F.prototype.writeMessageBegin=function(x,M,R){this.writeByte(F.PROTOCOL_ID),this.writeByte(F.VERSION_N&F.VERSION_MASK|M<<F.TYPE_SHIFT_AMOUNT&F.TYPE_MASK),this.writeVarint32(R),this.writeString(x),this._seqid?r.warning("SeqId already set",{name:x}):(this._seqid=R,this.trans.setCurrSeqId(R))},F.prototype.writeMessageEnd=function(){},F.prototype.writeStructBegin=function(x){this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0},F.prototype.writeStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},F.prototype.writeFieldBegin=function(x,M,R){if(M!=_.BOOL)return this.writeFieldBeginInternal(x,M,R,-1);this.booleanField_.name=x,this.booleanField_.fieldType=M,this.booleanField_.fieldId=R},F.prototype.writeFieldEnd=function(){},F.prototype.writeFieldStop=function(){this.writeByte(F.Types.CT_STOP)},F.prototype.writeMapBegin=function(x,M,R){R===0?this.writeByte(0):(this.writeVarint32(R),this.writeByte(this.getCompactType(x)<<4|this.getCompactType(M)))},F.prototype.writeMapEnd=function(){},F.prototype.writeListBegin=function(x,M){this.writeCollectionBegin(x,M)},F.prototype.writeListEnd=function(){},F.prototype.writeSetBegin=function(x,M){this.writeCollectionBegin(x,M)},F.prototype.writeSetEnd=function(){},F.prototype.writeBool=function(x){this.booleanField_.name!==null?(this.writeFieldBeginInternal(this.booleanField_.name,this.booleanField_.fieldType,this.booleanField_.fieldId,x?F.Types.CT_BOOLEAN_TRUE:F.Types.CT_BOOLEAN_FALSE),this.booleanField_.name=null):this.writeByte(x?F.Types.CT_BOOLEAN_TRUE:F.Types.CT_BOOLEAN_FALSE)},F.prototype.writeByte=function(x){this.trans.write(new u([x]))},F.prototype.writeI16=function(x){this.writeVarint32(this.i32ToZigzag(x))},F.prototype.writeI32=function(x){this.writeVarint32(this.i32ToZigzag(x))},F.prototype.writeI64=function(x){this.writeVarint64(this.i64ToZigzag(x))},F.prototype.writeDouble=function(x){var M=new u(8),R,P,C;M[7]=x<0?128:0,x=Math.abs(x),x!==x?(R=0x8000000000000,P=2047):x===1/0?(R=0,P=2047):(P=Math.floor(Math.log(x)/Math.LN2),C=Math.pow(2,-P),x*C<1&&(P--,C*=2),P+1023>=2047?(R=0,P=2047):P+1023>=1?(R=(x*C-1)*I,P+=1023):(R=x*k*I,P=0)),M[6]=P<<4&240,M[7]|=P>>4&127,M[0]=R&255,R=Math.floor(R/l),M[1]=R&255,R=Math.floor(R/l),M[2]=R&255,R=Math.floor(R/l),M[3]=R&255,R>>=8,M[4]=R&255,R>>=8,M[5]=R&255,R>>=8,M[6]|=R&15,this.trans.write(M)},F.prototype.writeStringOrBinary=function(x,M,R){if(typeof R=="string")this.writeVarint32(u.byteLength(R,M)),this.trans.write(new u(R,M));else if(R instanceof u||Object.prototype.toString.call(R)=="[object Uint8Array]")this.writeVarint32(R.length),this.trans.write(R);else throw new Error(x+" called without a string/Buffer argument: "+R)},F.prototype.writeString=function(x){this.writeStringOrBinary("writeString","utf8",x)},F.prototype.writeBinary=function(x){this.writeStringOrBinary("writeBinary","binary",x)},F.prototype.writeFieldBeginInternal=function(x,M,R,P){var C=P==-1?this.getCompactType(M):P;R>this.lastFieldId_&&R-this.lastFieldId_<=15?this.writeByte(R-this.lastFieldId_<<4|C):(this.writeByte(C),this.writeI16(R)),this.lastFieldId_=R},F.prototype.writeCollectionBegin=function(x,M){M<=14?this.writeByte(M<<4|this.getCompactType(x)):(this.writeByte(240|this.getCompactType(x)),this.writeVarint32(M))},F.prototype.writeVarint32=function(x){for(var M=new u(5),R=0;;)if(x&-128)M[R++]=x&127|128,x=x>>>7;else{M[R++]=x;break}var P=new u(R);M.copy(P,0,0,R),this.trans.write(P)},F.prototype.writeVarint64=function(x){if(typeof x=="number"&&(x=new h(x)),!(x instanceof h))throw new p.TProtocolException(p.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+x);for(var M=new u(10),R=0,P=x.buffer.readUInt32BE(0,!0),C=x.buffer.readUInt32BE(4,!0),D=0;;)if(!(C&-128)&&P===0){M[R++]=C;break}else M[R++]=C&127|128,D=P<<25,C=C>>>7,P=P>>>7,C=C|D;var j=new u(R);M.copy(j,0,0,R),this.trans.write(j)},F.prototype.i64ToZigzag=function(x){if(typeof x=="string"?x=new h(parseInt(x,10)):typeof x=="number"&&(x=new h(x)),!(x instanceof h))throw new p.TProtocolException(p.TProtocolExceptionType.INVALID_DATA,"Expected Int64 or Number, found: "+x);var M=x.buffer.readUInt32BE(0,!0),R=x.buffer.readUInt32BE(4,!0),P=M>>>31;return M=(M<<1|R>>>31)^(P?4294967295:0),R=R<<1^(P?4294967295:0),new h(M,R)},F.prototype.i32ToZigzag=function(x){return x<<1^(x&2147483648?4294967295:0)},F.prototype.readMessageBegin=function(){var x=this.trans.readByte();if(x!=F.PROTOCOL_ID)throw new p.TProtocolException(p.TProtocolExceptionType.BAD_VERSION,"Bad protocol identifier "+x);var M=this.trans.readByte(),R=M&F.VERSION_MASK;if(R!=F.VERSION_N)throw new p.TProtocolException(p.TProtocolExceptionType.BAD_VERSION,"Bad protocol version "+R);var P=M>>F.TYPE_SHIFT_AMOUNT&F.TYPE_BITS,C=this.readVarint32(),D=this.readString();return{fname:D,mtype:P,rseqid:C}},F.prototype.readMessageEnd=function(){},F.prototype.readStructBegin=function(){return this.lastField_.push(this.lastFieldId_),this.lastFieldId_=0,{fname:""}},F.prototype.readStructEnd=function(){this.lastFieldId_=this.lastField_.pop()},F.prototype.readFieldBegin=function(){var x=0,M=this.trans.readByte(M),R=M&15;if(R==F.Types.CT_STOP)return{fname:null,ftype:p.Type.STOP,fid:0};var P=(M&240)>>>4;P===0?x=this.readI16():x=this.lastFieldId_+P;var C=this.getTType(R);return(R==F.Types.CT_BOOLEAN_TRUE||R==F.Types.CT_BOOLEAN_FALSE)&&(this.boolValue_.hasBoolValue=!0,this.boolValue_.boolValue=R==F.Types.CT_BOOLEAN_TRUE),this.lastFieldId_=x,{fname:null,ftype:C,fid:x}},F.prototype.readFieldEnd=function(){},F.prototype.readMapBegin=function(){var x=this.readVarint32();if(x<0)throw new p.TProtocolException(p.TProtocolExceptionType.NEGATIVE_SIZE,"Negative map size");var M=0;x!==0&&(M=this.trans.readByte());var R=this.getTType((M&240)>>>4),P=this.getTType(M&15);return{ktype:R,vtype:P,size:x}},F.prototype.readMapEnd=function(){},F.prototype.readListBegin=function(){var x=this.trans.readByte(),M=x>>>4&15;if(M==15&&(M=this.readVarint32()),M<0)throw new p.TProtocolException(p.TProtocolExceptionType.NEGATIVE_SIZE,"Negative list size");var R=this.getTType(x&15);return{etype:R,size:M}},F.prototype.readListEnd=function(){},F.prototype.readSetBegin=function(){return this.readListBegin()},F.prototype.readSetEnd=function(){},F.prototype.readBool=function(){var x=!1;if(this.boolValue_.hasBoolValue===!0)x=this.boolValue_.boolValue,this.boolValue_.hasBoolValue=!1;else{var M=this.trans.readByte();M.rsize,x=M.value==F.Types.CT_BOOLEAN_TRUE}return x},F.prototype.readByte=function(){return this.trans.readByte()},F.prototype.readI16=function(){return this.readI32()},F.prototype.readI32=function(){return this.zigzagToI32(this.readVarint32())},F.prototype.readI64=function(){return this.zigzagToI64(this.readVarint64())},F.prototype.readDouble=function(){var x=this.trans.read(8),M=0,R=x[M+7]&128,P=(x[M+6]&240)>>4;P+=(x[M+7]&127)<<4;var C=x[M];switch(C+=x[M+1]<<8,C+=x[M+2]<<16,C+=x[M+3]*b,C+=x[M+4]*m,C+=x[M+5]*E,C+=(x[M+6]&15)*B,P){case 0:P=-1022;break;case 2047:return C?NaN:R?-1/0:1/0;default:C+=I,P-=1023}return R&&(C*=-1),C*Math.pow(2,P-52)},F.prototype.readBinary=function(){var x=this.readVarint32();if(x===0)return new u(0);if(x<0)throw new p.TProtocolException(p.TProtocolExceptionType.NEGATIVE_SIZE,"Negative binary size");return this.trans.read(x)},F.prototype.readString=function(){var x=this.readVarint32();if(x===0)return"";if(x<0)throw new p.TProtocolException(p.TProtocolExceptionType.NEGATIVE_SIZE,"Negative string size");return this.trans.readString(x)},F.prototype.readVarint32=function(){return this.readVarint64().toNumber()},F.prototype.readVarint64=function(){for(var x=0,M=0,R=0,P=0;;){var C=this.trans.readByte();if(x++,P<=25?M=M|(C&127)<<P:25<P&&P<32?(M=M|(C&127)<<P,R=R|(C&127)>>>32-P):R=R|(C&127)<<P-32,P+=7,!(C&128))break;if(x>=10)throw new p.TProtocolException(p.TProtocolExceptionType.INVALID_DATA,"Variable-length int over 10 bytes.")}return new h(R,M)},F.prototype.zigzagToI32=function(x){return x>>>1^-1*(x&1)},F.prototype.zigzagToI64=function(x){var M=x.buffer.readUInt32BE(0,!0),R=x.buffer.readUInt32BE(4,!0),P=new h(M&0,R&1);P._2scomp();var C=P.buffer.readUInt32BE(0,!0),D=P.buffer.readUInt32BE(4,!0),j=M<<31;return M=M>>>1^C,R=(R>>>1|j)^D,new h(M,R)},F.prototype.skip=function(x){switch(x){case _.BOOL:this.readBool();break;case _.BYTE:this.readByte();break;case _.I16:this.readI16();break;case _.I32:this.readI32();break;case _.I64:this.readI64();break;case _.DOUBLE:this.readDouble();break;case _.STRING:this.readString();break;case _.STRUCT:for(this.readStructBegin();;){var M=this.readFieldBegin();if(M.ftype===_.STOP)break;this.skip(M.ftype),this.readFieldEnd()}this.readStructEnd();break;case _.MAP:for(var R=this.readMapBegin(),P=0;P<R.size;++P)this.skip(R.ktype),this.skip(R.vtype);this.readMapEnd();break;case _.SET:for(var C=this.readSetBegin(),D=0;D<C.size;++D)this.skip(C.etype);this.readSetEnd();break;case _.LIST:for(var j=this.readListBegin(),$=0;$<j.size;++$)this.skip(j.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+x)}}},6243:c=>{c.exports=d;function d(f,u){f.Client&&(f=f.Client);var r=function(_,l){u.write(_,l)},h=new u.transport(void 0,r),p=new f(h,u.protocol);return h.client=p,u.client=p,p}},7584:(c,d,f)=>{var u=f(8764).Buffer,r=f(7533),h=f(3590),p=f(5190);c.exports=_;function _(l,b){this.inBuf=l||new u(0),this.outBuffers=[],this.outCount=0,this.readPos=0,this.onFlush=b}_.prototype=new p,_.receiver=function(l,b){var m=null;return function(E){for(m&&(E=u.concat([m,E]),m=null);E.length;){if(E.length<4){m=E;return}var B=r.readI32(E,0);if(E.length<4+B){m=E;return}var I=E.slice(4,4+B);m=E.slice(4+B),l(new _(I),b),E=m,m=null}}},_.prototype.commitPosition=function(){},_.prototype.rollbackPosition=function(){},_.prototype.isOpen=function(){return!0},_.prototype.open=function(){},_.prototype.close=function(){},_.prototype.setCurrSeqId=function(l){this._seqid=l},_.prototype.ensureAvailable=function(l){if(this.readPos+l>this.inBuf.length)throw new h},_.prototype.read=function(l){this.ensureAvailable(l);var b=this.readPos+l;if(this.inBuf.length<b)throw new Error("read("+l+") failed - not enough data");var m=this.inBuf.slice(this.readPos,b);return this.readPos=b,m},_.prototype.readByte=function(){return this.ensureAvailable(1),r.readByte(this.inBuf[this.readPos++])},_.prototype.readI16=function(){this.ensureAvailable(2);var l=r.readI16(this.inBuf,this.readPos);return this.readPos+=2,l},_.prototype.readI32=function(){this.ensureAvailable(4);var l=r.readI32(this.inBuf,this.readPos);return this.readPos+=4,l},_.prototype.readDouble=function(){this.ensureAvailable(8);var l=r.readDouble(this.inBuf,this.readPos);return this.readPos+=8,l},_.prototype.readString=function(l){this.ensureAvailable(l);var b=this.inBuf.toString("utf8",this.readPos,this.readPos+l);return this.readPos+=l,b},_.prototype.borrow=function(){return{buf:this.inBuf,readIndex:this.readPos,writeIndex:this.inBuf.length}},_.prototype.consume=function(l){this.readPos+=l},_.prototype.write=function(l,b){typeof l=="string"&&(l=new u(l,b||"utf8")),this.outBuffers.push(l),this.outCount+=l.length},_.prototype.flush=function(){var l=this._seqid;this._seqid=null;var b=new u(this.outCount),m=0;if(this.outBuffers.forEach(function(B){B.copy(b,m,0),m+=B.length}),this.onFlush){var E=new u(b.length+4);r.writeI32(E,b.length),b.copy(E,4,0,b.length),this.onFlush&&this.onFlush(E,l)}this.outBuffers=[],this.outCount=0}},5190:(c,d,f)=>{var u=f(8764).Buffer,r=f(9539),h=f(9277),p=f(4711),_=f(3590);function l(G){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=G}r.inherits(l,Error),c.exports=D;var b=0,m=1,E=0,B=32/8,I=48/8,k=64/8,F=96/8,x=112/8,M=4095,R=1,P=1073741823;function C(G){var z=f(8869);this.outputBuffer=null;var q=this;this.transport=new z(null,function(ie){q.outputBuffer=ie}),this.transport.inBuf=G||u.alloc(0),this.transport.writeCursor=this.transport.inBuf.length,this.protocol=new h(this.transport)}C.prototype.readVarint32=function(){return this.protocol.readVarint32()},C.prototype.writeVarint32=function(G){this.protocol.writeVarint32(G)},C.prototype.readString=function(){return this.protocol.readString()},C.prototype.writeString=function(G){this.protocol.writeString(G)},C.prototype.getOutCount=function(){return this.transport.outCount},C.prototype.write=function(G){this.transport.write(G)},C.prototype.toBuffer=function(){return this.transport.flush(),this.outputBuffer},D.SubprotocolId={BINARY:0,JSON:1,COMPACT:2};function D(){this.maxFrameSize=P,this.protocolId=D.SubprotocolId.BINARY,this.rheaders={},this.wheaders={},this.inBuf=u.alloc(0),this.outCount=0,this.flags=null,this.seqid=0,this.shouldWriteHeaders=!0}var j=function(G,z){if(typeof G!="string"||typeof z!="string")throw new l("Header key and values must be strings")},$=function(G){for(var z=Object.keys(D.SubprotocolId),q=0;q<z.length;q++)if(G===D.SubprotocolId[z[q]])return!0;throw new Error(G+" is not a valid protocol id")};D.prototype.setSeqId=function(G){this.seqid=G},D.prototype.getSeqId=function(G){return this.seqid},D.prototype.setFlags=function(G){this.flags=G},D.prototype.getReadHeaders=function(){return this.rheaders},D.prototype.setReadHeader=function(G,z){j(G,z),this.rheaders[G]=z},D.prototype.clearReadHeaders=function(){this.rheaders={}},D.prototype.getWriteHeaders=function(){return this.wheaders},D.prototype.setWriteHeader=function(G,z){j(G,z),this.wheaders[G]=z},D.prototype.clearWriteHeaders=function(){this.wheaders={}},D.prototype.setMaxFrameSize=function(G){this.maxFrameSize=G},D.prototype.setProtocolId=function(G){$(G),this.protocolId=G},D.prototype.getProtocolId=function(){return this.protocolId};var W=function(G){var z=G.readInt32BE();return(z&p.VERSION_MASK)===p.VERSION_1},H=function(G){var z=G.readInt8(b),q=G.readInt8(m);return z===h.PROTOCOL_ID&&(q&h.VERSION_MASK)===h.VERSION_N};D.prototype.readHeaders=function(){var G=this.inBuf,z=!1;if(W(G)&&(this.setProtocolId(D.SubprotocolId.BINARY),z=!0),H(G)&&(this.setProtocolId(D.SubprotocolId.COMPACT),z=!0),z){this.shouldWriteHeaders=!1;return}var q=G.readInt32BE(E);if(q>this.maxFrameSize)throw new l("Frame exceeds maximum frame size");var ie=G.readInt16BE(B);if(this.shouldWriteHeaders=ie===M,!!this.shouldWriteHeaders){this.setFlags(G.readInt16BE(I)),this.setSeqId(G.readInt32BE(k));var ce=G.readInt16BE(F)*4,se=x+ce;if(se>G.length)throw new l("Header size is greater than frame size");var Ie=u.alloc(ce);G.copy(Ie,0,x,se);var he=new C(Ie);this.setProtocolId(he.readVarint32());var Me=he.readVarint32();if(Me>0)throw new l("Transforms are not yet supported");for(;;)try{var Ue=he.readVarint32();if(Ue!==R)break;for(var _e=he.readVarint32(),ke=0;ke<_e;ke++){var Ee=he.readString(),ye=he.readString();this.setReadHeader(Ee,ye)}}catch(X){if(X instanceof _)break;throw X}return this.read(se),this.getReadHeaders()}},D.prototype.writeHeaders=function(){if(this.shouldWriteHeaders){var G=this.getWriteHeaders(),z=new C;z.writeVarint32(this.protocolId),z.writeVarint32(0);var q=Object.keys(G);if(q.length>0){z.writeVarint32(R),z.writeVarint32(q.length);for(var ie=0;ie<q.length;ie++){var ce=q[ie],se=G[ce];z.writeString(ce),z.writeString(se)}}var Ie=z.getOutCount(),he=(4-Ie%4)%4,Me=u.alloc(2);Me.writeInt16BE(Math.floor((Ie+he)/4));var Ue=u.alloc(he);Ue.fill(0),z.write(Ue);var _e=z.toBuffer(),ke=u.alloc(4);ke.writeInt32BE(10+this.outCount+_e.length);var Ee=u.alloc(2);Ee.writeInt16BE(M);var ye=u.alloc(2);ye.writeInt16BE(0);var X=u.alloc(4);X.writeInt32BE(this.getSeqId());var Y=u.concat([ke,Ee,ye,X,Me,_e]);this.outBuffers.unshift(Y),this.outCount+=Y.length}}},3590:(c,d,f)=>{var u=f(9539);c.exports=r;function r(h){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=h}u.inherits(r,Error)},5197:(c,d,f)=>{var u=f(8764).Buffer,r=f(135),h=c.exports={},p=Math.pow(2,24),_=Math.pow(2,31),l=Math.pow(2,32),b=Math.pow(10,11);h.toDecimalString=function(m){var E=m.buffer,B=m.offset;if(!E[B]&&!(E[B+1]&224)||!~E[B]&&!~(E[B+1]&224))return m.toString();var I=E[B]&128;if(I){for(var k=!1,F=new u(8),x=7;x>=0;--x)F[x]=~E[B+x]+(k?0:1)&255,k|=E[B+x];E=F}var M=E[B+1]+(E[B]<<8),R=E[B+7]+(E[B+6]<<8)+(E[B+5]<<16)+E[B+4]*p+(E[B+3]+(E[B+2]<<8))*l+M*74976710656,P=Math.floor(R/b)+M*2814;return R=("00000000000"+String(R%b)).slice(-11),(I?"-":"")+String(P)+R},h.fromDecimalString=function(m){var E=m.charAt(0)==="-";if(m.length<(E?17:16))return new r(+m);if(m.length>(E?20:19))throw new RangeError("Too many digits for Int64: "+m);var B=+m.slice(E?1:0,-15),I=+m.slice(-15)+B*2764472320,k=Math.floor(I/l)+B*232830;if(I=I%l,k>=_&&!(E&&k==_&&I==0))throw new RangeError("The magnitude is too large for Int64.");return E&&(k=~k,I===0?k=k+1&4294967295:I=~I+1,k=2147483648|k),new r(k,I)}},6502:(c,d,f)=>{var u=f(135);f(5197),c.exports=function(){var r,h,p={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},_,l=function(M){throw new SyntaxError(M)},b=function(M){return M&&M!==h&&l("Expected '"+M+"' instead of '"+h+"'"),h=_.charAt(r),r+=1,h},m=function(){var M,R="";for(h==="-"&&(R="-",b("-"));h>="0"&&h<="9";)R+=h,b();if(h===".")for(R+=".";b()&&h>="0"&&h<="9";)R+=h;if(h==="e"||h==="E")for(R+=h,b(),(h==="-"||h==="+")&&(R+=h,b());h>="0"&&h<="9";)R+=h,b();if(M=+R,!isFinite(M))l("Bad number");else return M>=u.MAX_INT||M<=u.MIN_INT?R:M},E=function(){var M,R,P="",C;if(h==='"')for(;b();){if(h==='"')return b(),P;if(h==="\\")if(b(),h==="u"){for(C=0,R=0;R<4&&(M=parseInt(b(),16),!!isFinite(M));R+=1)C=C*16+M;P+=String.fromCharCode(C)}else if(typeof p[h]=="string")P+=p[h];else break;else P+=h}l("Bad string")},B=function(){for(;h&&h<=" ";)b()},I=function(){switch(h){case"t":return b("t"),b("r"),b("u"),b("e"),!0;case"f":return b("f"),b("a"),b("l"),b("s"),b("e"),!1;case"n":return b("n"),b("u"),b("l"),b("l"),null}l("Unexpected '"+h+"'")},k,F=function(){var M=[];if(h==="["){if(b("["),B(),h==="]")return b("]"),M;for(;h;){if(M.push(k()),B(),h==="]")return b("]"),M;b(","),B()}}l("Bad array")},x=function(){var M,R={};if(h==="{"){if(b("{"),B(),h==="}")return b("}"),R;for(;h;){if(M=E(),B(),b(":"),Object.hasOwnProperty.call(R,M)&&l('Duplicate key "'+M+'"'),R[M]=k(),B(),h==="}")return b("}"),R;b(","),B()}}l("Bad object")};return k=function(){switch(B(),h){case"{":return x();case"[":return F();case'"':return E();case"-":return m();default:return h>="0"&&h<="9"?m():I()}},function(M){var R;return _=M,r=0,h=" ",R=k(),B(),h&&l("Syntax error"),R}}()},5086:(c,d,f)=>{var u=f(8764).Buffer,r=f(135),h=f(5406),p=h.Type;f(9539);var _=f(5197),l=f(6502),b=f(3590);c.exports=m;function m(E){this.tstack=[],this.tpos=[],this.trans=E}m.Type={},m.Type[p.BOOL]='"tf"',m.Type[p.BYTE]='"i8"',m.Type[p.I16]='"i16"',m.Type[p.I32]='"i32"',m.Type[p.I64]='"i64"',m.Type[p.DOUBLE]='"dbl"',m.Type[p.STRUCT]='"rec"',m.Type[p.STRING]='"str"',m.Type[p.MAP]='"map"',m.Type[p.LIST]='"lst"',m.Type[p.SET]='"set"',m.RType={},m.RType.tf=p.BOOL,m.RType.i8=p.BYTE,m.RType.i16=p.I16,m.RType.i32=p.I32,m.RType.i64=p.I64,m.RType.dbl=p.DOUBLE,m.RType.rec=p.STRUCT,m.RType.str=p.STRING,m.RType.map=p.MAP,m.RType.lst=p.LIST,m.RType.set=p.SET,m.Version=1,m.prototype.flush=function(){return this.writeToTransportIfStackIsFlushable(),this.trans.flush()},m.prototype.writeToTransportIfStackIsFlushable=function(){this.tstack.length===1&&this.trans.write(this.tstack.pop())},m.prototype.writeMessageBegin=function(E,B,I){this.tstack.push([m.Version,'"'+E+'"',B,I])},m.prototype.writeMessageEnd=function(){var E=this.tstack.pop();this.wobj=this.tstack.pop(),this.wobj.push(E),this.wbuf="["+this.wobj.join(",")+"]",this.trans.write(this.wbuf)},m.prototype.writeStructBegin=function(E){this.tpos.push(this.tstack.length),this.tstack.push({})},m.prototype.writeStructEnd=function(){var E=this.tpos.pop(),B=this.tstack[E],I="{",k=!0;for(var F in B)k?k=!1:I+=",",I+=F+":"+B[F];I+="}",this.tstack[E]=I,this.writeToTransportIfStackIsFlushable()},m.prototype.writeFieldBegin=function(E,B,I){this.tpos.push(this.tstack.length),this.tstack.push({fieldId:'"'+I+'"',fieldType:m.Type[B]})},m.prototype.writeFieldEnd=function(){var E=this.tstack.pop(),B=this.tstack.pop();":"+E==":[object Object]"?this.tstack[this.tstack.length-1][B.fieldId]="{"+B.fieldType+":"+JSON.stringify(E)+"}":this.tstack[this.tstack.length-1][B.fieldId]="{"+B.fieldType+":"+E+"}",this.tpos.pop(),this.writeToTransportIfStackIsFlushable()},m.prototype.writeFieldStop=function(){},m.prototype.writeMapBegin=function(E,B,I){this.tpos.push(this.tstack.length),this.tstack.push([m.Type[E],m.Type[B],0])},m.prototype.writeMapEnd=function(){var E=this.tpos.pop();if(E!=this.tstack.length){(this.tstack.length-E-1)%2!==0&&this.tstack.push("");var B=(this.tstack.length-E-1)/2;this.tstack[E][this.tstack[E].length-1]=B;for(var I="}",k=!0;this.tstack.length>E+1;){var F=this.tstack.pop(),x=this.tstack.pop();k?k=!1:I=","+I,isNaN(x)||(x='"'+x+'"'),I=x+":"+F+I}I="{"+I,this.tstack[E].push(I),this.tstack[E]="["+this.tstack[E].join(",")+"]",this.writeToTransportIfStackIsFlushable()}},m.prototype.writeListBegin=function(E,B){this.tpos.push(this.tstack.length),this.tstack.push([m.Type[E],B])},m.prototype.writeListEnd=function(){for(var E=this.tpos.pop();this.tstack.length>E+1;){var B=this.tstack[E+1];this.tstack.splice(E+1,1),this.tstack[E].push(B)}this.tstack[E]="["+this.tstack[E].join(",")+"]",this.writeToTransportIfStackIsFlushable()},m.prototype.writeSetBegin=function(E,B){this.tpos.push(this.tstack.length),this.tstack.push([m.Type[E],B])},m.prototype.writeSetEnd=function(){for(var E=this.tpos.pop();this.tstack.length>E+1;){var B=this.tstack[E+1];this.tstack.splice(E+1,1),this.tstack[E].push(B)}this.tstack[E]="["+this.tstack[E].join(",")+"]",this.writeToTransportIfStackIsFlushable()},m.prototype.writeBool=function(E){this.tstack.push(E?1:0)},m.prototype.writeByte=function(E){this.tstack.push(E)},m.prototype.writeI16=function(E){this.tstack.push(E)},m.prototype.writeI32=function(E){this.tstack.push(E)},m.prototype.writeI64=function(E){E instanceof r?this.tstack.push(_.toDecimalString(E)):this.tstack.push(E)},m.prototype.writeDouble=function(E){this.tstack.push(E)},m.prototype.writeString=function(E){if(E===null)this.tstack.push(null);else{if(typeof E=="string")var B=E;else if(E instanceof u)var B=E.toString("utf8");else throw new Error("writeString called without a string/Buffer argument: "+E);for(var I="",k=0;k<B.length;k++){var F=B.charAt(k);F==='"'?I+='\\"':F==="\\"?I+="\\\\":F==="\b"?I+="\\b":F==="\f"?I+="\\f":F===`
`?I+="\\n":F==="\r"?I+="\\r":F==="	"?I+="\\t":I+=F}this.tstack.push('"'+I+'"')}},m.prototype.writeBinary=function(E){if(typeof E=="string")var B=new u(E,"binary");else if(E instanceof u||Object.prototype.toString.call(E)=="[object Uint8Array]")var B=E;else throw new Error("writeBinary called without a string/Buffer argument: "+E);this.tstack.push('"'+B.toString("base64")+'"')},m.prototype.readMessageBegin=function(){this.rstack=[],this.rpos=[];var E=this.trans.borrow();if(E.readIndex>=E.writeIndex)throw new b;var B=E.readIndex;if(E.buf[B]!==91)throw new Error("Malformed JSON input, no opening bracket");B++;for(var I=1,k=!1;B<E.writeIndex;B++){var F=E.buf[B];if(k)F===34?k=!1:F===92&&(B+=1);else if(F===91)I+=1;else if(F===93){if(I-=1,I===0)break}else F===34&&(k=!0)}if(I!==0)throw new b;this.robj=l(E.buf.slice(E.readIndex,B+1).toString()),this.trans.consume(B+1-E.readIndex);var x=this.robj.shift();if(x!=m.Version)throw new Error("Wrong thrift protocol version: "+x);var M={};return M.fname=this.robj.shift(),M.mtype=this.robj.shift(),M.rseqid=this.robj.shift(),this.rstack.push(this.robj.shift()),M},m.prototype.readMessageEnd=function(){},m.prototype.readStructBegin=function(){var E={};return E.fname="",this.rstack[this.rstack.length-1]instanceof Array&&this.rstack.push(this.rstack[this.rstack.length-1].shift()),E},m.prototype.readStructEnd=function(){this.rstack.pop()},m.prototype.readFieldBegin=function(){var E={},B=-1,I=p.STOP;for(var k in this.rstack[this.rstack.length-1])if(k!==null){B=parseInt(k,10),this.rpos.push(this.rstack.length);var F=this.rstack[this.rstack.length-1][B];delete this.rstack[this.rstack.length-1][B],this.rstack.push(F);break}if(B!=-1)for(var x in this.rstack[this.rstack.length-1])m.RType[x]!==null&&(I=m.RType[x],this.rstack[this.rstack.length-1]=this.rstack[this.rstack.length-1][x]);return E.fname="",E.ftype=I,E.fid=B,E},m.prototype.readFieldEnd=function(){for(var E=this.rpos.pop();this.rstack.length>E;)this.rstack.pop()},m.prototype.readMapBegin=function(){var E=this.rstack.pop(),B=E.shift();B instanceof Array&&(this.rstack.push(E),E=B,B=E.shift());var I={};return I.ktype=m.RType[B],I.vtype=m.RType[E.shift()],I.size=E.shift(),this.rpos.push(this.rstack.length),this.rstack.push(E.shift()),I},m.prototype.readMapEnd=function(){this.readFieldEnd()},m.prototype.readListBegin=function(){var E=this.rstack[this.rstack.length-1],B={};return B.etype=m.RType[E.shift()],B.size=E.shift(),this.rpos.push(this.rstack.length),this.rstack.push(E.shift()),B},m.prototype.readListEnd=function(){var E=this.rpos.pop()-2,B=this.rstack;B.pop(),B instanceof Array&&B.length>E&&B[E].length>0&&B.push(B[E].shift())},m.prototype.readSetBegin=function(){return this.readListBegin()},m.prototype.readSetEnd=function(){return this.readListEnd()},m.prototype.readBool=function(){return this.readValue()=="1"},m.prototype.readByte=function(){return this.readI32()},m.prototype.readI16=function(){return this.readI32()},m.prototype.readI32=function(E){return+this.readValue()},m.prototype.readValue=function(E){E===void 0&&(E=this.rstack[this.rstack.length-1]);var B={};if(E instanceof Array)E.length===0?B.value=void 0:B.value=E.shift();else if(!(E instanceof r)&&E instanceof Object){for(var I in E)if(I!==null){this.rstack.push(E[I]),delete E[I],B.value=I;break}}else B.value=E,this.rstack.pop();return B.value},m.prototype.readI64=function(){var E=this.readValue();return typeof E=="string"?_.fromDecimalString(E):new r(E)},m.prototype.readDouble=function(){return this.readI32()},m.prototype.readBinary=function(){return new u(this.readValue(),"base64")},m.prototype.readString=function(){return this.readValue()},m.prototype.getTransport=function(){return this.trans},m.prototype.skip=function(E){switch(E){case p.BOOL:this.readBool();break;case p.BYTE:this.readByte();break;case p.I16:this.readI16();break;case p.I32:this.readI32();break;case p.I64:this.readI64();break;case p.DOUBLE:this.readDouble();break;case p.STRING:this.readString();break;case p.STRUCT:for(this.readStructBegin();;){var B=this.readFieldBegin();if(B.ftype===p.STOP)break;this.skip(B.ftype),this.readFieldEnd()}this.readStructEnd();break;case p.MAP:for(var I=this.readMapBegin(),k=0;k<I.size;++k)this.skip(I.ktype),this.skip(I.vtype);this.readMapEnd();break;case p.SET:for(var F=this.readSetBegin(),x=0;x<F.size;++x)this.skip(F.etype);this.readSetEnd();break;case p.LIST:for(var M=this.readListBegin(),R=0;R<M.size;++R)this.skip(M.etype);this.readListEnd();break;default:throw new Error("Invalid type: "+E)}}},1291:(c,d,f)=>{var u=f(9539),r=function(){},h=console.log,p="error";function _(k){return function(){var F=["thrift: ["+k+"] "].concat(Array.from(arguments));return h(u.format.apply(null,F))}}var l=r,b=r,m=r,E=r,B=r;d.setLogFunc=function(k){h=k};var I=d.setLogLevel=function(k){switch(l=b=m=E=B=r,p=k,p){case"trace":l=_("TRACE");case"debug":b=_("DEBUG");case"error":m=_("ERROR");case"warning":E=_("WARN");case"info":B=_("INFO")}};I(p),d.getLogLevel=function(){return p},d.trace=function(){return l.apply(null,arguments)},d.debug=function(){return b.apply(null,arguments)},d.error=function(){return m.apply(null,arguments)},d.warning=function(){return E.apply(null,arguments)},d.info=function(){return B.apply(null,arguments)}},4184:(c,d,f)=>{var u=f(9539),r=f(5406);d.Multiplexer=p;function h(_,l,b){function m(E,B,I){l.call(this,E,B,I)}return u.inherits(m,l),m.prototype.writeMessageBegin=function(E,B,I){B==r.MessageType.CALL||B==r.MessageType.ONEWAY?(b.seqId2Service[I]=_,m.super_.prototype.writeMessageBegin.call(this,_+":"+E,B,I)):m.super_.prototype.writeMessageBegin.call(this,E,B,I)},m}function p(){this.seqid=0}p.prototype.createClient=function(_,l,b){l.Client&&(l=l.Client);var m=function(F,x){b.write(F,x)},E=new b.transport(void 0,m),B=new h(_,b.protocol,b),I=new l(E,B),k=this;return I.new_seqid=function(){return k.seqid+=1,k.seqid},typeof b.client!="object"&&(b.client={}),b.client[_]=I,I}},5406:(c,d,f)=>{var u=f(9539),r=d.Type={STOP:0,VOID:1,BOOL:2,BYTE:3,I08:3,DOUBLE:4,I16:6,I32:8,I64:10,STRING:11,UTF7:11,STRUCT:12,MAP:13,SET:14,LIST:15,UTF8:16,UTF16:17};d.MessageType={CALL:1,REPLY:2,EXCEPTION:3,ONEWAY:4},d.TException=h;function h(E){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=E}u.inherits(h,Error);var p=d.TApplicationExceptionType={UNKNOWN:0,UNKNOWN_METHOD:1,INVALID_MESSAGE_TYPE:2,WRONG_METHOD_NAME:3,BAD_SEQUENCE_ID:4,MISSING_RESULT:5,INTERNAL_ERROR:6,PROTOCOL_ERROR:7,INVALID_TRANSFORM:8,INVALID_PROTOCOL:9,UNSUPPORTED_CLIENT_TYPE:10};d.TApplicationException=_;function _(E,B){h.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.type=E||p.UNKNOWN,this.name=this.constructor.name,this.message=B}u.inherits(_,h),_.prototype.read=function(E){for(var B=E.readStructBegin("TApplicationException");B=E.readFieldBegin(),B.ftype!=r.STOP;){switch(B.fid){case 1:B.ftype==r.STRING?(B=E.readString(),this.message=B):B=E.skip(B.ftype);break;case 2:B.ftype==r.I32?(B=E.readI32(),this.type=B):B=E.skip(B.ftype);break;default:B=E.skip(B.ftype);break}E.readFieldEnd()}E.readStructEnd()},_.prototype.write=function(E){E.writeStructBegin("TApplicationException"),this.message&&(E.writeFieldBegin("message",r.STRING,1),E.writeString(this.message),E.writeFieldEnd()),this.code&&(E.writeFieldBegin("type",r.I32,2),E.writeI32(this.code),E.writeFieldEnd()),E.writeFieldStop(),E.writeStructEnd()},d.TProtocolExceptionType={UNKNOWN:0,INVALID_DATA:1,NEGATIVE_SIZE:2,SIZE_LIMIT:3,BAD_VERSION:4,NOT_IMPLEMENTED:5,DEPTH_LIMIT:6},d.TProtocolException=l;function l(E,B){Error.call(this),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.type=E,this.message=B}u.inherits(l,Error),d.objectLength=function(E){return Object.keys(E).length},d.inherits=function(E,B){u.inherits(E,B)};var b,m;b=function(E,B){if(!E)return E;var I;B.shift===void 0?I=B:I=B[0];var k=I,F=E.length,x=[],M,R;for(M=0;M<F;M++)R=E[M],I===null?x.push(R):I===m||I===b?x.push(I(R,B.slice(1))):x.push(new k(R));return x},m=function(E,B){if(!E)return E;var I;B.shift===void 0?I=B:I=B[0];var k=I,F={},x;for(var M in E)E.hasOwnProperty(M)&&(x=E[M],I===null?F[M]=x:I===m||I===b?F[M]=I(x,B.slice(1)):F[M]=new k(x));return F},c.exports.copyMap=m,c.exports.copyList=b},5455:(c,d,f)=>{var u=f(8764).Buffer,r=f(9539),h=f(6792),p=f(7187).EventEmitter,_=f(5406),l=f(8869),b=f(5086),m=f(3590),E=f(6243),B=f(3818);d.WSConnection=I;function I(k,F,x){p.call(this),this.options=x||{},this.host=k,this.port=F,this.secure=this.options.secure||!1,this.transport=this.options.transport||l,this.protocol=this.options.protocol||b,this.path=this.options.path,this.send_pending=[],this.seqId2Service={},this.wsOptions={host:this.host,port:this.port||80,path:this.options.path||"/",headers:this.options.headers||{}};for(var M in this.options.wsOptions)this.wsOptions[M]=this.options.wsOptions[M]}r.inherits(I,p),I.prototype.__reset=function(){this.socket=null,this.send_pending=[]},I.prototype.__onOpen=function(){this.emit("open"),this.send_pending.length>0&&(this.send_pending.forEach(function(k){this.socket.send(k)},this),this.send_pending=[])},I.prototype.__onClose=function(k){this.emit("close"),this.__reset()},I.prototype.__decodeCallback=function(k){var F=new this.protocol(k);try{for(;;){var x=F.readMessageBegin(),M=x.rseqid*-1,R=this.client,P=this.seqId2Service[x.rseqid];P&&(R=this.client[P],delete this.seqId2Service[x.rseqid]),R._reqs[M]=function(C,D){k.commitPosition();var j=R._reqs[x.rseqid];delete R._reqs[x.rseqid],j&&j(C,D)},R["recv_"+x.fname]?R["recv_"+x.fname](F,x.mtype,M):(delete R._reqs[M],this.emit("error",new _.TApplicationException(_.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(C){if(C instanceof m)k.rollbackPosition();else throw C}},I.prototype.__onData=function(k){Object.prototype.toString.call(k)==="[object ArrayBuffer]"&&(k=new Uint8Array(k));var F=new u(k);this.transport.receiver(this.__decodeCallback.bind(this))(F)},I.prototype.__onMessage=function(k){this.__onData(k.data)},I.prototype.__onError=function(k){this.emit("error",k),this.socket.close()},I.prototype.isOpen=function(){return this.socket&&this.socket.readyState===this.socket.OPEN},I.prototype.open=function(){this.socket&&this.socket.readyState!==this.socket.CLOSED||(B.isBrowser?this.socket=new h(this.uri()):this.socket=new h(this.uri(),"",this.wsOptions),this.socket.binaryType="arraybuffer",this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},I.prototype.close=function(){this.socket.close()},I.prototype.uri=function(){var k=this.secure?"wss":"ws",F="",x=this.path||"/",M=this.host;return this.port&&(k==="wss"&&this.port!==443||k==="ws"&&this.port!==80)&&(F=":"+this.port),k+"://"+M+F+x},I.prototype.write=function(k){this.isOpen()?this.socket.send(k):this.send_pending.push(k)},d.createWSConnection=function(k,F,x){return new I(k,F,x)},d.createWSClient=E},5764:(c,d,f)=>{var u=f(1291);c.exports=r;function r(h){this.__reset(h)}r.prototype.__reset=function(h){this.url=h,this.socket=null,this.callbacks=[],this.send_pending=[],this.send_buf="",this.recv_buf="",this.rb_wpos=0,this.rb_rpos=0},r.prototype.flush=function(h,p){var _=this;this.isOpen()?(this.socket.send(this.send_buf),this.callbacks.push(function(){var l=p;return function(b){_.setRecvBuffer(b),l()}}())):this.send_pending.push({buf:this.send_buf,cb:p})},r.prototype.__onOpen=function(){var h=this;this.send_pending.length>0&&(this.send_pending.forEach(function(p){h.socket.send(p.buf),h.callbacks.push(function(){var _=p.cb;return function(l){h.setRecvBuffer(l),_()}}())}),this.send_pending=[])},r.prototype.__onClose=function(h){this.__reset(this.url)},r.prototype.__onMessage=function(h){this.callbacks.length&&this.callbacks.shift()(h.data)},r.prototype.__onError=function(h){u.error("websocket: "+h.toString()),this.socket.close()},r.prototype.setRecvBuffer=function(h){this.recv_buf=h,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0},r.prototype.isOpen=function(){return this.socket&&this.socket.readyState==this.socket.OPEN},r.prototype.open=function(){this.socket&&this.socket.readyState!=this.socket.CLOSED||(this.socket=new WebSocket(this.url),this.socket.onopen=this.__onOpen.bind(this),this.socket.onmessage=this.__onMessage.bind(this),this.socket.onerror=this.__onError.bind(this),this.socket.onclose=this.__onClose.bind(this))},r.prototype.close=function(){this.socket.close()},r.prototype.read=function(h){var p=this.wpos-this.rpos;if(p===0)return"";var _=h;p<h&&(_=p);var l=this.read_buf.substr(this.rpos,_);return this.rpos+=_,l},r.prototype.readAll=function(){return this.recv_buf},r.prototype.write=function(h){this.send_buf=h},r.prototype.getSendBuffer=function(){return this.send_buf}},4050:(c,d,f)=>{var u=f(8764).Buffer,r=f(9539),h=f(7187).EventEmitter,p=f(5406),_=f(8869),l=f(5086),b=f(3590),m=f(6243);d.XHRConnection=E;function E(B,I,k){this.options=k||{},this.wpos=0,this.rpos=0,this.useCORS=k&&k.useCORS,this.send_buf="",this.recv_buf="",this.transport=k.transport||_,this.protocol=k.protocol||l,this.headers=k.headers||{},B=B||window.location.host,I=I||window.location.port;var F=k.https?"https://":"http://",x=k.path||"/";I===""&&(I=void 0),!I||I===80||I==="80"?this.url=F+B+x:this.url=F+B+":"+I+x,this.seqId2Service={}}r.inherits(E,h),E.prototype.getXmlHttpRequestObject=function(){try{return new XMLHttpRequest}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}throw"Your browser doesn't support XHR."},E.prototype.flush=function(){var B=this;if(this.url===void 0||this.url==="")return this.send_buf;var I=this.getXmlHttpRequestObject();I.overrideMimeType&&I.overrideMimeType("application/json"),I.onreadystatechange=function(){this.readyState==4&&this.status==200&&B.setRecvBuffer(this.responseText)},I.open("POST",this.url,!0),Object.keys(this.headers).forEach(function(k){I.setRequestHeader(k,B.headers[k])}),I.send(this.send_buf)},E.prototype.setRecvBuffer=function(B){if(this.recv_buf=B,this.recv_buf_sz=this.recv_buf.length,this.wpos=this.recv_buf.length,this.rpos=0,Object.prototype.toString.call(B)=="[object ArrayBuffer]")var I=new Uint8Array(B);var k=new u(I||B);this.transport.receiver(this.__decodeCallback.bind(this))(k)},E.prototype.__decodeCallback=function(B){var I=new this.protocol(B);try{for(;;){var k=I.readMessageBegin(),F=k.rseqid*-1,x=this.client,M=this.seqId2Service[k.rseqid];M&&(x=this.client[M],delete this.seqId2Service[k.rseqid]),x._reqs[F]=function(R,P){B.commitPosition();var C=x._reqs[k.rseqid];delete x._reqs[k.rseqid],C&&C(R,P)},x["recv_"+k.fname]?x["recv_"+k.fname](I,k.mtype,F):(delete x._reqs[F],this.emit("error",new p.TApplicationException(p.TApplicationExceptionType.WRONG_METHOD_NAME,"Received a response to an unknown RPC function")))}}catch(R){if(R instanceof b)B.rollbackPosition();else throw R}},E.prototype.isOpen=function(){return!0},E.prototype.open=function(){},E.prototype.close=function(){},E.prototype.read=function(B){var I=this.wpos-this.rpos;if(I===0)return"";var k=B;I<B&&(k=I);var F=this.read_buf.substr(this.rpos,k);return this.rpos+=k,F},E.prototype.readAll=function(){return this.recv_buf},E.prototype.write=function(B){this.send_buf=B,this.flush()},E.prototype.getSendBuffer=function(){return this.send_buf},d.createXHRConnection=function(B,I,k){return new E(B,I,k)},d.createXHRClient=m},384:c=>{c.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},5955:(c,d,f)=>{var u=f(2584),r=f(8662),h=f(6430),p=f(5692);function _(re){return re.call.bind(re)}var l=typeof BigInt<"u",b=typeof Symbol<"u",m=_(Object.prototype.toString),E=_(Number.prototype.valueOf),B=_(String.prototype.valueOf),I=_(Boolean.prototype.valueOf);if(l)var k=_(BigInt.prototype.valueOf);if(b)var F=_(Symbol.prototype.valueOf);function x(re,rt){if(typeof re!="object")return!1;try{return rt(re),!0}catch{return!1}}d.isArgumentsObject=u,d.isGeneratorFunction=r,d.isTypedArray=p;function M(re){return typeof Promise<"u"&&re instanceof Promise||re!==null&&typeof re=="object"&&typeof re.then=="function"&&typeof re.catch=="function"}d.isPromise=M;function R(re){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(re):p(re)||Y(re)}d.isArrayBufferView=R;function P(re){return h(re)==="Uint8Array"}d.isUint8Array=P;function C(re){return h(re)==="Uint8ClampedArray"}d.isUint8ClampedArray=C;function D(re){return h(re)==="Uint16Array"}d.isUint16Array=D;function j(re){return h(re)==="Uint32Array"}d.isUint32Array=j;function $(re){return h(re)==="Int8Array"}d.isInt8Array=$;function W(re){return h(re)==="Int16Array"}d.isInt16Array=W;function H(re){return h(re)==="Int32Array"}d.isInt32Array=H;function G(re){return h(re)==="Float32Array"}d.isFloat32Array=G;function z(re){return h(re)==="Float64Array"}d.isFloat64Array=z;function q(re){return h(re)==="BigInt64Array"}d.isBigInt64Array=q;function ie(re){return h(re)==="BigUint64Array"}d.isBigUint64Array=ie;function ce(re){return m(re)==="[object Map]"}ce.working=typeof Map<"u"&&ce(new Map);function se(re){return typeof Map>"u"?!1:ce.working?ce(re):re instanceof Map}d.isMap=se;function Ie(re){return m(re)==="[object Set]"}Ie.working=typeof Set<"u"&&Ie(new Set);function he(re){return typeof Set>"u"?!1:Ie.working?Ie(re):re instanceof Set}d.isSet=he;function Me(re){return m(re)==="[object WeakMap]"}Me.working=typeof WeakMap<"u"&&Me(new WeakMap);function Ue(re){return typeof WeakMap>"u"?!1:Me.working?Me(re):re instanceof WeakMap}d.isWeakMap=Ue;function _e(re){return m(re)==="[object WeakSet]"}_e.working=typeof WeakSet<"u"&&_e(new WeakSet);function ke(re){return _e(re)}d.isWeakSet=ke;function Ee(re){return m(re)==="[object ArrayBuffer]"}Ee.working=typeof ArrayBuffer<"u"&&Ee(new ArrayBuffer);function ye(re){return typeof ArrayBuffer>"u"?!1:Ee.working?Ee(re):re instanceof ArrayBuffer}d.isArrayBuffer=ye;function X(re){return m(re)==="[object DataView]"}X.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&X(new DataView(new ArrayBuffer(1),0,1));function Y(re){return typeof DataView>"u"?!1:X.working?X(re):re instanceof DataView}d.isDataView=Y;function U(re){return m(re)==="[object SharedArrayBuffer]"}U.working=typeof SharedArrayBuffer<"u"&&U(new SharedArrayBuffer);function J(re){return typeof SharedArrayBuffer>"u"?!1:U.working?U(re):re instanceof SharedArrayBuffer}d.isSharedArrayBuffer=J;function K(re){return m(re)==="[object AsyncFunction]"}d.isAsyncFunction=K;function Z(re){return m(re)==="[object Map Iterator]"}d.isMapIterator=Z;function Q(re){return m(re)==="[object Set Iterator]"}d.isSetIterator=Q;function fe(re){return m(re)==="[object Generator]"}d.isGeneratorObject=fe;function ee(re){return m(re)==="[object WebAssembly.Module]"}d.isWebAssemblyCompiledModule=ee;function le(re){return x(re,E)}d.isNumberObject=le;function Ne(re){return x(re,B)}d.isStringObject=Ne;function He(re){return x(re,I)}d.isBooleanObject=He;function ft(re){return l&&x(re,k)}d.isBigIntObject=ft;function de(re){return b&&x(re,F)}d.isSymbolObject=de;function ve(re){return le(re)||Ne(re)||He(re)||ft(re)||de(re)}d.isBoxedPrimitive=ve;function Ce(re){return typeof Uint8Array<"u"&&(ye(re)||J(re))}d.isAnyArrayBuffer=Ce,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(re){Object.defineProperty(d,re,{enumerable:!1,value:function(){throw new Error(re+" is not supported in userland")}})})},9539:(c,d,f)=>{var u=Object.getOwnPropertyDescriptors||function(Y){for(var U=Object.keys(Y),J={},K=0;K<U.length;K++)J[U[K]]=Object.getOwnPropertyDescriptor(Y,U[K]);return J},r=/%[sdj%]/g;d.format=function(X){if(!$(X)){for(var Y=[],U=0;U<arguments.length;U++)Y.push(l(arguments[U]));return Y.join(" ")}for(var U=1,J=arguments,K=J.length,Z=String(X).replace(r,function(fe){if(fe==="%%")return"%";if(U>=K)return fe;switch(fe){case"%s":return String(J[U++]);case"%d":return Number(J[U++]);case"%j":try{return JSON.stringify(J[U++])}catch{return"[Circular]"}default:return fe}}),Q=J[U];U<K;Q=J[++U])C(Q)||!z(Q)?Z+=" "+Q:Z+=" "+l(Q);return Z},d.deprecate=function(X,Y){if(typeof process<"u"&&process.noDeprecation===!0)return X;if(typeof process>"u")return function(){return d.deprecate(X,Y).apply(this,arguments)};var U=!1;function J(){if(!U){if(process.throwDeprecation)throw new Error(Y);process.traceDeprecation?console.trace(Y):console.error(Y),U=!0}return X.apply(this,arguments)}return J};var h={},p=/^$/;if({BROWSER:!0}.NODE_DEBUG){var _={BROWSER:!0}.NODE_DEBUG;_=_.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),p=new RegExp("^"+_+"$","i")}d.debuglog=function(X){if(X=X.toUpperCase(),!h[X])if(p.test(X)){var Y=process.pid;h[X]=function(){var U=d.format.apply(d,arguments);console.error("%s %d: %s",X,Y,U)}}else h[X]=function(){};return h[X]};function l(X,Y){var U={seen:[],stylize:m};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),P(Y)?U.showHidden=Y:Y&&d._extend(U,Y),H(U.showHidden)&&(U.showHidden=!1),H(U.depth)&&(U.depth=2),H(U.colors)&&(U.colors=!1),H(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=b),B(U,X,U.depth)}d.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function b(X,Y){var U=l.styles[Y];return U?"\x1B["+l.colors[U][0]+"m"+X+"\x1B["+l.colors[U][1]+"m":X}function m(X,Y){return X}function E(X){var Y={};return X.forEach(function(U,J){Y[U]=!0}),Y}function B(X,Y,U){if(X.customInspect&&Y&&ce(Y.inspect)&&Y.inspect!==d.inspect&&!(Y.constructor&&Y.constructor.prototype===Y)){var J=Y.inspect(U,X);return $(J)||(J=B(X,J,U)),J}var K=I(X,Y);if(K)return K;var Z=Object.keys(Y),Q=E(Z);if(X.showHidden&&(Z=Object.getOwnPropertyNames(Y)),ie(Y)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return k(Y);if(Z.length===0){if(ce(Y)){var fe=Y.name?": "+Y.name:"";return X.stylize("[Function"+fe+"]","special")}if(G(Y))return X.stylize(RegExp.prototype.toString.call(Y),"regexp");if(q(Y))return X.stylize(Date.prototype.toString.call(Y),"date");if(ie(Y))return k(Y)}var ee="",le=!1,Ne=["{","}"];if(R(Y)&&(le=!0,Ne=["[","]"]),ce(Y)){var He=Y.name?": "+Y.name:"";ee=" [Function"+He+"]"}if(G(Y)&&(ee=" "+RegExp.prototype.toString.call(Y)),q(Y)&&(ee=" "+Date.prototype.toUTCString.call(Y)),ie(Y)&&(ee=" "+k(Y)),Z.length===0&&(!le||Y.length==0))return Ne[0]+ee+Ne[1];if(U<0)return G(Y)?X.stylize(RegExp.prototype.toString.call(Y),"regexp"):X.stylize("[Object]","special");X.seen.push(Y);var ft;return le?ft=F(X,Y,U,Q,Z):ft=Z.map(function(de){return x(X,Y,U,Q,de,le)}),X.seen.pop(),M(ft,ee,Ne)}function I(X,Y){if(H(Y))return X.stylize("undefined","undefined");if($(Y)){var U="'"+JSON.stringify(Y).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return X.stylize(U,"string")}if(j(Y))return X.stylize(""+Y,"number");if(P(Y))return X.stylize(""+Y,"boolean");if(C(Y))return X.stylize("null","null")}function k(X){return"["+Error.prototype.toString.call(X)+"]"}function F(X,Y,U,J,K){for(var Z=[],Q=0,fe=Y.length;Q<fe;++Q)_e(Y,String(Q))?Z.push(x(X,Y,U,J,String(Q),!0)):Z.push("");return K.forEach(function(ee){ee.match(/^\d+$/)||Z.push(x(X,Y,U,J,ee,!0))}),Z}function x(X,Y,U,J,K,Z){var Q,fe,ee;if(ee=Object.getOwnPropertyDescriptor(Y,K)||{value:Y[K]},ee.get?ee.set?fe=X.stylize("[Getter/Setter]","special"):fe=X.stylize("[Getter]","special"):ee.set&&(fe=X.stylize("[Setter]","special")),_e(J,K)||(Q="["+K+"]"),fe||(X.seen.indexOf(ee.value)<0?(C(U)?fe=B(X,ee.value,null):fe=B(X,ee.value,U-1),fe.indexOf(`
`)>-1&&(Z?fe=fe.split(`
`).map(function(le){return"  "+le}).join(`
`).substr(2):fe=`
`+fe.split(`
`).map(function(le){return"   "+le}).join(`
`))):fe=X.stylize("[Circular]","special")),H(Q)){if(Z&&K.match(/^\d+$/))return fe;Q=JSON.stringify(""+K),Q.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Q=Q.substr(1,Q.length-2),Q=X.stylize(Q,"name")):(Q=Q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Q=X.stylize(Q,"string"))}return Q+": "+fe}function M(X,Y,U){var J=X.reduce(function(K,Z){return Z.indexOf(`
`)>=0,K+Z.replace(/\u001b\[\d\d?m/g,"").length+1},0);return J>60?U[0]+(Y===""?"":Y+`
 `)+" "+X.join(`,
  `)+" "+U[1]:U[0]+Y+" "+X.join(", ")+" "+U[1]}d.types=f(5955);function R(X){return Array.isArray(X)}d.isArray=R;function P(X){return typeof X=="boolean"}d.isBoolean=P;function C(X){return X===null}d.isNull=C;function D(X){return X==null}d.isNullOrUndefined=D;function j(X){return typeof X=="number"}d.isNumber=j;function $(X){return typeof X=="string"}d.isString=$;function W(X){return typeof X=="symbol"}d.isSymbol=W;function H(X){return X===void 0}d.isUndefined=H;function G(X){return z(X)&&Ie(X)==="[object RegExp]"}d.isRegExp=G,d.types.isRegExp=G;function z(X){return typeof X=="object"&&X!==null}d.isObject=z;function q(X){return z(X)&&Ie(X)==="[object Date]"}d.isDate=q,d.types.isDate=q;function ie(X){return z(X)&&(Ie(X)==="[object Error]"||X instanceof Error)}d.isError=ie,d.types.isNativeError=ie;function ce(X){return typeof X=="function"}d.isFunction=ce;function se(X){return X===null||typeof X=="boolean"||typeof X=="number"||typeof X=="string"||typeof X=="symbol"||typeof X>"u"}d.isPrimitive=se,d.isBuffer=f(384);function Ie(X){return Object.prototype.toString.call(X)}function he(X){return X<10?"0"+X.toString(10):X.toString(10)}var Me=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ue(){var X=new Date,Y=[he(X.getHours()),he(X.getMinutes()),he(X.getSeconds())].join(":");return[X.getDate(),Me[X.getMonth()],Y].join(" ")}d.log=function(){console.log("%s - %s",Ue(),d.format.apply(d,arguments))},d.inherits=f(5717),d._extend=function(X,Y){if(!Y||!z(Y))return X;for(var U=Object.keys(Y),J=U.length;J--;)X[U[J]]=Y[U[J]];return X};function _e(X,Y){return Object.prototype.hasOwnProperty.call(X,Y)}var ke=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;d.promisify=function(Y){if(typeof Y!="function")throw new TypeError('The "original" argument must be of type Function');if(ke&&Y[ke]){var U=Y[ke];if(typeof U!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(U,ke,{value:U,enumerable:!1,writable:!1,configurable:!0}),U}function U(){for(var J,K,Z=new Promise(function(ee,le){J=ee,K=le}),Q=[],fe=0;fe<arguments.length;fe++)Q.push(arguments[fe]);Q.push(function(ee,le){ee?K(ee):J(le)});try{Y.apply(this,Q)}catch(ee){K(ee)}return Z}return Object.setPrototypeOf(U,Object.getPrototypeOf(Y)),ke&&Object.defineProperty(U,ke,{value:U,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(U,u(Y))},d.promisify.custom=ke;function Ee(X,Y){if(!X){var U=new Error("Promise was rejected with a falsy value");U.reason=X,X=U}return Y(X)}function ye(X){if(typeof X!="function")throw new TypeError('The "original" argument must be of type Function');function Y(){for(var U=[],J=0;J<arguments.length;J++)U.push(arguments[J]);var K=U.pop();if(typeof K!="function")throw new TypeError("The last argument must be of type Function");var Z=this,Q=function(){return K.apply(Z,arguments)};X.apply(this,U).then(function(fe){process.nextTick(Q.bind(null,null,fe))},function(fe){process.nextTick(Ee.bind(null,fe,Q))})}return Object.setPrototypeOf(Y,Object.getPrototypeOf(X)),Object.defineProperties(Y,u(X)),Y}d.callbackify=ye},6430:(c,d,f)=>{var u=f(9804),r=f(6314),h=f(8914),p=h("Object.prototype.toString"),_=f(1405)(),l=_&&typeof Symbol.toStringTag=="symbol",b=r(),m=h("String.prototype.slice"),E={},B=f(4079),I=Object.getPrototypeOf;l&&B&&I&&u(b,function(x){if(typeof f.g[x]=="function"){var M=new f.g[x];if(!(Symbol.toStringTag in M))throw new EvalError("this engine has support for Symbol.toStringTag, but "+x+" does not have the property! Please report this.");var R=I(M),P=B(R,Symbol.toStringTag);if(!P){var C=I(R);P=B(C,Symbol.toStringTag)}E[x]=P.get}});var k=function(M){var R=!1;return u(E,function(P,C){if(!R)try{var D=P.call(M);D===C&&(R=D)}catch{}}),R},F=f(5692);c.exports=function(M){return F(M)?l?k(M):m(p(M),8,-1):!1}},4221:(c,d,f)=>{const r=f(9262).Thrift;f(135),f(2818);const h=f(4494),p=f(3962),_=f(1396),l=f(2607),b=class{constructor(o){this.user=null,this.passwd=null,this.dbname=null,o&&(o.user!==void 0&&o.user!==null&&(this.user=o.user),o.passwd!==void 0&&o.passwd!==null&&(this.passwd=o.passwd),o.dbname!==void 0&&o.dbname!==null&&(this.dbname=o.dbname))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.user=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.passwd=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.dbname=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_connect_args"),this.user!==null&&this.user!==void 0&&(o.writeFieldBegin("user",r.Type.STRING,1),o.writeString(this.user),o.writeFieldEnd()),this.passwd!==null&&this.passwd!==void 0&&(o.writeFieldBegin("passwd",r.Type.STRING,2),o.writeString(this.passwd),o.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(o.writeFieldBegin("dbname",r.Type.STRING,3),o.writeString(this.dbname),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},m=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRING?this.success=o.readString():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_connect_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRING,0),o.writeString(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},E=class{constructor(o){this.inputToken=null,this.dbname=null,o&&(o.inputToken!==void 0&&o.inputToken!==null&&(this.inputToken=o.inputToken),o.dbname!==void 0&&o.dbname!==null&&(this.dbname=o.dbname))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.inputToken=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.dbname=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_krb5_connect_args"),this.inputToken!==null&&this.inputToken!==void 0&&(o.writeFieldBegin("inputToken",r.Type.STRING,1),o.writeString(this.inputToken),o.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(o.writeFieldBegin("dbname",r.Type.STRING,2),o.writeString(this.dbname),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},B=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TKrb5Session(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TKrb5Session,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_krb5_connect_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},I=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_disconnect_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},k=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_disconnect_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},F=class{constructor(o){this.session=null,this.dbname=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dbname!==void 0&&o.dbname!==null&&(this.dbname=o.dbname))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.dbname=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_switch_database_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dbname!==null&&this.dbname!==void 0&&(o.writeFieldBegin("dbname",r.Type.STRING,2),o.writeString(this.dbname),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},x=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_switch_database_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},M=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_clone_session_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},R=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRING?this.success=o.readString():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_clone_session_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRING,0),o.writeString(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},P=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_server_status_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},C=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TServerStatus(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TServerStatus,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_server_status_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},D=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_status_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},j=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TServerStatus])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TServerStatus,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_status_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},$=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_hardware_info_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},W=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TClusterHardwareInfo(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TClusterHardwareInfo,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_hardware_info_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},H=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_tables_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},G=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_tables_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},z=class{constructor(o){this.session=null,this.database_name=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.database_name!==void 0&&o.database_name!==null&&(this.database_name=o.database_name))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.database_name=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_tables_for_database_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(o.writeFieldBegin("database_name",r.Type.STRING,2),o.writeString(this.database_name),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},q=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_tables_for_database_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ie=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_physical_tables_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ce=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_physical_tables_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},se=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_views_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ie=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_views_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},he=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_tables_meta_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Me=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TTableMeta])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TTableMeta,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_tables_meta_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ue=class{constructor(o){this.session=null,this.table_name=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_details_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},_e=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TTableDetails(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_details_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ke=class{constructor(o){this.session=null,this.table_name=null,this.database_name=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.database_name!==void 0&&o.database_name!==null&&(this.database_name=o.database_name))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.database_name=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(o.writeFieldBegin("database_name",r.Type.STRING,3),o.writeString(this.database_name),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ee=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TTableDetails(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ye=class{constructor(o){this.session=null,this.table_name=null,this.include_system_columns=!0,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.include_system_columns!==void 0&&o.include_system_columns!==null&&(this.include_system_columns=o.include_system_columns))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:g==r.Type.BOOL?this.include_system_columns=o.readBool():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_internal_table_details_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.include_system_columns!==null&&this.include_system_columns!==void 0&&(o.writeFieldBegin("include_system_columns",r.Type.BOOL,3),o.writeBool(this.include_system_columns),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},X=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TTableDetails(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_internal_table_details_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Y=class{constructor(o){this.session=null,this.table_name=null,this.database_name=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.database_name!==void 0&&o.database_name!==null&&(this.database_name=o.database_name))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.database_name=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_internal_table_details_for_database_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.database_name!==null&&this.database_name!==void 0&&(o.writeFieldBegin("database_name",r.Type.STRING,3),o.writeString(this.database_name),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},U=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TTableDetails(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TTableDetails,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_internal_table_details_for_database_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},J=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_users_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},K=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_users_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Z=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_databases_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Q=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TDBInfo])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TDBInfo,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_databases_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},fe=class{constructor(o){}read(o){for(o.readStructBegin();;){const g=o.readFieldBegin().ftype;if(g==r.Type.STOP)break;o.skip(g),o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_version_args"),o.writeFieldStop(),o.writeStructEnd()}},ee=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRING?this.success=o.readString():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_version_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRING,0),o.writeString(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},le=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_start_heap_profile_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ne=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_start_heap_profile_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},He=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_stop_heap_profile_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ft=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_stop_heap_profile_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},de=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_heap_profile_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ve=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRING?this.success=o.readString():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_heap_profile_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRING,0),o.writeString(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ce=class{constructor(o){this.session=null,this.memory_level=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.memory_level!==void 0&&o.memory_level!==null&&(this.memory_level=o.memory_level))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.memory_level=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_memory_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.memory_level!==null&&this.memory_level!==void 0&&(o.writeFieldBegin("memory_level",r.Type.STRING,2),o.writeString(this.memory_level),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},re=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TNodeMemoryInfo])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TNodeMemoryInfo,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_memory_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},rt=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_clear_cpu_memory_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},tt=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_clear_cpu_memory_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Rt=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_clear_gpu_memory_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},$t=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_clear_gpu_memory_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ds=class{constructor(o){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,o&&(o.parent_session!==void 0&&o.parent_session!==null&&(this.parent_session=o.parent_session),o.leaf_session!==void 0&&o.leaf_session!==null&&(this.leaf_session=o.leaf_session),o.start_time_str!==void 0&&o.start_time_str!==null&&(this.start_time_str=o.start_time_str),o.label!==void 0&&o.label!==null&&(this.label=o.label),o.for_running_query_kernel!==void 0&&o.for_running_query_kernel!==null&&(this.for_running_query_kernel=o.for_running_query_kernel))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.parent_session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.leaf_session=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.start_time_str=o.readString():o.skip(g);break;case 4:g==r.Type.STRING?this.label=o.readString():o.skip(g);break;case 5:g==r.Type.BOOL?this.for_running_query_kernel=o.readBool():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(o.writeFieldBegin("parent_session",r.Type.STRING,1),o.writeString(this.parent_session),o.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(o.writeFieldBegin("leaf_session",r.Type.STRING,2),o.writeString(this.leaf_session),o.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(o.writeFieldBegin("start_time_str",r.Type.STRING,3),o.writeString(this.start_time_str),o.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(o.writeFieldBegin("label",r.Type.STRING,4),o.writeString(this.label),o.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(o.writeFieldBegin("for_running_query_kernel",r.Type.BOOL,5),o.writeBool(this.for_running_query_kernel),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},me=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_cur_session_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},pe=class{constructor(o){this.parent_session=null,this.leaf_session=null,this.start_time_str=null,this.label=null,this.for_running_query_kernel=null,o&&(o.parent_session!==void 0&&o.parent_session!==null&&(this.parent_session=o.parent_session),o.leaf_session!==void 0&&o.leaf_session!==null&&(this.leaf_session=o.leaf_session),o.start_time_str!==void 0&&o.start_time_str!==null&&(this.start_time_str=o.start_time_str),o.label!==void 0&&o.label!==null&&(this.label=o.label),o.for_running_query_kernel!==void 0&&o.for_running_query_kernel!==null&&(this.for_running_query_kernel=o.for_running_query_kernel))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.parent_session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.leaf_session=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.start_time_str=o.readString():o.skip(g);break;case 4:g==r.Type.STRING?this.label=o.readString():o.skip(g);break;case 5:g==r.Type.BOOL?this.for_running_query_kernel=o.readBool():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_invalidate_cur_session_args"),this.parent_session!==null&&this.parent_session!==void 0&&(o.writeFieldBegin("parent_session",r.Type.STRING,1),o.writeString(this.parent_session),o.writeFieldEnd()),this.leaf_session!==null&&this.leaf_session!==void 0&&(o.writeFieldBegin("leaf_session",r.Type.STRING,2),o.writeString(this.leaf_session),o.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(o.writeFieldBegin("start_time_str",r.Type.STRING,3),o.writeString(this.start_time_str),o.writeFieldEnd()),this.label!==null&&this.label!==void 0&&(o.writeFieldBegin("label",r.Type.STRING,4),o.writeString(this.label),o.writeFieldEnd()),this.for_running_query_kernel!==null&&this.for_running_query_kernel!==void 0&&(o.writeFieldBegin("for_running_query_kernel",r.Type.BOOL,5),o.writeBool(this.for_running_query_kernel),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},qt=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_invalidate_cur_session_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},L=class{constructor(o){this.session=null,this.db_id=null,this.table_id=null,this.new_epoch=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.db_id!==void 0&&o.db_id!==null&&(this.db_id=o.db_id),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id),o.new_epoch!==void 0&&o.new_epoch!==null&&(this.new_epoch=o.new_epoch))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.db_id=o.readI32():o.skip(g);break;case 3:g==r.Type.I32?this.table_id=o.readI32():o.skip(g);break;case 4:g==r.Type.I32?this.new_epoch=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_table_epoch_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(o.writeFieldBegin("db_id",r.Type.I32,2),o.writeI32(this.db_id),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",r.Type.I32,3),o.writeI32(this.table_id),o.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(o.writeFieldBegin("new_epoch",r.Type.I32,4),o.writeI32(this.new_epoch),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},O=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_table_epoch_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},N=class{constructor(o){this.session=null,this.table_name=null,this.new_epoch=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.new_epoch!==void 0&&o.new_epoch!==null&&(this.new_epoch=o.new_epoch))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:g==r.Type.I32?this.new_epoch=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.new_epoch!==null&&this.new_epoch!==void 0&&(o.writeFieldBegin("new_epoch",r.Type.I32,3),o.writeI32(this.new_epoch),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},V=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_table_epoch_by_name_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},te=class{constructor(o){this.session=null,this.db_id=null,this.table_id=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.db_id!==void 0&&o.db_id!==null&&(this.db_id=o.db_id),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.db_id=o.readI32():o.skip(g);break;case 3:g==r.Type.I32?this.table_id=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_epoch_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(o.writeFieldBegin("db_id",r.Type.I32,2),o.writeI32(this.db_id),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",r.Type.I32,3),o.writeI32(this.table_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},oe=class{constructor(o){this.success=null,o&&o.success!==void 0&&o.success!==null&&(this.success=o.success)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.I32?this.success=o.readI32():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_epoch_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.I32,0),o.writeI32(this.success),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ue=class{constructor(o){this.session=null,this.table_name=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_epoch_by_name_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ge=class{constructor(o){this.success=null,o&&o.success!==void 0&&o.success!==null&&(this.success=o.success)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.I32?this.success=o.readI32():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_epoch_by_name_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.I32,0),o.writeI32(this.success),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ze=class{constructor(o){this.session=null,this.db_id=null,this.table_id=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.db_id!==void 0&&o.db_id!==null&&(this.db_id=o.db_id),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.db_id=o.readI32():o.skip(g);break;case 3:g==r.Type.I32?this.table_id=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_epochs_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(o.writeFieldBegin("db_id",r.Type.I32,2),o.writeI32(this.db_id),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",r.Type.I32,3),o.writeI32(this.table_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},nt=class{constructor(o){this.success=null,o&&o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TTableEpochInfo]))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TTableEpochInfo,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_table_epochs_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},ut=class{constructor(o){this.session=null,this.db_id=null,this.table_epochs=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.db_id!==void 0&&o.db_id!==null&&(this.db_id=o.db_id),o.table_epochs!==void 0&&o.table_epochs!==null&&(this.table_epochs=r.copyList(o.table_epochs,[l.TTableEpochInfo])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.db_id=o.readI32():o.skip(g);break;case 3:if(g==r.Type.LIST){this.table_epochs=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TTableEpochInfo,A.read(o),this.table_epochs.push(A)}o.readListEnd()}else o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_set_table_epochs_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.db_id!==null&&this.db_id!==void 0&&(o.writeFieldBegin("db_id",r.Type.I32,2),o.writeI32(this.db_id),o.writeFieldEnd()),this.table_epochs!==null&&this.table_epochs!==void 0){o.writeFieldBegin("table_epochs",r.Type.LIST,3),o.writeListBegin(r.Type.STRUCT,this.table_epochs.length);for(let T in this.table_epochs)this.table_epochs.hasOwnProperty(T)&&(T=this.table_epochs[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},ht=class{constructor(o){}read(o){for(o.readStructBegin();;){const g=o.readFieldBegin().ftype;if(g==r.Type.STOP)break;o.skip(g),o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_table_epochs_result"),o.writeFieldStop(),o.writeStructEnd()}},Cl=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_session_info_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},iw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TSessionInfo(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TSessionInfo,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_session_info_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},WC=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_queries_info_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},sw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TQueryInfo])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TQueryInfo,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_queries_info_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},YC=class{constructor(o){this.session=null,this.leaf_info=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.leaf_info!==void 0&&o.leaf_info!==null&&(this.leaf_info=new l.TLeafInfo(o.leaf_info)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRUCT?(this.leaf_info=new l.TLeafInfo,this.leaf_info.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_leaf_info_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.leaf_info!==null&&this.leaf_info!==void 0&&(o.writeFieldBegin("leaf_info",r.Type.STRUCT,2),this.leaf_info.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},rw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_leaf_info_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},XC=class{constructor(o){this.session=null,this.query=null,this.column_format=null,this.nonce=null,this.first_n=-1,this.at_most_n=-1,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.query!==void 0&&o.query!==null&&(this.query=o.query),o.column_format!==void 0&&o.column_format!==null&&(this.column_format=o.column_format),o.nonce!==void 0&&o.nonce!==null&&(this.nonce=o.nonce),o.first_n!==void 0&&o.first_n!==null&&(this.first_n=o.first_n),o.at_most_n!==void 0&&o.at_most_n!==null&&(this.at_most_n=o.at_most_n))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.query=o.readString():o.skip(g);break;case 3:g==r.Type.BOOL?this.column_format=o.readBool():o.skip(g);break;case 4:g==r.Type.STRING?this.nonce=o.readString():o.skip(g);break;case 5:g==r.Type.I32?this.first_n=o.readI32():o.skip(g);break;case 6:g==r.Type.I32?this.at_most_n=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_sql_execute_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(o.writeFieldBegin("query",r.Type.STRING,2),o.writeString(this.query),o.writeFieldEnd()),this.column_format!==null&&this.column_format!==void 0&&(o.writeFieldBegin("column_format",r.Type.BOOL,3),o.writeBool(this.column_format),o.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(o.writeFieldBegin("nonce",r.Type.STRING,4),o.writeString(this.nonce),o.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(o.writeFieldBegin("first_n",r.Type.I32,5),o.writeI32(this.first_n),o.writeFieldEnd()),this.at_most_n!==null&&this.at_most_n!==void 0&&(o.writeFieldBegin("at_most_n",r.Type.I32,6),o.writeI32(this.at_most_n),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},aw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TQueryResult(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TQueryResult,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_sql_execute_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},KC=class{constructor(o){this.session=null,this.query=null,this.device_type=null,this.device_id=0,this.first_n=-1,this.transport_method=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.query!==void 0&&o.query!==null&&(this.query=o.query),o.device_type!==void 0&&o.device_type!==null&&(this.device_type=o.device_type),o.device_id!==void 0&&o.device_id!==null&&(this.device_id=o.device_id),o.first_n!==void 0&&o.first_n!==null&&(this.first_n=o.first_n),o.transport_method!==void 0&&o.transport_method!==null&&(this.transport_method=o.transport_method))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.query=o.readString():o.skip(g);break;case 3:g==r.Type.I32?this.device_type=o.readI32():o.skip(g);break;case 4:g==r.Type.I32?this.device_id=o.readI32():o.skip(g);break;case 5:g==r.Type.I32?this.first_n=o.readI32():o.skip(g);break;case 6:g==r.Type.I32?this.transport_method=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_sql_execute_df_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(o.writeFieldBegin("query",r.Type.STRING,2),o.writeString(this.query),o.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(o.writeFieldBegin("device_type",r.Type.I32,3),o.writeI32(this.device_type),o.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(o.writeFieldBegin("device_id",r.Type.I32,4),o.writeI32(this.device_id),o.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(o.writeFieldBegin("first_n",r.Type.I32,5),o.writeI32(this.first_n),o.writeFieldEnd()),this.transport_method!==null&&this.transport_method!==void 0&&(o.writeFieldBegin("transport_method",r.Type.I32,6),o.writeI32(this.transport_method),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ow=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TDataFrame(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TDataFrame,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_sql_execute_df_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},JC=class{constructor(o){this.session=null,this.query=null,this.device_id=0,this.first_n=-1,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.query!==void 0&&o.query!==null&&(this.query=o.query),o.device_id!==void 0&&o.device_id!==null&&(this.device_id=o.device_id),o.first_n!==void 0&&o.first_n!==null&&(this.first_n=o.first_n))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.query=o.readString():o.skip(g);break;case 3:g==r.Type.I32?this.device_id=o.readI32():o.skip(g);break;case 4:g==r.Type.I32?this.first_n=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_sql_execute_gdf_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(o.writeFieldBegin("query",r.Type.STRING,2),o.writeString(this.query),o.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(o.writeFieldBegin("device_id",r.Type.I32,3),o.writeI32(this.device_id),o.writeFieldEnd()),this.first_n!==null&&this.first_n!==void 0&&(o.writeFieldBegin("first_n",r.Type.I32,4),o.writeI32(this.first_n),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},lw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TDataFrame(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TDataFrame,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_sql_execute_gdf_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},QC=class{constructor(o){this.session=null,this.df=null,this.device_type=null,this.device_id=0,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.df!==void 0&&o.df!==null&&(this.df=new l.TDataFrame(o.df)),o.device_type!==void 0&&o.device_type!==null&&(this.device_type=o.device_type),o.device_id!==void 0&&o.device_id!==null&&(this.device_id=o.device_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRUCT?(this.df=new l.TDataFrame,this.df.read(o)):o.skip(g);break;case 3:g==r.Type.I32?this.device_type=o.readI32():o.skip(g);break;case 4:g==r.Type.I32?this.device_id=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_deallocate_df_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.df!==null&&this.df!==void 0&&(o.writeFieldBegin("df",r.Type.STRUCT,2),this.df.write(o),o.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(o.writeFieldBegin("device_type",r.Type.I32,3),o.writeI32(this.device_type),o.writeFieldEnd()),this.device_id!==null&&this.device_id!==void 0&&(o.writeFieldBegin("device_id",r.Type.I32,4),o.writeI32(this.device_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},cw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_deallocate_df_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ZC=class{constructor(o){this.query_session=null,this.interrupt_session=null,o&&(o.query_session!==void 0&&o.query_session!==null&&(this.query_session=o.query_session),o.interrupt_session!==void 0&&o.interrupt_session!==null&&(this.interrupt_session=o.interrupt_session))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.query_session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.interrupt_session=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_interrupt_args"),this.query_session!==null&&this.query_session!==void 0&&(o.writeFieldBegin("query_session",r.Type.STRING,1),o.writeString(this.query_session),o.writeFieldEnd()),this.interrupt_session!==null&&this.interrupt_session!==void 0&&(o.writeFieldBegin("interrupt_session",r.Type.STRING,2),o.writeString(this.interrupt_session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},dw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_interrupt_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},eL=class{constructor(o){this.session=null,this.query=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.query!==void 0&&o.query!==null&&(this.query=o.query))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.query=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_sql_validate_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(o.writeFieldBegin("query",r.Type.STRING,2),o.writeString(this.query),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},fw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TColumnType])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TColumnType,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_sql_validate_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},tL=class{constructor(o){this.session=null,this.sql=null,this.cursor=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.sql!==void 0&&o.sql!==null&&(this.sql=o.sql),o.cursor!==void 0&&o.cursor!==null&&(this.cursor=o.cursor))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.sql=o.readString():o.skip(g);break;case 3:g==r.Type.I32?this.cursor=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_completion_hints_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.sql!==null&&this.sql!==void 0&&(o.writeFieldBegin("sql",r.Type.STRING,2),o.writeString(this.sql),o.writeFieldEnd()),this.cursor!==null&&this.cursor!==void 0&&(o.writeFieldBegin("cursor",r.Type.I32,3),o.writeI32(this.cursor),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},uw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[h.TCompletionHint])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new h.TCompletionHint,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_completion_hints_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},nL=class{constructor(o){this.session=null,this.mode=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.mode!==void 0&&o.mode!==null&&(this.mode=o.mode))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.mode=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_execution_mode_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.mode!==null&&this.mode!==void 0&&(o.writeFieldBegin("mode",r.Type.I32,2),o.writeI32(this.mode),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},hw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_execution_mode_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},iL=class{constructor(o){this.session=null,this.widget_id=null,this.vega_json=null,this.compression_level=null,this.nonce=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.widget_id!==void 0&&o.widget_id!==null&&(this.widget_id=o.widget_id),o.vega_json!==void 0&&o.vega_json!==null&&(this.vega_json=o.vega_json),o.compression_level!==void 0&&o.compression_level!==null&&(this.compression_level=o.compression_level),o.nonce!==void 0&&o.nonce!==null&&(this.nonce=o.nonce))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I64?this.widget_id=o.readI64():o.skip(g);break;case 3:g==r.Type.STRING?this.vega_json=o.readString():o.skip(g);break;case 4:g==r.Type.I32?this.compression_level=o.readI32():o.skip(g);break;case 5:g==r.Type.STRING?this.nonce=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_render_vega_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(o.writeFieldBegin("widget_id",r.Type.I64,2),o.writeI64(this.widget_id),o.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(o.writeFieldBegin("vega_json",r.Type.STRING,3),o.writeString(this.vega_json),o.writeFieldEnd()),this.compression_level!==null&&this.compression_level!==void 0&&(o.writeFieldBegin("compression_level",r.Type.I32,4),o.writeI32(this.compression_level),o.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(o.writeFieldBegin("nonce",r.Type.STRING,5),o.writeString(this.nonce),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},_w=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TRenderResult(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TRenderResult,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_render_vega_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},sL=class{constructor(o){this.session=null,this.widget_id=null,this.pixel=null,this.table_col_names=null,this.column_format=null,this.pixelRadius=null,this.nonce=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.widget_id!==void 0&&o.widget_id!==null&&(this.widget_id=o.widget_id),o.pixel!==void 0&&o.pixel!==null&&(this.pixel=new l.TPixel(o.pixel)),o.table_col_names!==void 0&&o.table_col_names!==null&&(this.table_col_names=r.copyMap(o.table_col_names,[r.copyList,null])),o.column_format!==void 0&&o.column_format!==null&&(this.column_format=o.column_format),o.pixelRadius!==void 0&&o.pixelRadius!==null&&(this.pixelRadius=o.pixelRadius),o.nonce!==void 0&&o.nonce!==null&&(this.nonce=o.nonce))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I64?this.widget_id=o.readI64():o.skip(g);break;case 3:g==r.Type.STRUCT?(this.pixel=new l.TPixel,this.pixel.read(o)):o.skip(g);break;case 4:if(g==r.Type.MAP){this.table_col_names={};const w=o.readMapBegin().size||0;for(let S=0;S<w;++S){let A=null,ae=null;A=o.readString(),ae=[];const at=o.readListBegin().size||0;for(let yn=0;yn<at;++yn){let Fo=null;Fo=o.readString(),ae.push(Fo)}o.readListEnd(),this.table_col_names[A]=ae}o.readMapEnd()}else o.skip(g);break;case 5:g==r.Type.BOOL?this.column_format=o.readBool():o.skip(g);break;case 6:g==r.Type.I32?this.pixelRadius=o.readI32():o.skip(g);break;case 7:g==r.Type.STRING?this.nonce=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_result_row_for_pixel_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(o.writeFieldBegin("widget_id",r.Type.I64,2),o.writeI64(this.widget_id),o.writeFieldEnd()),this.pixel!==null&&this.pixel!==void 0&&(o.writeFieldBegin("pixel",r.Type.STRUCT,3),this.pixel.write(o),o.writeFieldEnd()),this.table_col_names!==null&&this.table_col_names!==void 0){o.writeFieldBegin("table_col_names",r.Type.MAP,4),o.writeMapBegin(r.Type.STRING,r.Type.LIST,r.objectLength(this.table_col_names));for(let T in this.table_col_names)if(this.table_col_names.hasOwnProperty(T)){let g=this.table_col_names[T];o.writeString(T),o.writeListBegin(r.Type.STRING,g.length);for(let y in g)g.hasOwnProperty(y)&&(y=g[y],o.writeString(y));o.writeListEnd()}o.writeMapEnd(),o.writeFieldEnd()}this.column_format!==null&&this.column_format!==void 0&&(o.writeFieldBegin("column_format",r.Type.BOOL,5),o.writeBool(this.column_format),o.writeFieldEnd()),this.pixelRadius!==null&&this.pixelRadius!==void 0&&(o.writeFieldBegin("pixelRadius",r.Type.I32,6),o.writeI32(this.pixelRadius),o.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(o.writeFieldBegin("nonce",r.Type.STRING,7),o.writeString(this.nonce),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},pw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TPixelTableRowResult(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TPixelTableRowResult,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_result_row_for_pixel_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},rL=class{constructor(o){this.session=null,this.custom_expression=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.custom_expression!==void 0&&o.custom_expression!==null&&(this.custom_expression=new l.TCustomExpression(o.custom_expression)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRUCT?(this.custom_expression=new l.TCustomExpression,this.custom_expression.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_create_custom_expression_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.custom_expression!==null&&this.custom_expression!==void 0&&(o.writeFieldBegin("custom_expression",r.Type.STRUCT,2),this.custom_expression.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},yw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.I32?this.success=o.readI32():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_create_custom_expression_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.I32,0),o.writeI32(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},aL=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},gw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TCustomExpression])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TCustomExpression,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_custom_expressions_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},oL=class{constructor(o){this.session=null,this.id=null,this.expression_json=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.id!==void 0&&o.id!==null&&(this.id=o.id),o.expression_json!==void 0&&o.expression_json!==null&&(this.expression_json=o.expression_json))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.id=o.readI32():o.skip(g);break;case 3:g==r.Type.STRING?this.expression_json=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_update_custom_expression_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.id!==null&&this.id!==void 0&&(o.writeFieldBegin("id",r.Type.I32,2),o.writeI32(this.id),o.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(o.writeFieldBegin("expression_json",r.Type.STRING,3),o.writeString(this.expression_json),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},mw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_update_custom_expression_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},lL=class{constructor(o){this.session=null,this.custom_expression_ids=null,this.do_soft_delete=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.custom_expression_ids!==void 0&&o.custom_expression_ids!==null&&(this.custom_expression_ids=r.copyList(o.custom_expression_ids,[null])),o.do_soft_delete!==void 0&&o.do_soft_delete!==null&&(this.do_soft_delete=o.do_soft_delete))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:if(g==r.Type.LIST){this.custom_expression_ids=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readI32(),this.custom_expression_ids.push(A)}o.readListEnd()}else o.skip(g);break;case 3:g==r.Type.BOOL?this.do_soft_delete=o.readBool():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_delete_custom_expressions_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.custom_expression_ids!==null&&this.custom_expression_ids!==void 0){o.writeFieldBegin("custom_expression_ids",r.Type.LIST,2),o.writeListBegin(r.Type.I32,this.custom_expression_ids.length);for(let T in this.custom_expression_ids)this.custom_expression_ids.hasOwnProperty(T)&&(T=this.custom_expression_ids[T],o.writeI32(T));o.writeListEnd(),o.writeFieldEnd()}this.do_soft_delete!==null&&this.do_soft_delete!==void 0&&(o.writeFieldBegin("do_soft_delete",r.Type.BOOL,3),o.writeBool(this.do_soft_delete),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ww=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_delete_custom_expressions_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},cL=class{constructor(o){this.session=null,this.dashboard_id=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_id!==void 0&&o.dashboard_id!==null&&(this.dashboard_id=o.dashboard_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.dashboard_id=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_dashboard_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(o.writeFieldBegin("dashboard_id",r.Type.I32,2),o.writeI32(this.dashboard_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},bw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TDashboard(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TDashboard,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_dashboard_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},dL=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_dashboards_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Tw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TDashboard])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TDashboard,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_dashboards_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},fL=class{constructor(o){this.session=null,this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_name!==void 0&&o.dashboard_name!==null&&(this.dashboard_name=o.dashboard_name),o.dashboard_state!==void 0&&o.dashboard_state!==null&&(this.dashboard_state=o.dashboard_state),o.image_hash!==void 0&&o.image_hash!==null&&(this.image_hash=o.image_hash),o.dashboard_metadata!==void 0&&o.dashboard_metadata!==null&&(this.dashboard_metadata=o.dashboard_metadata))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.dashboard_name=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.dashboard_state=o.readString():o.skip(g);break;case 4:g==r.Type.STRING?this.image_hash=o.readString():o.skip(g);break;case 5:g==r.Type.STRING?this.dashboard_metadata=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_create_dashboard_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(o.writeFieldBegin("dashboard_name",r.Type.STRING,2),o.writeString(this.dashboard_name),o.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(o.writeFieldBegin("dashboard_state",r.Type.STRING,3),o.writeString(this.dashboard_state),o.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(o.writeFieldBegin("image_hash",r.Type.STRING,4),o.writeString(this.image_hash),o.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(o.writeFieldBegin("dashboard_metadata",r.Type.STRING,5),o.writeString(this.dashboard_metadata),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},vw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.I32?this.success=o.readI32():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_create_dashboard_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.I32,0),o.writeI32(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},uL=class{constructor(o){this.session=null,this.dashboard_id=null,this.dashboard_name=null,this.dashboard_owner=null,this.dashboard_state=null,this.image_hash=null,this.dashboard_metadata=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_id!==void 0&&o.dashboard_id!==null&&(this.dashboard_id=o.dashboard_id),o.dashboard_name!==void 0&&o.dashboard_name!==null&&(this.dashboard_name=o.dashboard_name),o.dashboard_owner!==void 0&&o.dashboard_owner!==null&&(this.dashboard_owner=o.dashboard_owner),o.dashboard_state!==void 0&&o.dashboard_state!==null&&(this.dashboard_state=o.dashboard_state),o.image_hash!==void 0&&o.image_hash!==null&&(this.image_hash=o.image_hash),o.dashboard_metadata!==void 0&&o.dashboard_metadata!==null&&(this.dashboard_metadata=o.dashboard_metadata))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.dashboard_id=o.readI32():o.skip(g);break;case 3:g==r.Type.STRING?this.dashboard_name=o.readString():o.skip(g);break;case 4:g==r.Type.STRING?this.dashboard_owner=o.readString():o.skip(g);break;case 5:g==r.Type.STRING?this.dashboard_state=o.readString():o.skip(g);break;case 6:g==r.Type.STRING?this.image_hash=o.readString():o.skip(g);break;case 7:g==r.Type.STRING?this.dashboard_metadata=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_replace_dashboard_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(o.writeFieldBegin("dashboard_id",r.Type.I32,2),o.writeI32(this.dashboard_id),o.writeFieldEnd()),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(o.writeFieldBegin("dashboard_name",r.Type.STRING,3),o.writeString(this.dashboard_name),o.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(o.writeFieldBegin("dashboard_owner",r.Type.STRING,4),o.writeString(this.dashboard_owner),o.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(o.writeFieldBegin("dashboard_state",r.Type.STRING,5),o.writeString(this.dashboard_state),o.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(o.writeFieldBegin("image_hash",r.Type.STRING,6),o.writeString(this.image_hash),o.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(o.writeFieldBegin("dashboard_metadata",r.Type.STRING,7),o.writeString(this.dashboard_metadata),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ew=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_replace_dashboard_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},hL=class{constructor(o){this.session=null,this.dashboard_id=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_id!==void 0&&o.dashboard_id!==null&&(this.dashboard_id=o.dashboard_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.dashboard_id=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_delete_dashboard_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(o.writeFieldBegin("dashboard_id",r.Type.I32,2),o.writeI32(this.dashboard_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Sw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_delete_dashboard_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},_L=class{constructor(o){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_ids!==void 0&&o.dashboard_ids!==null&&(this.dashboard_ids=r.copyList(o.dashboard_ids,[null])),o.groups!==void 0&&o.groups!==null&&(this.groups=r.copyList(o.groups,[null])),o.permissions!==void 0&&o.permissions!==null&&(this.permissions=new l.TDashboardPermissions(o.permissions)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:if(g==r.Type.LIST){this.dashboard_ids=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readI32(),this.dashboard_ids.push(A)}o.readListEnd()}else o.skip(g);break;case 3:if(g==r.Type.LIST){this.groups=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.groups.push(A)}o.readListEnd()}else o.skip(g);break;case 4:g==r.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_share_dashboards_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){o.writeFieldBegin("dashboard_ids",r.Type.LIST,2),o.writeListBegin(r.Type.I32,this.dashboard_ids.length);for(let T in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(T)&&(T=this.dashboard_ids[T],o.writeI32(T));o.writeListEnd(),o.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){o.writeFieldBegin("groups",r.Type.LIST,3),o.writeListBegin(r.Type.STRING,this.groups.length);for(let T in this.groups)this.groups.hasOwnProperty(T)&&(T=this.groups[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(o.writeFieldBegin("permissions",r.Type.STRUCT,4),this.permissions.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Bw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_share_dashboards_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},pL=class{constructor(o){this.session=null,this.dashboard_ids=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_ids!==void 0&&o.dashboard_ids!==null&&(this.dashboard_ids=r.copyList(o.dashboard_ids,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:if(g==r.Type.LIST){this.dashboard_ids=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readI32(),this.dashboard_ids.push(A)}o.readListEnd()}else o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_delete_dashboards_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){o.writeFieldBegin("dashboard_ids",r.Type.LIST,2),o.writeListBegin(r.Type.I32,this.dashboard_ids.length);for(let T in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(T)&&(T=this.dashboard_ids[T],o.writeI32(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},Iw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_delete_dashboards_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},yL=class{constructor(o){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,this.grant_role=!1,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_id!==void 0&&o.dashboard_id!==null&&(this.dashboard_id=o.dashboard_id),o.groups!==void 0&&o.groups!==null&&(this.groups=r.copyList(o.groups,[null])),o.objects!==void 0&&o.objects!==null&&(this.objects=r.copyList(o.objects,[null])),o.permissions!==void 0&&o.permissions!==null&&(this.permissions=new l.TDashboardPermissions(o.permissions)),o.grant_role!==void 0&&o.grant_role!==null&&(this.grant_role=o.grant_role))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.dashboard_id=o.readI32():o.skip(g);break;case 3:if(g==r.Type.LIST){this.groups=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.groups.push(A)}o.readListEnd()}else o.skip(g);break;case 4:if(g==r.Type.LIST){this.objects=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.objects.push(A)}o.readListEnd()}else o.skip(g);break;case 5:g==r.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(o)):o.skip(g);break;case 6:g==r.Type.BOOL?this.grant_role=o.readBool():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_share_dashboard_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(o.writeFieldBegin("dashboard_id",r.Type.I32,2),o.writeI32(this.dashboard_id),o.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){o.writeFieldBegin("groups",r.Type.LIST,3),o.writeListBegin(r.Type.STRING,this.groups.length);for(let T in this.groups)this.groups.hasOwnProperty(T)&&(T=this.groups[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){o.writeFieldBegin("objects",r.Type.LIST,4),o.writeListBegin(r.Type.STRING,this.objects.length);for(let T in this.objects)this.objects.hasOwnProperty(T)&&(T=this.objects[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(o.writeFieldBegin("permissions",r.Type.STRUCT,5),this.permissions.write(o),o.writeFieldEnd()),this.grant_role!==null&&this.grant_role!==void 0&&(o.writeFieldBegin("grant_role",r.Type.BOOL,6),o.writeBool(this.grant_role),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Fw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_share_dashboard_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},gL=class{constructor(o){this.session=null,this.dashboard_id=null,this.groups=null,this.objects=null,this.permissions=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_id!==void 0&&o.dashboard_id!==null&&(this.dashboard_id=o.dashboard_id),o.groups!==void 0&&o.groups!==null&&(this.groups=r.copyList(o.groups,[null])),o.objects!==void 0&&o.objects!==null&&(this.objects=r.copyList(o.objects,[null])),o.permissions!==void 0&&o.permissions!==null&&(this.permissions=new l.TDashboardPermissions(o.permissions)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.dashboard_id=o.readI32():o.skip(g);break;case 3:if(g==r.Type.LIST){this.groups=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.groups.push(A)}o.readListEnd()}else o.skip(g);break;case 4:if(g==r.Type.LIST){this.objects=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.objects.push(A)}o.readListEnd()}else o.skip(g);break;case 5:g==r.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_unshare_dashboard_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(o.writeFieldBegin("dashboard_id",r.Type.I32,2),o.writeI32(this.dashboard_id),o.writeFieldEnd()),this.groups!==null&&this.groups!==void 0){o.writeFieldBegin("groups",r.Type.LIST,3),o.writeListBegin(r.Type.STRING,this.groups.length);for(let T in this.groups)this.groups.hasOwnProperty(T)&&(T=this.groups[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}if(this.objects!==null&&this.objects!==void 0){o.writeFieldBegin("objects",r.Type.LIST,4),o.writeListBegin(r.Type.STRING,this.objects.length);for(let T in this.objects)this.objects.hasOwnProperty(T)&&(T=this.objects[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(o.writeFieldBegin("permissions",r.Type.STRUCT,5),this.permissions.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},kw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_unshare_dashboard_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},mL=class{constructor(o){this.session=null,this.dashboard_ids=null,this.groups=null,this.permissions=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_ids!==void 0&&o.dashboard_ids!==null&&(this.dashboard_ids=r.copyList(o.dashboard_ids,[null])),o.groups!==void 0&&o.groups!==null&&(this.groups=r.copyList(o.groups,[null])),o.permissions!==void 0&&o.permissions!==null&&(this.permissions=new l.TDashboardPermissions(o.permissions)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:if(g==r.Type.LIST){this.dashboard_ids=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readI32(),this.dashboard_ids.push(A)}o.readListEnd()}else o.skip(g);break;case 3:if(g==r.Type.LIST){this.groups=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.groups.push(A)}o.readListEnd()}else o.skip(g);break;case 4:g==r.Type.STRUCT?(this.permissions=new l.TDashboardPermissions,this.permissions.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_unshare_dashboards_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_ids!==null&&this.dashboard_ids!==void 0){o.writeFieldBegin("dashboard_ids",r.Type.LIST,2),o.writeListBegin(r.Type.I32,this.dashboard_ids.length);for(let T in this.dashboard_ids)this.dashboard_ids.hasOwnProperty(T)&&(T=this.dashboard_ids[T],o.writeI32(T));o.writeListEnd(),o.writeFieldEnd()}if(this.groups!==null&&this.groups!==void 0){o.writeFieldBegin("groups",r.Type.LIST,3),o.writeListBegin(r.Type.STRING,this.groups.length);for(let T in this.groups)this.groups.hasOwnProperty(T)&&(T=this.groups[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.permissions!==null&&this.permissions!==void 0&&(o.writeFieldBegin("permissions",r.Type.STRUCT,4),this.permissions.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},xw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_unshare_dashboards_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},wL=class{constructor(o){this.session=null,this.dashboard_id=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.dashboard_id!==void 0&&o.dashboard_id!==null&&(this.dashboard_id=o.dashboard_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.dashboard_id=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_dashboard_grantees_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(o.writeFieldBegin("dashboard_id",r.Type.I32,2),o.writeI32(this.dashboard_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Mw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TDashboardGrantees])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TDashboardGrantees,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_dashboard_grantees_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},bL=class{constructor(o){this.session=null,this.link=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.link!==void 0&&o.link!==null&&(this.link=o.link))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.link=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_link_view_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.link!==null&&this.link!==void 0&&(o.writeFieldBegin("link",r.Type.STRING,2),o.writeString(this.link),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Aw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TFrontendView(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TFrontendView,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_link_view_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},TL=class{constructor(o){this.session=null,this.view_state=null,this.view_metadata=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.view_state!==void 0&&o.view_state!==null&&(this.view_state=o.view_state),o.view_metadata!==void 0&&o.view_metadata!==null&&(this.view_metadata=o.view_metadata))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.view_state=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.view_metadata=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_create_link_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(o.writeFieldBegin("view_state",r.Type.STRING,2),o.writeString(this.view_state),o.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(o.writeFieldBegin("view_metadata",r.Type.STRING,3),o.writeString(this.view_metadata),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ow=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRING?this.success=o.readString():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_create_link_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRING,0),o.writeString(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},vL=class{constructor(o){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.rows!==void 0&&o.rows!==null&&(this.rows=r.copyList(o.rows,[l.TRow])),o.column_names!==void 0&&o.column_names!==null&&(this.column_names=r.copyList(o.column_names,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:if(g==r.Type.LIST){this.rows=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TRow,A.read(o),this.rows.push(A)}o.readListEnd()}else o.skip(g);break;case 4:if(g==r.Type.LIST){this.column_names=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.column_names.push(A)}o.readListEnd()}else o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_load_table_binary_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){o.writeFieldBegin("rows",r.Type.LIST,3),o.writeListBegin(r.Type.STRUCT,this.rows.length);for(let T in this.rows)this.rows.hasOwnProperty(T)&&(T=this.rows[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){o.writeFieldBegin("column_names",r.Type.LIST,4),o.writeListBegin(r.Type.STRING,this.column_names.length);for(let T in this.column_names)this.column_names.hasOwnProperty(T)&&(T=this.column_names[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},Nw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_load_table_binary_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},EL=class{constructor(o){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.cols!==void 0&&o.cols!==null&&(this.cols=r.copyList(o.cols,[l.TColumn])),o.column_names!==void 0&&o.column_names!==null&&(this.column_names=r.copyList(o.column_names,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:if(g==r.Type.LIST){this.cols=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TColumn,A.read(o),this.cols.push(A)}o.readListEnd()}else o.skip(g);break;case 4:if(g==r.Type.LIST){this.column_names=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.column_names.push(A)}o.readListEnd()}else o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_load_table_binary_columnar_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){o.writeFieldBegin("cols",r.Type.LIST,3),o.writeListBegin(r.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){o.writeFieldBegin("column_names",r.Type.LIST,4),o.writeListBegin(r.Type.STRING,this.column_names.length);for(let T in this.column_names)this.column_names.hasOwnProperty(T)&&(T=this.column_names[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},Rw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_load_table_binary_columnar_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},SL=class{constructor(o){this.session=null,this.table_name=null,this.cols=null,this.column_names=[],this.assign_render_groups=!0,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.cols!==void 0&&o.cols!==null&&(this.cols=r.copyList(o.cols,[l.TColumn])),o.column_names!==void 0&&o.column_names!==null&&(this.column_names=r.copyList(o.column_names,[null])),o.assign_render_groups!==void 0&&o.assign_render_groups!==null&&(this.assign_render_groups=o.assign_render_groups))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:if(g==r.Type.LIST){this.cols=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TColumn,A.read(o),this.cols.push(A)}o.readListEnd()}else o.skip(g);break;case 4:if(g==r.Type.LIST){this.column_names=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.column_names.push(A)}o.readListEnd()}else o.skip(g);break;case 5:g==r.Type.BOOL?this.assign_render_groups=o.readBool():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_load_table_binary_columnar_polys_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.cols!==null&&this.cols!==void 0){o.writeFieldBegin("cols",r.Type.LIST,3),o.writeListBegin(r.Type.STRUCT,this.cols.length);for(let T in this.cols)this.cols.hasOwnProperty(T)&&(T=this.cols[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){o.writeFieldBegin("column_names",r.Type.LIST,4),o.writeListBegin(r.Type.STRING,this.column_names.length);for(let T in this.column_names)this.column_names.hasOwnProperty(T)&&(T=this.column_names[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.assign_render_groups!==null&&this.assign_render_groups!==void 0&&(o.writeFieldBegin("assign_render_groups",r.Type.BOOL,5),o.writeBool(this.assign_render_groups),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Cw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_load_table_binary_columnar_polys_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},BL=class{constructor(o){this.session=null,this.table_name=null,this.arrow_stream=null,this.use_column_names=!1,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.arrow_stream!==void 0&&o.arrow_stream!==null&&(this.arrow_stream=o.arrow_stream),o.use_column_names!==void 0&&o.use_column_names!==null&&(this.use_column_names=o.use_column_names))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.arrow_stream=o.readBinary():o.skip(g);break;case 4:g==r.Type.BOOL?this.use_column_names=o.readBool():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_load_table_binary_arrow_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.arrow_stream!==null&&this.arrow_stream!==void 0&&(o.writeFieldBegin("arrow_stream",r.Type.STRING,3),o.writeBinary(this.arrow_stream),o.writeFieldEnd()),this.use_column_names!==null&&this.use_column_names!==void 0&&(o.writeFieldBegin("use_column_names",r.Type.BOOL,4),o.writeBool(this.use_column_names),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Lw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_load_table_binary_arrow_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},IL=class{constructor(o){this.session=null,this.table_name=null,this.rows=null,this.column_names=[],o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.rows!==void 0&&o.rows!==null&&(this.rows=r.copyList(o.rows,[l.TStringRow])),o.column_names!==void 0&&o.column_names!==null&&(this.column_names=r.copyList(o.column_names,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:if(g==r.Type.LIST){this.rows=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TStringRow,A.read(o),this.rows.push(A)}o.readListEnd()}else o.skip(g);break;case 4:if(g==r.Type.LIST){this.column_names=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.column_names.push(A)}o.readListEnd()}else o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_load_table_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.rows!==null&&this.rows!==void 0){o.writeFieldBegin("rows",r.Type.LIST,3),o.writeListBegin(r.Type.STRUCT,this.rows.length);for(let T in this.rows)this.rows.hasOwnProperty(T)&&(T=this.rows[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.column_names!==null&&this.column_names!==void 0){o.writeFieldBegin("column_names",r.Type.LIST,4),o.writeListBegin(r.Type.STRING,this.column_names.length);for(let T in this.column_names)this.column_names.hasOwnProperty(T)&&(T=this.column_names[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},Pw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_load_table_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},FL=class{constructor(o){this.session=null,this.file_name=null,this.copy_params=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.file_name!==void 0&&o.file_name!==null&&(this.file_name=o.file_name),o.copy_params!==void 0&&o.copy_params!==null&&(this.copy_params=new l.TCopyParams(o.copy_params)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.file_name=o.readString():o.skip(g);break;case 3:g==r.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_detect_column_types_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(o.writeFieldBegin("file_name",r.Type.STRING,2),o.writeString(this.file_name),o.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(o.writeFieldBegin("copy_params",r.Type.STRUCT,3),this.copy_params.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Dw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TDetectResult(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TDetectResult,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_detect_column_types_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},kL=class{constructor(o){this.session=null,this.table_name=null,this.row_desc=null,this.create_params=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.row_desc!==void 0&&o.row_desc!==null&&(this.row_desc=r.copyList(o.row_desc,[l.TColumnType])),o.create_params!==void 0&&o.create_params!==null&&(this.create_params=new l.TCreateParams(o.create_params)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:if(g==r.Type.LIST){this.row_desc=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TColumnType,A.read(o),this.row_desc.push(A)}o.readListEnd()}else o.skip(g);break;case 4:g==r.Type.STRUCT?(this.create_params=new l.TCreateParams,this.create_params.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_create_table_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){o.writeFieldBegin("row_desc",r.Type.LIST,3),o.writeListBegin(r.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(o.writeFieldBegin("create_params",r.Type.STRUCT,4),this.create_params.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Uw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_create_table_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},xL=class{constructor(o){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.file_name!==void 0&&o.file_name!==null&&(this.file_name=o.file_name),o.copy_params!==void 0&&o.copy_params!==null&&(this.copy_params=new l.TCopyParams(o.copy_params)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.file_name=o.readString():o.skip(g);break;case 4:g==r.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_import_table_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(o.writeFieldBegin("file_name",r.Type.STRING,3),o.writeString(this.file_name),o.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(o.writeFieldBegin("copy_params",r.Type.STRUCT,4),this.copy_params.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},jw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_import_table_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ML=class{constructor(o){this.session=null,this.table_name=null,this.file_name=null,this.copy_params=null,this.row_desc=null,this.create_params=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_name!==void 0&&o.table_name!==null&&(this.table_name=o.table_name),o.file_name!==void 0&&o.file_name!==null&&(this.file_name=o.file_name),o.copy_params!==void 0&&o.copy_params!==null&&(this.copy_params=new l.TCopyParams(o.copy_params)),o.row_desc!==void 0&&o.row_desc!==null&&(this.row_desc=r.copyList(o.row_desc,[l.TColumnType])),o.create_params!==void 0&&o.create_params!==null&&(this.create_params=new l.TCreateParams(o.create_params)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.table_name=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.file_name=o.readString():o.skip(g);break;case 4:g==r.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(o)):o.skip(g);break;case 5:if(g==r.Type.LIST){this.row_desc=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TColumnType,A.read(o),this.row_desc.push(A)}o.readListEnd()}else o.skip(g);break;case 6:g==r.Type.STRUCT?(this.create_params=new l.TCreateParams,this.create_params.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_import_geo_table_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_name!==null&&this.table_name!==void 0&&(o.writeFieldBegin("table_name",r.Type.STRING,2),o.writeString(this.table_name),o.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(o.writeFieldBegin("file_name",r.Type.STRING,3),o.writeString(this.file_name),o.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(o.writeFieldBegin("copy_params",r.Type.STRUCT,4),this.copy_params.write(o),o.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){o.writeFieldBegin("row_desc",r.Type.LIST,5),o.writeListBegin(r.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.create_params!==null&&this.create_params!==void 0&&(o.writeFieldBegin("create_params",r.Type.STRUCT,6),this.create_params.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},$w=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_import_geo_table_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},AL=class{constructor(o){this.session=null,this.import_id=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.import_id!==void 0&&o.import_id!==null&&(this.import_id=o.import_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.import_id=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_import_table_status_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.import_id!==null&&this.import_id!==void 0&&(o.writeFieldBegin("import_id",r.Type.STRING,2),o.writeString(this.import_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},zw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TImportStatus(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TImportStatus,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_import_table_status_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},OL=class{constructor(o){this.session=null,this.archive_path=null,this.copy_params=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.archive_path!==void 0&&o.archive_path!==null&&(this.archive_path=o.archive_path),o.copy_params!==void 0&&o.copy_params!==null&&(this.copy_params=new l.TCopyParams(o.copy_params)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.archive_path=o.readString():o.skip(g);break;case 3:g==r.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_first_geo_file_in_archive_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(o.writeFieldBegin("archive_path",r.Type.STRING,2),o.writeString(this.archive_path),o.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(o.writeFieldBegin("copy_params",r.Type.STRUCT,3),this.copy_params.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},qw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRING?this.success=o.readString():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_first_geo_file_in_archive_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRING,0),o.writeString(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},NL=class{constructor(o){this.session=null,this.archive_path=null,this.copy_params=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.archive_path!==void 0&&o.archive_path!==null&&(this.archive_path=o.archive_path),o.copy_params!==void 0&&o.copy_params!==null&&(this.copy_params=new l.TCopyParams(o.copy_params)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.archive_path=o.readString():o.skip(g);break;case 3:g==r.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_all_files_in_archive_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.archive_path!==null&&this.archive_path!==void 0&&(o.writeFieldBegin("archive_path",r.Type.STRING,2),o.writeString(this.archive_path),o.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(o.writeFieldBegin("copy_params",r.Type.STRUCT,3),this.copy_params.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Vw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_all_files_in_archive_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},RL=class{constructor(o){this.session=null,this.file_name=null,this.copy_params=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.file_name!==void 0&&o.file_name!==null&&(this.file_name=o.file_name),o.copy_params!==void 0&&o.copy_params!==null&&(this.copy_params=new l.TCopyParams(o.copy_params)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.file_name=o.readString():o.skip(g);break;case 3:g==r.Type.STRUCT?(this.copy_params=new l.TCopyParams,this.copy_params.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_layers_in_geo_file_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.file_name!==null&&this.file_name!==void 0&&(o.writeFieldBegin("file_name",r.Type.STRING,2),o.writeString(this.file_name),o.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(o.writeFieldBegin("copy_params",r.Type.STRUCT,3),this.copy_params.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Gw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TGeoFileLayerInfo])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TGeoFileLayerInfo,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_layers_in_geo_file_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},CL=class{constructor(o){this.session=null,this.query=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.query!==void 0&&o.query!==null&&(this.query=o.query))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.query=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_query_get_outer_fragment_count_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.query!==null&&this.query!==void 0&&(o.writeFieldBegin("query",r.Type.STRING,2),o.writeString(this.query),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Hw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.I64?this.success=o.readI64():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_query_get_outer_fragment_count_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.I64,0),o.writeI64(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},LL=class{constructor(o){this.session=null,this.table_id=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.table_id=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_check_table_consistency_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",r.Type.I32,2),o.writeI32(this.table_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Ww=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TTableMeta(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TTableMeta,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_check_table_consistency_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},PL=class{constructor(o){this.leaf_session=null,this.parent_session=null,this.query_ra=null,this.start_time_str=null,this.just_explain=null,this.outer_fragment_indices=null,o&&(o.leaf_session!==void 0&&o.leaf_session!==null&&(this.leaf_session=o.leaf_session),o.parent_session!==void 0&&o.parent_session!==null&&(this.parent_session=o.parent_session),o.query_ra!==void 0&&o.query_ra!==null&&(this.query_ra=o.query_ra),o.start_time_str!==void 0&&o.start_time_str!==null&&(this.start_time_str=o.start_time_str),o.just_explain!==void 0&&o.just_explain!==null&&(this.just_explain=o.just_explain),o.outer_fragment_indices!==void 0&&o.outer_fragment_indices!==null&&(this.outer_fragment_indices=r.copyList(o.outer_fragment_indices,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.leaf_session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.parent_session=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.query_ra=o.readString():o.skip(g);break;case 4:g==r.Type.STRING?this.start_time_str=o.readString():o.skip(g);break;case 5:g==r.Type.BOOL?this.just_explain=o.readBool():o.skip(g);break;case 6:if(g==r.Type.LIST){this.outer_fragment_indices=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readI64(),this.outer_fragment_indices.push(A)}o.readListEnd()}else o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_start_query_args"),this.leaf_session!==null&&this.leaf_session!==void 0&&(o.writeFieldBegin("leaf_session",r.Type.STRING,1),o.writeString(this.leaf_session),o.writeFieldEnd()),this.parent_session!==null&&this.parent_session!==void 0&&(o.writeFieldBegin("parent_session",r.Type.STRING,2),o.writeString(this.parent_session),o.writeFieldEnd()),this.query_ra!==null&&this.query_ra!==void 0&&(o.writeFieldBegin("query_ra",r.Type.STRING,3),o.writeString(this.query_ra),o.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(o.writeFieldBegin("start_time_str",r.Type.STRING,4),o.writeString(this.start_time_str),o.writeFieldEnd()),this.just_explain!==null&&this.just_explain!==void 0&&(o.writeFieldBegin("just_explain",r.Type.BOOL,5),o.writeBool(this.just_explain),o.writeFieldEnd()),this.outer_fragment_indices!==null&&this.outer_fragment_indices!==void 0){o.writeFieldBegin("outer_fragment_indices",r.Type.LIST,6),o.writeListBegin(r.Type.I64,this.outer_fragment_indices.length);for(let T in this.outer_fragment_indices)this.outer_fragment_indices.hasOwnProperty(T)&&(T=this.outer_fragment_indices[T],o.writeI64(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},Yw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TPendingQuery(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TPendingQuery,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_start_query_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},DL=class{constructor(o){this.pending_query=null,this.subquery_id=null,this.start_time_str=null,o&&(o.pending_query!==void 0&&o.pending_query!==null&&(this.pending_query=new l.TPendingQuery(o.pending_query)),o.subquery_id!==void 0&&o.subquery_id!==null&&(this.subquery_id=o.subquery_id),o.start_time_str!==void 0&&o.start_time_str!==null&&(this.start_time_str=o.start_time_str))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.pending_query=new l.TPendingQuery,this.pending_query.read(o)):o.skip(g);break;case 2:g==r.Type.I64?this.subquery_id=o.readI64():o.skip(g);break;case 3:g==r.Type.STRING?this.start_time_str=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_execute_query_step_args"),this.pending_query!==null&&this.pending_query!==void 0&&(o.writeFieldBegin("pending_query",r.Type.STRUCT,1),this.pending_query.write(o),o.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(o.writeFieldBegin("subquery_id",r.Type.I64,2),o.writeI64(this.subquery_id),o.writeFieldEnd()),this.start_time_str!==null&&this.start_time_str!==void 0&&(o.writeFieldBegin("start_time_str",r.Type.STRING,3),o.writeString(this.start_time_str),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Xw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TStepResult(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TStepResult,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_execute_query_step_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},UL=class{constructor(o){this.serialized_rows=null,this.row_desc=null,this.query_id=null,this.subquery_id=null,this.is_final_subquery_result=null,o&&(o.serialized_rows!==void 0&&o.serialized_rows!==null&&(this.serialized_rows=new p.TSerializedRows(o.serialized_rows)),o.row_desc!==void 0&&o.row_desc!==null&&(this.row_desc=r.copyList(o.row_desc,[l.TColumnType])),o.query_id!==void 0&&o.query_id!==null&&(this.query_id=o.query_id),o.subquery_id!==void 0&&o.subquery_id!==null&&(this.subquery_id=o.subquery_id),o.is_final_subquery_result!==void 0&&o.is_final_subquery_result!==null&&(this.is_final_subquery_result=o.is_final_subquery_result))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.serialized_rows=new p.TSerializedRows,this.serialized_rows.read(o)):o.skip(g);break;case 2:if(g==r.Type.LIST){this.row_desc=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TColumnType,A.read(o),this.row_desc.push(A)}o.readListEnd()}else o.skip(g);break;case 3:g==r.Type.I64?this.query_id=o.readI64():o.skip(g);break;case 4:g==r.Type.I64?this.subquery_id=o.readI64():o.skip(g);break;case 5:g==r.Type.BOOL?this.is_final_subquery_result=o.readBool():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_broadcast_serialized_rows_args"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(o.writeFieldBegin("serialized_rows",r.Type.STRUCT,1),this.serialized_rows.write(o),o.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){o.writeFieldBegin("row_desc",r.Type.LIST,2),o.writeListBegin(r.Type.STRUCT,this.row_desc.length);for(let T in this.row_desc)this.row_desc.hasOwnProperty(T)&&(T=this.row_desc[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.query_id!==null&&this.query_id!==void 0&&(o.writeFieldBegin("query_id",r.Type.I64,3),o.writeI64(this.query_id),o.writeFieldEnd()),this.subquery_id!==null&&this.subquery_id!==void 0&&(o.writeFieldBegin("subquery_id",r.Type.I64,4),o.writeI64(this.subquery_id),o.writeFieldEnd()),this.is_final_subquery_result!==null&&this.is_final_subquery_result!==void 0&&(o.writeFieldBegin("is_final_subquery_result",r.Type.BOOL,5),o.writeBool(this.is_final_subquery_result),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Kw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_broadcast_serialized_rows_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},jL=class{constructor(o){this.session=null,this.widget_id=null,this.node_idx=null,this.vega_json=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.widget_id!==void 0&&o.widget_id!==null&&(this.widget_id=o.widget_id),o.node_idx!==void 0&&o.node_idx!==null&&(this.node_idx=o.node_idx),o.vega_json!==void 0&&o.vega_json!==null&&(this.vega_json=o.vega_json))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I64?this.widget_id=o.readI64():o.skip(g);break;case 3:g==r.Type.I16?this.node_idx=o.readI16():o.skip(g);break;case 4:g==r.Type.STRING?this.vega_json=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_start_render_query_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.widget_id!==null&&this.widget_id!==void 0&&(o.writeFieldBegin("widget_id",r.Type.I64,2),o.writeI64(this.widget_id),o.writeFieldEnd()),this.node_idx!==null&&this.node_idx!==void 0&&(o.writeFieldBegin("node_idx",r.Type.I16,3),o.writeI16(this.node_idx),o.writeFieldEnd()),this.vega_json!==null&&this.vega_json!==void 0&&(o.writeFieldBegin("vega_json",r.Type.STRING,4),o.writeString(this.vega_json),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Jw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TPendingRenderQuery(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TPendingRenderQuery,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_start_render_query_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},$L=class{constructor(o){this.pending_render=null,this.merged_data=null,o&&(o.pending_render!==void 0&&o.pending_render!==null&&(this.pending_render=new l.TPendingRenderQuery(o.pending_render)),o.merged_data!==void 0&&o.merged_data!==null&&(this.merged_data=r.copyMap(o.merged_data,[r.copyMap,r.copyMap,r.copyMap,r.copyList,l.TRenderDatum])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.pending_render=new l.TPendingRenderQuery,this.pending_render.read(o)):o.skip(g);break;case 2:if(g==r.Type.MAP){this.merged_data={};const w=o.readMapBegin().size||0;for(let S=0;S<w;++S){let A=null,ae=null;A=o.readString(),ae={};const at=o.readMapBegin().size||0;for(let yn=0;yn<at;++yn){let Fo=null,KS=null;Fo=o.readString(),KS={};const $ee=o.readMapBegin().size||0;for(let rP=0;rP<$ee;++rP){let aP=null,JS=null;aP=o.readString(),JS={};const zee=o.readMapBegin().size||0;for(let oP=0;oP<zee;++oP){let lP=null,QS=null;lP=o.readString(),QS=[];const qee=o.readListBegin().size||0;for(let cP=0;cP<qee;++cP){let ZS=null;ZS=new l.TRenderDatum,ZS.read(o),QS.push(ZS)}o.readListEnd(),JS[lP]=QS}o.readMapEnd(),KS[aP]=JS}o.readMapEnd(),ae[Fo]=KS}o.readMapEnd(),this.merged_data[A]=ae}o.readMapEnd()}else o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_execute_next_render_step_args"),this.pending_render!==null&&this.pending_render!==void 0&&(o.writeFieldBegin("pending_render",r.Type.STRUCT,1),this.pending_render.write(o),o.writeFieldEnd()),this.merged_data!==null&&this.merged_data!==void 0){o.writeFieldBegin("merged_data",r.Type.MAP,2),o.writeMapBegin(r.Type.STRING,r.Type.MAP,r.objectLength(this.merged_data));for(let T in this.merged_data)if(this.merged_data.hasOwnProperty(T)){let g=this.merged_data[T];o.writeString(T),o.writeMapBegin(r.Type.STRING,r.Type.MAP,r.objectLength(g));for(let y in g)if(g.hasOwnProperty(y)){let v=g[y];o.writeString(y),o.writeMapBegin(r.Type.STRING,r.Type.MAP,r.objectLength(v));for(let w in v)if(v.hasOwnProperty(w)){let S=v[w];o.writeString(w),o.writeMapBegin(r.Type.STRING,r.Type.LIST,r.objectLength(S));for(let A in S)if(S.hasOwnProperty(A)){let ae=S[A];o.writeString(A),o.writeListBegin(r.Type.STRUCT,ae.length);for(let Se in ae)ae.hasOwnProperty(Se)&&(Se=ae[Se],Se.write(o));o.writeListEnd()}o.writeMapEnd()}o.writeMapEnd()}o.writeMapEnd()}o.writeMapEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},Qw=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TRenderStepResult(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TRenderStepResult,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_execute_next_render_step_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},zL=class{constructor(o){this.session=null,this.insert_data=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.insert_data!==void 0&&o.insert_data!==null&&(this.insert_data=new l.TInsertData(o.insert_data)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRUCT?(this.insert_data=new l.TInsertData,this.insert_data.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_insert_data_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.insert_data!==null&&this.insert_data!==void 0&&(o.writeFieldBegin("insert_data",r.Type.STRUCT,2),this.insert_data.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},Zw=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_insert_data_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},qL=class{constructor(o){this.session=null,this.insert_chunks=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.insert_chunks!==void 0&&o.insert_chunks!==null&&(this.insert_chunks=new l.TInsertChunks(o.insert_chunks)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRUCT?(this.insert_chunks=new l.TInsertChunks,this.insert_chunks.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_insert_chunks_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.insert_chunks!==null&&this.insert_chunks!==void 0&&(o.writeFieldBegin("insert_chunks",r.Type.STRUCT,2),this.insert_chunks.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},eb=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_insert_chunks_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},VL=class{constructor(o){this.session=null,this.table_id=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.table_id!==void 0&&o.table_id!==null&&(this.table_id=o.table_id))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.I32?this.table_id=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_checkpoint_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(o.writeFieldBegin("table_id",r.Type.I32,2),o.writeI32(this.table_id),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},tb=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_checkpoint_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},GL=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_roles_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},nb=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_roles_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},HL=class{constructor(o){this.session=null,this.roleName=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.roleName!==void 0&&o.roleName!==null&&(this.roleName=o.roleName))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.roleName=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_db_objects_for_grantee_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(o.writeFieldBegin("roleName",r.Type.STRING,2),o.writeString(this.roleName),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ib=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TDBObject])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TDBObject,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_db_objects_for_grantee_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},WL=class{constructor(o){this.session=null,this.objectName=null,this.type=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.objectName!==void 0&&o.objectName!==null&&(this.objectName=o.objectName),o.type!==void 0&&o.type!==null&&(this.type=o.type))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.objectName=o.readString():o.skip(g);break;case 3:g==r.Type.I32?this.type=o.readI32():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_db_object_privs_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.objectName!==null&&this.objectName!==void 0&&(o.writeFieldBegin("objectName",r.Type.STRING,2),o.writeString(this.objectName),o.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(o.writeFieldBegin("type",r.Type.I32,3),o.writeI32(this.type),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},sb=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[l.TDBObject])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new l.TDBObject,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_db_object_privs_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},YL=class{constructor(o){this.session=null,this.userName=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.userName!==void 0&&o.userName!==null&&(this.userName=o.userName))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.userName=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_all_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(o.writeFieldBegin("userName",r.Type.STRING,2),o.writeString(this.userName),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},rb=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_all_roles_for_user_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},XL=class{constructor(o){this.session=null,this.userName=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.userName!==void 0&&o.userName!==null&&(this.userName=o.userName))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.userName=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_all_effective_roles_for_user_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.userName!==null&&this.userName!==void 0&&(o.writeFieldBegin("userName",r.Type.STRING,2),o.writeString(this.userName),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ab=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_all_effective_roles_for_user_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},KL=class{constructor(o){this.session=null,this.granteeName=null,this.roleName=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.granteeName!==void 0&&o.granteeName!==null&&(this.granteeName=o.granteeName),o.roleName!==void 0&&o.roleName!==null&&(this.roleName=o.roleName))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.granteeName=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.roleName=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_has_role_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(o.writeFieldBegin("granteeName",r.Type.STRING,2),o.writeString(this.granteeName),o.writeFieldEnd()),this.roleName!==null&&this.roleName!==void 0&&(o.writeFieldBegin("roleName",r.Type.STRING,3),o.writeString(this.roleName),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ob=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.BOOL?this.success=o.readBool():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_has_role_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.BOOL,0),o.writeBool(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},JL=class{constructor(o){this.session=null,this.granteeName=null,this.ObjectName=null,this.objectType=null,this.permissions=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.granteeName!==void 0&&o.granteeName!==null&&(this.granteeName=o.granteeName),o.ObjectName!==void 0&&o.ObjectName!==null&&(this.ObjectName=o.ObjectName),o.objectType!==void 0&&o.objectType!==null&&(this.objectType=o.objectType),o.permissions!==void 0&&o.permissions!==null&&(this.permissions=new l.TDBObjectPermissions(o.permissions)))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.granteeName=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.ObjectName=o.readString():o.skip(g);break;case 4:g==r.Type.I32?this.objectType=o.readI32():o.skip(g);break;case 5:g==r.Type.STRUCT?(this.permissions=new l.TDBObjectPermissions,this.permissions.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_has_object_privilege_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.granteeName!==null&&this.granteeName!==void 0&&(o.writeFieldBegin("granteeName",r.Type.STRING,2),o.writeString(this.granteeName),o.writeFieldEnd()),this.ObjectName!==null&&this.ObjectName!==void 0&&(o.writeFieldBegin("ObjectName",r.Type.STRING,3),o.writeString(this.ObjectName),o.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(o.writeFieldBegin("objectType",r.Type.I32,4),o.writeI32(this.objectType),o.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(o.writeFieldBegin("permissions",r.Type.STRUCT,5),this.permissions.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},lb=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=o.success),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.BOOL?this.success=o.readBool():o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_has_object_privilege_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.BOOL,0),o.writeBool(this.success),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},QL=class{constructor(o){this.session=null,this.key=null,this.nonce="",o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.key!==void 0&&o.key!==null&&(this.key=o.key),o.nonce!==void 0&&o.nonce!==null&&(this.nonce=o.nonce))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.key=o.readString():o.skip(g);break;case 3:g==r.Type.STRING?this.nonce=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_license_key_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.key!==null&&this.key!==void 0&&(o.writeFieldBegin("key",r.Type.STRING,2),o.writeString(this.key),o.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(o.writeFieldBegin("nonce",r.Type.STRING,3),o.writeString(this.nonce),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},cb=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TLicenseInfo(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TLicenseInfo,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_set_license_key_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},ZL=class{constructor(o){this.session=null,this.nonce="",o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.nonce!==void 0&&o.nonce!==null&&(this.nonce=o.nonce))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:g==r.Type.STRING?this.nonce=o.readString():o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_license_claims_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(o.writeFieldBegin("nonce",r.Type.STRING,2),o.writeString(this.nonce),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},db=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=new l.TLicenseInfo(o.success)),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:g==r.Type.STRUCT?(this.success=new l.TLicenseInfo,this.success.read(o)):o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_license_claims_result"),this.success!==null&&this.success!==void 0&&(o.writeFieldBegin("success",r.Type.STRUCT,0),this.success.write(o),o.writeFieldEnd()),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},eP=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_device_parameters_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},fb=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyMap(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.MAP){this.success={};const w=o.readMapBegin().size||0;for(let S=0;S<w;++S){let A=null,ae=null;A=o.readString(),ae=o.readString(),this.success[A]=ae}o.readMapEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_device_parameters_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.MAP,0),o.writeMapBegin(r.Type.STRING,r.Type.STRING,r.objectLength(this.success));for(let T in this.success)if(this.success.hasOwnProperty(T)){let g=this.success[T];o.writeString(T),o.writeString(g)}o.writeMapEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},tP=class{constructor(o){this.session=null,this.udfs=null,this.udtfs=null,this.device_ir_map=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.udfs!==void 0&&o.udfs!==null&&(this.udfs=r.copyList(o.udfs,[_.TUserDefinedFunction])),o.udtfs!==void 0&&o.udtfs!==null&&(this.udtfs=r.copyList(o.udtfs,[_.TUserDefinedTableFunction])),o.device_ir_map!==void 0&&o.device_ir_map!==null&&(this.device_ir_map=r.copyMap(o.device_ir_map,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:if(g==r.Type.LIST){this.udfs=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new _.TUserDefinedFunction,A.read(o),this.udfs.push(A)}o.readListEnd()}else o.skip(g);break;case 3:if(g==r.Type.LIST){this.udtfs=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new _.TUserDefinedTableFunction,A.read(o),this.udtfs.push(A)}o.readListEnd()}else o.skip(g);break;case 4:if(g==r.Type.MAP){this.device_ir_map={};const w=o.readMapBegin().size||0;for(let S=0;S<w;++S){let A=null,ae=null;A=o.readString(),ae=o.readString(),this.device_ir_map[A]=ae}o.readMapEnd()}else o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_register_runtime_extension_functions_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.udfs!==null&&this.udfs!==void 0){o.writeFieldBegin("udfs",r.Type.LIST,2),o.writeListBegin(r.Type.STRUCT,this.udfs.length);for(let T in this.udfs)this.udfs.hasOwnProperty(T)&&(T=this.udfs[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.udtfs!==null&&this.udtfs!==void 0){o.writeFieldBegin("udtfs",r.Type.LIST,3),o.writeListBegin(r.Type.STRUCT,this.udtfs.length);for(let T in this.udtfs)this.udtfs.hasOwnProperty(T)&&(T=this.udtfs[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}if(this.device_ir_map!==null&&this.device_ir_map!==void 0){o.writeFieldBegin("device_ir_map",r.Type.MAP,4),o.writeMapBegin(r.Type.STRING,r.Type.STRING,r.objectLength(this.device_ir_map));for(let T in this.device_ir_map)if(this.device_ir_map.hasOwnProperty(T)){let g=this.device_ir_map[T];o.writeString(T),o.writeString(g)}o.writeMapEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},ub=class{constructor(o){if(this.e=null,o instanceof l.TDBException){this.e=o;return}o&&o.e!==void 0&&o.e!==null&&(this.e=o.e)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_register_runtime_extension_functions_result"),this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},nP=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_table_function_names_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},hb=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_table_function_names_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},iP=class{constructor(o){this.session=null,o&&o.session!==void 0&&o.session!==null&&(this.session=o.session)}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 0:o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){o.writeStructBegin("Heavy_get_runtime_table_function_names_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},_b=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[null])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_runtime_table_function_names_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRING,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}},sP=class{constructor(o){this.session=null,this.udtf_names=null,o&&(o.session!==void 0&&o.session!==null&&(this.session=o.session),o.udtf_names!==void 0&&o.udtf_names!==null&&(this.udtf_names=r.copyList(o.udtf_names,[null])))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 1:g==r.Type.STRING?this.session=o.readString():o.skip(g);break;case 2:if(g==r.Type.LIST){this.udtf_names=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=o.readString(),this.udtf_names.push(A)}o.readListEnd()}else o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_table_function_details_args"),this.session!==null&&this.session!==void 0&&(o.writeFieldBegin("session",r.Type.STRING,1),o.writeString(this.session),o.writeFieldEnd()),this.udtf_names!==null&&this.udtf_names!==void 0){o.writeFieldBegin("udtf_names",r.Type.LIST,2),o.writeListBegin(r.Type.STRING,this.udtf_names.length);for(let T in this.udtf_names)this.udtf_names.hasOwnProperty(T)&&(T=this.udtf_names[T],o.writeString(T));o.writeListEnd(),o.writeFieldEnd()}o.writeFieldStop(),o.writeStructEnd()}},pb=class{constructor(o){if(this.success=null,this.e=null,o instanceof l.TDBException){this.e=o;return}o&&(o.success!==void 0&&o.success!==null&&(this.success=r.copyList(o.success,[_.TUserDefinedTableFunction])),o.e!==void 0&&o.e!==null&&(this.e=o.e))}read(o){for(o.readStructBegin();;){const T=o.readFieldBegin(),g=T.ftype,y=T.fid;if(g==r.Type.STOP)break;switch(y){case 0:if(g==r.Type.LIST){this.success=[];const w=o.readListBegin().size||0;for(let S=0;S<w;++S){let A=null;A=new _.TUserDefinedTableFunction,A.read(o),this.success.push(A)}o.readListEnd()}else o.skip(g);break;case 1:g==r.Type.STRUCT?(this.e=new l.TDBException,this.e.read(o)):o.skip(g);break;default:o.skip(g)}o.readFieldEnd()}o.readStructEnd()}write(o){if(o.writeStructBegin("Heavy_get_table_function_details_result"),this.success!==null&&this.success!==void 0){o.writeFieldBegin("success",r.Type.LIST,0),o.writeListBegin(r.Type.STRUCT,this.success.length);for(let T in this.success)this.success.hasOwnProperty(T)&&(T=this.success[T],T.write(o));o.writeListEnd(),o.writeFieldEnd()}this.e!==null&&this.e!==void 0&&(o.writeFieldBegin("e",r.Type.STRUCT,1),this.e.write(o),o.writeFieldEnd()),o.writeFieldStop(),o.writeStructEnd()}};d.Client=class{constructor(T,g){this.output=T,this.pClass=g,this._seqid=0,this._reqs={}}seqid(){return this._seqid}new_seqid(){return this._seqid+=1}connect(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_connect(T,g,y)})}send_connect(T,g,y){const v=new this.pClass(this.output),w={user:T,passwd:g,dbname:y},S=new b(w);try{return v.writeMessageBegin("connect",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_connect(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new m;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("connect failed: unknown result")}krb5_connect(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_krb5_connect(T,g)})}send_krb5_connect(T,g){const y=new this.pClass(this.output),v={inputToken:T,dbname:g},w=new E(v);try{return y.writeMessageBegin("krb5_connect",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_krb5_connect(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new B;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("krb5_connect failed: unknown result")}disconnect(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_disconnect(T)})}send_disconnect(T){const g=new this.pClass(this.output),y={session:T},v=new I(y);try{return g.writeMessageBegin("disconnect",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_disconnect(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new k;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}switch_database(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_switch_database(T,g)})}send_switch_database(T,g){const y=new this.pClass(this.output),v={session:T,dbname:g},w=new F(v);try{return y.writeMessageBegin("switch_database",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_switch_database(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new x;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}clone_session(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_clone_session(T)})}send_clone_session(T){const g=new this.pClass(this.output),y={session:T},v=new M(y);try{return g.writeMessageBegin("clone_session",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_clone_session(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new R;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("clone_session failed: unknown result")}get_server_status(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_server_status(T)})}send_get_server_status(T){const g=new this.pClass(this.output),y={session:T},v=new P(y);try{return g.writeMessageBegin("get_server_status",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_server_status(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new C;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_server_status failed: unknown result")}get_status(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_status(T)})}send_get_status(T){const g=new this.pClass(this.output),y={session:T},v=new D(y);try{return g.writeMessageBegin("get_status",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_status(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new j;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_status failed: unknown result")}get_hardware_info(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_hardware_info(T)})}send_get_hardware_info(T){const g=new this.pClass(this.output),y={session:T},v=new $(y);try{return g.writeMessageBegin("get_hardware_info",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_hardware_info(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new W;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_hardware_info failed: unknown result")}get_tables(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_tables(T)})}send_get_tables(T){const g=new this.pClass(this.output),y={session:T},v=new H(y);try{return g.writeMessageBegin("get_tables",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_tables(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new G;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_tables failed: unknown result")}get_tables_for_database(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_tables_for_database(T,g)})}send_get_tables_for_database(T,g){const y=new this.pClass(this.output),v={session:T,database_name:g},w=new z(v);try{return y.writeMessageBegin("get_tables_for_database",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_tables_for_database(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new q;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_tables_for_database failed: unknown result")}get_physical_tables(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_physical_tables(T)})}send_get_physical_tables(T){const g=new this.pClass(this.output),y={session:T},v=new ie(y);try{return g.writeMessageBegin("get_physical_tables",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_physical_tables(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ce;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_physical_tables failed: unknown result")}get_views(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_views(T)})}send_get_views(T){const g=new this.pClass(this.output),y={session:T},v=new se(y);try{return g.writeMessageBegin("get_views",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_views(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Ie;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_views failed: unknown result")}get_tables_meta(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_tables_meta(T)})}send_get_tables_meta(T){const g=new this.pClass(this.output),y={session:T},v=new he(y);try{return g.writeMessageBegin("get_tables_meta",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_tables_meta(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Me;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_tables_meta failed: unknown result")}get_table_details(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_table_details(T,g)})}send_get_table_details(T,g){const y=new this.pClass(this.output),v={session:T,table_name:g},w=new Ue(v);try{return y.writeMessageBegin("get_table_details",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_table_details(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new _e;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_table_details failed: unknown result")}get_table_details_for_database(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_table_details_for_database(T,g,y)})}send_get_table_details_for_database(T,g,y){const v=new this.pClass(this.output),w={session:T,table_name:g,database_name:y},S=new ke(w);try{return v.writeMessageBegin("get_table_details_for_database",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_table_details_for_database(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Ee;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_table_details_for_database failed: unknown result")}get_internal_table_details(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_internal_table_details(T,g,y)})}send_get_internal_table_details(T,g,y){const v=new this.pClass(this.output),w={session:T,table_name:g,include_system_columns:y},S=new ye(w);try{return v.writeMessageBegin("get_internal_table_details",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_internal_table_details(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new X;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_internal_table_details failed: unknown result")}get_internal_table_details_for_database(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_internal_table_details_for_database(T,g,y)})}send_get_internal_table_details_for_database(T,g,y){const v=new this.pClass(this.output),w={session:T,table_name:g,database_name:y},S=new Y(w);try{return v.writeMessageBegin("get_internal_table_details_for_database",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_internal_table_details_for_database(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new U;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_internal_table_details_for_database failed: unknown result")}get_users(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_users(T)})}send_get_users(T){const g=new this.pClass(this.output),y={session:T},v=new J(y);try{return g.writeMessageBegin("get_users",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_users(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new K;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_users failed: unknown result")}get_databases(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_databases(T)})}send_get_databases(T){const g=new this.pClass(this.output),y={session:T},v=new Z(y);try{return g.writeMessageBegin("get_databases",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_databases(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Q;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_databases failed: unknown result")}get_version(){this._seqid=this.new_seqid();const T=this;return new Promise((g,y)=>{T._reqs[T.seqid()]=(v,w)=>v?y(v):g(w),T.send_get_version()})}send_get_version(){const T=new this.pClass(this.output),g=new fe;try{return T.writeMessageBegin("get_version",r.MessageType.CALL,this.seqid()),g.write(T),T.writeMessageEnd(),this.output.flush()}catch(y){throw delete this._reqs[this.seqid()],typeof T.reset=="function"&&T.reset(),y}}recv_get_version(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ee;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_version failed: unknown result")}start_heap_profile(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_start_heap_profile(T)})}send_start_heap_profile(T){const g=new this.pClass(this.output),y={session:T},v=new le(y);try{return g.writeMessageBegin("start_heap_profile",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_start_heap_profile(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Ne;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}stop_heap_profile(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_stop_heap_profile(T)})}send_stop_heap_profile(T){const g=new this.pClass(this.output),y={session:T},v=new He(y);try{return g.writeMessageBegin("stop_heap_profile",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_stop_heap_profile(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ft;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}get_heap_profile(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_heap_profile(T)})}send_get_heap_profile(T){const g=new this.pClass(this.output),y={session:T},v=new de(y);try{return g.writeMessageBegin("get_heap_profile",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_heap_profile(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ve;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_heap_profile failed: unknown result")}get_memory(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_memory(T,g)})}send_get_memory(T,g){const y=new this.pClass(this.output),v={session:T,memory_level:g},w=new Ce(v);try{return y.writeMessageBegin("get_memory",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_memory(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new re;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_memory failed: unknown result")}clear_cpu_memory(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_clear_cpu_memory(T)})}send_clear_cpu_memory(T){const g=new this.pClass(this.output),y={session:T},v=new rt(y);try{return g.writeMessageBegin("clear_cpu_memory",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_clear_cpu_memory(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new tt;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}clear_gpu_memory(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_clear_gpu_memory(T)})}send_clear_gpu_memory(T){const g=new this.pClass(this.output),y={session:T},v=new Rt(y);try{return g.writeMessageBegin("clear_gpu_memory",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_clear_gpu_memory(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new $t;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}set_cur_session(T,g,y,v,w){this._seqid=this.new_seqid();const S=this;return new Promise((A,ae)=>{S._reqs[S.seqid()]=(Se,at)=>Se?ae(Se):A(at),S.send_set_cur_session(T,g,y,v,w)})}send_set_cur_session(T,g,y,v,w){const S=new this.pClass(this.output),A={parent_session:T,leaf_session:g,start_time_str:y,label:v,for_running_query_kernel:w},ae=new ds(A);try{return S.writeMessageBegin("set_cur_session",r.MessageType.CALL,this.seqid()),ae.write(S),S.writeMessageEnd(),this.output.flush()}catch(Se){throw delete this._reqs[this.seqid()],typeof S.reset=="function"&&S.reset(),Se}}recv_set_cur_session(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new me;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}invalidate_cur_session(T,g,y,v,w){this._seqid=this.new_seqid();const S=this;return new Promise((A,ae)=>{S._reqs[S.seqid()]=(Se,at)=>Se?ae(Se):A(at),S.send_invalidate_cur_session(T,g,y,v,w)})}send_invalidate_cur_session(T,g,y,v,w){const S=new this.pClass(this.output),A={parent_session:T,leaf_session:g,start_time_str:y,label:v,for_running_query_kernel:w},ae=new pe(A);try{return S.writeMessageBegin("invalidate_cur_session",r.MessageType.CALL,this.seqid()),ae.write(S),S.writeMessageEnd(),this.output.flush()}catch(Se){throw delete this._reqs[this.seqid()],typeof S.reset=="function"&&S.reset(),Se}}recv_invalidate_cur_session(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new qt;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}set_table_epoch(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_set_table_epoch(T,g,y,v)})}send_set_table_epoch(T,g,y,v){const w=new this.pClass(this.output),S={session:T,db_id:g,table_id:y,new_epoch:v},A=new L(S);try{return w.writeMessageBegin("set_table_epoch",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_set_table_epoch(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new O;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}set_table_epoch_by_name(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_set_table_epoch_by_name(T,g,y)})}send_set_table_epoch_by_name(T,g,y){const v=new this.pClass(this.output),w={session:T,table_name:g,new_epoch:y},S=new N(w);try{return v.writeMessageBegin("set_table_epoch_by_name",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_set_table_epoch_by_name(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new V;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}get_table_epoch(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_table_epoch(T,g,y)})}send_get_table_epoch(T,g,y){const v=new this.pClass(this.output),w={session:T,db_id:g,table_id:y},S=new te(w);try{return v.writeMessageBegin("get_table_epoch",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_table_epoch(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new oe;return w.read(T),T.readMessageEnd(),w.success!==null?v(null,w.success):v("get_table_epoch failed: unknown result")}get_table_epoch_by_name(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_table_epoch_by_name(T,g)})}send_get_table_epoch_by_name(T,g){const y=new this.pClass(this.output),v={session:T,table_name:g},w=new ue(v);try{return y.writeMessageBegin("get_table_epoch_by_name",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_table_epoch_by_name(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Ge;return w.read(T),T.readMessageEnd(),w.success!==null?v(null,w.success):v("get_table_epoch_by_name failed: unknown result")}get_table_epochs(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_table_epochs(T,g,y)})}send_get_table_epochs(T,g,y){const v=new this.pClass(this.output),w={session:T,db_id:g,table_id:y},S=new Ze(w);try{return v.writeMessageBegin("get_table_epochs",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_table_epochs(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new nt;return w.read(T),T.readMessageEnd(),w.success!==null?v(null,w.success):v("get_table_epochs failed: unknown result")}set_table_epochs(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_set_table_epochs(T,g,y)})}send_set_table_epochs(T,g,y){const v=new this.pClass(this.output),w={session:T,db_id:g,table_epochs:y},S=new ut(w);try{return v.writeMessageBegin("set_table_epochs",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_set_table_epochs(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}new ht().read(T),T.readMessageEnd(),v(null)}get_session_info(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_session_info(T)})}send_get_session_info(T){const g=new this.pClass(this.output),y={session:T},v=new Cl(y);try{return g.writeMessageBegin("get_session_info",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_session_info(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new iw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_session_info failed: unknown result")}get_queries_info(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_queries_info(T)})}send_get_queries_info(T){const g=new this.pClass(this.output),y={session:T},v=new WC(y);try{return g.writeMessageBegin("get_queries_info",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_queries_info(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new sw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_queries_info failed: unknown result")}set_leaf_info(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_set_leaf_info(T,g)})}send_set_leaf_info(T,g){const y=new this.pClass(this.output),v={session:T,leaf_info:g},w=new YC(v);try{return y.writeMessageBegin("set_leaf_info",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_set_leaf_info(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new rw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}sql_execute(T,g,y,v,w,S){this._seqid=this.new_seqid();const A=this;return new Promise((ae,Se)=>{A._reqs[A.seqid()]=(at,yn)=>at?Se(at):ae(yn),A.send_sql_execute(T,g,y,v,w,S)})}send_sql_execute(T,g,y,v,w,S){const A=new this.pClass(this.output),ae={session:T,query:g,column_format:y,nonce:v,first_n:w,at_most_n:S},Se=new XC(ae);try{return A.writeMessageBegin("sql_execute",r.MessageType.CALL,this.seqid()),Se.write(A),A.writeMessageEnd(),this.output.flush()}catch(at){throw delete this._reqs[this.seqid()],typeof A.reset=="function"&&A.reset(),at}}recv_sql_execute(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new aw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("sql_execute failed: unknown result")}sql_execute_df(T,g,y,v,w,S){this._seqid=this.new_seqid();const A=this;return new Promise((ae,Se)=>{A._reqs[A.seqid()]=(at,yn)=>at?Se(at):ae(yn),A.send_sql_execute_df(T,g,y,v,w,S)})}send_sql_execute_df(T,g,y,v,w,S){const A=new this.pClass(this.output),ae={session:T,query:g,device_type:y,device_id:v,first_n:w,transport_method:S},Se=new KC(ae);try{return A.writeMessageBegin("sql_execute_df",r.MessageType.CALL,this.seqid()),Se.write(A),A.writeMessageEnd(),this.output.flush()}catch(at){throw delete this._reqs[this.seqid()],typeof A.reset=="function"&&A.reset(),at}}recv_sql_execute_df(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ow;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("sql_execute_df failed: unknown result")}sql_execute_gdf(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_sql_execute_gdf(T,g,y,v)})}send_sql_execute_gdf(T,g,y,v){const w=new this.pClass(this.output),S={session:T,query:g,device_id:y,first_n:v},A=new JC(S);try{return w.writeMessageBegin("sql_execute_gdf",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_sql_execute_gdf(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new lw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("sql_execute_gdf failed: unknown result")}deallocate_df(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_deallocate_df(T,g,y,v)})}send_deallocate_df(T,g,y,v){const w=new this.pClass(this.output),S={session:T,df:g,device_type:y,device_id:v},A=new QC(S);try{return w.writeMessageBegin("deallocate_df",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_deallocate_df(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new cw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}interrupt(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_interrupt(T,g)})}send_interrupt(T,g){const y=new this.pClass(this.output),v={query_session:T,interrupt_session:g},w=new ZC(v);try{return y.writeMessageBegin("interrupt",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_interrupt(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new dw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}sql_validate(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_sql_validate(T,g)})}send_sql_validate(T,g){const y=new this.pClass(this.output),v={session:T,query:g},w=new eL(v);try{return y.writeMessageBegin("sql_validate",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_sql_validate(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new fw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("sql_validate failed: unknown result")}get_completion_hints(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_completion_hints(T,g,y)})}send_get_completion_hints(T,g,y){const v=new this.pClass(this.output),w={session:T,sql:g,cursor:y},S=new tL(w);try{return v.writeMessageBegin("get_completion_hints",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_completion_hints(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new uw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_completion_hints failed: unknown result")}set_execution_mode(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_set_execution_mode(T,g)})}send_set_execution_mode(T,g){const y=new this.pClass(this.output),v={session:T,mode:g},w=new nL(v);try{return y.writeMessageBegin("set_execution_mode",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_set_execution_mode(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new hw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}render_vega(T,g,y,v,w){this._seqid=this.new_seqid();const S=this;return new Promise((A,ae)=>{S._reqs[S.seqid()]=(Se,at)=>Se?ae(Se):A(at),S.send_render_vega(T,g,y,v,w)})}send_render_vega(T,g,y,v,w){const S=new this.pClass(this.output),A={session:T,widget_id:g,vega_json:y,compression_level:v,nonce:w},ae=new iL(A);try{return S.writeMessageBegin("render_vega",r.MessageType.CALL,this.seqid()),ae.write(S),S.writeMessageEnd(),this.output.flush()}catch(Se){throw delete this._reqs[this.seqid()],typeof S.reset=="function"&&S.reset(),Se}}recv_render_vega(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new _w;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("render_vega failed: unknown result")}get_result_row_for_pixel(T,g,y,v,w,S,A){this._seqid=this.new_seqid();const ae=this;return new Promise((Se,at)=>{ae._reqs[ae.seqid()]=(yn,Fo)=>yn?at(yn):Se(Fo),ae.send_get_result_row_for_pixel(T,g,y,v,w,S,A)})}send_get_result_row_for_pixel(T,g,y,v,w,S,A){const ae=new this.pClass(this.output),Se={session:T,widget_id:g,pixel:y,table_col_names:v,column_format:w,pixelRadius:S,nonce:A},at=new sL(Se);try{return ae.writeMessageBegin("get_result_row_for_pixel",r.MessageType.CALL,this.seqid()),at.write(ae),ae.writeMessageEnd(),this.output.flush()}catch(yn){throw delete this._reqs[this.seqid()],typeof ae.reset=="function"&&ae.reset(),yn}}recv_get_result_row_for_pixel(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new pw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_result_row_for_pixel failed: unknown result")}create_custom_expression(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_create_custom_expression(T,g)})}send_create_custom_expression(T,g){const y=new this.pClass(this.output),v={session:T,custom_expression:g},w=new rL(v);try{return y.writeMessageBegin("create_custom_expression",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_create_custom_expression(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new yw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("create_custom_expression failed: unknown result")}get_custom_expressions(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_custom_expressions(T)})}send_get_custom_expressions(T){const g=new this.pClass(this.output),y={session:T},v=new aL(y);try{return g.writeMessageBegin("get_custom_expressions",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_custom_expressions(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new gw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_custom_expressions failed: unknown result")}update_custom_expression(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_update_custom_expression(T,g,y)})}send_update_custom_expression(T,g,y){const v=new this.pClass(this.output),w={session:T,id:g,expression_json:y},S=new oL(w);try{return v.writeMessageBegin("update_custom_expression",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_update_custom_expression(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new mw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}delete_custom_expressions(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_delete_custom_expressions(T,g,y)})}send_delete_custom_expressions(T,g,y){const v=new this.pClass(this.output),w={session:T,custom_expression_ids:g,do_soft_delete:y},S=new lL(w);try{return v.writeMessageBegin("delete_custom_expressions",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_delete_custom_expressions(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ww;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}get_dashboard(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_dashboard(T,g)})}send_get_dashboard(T,g){const y=new this.pClass(this.output),v={session:T,dashboard_id:g},w=new cL(v);try{return y.writeMessageBegin("get_dashboard",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_dashboard(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new bw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_dashboard failed: unknown result")}get_dashboards(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_dashboards(T)})}send_get_dashboards(T){const g=new this.pClass(this.output),y={session:T},v=new dL(y);try{return g.writeMessageBegin("get_dashboards",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_dashboards(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Tw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_dashboards failed: unknown result")}create_dashboard(T,g,y,v,w){this._seqid=this.new_seqid();const S=this;return new Promise((A,ae)=>{S._reqs[S.seqid()]=(Se,at)=>Se?ae(Se):A(at),S.send_create_dashboard(T,g,y,v,w)})}send_create_dashboard(T,g,y,v,w){const S=new this.pClass(this.output),A={session:T,dashboard_name:g,dashboard_state:y,image_hash:v,dashboard_metadata:w},ae=new fL(A);try{return S.writeMessageBegin("create_dashboard",r.MessageType.CALL,this.seqid()),ae.write(S),S.writeMessageEnd(),this.output.flush()}catch(Se){throw delete this._reqs[this.seqid()],typeof S.reset=="function"&&S.reset(),Se}}recv_create_dashboard(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new vw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("create_dashboard failed: unknown result")}replace_dashboard(T,g,y,v,w,S,A){this._seqid=this.new_seqid();const ae=this;return new Promise((Se,at)=>{ae._reqs[ae.seqid()]=(yn,Fo)=>yn?at(yn):Se(Fo),ae.send_replace_dashboard(T,g,y,v,w,S,A)})}send_replace_dashboard(T,g,y,v,w,S,A){const ae=new this.pClass(this.output),Se={session:T,dashboard_id:g,dashboard_name:y,dashboard_owner:v,dashboard_state:w,image_hash:S,dashboard_metadata:A},at=new uL(Se);try{return ae.writeMessageBegin("replace_dashboard",r.MessageType.CALL,this.seqid()),at.write(ae),ae.writeMessageEnd(),this.output.flush()}catch(yn){throw delete this._reqs[this.seqid()],typeof ae.reset=="function"&&ae.reset(),yn}}recv_replace_dashboard(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Ew;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}delete_dashboard(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_delete_dashboard(T,g)})}send_delete_dashboard(T,g){const y=new this.pClass(this.output),v={session:T,dashboard_id:g},w=new hL(v);try{return y.writeMessageBegin("delete_dashboard",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_delete_dashboard(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Sw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}share_dashboards(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_share_dashboards(T,g,y,v)})}send_share_dashboards(T,g,y,v){const w=new this.pClass(this.output),S={session:T,dashboard_ids:g,groups:y,permissions:v},A=new _L(S);try{return w.writeMessageBegin("share_dashboards",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_share_dashboards(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Bw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}delete_dashboards(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_delete_dashboards(T,g)})}send_delete_dashboards(T,g){const y=new this.pClass(this.output),v={session:T,dashboard_ids:g},w=new pL(v);try{return y.writeMessageBegin("delete_dashboards",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_delete_dashboards(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Iw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}share_dashboard(T,g,y,v,w,S){this._seqid=this.new_seqid();const A=this;return new Promise((ae,Se)=>{A._reqs[A.seqid()]=(at,yn)=>at?Se(at):ae(yn),A.send_share_dashboard(T,g,y,v,w,S)})}send_share_dashboard(T,g,y,v,w,S){const A=new this.pClass(this.output),ae={session:T,dashboard_id:g,groups:y,objects:v,permissions:w,grant_role:S},Se=new yL(ae);try{return A.writeMessageBegin("share_dashboard",r.MessageType.CALL,this.seqid()),Se.write(A),A.writeMessageEnd(),this.output.flush()}catch(at){throw delete this._reqs[this.seqid()],typeof A.reset=="function"&&A.reset(),at}}recv_share_dashboard(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Fw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}unshare_dashboard(T,g,y,v,w){this._seqid=this.new_seqid();const S=this;return new Promise((A,ae)=>{S._reqs[S.seqid()]=(Se,at)=>Se?ae(Se):A(at),S.send_unshare_dashboard(T,g,y,v,w)})}send_unshare_dashboard(T,g,y,v,w){const S=new this.pClass(this.output),A={session:T,dashboard_id:g,groups:y,objects:v,permissions:w},ae=new gL(A);try{return S.writeMessageBegin("unshare_dashboard",r.MessageType.CALL,this.seqid()),ae.write(S),S.writeMessageEnd(),this.output.flush()}catch(Se){throw delete this._reqs[this.seqid()],typeof S.reset=="function"&&S.reset(),Se}}recv_unshare_dashboard(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new kw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}unshare_dashboards(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_unshare_dashboards(T,g,y,v)})}send_unshare_dashboards(T,g,y,v){const w=new this.pClass(this.output),S={session:T,dashboard_ids:g,groups:y,permissions:v},A=new mL(S);try{return w.writeMessageBegin("unshare_dashboards",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_unshare_dashboards(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new xw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}get_dashboard_grantees(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_dashboard_grantees(T,g)})}send_get_dashboard_grantees(T,g){const y=new this.pClass(this.output),v={session:T,dashboard_id:g},w=new wL(v);try{return y.writeMessageBegin("get_dashboard_grantees",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_dashboard_grantees(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Mw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_dashboard_grantees failed: unknown result")}get_link_view(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_link_view(T,g)})}send_get_link_view(T,g){const y=new this.pClass(this.output),v={session:T,link:g},w=new bL(v);try{return y.writeMessageBegin("get_link_view",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_link_view(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Aw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_link_view failed: unknown result")}create_link(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_create_link(T,g,y)})}send_create_link(T,g,y){const v=new this.pClass(this.output),w={session:T,view_state:g,view_metadata:y},S=new TL(w);try{return v.writeMessageBegin("create_link",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_create_link(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Ow;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("create_link failed: unknown result")}load_table_binary(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_load_table_binary(T,g,y,v)})}send_load_table_binary(T,g,y,v){const w=new this.pClass(this.output),S={session:T,table_name:g,rows:y,column_names:v},A=new vL(S);try{return w.writeMessageBegin("load_table_binary",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_load_table_binary(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Nw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}load_table_binary_columnar(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_load_table_binary_columnar(T,g,y,v)})}send_load_table_binary_columnar(T,g,y,v){const w=new this.pClass(this.output),S={session:T,table_name:g,cols:y,column_names:v},A=new EL(S);try{return w.writeMessageBegin("load_table_binary_columnar",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_load_table_binary_columnar(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Rw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}load_table_binary_columnar_polys(T,g,y,v,w){this._seqid=this.new_seqid();const S=this;return new Promise((A,ae)=>{S._reqs[S.seqid()]=(Se,at)=>Se?ae(Se):A(at),S.send_load_table_binary_columnar_polys(T,g,y,v,w)})}send_load_table_binary_columnar_polys(T,g,y,v,w){const S=new this.pClass(this.output),A={session:T,table_name:g,cols:y,column_names:v,assign_render_groups:w},ae=new SL(A);try{return S.writeMessageBegin("load_table_binary_columnar_polys",r.MessageType.CALL,this.seqid()),ae.write(S),S.writeMessageEnd(),this.output.flush()}catch(Se){throw delete this._reqs[this.seqid()],typeof S.reset=="function"&&S.reset(),Se}}recv_load_table_binary_columnar_polys(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Cw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}load_table_binary_arrow(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_load_table_binary_arrow(T,g,y,v)})}send_load_table_binary_arrow(T,g,y,v){const w=new this.pClass(this.output),S={session:T,table_name:g,arrow_stream:y,use_column_names:v},A=new BL(S);try{return w.writeMessageBegin("load_table_binary_arrow",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_load_table_binary_arrow(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Lw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}load_table(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_load_table(T,g,y,v)})}send_load_table(T,g,y,v){const w=new this.pClass(this.output),S={session:T,table_name:g,rows:y,column_names:v},A=new IL(S);try{return w.writeMessageBegin("load_table",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_load_table(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Pw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}detect_column_types(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_detect_column_types(T,g,y)})}send_detect_column_types(T,g,y){const v=new this.pClass(this.output),w={session:T,file_name:g,copy_params:y},S=new FL(w);try{return v.writeMessageBegin("detect_column_types",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_detect_column_types(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Dw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("detect_column_types failed: unknown result")}create_table(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_create_table(T,g,y,v)})}send_create_table(T,g,y,v){const w=new this.pClass(this.output),S={session:T,table_name:g,row_desc:y,create_params:v},A=new kL(S);try{return w.writeMessageBegin("create_table",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_create_table(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Uw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}import_table(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_import_table(T,g,y,v)})}send_import_table(T,g,y,v){const w=new this.pClass(this.output),S={session:T,table_name:g,file_name:y,copy_params:v},A=new xL(S);try{return w.writeMessageBegin("import_table",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_import_table(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new jw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}import_geo_table(T,g,y,v,w,S){this._seqid=this.new_seqid();const A=this;return new Promise((ae,Se)=>{A._reqs[A.seqid()]=(at,yn)=>at?Se(at):ae(yn),A.send_import_geo_table(T,g,y,v,w,S)})}send_import_geo_table(T,g,y,v,w,S){const A=new this.pClass(this.output),ae={session:T,table_name:g,file_name:y,copy_params:v,row_desc:w,create_params:S},Se=new ML(ae);try{return A.writeMessageBegin("import_geo_table",r.MessageType.CALL,this.seqid()),Se.write(A),A.writeMessageEnd(),this.output.flush()}catch(at){throw delete this._reqs[this.seqid()],typeof A.reset=="function"&&A.reset(),at}}recv_import_geo_table(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new $w;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}import_table_status(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_import_table_status(T,g)})}send_import_table_status(T,g){const y=new this.pClass(this.output),v={session:T,import_id:g},w=new AL(v);try{return y.writeMessageBegin("import_table_status",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_import_table_status(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new zw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("import_table_status failed: unknown result")}get_first_geo_file_in_archive(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_first_geo_file_in_archive(T,g,y)})}send_get_first_geo_file_in_archive(T,g,y){const v=new this.pClass(this.output),w={session:T,archive_path:g,copy_params:y},S=new OL(w);try{return v.writeMessageBegin("get_first_geo_file_in_archive",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_first_geo_file_in_archive(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new qw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_first_geo_file_in_archive failed: unknown result")}get_all_files_in_archive(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_all_files_in_archive(T,g,y)})}send_get_all_files_in_archive(T,g,y){const v=new this.pClass(this.output),w={session:T,archive_path:g,copy_params:y},S=new NL(w);try{return v.writeMessageBegin("get_all_files_in_archive",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_all_files_in_archive(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Vw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_all_files_in_archive failed: unknown result")}get_layers_in_geo_file(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_layers_in_geo_file(T,g,y)})}send_get_layers_in_geo_file(T,g,y){const v=new this.pClass(this.output),w={session:T,file_name:g,copy_params:y},S=new RL(w);try{return v.writeMessageBegin("get_layers_in_geo_file",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_layers_in_geo_file(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Gw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_layers_in_geo_file failed: unknown result")}query_get_outer_fragment_count(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_query_get_outer_fragment_count(T,g)})}send_query_get_outer_fragment_count(T,g){const y=new this.pClass(this.output),v={session:T,query:g},w=new CL(v);try{return y.writeMessageBegin("query_get_outer_fragment_count",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_query_get_outer_fragment_count(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Hw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("query_get_outer_fragment_count failed: unknown result")}check_table_consistency(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_check_table_consistency(T,g)})}send_check_table_consistency(T,g){const y=new this.pClass(this.output),v={session:T,table_id:g},w=new LL(v);try{return y.writeMessageBegin("check_table_consistency",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_check_table_consistency(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Ww;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("check_table_consistency failed: unknown result")}start_query(T,g,y,v,w,S){this._seqid=this.new_seqid();const A=this;return new Promise((ae,Se)=>{A._reqs[A.seqid()]=(at,yn)=>at?Se(at):ae(yn),A.send_start_query(T,g,y,v,w,S)})}send_start_query(T,g,y,v,w,S){const A=new this.pClass(this.output),ae={leaf_session:T,parent_session:g,query_ra:y,start_time_str:v,just_explain:w,outer_fragment_indices:S},Se=new PL(ae);try{return A.writeMessageBegin("start_query",r.MessageType.CALL,this.seqid()),Se.write(A),A.writeMessageEnd(),this.output.flush()}catch(at){throw delete this._reqs[this.seqid()],typeof A.reset=="function"&&A.reset(),at}}recv_start_query(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Yw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("start_query failed: unknown result")}execute_query_step(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_execute_query_step(T,g,y)})}send_execute_query_step(T,g,y){const v=new this.pClass(this.output),w={pending_query:T,subquery_id:g,start_time_str:y},S=new DL(w);try{return v.writeMessageBegin("execute_query_step",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_execute_query_step(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Xw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("execute_query_step failed: unknown result")}broadcast_serialized_rows(T,g,y,v,w){this._seqid=this.new_seqid();const S=this;return new Promise((A,ae)=>{S._reqs[S.seqid()]=(Se,at)=>Se?ae(Se):A(at),S.send_broadcast_serialized_rows(T,g,y,v,w)})}send_broadcast_serialized_rows(T,g,y,v,w){const S=new this.pClass(this.output),A={serialized_rows:T,row_desc:g,query_id:y,subquery_id:v,is_final_subquery_result:w},ae=new UL(A);try{return S.writeMessageBegin("broadcast_serialized_rows",r.MessageType.CALL,this.seqid()),ae.write(S),S.writeMessageEnd(),this.output.flush()}catch(Se){throw delete this._reqs[this.seqid()],typeof S.reset=="function"&&S.reset(),Se}}recv_broadcast_serialized_rows(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Kw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}start_render_query(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_start_render_query(T,g,y,v)})}send_start_render_query(T,g,y,v){const w=new this.pClass(this.output),S={session:T,widget_id:g,node_idx:y,vega_json:v},A=new jL(S);try{return w.writeMessageBegin("start_render_query",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_start_render_query(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Jw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("start_render_query failed: unknown result")}execute_next_render_step(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_execute_next_render_step(T,g)})}send_execute_next_render_step(T,g){const y=new this.pClass(this.output),v={pending_render:T,merged_data:g},w=new $L(v);try{return y.writeMessageBegin("execute_next_render_step",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_execute_next_render_step(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Qw;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("execute_next_render_step failed: unknown result")}insert_data(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_insert_data(T,g)})}send_insert_data(T,g){const y=new this.pClass(this.output),v={session:T,insert_data:g},w=new zL(v);try{return y.writeMessageBegin("insert_data",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_insert_data(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new Zw;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}insert_chunks(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_insert_chunks(T,g)})}send_insert_chunks(T,g){const y=new this.pClass(this.output),v={session:T,insert_chunks:g},w=new qL(v);try{return y.writeMessageBegin("insert_chunks",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_insert_chunks(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new eb;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}checkpoint(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_checkpoint(T,g)})}send_checkpoint(T,g){const y=new this.pClass(this.output),v={session:T,table_id:g},w=new VL(v);try{return y.writeMessageBegin("checkpoint",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_checkpoint(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new tb;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}get_roles(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_roles(T)})}send_get_roles(T){const g=new this.pClass(this.output),y={session:T},v=new GL(y);try{return g.writeMessageBegin("get_roles",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_roles(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new nb;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_roles failed: unknown result")}get_db_objects_for_grantee(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_db_objects_for_grantee(T,g)})}send_get_db_objects_for_grantee(T,g){const y=new this.pClass(this.output),v={session:T,roleName:g},w=new HL(v);try{return y.writeMessageBegin("get_db_objects_for_grantee",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_db_objects_for_grantee(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ib;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_db_objects_for_grantee failed: unknown result")}get_db_object_privs(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_get_db_object_privs(T,g,y)})}send_get_db_object_privs(T,g,y){const v=new this.pClass(this.output),w={session:T,objectName:g,type:y},S=new WL(w);try{return v.writeMessageBegin("get_db_object_privs",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_get_db_object_privs(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new sb;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_db_object_privs failed: unknown result")}get_all_roles_for_user(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_all_roles_for_user(T,g)})}send_get_all_roles_for_user(T,g){const y=new this.pClass(this.output),v={session:T,userName:g},w=new YL(v);try{return y.writeMessageBegin("get_all_roles_for_user",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_all_roles_for_user(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new rb;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_all_roles_for_user failed: unknown result")}get_all_effective_roles_for_user(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_all_effective_roles_for_user(T,g)})}send_get_all_effective_roles_for_user(T,g){const y=new this.pClass(this.output),v={session:T,userName:g},w=new XL(v);try{return y.writeMessageBegin("get_all_effective_roles_for_user",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_all_effective_roles_for_user(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ab;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_all_effective_roles_for_user failed: unknown result")}has_role(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_has_role(T,g,y)})}send_has_role(T,g,y){const v=new this.pClass(this.output),w={session:T,granteeName:g,roleName:y},S=new KL(w);try{return v.writeMessageBegin("has_role",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_has_role(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ob;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("has_role failed: unknown result")}has_object_privilege(T,g,y,v,w){this._seqid=this.new_seqid();const S=this;return new Promise((A,ae)=>{S._reqs[S.seqid()]=(Se,at)=>Se?ae(Se):A(at),S.send_has_object_privilege(T,g,y,v,w)})}send_has_object_privilege(T,g,y,v,w){const S=new this.pClass(this.output),A={session:T,granteeName:g,ObjectName:y,objectType:v,permissions:w},ae=new JL(A);try{return S.writeMessageBegin("has_object_privilege",r.MessageType.CALL,this.seqid()),ae.write(S),S.writeMessageEnd(),this.output.flush()}catch(Se){throw delete this._reqs[this.seqid()],typeof S.reset=="function"&&S.reset(),Se}}recv_has_object_privilege(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new lb;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("has_object_privilege failed: unknown result")}set_license_key(T,g,y){this._seqid=this.new_seqid();const v=this;return new Promise((w,S)=>{v._reqs[v.seqid()]=(A,ae)=>A?S(A):w(ae),v.send_set_license_key(T,g,y)})}send_set_license_key(T,g,y){const v=new this.pClass(this.output),w={session:T,key:g,nonce:y},S=new QL(w);try{return v.writeMessageBegin("set_license_key",r.MessageType.CALL,this.seqid()),S.write(v),v.writeMessageEnd(),this.output.flush()}catch(A){throw delete this._reqs[this.seqid()],typeof v.reset=="function"&&v.reset(),A}}recv_set_license_key(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new cb;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("set_license_key failed: unknown result")}get_license_claims(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_license_claims(T,g)})}send_get_license_claims(T,g){const y=new this.pClass(this.output),v={session:T,nonce:g},w=new ZL(v);try{return y.writeMessageBegin("get_license_claims",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_license_claims(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new db;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_license_claims failed: unknown result")}get_device_parameters(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_device_parameters(T)})}send_get_device_parameters(T){const g=new this.pClass(this.output),y={session:T},v=new eP(y);try{return g.writeMessageBegin("get_device_parameters",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_device_parameters(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new fb;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_device_parameters failed: unknown result")}register_runtime_extension_functions(T,g,y,v){this._seqid=this.new_seqid();const w=this;return new Promise((S,A)=>{w._reqs[w.seqid()]=(ae,Se)=>ae?A(ae):S(Se),w.send_register_runtime_extension_functions(T,g,y,v)})}send_register_runtime_extension_functions(T,g,y,v){const w=new this.pClass(this.output),S={session:T,udfs:g,udtfs:y,device_ir_map:v},A=new tP(S);try{return w.writeMessageBegin("register_runtime_extension_functions",r.MessageType.CALL,this.seqid()),A.write(w),w.writeMessageEnd(),this.output.flush()}catch(ae){throw delete this._reqs[this.seqid()],typeof w.reset=="function"&&w.reset(),ae}}recv_register_runtime_extension_functions(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new ub;if(w.read(T),T.readMessageEnd(),w.e!==null)return v(w.e);v(null)}get_table_function_names(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_table_function_names(T)})}send_get_table_function_names(T){const g=new this.pClass(this.output),y={session:T},v=new nP(y);try{return g.writeMessageBegin("get_table_function_names",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_table_function_names(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new hb;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_table_function_names failed: unknown result")}get_runtime_table_function_names(T){this._seqid=this.new_seqid();const g=this;return new Promise((y,v)=>{g._reqs[g.seqid()]=(w,S)=>w?v(w):y(S),g.send_get_runtime_table_function_names(T)})}send_get_runtime_table_function_names(T){const g=new this.pClass(this.output),y={session:T},v=new iP(y);try{return g.writeMessageBegin("get_runtime_table_function_names",r.MessageType.CALL,this.seqid()),v.write(g),g.writeMessageEnd(),this.output.flush()}catch(w){throw delete this._reqs[this.seqid()],typeof g.reset=="function"&&g.reset(),w}}recv_get_runtime_table_function_names(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new _b;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_runtime_table_function_names failed: unknown result")}get_table_function_details(T,g){this._seqid=this.new_seqid();const y=this;return new Promise((v,w)=>{y._reqs[y.seqid()]=(S,A)=>S?w(S):v(A),y.send_get_table_function_details(T,g)})}send_get_table_function_details(T,g){const y=new this.pClass(this.output),v={session:T,udtf_names:g},w=new sP(v);try{return y.writeMessageBegin("get_table_function_details",r.MessageType.CALL,this.seqid()),w.write(y),y.writeMessageEnd(),this.output.flush()}catch(S){throw delete this._reqs[this.seqid()],typeof y.reset=="function"&&y.reset(),S}}recv_get_table_function_details(T,g,y){const v=this._reqs[y]||function(){};if(delete this._reqs[y],g==r.MessageType.EXCEPTION){const S=new r.TApplicationException;return S.read(T),T.readMessageEnd(),v(S)}const w=new pb;return w.read(T),T.readMessageEnd(),w.e!==null?v(w.e):w.success!==null?v(null,w.success):v("get_table_function_details failed: unknown result")}},d.Processor=class{constructor(T){this._handler=T}process(T,g){const y=T.readMessageBegin();if(this["process_"+y.fname])return this["process_"+y.fname].call(this,y.rseqid,T,g);{T.skip(r.Type.STRUCT),T.readMessageEnd();const v=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN_METHOD,"Unknown function "+y.fname);g.writeMessageBegin(y.fname,r.MessageType.EXCEPTION,y.rseqid),v.write(g),g.writeMessageEnd(),g.flush()}}process_connect(T,g,y){const v=new b;v.read(g),g.readMessageEnd(),this._handler.connect.length===3?Promise.resolve(this._handler.connect.bind(this._handler)(v.user,v.passwd,v.dbname)).then(w=>{const S=new m({success:w});y.writeMessageBegin("connect",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new m(w),y.writeMessageBegin("connect",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("connect",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.connect(v.user,v.passwd,v.dbname,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new m(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("connect",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("connect",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_krb5_connect(T,g,y){const v=new E;v.read(g),g.readMessageEnd(),this._handler.krb5_connect.length===2?Promise.resolve(this._handler.krb5_connect.bind(this._handler)(v.inputToken,v.dbname)).then(w=>{const S=new B({success:w});y.writeMessageBegin("krb5_connect",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new B(w),y.writeMessageBegin("krb5_connect",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("krb5_connect",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.krb5_connect(v.inputToken,v.dbname,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new B(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("krb5_connect",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("krb5_connect",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_disconnect(T,g,y){const v=new I;v.read(g),g.readMessageEnd(),this._handler.disconnect.length===1?Promise.resolve(this._handler.disconnect.bind(this._handler)(v.session)).then(w=>{const S=new k({success:w});y.writeMessageBegin("disconnect",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new k(w),y.writeMessageBegin("disconnect",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("disconnect",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.disconnect(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new k(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("disconnect",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("disconnect",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_switch_database(T,g,y){const v=new F;v.read(g),g.readMessageEnd(),this._handler.switch_database.length===2?Promise.resolve(this._handler.switch_database.bind(this._handler)(v.session,v.dbname)).then(w=>{const S=new x({success:w});y.writeMessageBegin("switch_database",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new x(w),y.writeMessageBegin("switch_database",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("switch_database",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.switch_database(v.session,v.dbname,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new x(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("switch_database",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("switch_database",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_clone_session(T,g,y){const v=new M;v.read(g),g.readMessageEnd(),this._handler.clone_session.length===1?Promise.resolve(this._handler.clone_session.bind(this._handler)(v.session)).then(w=>{const S=new R({success:w});y.writeMessageBegin("clone_session",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new R(w),y.writeMessageBegin("clone_session",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("clone_session",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.clone_session(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new R(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("clone_session",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("clone_session",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_server_status(T,g,y){const v=new P;v.read(g),g.readMessageEnd(),this._handler.get_server_status.length===1?Promise.resolve(this._handler.get_server_status.bind(this._handler)(v.session)).then(w=>{const S=new C({success:w});y.writeMessageBegin("get_server_status",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new C(w),y.writeMessageBegin("get_server_status",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_server_status",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_server_status(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new C(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_server_status",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_server_status",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_status(T,g,y){const v=new D;v.read(g),g.readMessageEnd(),this._handler.get_status.length===1?Promise.resolve(this._handler.get_status.bind(this._handler)(v.session)).then(w=>{const S=new j({success:w});y.writeMessageBegin("get_status",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new j(w),y.writeMessageBegin("get_status",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_status",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_status(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new j(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_status",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_status",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_hardware_info(T,g,y){const v=new $;v.read(g),g.readMessageEnd(),this._handler.get_hardware_info.length===1?Promise.resolve(this._handler.get_hardware_info.bind(this._handler)(v.session)).then(w=>{const S=new W({success:w});y.writeMessageBegin("get_hardware_info",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new W(w),y.writeMessageBegin("get_hardware_info",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_hardware_info",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_hardware_info(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new W(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_hardware_info",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_hardware_info",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_tables(T,g,y){const v=new H;v.read(g),g.readMessageEnd(),this._handler.get_tables.length===1?Promise.resolve(this._handler.get_tables.bind(this._handler)(v.session)).then(w=>{const S=new G({success:w});y.writeMessageBegin("get_tables",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new G(w),y.writeMessageBegin("get_tables",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_tables",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_tables(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new G(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_tables",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_tables",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_tables_for_database(T,g,y){const v=new z;v.read(g),g.readMessageEnd(),this._handler.get_tables_for_database.length===2?Promise.resolve(this._handler.get_tables_for_database.bind(this._handler)(v.session,v.database_name)).then(w=>{const S=new q({success:w});y.writeMessageBegin("get_tables_for_database",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new q(w),y.writeMessageBegin("get_tables_for_database",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_tables_for_database",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_tables_for_database(v.session,v.database_name,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new q(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_tables_for_database",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_tables_for_database",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_physical_tables(T,g,y){const v=new ie;v.read(g),g.readMessageEnd(),this._handler.get_physical_tables.length===1?Promise.resolve(this._handler.get_physical_tables.bind(this._handler)(v.session)).then(w=>{const S=new ce({success:w});y.writeMessageBegin("get_physical_tables",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ce(w),y.writeMessageBegin("get_physical_tables",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_physical_tables",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_physical_tables(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ce(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_physical_tables",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_physical_tables",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_views(T,g,y){const v=new se;v.read(g),g.readMessageEnd(),this._handler.get_views.length===1?Promise.resolve(this._handler.get_views.bind(this._handler)(v.session)).then(w=>{const S=new Ie({success:w});y.writeMessageBegin("get_views",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Ie(w),y.writeMessageBegin("get_views",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_views",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_views(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Ie(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_views",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_views",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_tables_meta(T,g,y){const v=new he;v.read(g),g.readMessageEnd(),this._handler.get_tables_meta.length===1?Promise.resolve(this._handler.get_tables_meta.bind(this._handler)(v.session)).then(w=>{const S=new Me({success:w});y.writeMessageBegin("get_tables_meta",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Me(w),y.writeMessageBegin("get_tables_meta",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_tables_meta",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_tables_meta(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Me(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_tables_meta",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_tables_meta",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_table_details(T,g,y){const v=new Ue;v.read(g),g.readMessageEnd(),this._handler.get_table_details.length===2?Promise.resolve(this._handler.get_table_details.bind(this._handler)(v.session,v.table_name)).then(w=>{const S=new _e({success:w});y.writeMessageBegin("get_table_details",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new _e(w),y.writeMessageBegin("get_table_details",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_details",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_table_details(v.session,v.table_name,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new _e(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_table_details",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_details",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_table_details_for_database(T,g,y){const v=new ke;v.read(g),g.readMessageEnd(),this._handler.get_table_details_for_database.length===3?Promise.resolve(this._handler.get_table_details_for_database.bind(this._handler)(v.session,v.table_name,v.database_name)).then(w=>{const S=new Ee({success:w});y.writeMessageBegin("get_table_details_for_database",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Ee(w),y.writeMessageBegin("get_table_details_for_database",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_details_for_database",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_table_details_for_database(v.session,v.table_name,v.database_name,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Ee(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_table_details_for_database",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_details_for_database",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_internal_table_details(T,g,y){const v=new ye;v.read(g),g.readMessageEnd(),this._handler.get_internal_table_details.length===3?Promise.resolve(this._handler.get_internal_table_details.bind(this._handler)(v.session,v.table_name,v.include_system_columns)).then(w=>{const S=new X({success:w});y.writeMessageBegin("get_internal_table_details",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new X(w),y.writeMessageBegin("get_internal_table_details",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_internal_table_details",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_internal_table_details(v.session,v.table_name,v.include_system_columns,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new X(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_internal_table_details",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_internal_table_details",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_internal_table_details_for_database(T,g,y){const v=new Y;v.read(g),g.readMessageEnd(),this._handler.get_internal_table_details_for_database.length===3?Promise.resolve(this._handler.get_internal_table_details_for_database.bind(this._handler)(v.session,v.table_name,v.database_name)).then(w=>{const S=new U({success:w});y.writeMessageBegin("get_internal_table_details_for_database",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new U(w),y.writeMessageBegin("get_internal_table_details_for_database",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_internal_table_details_for_database",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_internal_table_details_for_database(v.session,v.table_name,v.database_name,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new U(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_internal_table_details_for_database",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_internal_table_details_for_database",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_users(T,g,y){const v=new J;v.read(g),g.readMessageEnd(),this._handler.get_users.length===1?Promise.resolve(this._handler.get_users.bind(this._handler)(v.session)).then(w=>{const S=new K({success:w});y.writeMessageBegin("get_users",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new K(w),y.writeMessageBegin("get_users",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_users",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_users(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new K(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_users",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_users",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_databases(T,g,y){const v=new Z;v.read(g),g.readMessageEnd(),this._handler.get_databases.length===1?Promise.resolve(this._handler.get_databases.bind(this._handler)(v.session)).then(w=>{const S=new Q({success:w});y.writeMessageBegin("get_databases",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Q(w),y.writeMessageBegin("get_databases",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_databases",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_databases(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Q(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_databases",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_databases",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_version(T,g,y){new fe().read(g),g.readMessageEnd(),this._handler.get_version.length===0?Promise.resolve(this._handler.get_version.bind(this._handler)()).then(w=>{const S=new ee({success:w});y.writeMessageBegin("get_version",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ee(w),y.writeMessageBegin("get_version",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_version",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_version((w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ee(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_version",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_version",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_start_heap_profile(T,g,y){const v=new le;v.read(g),g.readMessageEnd(),this._handler.start_heap_profile.length===1?Promise.resolve(this._handler.start_heap_profile.bind(this._handler)(v.session)).then(w=>{const S=new Ne({success:w});y.writeMessageBegin("start_heap_profile",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Ne(w),y.writeMessageBegin("start_heap_profile",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("start_heap_profile",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.start_heap_profile(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Ne(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("start_heap_profile",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("start_heap_profile",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_stop_heap_profile(T,g,y){const v=new He;v.read(g),g.readMessageEnd(),this._handler.stop_heap_profile.length===1?Promise.resolve(this._handler.stop_heap_profile.bind(this._handler)(v.session)).then(w=>{const S=new ft({success:w});y.writeMessageBegin("stop_heap_profile",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ft(w),y.writeMessageBegin("stop_heap_profile",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("stop_heap_profile",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.stop_heap_profile(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ft(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("stop_heap_profile",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("stop_heap_profile",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_heap_profile(T,g,y){const v=new de;v.read(g),g.readMessageEnd(),this._handler.get_heap_profile.length===1?Promise.resolve(this._handler.get_heap_profile.bind(this._handler)(v.session)).then(w=>{const S=new ve({success:w});y.writeMessageBegin("get_heap_profile",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ve(w),y.writeMessageBegin("get_heap_profile",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_heap_profile",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_heap_profile(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ve(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_heap_profile",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_heap_profile",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_memory(T,g,y){const v=new Ce;v.read(g),g.readMessageEnd(),this._handler.get_memory.length===2?Promise.resolve(this._handler.get_memory.bind(this._handler)(v.session,v.memory_level)).then(w=>{const S=new re({success:w});y.writeMessageBegin("get_memory",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new re(w),y.writeMessageBegin("get_memory",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_memory",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_memory(v.session,v.memory_level,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new re(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_memory",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_memory",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_clear_cpu_memory(T,g,y){const v=new rt;v.read(g),g.readMessageEnd(),this._handler.clear_cpu_memory.length===1?Promise.resolve(this._handler.clear_cpu_memory.bind(this._handler)(v.session)).then(w=>{const S=new tt({success:w});y.writeMessageBegin("clear_cpu_memory",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new tt(w),y.writeMessageBegin("clear_cpu_memory",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("clear_cpu_memory",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.clear_cpu_memory(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new tt(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("clear_cpu_memory",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("clear_cpu_memory",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_clear_gpu_memory(T,g,y){const v=new Rt;v.read(g),g.readMessageEnd(),this._handler.clear_gpu_memory.length===1?Promise.resolve(this._handler.clear_gpu_memory.bind(this._handler)(v.session)).then(w=>{const S=new $t({success:w});y.writeMessageBegin("clear_gpu_memory",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new $t(w),y.writeMessageBegin("clear_gpu_memory",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("clear_gpu_memory",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.clear_gpu_memory(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new $t(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("clear_gpu_memory",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("clear_gpu_memory",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_set_cur_session(T,g,y){const v=new ds;v.read(g),g.readMessageEnd(),this._handler.set_cur_session.length===5?Promise.resolve(this._handler.set_cur_session.bind(this._handler)(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel)).then(w=>{const S=new me({success:w});y.writeMessageBegin("set_cur_session",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new me(w),y.writeMessageBegin("set_cur_session",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_cur_session",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.set_cur_session(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new me(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("set_cur_session",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_cur_session",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_invalidate_cur_session(T,g,y){const v=new pe;v.read(g),g.readMessageEnd(),this._handler.invalidate_cur_session.length===5?Promise.resolve(this._handler.invalidate_cur_session.bind(this._handler)(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel)).then(w=>{const S=new qt({success:w});y.writeMessageBegin("invalidate_cur_session",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new qt(w),y.writeMessageBegin("invalidate_cur_session",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("invalidate_cur_session",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.invalidate_cur_session(v.parent_session,v.leaf_session,v.start_time_str,v.label,v.for_running_query_kernel,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new qt(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("invalidate_cur_session",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("invalidate_cur_session",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_set_table_epoch(T,g,y){const v=new L;v.read(g),g.readMessageEnd(),this._handler.set_table_epoch.length===4?Promise.resolve(this._handler.set_table_epoch.bind(this._handler)(v.session,v.db_id,v.table_id,v.new_epoch)).then(w=>{const S=new O({success:w});y.writeMessageBegin("set_table_epoch",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new O(w),y.writeMessageBegin("set_table_epoch",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_table_epoch",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.set_table_epoch(v.session,v.db_id,v.table_id,v.new_epoch,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new O(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("set_table_epoch",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_table_epoch",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_set_table_epoch_by_name(T,g,y){const v=new N;v.read(g),g.readMessageEnd(),this._handler.set_table_epoch_by_name.length===3?Promise.resolve(this._handler.set_table_epoch_by_name.bind(this._handler)(v.session,v.table_name,v.new_epoch)).then(w=>{const S=new V({success:w});y.writeMessageBegin("set_table_epoch_by_name",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new V(w),y.writeMessageBegin("set_table_epoch_by_name",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_table_epoch_by_name",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.set_table_epoch_by_name(v.session,v.table_name,v.new_epoch,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new V(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("set_table_epoch_by_name",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_table_epoch_by_name",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_table_epoch(T,g,y){const v=new te;v.read(g),g.readMessageEnd(),this._handler.get_table_epoch.length===3?Promise.resolve(this._handler.get_table_epoch.bind(this._handler)(v.session,v.db_id,v.table_id)).then(w=>{const S=new oe({success:w});y.writeMessageBegin("get_table_epoch",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_epoch",r.MessageType.EXCEPTION,T),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_table_epoch(v.session,v.db_id,v.table_id,(w,S)=>{let A;w===null||typeof w>"u"?(A=new oe(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_table_epoch",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_epoch",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_table_epoch_by_name(T,g,y){const v=new ue;v.read(g),g.readMessageEnd(),this._handler.get_table_epoch_by_name.length===2?Promise.resolve(this._handler.get_table_epoch_by_name.bind(this._handler)(v.session,v.table_name)).then(w=>{const S=new Ge({success:w});y.writeMessageBegin("get_table_epoch_by_name",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_epoch_by_name",r.MessageType.EXCEPTION,T),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_table_epoch_by_name(v.session,v.table_name,(w,S)=>{let A;w===null||typeof w>"u"?(A=new Ge(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_table_epoch_by_name",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_epoch_by_name",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_table_epochs(T,g,y){const v=new Ze;v.read(g),g.readMessageEnd(),this._handler.get_table_epochs.length===3?Promise.resolve(this._handler.get_table_epochs.bind(this._handler)(v.session,v.db_id,v.table_id)).then(w=>{const S=new nt({success:w});y.writeMessageBegin("get_table_epochs",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_epochs",r.MessageType.EXCEPTION,T),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_table_epochs(v.session,v.db_id,v.table_id,(w,S)=>{let A;w===null||typeof w>"u"?(A=new nt(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_table_epochs",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_epochs",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_set_table_epochs(T,g,y){const v=new ut;v.read(g),g.readMessageEnd(),this._handler.set_table_epochs.length===3?Promise.resolve(this._handler.set_table_epochs.bind(this._handler)(v.session,v.db_id,v.table_epochs)).then(w=>{const S=new ht({success:w});y.writeMessageBegin("set_table_epochs",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_table_epochs",r.MessageType.EXCEPTION,T),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.set_table_epochs(v.session,v.db_id,v.table_epochs,(w,S)=>{let A;w===null||typeof w>"u"?(A=new ht(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("set_table_epochs",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_table_epochs",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_session_info(T,g,y){const v=new Cl;v.read(g),g.readMessageEnd(),this._handler.get_session_info.length===1?Promise.resolve(this._handler.get_session_info.bind(this._handler)(v.session)).then(w=>{const S=new iw({success:w});y.writeMessageBegin("get_session_info",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new iw(w),y.writeMessageBegin("get_session_info",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_session_info",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_session_info(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new iw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_session_info",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_session_info",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_queries_info(T,g,y){const v=new WC;v.read(g),g.readMessageEnd(),this._handler.get_queries_info.length===1?Promise.resolve(this._handler.get_queries_info.bind(this._handler)(v.session)).then(w=>{const S=new sw({success:w});y.writeMessageBegin("get_queries_info",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new sw(w),y.writeMessageBegin("get_queries_info",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_queries_info",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_queries_info(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new sw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_queries_info",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_queries_info",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_set_leaf_info(T,g,y){const v=new YC;v.read(g),g.readMessageEnd(),this._handler.set_leaf_info.length===2?Promise.resolve(this._handler.set_leaf_info.bind(this._handler)(v.session,v.leaf_info)).then(w=>{const S=new rw({success:w});y.writeMessageBegin("set_leaf_info",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new rw(w),y.writeMessageBegin("set_leaf_info",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_leaf_info",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.set_leaf_info(v.session,v.leaf_info,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new rw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("set_leaf_info",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_leaf_info",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_sql_execute(T,g,y){const v=new XC;v.read(g),g.readMessageEnd(),this._handler.sql_execute.length===6?Promise.resolve(this._handler.sql_execute.bind(this._handler)(v.session,v.query,v.column_format,v.nonce,v.first_n,v.at_most_n)).then(w=>{const S=new aw({success:w});y.writeMessageBegin("sql_execute",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new aw(w),y.writeMessageBegin("sql_execute",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("sql_execute",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.sql_execute(v.session,v.query,v.column_format,v.nonce,v.first_n,v.at_most_n,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new aw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("sql_execute",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("sql_execute",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_sql_execute_df(T,g,y){const v=new KC;v.read(g),g.readMessageEnd(),this._handler.sql_execute_df.length===6?Promise.resolve(this._handler.sql_execute_df.bind(this._handler)(v.session,v.query,v.device_type,v.device_id,v.first_n,v.transport_method)).then(w=>{const S=new ow({success:w});y.writeMessageBegin("sql_execute_df",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ow(w),y.writeMessageBegin("sql_execute_df",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("sql_execute_df",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.sql_execute_df(v.session,v.query,v.device_type,v.device_id,v.first_n,v.transport_method,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ow(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("sql_execute_df",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("sql_execute_df",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_sql_execute_gdf(T,g,y){const v=new JC;v.read(g),g.readMessageEnd(),this._handler.sql_execute_gdf.length===4?Promise.resolve(this._handler.sql_execute_gdf.bind(this._handler)(v.session,v.query,v.device_id,v.first_n)).then(w=>{const S=new lw({success:w});y.writeMessageBegin("sql_execute_gdf",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new lw(w),y.writeMessageBegin("sql_execute_gdf",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("sql_execute_gdf",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.sql_execute_gdf(v.session,v.query,v.device_id,v.first_n,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new lw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("sql_execute_gdf",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("sql_execute_gdf",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_deallocate_df(T,g,y){const v=new QC;v.read(g),g.readMessageEnd(),this._handler.deallocate_df.length===4?Promise.resolve(this._handler.deallocate_df.bind(this._handler)(v.session,v.df,v.device_type,v.device_id)).then(w=>{const S=new cw({success:w});y.writeMessageBegin("deallocate_df",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new cw(w),y.writeMessageBegin("deallocate_df",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("deallocate_df",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.deallocate_df(v.session,v.df,v.device_type,v.device_id,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new cw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("deallocate_df",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("deallocate_df",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_interrupt(T,g,y){const v=new ZC;v.read(g),g.readMessageEnd(),this._handler.interrupt.length===2?Promise.resolve(this._handler.interrupt.bind(this._handler)(v.query_session,v.interrupt_session)).then(w=>{const S=new dw({success:w});y.writeMessageBegin("interrupt",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new dw(w),y.writeMessageBegin("interrupt",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("interrupt",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.interrupt(v.query_session,v.interrupt_session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new dw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("interrupt",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("interrupt",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_sql_validate(T,g,y){const v=new eL;v.read(g),g.readMessageEnd(),this._handler.sql_validate.length===2?Promise.resolve(this._handler.sql_validate.bind(this._handler)(v.session,v.query)).then(w=>{const S=new fw({success:w});y.writeMessageBegin("sql_validate",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new fw(w),y.writeMessageBegin("sql_validate",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("sql_validate",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.sql_validate(v.session,v.query,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new fw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("sql_validate",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("sql_validate",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_completion_hints(T,g,y){const v=new tL;v.read(g),g.readMessageEnd(),this._handler.get_completion_hints.length===3?Promise.resolve(this._handler.get_completion_hints.bind(this._handler)(v.session,v.sql,v.cursor)).then(w=>{const S=new uw({success:w});y.writeMessageBegin("get_completion_hints",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new uw(w),y.writeMessageBegin("get_completion_hints",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_completion_hints",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_completion_hints(v.session,v.sql,v.cursor,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new uw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_completion_hints",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_completion_hints",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_set_execution_mode(T,g,y){const v=new nL;v.read(g),g.readMessageEnd(),this._handler.set_execution_mode.length===2?Promise.resolve(this._handler.set_execution_mode.bind(this._handler)(v.session,v.mode)).then(w=>{const S=new hw({success:w});y.writeMessageBegin("set_execution_mode",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new hw(w),y.writeMessageBegin("set_execution_mode",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_execution_mode",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.set_execution_mode(v.session,v.mode,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new hw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("set_execution_mode",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_execution_mode",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_render_vega(T,g,y){const v=new iL;v.read(g),g.readMessageEnd(),this._handler.render_vega.length===5?Promise.resolve(this._handler.render_vega.bind(this._handler)(v.session,v.widget_id,v.vega_json,v.compression_level,v.nonce)).then(w=>{const S=new _w({success:w});y.writeMessageBegin("render_vega",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new _w(w),y.writeMessageBegin("render_vega",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("render_vega",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.render_vega(v.session,v.widget_id,v.vega_json,v.compression_level,v.nonce,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new _w(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("render_vega",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("render_vega",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_result_row_for_pixel(T,g,y){const v=new sL;v.read(g),g.readMessageEnd(),this._handler.get_result_row_for_pixel.length===7?Promise.resolve(this._handler.get_result_row_for_pixel.bind(this._handler)(v.session,v.widget_id,v.pixel,v.table_col_names,v.column_format,v.pixelRadius,v.nonce)).then(w=>{const S=new pw({success:w});y.writeMessageBegin("get_result_row_for_pixel",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new pw(w),y.writeMessageBegin("get_result_row_for_pixel",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_result_row_for_pixel",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_result_row_for_pixel(v.session,v.widget_id,v.pixel,v.table_col_names,v.column_format,v.pixelRadius,v.nonce,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new pw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_result_row_for_pixel",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_result_row_for_pixel",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_create_custom_expression(T,g,y){const v=new rL;v.read(g),g.readMessageEnd(),this._handler.create_custom_expression.length===2?Promise.resolve(this._handler.create_custom_expression.bind(this._handler)(v.session,v.custom_expression)).then(w=>{const S=new yw({success:w});y.writeMessageBegin("create_custom_expression",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new yw(w),y.writeMessageBegin("create_custom_expression",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("create_custom_expression",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.create_custom_expression(v.session,v.custom_expression,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new yw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("create_custom_expression",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("create_custom_expression",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_custom_expressions(T,g,y){const v=new aL;v.read(g),g.readMessageEnd(),this._handler.get_custom_expressions.length===1?Promise.resolve(this._handler.get_custom_expressions.bind(this._handler)(v.session)).then(w=>{const S=new gw({success:w});y.writeMessageBegin("get_custom_expressions",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new gw(w),y.writeMessageBegin("get_custom_expressions",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_custom_expressions",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_custom_expressions(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new gw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_custom_expressions",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_custom_expressions",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_update_custom_expression(T,g,y){const v=new oL;v.read(g),g.readMessageEnd(),this._handler.update_custom_expression.length===3?Promise.resolve(this._handler.update_custom_expression.bind(this._handler)(v.session,v.id,v.expression_json)).then(w=>{const S=new mw({success:w});y.writeMessageBegin("update_custom_expression",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new mw(w),y.writeMessageBegin("update_custom_expression",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("update_custom_expression",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.update_custom_expression(v.session,v.id,v.expression_json,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new mw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("update_custom_expression",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("update_custom_expression",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_delete_custom_expressions(T,g,y){const v=new lL;v.read(g),g.readMessageEnd(),this._handler.delete_custom_expressions.length===3?Promise.resolve(this._handler.delete_custom_expressions.bind(this._handler)(v.session,v.custom_expression_ids,v.do_soft_delete)).then(w=>{const S=new ww({success:w});y.writeMessageBegin("delete_custom_expressions",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ww(w),y.writeMessageBegin("delete_custom_expressions",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("delete_custom_expressions",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.delete_custom_expressions(v.session,v.custom_expression_ids,v.do_soft_delete,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ww(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("delete_custom_expressions",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("delete_custom_expressions",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_dashboard(T,g,y){const v=new cL;v.read(g),g.readMessageEnd(),this._handler.get_dashboard.length===2?Promise.resolve(this._handler.get_dashboard.bind(this._handler)(v.session,v.dashboard_id)).then(w=>{const S=new bw({success:w});y.writeMessageBegin("get_dashboard",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new bw(w),y.writeMessageBegin("get_dashboard",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_dashboard",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_dashboard(v.session,v.dashboard_id,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new bw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_dashboard",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_dashboard",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_dashboards(T,g,y){const v=new dL;v.read(g),g.readMessageEnd(),this._handler.get_dashboards.length===1?Promise.resolve(this._handler.get_dashboards.bind(this._handler)(v.session)).then(w=>{const S=new Tw({success:w});y.writeMessageBegin("get_dashboards",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Tw(w),y.writeMessageBegin("get_dashboards",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_dashboards",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_dashboards(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Tw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_dashboards",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_dashboards",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_create_dashboard(T,g,y){const v=new fL;v.read(g),g.readMessageEnd(),this._handler.create_dashboard.length===5?Promise.resolve(this._handler.create_dashboard.bind(this._handler)(v.session,v.dashboard_name,v.dashboard_state,v.image_hash,v.dashboard_metadata)).then(w=>{const S=new vw({success:w});y.writeMessageBegin("create_dashboard",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new vw(w),y.writeMessageBegin("create_dashboard",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("create_dashboard",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.create_dashboard(v.session,v.dashboard_name,v.dashboard_state,v.image_hash,v.dashboard_metadata,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new vw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("create_dashboard",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("create_dashboard",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_replace_dashboard(T,g,y){const v=new uL;v.read(g),g.readMessageEnd(),this._handler.replace_dashboard.length===7?Promise.resolve(this._handler.replace_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.dashboard_name,v.dashboard_owner,v.dashboard_state,v.image_hash,v.dashboard_metadata)).then(w=>{const S=new Ew({success:w});y.writeMessageBegin("replace_dashboard",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Ew(w),y.writeMessageBegin("replace_dashboard",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("replace_dashboard",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.replace_dashboard(v.session,v.dashboard_id,v.dashboard_name,v.dashboard_owner,v.dashboard_state,v.image_hash,v.dashboard_metadata,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Ew(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("replace_dashboard",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("replace_dashboard",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_delete_dashboard(T,g,y){const v=new hL;v.read(g),g.readMessageEnd(),this._handler.delete_dashboard.length===2?Promise.resolve(this._handler.delete_dashboard.bind(this._handler)(v.session,v.dashboard_id)).then(w=>{const S=new Sw({success:w});y.writeMessageBegin("delete_dashboard",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Sw(w),y.writeMessageBegin("delete_dashboard",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("delete_dashboard",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.delete_dashboard(v.session,v.dashboard_id,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Sw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("delete_dashboard",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("delete_dashboard",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_share_dashboards(T,g,y){const v=new _L;v.read(g),g.readMessageEnd(),this._handler.share_dashboards.length===4?Promise.resolve(this._handler.share_dashboards.bind(this._handler)(v.session,v.dashboard_ids,v.groups,v.permissions)).then(w=>{const S=new Bw({success:w});y.writeMessageBegin("share_dashboards",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Bw(w),y.writeMessageBegin("share_dashboards",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("share_dashboards",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.share_dashboards(v.session,v.dashboard_ids,v.groups,v.permissions,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Bw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("share_dashboards",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("share_dashboards",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_delete_dashboards(T,g,y){const v=new pL;v.read(g),g.readMessageEnd(),this._handler.delete_dashboards.length===2?Promise.resolve(this._handler.delete_dashboards.bind(this._handler)(v.session,v.dashboard_ids)).then(w=>{const S=new Iw({success:w});y.writeMessageBegin("delete_dashboards",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Iw(w),y.writeMessageBegin("delete_dashboards",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("delete_dashboards",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.delete_dashboards(v.session,v.dashboard_ids,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Iw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("delete_dashboards",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("delete_dashboards",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_share_dashboard(T,g,y){const v=new yL;v.read(g),g.readMessageEnd(),this._handler.share_dashboard.length===6?Promise.resolve(this._handler.share_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,v.grant_role)).then(w=>{const S=new Fw({success:w});y.writeMessageBegin("share_dashboard",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Fw(w),y.writeMessageBegin("share_dashboard",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("share_dashboard",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.share_dashboard(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,v.grant_role,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Fw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("share_dashboard",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("share_dashboard",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_unshare_dashboard(T,g,y){const v=new gL;v.read(g),g.readMessageEnd(),this._handler.unshare_dashboard.length===5?Promise.resolve(this._handler.unshare_dashboard.bind(this._handler)(v.session,v.dashboard_id,v.groups,v.objects,v.permissions)).then(w=>{const S=new kw({success:w});y.writeMessageBegin("unshare_dashboard",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new kw(w),y.writeMessageBegin("unshare_dashboard",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("unshare_dashboard",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.unshare_dashboard(v.session,v.dashboard_id,v.groups,v.objects,v.permissions,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new kw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("unshare_dashboard",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("unshare_dashboard",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_unshare_dashboards(T,g,y){const v=new mL;v.read(g),g.readMessageEnd(),this._handler.unshare_dashboards.length===4?Promise.resolve(this._handler.unshare_dashboards.bind(this._handler)(v.session,v.dashboard_ids,v.groups,v.permissions)).then(w=>{const S=new xw({success:w});y.writeMessageBegin("unshare_dashboards",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new xw(w),y.writeMessageBegin("unshare_dashboards",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("unshare_dashboards",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.unshare_dashboards(v.session,v.dashboard_ids,v.groups,v.permissions,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new xw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("unshare_dashboards",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("unshare_dashboards",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_dashboard_grantees(T,g,y){const v=new wL;v.read(g),g.readMessageEnd(),this._handler.get_dashboard_grantees.length===2?Promise.resolve(this._handler.get_dashboard_grantees.bind(this._handler)(v.session,v.dashboard_id)).then(w=>{const S=new Mw({success:w});y.writeMessageBegin("get_dashboard_grantees",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Mw(w),y.writeMessageBegin("get_dashboard_grantees",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_dashboard_grantees",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_dashboard_grantees(v.session,v.dashboard_id,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Mw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_dashboard_grantees",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_dashboard_grantees",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_link_view(T,g,y){const v=new bL;v.read(g),g.readMessageEnd(),this._handler.get_link_view.length===2?Promise.resolve(this._handler.get_link_view.bind(this._handler)(v.session,v.link)).then(w=>{const S=new Aw({success:w});y.writeMessageBegin("get_link_view",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Aw(w),y.writeMessageBegin("get_link_view",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_link_view",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_link_view(v.session,v.link,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Aw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_link_view",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_link_view",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_create_link(T,g,y){const v=new TL;v.read(g),g.readMessageEnd(),this._handler.create_link.length===3?Promise.resolve(this._handler.create_link.bind(this._handler)(v.session,v.view_state,v.view_metadata)).then(w=>{const S=new Ow({success:w});y.writeMessageBegin("create_link",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Ow(w),y.writeMessageBegin("create_link",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("create_link",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.create_link(v.session,v.view_state,v.view_metadata,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Ow(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("create_link",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("create_link",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_load_table_binary(T,g,y){const v=new vL;v.read(g),g.readMessageEnd(),this._handler.load_table_binary.length===4?Promise.resolve(this._handler.load_table_binary.bind(this._handler)(v.session,v.table_name,v.rows,v.column_names)).then(w=>{const S=new Nw({success:w});y.writeMessageBegin("load_table_binary",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Nw(w),y.writeMessageBegin("load_table_binary",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table_binary",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.load_table_binary(v.session,v.table_name,v.rows,v.column_names,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Nw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("load_table_binary",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table_binary",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_load_table_binary_columnar(T,g,y){const v=new EL;v.read(g),g.readMessageEnd(),this._handler.load_table_binary_columnar.length===4?Promise.resolve(this._handler.load_table_binary_columnar.bind(this._handler)(v.session,v.table_name,v.cols,v.column_names)).then(w=>{const S=new Rw({success:w});y.writeMessageBegin("load_table_binary_columnar",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Rw(w),y.writeMessageBegin("load_table_binary_columnar",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table_binary_columnar",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.load_table_binary_columnar(v.session,v.table_name,v.cols,v.column_names,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Rw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("load_table_binary_columnar",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table_binary_columnar",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_load_table_binary_columnar_polys(T,g,y){const v=new SL;v.read(g),g.readMessageEnd(),this._handler.load_table_binary_columnar_polys.length===5?Promise.resolve(this._handler.load_table_binary_columnar_polys.bind(this._handler)(v.session,v.table_name,v.cols,v.column_names,v.assign_render_groups)).then(w=>{const S=new Cw({success:w});y.writeMessageBegin("load_table_binary_columnar_polys",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Cw(w),y.writeMessageBegin("load_table_binary_columnar_polys",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table_binary_columnar_polys",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.load_table_binary_columnar_polys(v.session,v.table_name,v.cols,v.column_names,v.assign_render_groups,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Cw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("load_table_binary_columnar_polys",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table_binary_columnar_polys",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_load_table_binary_arrow(T,g,y){const v=new BL;v.read(g),g.readMessageEnd(),this._handler.load_table_binary_arrow.length===4?Promise.resolve(this._handler.load_table_binary_arrow.bind(this._handler)(v.session,v.table_name,v.arrow_stream,v.use_column_names)).then(w=>{const S=new Lw({success:w});y.writeMessageBegin("load_table_binary_arrow",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Lw(w),y.writeMessageBegin("load_table_binary_arrow",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table_binary_arrow",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.load_table_binary_arrow(v.session,v.table_name,v.arrow_stream,v.use_column_names,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Lw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("load_table_binary_arrow",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table_binary_arrow",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_load_table(T,g,y){const v=new IL;v.read(g),g.readMessageEnd(),this._handler.load_table.length===4?Promise.resolve(this._handler.load_table.bind(this._handler)(v.session,v.table_name,v.rows,v.column_names)).then(w=>{const S=new Pw({success:w});y.writeMessageBegin("load_table",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Pw(w),y.writeMessageBegin("load_table",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.load_table(v.session,v.table_name,v.rows,v.column_names,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Pw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("load_table",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("load_table",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_detect_column_types(T,g,y){const v=new FL;v.read(g),g.readMessageEnd(),this._handler.detect_column_types.length===3?Promise.resolve(this._handler.detect_column_types.bind(this._handler)(v.session,v.file_name,v.copy_params)).then(w=>{const S=new Dw({success:w});y.writeMessageBegin("detect_column_types",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Dw(w),y.writeMessageBegin("detect_column_types",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("detect_column_types",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.detect_column_types(v.session,v.file_name,v.copy_params,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Dw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("detect_column_types",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("detect_column_types",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_create_table(T,g,y){const v=new kL;v.read(g),g.readMessageEnd(),this._handler.create_table.length===4?Promise.resolve(this._handler.create_table.bind(this._handler)(v.session,v.table_name,v.row_desc,v.create_params)).then(w=>{const S=new Uw({success:w});y.writeMessageBegin("create_table",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Uw(w),y.writeMessageBegin("create_table",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("create_table",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.create_table(v.session,v.table_name,v.row_desc,v.create_params,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Uw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("create_table",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("create_table",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_import_table(T,g,y){const v=new xL;v.read(g),g.readMessageEnd(),this._handler.import_table.length===4?Promise.resolve(this._handler.import_table.bind(this._handler)(v.session,v.table_name,v.file_name,v.copy_params)).then(w=>{const S=new jw({success:w});y.writeMessageBegin("import_table",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new jw(w),y.writeMessageBegin("import_table",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("import_table",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.import_table(v.session,v.table_name,v.file_name,v.copy_params,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new jw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("import_table",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("import_table",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_import_geo_table(T,g,y){const v=new ML;v.read(g),g.readMessageEnd(),this._handler.import_geo_table.length===6?Promise.resolve(this._handler.import_geo_table.bind(this._handler)(v.session,v.table_name,v.file_name,v.copy_params,v.row_desc,v.create_params)).then(w=>{const S=new $w({success:w});y.writeMessageBegin("import_geo_table",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new $w(w),y.writeMessageBegin("import_geo_table",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("import_geo_table",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.import_geo_table(v.session,v.table_name,v.file_name,v.copy_params,v.row_desc,v.create_params,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new $w(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("import_geo_table",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("import_geo_table",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_import_table_status(T,g,y){const v=new AL;v.read(g),g.readMessageEnd(),this._handler.import_table_status.length===2?Promise.resolve(this._handler.import_table_status.bind(this._handler)(v.session,v.import_id)).then(w=>{const S=new zw({success:w});y.writeMessageBegin("import_table_status",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new zw(w),y.writeMessageBegin("import_table_status",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("import_table_status",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.import_table_status(v.session,v.import_id,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new zw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("import_table_status",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("import_table_status",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_first_geo_file_in_archive(T,g,y){const v=new OL;v.read(g),g.readMessageEnd(),this._handler.get_first_geo_file_in_archive.length===3?Promise.resolve(this._handler.get_first_geo_file_in_archive.bind(this._handler)(v.session,v.archive_path,v.copy_params)).then(w=>{const S=new qw({success:w});y.writeMessageBegin("get_first_geo_file_in_archive",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new qw(w),y.writeMessageBegin("get_first_geo_file_in_archive",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_first_geo_file_in_archive",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_first_geo_file_in_archive(v.session,v.archive_path,v.copy_params,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new qw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_first_geo_file_in_archive",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_first_geo_file_in_archive",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_all_files_in_archive(T,g,y){const v=new NL;v.read(g),g.readMessageEnd(),this._handler.get_all_files_in_archive.length===3?Promise.resolve(this._handler.get_all_files_in_archive.bind(this._handler)(v.session,v.archive_path,v.copy_params)).then(w=>{const S=new Vw({success:w});y.writeMessageBegin("get_all_files_in_archive",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Vw(w),y.writeMessageBegin("get_all_files_in_archive",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_all_files_in_archive",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_all_files_in_archive(v.session,v.archive_path,v.copy_params,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Vw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_all_files_in_archive",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_all_files_in_archive",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_layers_in_geo_file(T,g,y){const v=new RL;v.read(g),g.readMessageEnd(),this._handler.get_layers_in_geo_file.length===3?Promise.resolve(this._handler.get_layers_in_geo_file.bind(this._handler)(v.session,v.file_name,v.copy_params)).then(w=>{const S=new Gw({success:w});y.writeMessageBegin("get_layers_in_geo_file",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Gw(w),y.writeMessageBegin("get_layers_in_geo_file",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_layers_in_geo_file",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_layers_in_geo_file(v.session,v.file_name,v.copy_params,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Gw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_layers_in_geo_file",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_layers_in_geo_file",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_query_get_outer_fragment_count(T,g,y){const v=new CL;v.read(g),g.readMessageEnd(),this._handler.query_get_outer_fragment_count.length===2?Promise.resolve(this._handler.query_get_outer_fragment_count.bind(this._handler)(v.session,v.query)).then(w=>{const S=new Hw({success:w});y.writeMessageBegin("query_get_outer_fragment_count",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Hw(w),y.writeMessageBegin("query_get_outer_fragment_count",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("query_get_outer_fragment_count",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.query_get_outer_fragment_count(v.session,v.query,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Hw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("query_get_outer_fragment_count",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("query_get_outer_fragment_count",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_check_table_consistency(T,g,y){const v=new LL;v.read(g),g.readMessageEnd(),this._handler.check_table_consistency.length===2?Promise.resolve(this._handler.check_table_consistency.bind(this._handler)(v.session,v.table_id)).then(w=>{const S=new Ww({success:w});y.writeMessageBegin("check_table_consistency",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Ww(w),y.writeMessageBegin("check_table_consistency",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("check_table_consistency",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.check_table_consistency(v.session,v.table_id,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Ww(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("check_table_consistency",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("check_table_consistency",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_start_query(T,g,y){const v=new PL;v.read(g),g.readMessageEnd(),this._handler.start_query.length===6?Promise.resolve(this._handler.start_query.bind(this._handler)(v.leaf_session,v.parent_session,v.query_ra,v.start_time_str,v.just_explain,v.outer_fragment_indices)).then(w=>{const S=new Yw({success:w});y.writeMessageBegin("start_query",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Yw(w),y.writeMessageBegin("start_query",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("start_query",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.start_query(v.leaf_session,v.parent_session,v.query_ra,v.start_time_str,v.just_explain,v.outer_fragment_indices,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Yw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("start_query",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("start_query",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_execute_query_step(T,g,y){const v=new DL;v.read(g),g.readMessageEnd(),this._handler.execute_query_step.length===3?Promise.resolve(this._handler.execute_query_step.bind(this._handler)(v.pending_query,v.subquery_id,v.start_time_str)).then(w=>{const S=new Xw({success:w});y.writeMessageBegin("execute_query_step",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Xw(w),y.writeMessageBegin("execute_query_step",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("execute_query_step",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.execute_query_step(v.pending_query,v.subquery_id,v.start_time_str,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Xw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("execute_query_step",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("execute_query_step",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_broadcast_serialized_rows(T,g,y){const v=new UL;v.read(g),g.readMessageEnd(),this._handler.broadcast_serialized_rows.length===5?Promise.resolve(this._handler.broadcast_serialized_rows.bind(this._handler)(v.serialized_rows,v.row_desc,v.query_id,v.subquery_id,v.is_final_subquery_result)).then(w=>{const S=new Kw({success:w});y.writeMessageBegin("broadcast_serialized_rows",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Kw(w),y.writeMessageBegin("broadcast_serialized_rows",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("broadcast_serialized_rows",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.broadcast_serialized_rows(v.serialized_rows,v.row_desc,v.query_id,v.subquery_id,v.is_final_subquery_result,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Kw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("broadcast_serialized_rows",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("broadcast_serialized_rows",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_start_render_query(T,g,y){const v=new jL;v.read(g),g.readMessageEnd(),this._handler.start_render_query.length===4?Promise.resolve(this._handler.start_render_query.bind(this._handler)(v.session,v.widget_id,v.node_idx,v.vega_json)).then(w=>{const S=new Jw({success:w});y.writeMessageBegin("start_render_query",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Jw(w),y.writeMessageBegin("start_render_query",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("start_render_query",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.start_render_query(v.session,v.widget_id,v.node_idx,v.vega_json,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Jw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("start_render_query",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("start_render_query",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_execute_next_render_step(T,g,y){const v=new $L;v.read(g),g.readMessageEnd(),this._handler.execute_next_render_step.length===2?Promise.resolve(this._handler.execute_next_render_step.bind(this._handler)(v.pending_render,v.merged_data)).then(w=>{const S=new Qw({success:w});y.writeMessageBegin("execute_next_render_step",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Qw(w),y.writeMessageBegin("execute_next_render_step",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("execute_next_render_step",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.execute_next_render_step(v.pending_render,v.merged_data,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Qw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("execute_next_render_step",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("execute_next_render_step",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_insert_data(T,g,y){const v=new zL;v.read(g),g.readMessageEnd(),this._handler.insert_data.length===2?Promise.resolve(this._handler.insert_data.bind(this._handler)(v.session,v.insert_data)).then(w=>{const S=new Zw({success:w});y.writeMessageBegin("insert_data",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new Zw(w),y.writeMessageBegin("insert_data",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("insert_data",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.insert_data(v.session,v.insert_data,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new Zw(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("insert_data",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("insert_data",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_insert_chunks(T,g,y){const v=new qL;v.read(g),g.readMessageEnd(),this._handler.insert_chunks.length===2?Promise.resolve(this._handler.insert_chunks.bind(this._handler)(v.session,v.insert_chunks)).then(w=>{const S=new eb({success:w});y.writeMessageBegin("insert_chunks",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new eb(w),y.writeMessageBegin("insert_chunks",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("insert_chunks",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.insert_chunks(v.session,v.insert_chunks,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new eb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("insert_chunks",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("insert_chunks",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_checkpoint(T,g,y){const v=new VL;v.read(g),g.readMessageEnd(),this._handler.checkpoint.length===2?Promise.resolve(this._handler.checkpoint.bind(this._handler)(v.session,v.table_id)).then(w=>{const S=new tb({success:w});y.writeMessageBegin("checkpoint",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new tb(w),y.writeMessageBegin("checkpoint",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("checkpoint",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.checkpoint(v.session,v.table_id,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new tb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("checkpoint",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("checkpoint",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_roles(T,g,y){const v=new GL;v.read(g),g.readMessageEnd(),this._handler.get_roles.length===1?Promise.resolve(this._handler.get_roles.bind(this._handler)(v.session)).then(w=>{const S=new nb({success:w});y.writeMessageBegin("get_roles",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new nb(w),y.writeMessageBegin("get_roles",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_roles",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_roles(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new nb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_roles",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_roles",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_db_objects_for_grantee(T,g,y){const v=new HL;v.read(g),g.readMessageEnd(),this._handler.get_db_objects_for_grantee.length===2?Promise.resolve(this._handler.get_db_objects_for_grantee.bind(this._handler)(v.session,v.roleName)).then(w=>{const S=new ib({success:w});y.writeMessageBegin("get_db_objects_for_grantee",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ib(w),y.writeMessageBegin("get_db_objects_for_grantee",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_db_objects_for_grantee",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_db_objects_for_grantee(v.session,v.roleName,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ib(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_db_objects_for_grantee",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_db_objects_for_grantee",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_db_object_privs(T,g,y){const v=new WL;v.read(g),g.readMessageEnd(),this._handler.get_db_object_privs.length===3?Promise.resolve(this._handler.get_db_object_privs.bind(this._handler)(v.session,v.objectName,v.type)).then(w=>{const S=new sb({success:w});y.writeMessageBegin("get_db_object_privs",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new sb(w),y.writeMessageBegin("get_db_object_privs",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_db_object_privs",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_db_object_privs(v.session,v.objectName,v.type,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new sb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_db_object_privs",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_db_object_privs",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_all_roles_for_user(T,g,y){const v=new YL;v.read(g),g.readMessageEnd(),this._handler.get_all_roles_for_user.length===2?Promise.resolve(this._handler.get_all_roles_for_user.bind(this._handler)(v.session,v.userName)).then(w=>{const S=new rb({success:w});y.writeMessageBegin("get_all_roles_for_user",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new rb(w),y.writeMessageBegin("get_all_roles_for_user",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_all_roles_for_user",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_all_roles_for_user(v.session,v.userName,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new rb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_all_roles_for_user",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_all_roles_for_user",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_all_effective_roles_for_user(T,g,y){const v=new XL;v.read(g),g.readMessageEnd(),this._handler.get_all_effective_roles_for_user.length===2?Promise.resolve(this._handler.get_all_effective_roles_for_user.bind(this._handler)(v.session,v.userName)).then(w=>{const S=new ab({success:w});y.writeMessageBegin("get_all_effective_roles_for_user",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ab(w),y.writeMessageBegin("get_all_effective_roles_for_user",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_all_effective_roles_for_user",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_all_effective_roles_for_user(v.session,v.userName,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ab(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_all_effective_roles_for_user",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_all_effective_roles_for_user",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_has_role(T,g,y){const v=new KL;v.read(g),g.readMessageEnd(),this._handler.has_role.length===3?Promise.resolve(this._handler.has_role.bind(this._handler)(v.session,v.granteeName,v.roleName)).then(w=>{const S=new ob({success:w});y.writeMessageBegin("has_role",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ob(w),y.writeMessageBegin("has_role",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("has_role",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.has_role(v.session,v.granteeName,v.roleName,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ob(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("has_role",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("has_role",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_has_object_privilege(T,g,y){const v=new JL;v.read(g),g.readMessageEnd(),this._handler.has_object_privilege.length===5?Promise.resolve(this._handler.has_object_privilege.bind(this._handler)(v.session,v.granteeName,v.ObjectName,v.objectType,v.permissions)).then(w=>{const S=new lb({success:w});y.writeMessageBegin("has_object_privilege",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new lb(w),y.writeMessageBegin("has_object_privilege",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("has_object_privilege",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.has_object_privilege(v.session,v.granteeName,v.ObjectName,v.objectType,v.permissions,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new lb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("has_object_privilege",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("has_object_privilege",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_set_license_key(T,g,y){const v=new QL;v.read(g),g.readMessageEnd(),this._handler.set_license_key.length===3?Promise.resolve(this._handler.set_license_key.bind(this._handler)(v.session,v.key,v.nonce)).then(w=>{const S=new cb({success:w});y.writeMessageBegin("set_license_key",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new cb(w),y.writeMessageBegin("set_license_key",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_license_key",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.set_license_key(v.session,v.key,v.nonce,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new cb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("set_license_key",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("set_license_key",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_license_claims(T,g,y){const v=new ZL;v.read(g),g.readMessageEnd(),this._handler.get_license_claims.length===2?Promise.resolve(this._handler.get_license_claims.bind(this._handler)(v.session,v.nonce)).then(w=>{const S=new db({success:w});y.writeMessageBegin("get_license_claims",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new db(w),y.writeMessageBegin("get_license_claims",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_license_claims",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_license_claims(v.session,v.nonce,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new db(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_license_claims",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_license_claims",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_device_parameters(T,g,y){const v=new eP;v.read(g),g.readMessageEnd(),this._handler.get_device_parameters.length===1?Promise.resolve(this._handler.get_device_parameters.bind(this._handler)(v.session)).then(w=>{const S=new fb({success:w});y.writeMessageBegin("get_device_parameters",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new fb(w),y.writeMessageBegin("get_device_parameters",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_device_parameters",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_device_parameters(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new fb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_device_parameters",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_device_parameters",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_register_runtime_extension_functions(T,g,y){const v=new tP;v.read(g),g.readMessageEnd(),this._handler.register_runtime_extension_functions.length===4?Promise.resolve(this._handler.register_runtime_extension_functions.bind(this._handler)(v.session,v.udfs,v.udtfs,v.device_ir_map)).then(w=>{const S=new ub({success:w});y.writeMessageBegin("register_runtime_extension_functions",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new ub(w),y.writeMessageBegin("register_runtime_extension_functions",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("register_runtime_extension_functions",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.register_runtime_extension_functions(v.session,v.udfs,v.udtfs,v.device_ir_map,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new ub(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("register_runtime_extension_functions",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("register_runtime_extension_functions",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_table_function_names(T,g,y){const v=new nP;v.read(g),g.readMessageEnd(),this._handler.get_table_function_names.length===1?Promise.resolve(this._handler.get_table_function_names.bind(this._handler)(v.session)).then(w=>{const S=new hb({success:w});y.writeMessageBegin("get_table_function_names",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new hb(w),y.writeMessageBegin("get_table_function_names",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_function_names",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_table_function_names(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new hb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_table_function_names",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_function_names",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_runtime_table_function_names(T,g,y){const v=new iP;v.read(g),g.readMessageEnd(),this._handler.get_runtime_table_function_names.length===1?Promise.resolve(this._handler.get_runtime_table_function_names.bind(this._handler)(v.session)).then(w=>{const S=new _b({success:w});y.writeMessageBegin("get_runtime_table_function_names",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new _b(w),y.writeMessageBegin("get_runtime_table_function_names",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_runtime_table_function_names",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_runtime_table_function_names(v.session,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new _b(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_runtime_table_function_names",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_runtime_table_function_names",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}process_get_table_function_details(T,g,y){const v=new sP;v.read(g),g.readMessageEnd(),this._handler.get_table_function_details.length===2?Promise.resolve(this._handler.get_table_function_details.bind(this._handler)(v.session,v.udtf_names)).then(w=>{const S=new pb({success:w});y.writeMessageBegin("get_table_function_details",r.MessageType.REPLY,T),S.write(y),y.writeMessageEnd(),y.flush()}).catch(w=>{let S;w instanceof l.TDBException?(S=new pb(w),y.writeMessageBegin("get_table_function_details",r.MessageType.REPLY,T)):(S=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_function_details",r.MessageType.EXCEPTION,T)),S.write(y),y.writeMessageEnd(),y.flush()}):this._handler.get_table_function_details(v.session,v.udtf_names,(w,S)=>{let A;w===null||typeof w>"u"||w instanceof l.TDBException?(A=new pb(w!==null||typeof w>"u"?w:{success:S}),y.writeMessageBegin("get_table_function_details",r.MessageType.REPLY,T)):(A=new r.TApplicationException(r.TApplicationExceptionType.UNKNOWN,w.message),y.writeMessageBegin("get_table_function_details",r.MessageType.EXCEPTION,T)),A.write(y),y.writeMessageEnd(),y.flush()})}}},2818:(c,d,f)=>{const r=f(9262).Thrift;f(135);const h=c.exports={};h.TDeviceType={CPU:0,GPU:1},h.TDatumType={SMALLINT:0,INT:1,BIGINT:2,FLOAT:3,DECIMAL:4,DOUBLE:5,STR:6,TIME:7,TIMESTAMP:8,DATE:9,BOOL:10,INTERVAL_DAY_TIME:11,INTERVAL_YEAR_MONTH:12,POINT:13,LINESTRING:14,POLYGON:15,MULTIPOLYGON:16,TINYINT:17,GEOMETRY:18,GEOGRAPHY:19},h.TEncodingType={NONE:0,FIXED:1,RL:2,DIFF:3,DICT:4,SPARSE:5,GEOINT:6,DATE_IN_DAYS:7},c.exports.TTypeInfo=class{constructor(p){this.type=null,this.encoding=null,this.nullable=null,this.is_array=null,this.precision=null,this.scale=null,this.comp_param=null,this.size=-1,p&&(p.type!==void 0&&p.type!==null&&(this.type=p.type),p.encoding!==void 0&&p.encoding!==null&&(this.encoding=p.encoding),p.nullable!==void 0&&p.nullable!==null&&(this.nullable=p.nullable),p.is_array!==void 0&&p.is_array!==null&&(this.is_array=p.is_array),p.precision!==void 0&&p.precision!==null&&(this.precision=p.precision),p.scale!==void 0&&p.scale!==null&&(this.scale=p.scale),p.comp_param!==void 0&&p.comp_param!==null&&(this.comp_param=p.comp_param),p.size!==void 0&&p.size!==null&&(this.size=p.size))}read(p){for(p.readStructBegin();;){const _=p.readFieldBegin(),l=_.ftype,b=_.fid;if(l==r.Type.STOP)break;switch(b){case 1:l==r.Type.I32?this.type=p.readI32():p.skip(l);break;case 4:l==r.Type.I32?this.encoding=p.readI32():p.skip(l);break;case 2:l==r.Type.BOOL?this.nullable=p.readBool():p.skip(l);break;case 3:l==r.Type.BOOL?this.is_array=p.readBool():p.skip(l);break;case 5:l==r.Type.I32?this.precision=p.readI32():p.skip(l);break;case 6:l==r.Type.I32?this.scale=p.readI32():p.skip(l);break;case 7:l==r.Type.I32?this.comp_param=p.readI32():p.skip(l);break;case 8:l==r.Type.I32?this.size=p.readI32():p.skip(l);break;default:p.skip(l)}p.readFieldEnd()}p.readStructEnd()}write(p){p.writeStructBegin("TTypeInfo"),this.type!==null&&this.type!==void 0&&(p.writeFieldBegin("type",r.Type.I32,1),p.writeI32(this.type),p.writeFieldEnd()),this.encoding!==null&&this.encoding!==void 0&&(p.writeFieldBegin("encoding",r.Type.I32,4),p.writeI32(this.encoding),p.writeFieldEnd()),this.nullable!==null&&this.nullable!==void 0&&(p.writeFieldBegin("nullable",r.Type.BOOL,2),p.writeBool(this.nullable),p.writeFieldEnd()),this.is_array!==null&&this.is_array!==void 0&&(p.writeFieldBegin("is_array",r.Type.BOOL,3),p.writeBool(this.is_array),p.writeFieldEnd()),this.precision!==null&&this.precision!==void 0&&(p.writeFieldBegin("precision",r.Type.I32,5),p.writeI32(this.precision),p.writeFieldEnd()),this.scale!==null&&this.scale!==void 0&&(p.writeFieldBegin("scale",r.Type.I32,6),p.writeI32(this.scale),p.writeFieldEnd()),this.comp_param!==null&&this.comp_param!==void 0&&(p.writeFieldBegin("comp_param",r.Type.I32,7),p.writeI32(this.comp_param),p.writeFieldEnd()),this.size!==null&&this.size!==void 0&&(p.writeFieldBegin("size",r.Type.I32,8),p.writeI32(this.size),p.writeFieldEnd()),p.writeFieldStop(),p.writeStructEnd()}}},4494:(c,d,f)=>{const r=f(9262).Thrift;f(135);const h=c.exports={};h.TCompletionHintType={COLUMN:0,TABLE:1,VIEW:2,SCHEMA:3,CATALOG:4,REPOSITORY:5,FUNCTION:6,KEYWORD:7},c.exports.TCompletionHint=class{constructor(p){this.type=null,this.hints=null,this.replaced=null,p&&(p.type!==void 0&&p.type!==null&&(this.type=p.type),p.hints!==void 0&&p.hints!==null&&(this.hints=r.copyList(p.hints,[null])),p.replaced!==void 0&&p.replaced!==null&&(this.replaced=p.replaced))}read(p){for(p.readStructBegin();;){const _=p.readFieldBegin(),l=_.ftype,b=_.fid;if(l==r.Type.STOP)break;switch(b){case 1:l==r.Type.I32?this.type=p.readI32():p.skip(l);break;case 2:if(l==r.Type.LIST){this.hints=[];const E=p.readListBegin().size||0;for(let B=0;B<E;++B){let I=null;I=p.readString(),this.hints.push(I)}p.readListEnd()}else p.skip(l);break;case 3:l==r.Type.STRING?this.replaced=p.readString():p.skip(l);break;default:p.skip(l)}p.readFieldEnd()}p.readStructEnd()}write(p){if(p.writeStructBegin("TCompletionHint"),this.type!==null&&this.type!==void 0&&(p.writeFieldBegin("type",r.Type.I32,1),p.writeI32(this.type),p.writeFieldEnd()),this.hints!==null&&this.hints!==void 0){p.writeFieldBegin("hints",r.Type.LIST,2),p.writeListBegin(r.Type.STRING,this.hints.length);for(let _ in this.hints)this.hints.hasOwnProperty(_)&&(_=this.hints[_],p.writeString(_));p.writeListEnd(),p.writeFieldEnd()}this.replaced!==null&&this.replaced!==void 0&&(p.writeFieldBegin("replaced",r.Type.STRING,3),p.writeString(this.replaced),p.writeFieldEnd()),p.writeFieldStop(),p.writeStructEnd()}}},1396:(c,d,f)=>{const r=f(9262).Thrift;f(135);const h=c.exports={};h.TExtArgumentType={Int8:0,Int16:1,Int32:2,Int64:3,Float:4,Double:5,Void:6,PInt8:7,PInt16:8,PInt32:9,PInt64:10,PFloat:11,PDouble:12,PBool:13,Bool:14,ArrayInt8:15,ArrayInt16:16,ArrayInt32:17,ArrayInt64:18,ArrayFloat:19,ArrayDouble:20,ArrayBool:21,GeoPoint:22,GeoLineString:23,Cursor:24,GeoPolygon:25,GeoMultiPolygon:26,ColumnInt8:27,ColumnInt16:28,ColumnInt32:29,ColumnInt64:30,ColumnFloat:31,ColumnDouble:32,ColumnBool:33,TextEncodingNone:34,TextEncodingDict:35,ColumnListInt8:36,ColumnListInt16:37,ColumnListInt32:38,ColumnListInt64:39,ColumnListFloat:40,ColumnListDouble:41,ColumnListBool:42,ColumnTextEncodingDict:43,ColumnListTextEncodingDict:44,ColumnTimestamp:45,Timestamp:46},h.TOutputBufferSizeType={kConstant:0,kUserSpecifiedConstantParameter:1,kUserSpecifiedRowMultiplier:2,kTableFunctionSpecifiedParameter:3,kPreFlightParameter:4},c.exports.TUserDefinedFunction=class{constructor(p){this.name=null,this.argTypes=null,this.retType=null,p&&(p.name!==void 0&&p.name!==null&&(this.name=p.name),p.argTypes!==void 0&&p.argTypes!==null&&(this.argTypes=r.copyList(p.argTypes,[null])),p.retType!==void 0&&p.retType!==null&&(this.retType=p.retType))}read(p){for(p.readStructBegin();;){const _=p.readFieldBegin(),l=_.ftype,b=_.fid;if(l==r.Type.STOP)break;switch(b){case 1:l==r.Type.STRING?this.name=p.readString():p.skip(l);break;case 2:if(l==r.Type.LIST){this.argTypes=[];const E=p.readListBegin().size||0;for(let B=0;B<E;++B){let I=null;I=p.readI32(),this.argTypes.push(I)}p.readListEnd()}else p.skip(l);break;case 3:l==r.Type.I32?this.retType=p.readI32():p.skip(l);break;default:p.skip(l)}p.readFieldEnd()}p.readStructEnd()}write(p){if(p.writeStructBegin("TUserDefinedFunction"),this.name!==null&&this.name!==void 0&&(p.writeFieldBegin("name",r.Type.STRING,1),p.writeString(this.name),p.writeFieldEnd()),this.argTypes!==null&&this.argTypes!==void 0){p.writeFieldBegin("argTypes",r.Type.LIST,2),p.writeListBegin(r.Type.I32,this.argTypes.length);for(let _ in this.argTypes)this.argTypes.hasOwnProperty(_)&&(_=this.argTypes[_],p.writeI32(_));p.writeListEnd(),p.writeFieldEnd()}this.retType!==null&&this.retType!==void 0&&(p.writeFieldBegin("retType",r.Type.I32,3),p.writeI32(this.retType),p.writeFieldEnd()),p.writeFieldStop(),p.writeStructEnd()}},c.exports.TUserDefinedTableFunction=class{constructor(p){this.name=null,this.sizerType=null,this.sizerArgPos=null,this.inputArgTypes=null,this.outputArgTypes=null,this.sqlArgTypes=null,this.annotations=null,p&&(p.name!==void 0&&p.name!==null&&(this.name=p.name),p.sizerType!==void 0&&p.sizerType!==null&&(this.sizerType=p.sizerType),p.sizerArgPos!==void 0&&p.sizerArgPos!==null&&(this.sizerArgPos=p.sizerArgPos),p.inputArgTypes!==void 0&&p.inputArgTypes!==null&&(this.inputArgTypes=r.copyList(p.inputArgTypes,[null])),p.outputArgTypes!==void 0&&p.outputArgTypes!==null&&(this.outputArgTypes=r.copyList(p.outputArgTypes,[null])),p.sqlArgTypes!==void 0&&p.sqlArgTypes!==null&&(this.sqlArgTypes=r.copyList(p.sqlArgTypes,[null])),p.annotations!==void 0&&p.annotations!==null&&(this.annotations=r.copyList(p.annotations,[r.copyMap,null])))}read(p){for(p.readStructBegin();;){const _=p.readFieldBegin(),l=_.ftype,b=_.fid;if(l==r.Type.STOP)break;switch(b){case 1:l==r.Type.STRING?this.name=p.readString():p.skip(l);break;case 2:l==r.Type.I32?this.sizerType=p.readI32():p.skip(l);break;case 3:l==r.Type.I32?this.sizerArgPos=p.readI32():p.skip(l);break;case 4:if(l==r.Type.LIST){this.inputArgTypes=[];const E=p.readListBegin().size||0;for(let B=0;B<E;++B){let I=null;I=p.readI32(),this.inputArgTypes.push(I)}p.readListEnd()}else p.skip(l);break;case 5:if(l==r.Type.LIST){this.outputArgTypes=[];const E=p.readListBegin().size||0;for(let B=0;B<E;++B){let I=null;I=p.readI32(),this.outputArgTypes.push(I)}p.readListEnd()}else p.skip(l);break;case 6:if(l==r.Type.LIST){this.sqlArgTypes=[];const E=p.readListBegin().size||0;for(let B=0;B<E;++B){let I=null;I=p.readI32(),this.sqlArgTypes.push(I)}p.readListEnd()}else p.skip(l);break;case 7:if(l==r.Type.LIST){this.annotations=[];const E=p.readListBegin().size||0;for(let B=0;B<E;++B){let I=null;I={};const F=p.readMapBegin().size||0;for(let x=0;x<F;++x){let M=null,R=null;M=p.readString(),R=p.readString(),I[M]=R}p.readMapEnd(),this.annotations.push(I)}p.readListEnd()}else p.skip(l);break;default:p.skip(l)}p.readFieldEnd()}p.readStructEnd()}write(p){if(p.writeStructBegin("TUserDefinedTableFunction"),this.name!==null&&this.name!==void 0&&(p.writeFieldBegin("name",r.Type.STRING,1),p.writeString(this.name),p.writeFieldEnd()),this.sizerType!==null&&this.sizerType!==void 0&&(p.writeFieldBegin("sizerType",r.Type.I32,2),p.writeI32(this.sizerType),p.writeFieldEnd()),this.sizerArgPos!==null&&this.sizerArgPos!==void 0&&(p.writeFieldBegin("sizerArgPos",r.Type.I32,3),p.writeI32(this.sizerArgPos),p.writeFieldEnd()),this.inputArgTypes!==null&&this.inputArgTypes!==void 0){p.writeFieldBegin("inputArgTypes",r.Type.LIST,4),p.writeListBegin(r.Type.I32,this.inputArgTypes.length);for(let _ in this.inputArgTypes)this.inputArgTypes.hasOwnProperty(_)&&(_=this.inputArgTypes[_],p.writeI32(_));p.writeListEnd(),p.writeFieldEnd()}if(this.outputArgTypes!==null&&this.outputArgTypes!==void 0){p.writeFieldBegin("outputArgTypes",r.Type.LIST,5),p.writeListBegin(r.Type.I32,this.outputArgTypes.length);for(let _ in this.outputArgTypes)this.outputArgTypes.hasOwnProperty(_)&&(_=this.outputArgTypes[_],p.writeI32(_));p.writeListEnd(),p.writeFieldEnd()}if(this.sqlArgTypes!==null&&this.sqlArgTypes!==void 0){p.writeFieldBegin("sqlArgTypes",r.Type.LIST,6),p.writeListBegin(r.Type.I32,this.sqlArgTypes.length);for(let _ in this.sqlArgTypes)this.sqlArgTypes.hasOwnProperty(_)&&(_=this.sqlArgTypes[_],p.writeI32(_));p.writeListEnd(),p.writeFieldEnd()}if(this.annotations!==null&&this.annotations!==void 0){p.writeFieldBegin("annotations",r.Type.LIST,7),p.writeListBegin(r.Type.MAP,this.annotations.length);for(let _ in this.annotations)if(this.annotations.hasOwnProperty(_)){_=this.annotations[_],p.writeMapBegin(r.Type.STRING,r.Type.STRING,r.objectLength(_));for(let l in _)if(_.hasOwnProperty(l)){let b=_[l];p.writeString(l),p.writeString(b)}p.writeMapEnd()}p.writeListEnd(),p.writeFieldEnd()}p.writeFieldStop(),p.writeStructEnd()}}},2607:(c,d,f)=>{const r=f(9262).Thrift;f(135);const h=f(2818);f(4494);const p=f(3962);f(1396);const _=c.exports={};_.TExecuteMode={GPU:1,CPU:2},_.TSourceType={DELIMITED_FILE:0,GEO_FILE:1,PARQUET_FILE:2,RASTER_FILE:3,ODBC:4},_.TPartitionDetail={DEFAULT:0,REPLICATED:1,SHARDED:2,OTHER:3},_.TGeoFileLayerContents={EMPTY:0,GEO:1,NON_GEO:2,UNSUPPORTED_GEO:3},_.TImportHeaderRow={AUTODETECT:0,NO_HEADER:1,HAS_HEADER:2},_.TRole={SERVER:0,AGGREGATOR:1,LEAF:2,STRING_DICTIONARY:3},_.TTableType={DEFAULT:0,TEMPORARY:1,FOREIGN:2,VIEW:3},_.TTableRefreshUpdateType={ALL:0,APPEND:1},_.TTableRefreshTimingType={MANUAL:0,SCHEDULED:1},_.TTableRefreshIntervalType={NONE:0,HOUR:1,DAY:2},_.TMergeType={UNION:0,REDUCE:1},_.TRasterPointType={NONE:0,AUTO:1,SMALLINT:2,INT:3,FLOAT:4,DOUBLE:5,POINT:6},_.TRasterPointTransform={NONE:0,AUTO:1,FILE:2,WORLD:3},_.TQueryType={UNKNOWN:0,READ:1,WRITE:2,SCHEMA_READ:3,SCHEMA_WRITE:4},_.TArrowTransport={SHARED_MEMORY:0,WIRE:1},_.TExpressionRangeType={INVALID:0,INTEGER:1,FLOAT:2,DOUBLE:3},_.TDBObjectType={AbstractDBObjectType:0,DatabaseDBObjectType:1,TableDBObjectType:2,DashboardDBObjectType:3,ViewDBObjectType:4,ServerDBObjectType:5},_.TDataSourceType={TABLE:0},c.exports.TDatumVal=class{constructor(l){this.int_val=null,this.real_val=null,this.str_val=null,this.arr_val=null,l&&(l.int_val!==void 0&&l.int_val!==null&&(this.int_val=l.int_val),l.real_val!==void 0&&l.real_val!==null&&(this.real_val=l.real_val),l.str_val!==void 0&&l.str_val!==null&&(this.str_val=l.str_val),l.arr_val!==void 0&&l.arr_val!==null&&(this.arr_val=r.copyList(l.arr_val,[null])))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I64?this.int_val=l.readI64():l.skip(m);break;case 2:m==r.Type.DOUBLE?this.real_val=l.readDouble():l.skip(m);break;case 3:m==r.Type.STRING?this.str_val=l.readString():l.skip(m);break;case 4:if(m==r.Type.LIST){this.arr_val=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TDatum,F.read(l),this.arr_val.push(F)}l.readListEnd()}else l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDatumVal"),this.int_val!==null&&this.int_val!==void 0&&(l.writeFieldBegin("int_val",r.Type.I64,1),l.writeI64(this.int_val),l.writeFieldEnd()),this.real_val!==null&&this.real_val!==void 0&&(l.writeFieldBegin("real_val",r.Type.DOUBLE,2),l.writeDouble(this.real_val),l.writeFieldEnd()),this.str_val!==null&&this.str_val!==void 0&&(l.writeFieldBegin("str_val",r.Type.STRING,3),l.writeString(this.str_val),l.writeFieldEnd()),this.arr_val!==null&&this.arr_val!==void 0){l.writeFieldBegin("arr_val",r.Type.LIST,4),l.writeListBegin(r.Type.STRUCT,this.arr_val.length);for(let b in this.arr_val)this.arr_val.hasOwnProperty(b)&&(b=this.arr_val[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDatum=class{constructor(l){this.val=null,this.is_null=null,l&&(l.val!==void 0&&l.val!==null&&(this.val=new _.TDatumVal(l.val)),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRUCT?(this.val=new _.TDatumVal,this.val.read(l)):l.skip(m);break;case 2:m==r.Type.BOOL?this.is_null=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDatum"),this.val!==null&&this.val!==void 0&&(l.writeFieldBegin("val",r.Type.STRUCT,1),this.val.write(l),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",r.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStringValue=class{constructor(l){this.str_val=null,this.is_null=null,l&&(l.str_val!==void 0&&l.str_val!==null&&(this.str_val=l.str_val),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.str_val=l.readString():l.skip(m);break;case 2:m==r.Type.BOOL?this.is_null=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TStringValue"),this.str_val!==null&&this.str_val!==void 0&&(l.writeFieldBegin("str_val",r.Type.STRING,1),l.writeString(this.str_val),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",r.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnType=class{constructor(l){this.col_name=null,this.col_type=null,this.is_reserved_keyword=null,this.src_name=null,this.is_system=null,this.is_physical=null,this.col_id=null,this.default_value=null,l&&(l.col_name!==void 0&&l.col_name!==null&&(this.col_name=l.col_name),l.col_type!==void 0&&l.col_type!==null&&(this.col_type=new h.TTypeInfo(l.col_type)),l.is_reserved_keyword!==void 0&&l.is_reserved_keyword!==null&&(this.is_reserved_keyword=l.is_reserved_keyword),l.src_name!==void 0&&l.src_name!==null&&(this.src_name=l.src_name),l.is_system!==void 0&&l.is_system!==null&&(this.is_system=l.is_system),l.is_physical!==void 0&&l.is_physical!==null&&(this.is_physical=l.is_physical),l.col_id!==void 0&&l.col_id!==null&&(this.col_id=l.col_id),l.default_value!==void 0&&l.default_value!==null&&(this.default_value=l.default_value))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.col_name=l.readString():l.skip(m);break;case 2:m==r.Type.STRUCT?(this.col_type=new h.TTypeInfo,this.col_type.read(l)):l.skip(m);break;case 3:m==r.Type.BOOL?this.is_reserved_keyword=l.readBool():l.skip(m);break;case 4:m==r.Type.STRING?this.src_name=l.readString():l.skip(m);break;case 5:m==r.Type.BOOL?this.is_system=l.readBool():l.skip(m);break;case 6:m==r.Type.BOOL?this.is_physical=l.readBool():l.skip(m);break;case 7:m==r.Type.I64?this.col_id=l.readI64():l.skip(m);break;case 8:m==r.Type.STRING?this.default_value=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TColumnType"),this.col_name!==null&&this.col_name!==void 0&&(l.writeFieldBegin("col_name",r.Type.STRING,1),l.writeString(this.col_name),l.writeFieldEnd()),this.col_type!==null&&this.col_type!==void 0&&(l.writeFieldBegin("col_type",r.Type.STRUCT,2),this.col_type.write(l),l.writeFieldEnd()),this.is_reserved_keyword!==null&&this.is_reserved_keyword!==void 0&&(l.writeFieldBegin("is_reserved_keyword",r.Type.BOOL,3),l.writeBool(this.is_reserved_keyword),l.writeFieldEnd()),this.src_name!==null&&this.src_name!==void 0&&(l.writeFieldBegin("src_name",r.Type.STRING,4),l.writeString(this.src_name),l.writeFieldEnd()),this.is_system!==null&&this.is_system!==void 0&&(l.writeFieldBegin("is_system",r.Type.BOOL,5),l.writeBool(this.is_system),l.writeFieldEnd()),this.is_physical!==null&&this.is_physical!==void 0&&(l.writeFieldBegin("is_physical",r.Type.BOOL,6),l.writeBool(this.is_physical),l.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(l.writeFieldBegin("col_id",r.Type.I64,7),l.writeI64(this.col_id),l.writeFieldEnd()),this.default_value!==null&&this.default_value!==void 0&&(l.writeFieldBegin("default_value",r.Type.STRING,8),l.writeString(this.default_value),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRow=class{constructor(l){this.cols=null,l&&l.cols!==void 0&&l.cols!==null&&(this.cols=r.copyList(l.cols,[_.TDatum]))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:if(m==r.Type.LIST){this.cols=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TDatum,F.read(l),this.cols.push(F)}l.readListEnd()}else l.skip(m);break;case 0:l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRow"),this.cols!==null&&this.cols!==void 0){l.writeFieldBegin("cols",r.Type.LIST,1),l.writeListBegin(r.Type.STRUCT,this.cols.length);for(let b in this.cols)this.cols.hasOwnProperty(b)&&(b=this.cols[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnData=class{constructor(l){this.int_col=null,this.real_col=null,this.str_col=null,this.arr_col=null,l&&(l.int_col!==void 0&&l.int_col!==null&&(this.int_col=r.copyList(l.int_col,[null])),l.real_col!==void 0&&l.real_col!==null&&(this.real_col=r.copyList(l.real_col,[null])),l.str_col!==void 0&&l.str_col!==null&&(this.str_col=r.copyList(l.str_col,[null])),l.arr_col!==void 0&&l.arr_col!==null&&(this.arr_col=r.copyList(l.arr_col,[null])))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:if(m==r.Type.LIST){this.int_col=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readI64(),this.int_col.push(F)}l.readListEnd()}else l.skip(m);break;case 2:if(m==r.Type.LIST){this.real_col=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readDouble(),this.real_col.push(F)}l.readListEnd()}else l.skip(m);break;case 3:if(m==r.Type.LIST){this.str_col=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readString(),this.str_col.push(F)}l.readListEnd()}else l.skip(m);break;case 4:if(m==r.Type.LIST){this.arr_col=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TColumn,F.read(l),this.arr_col.push(F)}l.readListEnd()}else l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TColumnData"),this.int_col!==null&&this.int_col!==void 0){l.writeFieldBegin("int_col",r.Type.LIST,1),l.writeListBegin(r.Type.I64,this.int_col.length);for(let b in this.int_col)this.int_col.hasOwnProperty(b)&&(b=this.int_col[b],l.writeI64(b));l.writeListEnd(),l.writeFieldEnd()}if(this.real_col!==null&&this.real_col!==void 0){l.writeFieldBegin("real_col",r.Type.LIST,2),l.writeListBegin(r.Type.DOUBLE,this.real_col.length);for(let b in this.real_col)this.real_col.hasOwnProperty(b)&&(b=this.real_col[b],l.writeDouble(b));l.writeListEnd(),l.writeFieldEnd()}if(this.str_col!==null&&this.str_col!==void 0){l.writeFieldBegin("str_col",r.Type.LIST,3),l.writeListBegin(r.Type.STRING,this.str_col.length);for(let b in this.str_col)this.str_col.hasOwnProperty(b)&&(b=this.str_col[b],l.writeString(b));l.writeListEnd(),l.writeFieldEnd()}if(this.arr_col!==null&&this.arr_col!==void 0){l.writeFieldBegin("arr_col",r.Type.LIST,4),l.writeListBegin(r.Type.STRUCT,this.arr_col.length);for(let b in this.arr_col)this.arr_col.hasOwnProperty(b)&&(b=this.arr_col[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumn=class{constructor(l){this.data=null,this.nulls=null,l&&(l.data!==void 0&&l.data!==null&&(this.data=new _.TColumnData(l.data)),l.nulls!==void 0&&l.nulls!==null&&(this.nulls=r.copyList(l.nulls,[null])))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRUCT?(this.data=new _.TColumnData,this.data.read(l)):l.skip(m);break;case 2:if(m==r.Type.LIST){this.nulls=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readBool(),this.nulls.push(F)}l.readListEnd()}else l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TColumn"),this.data!==null&&this.data!==void 0&&(l.writeFieldBegin("data",r.Type.STRUCT,1),this.data.write(l),l.writeFieldEnd()),this.nulls!==null&&this.nulls!==void 0){l.writeFieldBegin("nulls",r.Type.LIST,2),l.writeListBegin(r.Type.BOOL,this.nulls.length);for(let b in this.nulls)this.nulls.hasOwnProperty(b)&&(b=this.nulls[b],l.writeBool(b));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStringRow=class{constructor(l){this.cols=null,l&&l.cols!==void 0&&l.cols!==null&&(this.cols=r.copyList(l.cols,[_.TStringValue]))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:if(m==r.Type.LIST){this.cols=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TStringValue,F.read(l),this.cols.push(F)}l.readListEnd()}else l.skip(m);break;case 0:l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TStringRow"),this.cols!==null&&this.cols!==void 0){l.writeFieldBegin("cols",r.Type.LIST,1),l.writeListBegin(r.Type.STRUCT,this.cols.length);for(let b in this.cols)this.cols.hasOwnProperty(b)&&(b=this.cols[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TKrb5Session=class{constructor(l){this.sessionId=null,this.krbToken=null,l&&(l.sessionId!==void 0&&l.sessionId!==null&&(this.sessionId=l.sessionId),l.krbToken!==void 0&&l.krbToken!==null&&(this.krbToken=l.krbToken))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.sessionId=l.readString():l.skip(m);break;case 2:m==r.Type.STRING?this.krbToken=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TKrb5Session"),this.sessionId!==null&&this.sessionId!==void 0&&(l.writeFieldBegin("sessionId",r.Type.STRING,1),l.writeString(this.sessionId),l.writeFieldEnd()),this.krbToken!==null&&this.krbToken!==void 0&&(l.writeFieldBegin("krbToken",r.Type.STRING,2),l.writeString(this.krbToken),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TStepResult=class{constructor(l){this.serialized_rows=null,this.execution_finished=null,this.merge_type=null,this.sharded=null,this.row_desc=null,this.node_id=null,l&&(l.serialized_rows!==void 0&&l.serialized_rows!==null&&(this.serialized_rows=new p.TSerializedRows(l.serialized_rows)),l.execution_finished!==void 0&&l.execution_finished!==null&&(this.execution_finished=l.execution_finished),l.merge_type!==void 0&&l.merge_type!==null&&(this.merge_type=l.merge_type),l.sharded!==void 0&&l.sharded!==null&&(this.sharded=l.sharded),l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=r.copyList(l.row_desc,[_.TColumnType])),l.node_id!==void 0&&l.node_id!==null&&(this.node_id=l.node_id))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRUCT?(this.serialized_rows=new p.TSerializedRows,this.serialized_rows.read(l)):l.skip(m);break;case 2:m==r.Type.BOOL?this.execution_finished=l.readBool():l.skip(m);break;case 3:m==r.Type.I32?this.merge_type=l.readI32():l.skip(m);break;case 4:m==r.Type.BOOL?this.sharded=l.readBool():l.skip(m);break;case 5:if(m==r.Type.LIST){this.row_desc=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TColumnType,F.read(l),this.row_desc.push(F)}l.readListEnd()}else l.skip(m);break;case 6:m==r.Type.I32?this.node_id=l.readI32():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TStepResult"),this.serialized_rows!==null&&this.serialized_rows!==void 0&&(l.writeFieldBegin("serialized_rows",r.Type.STRUCT,1),this.serialized_rows.write(l),l.writeFieldEnd()),this.execution_finished!==null&&this.execution_finished!==void 0&&(l.writeFieldBegin("execution_finished",r.Type.BOOL,2),l.writeBool(this.execution_finished),l.writeFieldEnd()),this.merge_type!==null&&this.merge_type!==void 0&&(l.writeFieldBegin("merge_type",r.Type.I32,3),l.writeI32(this.merge_type),l.writeFieldEnd()),this.sharded!==null&&this.sharded!==void 0&&(l.writeFieldBegin("sharded",r.Type.BOOL,4),l.writeBool(this.sharded),l.writeFieldEnd()),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",r.Type.LIST,5),l.writeListBegin(r.Type.STRUCT,this.row_desc.length);for(let b in this.row_desc)this.row_desc.hasOwnProperty(b)&&(b=this.row_desc[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}this.node_id!==null&&this.node_id!==void 0&&(l.writeFieldBegin("node_id",r.Type.I32,6),l.writeI32(this.node_id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRowSet=class{constructor(l){this.row_desc=null,this.rows=null,this.columns=null,this.is_columnar=null,l&&(l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=r.copyList(l.row_desc,[_.TColumnType])),l.rows!==void 0&&l.rows!==null&&(this.rows=r.copyList(l.rows,[_.TRow])),l.columns!==void 0&&l.columns!==null&&(this.columns=r.copyList(l.columns,[_.TColumn])),l.is_columnar!==void 0&&l.is_columnar!==null&&(this.is_columnar=l.is_columnar))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:if(m==r.Type.LIST){this.row_desc=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TColumnType,F.read(l),this.row_desc.push(F)}l.readListEnd()}else l.skip(m);break;case 2:if(m==r.Type.LIST){this.rows=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TRow,F.read(l),this.rows.push(F)}l.readListEnd()}else l.skip(m);break;case 3:if(m==r.Type.LIST){this.columns=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TColumn,F.read(l),this.columns.push(F)}l.readListEnd()}else l.skip(m);break;case 4:m==r.Type.BOOL?this.is_columnar=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRowSet"),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",r.Type.LIST,1),l.writeListBegin(r.Type.STRUCT,this.row_desc.length);for(let b in this.row_desc)this.row_desc.hasOwnProperty(b)&&(b=this.row_desc[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.rows!==null&&this.rows!==void 0){l.writeFieldBegin("rows",r.Type.LIST,2),l.writeListBegin(r.Type.STRUCT,this.rows.length);for(let b in this.rows)this.rows.hasOwnProperty(b)&&(b=this.rows[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.columns!==null&&this.columns!==void 0){l.writeFieldBegin("columns",r.Type.LIST,3),l.writeListBegin(r.Type.STRUCT,this.columns.length);for(let b in this.columns)this.columns.hasOwnProperty(b)&&(b=this.columns[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}this.is_columnar!==null&&this.is_columnar!==void 0&&(l.writeFieldBegin("is_columnar",r.Type.BOOL,4),l.writeBool(this.is_columnar),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TQueryResult=class{constructor(l){this.row_set=null,this.execution_time_ms=null,this.total_time_ms=null,this.nonce=null,this.debug=null,this.success=!0,this.query_type=0,l&&(l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new _.TRowSet(l.row_set)),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce),l.debug!==void 0&&l.debug!==null&&(this.debug=l.debug),l.success!==void 0&&l.success!==null&&(this.success=l.success),l.query_type!==void 0&&l.query_type!==null&&(this.query_type=l.query_type))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRUCT?(this.row_set=new _.TRowSet,this.row_set.read(l)):l.skip(m);break;case 2:m==r.Type.I64?this.execution_time_ms=l.readI64():l.skip(m);break;case 3:m==r.Type.I64?this.total_time_ms=l.readI64():l.skip(m);break;case 4:m==r.Type.STRING?this.nonce=l.readString():l.skip(m);break;case 5:m==r.Type.STRING?this.debug=l.readString():l.skip(m);break;case 6:m==r.Type.BOOL?this.success=l.readBool():l.skip(m);break;case 7:m==r.Type.I32?this.query_type=l.readI32():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TQueryResult"),this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",r.Type.STRUCT,1),this.row_set.write(l),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",r.Type.I64,2),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",r.Type.I64,3),l.writeI64(this.total_time_ms),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",r.Type.STRING,4),l.writeString(this.nonce),l.writeFieldEnd()),this.debug!==null&&this.debug!==void 0&&(l.writeFieldBegin("debug",r.Type.STRING,5),l.writeString(this.debug),l.writeFieldEnd()),this.success!==null&&this.success!==void 0&&(l.writeFieldBegin("success",r.Type.BOOL,6),l.writeBool(this.success),l.writeFieldEnd()),this.query_type!==null&&this.query_type!==void 0&&(l.writeFieldBegin("query_type",r.Type.I32,7),l.writeI32(this.query_type),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDataFrame=class{constructor(l){this.sm_handle=null,this.sm_size=null,this.df_handle=null,this.df_size=null,this.execution_time_ms=null,this.arrow_conversion_time_ms=null,this.df_buffer=null,l&&(l.sm_handle!==void 0&&l.sm_handle!==null&&(this.sm_handle=l.sm_handle),l.sm_size!==void 0&&l.sm_size!==null&&(this.sm_size=l.sm_size),l.df_handle!==void 0&&l.df_handle!==null&&(this.df_handle=l.df_handle),l.df_size!==void 0&&l.df_size!==null&&(this.df_size=l.df_size),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.arrow_conversion_time_ms!==void 0&&l.arrow_conversion_time_ms!==null&&(this.arrow_conversion_time_ms=l.arrow_conversion_time_ms),l.df_buffer!==void 0&&l.df_buffer!==null&&(this.df_buffer=l.df_buffer))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.sm_handle=l.readBinary():l.skip(m);break;case 2:m==r.Type.I64?this.sm_size=l.readI64():l.skip(m);break;case 3:m==r.Type.STRING?this.df_handle=l.readBinary():l.skip(m);break;case 4:m==r.Type.I64?this.df_size=l.readI64():l.skip(m);break;case 5:m==r.Type.I64?this.execution_time_ms=l.readI64():l.skip(m);break;case 6:m==r.Type.I64?this.arrow_conversion_time_ms=l.readI64():l.skip(m);break;case 7:m==r.Type.STRING?this.df_buffer=l.readBinary():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDataFrame"),this.sm_handle!==null&&this.sm_handle!==void 0&&(l.writeFieldBegin("sm_handle",r.Type.STRING,1),l.writeBinary(this.sm_handle),l.writeFieldEnd()),this.sm_size!==null&&this.sm_size!==void 0&&(l.writeFieldBegin("sm_size",r.Type.I64,2),l.writeI64(this.sm_size),l.writeFieldEnd()),this.df_handle!==null&&this.df_handle!==void 0&&(l.writeFieldBegin("df_handle",r.Type.STRING,3),l.writeBinary(this.df_handle),l.writeFieldEnd()),this.df_size!==null&&this.df_size!==void 0&&(l.writeFieldBegin("df_size",r.Type.I64,4),l.writeI64(this.df_size),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",r.Type.I64,5),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.arrow_conversion_time_ms!==null&&this.arrow_conversion_time_ms!==void 0&&(l.writeFieldBegin("arrow_conversion_time_ms",r.Type.I64,6),l.writeI64(this.arrow_conversion_time_ms),l.writeFieldEnd()),this.df_buffer!==null&&this.df_buffer!==void 0&&(l.writeFieldBegin("df_buffer",r.Type.STRING,7),l.writeBinary(this.df_buffer),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBInfo=class{constructor(l){this.db_name=null,this.db_owner=null,l&&(l.db_name!==void 0&&l.db_name!==null&&(this.db_name=l.db_name),l.db_owner!==void 0&&l.db_owner!==null&&(this.db_owner=l.db_owner))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.db_name=l.readString():l.skip(m);break;case 2:m==r.Type.STRING?this.db_owner=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBInfo"),this.db_name!==null&&this.db_name!==void 0&&(l.writeFieldBegin("db_name",r.Type.STRING,1),l.writeString(this.db_name),l.writeFieldEnd()),this.db_owner!==null&&this.db_owner!==void 0&&(l.writeFieldBegin("db_owner",r.Type.STRING,2),l.writeString(this.db_owner),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBException=class extends r.TException{constructor(l){super(l),this.name="TDBException",this.error_msg=null,l&&l.error_msg!==void 0&&l.error_msg!==null&&(this.error_msg=l.error_msg)}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.error_msg=l.readString():l.skip(m);break;case 0:l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBException"),this.error_msg!==null&&this.error_msg!==void 0&&(l.writeFieldBegin("error_msg",r.Type.STRING,1),l.writeString(this.error_msg),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCopyParams=class{constructor(l){this.delimiter=null,this.null_str=null,this.has_header=0,this.quoted=null,this.quote=null,this.escape=null,this.line_delim=null,this.array_delim=null,this.array_begin=null,this.array_end=null,this.threads=null,this.source_type=0,this.s3_access_key=null,this.s3_secret_key=null,this.s3_region=null,this.geo_coords_encoding=6,this.geo_coords_comp_param=32,this.geo_coords_type=18,this.geo_coords_srid=4326,this.sanitize_column_names=!0,this.geo_layer_name=null,this.s3_endpoint=null,this.geo_assign_render_groups=!0,this.geo_explode_collections=!1,this.source_srid=0,this.s3_session_token=null,this.raster_point_type=1,this.raster_import_bands=null,this.raster_scanlines_per_thread=null,this.raster_point_transform=1,this.raster_point_compute_angle=!1,this.raster_import_dimensions=null,this.odbc_dsn=null,this.odbc_connection_string=null,this.odbc_sql_select=null,this.odbc_sql_order_by=null,this.odbc_username=null,this.odbc_password=null,this.odbc_credential_string=null,this.add_metadata_columns=null,l&&(l.delimiter!==void 0&&l.delimiter!==null&&(this.delimiter=l.delimiter),l.null_str!==void 0&&l.null_str!==null&&(this.null_str=l.null_str),l.has_header!==void 0&&l.has_header!==null&&(this.has_header=l.has_header),l.quoted!==void 0&&l.quoted!==null&&(this.quoted=l.quoted),l.quote!==void 0&&l.quote!==null&&(this.quote=l.quote),l.escape!==void 0&&l.escape!==null&&(this.escape=l.escape),l.line_delim!==void 0&&l.line_delim!==null&&(this.line_delim=l.line_delim),l.array_delim!==void 0&&l.array_delim!==null&&(this.array_delim=l.array_delim),l.array_begin!==void 0&&l.array_begin!==null&&(this.array_begin=l.array_begin),l.array_end!==void 0&&l.array_end!==null&&(this.array_end=l.array_end),l.threads!==void 0&&l.threads!==null&&(this.threads=l.threads),l.source_type!==void 0&&l.source_type!==null&&(this.source_type=l.source_type),l.s3_access_key!==void 0&&l.s3_access_key!==null&&(this.s3_access_key=l.s3_access_key),l.s3_secret_key!==void 0&&l.s3_secret_key!==null&&(this.s3_secret_key=l.s3_secret_key),l.s3_region!==void 0&&l.s3_region!==null&&(this.s3_region=l.s3_region),l.geo_coords_encoding!==void 0&&l.geo_coords_encoding!==null&&(this.geo_coords_encoding=l.geo_coords_encoding),l.geo_coords_comp_param!==void 0&&l.geo_coords_comp_param!==null&&(this.geo_coords_comp_param=l.geo_coords_comp_param),l.geo_coords_type!==void 0&&l.geo_coords_type!==null&&(this.geo_coords_type=l.geo_coords_type),l.geo_coords_srid!==void 0&&l.geo_coords_srid!==null&&(this.geo_coords_srid=l.geo_coords_srid),l.sanitize_column_names!==void 0&&l.sanitize_column_names!==null&&(this.sanitize_column_names=l.sanitize_column_names),l.geo_layer_name!==void 0&&l.geo_layer_name!==null&&(this.geo_layer_name=l.geo_layer_name),l.s3_endpoint!==void 0&&l.s3_endpoint!==null&&(this.s3_endpoint=l.s3_endpoint),l.geo_assign_render_groups!==void 0&&l.geo_assign_render_groups!==null&&(this.geo_assign_render_groups=l.geo_assign_render_groups),l.geo_explode_collections!==void 0&&l.geo_explode_collections!==null&&(this.geo_explode_collections=l.geo_explode_collections),l.source_srid!==void 0&&l.source_srid!==null&&(this.source_srid=l.source_srid),l.s3_session_token!==void 0&&l.s3_session_token!==null&&(this.s3_session_token=l.s3_session_token),l.raster_point_type!==void 0&&l.raster_point_type!==null&&(this.raster_point_type=l.raster_point_type),l.raster_import_bands!==void 0&&l.raster_import_bands!==null&&(this.raster_import_bands=l.raster_import_bands),l.raster_scanlines_per_thread!==void 0&&l.raster_scanlines_per_thread!==null&&(this.raster_scanlines_per_thread=l.raster_scanlines_per_thread),l.raster_point_transform!==void 0&&l.raster_point_transform!==null&&(this.raster_point_transform=l.raster_point_transform),l.raster_point_compute_angle!==void 0&&l.raster_point_compute_angle!==null&&(this.raster_point_compute_angle=l.raster_point_compute_angle),l.raster_import_dimensions!==void 0&&l.raster_import_dimensions!==null&&(this.raster_import_dimensions=l.raster_import_dimensions),l.odbc_dsn!==void 0&&l.odbc_dsn!==null&&(this.odbc_dsn=l.odbc_dsn),l.odbc_connection_string!==void 0&&l.odbc_connection_string!==null&&(this.odbc_connection_string=l.odbc_connection_string),l.odbc_sql_select!==void 0&&l.odbc_sql_select!==null&&(this.odbc_sql_select=l.odbc_sql_select),l.odbc_sql_order_by!==void 0&&l.odbc_sql_order_by!==null&&(this.odbc_sql_order_by=l.odbc_sql_order_by),l.odbc_username!==void 0&&l.odbc_username!==null&&(this.odbc_username=l.odbc_username),l.odbc_password!==void 0&&l.odbc_password!==null&&(this.odbc_password=l.odbc_password),l.odbc_credential_string!==void 0&&l.odbc_credential_string!==null&&(this.odbc_credential_string=l.odbc_credential_string),l.add_metadata_columns!==void 0&&l.add_metadata_columns!==null&&(this.add_metadata_columns=l.add_metadata_columns))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.delimiter=l.readString():l.skip(m);break;case 2:m==r.Type.STRING?this.null_str=l.readString():l.skip(m);break;case 3:m==r.Type.I32?this.has_header=l.readI32():l.skip(m);break;case 4:m==r.Type.BOOL?this.quoted=l.readBool():l.skip(m);break;case 5:m==r.Type.STRING?this.quote=l.readString():l.skip(m);break;case 6:m==r.Type.STRING?this.escape=l.readString():l.skip(m);break;case 7:m==r.Type.STRING?this.line_delim=l.readString():l.skip(m);break;case 8:m==r.Type.STRING?this.array_delim=l.readString():l.skip(m);break;case 9:m==r.Type.STRING?this.array_begin=l.readString():l.skip(m);break;case 10:m==r.Type.STRING?this.array_end=l.readString():l.skip(m);break;case 11:m==r.Type.I32?this.threads=l.readI32():l.skip(m);break;case 12:m==r.Type.I32?this.source_type=l.readI32():l.skip(m);break;case 13:m==r.Type.STRING?this.s3_access_key=l.readString():l.skip(m);break;case 14:m==r.Type.STRING?this.s3_secret_key=l.readString():l.skip(m);break;case 15:m==r.Type.STRING?this.s3_region=l.readString():l.skip(m);break;case 16:m==r.Type.I32?this.geo_coords_encoding=l.readI32():l.skip(m);break;case 17:m==r.Type.I32?this.geo_coords_comp_param=l.readI32():l.skip(m);break;case 18:m==r.Type.I32?this.geo_coords_type=l.readI32():l.skip(m);break;case 19:m==r.Type.I32?this.geo_coords_srid=l.readI32():l.skip(m);break;case 20:m==r.Type.BOOL?this.sanitize_column_names=l.readBool():l.skip(m);break;case 21:m==r.Type.STRING?this.geo_layer_name=l.readString():l.skip(m);break;case 22:m==r.Type.STRING?this.s3_endpoint=l.readString():l.skip(m);break;case 23:m==r.Type.BOOL?this.geo_assign_render_groups=l.readBool():l.skip(m);break;case 24:m==r.Type.BOOL?this.geo_explode_collections=l.readBool():l.skip(m);break;case 25:m==r.Type.I32?this.source_srid=l.readI32():l.skip(m);break;case 26:m==r.Type.STRING?this.s3_session_token=l.readString():l.skip(m);break;case 27:m==r.Type.I32?this.raster_point_type=l.readI32():l.skip(m);break;case 28:m==r.Type.STRING?this.raster_import_bands=l.readString():l.skip(m);break;case 29:m==r.Type.I32?this.raster_scanlines_per_thread=l.readI32():l.skip(m);break;case 30:m==r.Type.I32?this.raster_point_transform=l.readI32():l.skip(m);break;case 31:m==r.Type.BOOL?this.raster_point_compute_angle=l.readBool():l.skip(m);break;case 32:m==r.Type.STRING?this.raster_import_dimensions=l.readString():l.skip(m);break;case 33:m==r.Type.STRING?this.odbc_dsn=l.readString():l.skip(m);break;case 34:m==r.Type.STRING?this.odbc_connection_string=l.readString():l.skip(m);break;case 35:m==r.Type.STRING?this.odbc_sql_select=l.readString():l.skip(m);break;case 36:m==r.Type.STRING?this.odbc_sql_order_by=l.readString():l.skip(m);break;case 37:m==r.Type.STRING?this.odbc_username=l.readString():l.skip(m);break;case 38:m==r.Type.STRING?this.odbc_password=l.readString():l.skip(m);break;case 39:m==r.Type.STRING?this.odbc_credential_string=l.readString():l.skip(m);break;case 40:m==r.Type.STRING?this.add_metadata_columns=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCopyParams"),this.delimiter!==null&&this.delimiter!==void 0&&(l.writeFieldBegin("delimiter",r.Type.STRING,1),l.writeString(this.delimiter),l.writeFieldEnd()),this.null_str!==null&&this.null_str!==void 0&&(l.writeFieldBegin("null_str",r.Type.STRING,2),l.writeString(this.null_str),l.writeFieldEnd()),this.has_header!==null&&this.has_header!==void 0&&(l.writeFieldBegin("has_header",r.Type.I32,3),l.writeI32(this.has_header),l.writeFieldEnd()),this.quoted!==null&&this.quoted!==void 0&&(l.writeFieldBegin("quoted",r.Type.BOOL,4),l.writeBool(this.quoted),l.writeFieldEnd()),this.quote!==null&&this.quote!==void 0&&(l.writeFieldBegin("quote",r.Type.STRING,5),l.writeString(this.quote),l.writeFieldEnd()),this.escape!==null&&this.escape!==void 0&&(l.writeFieldBegin("escape",r.Type.STRING,6),l.writeString(this.escape),l.writeFieldEnd()),this.line_delim!==null&&this.line_delim!==void 0&&(l.writeFieldBegin("line_delim",r.Type.STRING,7),l.writeString(this.line_delim),l.writeFieldEnd()),this.array_delim!==null&&this.array_delim!==void 0&&(l.writeFieldBegin("array_delim",r.Type.STRING,8),l.writeString(this.array_delim),l.writeFieldEnd()),this.array_begin!==null&&this.array_begin!==void 0&&(l.writeFieldBegin("array_begin",r.Type.STRING,9),l.writeString(this.array_begin),l.writeFieldEnd()),this.array_end!==null&&this.array_end!==void 0&&(l.writeFieldBegin("array_end",r.Type.STRING,10),l.writeString(this.array_end),l.writeFieldEnd()),this.threads!==null&&this.threads!==void 0&&(l.writeFieldBegin("threads",r.Type.I32,11),l.writeI32(this.threads),l.writeFieldEnd()),this.source_type!==null&&this.source_type!==void 0&&(l.writeFieldBegin("source_type",r.Type.I32,12),l.writeI32(this.source_type),l.writeFieldEnd()),this.s3_access_key!==null&&this.s3_access_key!==void 0&&(l.writeFieldBegin("s3_access_key",r.Type.STRING,13),l.writeString(this.s3_access_key),l.writeFieldEnd()),this.s3_secret_key!==null&&this.s3_secret_key!==void 0&&(l.writeFieldBegin("s3_secret_key",r.Type.STRING,14),l.writeString(this.s3_secret_key),l.writeFieldEnd()),this.s3_region!==null&&this.s3_region!==void 0&&(l.writeFieldBegin("s3_region",r.Type.STRING,15),l.writeString(this.s3_region),l.writeFieldEnd()),this.geo_coords_encoding!==null&&this.geo_coords_encoding!==void 0&&(l.writeFieldBegin("geo_coords_encoding",r.Type.I32,16),l.writeI32(this.geo_coords_encoding),l.writeFieldEnd()),this.geo_coords_comp_param!==null&&this.geo_coords_comp_param!==void 0&&(l.writeFieldBegin("geo_coords_comp_param",r.Type.I32,17),l.writeI32(this.geo_coords_comp_param),l.writeFieldEnd()),this.geo_coords_type!==null&&this.geo_coords_type!==void 0&&(l.writeFieldBegin("geo_coords_type",r.Type.I32,18),l.writeI32(this.geo_coords_type),l.writeFieldEnd()),this.geo_coords_srid!==null&&this.geo_coords_srid!==void 0&&(l.writeFieldBegin("geo_coords_srid",r.Type.I32,19),l.writeI32(this.geo_coords_srid),l.writeFieldEnd()),this.sanitize_column_names!==null&&this.sanitize_column_names!==void 0&&(l.writeFieldBegin("sanitize_column_names",r.Type.BOOL,20),l.writeBool(this.sanitize_column_names),l.writeFieldEnd()),this.geo_layer_name!==null&&this.geo_layer_name!==void 0&&(l.writeFieldBegin("geo_layer_name",r.Type.STRING,21),l.writeString(this.geo_layer_name),l.writeFieldEnd()),this.s3_endpoint!==null&&this.s3_endpoint!==void 0&&(l.writeFieldBegin("s3_endpoint",r.Type.STRING,22),l.writeString(this.s3_endpoint),l.writeFieldEnd()),this.geo_assign_render_groups!==null&&this.geo_assign_render_groups!==void 0&&(l.writeFieldBegin("geo_assign_render_groups",r.Type.BOOL,23),l.writeBool(this.geo_assign_render_groups),l.writeFieldEnd()),this.geo_explode_collections!==null&&this.geo_explode_collections!==void 0&&(l.writeFieldBegin("geo_explode_collections",r.Type.BOOL,24),l.writeBool(this.geo_explode_collections),l.writeFieldEnd()),this.source_srid!==null&&this.source_srid!==void 0&&(l.writeFieldBegin("source_srid",r.Type.I32,25),l.writeI32(this.source_srid),l.writeFieldEnd()),this.s3_session_token!==null&&this.s3_session_token!==void 0&&(l.writeFieldBegin("s3_session_token",r.Type.STRING,26),l.writeString(this.s3_session_token),l.writeFieldEnd()),this.raster_point_type!==null&&this.raster_point_type!==void 0&&(l.writeFieldBegin("raster_point_type",r.Type.I32,27),l.writeI32(this.raster_point_type),l.writeFieldEnd()),this.raster_import_bands!==null&&this.raster_import_bands!==void 0&&(l.writeFieldBegin("raster_import_bands",r.Type.STRING,28),l.writeString(this.raster_import_bands),l.writeFieldEnd()),this.raster_scanlines_per_thread!==null&&this.raster_scanlines_per_thread!==void 0&&(l.writeFieldBegin("raster_scanlines_per_thread",r.Type.I32,29),l.writeI32(this.raster_scanlines_per_thread),l.writeFieldEnd()),this.raster_point_transform!==null&&this.raster_point_transform!==void 0&&(l.writeFieldBegin("raster_point_transform",r.Type.I32,30),l.writeI32(this.raster_point_transform),l.writeFieldEnd()),this.raster_point_compute_angle!==null&&this.raster_point_compute_angle!==void 0&&(l.writeFieldBegin("raster_point_compute_angle",r.Type.BOOL,31),l.writeBool(this.raster_point_compute_angle),l.writeFieldEnd()),this.raster_import_dimensions!==null&&this.raster_import_dimensions!==void 0&&(l.writeFieldBegin("raster_import_dimensions",r.Type.STRING,32),l.writeString(this.raster_import_dimensions),l.writeFieldEnd()),this.odbc_dsn!==null&&this.odbc_dsn!==void 0&&(l.writeFieldBegin("odbc_dsn",r.Type.STRING,33),l.writeString(this.odbc_dsn),l.writeFieldEnd()),this.odbc_connection_string!==null&&this.odbc_connection_string!==void 0&&(l.writeFieldBegin("odbc_connection_string",r.Type.STRING,34),l.writeString(this.odbc_connection_string),l.writeFieldEnd()),this.odbc_sql_select!==null&&this.odbc_sql_select!==void 0&&(l.writeFieldBegin("odbc_sql_select",r.Type.STRING,35),l.writeString(this.odbc_sql_select),l.writeFieldEnd()),this.odbc_sql_order_by!==null&&this.odbc_sql_order_by!==void 0&&(l.writeFieldBegin("odbc_sql_order_by",r.Type.STRING,36),l.writeString(this.odbc_sql_order_by),l.writeFieldEnd()),this.odbc_username!==null&&this.odbc_username!==void 0&&(l.writeFieldBegin("odbc_username",r.Type.STRING,37),l.writeString(this.odbc_username),l.writeFieldEnd()),this.odbc_password!==null&&this.odbc_password!==void 0&&(l.writeFieldBegin("odbc_password",r.Type.STRING,38),l.writeString(this.odbc_password),l.writeFieldEnd()),this.odbc_credential_string!==null&&this.odbc_credential_string!==void 0&&(l.writeFieldBegin("odbc_credential_string",r.Type.STRING,39),l.writeString(this.odbc_credential_string),l.writeFieldEnd()),this.add_metadata_columns!==null&&this.add_metadata_columns!==void 0&&(l.writeFieldBegin("add_metadata_columns",r.Type.STRING,40),l.writeString(this.add_metadata_columns),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCreateParams=class{constructor(l){this.is_replicated=null,l&&l.is_replicated!==void 0&&l.is_replicated!==null&&(this.is_replicated=l.is_replicated)}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.BOOL?this.is_replicated=l.readBool():l.skip(m);break;case 0:l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCreateParams"),this.is_replicated!==null&&this.is_replicated!==void 0&&(l.writeFieldBegin("is_replicated",r.Type.BOOL,1),l.writeBool(this.is_replicated),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDetectResult=class{constructor(l){this.row_set=null,this.copy_params=null,l&&(l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new _.TRowSet(l.row_set)),l.copy_params!==void 0&&l.copy_params!==null&&(this.copy_params=new _.TCopyParams(l.copy_params)))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRUCT?(this.row_set=new _.TRowSet,this.row_set.read(l)):l.skip(m);break;case 2:m==r.Type.STRUCT?(this.copy_params=new _.TCopyParams,this.copy_params.read(l)):l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDetectResult"),this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",r.Type.STRUCT,1),this.row_set.write(l),l.writeFieldEnd()),this.copy_params!==null&&this.copy_params!==void 0&&(l.writeFieldBegin("copy_params",r.Type.STRUCT,2),this.copy_params.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TImportStatus=class{constructor(l){this.elapsed=null,this.rows_completed=null,this.rows_estimated=null,this.rows_rejected=null,l&&(l.elapsed!==void 0&&l.elapsed!==null&&(this.elapsed=l.elapsed),l.rows_completed!==void 0&&l.rows_completed!==null&&(this.rows_completed=l.rows_completed),l.rows_estimated!==void 0&&l.rows_estimated!==null&&(this.rows_estimated=l.rows_estimated),l.rows_rejected!==void 0&&l.rows_rejected!==null&&(this.rows_rejected=l.rows_rejected))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I64?this.elapsed=l.readI64():l.skip(m);break;case 2:m==r.Type.I64?this.rows_completed=l.readI64():l.skip(m);break;case 3:m==r.Type.I64?this.rows_estimated=l.readI64():l.skip(m);break;case 4:m==r.Type.I64?this.rows_rejected=l.readI64():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TImportStatus"),this.elapsed!==null&&this.elapsed!==void 0&&(l.writeFieldBegin("elapsed",r.Type.I64,1),l.writeI64(this.elapsed),l.writeFieldEnd()),this.rows_completed!==null&&this.rows_completed!==void 0&&(l.writeFieldBegin("rows_completed",r.Type.I64,2),l.writeI64(this.rows_completed),l.writeFieldEnd()),this.rows_estimated!==null&&this.rows_estimated!==void 0&&(l.writeFieldBegin("rows_estimated",r.Type.I64,3),l.writeI64(this.rows_estimated),l.writeFieldEnd()),this.rows_rejected!==null&&this.rows_rejected!==void 0&&(l.writeFieldBegin("rows_rejected",r.Type.I64,4),l.writeI64(this.rows_rejected),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TFrontendView=class{constructor(l){this.view_name=null,this.view_state=null,this.image_hash=null,this.update_time=null,this.view_metadata=null,l&&(l.view_name!==void 0&&l.view_name!==null&&(this.view_name=l.view_name),l.view_state!==void 0&&l.view_state!==null&&(this.view_state=l.view_state),l.image_hash!==void 0&&l.image_hash!==null&&(this.image_hash=l.image_hash),l.update_time!==void 0&&l.update_time!==null&&(this.update_time=l.update_time),l.view_metadata!==void 0&&l.view_metadata!==null&&(this.view_metadata=l.view_metadata))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.view_name=l.readString():l.skip(m);break;case 2:m==r.Type.STRING?this.view_state=l.readString():l.skip(m);break;case 3:m==r.Type.STRING?this.image_hash=l.readString():l.skip(m);break;case 4:m==r.Type.STRING?this.update_time=l.readString():l.skip(m);break;case 5:m==r.Type.STRING?this.view_metadata=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TFrontendView"),this.view_name!==null&&this.view_name!==void 0&&(l.writeFieldBegin("view_name",r.Type.STRING,1),l.writeString(this.view_name),l.writeFieldEnd()),this.view_state!==null&&this.view_state!==void 0&&(l.writeFieldBegin("view_state",r.Type.STRING,2),l.writeString(this.view_state),l.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(l.writeFieldBegin("image_hash",r.Type.STRING,3),l.writeString(this.image_hash),l.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(l.writeFieldBegin("update_time",r.Type.STRING,4),l.writeString(this.update_time),l.writeFieldEnd()),this.view_metadata!==null&&this.view_metadata!==void 0&&(l.writeFieldBegin("view_metadata",r.Type.STRING,5),l.writeString(this.view_metadata),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TServerStatus=class{constructor(l){this.read_only=null,this.version=null,this.rendering_enabled=null,this.start_time=null,this.edition=null,this.host_name=null,this.poly_rendering_enabled=null,this.role=null,this.renderer_status_json=null,l&&(l.read_only!==void 0&&l.read_only!==null&&(this.read_only=l.read_only),l.version!==void 0&&l.version!==null&&(this.version=l.version),l.rendering_enabled!==void 0&&l.rendering_enabled!==null&&(this.rendering_enabled=l.rendering_enabled),l.start_time!==void 0&&l.start_time!==null&&(this.start_time=l.start_time),l.edition!==void 0&&l.edition!==null&&(this.edition=l.edition),l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.poly_rendering_enabled!==void 0&&l.poly_rendering_enabled!==null&&(this.poly_rendering_enabled=l.poly_rendering_enabled),l.role!==void 0&&l.role!==null&&(this.role=l.role),l.renderer_status_json!==void 0&&l.renderer_status_json!==null&&(this.renderer_status_json=l.renderer_status_json))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.BOOL?this.read_only=l.readBool():l.skip(m);break;case 2:m==r.Type.STRING?this.version=l.readString():l.skip(m);break;case 3:m==r.Type.BOOL?this.rendering_enabled=l.readBool():l.skip(m);break;case 4:m==r.Type.I64?this.start_time=l.readI64():l.skip(m);break;case 5:m==r.Type.STRING?this.edition=l.readString():l.skip(m);break;case 6:m==r.Type.STRING?this.host_name=l.readString():l.skip(m);break;case 7:m==r.Type.BOOL?this.poly_rendering_enabled=l.readBool():l.skip(m);break;case 8:m==r.Type.I32?this.role=l.readI32():l.skip(m);break;case 9:m==r.Type.STRING?this.renderer_status_json=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TServerStatus"),this.read_only!==null&&this.read_only!==void 0&&(l.writeFieldBegin("read_only",r.Type.BOOL,1),l.writeBool(this.read_only),l.writeFieldEnd()),this.version!==null&&this.version!==void 0&&(l.writeFieldBegin("version",r.Type.STRING,2),l.writeString(this.version),l.writeFieldEnd()),this.rendering_enabled!==null&&this.rendering_enabled!==void 0&&(l.writeFieldBegin("rendering_enabled",r.Type.BOOL,3),l.writeBool(this.rendering_enabled),l.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(l.writeFieldBegin("start_time",r.Type.I64,4),l.writeI64(this.start_time),l.writeFieldEnd()),this.edition!==null&&this.edition!==void 0&&(l.writeFieldBegin("edition",r.Type.STRING,5),l.writeString(this.edition),l.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",r.Type.STRING,6),l.writeString(this.host_name),l.writeFieldEnd()),this.poly_rendering_enabled!==null&&this.poly_rendering_enabled!==void 0&&(l.writeFieldBegin("poly_rendering_enabled",r.Type.BOOL,7),l.writeBool(this.poly_rendering_enabled),l.writeFieldEnd()),this.role!==null&&this.role!==void 0&&(l.writeFieldBegin("role",r.Type.I32,8),l.writeI32(this.role),l.writeFieldEnd()),this.renderer_status_json!==null&&this.renderer_status_json!==void 0&&(l.writeFieldBegin("renderer_status_json",r.Type.STRING,9),l.writeString(this.renderer_status_json),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPixel=class{constructor(l){this.x=null,this.y=null,l&&(l.x!==void 0&&l.x!==null&&(this.x=l.x),l.y!==void 0&&l.y!==null&&(this.y=l.y))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I64?this.x=l.readI64():l.skip(m);break;case 2:m==r.Type.I64?this.y=l.readI64():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TPixel"),this.x!==null&&this.x!==void 0&&(l.writeFieldBegin("x",r.Type.I64,1),l.writeI64(this.x),l.writeFieldEnd()),this.y!==null&&this.y!==void 0&&(l.writeFieldBegin("y",r.Type.I64,2),l.writeI64(this.y),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPixelTableRowResult=class{constructor(l){this.pixel=null,this.vega_table_name=null,this.table_id=null,this.row_id=null,this.row_set=null,this.nonce=null,l&&(l.pixel!==void 0&&l.pixel!==null&&(this.pixel=new _.TPixel(l.pixel)),l.vega_table_name!==void 0&&l.vega_table_name!==null&&(this.vega_table_name=l.vega_table_name),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=r.copyList(l.table_id,[null])),l.row_id!==void 0&&l.row_id!==null&&(this.row_id=r.copyList(l.row_id,[null])),l.row_set!==void 0&&l.row_set!==null&&(this.row_set=new _.TRowSet(l.row_set)),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRUCT?(this.pixel=new _.TPixel,this.pixel.read(l)):l.skip(m);break;case 2:m==r.Type.STRING?this.vega_table_name=l.readString():l.skip(m);break;case 3:if(m==r.Type.LIST){this.table_id=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readI64(),this.table_id.push(F)}l.readListEnd()}else l.skip(m);break;case 4:if(m==r.Type.LIST){this.row_id=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readI64(),this.row_id.push(F)}l.readListEnd()}else l.skip(m);break;case 5:m==r.Type.STRUCT?(this.row_set=new _.TRowSet,this.row_set.read(l)):l.skip(m);break;case 6:m==r.Type.STRING?this.nonce=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TPixelTableRowResult"),this.pixel!==null&&this.pixel!==void 0&&(l.writeFieldBegin("pixel",r.Type.STRUCT,1),this.pixel.write(l),l.writeFieldEnd()),this.vega_table_name!==null&&this.vega_table_name!==void 0&&(l.writeFieldBegin("vega_table_name",r.Type.STRING,2),l.writeString(this.vega_table_name),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0){l.writeFieldBegin("table_id",r.Type.LIST,3),l.writeListBegin(r.Type.I64,this.table_id.length);for(let b in this.table_id)this.table_id.hasOwnProperty(b)&&(b=this.table_id[b],l.writeI64(b));l.writeListEnd(),l.writeFieldEnd()}if(this.row_id!==null&&this.row_id!==void 0){l.writeFieldBegin("row_id",r.Type.LIST,4),l.writeListBegin(r.Type.I64,this.row_id.length);for(let b in this.row_id)this.row_id.hasOwnProperty(b)&&(b=this.row_id[b],l.writeI64(b));l.writeListEnd(),l.writeFieldEnd()}this.row_set!==null&&this.row_set!==void 0&&(l.writeFieldBegin("row_set",r.Type.STRUCT,5),this.row_set.write(l),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",r.Type.STRING,6),l.writeString(this.nonce),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderResult=class{constructor(l){this.image=null,this.nonce=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,this.vega_metadata=null,l&&(l.image!==void 0&&l.image!==null&&(this.image=l.image),l.nonce!==void 0&&l.nonce!==null&&(this.nonce=l.nonce),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms),l.vega_metadata!==void 0&&l.vega_metadata!==null&&(this.vega_metadata=l.vega_metadata))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.image=l.readBinary():l.skip(m);break;case 2:m==r.Type.STRING?this.nonce=l.readString():l.skip(m);break;case 3:m==r.Type.I64?this.execution_time_ms=l.readI64():l.skip(m);break;case 4:m==r.Type.I64?this.render_time_ms=l.readI64():l.skip(m);break;case 5:m==r.Type.I64?this.total_time_ms=l.readI64():l.skip(m);break;case 6:m==r.Type.STRING?this.vega_metadata=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderResult"),this.image!==null&&this.image!==void 0&&(l.writeFieldBegin("image",r.Type.STRING,1),l.writeBinary(this.image),l.writeFieldEnd()),this.nonce!==null&&this.nonce!==void 0&&(l.writeFieldBegin("nonce",r.Type.STRING,2),l.writeString(this.nonce),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",r.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",r.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",r.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),this.vega_metadata!==null&&this.vega_metadata!==void 0&&(l.writeFieldBegin("vega_metadata",r.Type.STRING,6),l.writeString(this.vega_metadata),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TGpuSpecification=class{constructor(l){this.num_sm=null,this.clock_frequency_kHz=null,this.memory=null,this.compute_capability_major=null,this.compute_capability_minor=null,l&&(l.num_sm!==void 0&&l.num_sm!==null&&(this.num_sm=l.num_sm),l.clock_frequency_kHz!==void 0&&l.clock_frequency_kHz!==null&&(this.clock_frequency_kHz=l.clock_frequency_kHz),l.memory!==void 0&&l.memory!==null&&(this.memory=l.memory),l.compute_capability_major!==void 0&&l.compute_capability_major!==null&&(this.compute_capability_major=l.compute_capability_major),l.compute_capability_minor!==void 0&&l.compute_capability_minor!==null&&(this.compute_capability_minor=l.compute_capability_minor))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.num_sm=l.readI32():l.skip(m);break;case 2:m==r.Type.I64?this.clock_frequency_kHz=l.readI64():l.skip(m);break;case 3:m==r.Type.I64?this.memory=l.readI64():l.skip(m);break;case 4:m==r.Type.I16?this.compute_capability_major=l.readI16():l.skip(m);break;case 5:m==r.Type.I16?this.compute_capability_minor=l.readI16():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TGpuSpecification"),this.num_sm!==null&&this.num_sm!==void 0&&(l.writeFieldBegin("num_sm",r.Type.I32,1),l.writeI32(this.num_sm),l.writeFieldEnd()),this.clock_frequency_kHz!==null&&this.clock_frequency_kHz!==void 0&&(l.writeFieldBegin("clock_frequency_kHz",r.Type.I64,2),l.writeI64(this.clock_frequency_kHz),l.writeFieldEnd()),this.memory!==null&&this.memory!==void 0&&(l.writeFieldBegin("memory",r.Type.I64,3),l.writeI64(this.memory),l.writeFieldEnd()),this.compute_capability_major!==null&&this.compute_capability_major!==void 0&&(l.writeFieldBegin("compute_capability_major",r.Type.I16,4),l.writeI16(this.compute_capability_major),l.writeFieldEnd()),this.compute_capability_minor!==null&&this.compute_capability_minor!==void 0&&(l.writeFieldBegin("compute_capability_minor",r.Type.I16,5),l.writeI16(this.compute_capability_minor),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.THardwareInfo=class{constructor(l){this.num_gpu_hw=null,this.num_cpu_hw=null,this.num_gpu_allocated=null,this.start_gpu=null,this.host_name=null,this.gpu_info=null,l&&(l.num_gpu_hw!==void 0&&l.num_gpu_hw!==null&&(this.num_gpu_hw=l.num_gpu_hw),l.num_cpu_hw!==void 0&&l.num_cpu_hw!==null&&(this.num_cpu_hw=l.num_cpu_hw),l.num_gpu_allocated!==void 0&&l.num_gpu_allocated!==null&&(this.num_gpu_allocated=l.num_gpu_allocated),l.start_gpu!==void 0&&l.start_gpu!==null&&(this.start_gpu=l.start_gpu),l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.gpu_info!==void 0&&l.gpu_info!==null&&(this.gpu_info=r.copyList(l.gpu_info,[_.TGpuSpecification])))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I16?this.num_gpu_hw=l.readI16():l.skip(m);break;case 2:m==r.Type.I16?this.num_cpu_hw=l.readI16():l.skip(m);break;case 3:m==r.Type.I16?this.num_gpu_allocated=l.readI16():l.skip(m);break;case 4:m==r.Type.I16?this.start_gpu=l.readI16():l.skip(m);break;case 5:m==r.Type.STRING?this.host_name=l.readString():l.skip(m);break;case 6:if(m==r.Type.LIST){this.gpu_info=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TGpuSpecification,F.read(l),this.gpu_info.push(F)}l.readListEnd()}else l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("THardwareInfo"),this.num_gpu_hw!==null&&this.num_gpu_hw!==void 0&&(l.writeFieldBegin("num_gpu_hw",r.Type.I16,1),l.writeI16(this.num_gpu_hw),l.writeFieldEnd()),this.num_cpu_hw!==null&&this.num_cpu_hw!==void 0&&(l.writeFieldBegin("num_cpu_hw",r.Type.I16,2),l.writeI16(this.num_cpu_hw),l.writeFieldEnd()),this.num_gpu_allocated!==null&&this.num_gpu_allocated!==void 0&&(l.writeFieldBegin("num_gpu_allocated",r.Type.I16,3),l.writeI16(this.num_gpu_allocated),l.writeFieldEnd()),this.start_gpu!==null&&this.start_gpu!==void 0&&(l.writeFieldBegin("start_gpu",r.Type.I16,4),l.writeI16(this.start_gpu),l.writeFieldEnd()),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",r.Type.STRING,5),l.writeString(this.host_name),l.writeFieldEnd()),this.gpu_info!==null&&this.gpu_info!==void 0){l.writeFieldBegin("gpu_info",r.Type.LIST,6),l.writeListBegin(r.Type.STRUCT,this.gpu_info.length);for(let b in this.gpu_info)this.gpu_info.hasOwnProperty(b)&&(b=this.gpu_info[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TClusterHardwareInfo=class{constructor(l){this.hardware_info=null,l&&l.hardware_info!==void 0&&l.hardware_info!==null&&(this.hardware_info=r.copyList(l.hardware_info,[_.THardwareInfo]))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:if(m==r.Type.LIST){this.hardware_info=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.THardwareInfo,F.read(l),this.hardware_info.push(F)}l.readListEnd()}else l.skip(m);break;case 0:l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TClusterHardwareInfo"),this.hardware_info!==null&&this.hardware_info!==void 0){l.writeFieldBegin("hardware_info",r.Type.LIST,1),l.writeListBegin(r.Type.STRUCT,this.hardware_info.length);for(let b in this.hardware_info)this.hardware_info.hasOwnProperty(b)&&(b=this.hardware_info[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TMemoryData=class{constructor(l){this.slab=null,this.start_page=null,this.num_pages=null,this.touch=null,this.chunk_key=null,this.buffer_epoch=null,this.is_free=null,l&&(l.slab!==void 0&&l.slab!==null&&(this.slab=l.slab),l.start_page!==void 0&&l.start_page!==null&&(this.start_page=l.start_page),l.num_pages!==void 0&&l.num_pages!==null&&(this.num_pages=l.num_pages),l.touch!==void 0&&l.touch!==null&&(this.touch=l.touch),l.chunk_key!==void 0&&l.chunk_key!==null&&(this.chunk_key=r.copyList(l.chunk_key,[null])),l.buffer_epoch!==void 0&&l.buffer_epoch!==null&&(this.buffer_epoch=l.buffer_epoch),l.is_free!==void 0&&l.is_free!==null&&(this.is_free=l.is_free))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I64?this.slab=l.readI64():l.skip(m);break;case 2:m==r.Type.I32?this.start_page=l.readI32():l.skip(m);break;case 3:m==r.Type.I64?this.num_pages=l.readI64():l.skip(m);break;case 4:m==r.Type.I32?this.touch=l.readI32():l.skip(m);break;case 5:if(m==r.Type.LIST){this.chunk_key=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readI64(),this.chunk_key.push(F)}l.readListEnd()}else l.skip(m);break;case 6:m==r.Type.I32?this.buffer_epoch=l.readI32():l.skip(m);break;case 7:m==r.Type.BOOL?this.is_free=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TMemoryData"),this.slab!==null&&this.slab!==void 0&&(l.writeFieldBegin("slab",r.Type.I64,1),l.writeI64(this.slab),l.writeFieldEnd()),this.start_page!==null&&this.start_page!==void 0&&(l.writeFieldBegin("start_page",r.Type.I32,2),l.writeI32(this.start_page),l.writeFieldEnd()),this.num_pages!==null&&this.num_pages!==void 0&&(l.writeFieldBegin("num_pages",r.Type.I64,3),l.writeI64(this.num_pages),l.writeFieldEnd()),this.touch!==null&&this.touch!==void 0&&(l.writeFieldBegin("touch",r.Type.I32,4),l.writeI32(this.touch),l.writeFieldEnd()),this.chunk_key!==null&&this.chunk_key!==void 0){l.writeFieldBegin("chunk_key",r.Type.LIST,5),l.writeListBegin(r.Type.I64,this.chunk_key.length);for(let b in this.chunk_key)this.chunk_key.hasOwnProperty(b)&&(b=this.chunk_key[b],l.writeI64(b));l.writeListEnd(),l.writeFieldEnd()}this.buffer_epoch!==null&&this.buffer_epoch!==void 0&&(l.writeFieldBegin("buffer_epoch",r.Type.I32,6),l.writeI32(this.buffer_epoch),l.writeFieldEnd()),this.is_free!==null&&this.is_free!==void 0&&(l.writeFieldBegin("is_free",r.Type.BOOL,7),l.writeBool(this.is_free),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TNodeMemoryInfo=class{constructor(l){this.host_name=null,this.page_size=null,this.max_num_pages=null,this.num_pages_allocated=null,this.is_allocation_capped=null,this.node_memory_data=null,l&&(l.host_name!==void 0&&l.host_name!==null&&(this.host_name=l.host_name),l.page_size!==void 0&&l.page_size!==null&&(this.page_size=l.page_size),l.max_num_pages!==void 0&&l.max_num_pages!==null&&(this.max_num_pages=l.max_num_pages),l.num_pages_allocated!==void 0&&l.num_pages_allocated!==null&&(this.num_pages_allocated=l.num_pages_allocated),l.is_allocation_capped!==void 0&&l.is_allocation_capped!==null&&(this.is_allocation_capped=l.is_allocation_capped),l.node_memory_data!==void 0&&l.node_memory_data!==null&&(this.node_memory_data=r.copyList(l.node_memory_data,[_.TMemoryData])))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.host_name=l.readString():l.skip(m);break;case 2:m==r.Type.I64?this.page_size=l.readI64():l.skip(m);break;case 3:m==r.Type.I64?this.max_num_pages=l.readI64():l.skip(m);break;case 4:m==r.Type.I64?this.num_pages_allocated=l.readI64():l.skip(m);break;case 5:m==r.Type.BOOL?this.is_allocation_capped=l.readBool():l.skip(m);break;case 6:if(m==r.Type.LIST){this.node_memory_data=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TMemoryData,F.read(l),this.node_memory_data.push(F)}l.readListEnd()}else l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TNodeMemoryInfo"),this.host_name!==null&&this.host_name!==void 0&&(l.writeFieldBegin("host_name",r.Type.STRING,1),l.writeString(this.host_name),l.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(l.writeFieldBegin("page_size",r.Type.I64,2),l.writeI64(this.page_size),l.writeFieldEnd()),this.max_num_pages!==null&&this.max_num_pages!==void 0&&(l.writeFieldBegin("max_num_pages",r.Type.I64,3),l.writeI64(this.max_num_pages),l.writeFieldEnd()),this.num_pages_allocated!==null&&this.num_pages_allocated!==void 0&&(l.writeFieldBegin("num_pages_allocated",r.Type.I64,4),l.writeI64(this.num_pages_allocated),l.writeFieldEnd()),this.is_allocation_capped!==null&&this.is_allocation_capped!==void 0&&(l.writeFieldBegin("is_allocation_capped",r.Type.BOOL,5),l.writeBool(this.is_allocation_capped),l.writeFieldEnd()),this.node_memory_data!==null&&this.node_memory_data!==void 0){l.writeFieldBegin("node_memory_data",r.Type.LIST,6),l.writeListBegin(r.Type.STRUCT,this.node_memory_data.length);for(let b in this.node_memory_data)this.node_memory_data.hasOwnProperty(b)&&(b=this.node_memory_data[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableMeta=class{constructor(l){this.table_name=null,this.num_cols=null,this.is_view=null,this.is_replicated=null,this.shard_count=null,this.max_rows=null,this.table_id=null,this.max_table_id=null,this.col_types=null,this.col_names=null,l&&(l.table_name!==void 0&&l.table_name!==null&&(this.table_name=l.table_name),l.num_cols!==void 0&&l.num_cols!==null&&(this.num_cols=l.num_cols),l.is_view!==void 0&&l.is_view!==null&&(this.is_view=l.is_view),l.is_replicated!==void 0&&l.is_replicated!==null&&(this.is_replicated=l.is_replicated),l.shard_count!==void 0&&l.shard_count!==null&&(this.shard_count=l.shard_count),l.max_rows!==void 0&&l.max_rows!==null&&(this.max_rows=l.max_rows),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.max_table_id!==void 0&&l.max_table_id!==null&&(this.max_table_id=l.max_table_id),l.col_types!==void 0&&l.col_types!==null&&(this.col_types=r.copyList(l.col_types,[h.TTypeInfo])),l.col_names!==void 0&&l.col_names!==null&&(this.col_names=r.copyList(l.col_names,[null])))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.table_name=l.readString():l.skip(m);break;case 2:m==r.Type.I64?this.num_cols=l.readI64():l.skip(m);break;case 4:m==r.Type.BOOL?this.is_view=l.readBool():l.skip(m);break;case 5:m==r.Type.BOOL?this.is_replicated=l.readBool():l.skip(m);break;case 6:m==r.Type.I64?this.shard_count=l.readI64():l.skip(m);break;case 7:m==r.Type.I64?this.max_rows=l.readI64():l.skip(m);break;case 8:m==r.Type.I64?this.table_id=l.readI64():l.skip(m);break;case 9:m==r.Type.I64?this.max_table_id=l.readI64():l.skip(m);break;case 10:if(m==r.Type.LIST){this.col_types=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new h.TTypeInfo,F.read(l),this.col_types.push(F)}l.readListEnd()}else l.skip(m);break;case 11:if(m==r.Type.LIST){this.col_names=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readString(),this.col_names.push(F)}l.readListEnd()}else l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TTableMeta"),this.table_name!==null&&this.table_name!==void 0&&(l.writeFieldBegin("table_name",r.Type.STRING,1),l.writeString(this.table_name),l.writeFieldEnd()),this.num_cols!==null&&this.num_cols!==void 0&&(l.writeFieldBegin("num_cols",r.Type.I64,2),l.writeI64(this.num_cols),l.writeFieldEnd()),this.is_view!==null&&this.is_view!==void 0&&(l.writeFieldBegin("is_view",r.Type.BOOL,4),l.writeBool(this.is_view),l.writeFieldEnd()),this.is_replicated!==null&&this.is_replicated!==void 0&&(l.writeFieldBegin("is_replicated",r.Type.BOOL,5),l.writeBool(this.is_replicated),l.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(l.writeFieldBegin("shard_count",r.Type.I64,6),l.writeI64(this.shard_count),l.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(l.writeFieldBegin("max_rows",r.Type.I64,7),l.writeI64(this.max_rows),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",r.Type.I64,8),l.writeI64(this.table_id),l.writeFieldEnd()),this.max_table_id!==null&&this.max_table_id!==void 0&&(l.writeFieldBegin("max_table_id",r.Type.I64,9),l.writeI64(this.max_table_id),l.writeFieldEnd()),this.col_types!==null&&this.col_types!==void 0){l.writeFieldBegin("col_types",r.Type.LIST,10),l.writeListBegin(r.Type.STRUCT,this.col_types.length);for(let b in this.col_types)this.col_types.hasOwnProperty(b)&&(b=this.col_types[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.col_names!==null&&this.col_names!==void 0){l.writeFieldBegin("col_names",r.Type.LIST,11),l.writeListBegin(r.Type.STRING,this.col_names.length);for(let b in this.col_names)this.col_names.hasOwnProperty(b)&&(b=this.col_names[b],l.writeString(b));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableRefreshInfo=class{constructor(l){this.update_type=null,this.timing_type=null,this.start_date_time=null,this.interval_type=null,this.interval_count=null,this.last_refresh_time=null,this.next_refresh_time=null,l&&(l.update_type!==void 0&&l.update_type!==null&&(this.update_type=l.update_type),l.timing_type!==void 0&&l.timing_type!==null&&(this.timing_type=l.timing_type),l.start_date_time!==void 0&&l.start_date_time!==null&&(this.start_date_time=l.start_date_time),l.interval_type!==void 0&&l.interval_type!==null&&(this.interval_type=l.interval_type),l.interval_count!==void 0&&l.interval_count!==null&&(this.interval_count=l.interval_count),l.last_refresh_time!==void 0&&l.last_refresh_time!==null&&(this.last_refresh_time=l.last_refresh_time),l.next_refresh_time!==void 0&&l.next_refresh_time!==null&&(this.next_refresh_time=l.next_refresh_time))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.update_type=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.timing_type=l.readI32():l.skip(m);break;case 3:m==r.Type.STRING?this.start_date_time=l.readString():l.skip(m);break;case 4:m==r.Type.I32?this.interval_type=l.readI32():l.skip(m);break;case 5:m==r.Type.I64?this.interval_count=l.readI64():l.skip(m);break;case 6:m==r.Type.STRING?this.last_refresh_time=l.readString():l.skip(m);break;case 7:m==r.Type.STRING?this.next_refresh_time=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableRefreshInfo"),this.update_type!==null&&this.update_type!==void 0&&(l.writeFieldBegin("update_type",r.Type.I32,1),l.writeI32(this.update_type),l.writeFieldEnd()),this.timing_type!==null&&this.timing_type!==void 0&&(l.writeFieldBegin("timing_type",r.Type.I32,2),l.writeI32(this.timing_type),l.writeFieldEnd()),this.start_date_time!==null&&this.start_date_time!==void 0&&(l.writeFieldBegin("start_date_time",r.Type.STRING,3),l.writeString(this.start_date_time),l.writeFieldEnd()),this.interval_type!==null&&this.interval_type!==void 0&&(l.writeFieldBegin("interval_type",r.Type.I32,4),l.writeI32(this.interval_type),l.writeFieldEnd()),this.interval_count!==null&&this.interval_count!==void 0&&(l.writeFieldBegin("interval_count",r.Type.I64,5),l.writeI64(this.interval_count),l.writeFieldEnd()),this.last_refresh_time!==null&&this.last_refresh_time!==void 0&&(l.writeFieldBegin("last_refresh_time",r.Type.STRING,6),l.writeString(this.last_refresh_time),l.writeFieldEnd()),this.next_refresh_time!==null&&this.next_refresh_time!==void 0&&(l.writeFieldBegin("next_refresh_time",r.Type.STRING,7),l.writeString(this.next_refresh_time),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableDetails=class{constructor(l){this.row_desc=null,this.fragment_size=null,this.page_size=null,this.max_rows=null,this.view_sql=null,this.shard_count=null,this.key_metainfo=null,this.is_temporary=null,this.partition_detail=null,this.table_type=null,this.refresh_info=null,l&&(l.row_desc!==void 0&&l.row_desc!==null&&(this.row_desc=r.copyList(l.row_desc,[_.TColumnType])),l.fragment_size!==void 0&&l.fragment_size!==null&&(this.fragment_size=l.fragment_size),l.page_size!==void 0&&l.page_size!==null&&(this.page_size=l.page_size),l.max_rows!==void 0&&l.max_rows!==null&&(this.max_rows=l.max_rows),l.view_sql!==void 0&&l.view_sql!==null&&(this.view_sql=l.view_sql),l.shard_count!==void 0&&l.shard_count!==null&&(this.shard_count=l.shard_count),l.key_metainfo!==void 0&&l.key_metainfo!==null&&(this.key_metainfo=l.key_metainfo),l.is_temporary!==void 0&&l.is_temporary!==null&&(this.is_temporary=l.is_temporary),l.partition_detail!==void 0&&l.partition_detail!==null&&(this.partition_detail=l.partition_detail),l.table_type!==void 0&&l.table_type!==null&&(this.table_type=l.table_type),l.refresh_info!==void 0&&l.refresh_info!==null&&(this.refresh_info=new _.TTableRefreshInfo(l.refresh_info)))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:if(m==r.Type.LIST){this.row_desc=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TColumnType,F.read(l),this.row_desc.push(F)}l.readListEnd()}else l.skip(m);break;case 2:m==r.Type.I64?this.fragment_size=l.readI64():l.skip(m);break;case 3:m==r.Type.I64?this.page_size=l.readI64():l.skip(m);break;case 4:m==r.Type.I64?this.max_rows=l.readI64():l.skip(m);break;case 5:m==r.Type.STRING?this.view_sql=l.readString():l.skip(m);break;case 6:m==r.Type.I64?this.shard_count=l.readI64():l.skip(m);break;case 7:m==r.Type.STRING?this.key_metainfo=l.readString():l.skip(m);break;case 8:m==r.Type.BOOL?this.is_temporary=l.readBool():l.skip(m);break;case 9:m==r.Type.I32?this.partition_detail=l.readI32():l.skip(m);break;case 10:m==r.Type.I32?this.table_type=l.readI32():l.skip(m);break;case 11:m==r.Type.STRUCT?(this.refresh_info=new _.TTableRefreshInfo,this.refresh_info.read(l)):l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TTableDetails"),this.row_desc!==null&&this.row_desc!==void 0){l.writeFieldBegin("row_desc",r.Type.LIST,1),l.writeListBegin(r.Type.STRUCT,this.row_desc.length);for(let b in this.row_desc)this.row_desc.hasOwnProperty(b)&&(b=this.row_desc[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}this.fragment_size!==null&&this.fragment_size!==void 0&&(l.writeFieldBegin("fragment_size",r.Type.I64,2),l.writeI64(this.fragment_size),l.writeFieldEnd()),this.page_size!==null&&this.page_size!==void 0&&(l.writeFieldBegin("page_size",r.Type.I64,3),l.writeI64(this.page_size),l.writeFieldEnd()),this.max_rows!==null&&this.max_rows!==void 0&&(l.writeFieldBegin("max_rows",r.Type.I64,4),l.writeI64(this.max_rows),l.writeFieldEnd()),this.view_sql!==null&&this.view_sql!==void 0&&(l.writeFieldBegin("view_sql",r.Type.STRING,5),l.writeString(this.view_sql),l.writeFieldEnd()),this.shard_count!==null&&this.shard_count!==void 0&&(l.writeFieldBegin("shard_count",r.Type.I64,6),l.writeI64(this.shard_count),l.writeFieldEnd()),this.key_metainfo!==null&&this.key_metainfo!==void 0&&(l.writeFieldBegin("key_metainfo",r.Type.STRING,7),l.writeString(this.key_metainfo),l.writeFieldEnd()),this.is_temporary!==null&&this.is_temporary!==void 0&&(l.writeFieldBegin("is_temporary",r.Type.BOOL,8),l.writeBool(this.is_temporary),l.writeFieldEnd()),this.partition_detail!==null&&this.partition_detail!==void 0&&(l.writeFieldBegin("partition_detail",r.Type.I32,9),l.writeI32(this.partition_detail),l.writeFieldEnd()),this.table_type!==null&&this.table_type!==void 0&&(l.writeFieldBegin("table_type",r.Type.I32,10),l.writeI32(this.table_type),l.writeFieldEnd()),this.refresh_info!==null&&this.refresh_info!==void 0&&(l.writeFieldBegin("refresh_info",r.Type.STRUCT,11),this.refresh_info.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TColumnRange=class{constructor(l){this.type=null,this.col_id=null,this.table_id=null,this.has_nulls=null,this.int_min=null,this.int_max=null,this.bucket=null,this.fp_min=null,this.fp_max=null,l&&(l.type!==void 0&&l.type!==null&&(this.type=l.type),l.col_id!==void 0&&l.col_id!==null&&(this.col_id=l.col_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.has_nulls!==void 0&&l.has_nulls!==null&&(this.has_nulls=l.has_nulls),l.int_min!==void 0&&l.int_min!==null&&(this.int_min=l.int_min),l.int_max!==void 0&&l.int_max!==null&&(this.int_max=l.int_max),l.bucket!==void 0&&l.bucket!==null&&(this.bucket=l.bucket),l.fp_min!==void 0&&l.fp_min!==null&&(this.fp_min=l.fp_min),l.fp_max!==void 0&&l.fp_max!==null&&(this.fp_max=l.fp_max))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.type=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.col_id=l.readI32():l.skip(m);break;case 3:m==r.Type.I32?this.table_id=l.readI32():l.skip(m);break;case 4:m==r.Type.BOOL?this.has_nulls=l.readBool():l.skip(m);break;case 5:m==r.Type.I64?this.int_min=l.readI64():l.skip(m);break;case 6:m==r.Type.I64?this.int_max=l.readI64():l.skip(m);break;case 7:m==r.Type.I64?this.bucket=l.readI64():l.skip(m);break;case 8:m==r.Type.DOUBLE?this.fp_min=l.readDouble():l.skip(m);break;case 9:m==r.Type.DOUBLE?this.fp_max=l.readDouble():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TColumnRange"),this.type!==null&&this.type!==void 0&&(l.writeFieldBegin("type",r.Type.I32,1),l.writeI32(this.type),l.writeFieldEnd()),this.col_id!==null&&this.col_id!==void 0&&(l.writeFieldBegin("col_id",r.Type.I32,2),l.writeI32(this.col_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",r.Type.I32,3),l.writeI32(this.table_id),l.writeFieldEnd()),this.has_nulls!==null&&this.has_nulls!==void 0&&(l.writeFieldBegin("has_nulls",r.Type.BOOL,4),l.writeBool(this.has_nulls),l.writeFieldEnd()),this.int_min!==null&&this.int_min!==void 0&&(l.writeFieldBegin("int_min",r.Type.I64,5),l.writeI64(this.int_min),l.writeFieldEnd()),this.int_max!==null&&this.int_max!==void 0&&(l.writeFieldBegin("int_max",r.Type.I64,6),l.writeI64(this.int_max),l.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(l.writeFieldBegin("bucket",r.Type.I64,7),l.writeI64(this.bucket),l.writeFieldEnd()),this.fp_min!==null&&this.fp_min!==void 0&&(l.writeFieldBegin("fp_min",r.Type.DOUBLE,8),l.writeDouble(this.fp_min),l.writeFieldEnd()),this.fp_max!==null&&this.fp_max!==void 0&&(l.writeFieldBegin("fp_max",r.Type.DOUBLE,9),l.writeDouble(this.fp_max),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDictionaryGeneration=class{constructor(l){this.dict_id=null,this.entry_count=null,l&&(l.dict_id!==void 0&&l.dict_id!==null&&(this.dict_id=l.dict_id),l.entry_count!==void 0&&l.entry_count!==null&&(this.entry_count=l.entry_count))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.dict_id=l.readI32():l.skip(m);break;case 2:m==r.Type.I64?this.entry_count=l.readI64():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDictionaryGeneration"),this.dict_id!==null&&this.dict_id!==void 0&&(l.writeFieldBegin("dict_id",r.Type.I32,1),l.writeI32(this.dict_id),l.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(l.writeFieldBegin("entry_count",r.Type.I64,2),l.writeI64(this.entry_count),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableGeneration=class{constructor(l){this.table_id=null,this.tuple_count=null,this.start_rowid=null,l&&(l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.tuple_count!==void 0&&l.tuple_count!==null&&(this.tuple_count=l.tuple_count),l.start_rowid!==void 0&&l.start_rowid!==null&&(this.start_rowid=l.start_rowid))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.table_id=l.readI32():l.skip(m);break;case 2:m==r.Type.I64?this.tuple_count=l.readI64():l.skip(m);break;case 3:m==r.Type.I64?this.start_rowid=l.readI64():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableGeneration"),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",r.Type.I32,1),l.writeI32(this.table_id),l.writeFieldEnd()),this.tuple_count!==null&&this.tuple_count!==void 0&&(l.writeFieldBegin("tuple_count",r.Type.I64,2),l.writeI64(this.tuple_count),l.writeFieldEnd()),this.start_rowid!==null&&this.start_rowid!==void 0&&(l.writeFieldBegin("start_rowid",r.Type.I64,3),l.writeI64(this.start_rowid),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPendingQuery=class{constructor(l){this.id=null,this.column_ranges=null,this.dictionary_generations=null,this.table_generations=null,this.parent_session_id=null,l&&(l.id!==void 0&&l.id!==null&&(this.id=l.id),l.column_ranges!==void 0&&l.column_ranges!==null&&(this.column_ranges=r.copyList(l.column_ranges,[_.TColumnRange])),l.dictionary_generations!==void 0&&l.dictionary_generations!==null&&(this.dictionary_generations=r.copyList(l.dictionary_generations,[_.TDictionaryGeneration])),l.table_generations!==void 0&&l.table_generations!==null&&(this.table_generations=r.copyList(l.table_generations,[_.TTableGeneration])),l.parent_session_id!==void 0&&l.parent_session_id!==null&&(this.parent_session_id=l.parent_session_id))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I64?this.id=l.readI64():l.skip(m);break;case 2:if(m==r.Type.LIST){this.column_ranges=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TColumnRange,F.read(l),this.column_ranges.push(F)}l.readListEnd()}else l.skip(m);break;case 3:if(m==r.Type.LIST){this.dictionary_generations=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TDictionaryGeneration,F.read(l),this.dictionary_generations.push(F)}l.readListEnd()}else l.skip(m);break;case 4:if(m==r.Type.LIST){this.table_generations=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TTableGeneration,F.read(l),this.table_generations.push(F)}l.readListEnd()}else l.skip(m);break;case 5:m==r.Type.STRING?this.parent_session_id=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TPendingQuery"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",r.Type.I64,1),l.writeI64(this.id),l.writeFieldEnd()),this.column_ranges!==null&&this.column_ranges!==void 0){l.writeFieldBegin("column_ranges",r.Type.LIST,2),l.writeListBegin(r.Type.STRUCT,this.column_ranges.length);for(let b in this.column_ranges)this.column_ranges.hasOwnProperty(b)&&(b=this.column_ranges[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.dictionary_generations!==null&&this.dictionary_generations!==void 0){l.writeFieldBegin("dictionary_generations",r.Type.LIST,3),l.writeListBegin(r.Type.STRUCT,this.dictionary_generations.length);for(let b in this.dictionary_generations)this.dictionary_generations.hasOwnProperty(b)&&(b=this.dictionary_generations[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.table_generations!==null&&this.table_generations!==void 0){l.writeFieldBegin("table_generations",r.Type.LIST,4),l.writeListBegin(r.Type.STRUCT,this.table_generations.length);for(let b in this.table_generations)this.table_generations.hasOwnProperty(b)&&(b=this.table_generations[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}this.parent_session_id!==null&&this.parent_session_id!==void 0&&(l.writeFieldBegin("parent_session_id",r.Type.STRING,5),l.writeString(this.parent_session_id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TVarLen=class{constructor(l){this.payload=null,this.is_null=null,l&&(l.payload!==void 0&&l.payload!==null&&(this.payload=l.payload),l.is_null!==void 0&&l.is_null!==null&&(this.is_null=l.is_null))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.payload=l.readBinary():l.skip(m);break;case 2:m==r.Type.BOOL?this.is_null=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TVarLen"),this.payload!==null&&this.payload!==void 0&&(l.writeFieldBegin("payload",r.Type.STRING,1),l.writeBinary(this.payload),l.writeFieldEnd()),this.is_null!==null&&this.is_null!==void 0&&(l.writeFieldBegin("is_null",r.Type.BOOL,2),l.writeBool(this.is_null),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDataBlockPtr=class{constructor(l){this.fixed_len_data=null,this.var_len_data=null,l&&(l.fixed_len_data!==void 0&&l.fixed_len_data!==null&&(this.fixed_len_data=l.fixed_len_data),l.var_len_data!==void 0&&l.var_len_data!==null&&(this.var_len_data=r.copyList(l.var_len_data,[_.TVarLen])))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.fixed_len_data=l.readBinary():l.skip(m);break;case 2:if(m==r.Type.LIST){this.var_len_data=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TVarLen,F.read(l),this.var_len_data.push(F)}l.readListEnd()}else l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDataBlockPtr"),this.fixed_len_data!==null&&this.fixed_len_data!==void 0&&(l.writeFieldBegin("fixed_len_data",r.Type.STRING,1),l.writeBinary(this.fixed_len_data),l.writeFieldEnd()),this.var_len_data!==null&&this.var_len_data!==void 0){l.writeFieldBegin("var_len_data",r.Type.LIST,2),l.writeListBegin(r.Type.STRUCT,this.var_len_data.length);for(let b in this.var_len_data)this.var_len_data.hasOwnProperty(b)&&(b=this.var_len_data[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TInsertData=class{constructor(l){this.db_id=null,this.table_id=null,this.column_ids=null,this.data=null,this.num_rows=null,this.is_default=null,l&&(l.db_id!==void 0&&l.db_id!==null&&(this.db_id=l.db_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.column_ids!==void 0&&l.column_ids!==null&&(this.column_ids=r.copyList(l.column_ids,[null])),l.data!==void 0&&l.data!==null&&(this.data=r.copyList(l.data,[_.TDataBlockPtr])),l.num_rows!==void 0&&l.num_rows!==null&&(this.num_rows=l.num_rows),l.is_default!==void 0&&l.is_default!==null&&(this.is_default=r.copyList(l.is_default,[null])))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.db_id=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.table_id=l.readI32():l.skip(m);break;case 3:if(m==r.Type.LIST){this.column_ids=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readI32(),this.column_ids.push(F)}l.readListEnd()}else l.skip(m);break;case 4:if(m==r.Type.LIST){this.data=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TDataBlockPtr,F.read(l),this.data.push(F)}l.readListEnd()}else l.skip(m);break;case 5:m==r.Type.I64?this.num_rows=l.readI64():l.skip(m);break;case 6:if(m==r.Type.LIST){this.is_default=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readBool(),this.is_default.push(F)}l.readListEnd()}else l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TInsertData"),this.db_id!==null&&this.db_id!==void 0&&(l.writeFieldBegin("db_id",r.Type.I32,1),l.writeI32(this.db_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",r.Type.I32,2),l.writeI32(this.table_id),l.writeFieldEnd()),this.column_ids!==null&&this.column_ids!==void 0){l.writeFieldBegin("column_ids",r.Type.LIST,3),l.writeListBegin(r.Type.I32,this.column_ids.length);for(let b in this.column_ids)this.column_ids.hasOwnProperty(b)&&(b=this.column_ids[b],l.writeI32(b));l.writeListEnd(),l.writeFieldEnd()}if(this.data!==null&&this.data!==void 0){l.writeFieldBegin("data",r.Type.LIST,4),l.writeListBegin(r.Type.STRUCT,this.data.length);for(let b in this.data)this.data.hasOwnProperty(b)&&(b=this.data[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.num_rows!==null&&this.num_rows!==void 0&&(l.writeFieldBegin("num_rows",r.Type.I64,5),l.writeI64(this.num_rows),l.writeFieldEnd()),this.is_default!==null&&this.is_default!==void 0){l.writeFieldBegin("is_default",r.Type.LIST,6),l.writeListBegin(r.Type.BOOL,this.is_default.length);for(let b in this.is_default)this.is_default.hasOwnProperty(b)&&(b=this.is_default[b],l.writeBool(b));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TChunkData=class{constructor(l){this.data_buffer=null,this.index_buffer=null,l&&(l.data_buffer!==void 0&&l.data_buffer!==null&&(this.data_buffer=l.data_buffer),l.index_buffer!==void 0&&l.index_buffer!==null&&(this.index_buffer=l.index_buffer))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.data_buffer=l.readBinary():l.skip(m);break;case 2:m==r.Type.STRING?this.index_buffer=l.readBinary():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TChunkData"),this.data_buffer!==null&&this.data_buffer!==void 0&&(l.writeFieldBegin("data_buffer",r.Type.STRING,1),l.writeBinary(this.data_buffer),l.writeFieldEnd()),this.index_buffer!==null&&this.index_buffer!==void 0&&(l.writeFieldBegin("index_buffer",r.Type.STRING,2),l.writeBinary(this.index_buffer),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TInsertChunks=class{constructor(l){this.db_id=null,this.table_id=null,this.data=null,this.valid_indices=null,this.num_rows=null,l&&(l.db_id!==void 0&&l.db_id!==null&&(this.db_id=l.db_id),l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.data!==void 0&&l.data!==null&&(this.data=r.copyList(l.data,[_.TChunkData])),l.valid_indices!==void 0&&l.valid_indices!==null&&(this.valid_indices=r.copyList(l.valid_indices,[null])),l.num_rows!==void 0&&l.num_rows!==null&&(this.num_rows=l.num_rows))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.db_id=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.table_id=l.readI32():l.skip(m);break;case 3:if(m==r.Type.LIST){this.data=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=new _.TChunkData,F.read(l),this.data.push(F)}l.readListEnd()}else l.skip(m);break;case 4:if(m==r.Type.LIST){this.valid_indices=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readI64(),this.valid_indices.push(F)}l.readListEnd()}else l.skip(m);break;case 5:m==r.Type.I64?this.num_rows=l.readI64():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TInsertChunks"),this.db_id!==null&&this.db_id!==void 0&&(l.writeFieldBegin("db_id",r.Type.I32,1),l.writeI32(this.db_id),l.writeFieldEnd()),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",r.Type.I32,2),l.writeI32(this.table_id),l.writeFieldEnd()),this.data!==null&&this.data!==void 0){l.writeFieldBegin("data",r.Type.LIST,3),l.writeListBegin(r.Type.STRUCT,this.data.length);for(let b in this.data)this.data.hasOwnProperty(b)&&(b=this.data[b],b.write(l));l.writeListEnd(),l.writeFieldEnd()}if(this.valid_indices!==null&&this.valid_indices!==void 0){l.writeFieldBegin("valid_indices",r.Type.LIST,4),l.writeListBegin(r.Type.I64,this.valid_indices.length);for(let b in this.valid_indices)this.valid_indices.hasOwnProperty(b)&&(b=this.valid_indices[b],l.writeI64(b));l.writeListEnd(),l.writeFieldEnd()}this.num_rows!==null&&this.num_rows!==void 0&&(l.writeFieldBegin("num_rows",r.Type.I64,5),l.writeI64(this.num_rows),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TPendingRenderQuery=class{constructor(l){this.id=null,l&&l.id!==void 0&&l.id!==null&&(this.id=l.id)}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I64?this.id=l.readI64():l.skip(m);break;case 0:l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TPendingRenderQuery"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",r.Type.I64,1),l.writeI64(this.id),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderParseResult=class{constructor(l){this.merge_type=null,this.node_id=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,l&&(l.merge_type!==void 0&&l.merge_type!==null&&(this.merge_type=l.merge_type),l.node_id!==void 0&&l.node_id!==null&&(this.node_id=l.node_id),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.merge_type=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.node_id=l.readI32():l.skip(m);break;case 3:m==r.Type.I64?this.execution_time_ms=l.readI64():l.skip(m);break;case 4:m==r.Type.I64?this.render_time_ms=l.readI64():l.skip(m);break;case 5:m==r.Type.I64?this.total_time_ms=l.readI64():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderParseResult"),this.merge_type!==null&&this.merge_type!==void 0&&(l.writeFieldBegin("merge_type",r.Type.I32,1),l.writeI32(this.merge_type),l.writeFieldEnd()),this.node_id!==null&&this.node_id!==void 0&&(l.writeFieldBegin("node_id",r.Type.I32,2),l.writeI32(this.node_id),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",r.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",r.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",r.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRawRenderPassDataResult=class{constructor(l){this.num_pixel_channels=null,this.num_pixel_samples=null,this.pixels=null,this.row_ids_A=null,this.row_ids_B=null,this.table_ids=null,this.accum_data=null,this.accum_depth=null,l&&(l.num_pixel_channels!==void 0&&l.num_pixel_channels!==null&&(this.num_pixel_channels=l.num_pixel_channels),l.num_pixel_samples!==void 0&&l.num_pixel_samples!==null&&(this.num_pixel_samples=l.num_pixel_samples),l.pixels!==void 0&&l.pixels!==null&&(this.pixels=l.pixels),l.row_ids_A!==void 0&&l.row_ids_A!==null&&(this.row_ids_A=l.row_ids_A),l.row_ids_B!==void 0&&l.row_ids_B!==null&&(this.row_ids_B=l.row_ids_B),l.table_ids!==void 0&&l.table_ids!==null&&(this.table_ids=l.table_ids),l.accum_data!==void 0&&l.accum_data!==null&&(this.accum_data=l.accum_data),l.accum_depth!==void 0&&l.accum_depth!==null&&(this.accum_depth=l.accum_depth))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.num_pixel_channels=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.num_pixel_samples=l.readI32():l.skip(m);break;case 3:m==r.Type.STRING?this.pixels=l.readBinary():l.skip(m);break;case 4:m==r.Type.STRING?this.row_ids_A=l.readBinary():l.skip(m);break;case 5:m==r.Type.STRING?this.row_ids_B=l.readBinary():l.skip(m);break;case 6:m==r.Type.STRING?this.table_ids=l.readBinary():l.skip(m);break;case 7:m==r.Type.STRING?this.accum_data=l.readBinary():l.skip(m);break;case 8:m==r.Type.I32?this.accum_depth=l.readI32():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRawRenderPassDataResult"),this.num_pixel_channels!==null&&this.num_pixel_channels!==void 0&&(l.writeFieldBegin("num_pixel_channels",r.Type.I32,1),l.writeI32(this.num_pixel_channels),l.writeFieldEnd()),this.num_pixel_samples!==null&&this.num_pixel_samples!==void 0&&(l.writeFieldBegin("num_pixel_samples",r.Type.I32,2),l.writeI32(this.num_pixel_samples),l.writeFieldEnd()),this.pixels!==null&&this.pixels!==void 0&&(l.writeFieldBegin("pixels",r.Type.STRING,3),l.writeBinary(this.pixels),l.writeFieldEnd()),this.row_ids_A!==null&&this.row_ids_A!==void 0&&(l.writeFieldBegin("row_ids_A",r.Type.STRING,4),l.writeBinary(this.row_ids_A),l.writeFieldEnd()),this.row_ids_B!==null&&this.row_ids_B!==void 0&&(l.writeFieldBegin("row_ids_B",r.Type.STRING,5),l.writeBinary(this.row_ids_B),l.writeFieldEnd()),this.table_ids!==null&&this.table_ids!==void 0&&(l.writeFieldBegin("table_ids",r.Type.STRING,6),l.writeBinary(this.table_ids),l.writeFieldEnd()),this.accum_data!==null&&this.accum_data!==void 0&&(l.writeFieldBegin("accum_data",r.Type.STRING,7),l.writeBinary(this.accum_data),l.writeFieldEnd()),this.accum_depth!==null&&this.accum_depth!==void 0&&(l.writeFieldBegin("accum_depth",r.Type.I32,8),l.writeI32(this.accum_depth),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRawPixelData=class{constructor(l){this.width=null,this.height=null,this.render_pass_map=null,l&&(l.width!==void 0&&l.width!==null&&(this.width=l.width),l.height!==void 0&&l.height!==null&&(this.height=l.height),l.render_pass_map!==void 0&&l.render_pass_map!==null&&(this.render_pass_map=r.copyMap(l.render_pass_map,[_.TRawRenderPassDataResult])))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.width=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.height=l.readI32():l.skip(m);break;case 3:if(m==r.Type.MAP){this.render_pass_map={};const I=l.readMapBegin().size||0;for(let k=0;k<I;++k){let F=null,x=null;F=l.readI32(),x=new _.TRawRenderPassDataResult,x.read(l),this.render_pass_map[F]=x}l.readMapEnd()}else l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRawPixelData"),this.width!==null&&this.width!==void 0&&(l.writeFieldBegin("width",r.Type.I32,1),l.writeI32(this.width),l.writeFieldEnd()),this.height!==null&&this.height!==void 0&&(l.writeFieldBegin("height",r.Type.I32,2),l.writeI32(this.height),l.writeFieldEnd()),this.render_pass_map!==null&&this.render_pass_map!==void 0){l.writeFieldBegin("render_pass_map",r.Type.MAP,3),l.writeMapBegin(r.Type.I32,r.Type.STRUCT,r.objectLength(this.render_pass_map));for(let b in this.render_pass_map)if(this.render_pass_map.hasOwnProperty(b)){let m=this.render_pass_map[b];l.writeI32(b),m.write(l)}l.writeMapEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderDatum=class{constructor(l){this.type=null,this.cnt=null,this.value=null,l&&(l.type!==void 0&&l.type!==null&&(this.type=l.type),l.cnt!==void 0&&l.cnt!==null&&(this.cnt=l.cnt),l.value!==void 0&&l.value!==null&&(this.value=l.value))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.type=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.cnt=l.readI32():l.skip(m);break;case 3:m==r.Type.STRING?this.value=l.readBinary():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TRenderDatum"),this.type!==null&&this.type!==void 0&&(l.writeFieldBegin("type",r.Type.I32,1),l.writeI32(this.type),l.writeFieldEnd()),this.cnt!==null&&this.cnt!==void 0&&(l.writeFieldBegin("cnt",r.Type.I32,2),l.writeI32(this.cnt),l.writeFieldEnd()),this.value!==null&&this.value!==void 0&&(l.writeFieldBegin("value",r.Type.STRING,3),l.writeBinary(this.value),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TRenderStepResult=class{constructor(l){this.merge_data=null,this.raw_pixel_data=null,this.execution_time_ms=null,this.render_time_ms=null,this.total_time_ms=null,l&&(l.merge_data!==void 0&&l.merge_data!==null&&(this.merge_data=r.copyMap(l.merge_data,[r.copyMap,r.copyMap,r.copyMap,r.copyList,_.TRenderDatum])),l.raw_pixel_data!==void 0&&l.raw_pixel_data!==null&&(this.raw_pixel_data=new _.TRawPixelData(l.raw_pixel_data)),l.execution_time_ms!==void 0&&l.execution_time_ms!==null&&(this.execution_time_ms=l.execution_time_ms),l.render_time_ms!==void 0&&l.render_time_ms!==null&&(this.render_time_ms=l.render_time_ms),l.total_time_ms!==void 0&&l.total_time_ms!==null&&(this.total_time_ms=l.total_time_ms))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:if(m==r.Type.MAP){this.merge_data={};const I=l.readMapBegin().size||0;for(let k=0;k<I;++k){let F=null,x=null;F=l.readString(),x={};const R=l.readMapBegin().size||0;for(let P=0;P<R;++P){let C=null,D=null;C=l.readString(),D={};const $=l.readMapBegin().size||0;for(let W=0;W<$;++W){let H=null,G=null;H=l.readString(),G={};const q=l.readMapBegin().size||0;for(let ie=0;ie<q;++ie){let ce=null,se=null;ce=l.readString(),se=[];const he=l.readListBegin().size||0;for(let Me=0;Me<he;++Me){let Ue=null;Ue=new _.TRenderDatum,Ue.read(l),se.push(Ue)}l.readListEnd(),G[ce]=se}l.readMapEnd(),D[H]=G}l.readMapEnd(),x[C]=D}l.readMapEnd(),this.merge_data[F]=x}l.readMapEnd()}else l.skip(m);break;case 2:m==r.Type.STRUCT?(this.raw_pixel_data=new _.TRawPixelData,this.raw_pixel_data.read(l)):l.skip(m);break;case 3:m==r.Type.I64?this.execution_time_ms=l.readI64():l.skip(m);break;case 4:m==r.Type.I64?this.render_time_ms=l.readI64():l.skip(m);break;case 5:m==r.Type.I64?this.total_time_ms=l.readI64():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TRenderStepResult"),this.merge_data!==null&&this.merge_data!==void 0){l.writeFieldBegin("merge_data",r.Type.MAP,1),l.writeMapBegin(r.Type.STRING,r.Type.MAP,r.objectLength(this.merge_data));for(let b in this.merge_data)if(this.merge_data.hasOwnProperty(b)){let m=this.merge_data[b];l.writeString(b),l.writeMapBegin(r.Type.STRING,r.Type.MAP,r.objectLength(m));for(let E in m)if(m.hasOwnProperty(E)){let B=m[E];l.writeString(E),l.writeMapBegin(r.Type.STRING,r.Type.MAP,r.objectLength(B));for(let I in B)if(B.hasOwnProperty(I)){let k=B[I];l.writeString(I),l.writeMapBegin(r.Type.STRING,r.Type.LIST,r.objectLength(k));for(let F in k)if(k.hasOwnProperty(F)){let x=k[F];l.writeString(F),l.writeListBegin(r.Type.STRUCT,x.length);for(let M in x)x.hasOwnProperty(M)&&(M=x[M],M.write(l));l.writeListEnd()}l.writeMapEnd()}l.writeMapEnd()}l.writeMapEnd()}l.writeMapEnd(),l.writeFieldEnd()}this.raw_pixel_data!==null&&this.raw_pixel_data!==void 0&&(l.writeFieldBegin("raw_pixel_data",r.Type.STRUCT,2),this.raw_pixel_data.write(l),l.writeFieldEnd()),this.execution_time_ms!==null&&this.execution_time_ms!==void 0&&(l.writeFieldBegin("execution_time_ms",r.Type.I64,3),l.writeI64(this.execution_time_ms),l.writeFieldEnd()),this.render_time_ms!==null&&this.render_time_ms!==void 0&&(l.writeFieldBegin("render_time_ms",r.Type.I64,4),l.writeI64(this.render_time_ms),l.writeFieldEnd()),this.total_time_ms!==null&&this.total_time_ms!==void 0&&(l.writeFieldBegin("total_time_ms",r.Type.I64,5),l.writeI64(this.total_time_ms),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDatabasePermissions=class{constructor(l){this.create_=null,this.delete_=null,this.view_sql_editor_=null,this.access_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.view_sql_editor_!==void 0&&l.view_sql_editor_!==null&&(this.view_sql_editor_=l.view_sql_editor_),l.access_!==void 0&&l.access_!==null&&(this.access_=l.access_))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.BOOL?this.create_=l.readBool():l.skip(m);break;case 2:m==r.Type.BOOL?this.delete_=l.readBool():l.skip(m);break;case 3:m==r.Type.BOOL?this.view_sql_editor_=l.readBool():l.skip(m);break;case 4:m==r.Type.BOOL?this.access_=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDatabasePermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",r.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",r.Type.BOOL,2),l.writeBool(this.delete_),l.writeFieldEnd()),this.view_sql_editor_!==null&&this.view_sql_editor_!==void 0&&(l.writeFieldBegin("view_sql_editor_",r.Type.BOOL,3),l.writeBool(this.view_sql_editor_),l.writeFieldEnd()),this.access_!==null&&this.access_!==void 0&&(l.writeFieldBegin("access_",r.Type.BOOL,4),l.writeBool(this.access_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTablePermissions=class{constructor(l){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,this.truncate_=null,this.alter_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.select_!==void 0&&l.select_!==null&&(this.select_=l.select_),l.insert_!==void 0&&l.insert_!==null&&(this.insert_=l.insert_),l.update_!==void 0&&l.update_!==null&&(this.update_=l.update_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.truncate_!==void 0&&l.truncate_!==null&&(this.truncate_=l.truncate_),l.alter_!==void 0&&l.alter_!==null&&(this.alter_=l.alter_))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.BOOL?this.create_=l.readBool():l.skip(m);break;case 2:m==r.Type.BOOL?this.drop_=l.readBool():l.skip(m);break;case 3:m==r.Type.BOOL?this.select_=l.readBool():l.skip(m);break;case 4:m==r.Type.BOOL?this.insert_=l.readBool():l.skip(m);break;case 5:m==r.Type.BOOL?this.update_=l.readBool():l.skip(m);break;case 6:m==r.Type.BOOL?this.delete_=l.readBool():l.skip(m);break;case 7:m==r.Type.BOOL?this.truncate_=l.readBool():l.skip(m);break;case 8:m==r.Type.BOOL?this.alter_=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTablePermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",r.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",r.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(l.writeFieldBegin("select_",r.Type.BOOL,3),l.writeBool(this.select_),l.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(l.writeFieldBegin("insert_",r.Type.BOOL,4),l.writeBool(this.insert_),l.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(l.writeFieldBegin("update_",r.Type.BOOL,5),l.writeBool(this.update_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",r.Type.BOOL,6),l.writeBool(this.delete_),l.writeFieldEnd()),this.truncate_!==null&&this.truncate_!==void 0&&(l.writeFieldBegin("truncate_",r.Type.BOOL,7),l.writeBool(this.truncate_),l.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(l.writeFieldBegin("alter_",r.Type.BOOL,8),l.writeBool(this.alter_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboardPermissions=class{constructor(l){this.create_=null,this.delete_=null,this.view_=null,this.edit_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_),l.view_!==void 0&&l.view_!==null&&(this.view_=l.view_),l.edit_!==void 0&&l.edit_!==null&&(this.edit_=l.edit_))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.BOOL?this.create_=l.readBool():l.skip(m);break;case 2:m==r.Type.BOOL?this.delete_=l.readBool():l.skip(m);break;case 3:m==r.Type.BOOL?this.view_=l.readBool():l.skip(m);break;case 4:m==r.Type.BOOL?this.edit_=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboardPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",r.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",r.Type.BOOL,2),l.writeBool(this.delete_),l.writeFieldEnd()),this.view_!==null&&this.view_!==void 0&&(l.writeFieldBegin("view_",r.Type.BOOL,3),l.writeBool(this.view_),l.writeFieldEnd()),this.edit_!==null&&this.edit_!==void 0&&(l.writeFieldBegin("edit_",r.Type.BOOL,4),l.writeBool(this.edit_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TViewPermissions=class{constructor(l){this.create_=null,this.drop_=null,this.select_=null,this.insert_=null,this.update_=null,this.delete_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.select_!==void 0&&l.select_!==null&&(this.select_=l.select_),l.insert_!==void 0&&l.insert_!==null&&(this.insert_=l.insert_),l.update_!==void 0&&l.update_!==null&&(this.update_=l.update_),l.delete_!==void 0&&l.delete_!==null&&(this.delete_=l.delete_))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.BOOL?this.create_=l.readBool():l.skip(m);break;case 2:m==r.Type.BOOL?this.drop_=l.readBool():l.skip(m);break;case 3:m==r.Type.BOOL?this.select_=l.readBool():l.skip(m);break;case 4:m==r.Type.BOOL?this.insert_=l.readBool():l.skip(m);break;case 5:m==r.Type.BOOL?this.update_=l.readBool():l.skip(m);break;case 6:m==r.Type.BOOL?this.delete_=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TViewPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",r.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",r.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.select_!==null&&this.select_!==void 0&&(l.writeFieldBegin("select_",r.Type.BOOL,3),l.writeBool(this.select_),l.writeFieldEnd()),this.insert_!==null&&this.insert_!==void 0&&(l.writeFieldBegin("insert_",r.Type.BOOL,4),l.writeBool(this.insert_),l.writeFieldEnd()),this.update_!==null&&this.update_!==void 0&&(l.writeFieldBegin("update_",r.Type.BOOL,5),l.writeBool(this.update_),l.writeFieldEnd()),this.delete_!==null&&this.delete_!==void 0&&(l.writeFieldBegin("delete_",r.Type.BOOL,6),l.writeBool(this.delete_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TServerPermissions=class{constructor(l){this.create_=null,this.drop_=null,this.alter_=null,this.usage_=null,l&&(l.create_!==void 0&&l.create_!==null&&(this.create_=l.create_),l.drop_!==void 0&&l.drop_!==null&&(this.drop_=l.drop_),l.alter_!==void 0&&l.alter_!==null&&(this.alter_=l.alter_),l.usage_!==void 0&&l.usage_!==null&&(this.usage_=l.usage_))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.BOOL?this.create_=l.readBool():l.skip(m);break;case 2:m==r.Type.BOOL?this.drop_=l.readBool():l.skip(m);break;case 3:m==r.Type.BOOL?this.alter_=l.readBool():l.skip(m);break;case 4:m==r.Type.BOOL?this.usage_=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TServerPermissions"),this.create_!==null&&this.create_!==void 0&&(l.writeFieldBegin("create_",r.Type.BOOL,1),l.writeBool(this.create_),l.writeFieldEnd()),this.drop_!==null&&this.drop_!==void 0&&(l.writeFieldBegin("drop_",r.Type.BOOL,2),l.writeBool(this.drop_),l.writeFieldEnd()),this.alter_!==null&&this.alter_!==void 0&&(l.writeFieldBegin("alter_",r.Type.BOOL,3),l.writeBool(this.alter_),l.writeFieldEnd()),this.usage_!==null&&this.usage_!==void 0&&(l.writeFieldBegin("usage_",r.Type.BOOL,4),l.writeBool(this.usage_),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBObjectPermissions=class{constructor(l){this.database_permissions_=null,this.table_permissions_=null,this.dashboard_permissions_=null,this.view_permissions_=null,this.server_permissions_=null,l&&(l.database_permissions_!==void 0&&l.database_permissions_!==null&&(this.database_permissions_=new _.TDatabasePermissions(l.database_permissions_)),l.table_permissions_!==void 0&&l.table_permissions_!==null&&(this.table_permissions_=new _.TTablePermissions(l.table_permissions_)),l.dashboard_permissions_!==void 0&&l.dashboard_permissions_!==null&&(this.dashboard_permissions_=new _.TDashboardPermissions(l.dashboard_permissions_)),l.view_permissions_!==void 0&&l.view_permissions_!==null&&(this.view_permissions_=new _.TViewPermissions(l.view_permissions_)),l.server_permissions_!==void 0&&l.server_permissions_!==null&&(this.server_permissions_=new _.TServerPermissions(l.server_permissions_)))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRUCT?(this.database_permissions_=new _.TDatabasePermissions,this.database_permissions_.read(l)):l.skip(m);break;case 2:m==r.Type.STRUCT?(this.table_permissions_=new _.TTablePermissions,this.table_permissions_.read(l)):l.skip(m);break;case 3:m==r.Type.STRUCT?(this.dashboard_permissions_=new _.TDashboardPermissions,this.dashboard_permissions_.read(l)):l.skip(m);break;case 4:m==r.Type.STRUCT?(this.view_permissions_=new _.TViewPermissions,this.view_permissions_.read(l)):l.skip(m);break;case 5:m==r.Type.STRUCT?(this.server_permissions_=new _.TServerPermissions,this.server_permissions_.read(l)):l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDBObjectPermissions"),this.database_permissions_!==null&&this.database_permissions_!==void 0&&(l.writeFieldBegin("database_permissions_",r.Type.STRUCT,1),this.database_permissions_.write(l),l.writeFieldEnd()),this.table_permissions_!==null&&this.table_permissions_!==void 0&&(l.writeFieldBegin("table_permissions_",r.Type.STRUCT,2),this.table_permissions_.write(l),l.writeFieldEnd()),this.dashboard_permissions_!==null&&this.dashboard_permissions_!==void 0&&(l.writeFieldBegin("dashboard_permissions_",r.Type.STRUCT,3),this.dashboard_permissions_.write(l),l.writeFieldEnd()),this.view_permissions_!==null&&this.view_permissions_!==void 0&&(l.writeFieldBegin("view_permissions_",r.Type.STRUCT,4),this.view_permissions_.write(l),l.writeFieldEnd()),this.server_permissions_!==null&&this.server_permissions_!==void 0&&(l.writeFieldBegin("server_permissions_",r.Type.STRUCT,5),this.server_permissions_.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDBObject=class{constructor(l){this.objectName=null,this.objectType=null,this.privs=null,this.grantee=null,this.privilegeObjectType=null,this.objectId=null,l&&(l.objectName!==void 0&&l.objectName!==null&&(this.objectName=l.objectName),l.objectType!==void 0&&l.objectType!==null&&(this.objectType=l.objectType),l.privs!==void 0&&l.privs!==null&&(this.privs=r.copyList(l.privs,[null])),l.grantee!==void 0&&l.grantee!==null&&(this.grantee=l.grantee),l.privilegeObjectType!==void 0&&l.privilegeObjectType!==null&&(this.privilegeObjectType=l.privilegeObjectType),l.objectId!==void 0&&l.objectId!==null&&(this.objectId=l.objectId))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.objectName=l.readString():l.skip(m);break;case 2:m==r.Type.I32?this.objectType=l.readI32():l.skip(m);break;case 3:if(m==r.Type.LIST){this.privs=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readBool(),this.privs.push(F)}l.readListEnd()}else l.skip(m);break;case 4:m==r.Type.STRING?this.grantee=l.readString():l.skip(m);break;case 5:m==r.Type.I32?this.privilegeObjectType=l.readI32():l.skip(m);break;case 6:m==r.Type.I32?this.objectId=l.readI32():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TDBObject"),this.objectName!==null&&this.objectName!==void 0&&(l.writeFieldBegin("objectName",r.Type.STRING,1),l.writeString(this.objectName),l.writeFieldEnd()),this.objectType!==null&&this.objectType!==void 0&&(l.writeFieldBegin("objectType",r.Type.I32,2),l.writeI32(this.objectType),l.writeFieldEnd()),this.privs!==null&&this.privs!==void 0){l.writeFieldBegin("privs",r.Type.LIST,3),l.writeListBegin(r.Type.BOOL,this.privs.length);for(let b in this.privs)this.privs.hasOwnProperty(b)&&(b=this.privs[b],l.writeBool(b));l.writeListEnd(),l.writeFieldEnd()}this.grantee!==null&&this.grantee!==void 0&&(l.writeFieldBegin("grantee",r.Type.STRING,4),l.writeString(this.grantee),l.writeFieldEnd()),this.privilegeObjectType!==null&&this.privilegeObjectType!==void 0&&(l.writeFieldBegin("privilegeObjectType",r.Type.I32,5),l.writeI32(this.privilegeObjectType),l.writeFieldEnd()),this.objectId!==null&&this.objectId!==void 0&&(l.writeFieldBegin("objectId",r.Type.I32,6),l.writeI32(this.objectId),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboardGrantees=class{constructor(l){this.name=null,this.is_user=null,this.permissions=null,l&&(l.name!==void 0&&l.name!==null&&(this.name=l.name),l.is_user!==void 0&&l.is_user!==null&&(this.is_user=l.is_user),l.permissions!==void 0&&l.permissions!==null&&(this.permissions=new _.TDashboardPermissions(l.permissions)))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.name=l.readString():l.skip(m);break;case 2:m==r.Type.BOOL?this.is_user=l.readBool():l.skip(m);break;case 3:m==r.Type.STRUCT?(this.permissions=new _.TDashboardPermissions,this.permissions.read(l)):l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboardGrantees"),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",r.Type.STRING,1),l.writeString(this.name),l.writeFieldEnd()),this.is_user!==null&&this.is_user!==void 0&&(l.writeFieldBegin("is_user",r.Type.BOOL,2),l.writeBool(this.is_user),l.writeFieldEnd()),this.permissions!==null&&this.permissions!==void 0&&(l.writeFieldBegin("permissions",r.Type.STRUCT,3),this.permissions.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TDashboard=class{constructor(l){this.dashboard_name=null,this.dashboard_state=null,this.image_hash=null,this.update_time=null,this.dashboard_metadata=null,this.dashboard_id=null,this.dashboard_owner=null,this.is_dash_shared=null,this.dashboard_permissions=null,l&&(l.dashboard_name!==void 0&&l.dashboard_name!==null&&(this.dashboard_name=l.dashboard_name),l.dashboard_state!==void 0&&l.dashboard_state!==null&&(this.dashboard_state=l.dashboard_state),l.image_hash!==void 0&&l.image_hash!==null&&(this.image_hash=l.image_hash),l.update_time!==void 0&&l.update_time!==null&&(this.update_time=l.update_time),l.dashboard_metadata!==void 0&&l.dashboard_metadata!==null&&(this.dashboard_metadata=l.dashboard_metadata),l.dashboard_id!==void 0&&l.dashboard_id!==null&&(this.dashboard_id=l.dashboard_id),l.dashboard_owner!==void 0&&l.dashboard_owner!==null&&(this.dashboard_owner=l.dashboard_owner),l.is_dash_shared!==void 0&&l.is_dash_shared!==null&&(this.is_dash_shared=l.is_dash_shared),l.dashboard_permissions!==void 0&&l.dashboard_permissions!==null&&(this.dashboard_permissions=new _.TDashboardPermissions(l.dashboard_permissions)))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.dashboard_name=l.readString():l.skip(m);break;case 2:m==r.Type.STRING?this.dashboard_state=l.readString():l.skip(m);break;case 3:m==r.Type.STRING?this.image_hash=l.readString():l.skip(m);break;case 4:m==r.Type.STRING?this.update_time=l.readString():l.skip(m);break;case 5:m==r.Type.STRING?this.dashboard_metadata=l.readString():l.skip(m);break;case 6:m==r.Type.I32?this.dashboard_id=l.readI32():l.skip(m);break;case 7:m==r.Type.STRING?this.dashboard_owner=l.readString():l.skip(m);break;case 8:m==r.Type.BOOL?this.is_dash_shared=l.readBool():l.skip(m);break;case 9:m==r.Type.STRUCT?(this.dashboard_permissions=new _.TDashboardPermissions,this.dashboard_permissions.read(l)):l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TDashboard"),this.dashboard_name!==null&&this.dashboard_name!==void 0&&(l.writeFieldBegin("dashboard_name",r.Type.STRING,1),l.writeString(this.dashboard_name),l.writeFieldEnd()),this.dashboard_state!==null&&this.dashboard_state!==void 0&&(l.writeFieldBegin("dashboard_state",r.Type.STRING,2),l.writeString(this.dashboard_state),l.writeFieldEnd()),this.image_hash!==null&&this.image_hash!==void 0&&(l.writeFieldBegin("image_hash",r.Type.STRING,3),l.writeString(this.image_hash),l.writeFieldEnd()),this.update_time!==null&&this.update_time!==void 0&&(l.writeFieldBegin("update_time",r.Type.STRING,4),l.writeString(this.update_time),l.writeFieldEnd()),this.dashboard_metadata!==null&&this.dashboard_metadata!==void 0&&(l.writeFieldBegin("dashboard_metadata",r.Type.STRING,5),l.writeString(this.dashboard_metadata),l.writeFieldEnd()),this.dashboard_id!==null&&this.dashboard_id!==void 0&&(l.writeFieldBegin("dashboard_id",r.Type.I32,6),l.writeI32(this.dashboard_id),l.writeFieldEnd()),this.dashboard_owner!==null&&this.dashboard_owner!==void 0&&(l.writeFieldBegin("dashboard_owner",r.Type.STRING,7),l.writeString(this.dashboard_owner),l.writeFieldEnd()),this.is_dash_shared!==null&&this.is_dash_shared!==void 0&&(l.writeFieldBegin("is_dash_shared",r.Type.BOOL,8),l.writeBool(this.is_dash_shared),l.writeFieldEnd()),this.dashboard_permissions!==null&&this.dashboard_permissions!==void 0&&(l.writeFieldBegin("dashboard_permissions",r.Type.STRUCT,9),this.dashboard_permissions.write(l),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TLicenseInfo=class{constructor(l){this.claims=null,l&&l.claims!==void 0&&l.claims!==null&&(this.claims=r.copyList(l.claims,[null]))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:if(m==r.Type.LIST){this.claims=[];const I=l.readListBegin().size||0;for(let k=0;k<I;++k){let F=null;F=l.readString(),this.claims.push(F)}l.readListEnd()}else l.skip(m);break;case 0:l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){if(l.writeStructBegin("TLicenseInfo"),this.claims!==null&&this.claims!==void 0){l.writeFieldBegin("claims",r.Type.LIST,1),l.writeListBegin(r.Type.STRING,this.claims.length);for(let b in this.claims)this.claims.hasOwnProperty(b)&&(b=this.claims[b],l.writeString(b));l.writeListEnd(),l.writeFieldEnd()}l.writeFieldStop(),l.writeStructEnd()}},c.exports.TSessionInfo=class{constructor(l){this.user=null,this.database=null,this.start_time=null,this.is_super=null,l&&(l.user!==void 0&&l.user!==null&&(this.user=l.user),l.database!==void 0&&l.database!==null&&(this.database=l.database),l.start_time!==void 0&&l.start_time!==null&&(this.start_time=l.start_time),l.is_super!==void 0&&l.is_super!==null&&(this.is_super=l.is_super))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.user=l.readString():l.skip(m);break;case 2:m==r.Type.STRING?this.database=l.readString():l.skip(m);break;case 3:m==r.Type.I64?this.start_time=l.readI64():l.skip(m);break;case 4:m==r.Type.BOOL?this.is_super=l.readBool():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TSessionInfo"),this.user!==null&&this.user!==void 0&&(l.writeFieldBegin("user",r.Type.STRING,1),l.writeString(this.user),l.writeFieldEnd()),this.database!==null&&this.database!==void 0&&(l.writeFieldBegin("database",r.Type.STRING,2),l.writeString(this.database),l.writeFieldEnd()),this.start_time!==null&&this.start_time!==void 0&&(l.writeFieldBegin("start_time",r.Type.I64,3),l.writeI64(this.start_time),l.writeFieldEnd()),this.is_super!==null&&this.is_super!==void 0&&(l.writeFieldBegin("is_super",r.Type.BOOL,4),l.writeBool(this.is_super),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TGeoFileLayerInfo=class{constructor(l){this.name=null,this.contents=null,l&&(l.name!==void 0&&l.name!==null&&(this.name=l.name),l.contents!==void 0&&l.contents!==null&&(this.contents=l.contents))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.name=l.readString():l.skip(m);break;case 2:m==r.Type.I32?this.contents=l.readI32():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TGeoFileLayerInfo"),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",r.Type.STRING,1),l.writeString(this.name),l.writeFieldEnd()),this.contents!==null&&this.contents!==void 0&&(l.writeFieldBegin("contents",r.Type.I32,2),l.writeI32(this.contents),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TTableEpochInfo=class{constructor(l){this.table_id=null,this.table_epoch=null,this.leaf_index=null,l&&(l.table_id!==void 0&&l.table_id!==null&&(this.table_id=l.table_id),l.table_epoch!==void 0&&l.table_epoch!==null&&(this.table_epoch=l.table_epoch),l.leaf_index!==void 0&&l.leaf_index!==null&&(this.leaf_index=l.leaf_index))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.table_id=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.table_epoch=l.readI32():l.skip(m);break;case 3:m==r.Type.I32?this.leaf_index=l.readI32():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TTableEpochInfo"),this.table_id!==null&&this.table_id!==void 0&&(l.writeFieldBegin("table_id",r.Type.I32,1),l.writeI32(this.table_id),l.writeFieldEnd()),this.table_epoch!==null&&this.table_epoch!==void 0&&(l.writeFieldBegin("table_epoch",r.Type.I32,2),l.writeI32(this.table_epoch),l.writeFieldEnd()),this.leaf_index!==null&&this.leaf_index!==void 0&&(l.writeFieldBegin("leaf_index",r.Type.I32,3),l.writeI32(this.leaf_index),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TCustomExpression=class{constructor(l){this.id=null,this.name=null,this.expression_json=null,this.data_source_type=null,this.data_source_id=null,this.is_deleted=null,this.data_source_name=null,l&&(l.id!==void 0&&l.id!==null&&(this.id=l.id),l.name!==void 0&&l.name!==null&&(this.name=l.name),l.expression_json!==void 0&&l.expression_json!==null&&(this.expression_json=l.expression_json),l.data_source_type!==void 0&&l.data_source_type!==null&&(this.data_source_type=l.data_source_type),l.data_source_id!==void 0&&l.data_source_id!==null&&(this.data_source_id=l.data_source_id),l.is_deleted!==void 0&&l.is_deleted!==null&&(this.is_deleted=l.is_deleted),l.data_source_name!==void 0&&l.data_source_name!==null&&(this.data_source_name=l.data_source_name))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.id=l.readI32():l.skip(m);break;case 2:m==r.Type.STRING?this.name=l.readString():l.skip(m);break;case 4:m==r.Type.STRING?this.expression_json=l.readString():l.skip(m);break;case 5:m==r.Type.I32?this.data_source_type=l.readI32():l.skip(m);break;case 6:m==r.Type.I32?this.data_source_id=l.readI32():l.skip(m);break;case 7:m==r.Type.BOOL?this.is_deleted=l.readBool():l.skip(m);break;case 8:m==r.Type.STRING?this.data_source_name=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TCustomExpression"),this.id!==null&&this.id!==void 0&&(l.writeFieldBegin("id",r.Type.I32,1),l.writeI32(this.id),l.writeFieldEnd()),this.name!==null&&this.name!==void 0&&(l.writeFieldBegin("name",r.Type.STRING,2),l.writeString(this.name),l.writeFieldEnd()),this.expression_json!==null&&this.expression_json!==void 0&&(l.writeFieldBegin("expression_json",r.Type.STRING,4),l.writeString(this.expression_json),l.writeFieldEnd()),this.data_source_type!==null&&this.data_source_type!==void 0&&(l.writeFieldBegin("data_source_type",r.Type.I32,5),l.writeI32(this.data_source_type),l.writeFieldEnd()),this.data_source_id!==null&&this.data_source_id!==void 0&&(l.writeFieldBegin("data_source_id",r.Type.I32,6),l.writeI32(this.data_source_id),l.writeFieldEnd()),this.is_deleted!==null&&this.is_deleted!==void 0&&(l.writeFieldBegin("is_deleted",r.Type.BOOL,7),l.writeBool(this.is_deleted),l.writeFieldEnd()),this.data_source_name!==null&&this.data_source_name!==void 0&&(l.writeFieldBegin("data_source_name",r.Type.STRING,8),l.writeString(this.data_source_name),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TQueryInfo=class{constructor(l){this.query_session_id=null,this.query_public_session_id=null,this.current_status=null,this.executor_id=null,this.submitted=null,this.query_str=null,this.login_name=null,this.client_address=null,this.db_name=null,this.exec_device_type=null,l&&(l.query_session_id!==void 0&&l.query_session_id!==null&&(this.query_session_id=l.query_session_id),l.query_public_session_id!==void 0&&l.query_public_session_id!==null&&(this.query_public_session_id=l.query_public_session_id),l.current_status!==void 0&&l.current_status!==null&&(this.current_status=l.current_status),l.executor_id!==void 0&&l.executor_id!==null&&(this.executor_id=l.executor_id),l.submitted!==void 0&&l.submitted!==null&&(this.submitted=l.submitted),l.query_str!==void 0&&l.query_str!==null&&(this.query_str=l.query_str),l.login_name!==void 0&&l.login_name!==null&&(this.login_name=l.login_name),l.client_address!==void 0&&l.client_address!==null&&(this.client_address=l.client_address),l.db_name!==void 0&&l.db_name!==null&&(this.db_name=l.db_name),l.exec_device_type!==void 0&&l.exec_device_type!==null&&(this.exec_device_type=l.exec_device_type))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.STRING?this.query_session_id=l.readString():l.skip(m);break;case 2:m==r.Type.STRING?this.query_public_session_id=l.readString():l.skip(m);break;case 3:m==r.Type.STRING?this.current_status=l.readString():l.skip(m);break;case 4:m==r.Type.I32?this.executor_id=l.readI32():l.skip(m);break;case 5:m==r.Type.STRING?this.submitted=l.readString():l.skip(m);break;case 6:m==r.Type.STRING?this.query_str=l.readString():l.skip(m);break;case 7:m==r.Type.STRING?this.login_name=l.readString():l.skip(m);break;case 8:m==r.Type.STRING?this.client_address=l.readString():l.skip(m);break;case 9:m==r.Type.STRING?this.db_name=l.readString():l.skip(m);break;case 10:m==r.Type.STRING?this.exec_device_type=l.readString():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TQueryInfo"),this.query_session_id!==null&&this.query_session_id!==void 0&&(l.writeFieldBegin("query_session_id",r.Type.STRING,1),l.writeString(this.query_session_id),l.writeFieldEnd()),this.query_public_session_id!==null&&this.query_public_session_id!==void 0&&(l.writeFieldBegin("query_public_session_id",r.Type.STRING,2),l.writeString(this.query_public_session_id),l.writeFieldEnd()),this.current_status!==null&&this.current_status!==void 0&&(l.writeFieldBegin("current_status",r.Type.STRING,3),l.writeString(this.current_status),l.writeFieldEnd()),this.executor_id!==null&&this.executor_id!==void 0&&(l.writeFieldBegin("executor_id",r.Type.I32,4),l.writeI32(this.executor_id),l.writeFieldEnd()),this.submitted!==null&&this.submitted!==void 0&&(l.writeFieldBegin("submitted",r.Type.STRING,5),l.writeString(this.submitted),l.writeFieldEnd()),this.query_str!==null&&this.query_str!==void 0&&(l.writeFieldBegin("query_str",r.Type.STRING,6),l.writeString(this.query_str),l.writeFieldEnd()),this.login_name!==null&&this.login_name!==void 0&&(l.writeFieldBegin("login_name",r.Type.STRING,7),l.writeString(this.login_name),l.writeFieldEnd()),this.client_address!==null&&this.client_address!==void 0&&(l.writeFieldBegin("client_address",r.Type.STRING,8),l.writeString(this.client_address),l.writeFieldEnd()),this.db_name!==null&&this.db_name!==void 0&&(l.writeFieldBegin("db_name",r.Type.STRING,9),l.writeString(this.db_name),l.writeFieldEnd()),this.exec_device_type!==null&&this.exec_device_type!==void 0&&(l.writeFieldBegin("exec_device_type",r.Type.STRING,10),l.writeString(this.exec_device_type),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}},c.exports.TLeafInfo=class{constructor(l){this.leaf_id=null,this.num_leaves=null,l&&(l.leaf_id!==void 0&&l.leaf_id!==null&&(this.leaf_id=l.leaf_id),l.num_leaves!==void 0&&l.num_leaves!==null&&(this.num_leaves=l.num_leaves))}read(l){for(l.readStructBegin();;){const b=l.readFieldBegin(),m=b.ftype,E=b.fid;if(m==r.Type.STOP)break;switch(E){case 1:m==r.Type.I32?this.leaf_id=l.readI32():l.skip(m);break;case 2:m==r.Type.I32?this.num_leaves=l.readI32():l.skip(m);break;default:l.skip(m)}l.readFieldEnd()}l.readStructEnd()}write(l){l.writeStructBegin("TLeafInfo"),this.leaf_id!==null&&this.leaf_id!==void 0&&(l.writeFieldBegin("leaf_id",r.Type.I32,1),l.writeI32(this.leaf_id),l.writeFieldEnd()),this.num_leaves!==null&&this.num_leaves!==void 0&&(l.writeFieldBegin("num_leaves",r.Type.I32,2),l.writeI32(this.num_leaves),l.writeFieldEnd()),l.writeFieldStop(),l.writeStructEnd()}}},3962:(c,d,f)=>{const r=f(9262).Thrift;f(135);const h=f(2818),p=c.exports={};p.TResultSetLayout={GroupByPerfectHash:0,GroupByBaselineHash:1,Projection:2,NonGroupedAggregate:3},p.TCountDistinctImplType={Invalid:0,Bitmap:1,UnorderedSet:2},p.TAggKind={AVG:0,MIN:1,MAX:2,SUM:3,COUNT:4,APPROX_COUNT_DISTINCT:5,SAMPLE:6,SINGLE_VALUE:7},c.exports.TSlotSize=class{constructor(_){this.padded=null,this.logical=null,_&&(_.padded!==void 0&&_.padded!==null&&(this.padded=_.padded),_.logical!==void 0&&_.logical!==null&&(this.logical=_.logical))}read(_){for(_.readStructBegin();;){const l=_.readFieldBegin(),b=l.ftype,m=l.fid;if(b==r.Type.STOP)break;switch(m){case 1:b==r.Type.I16?this.padded=_.readI16():_.skip(b);break;case 2:b==r.Type.I16?this.logical=_.readI16():_.skip(b);break;default:_.skip(b)}_.readFieldEnd()}_.readStructEnd()}write(_){_.writeStructBegin("TSlotSize"),this.padded!==null&&this.padded!==void 0&&(_.writeFieldBegin("padded",r.Type.I16,1),_.writeI16(this.padded),_.writeFieldEnd()),this.logical!==null&&this.logical!==void 0&&(_.writeFieldBegin("logical",r.Type.I16,2),_.writeI16(this.logical),_.writeFieldEnd()),_.writeFieldStop(),_.writeStructEnd()}},c.exports.TColSlotContext=class{constructor(_){this.slot_sizes=null,this.col_to_slot_map=null,_&&(_.slot_sizes!==void 0&&_.slot_sizes!==null&&(this.slot_sizes=r.copyList(_.slot_sizes,[p.TSlotSize])),_.col_to_slot_map!==void 0&&_.col_to_slot_map!==null&&(this.col_to_slot_map=r.copyList(_.col_to_slot_map,[r.copyList,null])))}read(_){for(_.readStructBegin();;){const l=_.readFieldBegin(),b=l.ftype,m=l.fid;if(b==r.Type.STOP)break;switch(m){case 1:if(b==r.Type.LIST){this.slot_sizes=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=new p.TSlotSize,k.read(_),this.slot_sizes.push(k)}_.readListEnd()}else _.skip(b);break;case 2:if(b==r.Type.LIST){this.col_to_slot_map=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=[];const x=_.readListBegin().size||0;for(let M=0;M<x;++M){let R=null;R=_.readI32(),k.push(R)}_.readListEnd(),this.col_to_slot_map.push(k)}_.readListEnd()}else _.skip(b);break;default:_.skip(b)}_.readFieldEnd()}_.readStructEnd()}write(_){if(_.writeStructBegin("TColSlotContext"),this.slot_sizes!==null&&this.slot_sizes!==void 0){_.writeFieldBegin("slot_sizes",r.Type.LIST,1),_.writeListBegin(r.Type.STRUCT,this.slot_sizes.length);for(let l in this.slot_sizes)this.slot_sizes.hasOwnProperty(l)&&(l=this.slot_sizes[l],l.write(_));_.writeListEnd(),_.writeFieldEnd()}if(this.col_to_slot_map!==null&&this.col_to_slot_map!==void 0){_.writeFieldBegin("col_to_slot_map",r.Type.LIST,2),_.writeListBegin(r.Type.LIST,this.col_to_slot_map.length);for(let l in this.col_to_slot_map)if(this.col_to_slot_map.hasOwnProperty(l)){l=this.col_to_slot_map[l],_.writeListBegin(r.Type.I32,l.length);for(let b in l)l.hasOwnProperty(b)&&(b=l[b],_.writeI32(b));_.writeListEnd()}_.writeListEnd(),_.writeFieldEnd()}_.writeFieldStop(),_.writeStructEnd()}},c.exports.TCountDistinctDescriptor=class{constructor(_){this.impl_type=null,this.min_val=null,this.bitmap_sz_bits=null,this.approximate=null,this.device_type=null,this.sub_bitmap_count=null,_&&(_.impl_type!==void 0&&_.impl_type!==null&&(this.impl_type=_.impl_type),_.min_val!==void 0&&_.min_val!==null&&(this.min_val=_.min_val),_.bitmap_sz_bits!==void 0&&_.bitmap_sz_bits!==null&&(this.bitmap_sz_bits=_.bitmap_sz_bits),_.approximate!==void 0&&_.approximate!==null&&(this.approximate=_.approximate),_.device_type!==void 0&&_.device_type!==null&&(this.device_type=_.device_type),_.sub_bitmap_count!==void 0&&_.sub_bitmap_count!==null&&(this.sub_bitmap_count=_.sub_bitmap_count))}read(_){for(_.readStructBegin();;){const l=_.readFieldBegin(),b=l.ftype,m=l.fid;if(b==r.Type.STOP)break;switch(m){case 1:b==r.Type.I32?this.impl_type=_.readI32():_.skip(b);break;case 2:b==r.Type.I64?this.min_val=_.readI64():_.skip(b);break;case 3:b==r.Type.I64?this.bitmap_sz_bits=_.readI64():_.skip(b);break;case 4:b==r.Type.BOOL?this.approximate=_.readBool():_.skip(b);break;case 5:b==r.Type.I32?this.device_type=_.readI32():_.skip(b);break;case 6:b==r.Type.I64?this.sub_bitmap_count=_.readI64():_.skip(b);break;default:_.skip(b)}_.readFieldEnd()}_.readStructEnd()}write(_){_.writeStructBegin("TCountDistinctDescriptor"),this.impl_type!==null&&this.impl_type!==void 0&&(_.writeFieldBegin("impl_type",r.Type.I32,1),_.writeI32(this.impl_type),_.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(_.writeFieldBegin("min_val",r.Type.I64,2),_.writeI64(this.min_val),_.writeFieldEnd()),this.bitmap_sz_bits!==null&&this.bitmap_sz_bits!==void 0&&(_.writeFieldBegin("bitmap_sz_bits",r.Type.I64,3),_.writeI64(this.bitmap_sz_bits),_.writeFieldEnd()),this.approximate!==null&&this.approximate!==void 0&&(_.writeFieldBegin("approximate",r.Type.BOOL,4),_.writeBool(this.approximate),_.writeFieldEnd()),this.device_type!==null&&this.device_type!==void 0&&(_.writeFieldBegin("device_type",r.Type.I32,5),_.writeI32(this.device_type),_.writeFieldEnd()),this.sub_bitmap_count!==null&&this.sub_bitmap_count!==void 0&&(_.writeFieldBegin("sub_bitmap_count",r.Type.I64,6),_.writeI64(this.sub_bitmap_count),_.writeFieldEnd()),_.writeFieldStop(),_.writeStructEnd()}},c.exports.TResultSetBufferDescriptor=class{constructor(_){this.layout=null,this.keyless=null,this.entry_count=null,this.idx_target_as_key=null,this.min_val=null,this.max_val=null,this.bucket=null,this.group_col_widths=null,this.key_bytewidth=null,this.col_slot_context=null,this.target_groupby_indices=null,this.count_distinct_descriptors=null,this.force_4byte_float=null,_&&(_.layout!==void 0&&_.layout!==null&&(this.layout=_.layout),_.keyless!==void 0&&_.keyless!==null&&(this.keyless=_.keyless),_.entry_count!==void 0&&_.entry_count!==null&&(this.entry_count=_.entry_count),_.idx_target_as_key!==void 0&&_.idx_target_as_key!==null&&(this.idx_target_as_key=_.idx_target_as_key),_.min_val!==void 0&&_.min_val!==null&&(this.min_val=_.min_val),_.max_val!==void 0&&_.max_val!==null&&(this.max_val=_.max_val),_.bucket!==void 0&&_.bucket!==null&&(this.bucket=_.bucket),_.group_col_widths!==void 0&&_.group_col_widths!==null&&(this.group_col_widths=r.copyList(_.group_col_widths,[null])),_.key_bytewidth!==void 0&&_.key_bytewidth!==null&&(this.key_bytewidth=_.key_bytewidth),_.col_slot_context!==void 0&&_.col_slot_context!==null&&(this.col_slot_context=new p.TColSlotContext(_.col_slot_context)),_.target_groupby_indices!==void 0&&_.target_groupby_indices!==null&&(this.target_groupby_indices=r.copyList(_.target_groupby_indices,[null])),_.count_distinct_descriptors!==void 0&&_.count_distinct_descriptors!==null&&(this.count_distinct_descriptors=r.copyList(_.count_distinct_descriptors,[p.TCountDistinctDescriptor])),_.force_4byte_float!==void 0&&_.force_4byte_float!==null&&(this.force_4byte_float=_.force_4byte_float))}read(_){for(_.readStructBegin();;){const l=_.readFieldBegin(),b=l.ftype,m=l.fid;if(b==r.Type.STOP)break;switch(m){case 1:b==r.Type.I32?this.layout=_.readI32():_.skip(b);break;case 2:b==r.Type.BOOL?this.keyless=_.readBool():_.skip(b);break;case 3:b==r.Type.I32?this.entry_count=_.readI32():_.skip(b);break;case 4:b==r.Type.I32?this.idx_target_as_key=_.readI32():_.skip(b);break;case 5:b==r.Type.I64?this.min_val=_.readI64():_.skip(b);break;case 6:b==r.Type.I64?this.max_val=_.readI64():_.skip(b);break;case 7:b==r.Type.I64?this.bucket=_.readI64():_.skip(b);break;case 8:if(b==r.Type.LIST){this.group_col_widths=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=_.readI16(),this.group_col_widths.push(k)}_.readListEnd()}else _.skip(b);break;case 9:b==r.Type.I16?this.key_bytewidth=_.readI16():_.skip(b);break;case 10:b==r.Type.STRUCT?(this.col_slot_context=new p.TColSlotContext,this.col_slot_context.read(_)):_.skip(b);break;case 11:if(b==r.Type.LIST){this.target_groupby_indices=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=_.readI32(),this.target_groupby_indices.push(k)}_.readListEnd()}else _.skip(b);break;case 12:if(b==r.Type.LIST){this.count_distinct_descriptors=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=new p.TCountDistinctDescriptor,k.read(_),this.count_distinct_descriptors.push(k)}_.readListEnd()}else _.skip(b);break;case 13:b==r.Type.BOOL?this.force_4byte_float=_.readBool():_.skip(b);break;default:_.skip(b)}_.readFieldEnd()}_.readStructEnd()}write(_){if(_.writeStructBegin("TResultSetBufferDescriptor"),this.layout!==null&&this.layout!==void 0&&(_.writeFieldBegin("layout",r.Type.I32,1),_.writeI32(this.layout),_.writeFieldEnd()),this.keyless!==null&&this.keyless!==void 0&&(_.writeFieldBegin("keyless",r.Type.BOOL,2),_.writeBool(this.keyless),_.writeFieldEnd()),this.entry_count!==null&&this.entry_count!==void 0&&(_.writeFieldBegin("entry_count",r.Type.I32,3),_.writeI32(this.entry_count),_.writeFieldEnd()),this.idx_target_as_key!==null&&this.idx_target_as_key!==void 0&&(_.writeFieldBegin("idx_target_as_key",r.Type.I32,4),_.writeI32(this.idx_target_as_key),_.writeFieldEnd()),this.min_val!==null&&this.min_val!==void 0&&(_.writeFieldBegin("min_val",r.Type.I64,5),_.writeI64(this.min_val),_.writeFieldEnd()),this.max_val!==null&&this.max_val!==void 0&&(_.writeFieldBegin("max_val",r.Type.I64,6),_.writeI64(this.max_val),_.writeFieldEnd()),this.bucket!==null&&this.bucket!==void 0&&(_.writeFieldBegin("bucket",r.Type.I64,7),_.writeI64(this.bucket),_.writeFieldEnd()),this.group_col_widths!==null&&this.group_col_widths!==void 0){_.writeFieldBegin("group_col_widths",r.Type.LIST,8),_.writeListBegin(r.Type.I16,this.group_col_widths.length);for(let l in this.group_col_widths)this.group_col_widths.hasOwnProperty(l)&&(l=this.group_col_widths[l],_.writeI16(l));_.writeListEnd(),_.writeFieldEnd()}if(this.key_bytewidth!==null&&this.key_bytewidth!==void 0&&(_.writeFieldBegin("key_bytewidth",r.Type.I16,9),_.writeI16(this.key_bytewidth),_.writeFieldEnd()),this.col_slot_context!==null&&this.col_slot_context!==void 0&&(_.writeFieldBegin("col_slot_context",r.Type.STRUCT,10),this.col_slot_context.write(_),_.writeFieldEnd()),this.target_groupby_indices!==null&&this.target_groupby_indices!==void 0){_.writeFieldBegin("target_groupby_indices",r.Type.LIST,11),_.writeListBegin(r.Type.I32,this.target_groupby_indices.length);for(let l in this.target_groupby_indices)this.target_groupby_indices.hasOwnProperty(l)&&(l=this.target_groupby_indices[l],_.writeI32(l));_.writeListEnd(),_.writeFieldEnd()}if(this.count_distinct_descriptors!==null&&this.count_distinct_descriptors!==void 0){_.writeFieldBegin("count_distinct_descriptors",r.Type.LIST,12),_.writeListBegin(r.Type.STRUCT,this.count_distinct_descriptors.length);for(let l in this.count_distinct_descriptors)this.count_distinct_descriptors.hasOwnProperty(l)&&(l=this.count_distinct_descriptors[l],l.write(_));_.writeListEnd(),_.writeFieldEnd()}this.force_4byte_float!==null&&this.force_4byte_float!==void 0&&(_.writeFieldBegin("force_4byte_float",r.Type.BOOL,13),_.writeBool(this.force_4byte_float),_.writeFieldEnd()),_.writeFieldStop(),_.writeStructEnd()}},c.exports.TTargetInfo=class{constructor(_){this.is_agg=null,this.kind=null,this.type=null,this.arg_type=null,this.skip_nulls=null,this.is_distinct=null,_&&(_.is_agg!==void 0&&_.is_agg!==null&&(this.is_agg=_.is_agg),_.kind!==void 0&&_.kind!==null&&(this.kind=_.kind),_.type!==void 0&&_.type!==null&&(this.type=new h.TTypeInfo(_.type)),_.arg_type!==void 0&&_.arg_type!==null&&(this.arg_type=new h.TTypeInfo(_.arg_type)),_.skip_nulls!==void 0&&_.skip_nulls!==null&&(this.skip_nulls=_.skip_nulls),_.is_distinct!==void 0&&_.is_distinct!==null&&(this.is_distinct=_.is_distinct))}read(_){for(_.readStructBegin();;){const l=_.readFieldBegin(),b=l.ftype,m=l.fid;if(b==r.Type.STOP)break;switch(m){case 1:b==r.Type.BOOL?this.is_agg=_.readBool():_.skip(b);break;case 2:b==r.Type.I32?this.kind=_.readI32():_.skip(b);break;case 3:b==r.Type.STRUCT?(this.type=new h.TTypeInfo,this.type.read(_)):_.skip(b);break;case 4:b==r.Type.STRUCT?(this.arg_type=new h.TTypeInfo,this.arg_type.read(_)):_.skip(b);break;case 5:b==r.Type.BOOL?this.skip_nulls=_.readBool():_.skip(b);break;case 6:b==r.Type.BOOL?this.is_distinct=_.readBool():_.skip(b);break;default:_.skip(b)}_.readFieldEnd()}_.readStructEnd()}write(_){_.writeStructBegin("TTargetInfo"),this.is_agg!==null&&this.is_agg!==void 0&&(_.writeFieldBegin("is_agg",r.Type.BOOL,1),_.writeBool(this.is_agg),_.writeFieldEnd()),this.kind!==null&&this.kind!==void 0&&(_.writeFieldBegin("kind",r.Type.I32,2),_.writeI32(this.kind),_.writeFieldEnd()),this.type!==null&&this.type!==void 0&&(_.writeFieldBegin("type",r.Type.STRUCT,3),this.type.write(_),_.writeFieldEnd()),this.arg_type!==null&&this.arg_type!==void 0&&(_.writeFieldBegin("arg_type",r.Type.STRUCT,4),this.arg_type.write(_),_.writeFieldEnd()),this.skip_nulls!==null&&this.skip_nulls!==void 0&&(_.writeFieldBegin("skip_nulls",r.Type.BOOL,5),_.writeBool(this.skip_nulls),_.writeFieldEnd()),this.is_distinct!==null&&this.is_distinct!==void 0&&(_.writeFieldBegin("is_distinct",r.Type.BOOL,6),_.writeBool(this.is_distinct),_.writeFieldEnd()),_.writeFieldStop(),_.writeStructEnd()}},c.exports.TCountDistinctSetStorage=class{constructor(_){this.bitmap=null,this.sparse_set=null,_&&(_.bitmap!==void 0&&_.bitmap!==null&&(this.bitmap=_.bitmap),_.sparse_set!==void 0&&_.sparse_set!==null&&(this.sparse_set=r.copyList(_.sparse_set,[null])))}read(_){for(_.readStructBegin();;){const l=_.readFieldBegin(),b=l.ftype,m=l.fid;if(b==r.Type.STOP)break;switch(m){case 1:b==r.Type.STRING?this.bitmap=_.readBinary():_.skip(b);break;case 2:if(b==r.Type.SET){this.sparse_set=[];const B=_.readSetBegin().size||0;for(let I=0;I<B;++I){let k=null;k=_.readI64(),this.sparse_set.push(k)}_.readSetEnd()}else _.skip(b);break;default:_.skip(b)}_.readFieldEnd()}_.readStructEnd()}write(_){if(_.writeStructBegin("TCountDistinctSetStorage"),this.bitmap!==null&&this.bitmap!==void 0&&(_.writeFieldBegin("bitmap",r.Type.STRING,1),_.writeBinary(this.bitmap),_.writeFieldEnd()),this.sparse_set!==null&&this.sparse_set!==void 0){_.writeFieldBegin("sparse_set",r.Type.SET,2),_.writeSetBegin(r.Type.I64,this.sparse_set.length);for(let l in this.sparse_set)this.sparse_set.hasOwnProperty(l)&&(l=this.sparse_set[l],_.writeI64(l));_.writeSetEnd(),_.writeFieldEnd()}_.writeFieldStop(),_.writeStructEnd()}},c.exports.TCountDistinctSet=class{constructor(_){this.type=null,this.storage=null,this.remote_ptr=null,_&&(_.type!==void 0&&_.type!==null&&(this.type=_.type),_.storage!==void 0&&_.storage!==null&&(this.storage=new p.TCountDistinctSetStorage(_.storage)),_.remote_ptr!==void 0&&_.remote_ptr!==null&&(this.remote_ptr=_.remote_ptr))}read(_){for(_.readStructBegin();;){const l=_.readFieldBegin(),b=l.ftype,m=l.fid;if(b==r.Type.STOP)break;switch(m){case 1:b==r.Type.I32?this.type=_.readI32():_.skip(b);break;case 2:b==r.Type.STRUCT?(this.storage=new p.TCountDistinctSetStorage,this.storage.read(_)):_.skip(b);break;case 3:b==r.Type.I64?this.remote_ptr=_.readI64():_.skip(b);break;default:_.skip(b)}_.readFieldEnd()}_.readStructEnd()}write(_){_.writeStructBegin("TCountDistinctSet"),this.type!==null&&this.type!==void 0&&(_.writeFieldBegin("type",r.Type.I32,1),_.writeI32(this.type),_.writeFieldEnd()),this.storage!==null&&this.storage!==void 0&&(_.writeFieldBegin("storage",r.Type.STRUCT,2),this.storage.write(_),_.writeFieldEnd()),this.remote_ptr!==null&&this.remote_ptr!==void 0&&(_.writeFieldBegin("remote_ptr",r.Type.I64,3),_.writeI64(this.remote_ptr),_.writeFieldEnd()),_.writeFieldStop(),_.writeStructEnd()}},c.exports.TSerializedRows=class{constructor(_){this.buffers=null,this.buffer_lengths=null,this.buffers_total_size=null,this.total_compression_time_ms=null,this.descriptor=null,this.targets=null,this.target_init_vals=null,this.varlen_buffer=null,this.count_distinct_sets=null,this.explanation=null,_&&(_.buffers!==void 0&&_.buffers!==null&&(this.buffers=r.copyList(_.buffers,[null])),_.buffer_lengths!==void 0&&_.buffer_lengths!==null&&(this.buffer_lengths=r.copyList(_.buffer_lengths,[null])),_.buffers_total_size!==void 0&&_.buffers_total_size!==null&&(this.buffers_total_size=_.buffers_total_size),_.total_compression_time_ms!==void 0&&_.total_compression_time_ms!==null&&(this.total_compression_time_ms=_.total_compression_time_ms),_.descriptor!==void 0&&_.descriptor!==null&&(this.descriptor=new p.TResultSetBufferDescriptor(_.descriptor)),_.targets!==void 0&&_.targets!==null&&(this.targets=r.copyList(_.targets,[p.TTargetInfo])),_.target_init_vals!==void 0&&_.target_init_vals!==null&&(this.target_init_vals=r.copyList(_.target_init_vals,[null])),_.varlen_buffer!==void 0&&_.varlen_buffer!==null&&(this.varlen_buffer=r.copyList(_.varlen_buffer,[null])),_.count_distinct_sets!==void 0&&_.count_distinct_sets!==null&&(this.count_distinct_sets=r.copyList(_.count_distinct_sets,[p.TCountDistinctSet])),_.explanation!==void 0&&_.explanation!==null&&(this.explanation=_.explanation))}read(_){for(_.readStructBegin();;){const l=_.readFieldBegin(),b=l.ftype,m=l.fid;if(b==r.Type.STOP)break;switch(m){case 1:if(b==r.Type.LIST){this.buffers=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=_.readBinary(),this.buffers.push(k)}_.readListEnd()}else _.skip(b);break;case 2:if(b==r.Type.LIST){this.buffer_lengths=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=_.readI64(),this.buffer_lengths.push(k)}_.readListEnd()}else _.skip(b);break;case 3:b==r.Type.I64?this.buffers_total_size=_.readI64():_.skip(b);break;case 4:b==r.Type.I32?this.total_compression_time_ms=_.readI32():_.skip(b);break;case 5:b==r.Type.STRUCT?(this.descriptor=new p.TResultSetBufferDescriptor,this.descriptor.read(_)):_.skip(b);break;case 6:if(b==r.Type.LIST){this.targets=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=new p.TTargetInfo,k.read(_),this.targets.push(k)}_.readListEnd()}else _.skip(b);break;case 7:if(b==r.Type.LIST){this.target_init_vals=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=_.readI64(),this.target_init_vals.push(k)}_.readListEnd()}else _.skip(b);break;case 8:if(b==r.Type.LIST){this.varlen_buffer=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=_.readBinary(),this.varlen_buffer.push(k)}_.readListEnd()}else _.skip(b);break;case 9:if(b==r.Type.LIST){this.count_distinct_sets=[];const B=_.readListBegin().size||0;for(let I=0;I<B;++I){let k=null;k=new p.TCountDistinctSet,k.read(_),this.count_distinct_sets.push(k)}_.readListEnd()}else _.skip(b);break;case 10:b==r.Type.STRING?this.explanation=_.readString():_.skip(b);break;default:_.skip(b)}_.readFieldEnd()}_.readStructEnd()}write(_){if(_.writeStructBegin("TSerializedRows"),this.buffers!==null&&this.buffers!==void 0){_.writeFieldBegin("buffers",r.Type.LIST,1),_.writeListBegin(r.Type.STRING,this.buffers.length);for(let l in this.buffers)this.buffers.hasOwnProperty(l)&&(l=this.buffers[l],_.writeBinary(l));_.writeListEnd(),_.writeFieldEnd()}if(this.buffer_lengths!==null&&this.buffer_lengths!==void 0){_.writeFieldBegin("buffer_lengths",r.Type.LIST,2),_.writeListBegin(r.Type.I64,this.buffer_lengths.length);for(let l in this.buffer_lengths)this.buffer_lengths.hasOwnProperty(l)&&(l=this.buffer_lengths[l],_.writeI64(l));_.writeListEnd(),_.writeFieldEnd()}if(this.buffers_total_size!==null&&this.buffers_total_size!==void 0&&(_.writeFieldBegin("buffers_total_size",r.Type.I64,3),_.writeI64(this.buffers_total_size),_.writeFieldEnd()),this.total_compression_time_ms!==null&&this.total_compression_time_ms!==void 0&&(_.writeFieldBegin("total_compression_time_ms",r.Type.I32,4),_.writeI32(this.total_compression_time_ms),_.writeFieldEnd()),this.descriptor!==null&&this.descriptor!==void 0&&(_.writeFieldBegin("descriptor",r.Type.STRUCT,5),this.descriptor.write(_),_.writeFieldEnd()),this.targets!==null&&this.targets!==void 0){_.writeFieldBegin("targets",r.Type.LIST,6),_.writeListBegin(r.Type.STRUCT,this.targets.length);for(let l in this.targets)this.targets.hasOwnProperty(l)&&(l=this.targets[l],l.write(_));_.writeListEnd(),_.writeFieldEnd()}if(this.target_init_vals!==null&&this.target_init_vals!==void 0){_.writeFieldBegin("target_init_vals",r.Type.LIST,7),_.writeListBegin(r.Type.I64,this.target_init_vals.length);for(let l in this.target_init_vals)this.target_init_vals.hasOwnProperty(l)&&(l=this.target_init_vals[l],_.writeI64(l));_.writeListEnd(),_.writeFieldEnd()}if(this.varlen_buffer!==null&&this.varlen_buffer!==void 0){_.writeFieldBegin("varlen_buffer",r.Type.LIST,8),_.writeListBegin(r.Type.STRING,this.varlen_buffer.length);for(let l in this.varlen_buffer)this.varlen_buffer.hasOwnProperty(l)&&(l=this.varlen_buffer[l],_.writeBinary(l));_.writeListEnd(),_.writeFieldEnd()}if(this.count_distinct_sets!==null&&this.count_distinct_sets!==void 0){_.writeFieldBegin("count_distinct_sets",r.Type.LIST,9),_.writeListBegin(r.Type.STRUCT,this.count_distinct_sets.length);for(let l in this.count_distinct_sets)this.count_distinct_sets.hasOwnProperty(l)&&(l=this.count_distinct_sets[l],l.write(_));_.writeListEnd(),_.writeFieldEnd()}this.explanation!==null&&this.explanation!==void 0&&(_.writeFieldBegin("explanation",r.Type.STRING,10),_.writeString(this.explanation),_.writeFieldEnd()),_.writeFieldStop(),_.writeStructEnd()}}},2003:c=>{c.exports=n}},s={};function a(c){if(s[c])return s[c].exports;var d=s[c]={exports:{}};return i[c](d,d.exports,a),d.exports}return a.n=c=>{var d=c&&c.__esModule?()=>c.default:()=>c;return a.d(d,{a:d}),d},a.d=(c,d)=>{for(var f in d)a.o(d,f)&&!a.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(c,d)=>Object.prototype.hasOwnProperty.call(c,d),a.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a(7123)})()})})(aG);var jye=aG.exports;const $ye=Jh(jye);new $ye;class zye{constructor(t){this.db=t,this.views=new zue,this.filters=new Map,this.index=new Map}async view0D(t){await this.assertDataExists();const n=new Vl(this);return this.views.add(n),t&&n.addOnChangeListener(t),n}async view1D(t,n){await this.assertDataExists(t);const i=new Ca(this,t);return this.views.add(i),n&&i.addOnChangeListener(n),i}async entries({offset:t=0,length:n=1/0}={}){return this.db.entries(t,n,this.filters)}async all(){for(const t of this.views)await t.all()}async link(){const t=this.views.active;t?(await t.computeIndex(!0),await t.select(t.lastFilter,!0)):await this.all()}get passiveFilters(){const t=this.views.active;if(t instanceof Vl)throw Error("No filter for 0D view / count");if(t instanceof Ca)return d3(this.filters,t.dimension);throw Error("2D view not implemented yet")}otherFilters(t){return d3(this.filters,t.dimension)}async assertDataExists(...t){if(!await this.db.tableExists())throw new Error("Table does not exists in the database");t==null||t.forEach(async i=>{if(i&&!await this.db.dimensionExists(i))throw new Error(`Dimension '${i.name}' does not exist in the data table`)})}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var qye=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)s.hasOwnProperty(a)&&(i[a]=s[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vye=Object.prototype.hasOwnProperty;function Fk(e,t){return Vye.call(e,t)}function kk(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var s in e)Fk(e,s)&&i.push(s);return i}function Ws(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function xk(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Nd(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function zG(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Mk(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Mk(e[t]))return!0}else if(typeof e=="object"){for(var i=kk(e),s=i.length,a=0;a<s;a++)if(Mk(e[i[a]]))return!0}}return!1}function rU(e,t){var n=[e];for(var i in t){var s=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof s<"u"&&n.push(i+": "+s)}return n.join(`
`)}var qG=function(e){qye(t,e);function t(n,i,s,a,c){var d=this.constructor,f=e.call(this,rU(n,{name:i,index:s,operation:a,tree:c}))||this;return f.name=i,f.index=s,f.operation=a,f.tree=c,Object.setPrototypeOf(f,d.prototype),f.message=rU(n,{name:i,index:s,operation:a,tree:c}),f}return t}(Error),Mn=qG,Gye=Ws,Ou={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Av(n,this.path);i&&(i=Ws(i));var s=Yd(n,{op:"remove",path:this.from}).removed;return Yd(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Av(n,this.from);return Yd(n,{op:"add",path:this.path,value:Ws(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:xg(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Hye={add:function(e,t,n){return xk(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Ou.move,copy:Ou.copy,test:Ou.test,_get:Ou._get};function Av(e,t){if(t=="")return e;var n={op:"_get",path:t};return Yd(e,n),n.value}function Yd(e,t,n,i,s,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Ov(t,0)),t.path===""){var c={newDocument:e};if(t.op==="add")return c.newDocument=t.value,c;if(t.op==="replace")return c.newDocument=t.value,c.removed=e,c;if(t.op==="move"||t.op==="copy")return c.newDocument=Av(e,t.from),t.op==="move"&&(c.removed=e),c;if(t.op==="test"){if(c.test=xg(e,t.value),c.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return c.newDocument=e,c}else{if(t.op==="remove")return c.removed=e,c.newDocument=null,c;if(t.op==="_get")return t.value=e,c;if(n)throw new Mn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return c}}else{i||(e=Ws(e));var d=t.path||"",f=d.split("/"),u=e,r=1,h=f.length,p=void 0,_=void 0,l=void 0;for(typeof n=="function"?l=n:l=Ov;;){if(_=f[r],_&&_.indexOf("~")!=-1&&(_=zG(_)),s&&(_=="__proto__"||_=="prototype"&&r>0&&f[r-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[_]===void 0?p=f.slice(0,r).join("/"):r==h-1&&(p=t.path),p!==void 0&&l(t,0,e,p)),r++,Array.isArray(u)){if(_==="-")_=u.length;else{if(n&&!xk(_))throw new Mn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);xk(_)&&(_=~~_)}if(r>=h){if(n&&t.op==="add"&&_>u.length)throw new Mn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var c=Hye[t.op].call(t,u,_,e);if(c.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return c}}else if(r>=h){var c=Ou[t.op].call(t,u,_,e);if(c.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return c}if(u=u[_],n&&r<h&&(!u||typeof u!="object"))throw new Mn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function pE(e,t,n,i,s){if(i===void 0&&(i=!0),s===void 0&&(s=!0),n&&!Array.isArray(t))throw new Mn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=Ws(e));for(var a=new Array(t.length),c=0,d=t.length;c<d;c++)a[c]=Yd(e,t[c],n,!0,s,c),e=a[c].newDocument;return a.newDocument=e,a}function Wye(e,t,n){var i=Yd(e,t);if(i.test===!1)throw new Mn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Ov(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Mn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Ou[e.op]){if(typeof e.path!="string")throw new Mn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Mn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Mn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Mn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Mk(e.value))throw new Mn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var s=e.path.split("/").length,a=i.split("/").length;if(s!==a+1&&s!==a)throw new Mn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Mn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var c={op:"_get",path:e.from,value:void 0},d=VG([c],n);if(d&&d.name==="OPERATION_PATH_UNRESOLVABLE")throw new Mn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Mn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function VG(e,t,n){try{if(!Array.isArray(e))throw new Mn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)pE(Ws(t),Ws(e),n||!0);else{n=n||Ov;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(s){if(s instanceof Mn)return s;throw s}}function xg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),s,a,c;if(n&&i){if(a=e.length,a!=t.length)return!1;for(s=a;s--!==0;)if(!xg(e[s],t[s]))return!1;return!0}if(n!=i)return!1;var d=Object.keys(e);if(a=d.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!t.hasOwnProperty(d[s]))return!1;for(s=a;s--!==0;)if(c=d[s],!xg(e[c],t[c]))return!1;return!0}return e!==e&&t!==t}const Yye=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Mn,_areEquals:xg,applyOperation:Yd,applyPatch:pE,applyReducer:Wye,deepClone:Gye,getValueByPointer:Av,validate:VG,validator:Ov},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var BA=new WeakMap,Xye=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Kye=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Jye(e){return BA.get(e)}function Qye(e,t){return e.observers.get(t)}function Zye(e,t){e.observers.delete(t.callback)}function ege(e,t){t.unobserve()}function tge(e,t){var n=[],i,s=Jye(e);if(!s)s=new Xye(e),BA.set(e,s);else{var a=Qye(s,t);i=a&&a.observer}if(i)return i;if(i={},s.value=Ws(e),t){i.callback=t,i.next=null;var c=function(){Ak(i)},d=function(){clearTimeout(i.next),i.next=setTimeout(c)};typeof window<"u"&&(window.addEventListener("mouseup",d),window.addEventListener("keyup",d),window.addEventListener("mousedown",d),window.addEventListener("keydown",d),window.addEventListener("change",d))}return i.patches=n,i.object=e,i.unobserve=function(){Ak(i),clearTimeout(i.next),Zye(s,i),typeof window<"u"&&(window.removeEventListener("mouseup",d),window.removeEventListener("keyup",d),window.removeEventListener("mousedown",d),window.removeEventListener("keydown",d),window.removeEventListener("change",d))},s.observers.set(t,new Kye(t,i)),i}function Ak(e,t){t===void 0&&(t=!1);var n=BA.get(e.object);IA(n.value,e.object,e.patches,"",t),e.patches.length&&pE(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function IA(e,t,n,i,s){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=kk(t),c=kk(e),d=!1,f=c.length-1;f>=0;f--){var u=c[f],r=e[u];if(Fk(t,u)&&!(t[u]===void 0&&r!==void 0&&Array.isArray(t)===!1)){var h=t[u];typeof r=="object"&&r!=null&&typeof h=="object"&&h!=null&&Array.isArray(r)===Array.isArray(h)?IA(r,h,n,i+"/"+Nd(u),s):r!==h&&(s&&n.push({op:"test",path:i+"/"+Nd(u),value:Ws(r)}),n.push({op:"replace",path:i+"/"+Nd(u),value:Ws(h)}))}else Array.isArray(e)===Array.isArray(t)?(s&&n.push({op:"test",path:i+"/"+Nd(u),value:Ws(r)}),n.push({op:"remove",path:i+"/"+Nd(u)}),d=!0):(s&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!d&&a.length==c.length))for(var f=0;f<a.length;f++){var u=a[f];!Fk(e,u)&&t[u]!==void 0&&n.push({op:"add",path:i+"/"+Nd(u),value:Ws(t[u])})}}}function nge(e,t,n){n===void 0&&(n=!1);var i=[];return IA(e,t,i,"",n),i}const ige=Object.freeze(Object.defineProperty({__proto__:null,compare:nge,generate:Ak,observe:tge,unobserve:ege},Symbol.toStringTag,{value:"Module"}));Object.assign({},Yye,ige,{JsonPatchError:qG,deepClone:Ws,escapePathComponent:Nd,unescapePathComponent:zG});var sge=/("(?:[^\\"]|\\.)*")|[:,]/g,rge=function(t,n){var i,s,a;return n=n||{},i=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),s=i===""?1/0:n.maxLength===void 0?80:n.maxLength,a=n.replacer,function c(d,f,u){var r,h,p,_,l,b,m,E,B,I,k,F;if(d&&typeof d.toJSON=="function"&&(d=d.toJSON()),k=JSON.stringify(d,a),k===void 0)return k;if(m=s-f.length-u,k.length<=m&&(B=k.replace(sge,function(x,M){return M||x+" "}),B.length<=m))return B;if(a!=null&&(d=JSON.parse(k),a=void 0),typeof d=="object"&&d!==null){if(E=f+i,p=[],h=0,Array.isArray(d))for(I="[",r="]",m=d.length;h<m;h++)p.push(c(d[h],E,h===m-1?0:1)||"null");else for(I="{",r="}",b=Object.keys(d),m=b.length;h<m;h++)_=b[h],l=JSON.stringify(_)+": ",F=c(d[_],E,l.length+(h===m-1?0:1)),F!==void 0&&p.push(l+F);if(p.length>0)return[I,i+p.join(`,
`+E),r].join(`
`+f)}return k}(t,"",0)};const pI=Jh(rge);function Os(e,t,n){return e.fields=t||[],e.fname=n,e}function Rn(e){return e==null?null:e.fname}function Ni(e){return e==null?null:e.fields}function GG(e){return e.length===1?age(e[0]):oge(e)}const age=e=>function(t){return t[e]},oge=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function be(e){throw Error(e)}function go(e){const t=[],n=e.length;let i=null,s=0,a="",c,d,f;e=e+"";function u(){t.push(a+e.substring(c,d)),a="",c=d+1}for(c=d=0;d<n;++d)if(f=e[d],f==="\\")a+=e.substring(c,d++),c=d;else if(f===i)u(),i=null,s=-1;else{if(i)continue;c===s&&f==='"'||c===s&&f==="'"?(c=d+1,i=f):f==="."&&!s?d>c?u():c=d+1:f==="["?(d>c&&u(),s=c=d+1):f==="]"&&(s||be("Access path missing open bracket: "+e),s>0&&u(),s=0,c=d+1)}return s&&be("Access path missing closing bracket: "+e),i&&be("Access path missing closing quote: "+e),d>c&&(d++,u()),t}function Br(e,t,n){const i=go(e);return e=i.length===1?i[0]:e,Os((n&&n.get||GG)(i),[e],t||e)}const bm=Br("id"),Di=Os(e=>e,[],"identity"),Jl=Os(()=>0,[],"zero"),d_=Os(()=>1,[],"one"),Ir=Os(()=>!0,[],"true"),Ul=Os(()=>!1,[],"false");function lge(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const HG=0,FA=1,kA=2,WG=3,YG=4;function xA(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lge,i=e||HG;return{level(s){return arguments.length?(i=+s,this):i},error(){return i>=FA&&n(t||"error","ERROR",arguments),this},warn(){return i>=kA&&n(t||"warn","WARN",arguments),this},info(){return i>=WG&&n(t||"log","INFO",arguments),this},debug(){return i>=YG&&n(t||"log","DEBUG",arguments),this}}}var Te=Array.isArray;function je(e){return e===Object(e)}const aU=e=>e!=="__proto__";function f_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,s)=>{for(const a in s)if(a==="signals")i.signals=cge(i.signals,s.signals);else{const c=a==="legend"?{layout:1}:a==="style"?!0:null;u_(i,a,s[a],c)}return i},{})}function u_(e,t,n,i){if(!aU(t))return;let s,a;if(je(n)&&!Te(n)){a=je(e[t])?e[t]:e[t]={};for(s in n)i&&(i===!0||i[s])?u_(a,s,n[s]):aU(s)&&(a[s]=n[s])}else e[t]=n}function cge(e,t){if(e==null)return t;const n={},i=[];function s(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(s),e.forEach(s),i}function Pt(e){return e[e.length-1]}function Mi(e){return e==null||e===""?null:+e}const XG=e=>t=>e*Math.exp(t),KG=e=>t=>Math.log(e*t),JG=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),QG=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Nv=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function yE(e,t,n,i){const s=n(e[0]),a=n(Pt(e)),c=(a-s)*t;return[i(s-c),i(a-c)]}function ZG(e,t){return yE(e,t,Mi,Di)}function eH(e,t){var n=Math.sign(e[0]);return yE(e,t,KG(n),XG(n))}function tH(e,t,n){return yE(e,t,Nv(n),Nv(1/n))}function nH(e,t,n){return yE(e,t,JG(n),QG(n))}function gE(e,t,n,i,s){const a=i(e[0]),c=i(Pt(e)),d=t!=null?i(t):(a+c)/2;return[s(d+(a-d)*n),s(d+(c-d)*n)]}function MA(e,t,n){return gE(e,t,n,Mi,Di)}function AA(e,t,n){const i=Math.sign(e[0]);return gE(e,t,n,KG(i),XG(i))}function Rv(e,t,n,i){return gE(e,t,n,Nv(i),Nv(1/i))}function OA(e,t,n,i){return gE(e,t,n,JG(i),QG(i))}function iH(e){return 1+~~(new Date(e).getMonth()/3)}function sH(e){return 1+~~(new Date(e).getUTCMonth()/3)}function $e(e){return e!=null?Te(e)?e:[e]:[]}function rH(e,t,n){let i=e[0],s=e[1],a;return s<i&&(a=s,s=i,i=a),a=s-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function Bt(e){return typeof e=="function"}const dge="descending";function NA(e,t,n){n=n||{},t=$e(t)||[];const i=[],s=[],a={},c=n.comparator||fge;return $e(e).forEach((d,f)=>{d!=null&&(i.push(t[f]===dge?-1:1),s.push(d=Bt(d)?d:Br(d,null,n)),(Ni(d)||[]).forEach(u=>a[u]=1))}),s.length===0?null:Os(c(s,i),Object.keys(a))}const mE=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),fge=(e,t)=>e.length===1?uge(e[0],t[0]):hge(e,t,e.length),uge=(e,t)=>function(n,i){return mE(e(n),e(i))*t},hge=(e,t,n)=>(t.push(0),function(i,s){let a,c=0,d=-1;for(;c===0&&++d<n;)a=e[d],c=mE(a(i),a(s));return c*t[d]});function Ui(e){return Bt(e)?e:()=>e}function RA(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function St(e){for(let t,n,i=1,s=arguments.length;i<s;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function ao(e,t){let n=0,i,s,a,c;if(e&&(i=e.length))if(t==null){for(s=e[n];n<i&&(s==null||s!==s);s=e[++n]);for(a=c=s;n<i;++n)s=e[n],s!=null&&(s<a&&(a=s),s>c&&(c=s))}else{for(s=t(e[n]);n<i&&(s==null||s!==s);s=t(e[++n]));for(a=c=s;n<i;++n)s=t(e[n]),s!=null&&(s<a&&(a=s),s>c&&(c=s))}return[a,c]}function aH(e,t){const n=e.length;let i=-1,s,a,c,d,f;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){s=c=a;break}if(i===n)return[-1,-1];for(d=f=i;++i<n;)a=e[i],a!=null&&(s>a&&(s=a,d=i),c<a&&(c=a,f=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){s=c=a;break}if(i===n)return[-1,-1];for(d=f=i;++i<n;)a=t(e[i],i,e),a!=null&&(s>a&&(s=a,d=i),c<a&&(c=a,f=i))}return[d,f]}const _ge=Object.prototype.hasOwnProperty;function Ve(e,t){return _ge.call(e,t)}const Db={};function h_(e){let t={},n;function i(a){return Ve(t,a)&&t[a]!==Db}const s={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,c){return i(a)||(++s.size,t[a]===Db&&--s.empty),t[a]=c,this},delete(a){return i(a)&&(--s.size,++s.empty,t[a]=Db),this},clear(){s.size=s.empty=0,s.object=t={}},test(a){return arguments.length?(n=a,s):n},clean(){const a={};let c=0;for(const d in t){const f=t[d];f!==Db&&(!n||!n(f))&&(a[d]=f,++c)}s.size=c,s.empty=0,s.object=t=a}};return e&&Object.keys(e).forEach(a=>{s.set(a,e[a])}),s}function oH(e,t,n,i,s,a){if(!n&&n!==0)return a;const c=+n;let d=e[0],f=Pt(e),u;f<d&&(u=d,d=f,f=u),u=Math.abs(t-d);const r=Math.abs(f-t);return u<r&&u<=c?i:r<=c?s:a}function Le(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),St(i,n)}function Nu(e,t,n,i){let s=t[0],a=t[t.length-1],c;return s>a&&(c=s,s=a,a=c),n=n===void 0||n,i=i===void 0||i,(n?s<=e:s<e)&&(i?e<=a:e<a)}function qc(e){return typeof e=="boolean"}function cc(e){return Object.prototype.toString.call(e)==="[object Date]"}function lH(e){return e&&Bt(e[Symbol.iterator])}function Wt(e){return typeof e=="number"}function cH(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ze(e){return typeof e=="string"}function CA(e,t,n){e&&(e=t?$e(e).map(d=>d.replace(/\\(.)/g,"$1")):$e(e));const i=e&&e.length,s=n&&n.get||GG,a=d=>s(t?[d]:go(d));let c;if(!i)c=function(){return""};else if(i===1){const d=a(e[0]);c=function(f){return""+d(f)}}else{const d=e.map(a);c=function(f){let u=""+d[0](f),r=0;for(;++r<i;)u+="|"+d[r](f);return u}}return Os(c,e,"key")}function dH(e,t){const n=e[0],i=Pt(e),s=+t;return s?s===1?i:n+s*(i-n):n}const pge=1e4;function fH(e){e=+e||pge;let t,n,i;const s=()=>{t={},n={},i=0},a=(c,d)=>(++i>e&&(n=t,t={},i=1),t[c]=d);return s(),{clear:s,has:c=>Ve(t,c)||Ve(n,c),get:c=>Ve(t,c)?t[c]:Ve(n,c)?a(c,n[c]):void 0,set:(c,d)=>Ve(t,c)?t[c]=d:a(c,d)}}function uH(e,t,n,i){const s=t.length,a=n.length;if(!a)return t;if(!s)return n;const c=i||new t.constructor(s+a);let d=0,f=0,u=0;for(;d<s&&f<a;++u)c[u]=e(t[d],n[f])>0?n[f++]:t[d++];for(;d<s;++d,++u)c[u]=t[d];for(;f<a;++f,++u)c[u]=n[f];return c}function Ry(e,t){let n="";for(;--t>=0;)n+=e;return n}function hH(e,t,n,i){const s=n||" ",a=e+"",c=t-a.length;return c<=0?a:i==="left"?Ry(s,c)+a:i==="center"?Ry(s,~~(c/2))+a+Ry(s,Math.ceil(c/2)):a+Ry(s,c)}function Tm(e){return e&&Pt(e)-e[0]||0}function Re(e){return Te(e)?"["+e.map(Re)+"]":je(e)||ze(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function LA(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const yge=e=>Wt(e)||cc(e)?e:Date.parse(e);function PA(e,t){return t=t||yge,e==null||e===""?null:t(e)}function DA(e){return e==null||e===""?null:e+""}function ia(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function _H(e,t,n,i){const s=i??"…",a=e+"",c=a.length,d=Math.max(0,t-s.length);return c<=t?a:n==="left"?s+a.slice(c-d):n==="center"?a.slice(0,Math.ceil(d/2))+s+a.slice(c-~~(d/2)):a.slice(0,d)+s}function Wl(e,t,n){if(e)if(t){const i=e.length;for(let s=0;s<i;++s){const a=t(e[s]);a&&n(a,s,e)}}else e.forEach(n)}function gge(e){return e}function mge(e){if(e==null)return gge;var t,n,i=e.scale[0],s=e.scale[1],a=e.translate[0],c=e.translate[1];return function(d,f){f||(t=n=0);var u=2,r=d.length,h=new Array(r);for(h[0]=(t+=d[0])*i+a,h[1]=(n+=d[1])*s+c;u<r;)h[u]=d[u],++u;return h}}function wge(e,t){for(var n,i=e.length,s=i-t;s<--i;)n=e[s],e[s++]=e[i],e[i]=n}function bge(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return oU(e,n)})}:oU(e,t)}function oU(e,t){var n=t.id,i=t.bbox,s=t.properties==null?{}:t.properties,a=pH(e,t);return n==null&&i==null?{type:"Feature",properties:s,geometry:a}:i==null?{type:"Feature",id:n,properties:s,geometry:a}:{type:"Feature",id:n,bbox:i,properties:s,geometry:a}}function pH(e,t){var n=mge(e.transform),i=e.arcs;function s(r,h){h.length&&h.pop();for(var p=i[r<0?~r:r],_=0,l=p.length;_<l;++_)h.push(n(p[_],_));r<0&&wge(h,l)}function a(r){return n(r)}function c(r){for(var h=[],p=0,_=r.length;p<_;++p)s(r[p],h);return h.length<2&&h.push(h[0]),h}function d(r){for(var h=c(r);h.length<4;)h.push(h[0]);return h}function f(r){return r.map(d)}function u(r){var h=r.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:r.geometries.map(u)};case"Point":p=a(r.coordinates);break;case"MultiPoint":p=r.coordinates.map(a);break;case"LineString":p=c(r.arcs);break;case"MultiLineString":p=r.arcs.map(c);break;case"Polygon":p=f(r.arcs);break;case"MultiPolygon":p=r.arcs.map(f);break;default:return null}return{type:h,coordinates:p}}return u(t)}function Tge(e,t){var n={},i={},s={},a=[],c=-1;t.forEach(function(u,r){var h=e.arcs[u<0?~u:u],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++c],t[c]=u,t[r]=p)}),t.forEach(function(u){var r=d(u),h=r[0],p=r[1],_,l;if(_=s[h])if(delete s[_.end],_.push(u),_.end=p,l=i[p]){delete i[l.start];var b=l===_?_:_.concat(l);i[b.start=_.start]=s[b.end=l.end]=b}else i[_.start]=s[_.end]=_;else if(_=i[p])if(delete i[_.start],_.unshift(u),_.start=h,l=s[h]){delete s[l.end];var m=l===_?_:l.concat(_);i[m.start=l.start]=s[m.end=_.end]=m}else i[_.start]=s[_.end]=_;else _=[u],i[_.start=h]=s[_.end=p]=_});function d(u){var r=e.arcs[u<0?~u:u],h=r[0],p;return e.transform?(p=[0,0],r.forEach(function(_){p[0]+=_[0],p[1]+=_[1]})):p=r[r.length-1],u<0?[p,h]:[h,p]}function f(u,r){for(var h in u){var p=u[h];delete r[p.start],delete p.start,delete p.end,p.forEach(function(_){n[_<0?~_:_]=1}),a.push(p)}}return f(s,i),f(i,s),t.forEach(function(u){n[u<0?~u:u]||a.push([u])}),a}function vge(e){return pH(e,Ege.apply(this,arguments))}function Ege(e,t,n){var i,s,a;if(arguments.length>1)i=Sge(e,t,n);else for(s=0,i=new Array(a=e.arcs.length);s<a;++s)i[s]=s;return{type:"MultiLineString",arcs:Tge(e,i)}}function Sge(e,t,n){var i=[],s=[],a;function c(h){var p=h<0?~h:h;(s[p]||(s[p]=[])).push({i:h,g:a})}function d(h){h.forEach(c)}function f(h){h.forEach(d)}function u(h){h.forEach(f)}function r(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(r);break;case"LineString":d(h.arcs);break;case"MultiLineString":case"Polygon":f(h.arcs);break;case"MultiPolygon":u(h.arcs);break}}return r(t),s.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}const wi="year",Bs="quarter",Ri="month",Qn="week",Is="date",xi="day",oo="dayofyear",Zs="hours",er="minutes",Fr="seconds",sa="milliseconds",UA=[wi,Bs,Ri,Qn,Is,xi,oo,Zs,er,Fr,sa],yI=UA.reduce((e,t,n)=>(e[t]=1+n,e),{});function jA(e){const t=$e(e).slice(),n={};return t.length||be("Missing time unit."),t.forEach(s=>{Ve(yI,s)?n[s]=1:be(`Invalid time unit: ${s}.`)}),(n[Qn]||n[xi]?1:0)+(n[Bs]||n[Ri]||n[Is]?1:0)+(n[oo]?1:0)>1&&be(`Incompatible time units: ${e}`),t.sort((s,a)=>yI[s]-yI[a]),t}const Bge={[wi]:"%Y ",[Bs]:"Q%q ",[Ri]:"%b ",[Is]:"%d ",[Qn]:"W%U ",[xi]:"%a ",[oo]:"%j ",[Zs]:"%H:00",[er]:"00:%M",[Fr]:":%S",[sa]:".%L",[`${wi}-${Ri}`]:"%Y-%m ",[`${wi}-${Ri}-${Is}`]:"%Y-%m-%d ",[`${Zs}-${er}`]:"%H:%M"};function yH(e,t){const n=St({},Bge,t),i=jA(e),s=i.length;let a="",c=0,d,f;for(c=0;c<s;)for(d=i.length;d>c;--d)if(f=i.slice(c,d).join("-"),n[f]!=null){a+=n[f],c=d;break}return a.trim()}const Ld=new Date;function $A(e){return Ld.setFullYear(e),Ld.setMonth(0),Ld.setDate(1),Ld.setHours(0,0,0,0),Ld}function gH(e){return wH(new Date(e))}function mH(e){return Ok(new Date(e))}function wH(e){return cl.count($A(e.getFullYear())-1,e)}function Ok(e){return t_.count($A(e.getFullYear())-1,e)}function Nk(e){return $A(e).getDay()}function Ige(e,t,n,i,s,a,c){if(0<=e&&e<100){const d=new Date(-1,t,n,i,s,a,c);return d.setFullYear(e),d}return new Date(e,t,n,i,s,a,c)}function bH(e){return vH(new Date(e))}function TH(e){return Rk(new Date(e))}function vH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lc.count(t-1,e)}function Rk(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return n_.count(t-1,e)}function Ck(e){return Ld.setTime(Date.UTC(e,0,1)),Ld.getUTCDay()}function Fge(e,t,n,i,s,a,c){if(0<=e&&e<100){const d=new Date(Date.UTC(-1,t,n,i,s,a,c));return d.setUTCFullYear(n.y),d}return new Date(Date.UTC(e,t,n,i,s,a,c))}function EH(e,t,n,i,s){const a=t||1,c=Pt(e),d=(E,B,I)=>(I=I||E,kge(n[I],i[I],E===c&&a,B)),f=new Date,u=ia(e),r=u[wi]?d(wi):Ui(2012),h=u[Ri]?d(Ri):u[Bs]?d(Bs):Jl,p=u[Qn]&&u[xi]?d(xi,1,Qn+xi):u[Qn]?d(Qn,1):u[xi]?d(xi,1):u[Is]?d(Is,1):u[oo]?d(oo,1):d_,_=u[Zs]?d(Zs):Jl,l=u[er]?d(er):Jl,b=u[Fr]?d(Fr):Jl,m=u[sa]?d(sa):Jl;return function(E){f.setTime(+E);const B=r(f);return s(B,h(f),p(f,B),_(f),l(f),b(f),m(f))}}function kge(e,t,n,i){const s=n<=1?e:i?(a,c)=>i+n*Math.floor((e(a,c)-i)/n):(a,c)=>n*Math.floor(e(a,c)/n);return t?(a,c)=>t(s(a,c),c):s}function wh(e,t,n){return t+e*7-(n+6)%7}const xge={[wi]:e=>e.getFullYear(),[Bs]:e=>Math.floor(e.getMonth()/3),[Ri]:e=>e.getMonth(),[Is]:e=>e.getDate(),[Zs]:e=>e.getHours(),[er]:e=>e.getMinutes(),[Fr]:e=>e.getSeconds(),[sa]:e=>e.getMilliseconds(),[oo]:e=>wH(e),[Qn]:e=>Ok(e),[Qn+xi]:(e,t)=>wh(Ok(e),e.getDay(),Nk(t)),[xi]:(e,t)=>wh(1,e.getDay(),Nk(t))},Mge={[Bs]:e=>3*e,[Qn]:(e,t)=>wh(e,0,Nk(t))};function SH(e,t){return EH(e,t||1,xge,Mge,Ige)}const Age={[wi]:e=>e.getUTCFullYear(),[Bs]:e=>Math.floor(e.getUTCMonth()/3),[Ri]:e=>e.getUTCMonth(),[Is]:e=>e.getUTCDate(),[Zs]:e=>e.getUTCHours(),[er]:e=>e.getUTCMinutes(),[Fr]:e=>e.getUTCSeconds(),[sa]:e=>e.getUTCMilliseconds(),[oo]:e=>vH(e),[Qn]:e=>Rk(e),[xi]:(e,t)=>wh(1,e.getUTCDay(),Ck(t)),[Qn+xi]:(e,t)=>wh(Rk(e),e.getUTCDay(),Ck(t))},Oge={[Bs]:e=>3*e,[Qn]:(e,t)=>wh(e,0,Ck(t))};function BH(e,t){return EH(e,t||1,Age,Oge,Fge)}const Nge={[wi]:to,[Bs]:Tg.every(3),[Ri]:Tg,[Qn]:t_,[Is]:cl,[xi]:cl,[oo]:cl,[Zs]:V1,[er]:z1,[Fr]:tl,[sa]:ch},Rge={[wi]:no,[Bs]:vg.every(3),[Ri]:vg,[Qn]:n_,[Is]:lc,[xi]:lc,[oo]:lc,[Zs]:G1,[er]:q1,[Fr]:tl,[sa]:ch};function __(e){return Nge[e]}function p_(e){return Rge[e]}function IH(e,t,n){return e?e.offset(t,n):void 0}function FH(e,t,n){return IH(__(e),t,n)}function kH(e,t,n){return IH(p_(e),t,n)}function xH(e,t,n,i){return e?e.range(t,n,i):void 0}function MH(e,t,n,i){return xH(__(e),t,n,i)}function AH(e,t,n,i){return xH(p_(e),t,n,i)}const Cy=1e3,Ly=Cy*60,Py=Ly*60,wE=Py*24,Cge=wE*7,lU=wE*30,Lk=wE*365,OH=[wi,Ri,Is,Zs,er,Fr,sa],Dy=OH.slice(0,-1),Uy=Dy.slice(0,-1),jy=Uy.slice(0,-1),Lge=jy.slice(0,-1),Pge=[wi,Qn],cU=[wi,Ri],NH=[wi],Yp=[[Dy,1,Cy],[Dy,5,5*Cy],[Dy,15,15*Cy],[Dy,30,30*Cy],[Uy,1,Ly],[Uy,5,5*Ly],[Uy,15,15*Ly],[Uy,30,30*Ly],[jy,1,Py],[jy,3,3*Py],[jy,6,6*Py],[jy,12,12*Py],[Lge,1,wE],[Pge,1,Cge],[cU,1,lU],[cU,3,3*lU],[NH,1,Lk]];function RH(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Tm(t))/n;let s=Qh(d=>d[2]).right(Yp,i),a,c;return s===Yp.length?(a=NH,c=gc(t[0]/Lk,t[1]/Lk,n)):s?(s=Yp[i/Yp[s-1][2]<Yp[s][2]/i?s-1:s],a=s[0],c=s[1]):(a=OH,c=Math.max(gc(t[0],t[1],n),1)),{units:a,step:c}}function $y(e){const t={};return n=>t[n]||(t[n]=e(n))}function Dge(e,t){return n=>{const i=e(n),s=i.indexOf(t);if(s<0)return i;let a=Uge(i,s);const c=a<i.length?i.slice(a):"";for(;--a>s;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+c}}function Uge(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function CH(e){const t=$y(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const s=rf(i||",");if(s.precision==null){switch(s.precision=12,s.type){case"%":s.precision-=2;break;case"e":s.precision-=1;break}return Dge(t(s),t(".1f")(1)[1])}else return t(s)},formatSpan(i,s,a,c){c=rf(c??",f");const d=gc(i,s,a),f=Math.max(Math.abs(i),Math.abs(s));let u;if(c.precision==null)switch(c.type){case"s":return isNaN(u=sq(d,f))||(c.precision=u),n(c,f);case"":case"e":case"g":case"p":case"r":{isNaN(u=rq(d,f))||(c.precision=u-(c.type==="e"));break}case"f":case"%":{isNaN(u=iq(d))||(c.precision=u-(c.type==="%")*2);break}}return t(c)}}}let Pk;LH();function LH(){return Pk=CH({format:L1,formatPrefix:Cx})}function PH(e){return CH(nq(e))}function Cv(e){return arguments.length?Pk=PH(e):Pk}function dU(e,t,n){n=n||{},je(n)||be(`Invalid time multi-format specifier: ${n}`);const i=t(Fr),s=t(er),a=t(Zs),c=t(Is),d=t(Qn),f=t(Ri),u=t(Bs),r=t(wi),h=e(n[sa]||".%L"),p=e(n[Fr]||":%S"),_=e(n[er]||"%I:%M"),l=e(n[Zs]||"%I %p"),b=e(n[Is]||n[xi]||"%a %d"),m=e(n[Qn]||"%b %d"),E=e(n[Ri]||"%B"),B=e(n[Bs]||"%B"),I=e(n[wi]||"%Y");return k=>(i(k)<k?h:s(k)<k?p:a(k)<k?_:c(k)<k?l:f(k)<k?d(k)<k?b:m:r(k)<k?u(k)<k?E:B:I)(k)}function DH(e){const t=$y(e.format),n=$y(e.utcFormat);return{timeFormat:i=>ze(i)?t(i):dU(t,__,i),utcFormat:i=>ze(i)?n(i):dU(n,p_,i),timeParse:$y(e.parse),utcParse:$y(e.utcParse)}}let Dk;UH();function UH(){return Dk=DH({format:Jx,parse:g7,utcFormat:Qx,utcParse:m7})}function jH(e){return DH(u7(e))}function Mg(e){return arguments.length?Dk=jH(e):Dk}const Uk=(e,t)=>St({},e,t);function $H(e,t){const n=e?PH(e):Cv(),i=t?jH(t):Mg();return Uk(n,i)}function zA(e,t){const n=arguments.length;return n&&n!==2&&be("defaultLocale expects either zero or two arguments."),n?Uk(Cv(e),Mg(t)):Uk(Cv(),Mg())}function jge(){return LH(),UH(),zA()}const $ge=/^(data:|([A-Za-z]+:)?\/\/)/,zge=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,qge=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,fU="file://";function Vge(e,t){return n=>({options:n||{},sanitize:Hge,load:Gge,fileAccess:!!t,file:Wge(t),http:Xge(e)})}async function Gge(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function Hge(e,t){t=St({},this.options,t);const n=this.fileAccess,i={href:null};let s,a,c;const d=zge.test(e.replace(qge,""));(e==null||typeof e!="string"||!d)&&be("Sanitize failure, invalid URI: "+Re(e));const f=$ge.test(e);return(c=t.baseURL)&&!f&&(!e.startsWith("/")&&!c.endsWith("/")&&(e="/"+e),e=c+e),a=(s=e.startsWith(fU))||t.mode==="file"||t.mode!=="http"&&!f&&n,s?e=e.slice(fU.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function Wge(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(s,a)=>{s?i(s):n(a)})}):Yge}async function Yge(){be("No file system access.")}function Xge(e){return e?async function(t,n){const i=St({},this.options.http,n),s=n&&n.response,a=await e(t,i);return a.ok?Bt(a[s])?a[s]():a.text():be(a.status+""+a.statusText)}:Kge}async function Kge(){be("No HTTP fetch method available.")}const Jge=e=>e!=null&&e===e,Qge=e=>e==="true"||e==="false"||e===!0||e===!1,Zge=e=>!Number.isNaN(Date.parse(e)),zH=e=>!Number.isNaN(+e)&&!(e instanceof Date),eme=e=>zH(e)&&Number.isInteger(+e),jk={boolean:LA,integer:Mi,number:Mi,date:PA,string:DA,unknown:Di},Ub=[Qge,eme,zH,Zge],tme=["boolean","integer","number","date"];function qH(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Ub.length,s=Ub.map((a,c)=>c+1);for(let a=0,c=0,d,f;a<n;++a)for(f=t?e[a][t]:e[a],d=0;d<i;++d)if(s[d]&&Jge(f)&&!Ub[d](f)&&(s[d]=0,++c,c===Ub.length))return"string";return tme[s.reduce((a,c)=>a===0?c:a,0)-1]}function VH(e,t){return t.reduce((n,i)=>(n[i]=qH(e,i),n),{})}function uU(e){const t=function(n,i){const s={delimiter:e};return qA(n,i?St(i,s):s)};return t.responseType="text",t}function qA(e,t){return t.header&&(e=t.header.map(Re).join(t.delimiter)+`
`+e),foe(t.delimiter).parse(e+"")}qA.responseType="text";function nme(e){return typeof Buffer=="function"&&Bt(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function VA(e,t){const n=t&&t.property?Br(t.property):Di;return je(e)&&!nme(e)?ime(n(e),t):n(JSON.parse(e))}VA.responseType="json";function ime(e,t){return!Te(e)&&lH(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const sme={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function GH(e,t){let n,i,s,a;return e=VA(e,t),t&&t.feature?(n=bge,s=t.feature):t&&t.mesh?(n=vge,s=t.mesh,a=sme[t.filter]):be("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[s])?n(e,i,a):be("Invalid TopoJSON object: "+s),i&&i.features||[i]}GH.responseType="json";const O0={dsv:qA,csv:uU(","),tsv:uU("	"),json:VA,topojson:GH};function GA(e,t){return arguments.length>1?(O0[e]=t,this):Ve(O0,e)?O0[e]:null}function HH(e){const t=GA(e);return t&&t.responseType||"text"}function WH(e,t,n,i){t=t||{};const s=GA(t.type||"json");return s||be("Unknown data format type: "+t.type),e=s(e,t),t.parse&&rme(e,t.parse,n,i),Ve(e,"columns")&&delete e.columns,e}function rme(e,t,n,i){if(!e.length)return;const s=Mg();n=n||s.timeParse,i=i||s.utcParse;let a=e.columns||Object.keys(e[0]),c,d,f,u,r,h;t==="auto"&&(t=VH(e,a)),a=Object.keys(t);const p=a.map(_=>{const l=t[_];let b,m;if(l&&(l.startsWith("date:")||l.startsWith("utc:")))return b=l.split(/:(.+)?/,2),m=b[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(b[0]==="utc"?i:n)(m);if(!jk[l])throw Error("Illegal format pattern: "+_+":"+l);return jk[l]});for(f=0,r=e.length,h=a.length;f<r;++f)for(c=e[f],u=0;u<h;++u)d=a[u],c[d]=p[u](c[d])}const bE=Vge(typeof fetch<"u"&&fetch,null);function TE(e){const t=e||Di,n=[],i={};return n.add=s=>{const a=t(s);return i[a]||(i[a]=1,n.push(s)),n},n.remove=s=>{const a=t(s);if(i[a]){i[a]=0;const c=n.indexOf(s);c>=0&&n.splice(c,1)}return n},n}async function N0(e,t){try{await t(e)}catch(n){e.error(n)}}const YH=Symbol("vega_id");let ame=1;function vE(e){return!!(e&&Je(e))}function Je(e){return e[YH]}function XH(e,t){return e[YH]=t,e}function Xt(e){const t=e===Object(e)?e:{data:e};return Je(t)?t:XH(t,ame++)}function HA(e){return EE(e,Xt({}))}function EE(e,t){for(const n in e)t[n]=e[n];return t}function KH(e,t){return XH(t,Je(e))}function Lf(e,t){return e?t?(n,i)=>e(n,i)||Je(t(n))-Je(t(i)):(n,i)=>e(n,i)||Je(n)-Je(i):null}function JH(e){return e&&e.constructor===Vc}function Vc(){const e=[],t=[],n=[],i=[],s=[];let a=null,c=!1;return{constructor:Vc,insert(d){const f=$e(d),u=f.length;for(let r=0;r<u;++r)e.push(f[r]);return this},remove(d){const f=Bt(d)?i:t,u=$e(d),r=u.length;for(let h=0;h<r;++h)f.push(u[h]);return this},modify(d,f,u){const r={field:f,value:Ui(u)};return Bt(d)?(r.filter=d,s.push(r)):(r.tuple=d,n.push(r)),this},encode(d,f){return Bt(d)?s.push({filter:d,field:f}):n.push({tuple:d,field:f}),this},clean(d){return a=d,this},reflow(){return c=!0,this},pulse(d,f){const u={},r={};let h,p,_,l,b,m;for(h=0,p=f.length;h<p;++h)u[Je(f[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],u[Je(b)]=-1;for(h=0,p=i.length;h<p;++h)l=i[h],f.forEach(B=>{l(B)&&(u[Je(B)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],m=Je(b),u[m]?u[m]=1:d.add.push(Xt(e[h]));for(h=0,p=f.length;h<p;++h)b=f[h],u[Je(b)]<0&&d.rem.push(b);function E(B,I,k){k?B[I]=k(B):d.encode=I,c||(r[Je(B)]=B)}for(h=0,p=n.length;h<p;++h)_=n[h],b=_.tuple,l=_.field,m=u[Je(b)],m>0&&(E(b,l,_.value),d.modifies(l));for(h=0,p=s.length;h<p;++h)_=s[h],l=_.filter,f.forEach(B=>{l(B)&&u[Je(B)]>0&&E(B,_.field,_.value)}),d.modifies(_.field);if(c)d.mod=t.length||i.length?f.filter(B=>u[Je(B)]>0):f.slice();else for(m in r)d.mod.push(r[m]);return(a||a==null&&(t.length||i.length))&&d.clean(!0),d}}}const R0="_:mod:_";function SE(){Object.defineProperty(this,R0,{writable:!0,value:{}})}SE.prototype={set(e,t,n,i){const s=this,a=s[e],c=s[R0];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,c[t+":"+e]=-1,c[e]=-1):(a!==n||i)&&(s[e]=n,c[e]=Te(n)?1+n.length:-1),s},modified(e,t){const n=this[R0];if(arguments.length){if(Te(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[R0]={},this}};let ome=0;const lme="pulse",cme=new SE,dme=1,fme=2;function un(e,t,n,i){this.id=++ome,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function hU(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}un.prototype={targets(){return this._targets||(this._targets=TE(bm))},set(e){return this.value!==e?(this.value=e,1):0},skip:hU(dme),modified:hU(fme),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new SE,s=this._argops=this._argops||[],a=[];let c,d,f,u;const r=(h,p,_)=>{_ instanceof un?(_!==this&&(t&&_.targets().add(this),a.push(_)),s.push({op:_,name:h,index:p})):i.set(h,p,_)};for(c in e)if(d=e[c],c===lme)$e(d).forEach(h=>{h instanceof un?h!==this&&(h.targets().add(this),a.push(h)):be("Pulse parameters must be operator instances.")}),this.source=d;else if(Te(d))for(i.set(c,-1,Array(f=d.length)),u=0;u<f;++u)r(c,u,d[u]);else r(c,-1,d);return this.marshall().clear(),n&&(s.initonly=!0),a},marshall(e){const t=this._argval||cme,n=this._argops;let i,s,a,c;if(n){const d=n.length;for(s=0;s<d;++s)i=n[s],a=i.op,c=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,c);if(n.initonly){for(s=0;s<d;++s)i=n[s],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,s;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],s=i.op,s._targets&&s._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function ume(e,t,n,i){let s=1,a;return e instanceof un?a=e:e&&e.prototype instanceof un?a=new e:Bt(e)?a=new un(null,e):(s=0,a=new un(e,t)),this.rank(a),s&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function hme(e,t){const n=e.rank,i=t.length;for(let s=0;s<i;++s)if(n<t[s].rank){this.rerank(e);return}}let _me=0;function BE(e,t,n){this.id=++_me,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function jl(e,t,n){return new BE(e,t,n)}BE.prototype={_filter:Ir,_apply:Di,targets(){return this._targets||(this._targets=TE(bm))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let s=0;s<i;++s)n[s].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=jl(e);return this.targets().add(t),t},apply(e){const t=jl(null,e);return this.targets().add(t),t},merge(){const e=jl();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=jl();return this.targets().add(jl(null,null,RA(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(jl(null,null,()=>n=!0)),t.targets().add(jl(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ir,this._targets=null}};function pme(e,t,n,i){const s=this,a=jl(n,i),c=function(u){u.dataflow=s;try{a.receive(u)}catch(r){s.error(r)}finally{s.run()}};let d;typeof e=="string"&&typeof document<"u"?d=document.querySelectorAll(e):d=$e(e);const f=d.length;for(let u=0;u<f;++u)d[u].addEventListener(t,c);return a}function yme(e,t){const n=this.locale();return WH(e,t,n.timeParse,n.utcParse)}function gme(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function mme(e,t){const n=this;let i=0,s;try{s=await n.loader().load(e,{context:"dataflow",response:HH(t&&t.type)});try{s=n.parse(s,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:s,status:i}}async function wme(e,t,n){const i=this,s=i._pending||bme(i);s.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Ir).insert(a.data||[])),s.done(),a}function bme(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Tme={skip:!0};function vme(e,t,n,i,s){return(e instanceof un?Sme:Eme)(this,e,t,n,i,s),this}function Eme(e,t,n,i,s,a){const c=St({},a,Tme);let d,f;Bt(n)||(n=Ui(n)),i===void 0?d=u=>e.touch(n(u)):Bt(i)?(f=new un(null,i,s,!1),d=u=>{f.evaluate(u);const r=n(u),h=f.value;JH(h)?e.pulse(r,h,a):e.update(r,h,c)}):d=u=>e.update(n(u),i,c),t.apply(d)}function Sme(e,t,n,i,s,a){if(i===void 0)t.targets().add(n);else{const c=a||{},d=new un(null,Bme(n,i),s,!1);d.modified(c.force),d.rank=t.rank,t.targets().add(d),n&&(d.skip(!0),d.value=n.value,d.targets().add(n),e.connect(n,[d]))}}function Bme(e,t){return t=Bt(t)?t:Ui(t),e?function(n,i){const s=t(n,i);return e.skip()||(e.skip(s!==this.value).value=s),s}:t}function Ime(e){e.rank=++this._rank}function Fme(e){const t=[e];let n,i,s;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(s=i.length;--s>=0;)t.push(n=i[s]),n===e&&be("Cycle detected in dataflow graph.")}const Lv={},Na=1,Yl=2,Vo=4,kme=Na|Yl,_U=Na|Vo,tu=Na|Yl|Vo,pU=8,Xp=16,yU=32,gU=64;function dc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function gI(e,t){const n=[];return Wl(e,t,i=>n.push(i)),n}function mU(e,t){const n={};return e.visit(t,i=>{n[Je(i)]=1}),i=>n[Je(i)]?null:i}function jb(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}dc.prototype={StopPropagation:Lv,ADD:Na,REM:Yl,MOD:Vo,ADD_REM:kme,ADD_MOD:_U,ALL:tu,REFLOW:pU,SOURCE:Xp,NO_SOURCE:yU,NO_FIELDS:gU,fork(e){return new dc(this.dataflow).init(this,e)},clone(){const e=this.fork(tu);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(tu|Xp)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new dc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&gU)&&(n.fields=e.fields),t&Na?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Yl?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Vo?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&yU?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||tu;return t&Na&&this.add.length||t&Yl&&this.rem.length||t&Vo&&this.mod.length},reflow(e){if(e)return this.fork(tu).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Vo,mU(this,Na))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Te(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Te(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Na&&(n.addF=jb(n.addF,t)),e&Yl&&(n.remF=jb(n.remF,t)),e&Vo&&(n.modF=jb(n.modF,t)),e&Xp&&(n.srcF=jb(n.srcF,t)),n},materialize(e){e=e||tu;const t=this;return e&Na&&t.addF&&(t.add=gI(t.add,t.addF),t.addF=null),e&Yl&&t.remF&&(t.rem=gI(t.rem,t.remF),t.remF=null),e&Vo&&t.modF&&(t.mod=gI(t.mod,t.modF),t.modF=null),e&Xp&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Xp)return Wl(n.source,n.srcF,i),n;e&Na&&Wl(n.add,n.addF,i),e&Yl&&Wl(n.rem,n.remF,i),e&Vo&&Wl(n.mod,n.modF,i);const s=n.source;if(e&pU&&s){const a=n.add.length+n.mod.length;a===s.length||(a?Wl(s,mU(n,_U),i):Wl(s,n.srcF,i))}return n}};function WA(e,t,n,i){const s=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const c of n)if(c.stamp===t){if(c.fields){const d=s.fields||(s.fields={});for(const f in c.fields)d[f]=1}c.changed(s.ADD)&&(a|=s.ADD),c.changed(s.REM)&&(a|=s.REM),c.changed(s.MOD)&&(a|=s.MOD)}this.changes=a}Le(WA,dc,{fork(e){const t=new dc(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Te(e)?e.some(i=>n[i]):n[e]:0},filter(){be("MultiPulse does not support filtering.")},materialize(){be("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,s=i.length;let a=0;if(e&n.SOURCE)for(;a<s;++a)i[a].visit(e,t);else for(;a<s;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function xme(e,t,n){const i=this,s=[];if(i._pulse)return QH(i);if(i._pending&&await i._pending,t&&await N0(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new dc(i,a,e),i._touched.forEach(r=>i._enqueue(r,!0)),i._touched=TE(bm);let c=0,d,f,u;try{for(;i._heap.size()>0;){if(d=i._heap.pop(),d.rank!==d.qrank){i._enqueue(d,!0);continue}f=d.run(i._getPulse(d,e)),f.then?f=await f:f.async&&(s.push(f.async),f=Lv),f!==Lv&&d._targets&&d._targets.forEach(r=>i._enqueue(r)),++c}}catch(r){i._heap.clear(),u=r}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${c} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const r=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<r.length;++h)await N0(i,r[h].callback)}return n&&await N0(i,n),s.length&&Promise.all(s).then(r=>i.runAsync(null,()=>{r.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function Mme(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function Ame(e,t,n){return this._pulse?QH(this):(this.evaluate(e,t,n),this)}function Ome(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function QH(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Nme(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Rme(e,t){const n=e.source,i=this._clock;return n&&Te(n)?new WA(this,i,n.map(s=>s.pulse),t):this._input[e.id]||Cme(this._pulse,n&&n.pulse)}function Cme(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Lv&&(e.source=t.source),e)}const YA={skip:!1,force:!1};function Lme(e,t){const n=t||YA;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Pme(e,t,n){const i=n||YA;return(e.set(t)||i.force)&&this.touch(e,i),this}function Dme(e,t,n){this.touch(e,n||YA);const i=new dc(this,this._clock+(this._pulse?0:1)),s=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,s),this}function Ume(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),ZH(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,jme(t,0,e)):i=n,i}}}function ZH(e,t,n,i){let s,a;const c=e[n];for(;n>t;){if(a=n-1>>1,s=e[a],i(c,s)<0){e[n]=s,n=a;continue}break}return e[n]=c}function jme(e,t,n){const i=t,s=e.length,a=e[t];let c=(t<<1)+1,d;for(;c<s;)d=c+1,d<s&&n(e[c],e[d])>=0&&(c=d),e[t]=e[c],t=c,c=(t<<1)+1;return e[t]=a,ZH(e,i,t,n)}function Yu(){this.logger(xA()),this.logLevel(FA),this._clock=0,this._rank=0,this._locale=zA();try{this._loader=bE()}catch{}this._touched=TE(bm),this._input={},this._pulse=null,this._heap=Ume((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Kp(e){return function(){return this._log[e].apply(this,arguments)}}Yu.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Kp("error"),warn:Kp("warn"),info:Kp("info"),debug:Kp("debug"),logLevel:Kp("level"),cleanThreshold:1e4,add:ume,connect:hme,rank:Ime,rerank:Fme,pulse:Dme,touch:Lme,update:Pme,changeset:Vc,ingest:gme,parse:yme,preload:wme,request:mme,events:pme,on:vme,evaluate:xme,run:Ame,runAsync:Mme,runAfter:Ome,_enqueue:Nme,_getPulse:Rme};function ge(e,t){un.call(this,e,null,t)}Le(ge,un,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const bh={};function eW(e){const t=tW(e);return t&&t.Definition||null}function tW(e){return e=e&&e.toLowerCase(),Ve(bh,e)?bh[e]:null}function $me(e){return t=>{const n=e.length;let i=1,s=String(e[0](t));for(;i<n;++i)s+="|"+e[i](t);return s}}function $k(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:$me(e)}function nW(e,t,n){return n||e+(t?"_"+t:"")}const mI=()=>{},zme={init:mI,add:mI,rem:mI,idx:0},Ag={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},vm=Object.keys(Ag).filter(e=>e!=="__count__");function qme(e,t){return(n,i)=>St({name:e,aggregate_param:i,out:n||e},zme,t)}[...vm,"__count__"].forEach(e=>{Ag[e]=qme(e,Ag[e])});function iW(e,t,n){return Ag[e](n,t)}function sW(e,t){return e.idx-t.idx}function Vme(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(s=>{t[s]||n(t[s]=Ag[s]())})};return e.forEach(n),Object.values(t).sort(sW)}function Gme(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Hme(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Wme(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Yme(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function rW(e,t){const n=t||Di,i=Vme(e),s=e.slice().sort(sW);function a(c){this._ops=i,this._out=s,this.cell=c,this.init()}return a.prototype.init=Gme,a.prototype.add=Hme,a.prototype.rem=Wme,a.prototype.set=Yme,a.prototype.get=n,a.fields=e.map(c=>c.out),a}function XA(e){this._key=e?Br(e):Je,this.reset()}const vi=XA.prototype;vi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};vi.add=function(e){this._add.push(e)};vi.rem=function(e){this._rem.push(e)};vi.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,s=t.length,a=Array(i-s),c={};let d,f,u;for(d=0;d<s;++d)c[n(t[d])]=1;for(d=0,f=0;d<i;++d)c[n(u=e[d])]?c[n(u)]=0:a[f++]=u;return this._rem=[],this._add=a};vi.distinct=function(e){const t=this.values(),n={};let i=t.length,s=0,a;for(;--i>=0;)a=e(t[i])+"",Ve(n,a)||(n[a]=1,++s);return s};vi.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=aH(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};vi.argmin=function(e){return this.extent(e)[0]||{}};vi.argmax=function(e){return this.extent(e)[1]||{}};vi.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};vi.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};vi.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=cM(this.values(),e),this._get=e),this._q};vi.q1=function(e){return this.quartile(e)[0]};vi.q2=function(e){return this.quartile(e)[1]};vi.q3=function(e){return this.quartile(e)[2]};vi.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=q7(this.values(),1e3,.05,e),this._get=e),this._ci};vi.ci0=function(e){return this.ci(e)[0]};vi.ci1=function(e){return this.ci(e)[1]};function Sc(e){ge.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Sc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:vm},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Le(Sc,ge,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=e.modified();return n.stamp=i.stamp,n.value&&(s||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=s?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),s=n.length;function a(d){let f,u,r,h;for(f in d)for(r=d[f].tuple,u=0;u<s;++u)i[u][h=r[n[u]]]=h}a(e._prev),a(t);function c(d,f,u){const r=n[u],h=i[u++];for(const p in h){const _=d?d+"|"+p:p;f[r]=h[p],u<s?c(_,f,u):t[_]||e.cell(_,f)}}c("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function s(B){const I=$e(Ni(B)),k=I.length;let F=0,x;for(;F<k;++F)i[x=I[F]]||(i[x]=1,t.push(x))}this._dims=$e(e.groupby),this._dnames=this._dims.map(B=>{const I=Rn(B);return s(B),n.push(I),I}),this.cellkey=e.key?e.key:$k(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],c=e.ops||["count"],d=e.aggregate_params||[null],f=e.as||[],u=a.length,r={};let h,p,_,l,b,m,E;for(u!==c.length&&be("Unmatched number of fields and aggregate ops."),E=0;E<u;++E){if(h=a[E],p=c[E],_=d[E]||null,h==null&&p!=="count"&&be("Null aggregate field specified."),b=Rn(h),m=nW(p,b,f[E]),n.push(m),p==="count"){this._counts.push(m);continue}l=r[b],l||(s(h),l=r[b]=[],l.field=h,this._measures.push(l)),p!=="count"&&(this._countOnly=!1),l.push(iW(p,_,m))}return this._measures=this._measures.map(B=>rW(B,B.field)),Object.create(null)},cellkey:$k(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,s=i.length;n.agg=Array(s);for(let a=0;a<s;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new XA),n},newtuple(e,t){const n=this._dnames,i=this._dims,s=i.length,a={};for(let c=0;c<s;++c)a[n[c]]=i[c](e);return t?KH(t.tuple,a):Xt(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let s=0,a=i.length;s<a;++s)i[s].add(i[s].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let s=0,a=i.length;s<a;++s)i[s].rem(i[s].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,s=n.length;i<s;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let s=0,a=i.length;s<a;++s)i[s].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,s=this._drop,a=e.add,c=e.rem,d=e.mod;let f,u,r,h;if(i)for(u in i)f=i[u],(!s||f.num)&&c.push(f.tuple);for(r=0,h=this._alen;r<h;++r)a.push(this.celltuple(t[r])),t[r]=null;for(r=0,h=this._mlen;r<h;++r)f=n[r],(f.num===0&&s?c:d).push(this.celltuple(f)),n[r]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Xme=1e-14;function KA(e){ge.call(this,null,e)}KA.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Le(KA,ge,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),s=i.start,a=i.step,c=e.as||["bin0","bin1"],d=c[0],f=c[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Ni(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?r=>{const h=i(r);r[d]=h,r[f]=h==null?null:s+a*(1+(h-s)/a)}:r=>r[d]=i(r)),t.modifies(n?c:d)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=fM(e),i=n.step;let s=n.start,a=s+Math.ceil((n.stop-s)/i)*i,c,d;(c=e.anchor)!=null&&(d=c-(s+i*Math.floor((c-s)/i)),s+=d,a+=d);const f=function(u){let r=Mi(t(u));return r==null?null:r<s?-1/0:r>a?1/0:(r=Math.max(s,Math.min(r,a-i)),s+i*Math.floor(Xme+(r-s)/i))};return f.start=s,f.stop=n.stop,f.step=i,this.value=Os(f,Ni(t),e.name||"bin_"+Rn(t))}});function aW(e,t,n){const i=e;let s=t||[],a=n||[],c={},d=0;return{add:f=>a.push(f),remove:f=>c[i(f)]=++d,size:()=>s.length,data:(f,u)=>(d&&(s=s.filter(r=>!c[i(r)]),c={},d=0),u&&f&&s.sort(f),a.length&&(s=f?uH(f,s,a.sort(f)):s.concat(a),a=[]),s)}}function JA(e){ge.call(this,[],e)}JA.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Le(JA,ge,{transform(e,t){const n=t.fork(t.ALL),i=aW(Je,this.value,n.materialize(n.ADD).add),s=e.sort,a=t.changed()||s&&(e.modified("sort")||t.modified(s.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(Lf(s),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function oW(e){un.call(this,null,Kme,e)}Le(oW,un);function Kme(e){return this.value&&!e.modified()?this.value:NA(e.fields,e.orders)}function QA(e){ge.call(this,null,e)}QA.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Jme(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Le(QA,ge,{transform(e,t){const n=h=>p=>{for(var _=Jme(d(p),e.case,a)||[],l,b=0,m=_.length;b<m;++b)c.test(l=_[b])||h(l)},i=this._parameterCheck(e,t),s=this._counts,a=this._match,c=this._stop,d=e.field,f=e.as||["text","count"],u=n(h=>s[h]=1+(s[h]||0)),r=n(h=>s[h]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,r)),this._finish(t,f)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),s=t[0],a=t[1],c=e.fork(e.NO_SOURCE|e.NO_FIELDS);let d,f,u;for(d in n)f=i[d],u=n[d]||0,!f&&u?(i[d]=f=Xt({}),f[s]=d,f[a]=u,c.add.push(f)):u===0?(f&&c.rem.push(f),n[d]=null,i[d]=null):f[a]!==u&&(f[a]=u,c.mod.push(f));return c.modifies(t)}});function ZA(e){ge.call(this,null,e)}ZA.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Le(ZA,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],s=i[0],a=i[1],c=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let d=this.value;return c?(d&&(n.rem=d),d=t.materialize(t.SOURCE).source,n.add=this.value=Qme(d,s,a,e.filter||Ir)):n.mod=d,n.source=this.value,n.modifies(i)}});function Qme(e,t,n,i){for(var s=[],a={},c=e.length,d=0,f,u;d<c;++d)for(a[t]=u=e[d],f=0;f<c;++f)a[n]=e[f],i(a)&&(s.push(Xt(a)),a={},a[t]=u);return s}const wU={kde:_M,mixture:W7,normal:hM,lognormal:H7,uniform:Y7},Zme="distributions",bU="function",ewe="field";function lW(e,t){const n=e[bU];Ve(wU,n)||be("Unknown distribution function: "+n);const i=wU[n]();for(const s in e)s===ewe?i.data((e.from||t()).map(e[s])):s===Zme?i[s](e[s].map(a=>lW(a,t))):typeof i[s]===bU&&i[s](e[s]);return i}function eO(e){ge.call(this,null,e)}const cW=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],twe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:cW},{name:"weights",type:"number",array:!0}]};eO.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:cW.concat(twe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Le(eO,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=lW(e.distribution,nwe(t)),s=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let c=e.method||"pdf";c!=="pdf"&&c!=="cdf"&&be("Invalid density method: "+c),!e.extent&&!i.data&&be("Missing density extent parameter."),c=i[c];const d=e.as||["value","density"],f=e.extent||ao(i.data()),u=tE(c,f,s,a).map(r=>{const h={};return h[d[0]]=r[0],h[d[1]]=r[1],Xt(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function nwe(e){return()=>e.materialize(e.SOURCE).source}function dW(e,t){return e?e.map((n,i)=>t[i]||Rn(n)):null}function tO(e,t,n){const i=[],s=h=>h(f);let a,c,d,f,u,r;if(t==null)i.push(e.map(n));else for(a={},c=0,d=e.length;c<d;++c)f=e[c],u=t.map(s),r=a[u],r||(a[u]=r=[],r.dims=u,i.push(r)),r.push(n(f));return i}const fW="bin";function nO(e){ge.call(this,null,e)}nO.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:fW}]};const iwe=(e,t)=>Tm(ao(e,t))/30;Le(nO,ge,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=tO(t.source,e.groupby,Di),s=e.smooth||!1,a=e.field,c=e.step||iwe(n,a),d=Lf((l,b)=>a(l)-a(b)),f=e.as||fW,u=i.length;let r=1/0,h=-1/0,p=0,_;for(;p<u;++p){const l=i[p].sort(d);_=-1;for(const b of V7(l,c,s,a))b<r&&(r=b),b>h&&(h=b),l[++_][f]=b}return this.value={start:r,stop:h,step:c},t.reflow(!0).modifies(f)}});function uW(e){un.call(this,null,swe,e),this.modified(!0)}Le(uW,un);function swe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Os(n=>t(n,e),Ni(t),Rn(t))}function iO(e){ge.call(this,[void 0,void 0],e)}iO.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Le(iO,ge,{transform(e,t){const n=this.value,i=e.field,s=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],c=n[1];if((s||a==null)&&(a=1/0,c=-1/0),t.visit(s?t.SOURCE:t.ADD,d=>{const f=Mi(i(d));f!=null&&(f<a&&(a=f),f>c&&(c=f))}),!Number.isFinite(a)||!Number.isFinite(c)){let d=Rn(i);d&&(d=` for field "${d}"`),t.dataflow.warn(`Infinite extent${d}: [${a}, ${c}]`),a=c=void 0}this.value=[a,c]}});function sO(e,t){un.call(this,e),this.parent=t,this.count=0}Le(sO,un,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function IE(e){ge.call(this,{},e),this._keys=h_();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,s=t.active;i<s;++i)n(t[i],i,t)}}Le(IE,ge,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const s=this.value;let a=Ve(s,e)&&s[e],c,d;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(d=i||(d=this._group[e])&&d.tuple,c=n.dataflow,a=new sO(n.fork(n.NO_SOURCE),this),c.add(a).connect(t(c,e,d)),s[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let s=0;for(;s<i;++s)t[s]=e[s];for(;s<n&&t[s]!=null;++s)t[s]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,s=e.subflow,a=this._keys,c=e.modified("key"),d=f=>this.subflow(f,s,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,f=>{const u=Je(f),r=a.get(u);r!==void 0&&(a.delete(u),d(r).rem(f))}),t.visit(t.ADD,f=>{const u=i(f);a.set(Je(f),u),d(u).add(f)}),c||t.modified(i.fields)?t.visit(t.MOD,f=>{const u=Je(f),r=a.get(u),h=i(f);r===h?d(h).mod(f):(a.set(u,h),d(r).rem(f),d(h).add(f))}):t.changed(t.MOD)&&t.visit(t.MOD,f=>{d(a.get(Je(f))).mod(f)}),c&&t.visit(t.REFLOW,f=>{const u=Je(f),r=a.get(u),h=i(f);r!==h&&(a.set(u,h),d(r).rem(f),d(h).add(f))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function hW(e){un.call(this,null,rwe,e)}Le(hW,un);function rwe(e){return this.value&&!e.modified()?this.value:Te(e.name)?$e(e.name).map(t=>Br(t)):Br(e.name,e.as)}function rO(e){ge.call(this,h_(),e)}rO.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Le(rO,ge,{transform(e,t){const n=t.dataflow,i=this.value,s=t.fork(),a=s.add,c=s.rem,d=s.mod,f=e.expr;let u=!0;t.visit(t.REM,h=>{const p=Je(h);i.has(p)?i.delete(p):c.push(h)}),t.visit(t.ADD,h=>{f(h,e)?a.push(h):i.set(Je(h),1)});function r(h){const p=Je(h),_=f(h,e),l=i.get(p);_&&l?(i.delete(p),a.push(h)):!_&&!l?(i.set(p,1),c.push(h)):u&&_&&!l&&d.push(h)}return t.visit(t.MOD,r),e.modified()&&(u=!1,t.visit(t.REFLOW,r)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),s}});function aO(e){ge.call(this,[],e)}aO.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Le(aO,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,s=dW(i,e.as||[]),a=e.index||null,c=s.length;return n.rem=this.value,t.visit(t.SOURCE,d=>{const f=i.map(l=>l(d)),u=f.reduce((l,b)=>Math.max(l,b.length),0);let r=0,h,p,_;for(;r<u;++r){for(p=HA(d),h=0;h<c;++h)p[s[h]]=(_=f[h][r])==null?null:_;a&&(p[a]=r),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(s)}});function oO(e){ge.call(this,[],e)}oO.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Le(oO,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,s=i.map(Rn),a=e.as||["key","value"],c=a[0],d=a[1],f=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let r=0,h;r<f;++r)h=HA(u),h[c]=s[r],h[d]=i[r](u),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function lO(e){ge.call(this,null,e)}lO.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Le(lO,ge,{transform(e,t){const n=e.expr,i=e.as,s=e.modified(),a=e.initonly?t.ADD:s?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return s&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,c=>c[i]=n(c,e))}});function _W(e){ge.call(this,[],e)}Le(_W,ge,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let s=this.value,a=e.size-s.length,c,d,f;if(a>0){for(c=[];--a>=0;)c.push(f=Xt(i(e))),s.push(f);n.add=n.add.length?n.materialize(n.ADD).add.concat(c):c}else d=s.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(d):d,s=s.slice(-a);return n.source=this.value=s,n}});const $b={value:"value",median:r5,mean:iie,min:MF,max:Gd},awe=[];function cO(e){ge.call(this,[],e)}cO.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function owe(e){var t=e.method||$b.value,n;if($b[t]==null)be("Unrecognized imputation method: "+t);else return t===$b.value?(n=e.value!==void 0?e.value:0,()=>n):$b[t]}function lwe(e){const t=e.field;return n=>n?t(n):NaN}Le(cO,ge,{transform(e,t){var n=t.fork(t.ALL),i=owe(e),s=lwe(e),a=Rn(e.field),c=Rn(e.key),d=(e.groupby||[]).map(Rn),f=cwe(t.source,e.groupby,e.key,e.keyvals),u=[],r=this.value,h=f.domain.length,p,_,l,b,m,E,B,I,k,F;for(m=0,I=f.length;m<I;++m)for(p=f[m],l=p.values,_=NaN,B=0;B<h;++B)if(p[B]==null){for(b=f.domain[B],F={_impute:!0},E=0,k=l.length;E<k;++E)F[d[E]]=l[E];F[c]=b,F[a]=Number.isNaN(_)?_=i(p,s):_,u.push(Xt(F))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),r.length&&(n.rem=n.materialize(n.REM).rem.concat(r)),this.value=u,n}});function cwe(e,t,n,i){var s=E=>E(m),a=[],c=i?i.slice():[],d={},f={},u,r,h,p,_,l,b,m;for(c.forEach((E,B)=>d[E]=B+1),p=0,b=e.length;p<b;++p)m=e[p],l=n(m),_=d[l]||(d[l]=c.push(l)),r=(u=t?t.map(s):awe)+"",(h=f[r])||(h=f[r]=[],a.push(h),h.values=u),h[_-1]=m;return a.domain=c,a}function dO(e){Sc.call(this,e)}dO.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:vm},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Le(dO,Sc,{transform(e,t){const n=this,i=e.modified();let s;return n.value&&(i||t.modified(n._inputs,!0))?(s=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(s=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{St(a,s[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function fO(e){ge.call(this,null,e)}fO.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Le(fO,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,s=tO(i,e.groupby,e.field),a=(e.groupby||[]).map(Rn),c=e.bandwidth,d=e.cumulative?"cdf":"pdf",f=e.as||["value","density"],u=[];let r=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;d!=="pdf"&&d!=="cdf"&&be("Invalid density method: "+d),e.resolve==="shared"&&(r||(r=ao(i,e.field)),h=p=e.steps||p),s.forEach(_=>{const l=_M(_,c)[d],b=e.counts?_.length:1,m=r||ao(_);tE(l,m,h,p).forEach(E=>{const B={};for(let I=0;I<a.length;++I)B[a[I]]=_.dims[I];B[f[0]]=E[0],B[f[1]]=E[1]*b,u.push(Xt(B))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function pW(e){un.call(this,null,dwe,e)}Le(pW,un);function dwe(e){return this.value&&!e.modified()?this.value:CA(e.fields,e.flat)}function yW(e){ge.call(this,[],e),this._pending=null}Le(yW,ge,{transform(e,t){const n=t.dataflow;return this._pending?wI(this,t,this._pending):fwe(e)?t.StopPropagation:e.values?wI(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(s=>(this._pending=$e(s.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>wI(this,t,$e(i.data)))}});function fwe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function wI(e,t,n){n.forEach(Xt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function uO(e){ge.call(this,{},e)}uO.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Le(uO,ge,{transform(e,t){const n=e.fields,i=e.index,s=e.values,a=e.default==null?null:e.default,c=e.modified(),d=n.length;let f=c?t.SOURCE:t.ADD,u=t,r=e.as,h,p,_;return s?(p=s.length,d>1&&!r&&be('Multi-field lookup requires explicit "as" parameter.'),r&&r.length!==d*p&&be('The "as" parameter has too few output field names.'),r=r||s.map(Rn),h=function(l){for(var b=0,m=0,E,B;b<d;++b)if(B=i.get(n[b](l)),B==null)for(E=0;E<p;++E,++m)l[r[m]]=a;else for(E=0;E<p;++E,++m)l[r[m]]=s[E](B)}):(r||be("Missing output field names."),h=function(l){for(var b=0,m;b<d;++b)m=i.get(n[b](l)),l[r[b]]=m??a}),c?u=t.reflow(!0):(_=n.some(l=>t.modified(l.fields)),f|=_?t.MOD:0),t.visit(f,h),u.modifies(r)}});function gW(e){un.call(this,null,uwe,e)}Le(gW,un);function uwe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,s=-1/0,a,c;for(a=0;a<n;++a)c=t[a],c[0]<i&&(i=c[0]),c[1]>s&&(s=c[1]);return[i,s]}function mW(e){un.call(this,null,hwe,e)}Le(mW,un);function hwe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function wW(e){ge.call(this,null,e)}Le(wW,ge,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function hO(e){Sc.call(this,e)}hO.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:vm,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Le(hO,Sc,{_transform:Sc.prototype.transform,transform(e,t){return this._transform(_we(e,t),t)}});function _we(e,t){const n=e.field,i=e.value,s=(e.op==="count"?"__count__":e.op)||"sum",a=Ni(n).concat(Ni(i)),c=ywe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:c.map(()=>s),fields:c.map(d=>pwe(d,n,i,a)),as:c.map(d=>d+""),modified:e.modified.bind(e)}}function pwe(e,t,n,i){return Os(s=>t(s)===e?n(s):NaN,i,e+"")}function ywe(e,t,n){const i={},s=[];return n.visit(n.SOURCE,a=>{const c=e(a);i[c]||(i[c]=1,s.push(c))}),s.sort(mE),t?s.slice(0,t):s}function bW(e){IE.call(this,e)}Le(bW,IE,{transform(e,t){const n=e.subflow,i=e.field,s=a=>this.subflow(Je(a),n,t,a);return(e.modified("field")||i&&t.modified(Ni(i)))&&be("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const c=s(a);i(a).forEach(d=>c.mod(d))}),t.visit(t.ADD,a=>{const c=s(a);i(a).forEach(d=>c.add(Xt(d)))}),t.visit(t.REM,a=>{const c=s(a);i(a).forEach(d=>c.rem(d))})):(t.visit(t.MOD,a=>s(a).mod(a)),t.visit(t.ADD,a=>s(a).add(a)),t.visit(t.REM,a=>s(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function _O(e){ge.call(this,null,e)}_O.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Le(_O,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,s=dW(e.fields,e.as||[]),a=i?(d,f)=>gwe(d,f,i,s):EE;let c;return this.value?c=this.value:(t=t.addAll(),c=this.value={}),t.visit(t.REM,d=>{const f=Je(d);n.rem.push(c[f]),c[f]=null}),t.visit(t.ADD,d=>{const f=a(d,Xt({}));c[Je(d)]=f,n.add.push(f)}),t.visit(t.MOD,d=>{n.mod.push(a(d,c[Je(d)]))}),n}});function gwe(e,t,n,i){for(let s=0,a=n.length;s<a;++s)t[i[s]]=n[s](e);return t}function TW(e){ge.call(this,null,e)}Le(TW,ge,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function pO(e){ge.call(this,null,e)}pO.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const mwe=1e-14;Le(pO,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const s=t.materialize(t.SOURCE).source,a=tO(s,e.groupby,e.field),c=(e.groupby||[]).map(Rn),d=[],f=e.step||.01,u=e.probs||Hs(f/2,1-mwe,f),r=u.length;return a.forEach(h=>{const p=lM(h,u);for(let _=0;_<r;++_){const l={};for(let b=0;b<c.length;++b)l[c[b]]=h.dims[b];l[i[0]]=u[_],l[i[1]]=p[_],d.push(Xt(l))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d,n}});function vW(e){ge.call(this,null,e)}Le(vW,ge,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,s=>{const a=Je(s);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,s=>{const a=HA(s);i[Je(s)]=a,n.add.push(a)}),t.visit(t.MOD,s=>{const a=i[Je(s)];for(const c in s)a[c]=s[c],n.modifies(c);n.mod.push(a)})),n}});function yO(e){ge.call(this,[],e),this.count=0}yO.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Le(yO,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),s=e.size,a=this.value.reduce((r,h)=>(r[Je(h)]=1,r),{});let c=this.value,d=this.count,f=0;function u(r){let h,p;c.length<s?c.push(r):(p=~~((d+1)*vr()),p<c.length&&p>=f&&(h=c[p],a[Je(h)]&&n.rem.push(h),c[p]=r)),++d}if(t.rem.length&&(t.visit(t.REM,r=>{const h=Je(r);a[h]&&(a[h]=-1,n.rem.push(r)),--d}),c=c.filter(r=>a[Je(r)]!==-1)),(t.rem.length||i)&&c.length<s&&t.source&&(f=d=c.length,t.visit(t.SOURCE,r=>{a[Je(r)]||u(r)}),f=-1),i&&c.length>s){const r=c.length-s;for(let h=0;h<r;++h)a[Je(c[h])]=-1,n.rem.push(c[h]);c=c.slice(r)}return t.mod.length&&t.visit(t.MOD,r=>{a[Je(r)]&&n.mod.push(r)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||f<0)&&(n.add=c.filter(r=>!a[Je(r)])),this.count=d,this.value=n.source=c,n}});function gO(e){ge.call(this,null,e)}gO.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Le(gO,ge,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Hs(e.start,e.stop,e.step||1).map(s=>{const a={};return a[i]=s,Xt(a)}),n.add=t.add.concat(this.value),n}});function EW(e){ge.call(this,null,e),this.modified(!0)}Le(EW,ge,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function mO(e){ge.call(this,null,e)}const SW=["unit0","unit1"];mO.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:UA,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:SW}]};Le(mO,ge,{transform(e,t){const n=e.field,i=e.interval!==!1,s=e.timezone==="utc",a=this._floor(e,t),c=(s?p_:__)(a.unit).offset,d=e.as||SW,f=d[0],u=d[1],r=a.step;let h=a.start||1/0,p=a.stop||-1/0,_=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Ni(n)))&&(t=t.reflow(!0),_=t.SOURCE,h=1/0,p=-1/0),t.visit(_,l=>{const b=n(l);let m,E;b==null?(l[f]=null,i&&(l[u]=null)):(l[f]=m=E=a(b),i&&(l[u]=E=c(m,r)),m<h&&(h=m),E>p&&(p=E))}),a.start=h,a.stop=p,t.modifies(i?d:f)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:s}=e.units?{units:e.units,step:e.step||1}:RH({extent:e.extent||ao(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=jA(i),c=this.value||{},d=(n?BH:SH)(a,s);return d.unit=Pt(a),d.units=a,d.step=s,d.start=c.start,d.stop=c.stop,this.value=d}});function BW(e){ge.call(this,h_(),e)}Le(BW,ge,{transform(e,t){const n=t.dataflow,i=e.field,s=this.value,a=d=>s.set(i(d),d);let c=!0;return e.modified("field")||t.modified(i.fields)?(s.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,d=>s.delete(i(d))),t.visit(t.ADD,a)):c=!1,this.modified(c),s.empty>n.cleanThreshold&&n.runAfter(s.clean),t.fork()}});function IW(e){ge.call(this,null,e)}Le(IW,ge,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Lf(e.sort)):t.source).map(e.field))}});function wwe(e,t,n,i){const s=Og[e](t,n);return{init:s.init||Jl,update:function(a,c){c[i]=s.next(a)}}}const Og={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=Og.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let s=t.index;if(e<s){for(;s+1<n.length&&!i(n[s],n[s+1]);)++s;e=s}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||be("ntile num must be greater than zero.");const n=Og.cume_dist(),i=n.next;return{init:n.init,next:s=>Math.ceil(t*i(s))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,s=n.data;return i<s.length?e(s[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||be("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const s=i.data;return i.index<=n?t:(n=bwe(e,s,i.index))<0?(n=s.length,t=null):t=e(s[n])}}}};function bwe(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const Twe=Object.keys(Og);function FW(e){const t=$e(e.ops),n=$e(e.fields),i=$e(e.params),s=$e(e.aggregate_params),a=$e(e.as),c=this.outputs=[],d=this.windows=[],f={},u={},r=[],h=[];let p=!0;function _(l){$e(Ni(l)).forEach(b=>f[b]=1)}_(e.sort),t.forEach((l,b)=>{const m=n[b],E=i[b],B=s[b]||null,I=Rn(m),k=nW(l,I,a[b]);if(_(m),c.push(k),Ve(Og,l))d.push(wwe(l,m,E,k));else{if(m==null&&l!=="count"&&be("Null aggregate field specified."),l==="count"){r.push(k);return}p=!1;let F=u[I];F||(F=u[I]=[],F.field=m,h.push(F)),F.push(iW(l,B,k))}}),(r.length||h.length)&&(this.cell=vwe(h,r,p)),this.inputs=Object.keys(f)}const kW=FW.prototype;kW.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};kW.update=function(e,t){const n=this.cell,i=this.windows,s=e.data,a=i&&i.length;let c;if(n){for(c=e.p0;c<e.i0;++c)n.rem(s[c]);for(c=e.p1;c<e.i1;++c)n.add(s[c]);n.set(t)}for(c=0;c<a;++c)i[c].update(e,t)};function vwe(e,t,n){e=e.map(f=>rW(f,f.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var s=e.length,a=i.agg=Array(s),c=0;c<s;++c)a[c]=new e[c](i);if(i.store)var d=i.data=new XA;return i.add=function(f){if(i.num+=1,!n){d&&d.add(f);for(let u=0;u<s;++u)a[u].add(a[u].get(f),f)}},i.rem=function(f){if(i.num-=1,!n){d&&d.rem(f);for(let u=0;u<s;++u)a[u].rem(a[u].get(f),f)}},i.set=function(f){let u,r;for(d&&d.values(),u=0,r=t.length;u<r;++u)f[t[u]]=i.num;if(!n)for(u=0,r=a.length;u<r;++u)a[u].set(f)},i.init=function(){i.num=0,d&&d.reset();for(let f=0;f<s;++f)a[f].init()},i}function wO(e){ge.call(this,{},e),this._mlen=0,this._mods=[]}wO.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Twe.concat(vm)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Le(wO,ge,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Lf(e.sort),s=$k(e.groupby),a=d=>this.group(s(d));let c=this.state;(!c||n)&&(c=this.state=new FW(e)),n||t.modified(c.inputs)?(this.value={},t.visit(t.SOURCE,d=>a(d).add(d))):(t.visit(t.REM,d=>a(d).remove(d)),t.visit(t.ADD,d=>a(d).add(d)));for(let d=0,f=this._mlen;d<f;++d)Ewe(this._mods[d],c,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(c.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=aW(Je),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Ewe(e,t,n,i){const s=i.sort,a=s&&!i.ignorePeers,c=i.frame||[null,0],d=e.data(n),f=d.length,u=a?Qh(s):null,r={i0:0,i1:0,p0:0,p1:0,index:0,data:d,compare:s||Ui(-1)};t.init();for(let h=0;h<f;++h)Swe(r,c,h,f),a&&Bwe(r,u),t.update(r,d[h])}function Swe(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function Bwe(e,t){const n=e.i0,i=e.i1-1,s=e.compare,a=e.data,c=a.length-1;n>0&&!s(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<c&&!s(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const Iwe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Sc,bin:KA,collect:JA,compare:oW,countpattern:QA,cross:ZA,density:eO,dotbin:nO,expression:uW,extent:iO,facet:IE,field:hW,filter:rO,flatten:aO,fold:oO,formula:lO,generate:_W,impute:cO,joinaggregate:dO,kde:fO,key:pW,load:yW,lookup:uO,multiextent:gW,multivalues:mW,params:wW,pivot:hO,prefacet:bW,project:_O,proxy:TW,quantile:pO,relay:vW,sample:yO,sequence:gO,sieve:EW,subflow:sO,timeunit:mO,tupleindex:BW,values:IW,window:wO},Symbol.toStringTag,{value:"Module"}));function fc(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Fwe=()=>typeof Image<"u"?Image:null;function bO(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const kwe="identity",Th="linear",wl="log",Em="pow",Sm="sqrt",FE="symlog",df="time",ff="utc",Ka="sequential",y_="diverging",vh="quantile",kE="quantize",xE="threshold",TO="ordinal",zk="point",xW="band",vO="bin-ordinal",ni="continuous",Bm="discrete",Im="discretizing",Mr="interpolating",EO="temporal";function xwe(e){return function(t){let n=t[0],i=t[1],s;return i<n&&(s=n,n=i,i=s),[e.invert(n),e.invert(i)]}}function Mwe(e){return function(t){const n=e.range();let i=t[0],s=t[1],a=-1,c,d,f,u;for(s<i&&(d=i,i=s,s=d),f=0,u=n.length;f<u;++f)n[f]>=i&&n[f]<=s&&(a<0&&(a=f),c=f);if(!(a<0))return i=e.invertExtent(n[a]),s=e.invertExtent(n[c]),[i[0]===void 0?i[1]:i[0],s[1]===void 0?s[0]:s[1]]}}function SO(){const e=Vx().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],s,a,c=!1,d=0,f=0,u=.5;delete e.unknown;function r(){const h=t().length,p=i[1]<i[0],_=i[1-p],l=bO(h,d,f);let b=i[p-0];s=(_-b)/(l||1),c&&(s=Math.floor(s)),b+=(_-b-s*(h-d))*u,a=s*(1-d),c&&(b=Math.round(b),a=Math.round(a));const m=Hs(h).map(E=>b+s*E);return n(p?m.reverse():m)}return e.domain=function(h){return arguments.length?(t(h),r()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],r()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],c=!0,r()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(h){return arguments.length?(c=!!h,r()):c},e.padding=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d=f,r()):d},e.paddingInner=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),r()):d},e.paddingOuter=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),r()):f},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),r()):u},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],_=p?n().reverse():n(),l=_.length-1;let b=+h[0],m=+h[1],E,B,I;if(!(b!==b||m!==m)&&(m<b&&(I=b,b=m,m=I),!(m<_[0]||b>i[1-p])))return E=Math.max(0,yc(_,b)-1),B=b===m?E:yc(_,m)-1,b-_[E]>a+1e-10&&++E,p&&(I=E,E=l-B,B=l-I),E>B?void 0:t().slice(E,B+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return SO().domain(t()).range(i).round(c).paddingInner(d).paddingOuter(f).align(u)},r()}function MW(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return MW(t())},e}function Awe(){return MW(SO().paddingInner(1))}var Owe=Array.prototype.map;function Nwe(e){return Owe.call(e,Mi)}const Rwe=Array.prototype.slice;function AW(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(yc(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=Nwe(i),n):e.slice()},n.range=function(i){return arguments.length?(t=Rwe.call(i),n):t.slice()},n.tickFormat=function(i,s){return n7(e[0],Pt(e),i??10,s)},n.copy=function(){return AW().domain(n.domain()).range(n.range())},n}const Pv=new Map,OW=Symbol("vega_scale");function NW(e){return e[OW]=!0,e}function Cwe(e){return e&&e[OW]===!0}function Lwe(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?xwe(a):a.invertExtent?Mwe(a):void 0),a.type=e,NW(a)};return i.metadata=ia($e(n)),i}function Yt(e,t,n){return arguments.length>1?(Pv.set(e,Lwe(e,t,n)),this):RW(e)?Pv.get(e):void 0}Yt(kwe,i7);Yt(Th,Gx,ni);Yt(wl,r7,[ni,wl]);Yt(Em,Xx,ni);Yt(Sm,gde,ni);Yt(FE,a7,ni);Yt(df,w7,[ni,EO]);Yt(ff,Ofe,[ni,EO]);Yt(Ka,eM,[ni,Mr]);Yt(`${Ka}-${Th}`,eM,[ni,Mr]);Yt(`${Ka}-${wl}`,b7,[ni,Mr,wl]);Yt(`${Ka}-${Em}`,tM,[ni,Mr]);Yt(`${Ka}-${Sm}`,Nfe,[ni,Mr]);Yt(`${Ka}-${FE}`,T7,[ni,Mr]);Yt(`${y_}-${Th}`,v7,[ni,Mr]);Yt(`${y_}-${wl}`,E7,[ni,Mr,wl]);Yt(`${y_}-${Em}`,nM,[ni,Mr]);Yt(`${y_}-${Sm}`,Rfe,[ni,Mr]);Yt(`${y_}-${FE}`,S7,[ni,Mr]);Yt(vh,o7,[Im,vh]);Yt(kE,l7,Im);Yt(xE,c7,Im);Yt(vO,AW,[Bm,Im]);Yt(TO,Vx,Bm);Yt(xW,SO,Bm);Yt(zk,Awe,Bm);function RW(e){return Pv.has(e)}function Pf(e,t){const n=Pv.get(e);return n&&n.metadata[t]}function BO(e){return Pf(e,ni)}function Eh(e){return Pf(e,Bm)}function qk(e){return Pf(e,Im)}function CW(e){return Pf(e,wl)}function Pwe(e){return Pf(e,EO)}function LW(e){return Pf(e,Mr)}function PW(e){return Pf(e,vh)}const Dwe=["clamp","base","constant","exponent"];function DW(e,t){const n=t[0],i=Pt(t)-n;return function(s){return e(n+s*i)}}function ME(e,t,n){return Ix(IO(t||"rgb",n),e)}function UW(e,t){const n=new Array(t),i=t+1;for(let s=0;s<t;)n[s]=e(++s/i);return n}function jW(e,t,n){const i=n-t;let s,a,c;return!i||!Number.isFinite(i)?Ui(.5):(s=(a=e.type).indexOf("-"),a=s<0?a:a.slice(s+1),c=Yt(a)().domain([t,n]).range([0,1]),Dwe.forEach(d=>e[d]?c[d](e[d]()):0),c)}function IO(e,t){const n=Ire[Uwe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Uwe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const jwe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},$we={accent:Lfe,category10:Cfe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Pfe,observable10:Dfe,paired:Ufe,pastel1:jfe,pastel2:$fe,set1:zfe,set2:qfe,set3:Vfe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function $W(e){if(Te(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function zW(e,t){for(const n in e)FO(n,t(e[n]))}const TU={};zW($we,$W);zW(jwe,e=>ME($W(e)));function FO(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(TU[e]=t,this):TU[e]}const C0="symbol",zwe="discrete",qwe="gradient",Vwe=e=>Te(e)?e.map(t=>String(t)):String(e),Gwe=(e,t)=>e[1]-t[1],Hwe=(e,t)=>t[1]-e[1];function kO(e,t,n){let i;return Wt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Tm(e.domain())/n||1)+1))),je(t)&&(i=t.step,t=t.interval),ze(t)&&(t=e.type===df?__(t):e.type==ff?p_(t):be("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function qW(e,t,n){let i=e.range(),s=i[0],a=Pt(i),c=Gwe;if(s>a&&(i=a,a=s,s=i,c=Hwe),s=Math.floor(s),a=Math.ceil(a),t=t.map(d=>[d,e(d)]).filter(d=>s<=d[1]&&d[1]<=a).sort(c).map(d=>d[0]),n>0&&t.length>1){const d=[t[0],Pt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((f,u)=>!(u%2));t.length<3&&(t=d)}return t}function xO(e,t){return e.bins?qW(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function VW(e,t,n,i,s,a){const c=t.type;let d=Vwe;if(c===df||s===df)d=e.timeFormat(i);else if(c===ff||s===ff)d=e.utcFormat(i);else if(CW(c)){const f=e.formatFloat(i);if(a||t.bins)d=f;else{const u=GW(t,n,!1);d=r=>u(r)?f(r):""}}else if(t.tickFormat){const f=t.domain();d=e.formatSpan(f[0],f[f.length-1],n,i)}else i&&(d=e.format(i));return d}function GW(e,t,n){const i=xO(e,t),s=e.base(),a=Math.log(s),c=Math.max(1,s*t/i.length),d=f=>{let u=f/Math.pow(s,Math.round(Math.log(f)/a));return u*s<s-.5&&(u*=s),u<=c};return n?i.filter(d):d}const Vk={[vh]:"quantiles",[kE]:"thresholds",[xE]:"domain"},HW={[vh]:"quantiles",[kE]:"domain"};function WW(e,t){return e.bins?Xwe(e.bins):e.type===wl?GW(e,t,!0):Vk[e.type]?Ywe(e[Vk[e.type]]()):xO(e,t)}function Wwe(e,t,n){const i=t[HW[t.type]](),s=i.length;let a=s>1?i[1]-i[0]:i[0],c;for(c=1;c<s;++c)a=Math.min(a,i[c]-i[c-1]);return e.formatSpan(0,a,3*10,n)}function Ywe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Xwe(e){const t=e.slice(0,-1);return t.max=Pt(e),t}const Kwe=e=>Vk[e.type]||e.bins;function YW(e,t,n,i,s,a,c){const d=HW[t.type]&&a!==df&&a!==ff?Wwe(e,t,s):VW(e,t,n,s,a,c);return i===C0&&Kwe(t)?Jwe(d):i===zwe?Qwe(d):Zwe(d)}const Jwe=e=>(t,n,i)=>{const s=vU(i[n+1],vU(i.max,1/0)),a=EU(t,e),c=EU(s,e);return a&&c?a+" – "+c:c?"< "+c:"≥ "+a},vU=(e,t)=>e??t,Qwe=e=>(t,n)=>n?e(t):null,Zwe=e=>t=>e(t),EU=(e,t)=>Number.isFinite(e)?t(e):null;function ebe(e){const t=e.domain(),n=t.length-1;let i=+t[0],s=+Pt(t),a=s-i;if(e.type===xE){const c=n?a/n:.1;i-=c,s+=c,a=s-i}return c=>(c-i)/a}function tbe(e,t,n,i){const s=i||t.type;return ze(n)&&Pwe(s)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&s===df?e.timeFormat("%A, %d %B %Y, %X"):!n&&s===ff?e.utcFormat("%A, %d %B %Y, %X UTC"):YW(e,t,5,null,n,i,!0)}function XW(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),s=tbe(e,t,n.format,n.formatType);if(qk(t.type)){const a=WW(t).slice(1).map(s),c=a.length;return`${c} boundar${c===1?"y":"ies"}: ${a.join(", ")}`}else if(Eh(t.type)){const a=t.domain(),c=a.length,d=c>i?a.slice(0,i-2).map(s).join(", ")+", ending with "+a.slice(-1).map(s):a.map(s).join(", ");return`${c} value${c===1?"":"s"}: ${d}`}else{const a=t.domain();return`values from ${s(a[0])} to ${s(Pt(a))}`}}let KW=0;function nbe(){KW=0}const Dv="p_";function MO(e){return e&&e.gradient}function JW(e,t,n){const i=e.gradient;let s=e.id,a=i==="radial"?Dv:"";return s||(s=e.id="gradient_"+KW++,i==="radial"?(e.x1=Ia(e.x1,.5),e.y1=Ia(e.y1,.5),e.r1=Ia(e.r1,0),e.x2=Ia(e.x2,.5),e.y2=Ia(e.y2,.5),e.r2=Ia(e.r2,.5),a=Dv):(e.x1=Ia(e.x1,0),e.y1=Ia(e.y1,0),e.x2=Ia(e.x2,1),e.y2=Ia(e.y2,0))),t[s]=e,"url("+(n||"")+"#"+a+s+")"}function Ia(e,t){return e??t}function QW(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(s,a){return n.push({offset:s,color:a}),i}}}const SU={basis:{curve:nue},"basis-closed":{curve:iue},"basis-open":{curve:sue},bundle:{curve:rue,tension:"beta",value:.85},cardinal:{curve:aue,tension:"tension",value:0},"cardinal-open":{curve:lue,tension:"tension",value:0},"cardinal-closed":{curve:oue,tension:"tension",value:0},"catmull-rom":{curve:cue,tension:"alpha",value:.5},"catmull-rom-closed":{curve:due,tension:"alpha",value:.5},"catmull-rom-open":{curve:fue,tension:"alpha",value:.5},linear:{curve:iM},"linear-closed":{curve:uue},monotone:{horizontal:_ue,vertical:hue},natural:{curve:pue},step:{curve:yue},"step-after":{curve:mue},"step-before":{curve:gue}};function AO(e,t,n){var i=Ve(SU,e)&&SU[e],s=null;return i&&(s=i.curve||i[t||"vertical"],i.tension&&n!=null&&(s=s[i.tension](n))),s}const ibe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},sbe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,rbe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,abe=/^((\s+,?\s*)|(,\s*))/,obe=/^[01]/;function Sh(e){const t=[];return(e.match(sbe)||[]).forEach(i=>{let s=i[0];const a=s.toLowerCase(),c=ibe[a],d=lbe(a,c,i.slice(1).trim()),f=d.length;if(f<c||f&&f%c!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([s,...d.slice(0,c)]),f!==c){a==="m"&&(s=s==="M"?"L":"l");for(let u=c;u<f;u+=c)t.push([s,...d.slice(u,u+c)])}}),t}function lbe(e,t,n){const i=[];for(let s=0;t&&s<n.length;)for(let a=0;a<t;++a){const c=e==="a"&&(a===3||a===4)?obe:rbe,d=n.slice(s).match(c);if(d===null)throw Error("Invalid SVG path, incorrect parameter type");s+=d[0].length,i.push(+d[0]);const f=n.slice(s).match(abe);f!==null&&(s+=f[0].length)}return i}const Bc=Math.PI/180,cbe=1e-14,Pd=Math.PI/2,qa=Math.PI*2,nu=Math.sqrt(3)/2;var bI={},TI={},ZW=[].join;function dbe(e,t,n,i,s,a,c,d,f){const u=ZW.call(arguments);if(bI[u])return bI[u];const r=c*Bc,h=Math.sin(r),p=Math.cos(r);n=Math.abs(n),i=Math.abs(i);const _=p*(d-e)*.5+h*(f-t)*.5,l=p*(f-t)*.5-h*(d-e)*.5;let b=_*_/(n*n)+l*l/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const m=p/n,E=h/n,B=-h/i,I=p/i,k=m*d+E*f,F=B*d+I*f,x=m*e+E*t,M=B*e+I*t;let P=1/((x-k)*(x-k)+(M-F)*(M-F))-.25;P<0&&(P=0);let C=Math.sqrt(P);a==s&&(C=-C);const D=.5*(k+x)-C*(M-F),j=.5*(F+M)+C*(x-k),$=Math.atan2(F-j,k-D);let H=Math.atan2(M-j,x-D)-$;H<0&&a===1?H+=qa:H>0&&a===0&&(H-=qa);const G=Math.ceil(Math.abs(H/(Pd+.001))),z=[];for(let q=0;q<G;++q){const ie=$+q*H/G,ce=$+(q+1)*H/G;z[q]=[D,j,ie,ce,n,i,h,p]}return bI[u]=z}function fbe(e){const t=ZW.call(e);if(TI[t])return TI[t];var n=e[0],i=e[1],s=e[2],a=e[3],c=e[4],d=e[5],f=e[6],u=e[7];const r=u*c,h=-f*d,p=f*c,_=u*d,l=Math.cos(s),b=Math.sin(s),m=Math.cos(a),E=Math.sin(a),B=.5*(a-s),I=Math.sin(B*.5),k=8/3*I*I/Math.sin(B),F=n+l-k*b,x=i+b+k*l,M=n+m,R=i+E,P=M+k*E,C=R-k*m;return TI[t]=[r*F+h*x,p*F+_*x,r*P+h*C,p*P+_*C,r*M+h*R,p*M+_*R]}const sr=["l",0,0,0,0,0,0,0];function ube(e,t,n){const i=sr[0]=e[0];if(i==="a"||i==="A")sr[1]=t*e[1],sr[2]=n*e[2],sr[3]=e[3],sr[4]=e[4],sr[5]=e[5],sr[6]=t*e[6],sr[7]=n*e[7];else if(i==="h"||i==="H")sr[1]=t*e[1];else if(i==="v"||i==="V")sr[1]=n*e[1];else for(var s=1,a=e.length;s<a;++s)sr[s]=(s%2==1?t:n)*e[s];return sr}function Ng(e,t,n,i,s,a){var c,d=null,f=0,u=0,r=0,h=0,p,_,l,b,m=0,E=0;n==null&&(n=0),i==null&&(i=0),s==null&&(s=1),a==null&&(a=s),e.beginPath&&e.beginPath();for(var B=0,I=t.length;B<I;++B){switch(c=t[B],(s!==1||a!==1)&&(c=ube(c,s,a)),c[0]){case"l":f+=c[1],u+=c[2],e.lineTo(f+n,u+i);break;case"L":f=c[1],u=c[2],e.lineTo(f+n,u+i);break;case"h":f+=c[1],e.lineTo(f+n,u+i);break;case"H":f=c[1],e.lineTo(f+n,u+i);break;case"v":u+=c[1],e.lineTo(f+n,u+i);break;case"V":u=c[1],e.lineTo(f+n,u+i);break;case"m":f+=c[1],u+=c[2],m=f,E=u,e.moveTo(f+n,u+i);break;case"M":f=c[1],u=c[2],m=f,E=u,e.moveTo(f+n,u+i);break;case"c":p=f+c[5],_=u+c[6],r=f+c[3],h=u+c[4],e.bezierCurveTo(f+c[1]+n,u+c[2]+i,r+n,h+i,p+n,_+i),f=p,u=_;break;case"C":f=c[5],u=c[6],r=c[3],h=c[4],e.bezierCurveTo(c[1]+n,c[2]+i,r+n,h+i,f+n,u+i);break;case"s":p=f+c[3],_=u+c[4],r=2*f-r,h=2*u-h,e.bezierCurveTo(r+n,h+i,f+c[1]+n,u+c[2]+i,p+n,_+i),r=f+c[1],h=u+c[2],f=p,u=_;break;case"S":p=c[3],_=c[4],r=2*f-r,h=2*u-h,e.bezierCurveTo(r+n,h+i,c[1]+n,c[2]+i,p+n,_+i),f=p,u=_,r=c[1],h=c[2];break;case"q":p=f+c[3],_=u+c[4],r=f+c[1],h=u+c[2],e.quadraticCurveTo(r+n,h+i,p+n,_+i),f=p,u=_;break;case"Q":p=c[3],_=c[4],e.quadraticCurveTo(c[1]+n,c[2]+i,p+n,_+i),f=p,u=_,r=c[1],h=c[2];break;case"t":p=f+c[1],_=u+c[2],d[0].match(/[QqTt]/)===null?(r=f,h=u):d[0]==="t"?(r=2*f-l,h=2*u-b):d[0]==="q"&&(r=2*f-r,h=2*u-h),l=r,b=h,e.quadraticCurveTo(r+n,h+i,p+n,_+i),f=p,u=_,r=f+c[1],h=u+c[2];break;case"T":p=c[1],_=c[2],r=2*f-r,h=2*u-h,e.quadraticCurveTo(r+n,h+i,p+n,_+i),f=p,u=_;break;case"a":BU(e,f+n,u+i,[c[1],c[2],c[3],c[4],c[5],c[6]+f+n,c[7]+u+i]),f+=c[6],u+=c[7];break;case"A":BU(e,f+n,u+i,[c[1],c[2],c[3],c[4],c[5],c[6]+n,c[7]+i]),f=c[6],u=c[7];break;case"z":case"Z":f=m,u=E,e.closePath();break}d=c}}function BU(e,t,n,i){const s=dbe(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<s.length;++a){const c=fbe(s[a]);e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5])}}const IU=.5773502691896257,FU={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,qa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,s=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(s,-a),e.lineTo(0,-n),e.lineTo(-s,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=nu*n,s=i-n*IU,a=n/4;e.moveTo(0,-i-s),e.lineTo(-a,i-s),e.lineTo(a,i-s),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=nu*n,s=i-n*IU;e.moveTo(0,-i-s),e.lineTo(-n,i-s),e.lineTo(n,i-s),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=nu*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=nu*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=nu*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=nu*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function eY(e){return Ve(FU,e)?FU[e]:hbe(e)}var vI={};function hbe(e){if(!Ve(vI,e)){const t=Sh(e);vI[e]={draw:function(n,i){Ng(n,t,0,0,Math.sqrt(i)/2)}}}return vI[e]}const Pl=.448084975506;function _be(e){return e.x}function pbe(e){return e.y}function ybe(e){return e.width}function gbe(e){return e.height}function Lo(e){return typeof e=="function"?e:()=>+e}function zb(e,t,n){return Math.max(t,Math.min(e,n))}function tY(){var e=_be,t=pbe,n=ybe,i=gbe,s=Lo(0),a=s,c=s,d=s,f=null;function u(r,h,p){var _,l=h??+e.call(this,r),b=p??+t.call(this,r),m=+n.call(this,r),E=+i.call(this,r),B=Math.min(m,E)/2,I=zb(+s.call(this,r),0,B),k=zb(+a.call(this,r),0,B),F=zb(+c.call(this,r),0,B),x=zb(+d.call(this,r),0,B);if(f||(f=_=C1()),I<=0&&k<=0&&F<=0&&x<=0)f.rect(l,b,m,E);else{var M=l+m,R=b+E;f.moveTo(l+I,b),f.lineTo(M-k,b),f.bezierCurveTo(M-Pl*k,b,M,b+Pl*k,M,b+k),f.lineTo(M,R-x),f.bezierCurveTo(M,R-Pl*x,M-Pl*x,R,M-x,R),f.lineTo(l+F,R),f.bezierCurveTo(l+Pl*F,R,l,R-Pl*F,l,R-F),f.lineTo(l,b+I),f.bezierCurveTo(l,b+Pl*I,l+Pl*I,b,l+I,b),f.closePath()}if(_)return f=null,_+""||null}return u.x=function(r){return arguments.length?(e=Lo(r),u):e},u.y=function(r){return arguments.length?(t=Lo(r),u):t},u.width=function(r){return arguments.length?(n=Lo(r),u):n},u.height=function(r){return arguments.length?(i=Lo(r),u):i},u.cornerRadius=function(r,h,p,_){return arguments.length?(s=Lo(r),a=h!=null?Lo(h):s,d=p!=null?Lo(p):s,c=_!=null?Lo(_):a,u):s},u.context=function(r){return arguments.length?(f=r??null,u):f},u}function nY(){var e,t,n,i,s=null,a,c,d,f;function u(h,p,_){const l=_/2;if(a){var b=d-p,m=h-c;if(b||m){var E=Math.hypot(b,m),B=(b/=E)*f,I=(m/=E)*f,k=Math.atan2(m,b);s.moveTo(c-B,d-I),s.lineTo(h-b*l,p-m*l),s.arc(h,p,l,k-Math.PI,k),s.lineTo(c+B,d+I),s.arc(c,d,f,k,k+Math.PI)}else s.arc(h,p,l,0,qa);s.closePath()}else a=1;c=h,d=p,f=l}function r(h){var p,_=h.length,l,b=!1,m;for(s==null&&(s=m=C1()),p=0;p<=_;++p)!(p<_&&i(l=h[p],p,h))===b&&(b=!b)&&(a=0),b&&u(+e(l,p,h),+t(l,p,h),+n(l,p,h));if(m)return s=null,m+""||null}return r.x=function(h){return arguments.length?(e=h,r):e},r.y=function(h){return arguments.length?(t=h,r):t},r.size=function(h){return arguments.length?(n=h,r):n},r.defined=function(h){return arguments.length?(i=h,r):i},r.context=function(h){return arguments.length?(h==null?s=null:s=h,r):s},r}function Fm(e,t){return e??t}const km=e=>e.x||0,xm=e=>e.y||0,mbe=e=>e.width||0,wbe=e=>e.height||0,bbe=e=>(e.x||0)+(e.width||0),Tbe=e=>(e.y||0)+(e.height||0),vbe=e=>e.startAngle||0,Ebe=e=>e.endAngle||0,Sbe=e=>e.padAngle||0,Bbe=e=>e.innerRadius||0,Ibe=e=>e.outerRadius||0,Fbe=e=>e.cornerRadius||0,kbe=e=>Fm(e.cornerRadiusTopLeft,e.cornerRadius)||0,xbe=e=>Fm(e.cornerRadiusTopRight,e.cornerRadius)||0,Mbe=e=>Fm(e.cornerRadiusBottomRight,e.cornerRadius)||0,Abe=e=>Fm(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Obe=e=>Fm(e.size,64),Nbe=e=>e.size||1,AE=e=>e.defined!==!1,Rbe=e=>eY(e.shape||"circle"),Cbe=Zfe().startAngle(vbe).endAngle(Ebe).padAngle(Sbe).innerRadius(Bbe).outerRadius(Ibe).cornerRadius(Fbe),Lbe=A7().x(km).y1(xm).y0(Tbe).defined(AE),Pbe=A7().y(xm).x1(km).x0(bbe).defined(AE),Dbe=M7().x(km).y(xm).defined(AE),Ube=tY().x(km).y(xm).width(mbe).height(wbe).cornerRadius(kbe,xbe,Mbe,Abe),jbe=tue().type(Rbe).size(Obe),$be=nY().x(km).y(xm).defined(AE).size(Nbe);function OO(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function zbe(e,t){return Cbe.context(e)(t)}function qbe(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Pbe:Lbe).curve(AO(i,n.orient,n.tension)).context(e)(t)}function Vbe(e,t){const n=t[0],i=n.interpolate||"linear";return Dbe.curve(AO(i,n.orient,n.tension)).context(e)(t)}function g_(e,t,n,i){return Ube.context(e)(t,n,i)}function Gbe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Hbe(e,t){return jbe.context(e)(t)}function Wbe(e,t){return $be.context(e)(t)}var iY=1;function sY(){iY=1}function NO(e,t,n){var i=t.clip,s=e._defs,a=t.clip_id||(t.clip_id="clip"+iY++),c=s.clipping[a]||(s.clipping[a]={id:a});return Bt(i)?c.path=i(null):OO(n)?c.path=g_(null,n,0,0):(c.width=n.width||0,c.height=n.height||0),"url(#"+a+")"}function Gn(e){this.clear(),e&&this.union(e)}Gn.prototype={clone(){return new Gn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:s,x2:a,y2:c}=this,d=Math.cos(e),f=Math.sin(e),u=t-t*d+n*f,r=n-t*f-n*d;return[d*i-f*s+u,f*i+d*s+r,d*i-f*c+u,f*i+d*c+r,d*a-f*s+u,f*a+d*s+r,d*a-f*c+u,f*a+d*c+r]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function OE(e){this.mark=e,this.bounds=this.bounds||new Gn}function NE(e){OE.call(this,e),this.items=this.items||[]}Le(NE,OE);class rY{constructor(t){this._pending=0,this._loader=t||bE()}pending(){return this._pending}sanitizeURL(t){const n=this;return kU(n),n._loader.sanitize(t,{context:"href"}).then(i=>(Jp(n),i)).catch(()=>(Jp(n),null))}loadImage(t){const n=this,i=Fwe();return kU(n),n._loader.sanitize(t,{context:"image"}).then(s=>{const a=s.href;if(!a||!i)throw{url:a};const c=new i,d=Ve(s,"crossOrigin")?s.crossOrigin:"anonymous";return d!=null&&(c.crossOrigin=d),c.onload=()=>Jp(n),c.onerror=()=>Jp(n),c.src=a,c}).catch(s=>(Jp(n),{complete:!1,width:0,height:0,src:s&&s.url||""}))}ready(){const t=this;return new Promise(n=>{function i(s){t.pending()?setTimeout(()=>{i(!0)},10):n(s)}i(!1)})}}function kU(e){e._pending+=1}function Jp(e){e._pending-=1}function Il(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Ybe(t,i):0))}return e}function Ybe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Xbe=qa-1e-8;let RE,L0,P0,Vd,Gk,D0,Hk,Wk;const Zl=(e,t)=>RE.add(e,t),U0=(e,t)=>Zl(L0=e,P0=t),xU=e=>Zl(e,RE.y1),MU=e=>Zl(RE.x1,e),Dd=(e,t)=>Gk*e+Hk*t,Ud=(e,t)=>D0*e+Wk*t,EI=(e,t)=>Zl(Dd(e,t),Ud(e,t)),SI=(e,t)=>U0(Dd(e,t),Ud(e,t));function Mm(e,t){return RE=e,t?(Vd=t*Bc,Gk=Wk=Math.cos(Vd),D0=Math.sin(Vd),Hk=-D0):(Gk=Wk=1,Vd=D0=Hk=0),Kbe}const Kbe={beginPath(){},closePath(){},moveTo:SI,lineTo:SI,rect(e,t,n,i){Vd?(EI(e+n,t),EI(e+n,t+i),EI(e,t+i),SI(e,t)):(Zl(e+n,t+i),U0(e,t))},quadraticCurveTo(e,t,n,i){const s=Dd(e,t),a=Ud(e,t),c=Dd(n,i),d=Ud(n,i);AU(L0,s,c,xU),AU(P0,a,d,MU),U0(c,d)},bezierCurveTo(e,t,n,i,s,a){const c=Dd(e,t),d=Ud(e,t),f=Dd(n,i),u=Ud(n,i),r=Dd(s,a),h=Ud(s,a);OU(L0,c,f,r,xU),OU(P0,d,u,h,MU),U0(r,h)},arc(e,t,n,i,s,a){if(i+=Vd,s+=Vd,L0=n*Math.cos(s)+e,P0=n*Math.sin(s)+t,Math.abs(s-i)>Xbe)Zl(e-n,t-n),Zl(e+n,t+n);else{const c=u=>Zl(n*Math.cos(u)+e,n*Math.sin(u)+t);let d,f;if(c(i),c(s),s!==i)if(i=i%qa,i<0&&(i+=qa),s=s%qa,s<0&&(s+=qa),s<i&&(a=!a,d=i,i=s,s=d),a)for(s-=qa,d=i-i%Pd,f=0;f<4&&d>s;++f,d-=Pd)c(d);else for(d=i-i%Pd+Pd,f=0;f<4&&d<s;++f,d=d+Pd)c(d)}}};function AU(e,t,n,i){const s=(e-t)/(e+n-2*t);0<s&&s<1&&i(e+(t-e)*s)}function OU(e,t,n,i,s){const a=i-e+3*t-3*n,c=e+n-2*t,d=e-t;let f=0,u=0,r;Math.abs(a)>cbe?(r=c*c+d*a,r>=0&&(r=Math.sqrt(r),f=(-c+r)/a,u=(-c-r)/a)):f=.5*d/c,0<f&&f<1&&s(NU(f,e,t,n,i)),0<u&&u<1&&s(NU(u,e,t,n,i))}function NU(e,t,n,i,s){const a=1-e,c=a*a,d=e*e;return c*a*t+3*c*e*n+3*a*d*i+d*e*s}var uc=(uc=fc(1,1))?uc.getContext("2d"):null;const Yk=new Gn;function RO(e){return function(t,n){if(!uc)return!0;e(uc,t),Yk.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:s,x2:a,y2:c}=Yk;for(let d=s;d<=c;++d)for(let f=i;f<=a;++f)if(uc.isPointInPath(f,d))return!0;return!1}}function CO(e,t){return t.contains(e.x||0,e.y||0)}function aY(e,t){const n=e.x||0,i=e.y||0,s=e.width||0,a=e.height||0;return t.intersects(Yk.set(n,i,n+s,i+a))}function oY(e,t){const n=e.x||0,i=e.y||0,s=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Ru(t,n,i,s,a)}function Ru(e,t,n,i,s){const{x1:a,y1:c,x2:d,y2:f}=e,u=i-t,r=s-n;let h=0,p=1,_,l,b,m;for(m=0;m<4;++m){if(m===0&&(_=-u,l=-(a-t)),m===1&&(_=u,l=d-t),m===2&&(_=-r,l=-(c-n)),m===3&&(_=r,l=f-n),Math.abs(_)<1e-10&&l<0)return!1;if(b=l/_,_<0){if(b>p)return!1;b>h&&(h=b)}else if(_>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function Bh(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Ur(e,t){return e??t}function RU(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Jbe(e,t,n){const i=n.width(),s=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Ur(t.x1,.5)*i,n.y1+Ur(t.y1,.5)*s,Math.max(i,s)*Ur(t.r1,0),n.x1+Ur(t.x2,.5)*i,n.y1+Ur(t.y2,.5)*s,Math.max(i,s)*Ur(t.r2,.5));else{const c=Ur(t.x1,0),d=Ur(t.y1,0),f=Ur(t.x2,1),u=Ur(t.y2,0);if(c===f||d===u||i===s)a=e.createLinearGradient(n.x1+c*i,n.y1+d*s,n.x1+f*i,n.y1+u*s);else{const r=fc(Math.ceil(i),Math.ceil(s)),h=r.getContext("2d");return h.scale(i,s),h.fillStyle=RU(h.createLinearGradient(c,d,f,u),t.stops),h.fillRect(0,0,i,s),e.createPattern(r,"no-repeat")}}return RU(a,t.stops)}function lY(e,t,n){return MO(n)?Jbe(e,n,t.bounds):n}function Uv(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=lY(e,t,t.fill),!0):!1}var Qbe=[];function Ih(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=lY(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Qbe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Zbe(e,t){return e.zindex-t.zindex||e.index-t.index}function LO(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,s,a;for(s=0,a=t.length;s<a;++s)i=t[s],i.index=s,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Zbe)}function ra(e,t){var n=e.items,i,s;if(!n||!n.length)return;const a=LO(e);if(a&&a.length){for(i=0,s=n.length;i<s;++i)n[i].zindex||t(n[i]);n=a}for(i=0,s=n.length;i<s;++i)t(n[i])}function jv(e,t){var n=e.items,i,s;if(!n||!n.length)return null;const a=LO(e);for(a&&a.length&&(n=a),s=n.length;--s>=0;)if(i=t(n[s]))return i;if(n===a){for(n=e.items,s=n.length;--s>=0;)if(!n[s].zindex&&(i=t(n[s])))return i}return null}function PO(e){return function(t,n,i){ra(n,s=>{(!i||i.intersects(s.bounds))&&cY(e,t,s,s)})}}function e0e(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&cY(e,t,n.items[0],n.items)}}function cY(e,t,n,i){var s=n.opacity==null?1:n.opacity;s!==0&&(e(t,i)||(Bh(t,n),n.fill&&Uv(t,n,s)&&t.fill(),n.stroke&&Ih(t,n,s)&&t.stroke()))}function CE(e){return e=e||Ir,function(t,n,i,s,a,c){return i*=t.pixelRatio,s*=t.pixelRatio,jv(n,d=>{const f=d.bounds;if(!(f&&!f.contains(a,c)||!f)&&e(t,d,i,s,a,c))return d})}}function Am(e,t){return function(n,i,s,a){var c=Array.isArray(i)?i[0]:i,d=t??c.fill,f=c.stroke&&n.isPointInStroke,u,r;return f&&(u=c.strokeWidth,r=c.strokeCap,n.lineWidth=u??1,n.lineCap=r??"butt"),e(n,i)?!1:d&&n.isPointInPath(s,a)||f&&n.isPointInStroke(s,a)}}function DO(e){return CE(Am(e))}function Xd(e,t){return"translate("+e+","+t+")"}function UO(e){return"rotate("+e+")"}function t0e(e,t){return"scale("+e+","+t+")"}function dY(e){return Xd(e.x||0,e.y||0)}function n0e(e){return Xd(e.x||0,e.y||0)+(e.angle?" "+UO(e.angle):"")}function i0e(e){return Xd(e.x||0,e.y||0)+(e.angle?" "+UO(e.angle):"")+(e.scaleX||e.scaleY?" "+t0e(e.scaleX||1,e.scaleY||1):"")}function jO(e,t,n){function i(c,d){c("transform",n0e(d)),c("d",t(null,d))}function s(c,d){return t(Mm(c,d.angle),d),Il(c,d).translate(d.x||0,d.y||0)}function a(c,d){var f=d.x||0,u=d.y||0,r=d.angle||0;c.translate(f,u),r&&c.rotate(r*=Bc),c.beginPath(),t(c,d),r&&c.rotate(-r),c.translate(-f,-u)}return{type:e,tag:"path",nested:!1,attr:i,bound:s,draw:PO(a),pick:DO(a),isect:n||RO(a)}}var s0e=jO("arc",zbe);function r0e(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",s=e.length,a=1/0,c,d;--s>=0;)e[s].defined!==!1&&(d=Math.abs(e[s][i]-n),d<a&&(a=d,c=e[s]));return c}function a0e(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,s,a,c;--i>=0;)if(e[i].defined!==!1&&(s=e[i].x-t[0],a=e[i].y-t[1],c=s*s+a*a,c<n))return e[i];return null}function o0e(e,t){for(var n=e.length,i,s,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],s=e[n].y-t[1],a=i*i+s*s,i=e[n].size||1,a<i*i))return e[n];return null}function $O(e,t,n){function i(f,u){var r=u.mark.items;r.length&&f("d",t(null,r))}function s(f,u){var r=u.items;return r.length===0?f:(t(Mm(f),r),Il(f,r[0]))}function a(f,u){f.beginPath(),t(f,u)}const c=Am(a);function d(f,u,r,h,p,_){var l=u.items,b=u.bounds;return!l||!l.length||b&&!b.contains(p,_)?null:(r*=f.pixelRatio,h*=f.pixelRatio,c(f,l,r,h)?l[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:s,draw:e0e(a),pick:d,isect:CO,tip:n}}var l0e=$O("area",qbe,r0e);function c0e(e,t){var n=t.clip;e.save(),Bt(n)?(e.beginPath(),n(e),e.clip()):fY(e,t.group)}function fY(e,t){e.beginPath(),OO(t)?g_(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function uY(e){const t=Ur(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function d0e(e,t){e("transform",dY(t))}function hY(e,t){const n=uY(t);e("d",g_(null,t,n,n))}function f0e(e,t){e("class","background"),e("aria-hidden",!0),hY(e,t)}function u0e(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?hY(e,t):e("d","")}function h0e(e,t,n){const i=t.clip?NO(n,t,t):null;e("clip-path",i)}function _0e(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let s=0;s<i;++s)e.union(n[s].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Il(e,t),e.translate(t.x||0,t.y||0)}function Rg(e,t,n,i){const s=uY(t);e.beginPath(),g_(e,t,(n||0)+s,(i||0)+s)}const p0e=Am(Rg),y0e=Am(Rg,!1),g0e=Am(Rg,!0);function m0e(e,t,n,i){ra(t,s=>{const a=s.x||0,c=s.y||0,d=s.strokeForeground,f=s.opacity==null?1:s.opacity;(s.stroke||s.fill)&&f&&(Rg(e,s,a,c),Bh(e,s),s.fill&&Uv(e,s,f)&&e.fill(),s.stroke&&!d&&Ih(e,s,f)&&e.stroke()),e.save(),e.translate(a,c),s.clip&&fY(e,s),n&&n.translate(-a,-c),ra(s,u=>{(u.marktype==="group"||i==null||i.includes(u.marktype))&&this.draw(e,u,n,i)}),n&&n.translate(a,c),e.restore(),d&&s.stroke&&f&&(Rg(e,s,a,c),Bh(e,s),Ih(e,s,f)&&e.stroke())})}function w0e(e,t,n,i,s,a){if(t.bounds&&!t.bounds.contains(s,a)||!t.items)return null;const c=n*e.pixelRatio,d=i*e.pixelRatio;return jv(t,f=>{let u,r,h;const p=f.bounds;if(p&&!p.contains(s,a))return;r=f.x||0,h=f.y||0;const _=r+(f.width||0),l=h+(f.height||0),b=f.clip;if(b&&(s<r||s>_||a<h||a>l))return;if(e.save(),e.translate(r,h),r=s-r,h=a-h,b&&OO(f)&&!g0e(e,f,c,d))return e.restore(),null;const m=f.strokeForeground,E=t.interactive!==!1;return E&&m&&f.stroke&&y0e(e,f,c,d)?(e.restore(),f):(u=jv(f,B=>b0e(B,r,h)?this.pick(B,n,i,r,h):null),!u&&E&&(f.fill||!m&&f.stroke)&&p0e(e,f,c,d)&&(u=f),e.restore(),u||null)})}function b0e(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var T0e={type:"group",tag:"g",nested:!1,attr:d0e,bound:_0e,draw:m0e,pick:w0e,isect:aY,content:h0e,background:f0e,foreground:u0e},Cg={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function zO(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function qO(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function VO(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function LE(e,t){return e==="center"?t/2:e==="right"?t:0}function PE(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function v0e(e,t,n){const i=zO(t,n),s=qO(t,i),a=VO(t,i),c=(t.x||0)-LE(t.align,s),d=(t.y||0)-PE(t.baseline,a),f=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",f,Cg["xmlns:xlink"],"xlink:href"),e("transform",Xd(c,d)),e("width",s),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function E0e(e,t){const n=t.image,i=qO(t,n),s=VO(t,n),a=(t.x||0)-LE(t.align,i),c=(t.y||0)-PE(t.baseline,s);return e.set(a,c,a+i,c+s)}function S0e(e,t,n){ra(t,i=>{if(n&&!n.intersects(i.bounds))return;const s=zO(i,this);let a=qO(i,s),c=VO(i,s);if(a===0||c===0)return;let d=(i.x||0)-LE(i.align,a),f=(i.y||0)-PE(i.baseline,c),u,r,h,p;i.aspect!==!1&&(r=s.width/s.height,h=i.width/i.height,r===r&&h===h&&r!==h&&(h<r?(p=a/r,f+=(c-p)/2,c=p):(p=c*r,d+=(a-p)/2,a=p))),(s.complete||s.toDataURL)&&(Bh(e,i),e.globalAlpha=(u=i.opacity)!=null?u:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(s,d,f,a,c))})}var B0e={type:"image",tag:"image",nested:!1,attr:v0e,bound:E0e,draw:S0e,pick:CE(),isect:Ir,get:zO,xOffset:LE,yOffset:PE},I0e=$O("line",Vbe,a0e);function F0e(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",i0e(t)),e("d",t.path)}function j0(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,s=t.y||0,a=t.scaleX||1,c=t.scaleY||1,d=(t.angle||0)*Bc,f=t.pathCache;(!f||f.path!==n)&&((t.pathCache=f=Sh(n)).path=n),d&&e.rotate&&e.translate?(e.translate(i,s),e.rotate(d),Ng(e,f,0,0,a,c),e.rotate(-d),e.translate(-i,-s)):Ng(e,f,i,s,a,c)}function k0e(e,t){return j0(Mm(e,t.angle),t)?e.set(0,0,0,0):Il(e,t,!0)}var x0e={type:"path",tag:"path",nested:!1,attr:F0e,bound:k0e,draw:PO(j0),pick:DO(j0),isect:RO(j0)};function M0e(e,t){e("d",g_(null,t))}function A0e(e,t){var n,i;return Il(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function CU(e,t){e.beginPath(),g_(e,t)}var O0e={type:"rect",tag:"path",nested:!1,attr:M0e,bound:A0e,draw:PO(CU),pick:DO(CU),isect:aY};function N0e(e,t){e("transform",dY(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function R0e(e,t){var n,i;return Il(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function _Y(e,t,n){var i,s,a,c;return t.stroke&&Ih(e,t,n)?(i=t.x||0,s=t.y||0,a=t.x2!=null?t.x2:i,c=t.y2!=null?t.y2:s,e.beginPath(),e.moveTo(i,s),e.lineTo(a,c),!0):!1}function C0e(e,t,n){ra(t,i=>{if(!(n&&!n.intersects(i.bounds))){var s=i.opacity==null?1:i.opacity;s&&_Y(e,i,s)&&(Bh(e,i),e.stroke())}})}function L0e(e,t,n,i){return e.isPointInStroke?_Y(e,t,1)&&e.isPointInStroke(n,i):!1}var P0e={type:"rule",tag:"line",nested:!1,attr:N0e,bound:R0e,draw:C0e,pick:CE(L0e),isect:oY},D0e=jO("shape",Gbe),U0e=jO("symbol",Hbe,CO);const LU=fH();var Xs={height:mo,measureWidth:GO,estimateWidth:$v,width:$v,canvas:pY};pY(!0);function pY(e){Xs.width=e&&uc?GO:$v}function $v(e,t){return yY(Fc(e,t),mo(e))}function yY(e,t){return~~(.8*e.length*t)}function GO(e,t){return mo(e)<=0||!(t=Fc(e,t))?0:gY(t,DE(e))}function gY(e,t){const n=`(${t}) ${e}`;let i=LU.get(n);return i===void 0&&(uc.font=t,i=uc.measureText(e).width,LU.set(n,i)),i}function mo(e){return e.fontSize!=null?+e.fontSize||0:11}function Ic(e){return e.lineHeight!=null?e.lineHeight:mo(e)+2}function j0e(e){return Te(e)?e.length>1?e:e[0]:e}function Om(e){return j0e(e.lineBreak&&e.text&&!Te(e.text)?e.text.split(e.lineBreak):e.text)}function HO(e){const t=Om(e);return(Te(t)?t.length-1:0)*Ic(e)}function Fc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?z0e(e,n):n}function $0e(e){if(Xs.width===GO){const t=DE(e);return n=>gY(n,t)}else if(Xs.width===$v){const t=mo(e);return n=>yY(n,t)}else return t=>Xs.width(e,t)}function z0e(e,t){var n=+e.limit,i=$0e(e);if(i(t)<n)return t;var s=e.ellipsis||"…",a=e.dir==="rtl",c=0,d=t.length,f;if(n-=i(s),a){for(;c<d;)f=c+d>>>1,i(t.slice(f))>n?c=f+1:d=f;return s+t.slice(c)}else{for(;c<d;)f=1+(c+d>>>1),i(t.slice(0,f))<n?c=f:d=f-1;return t.slice(0,c)+s}}function Nm(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function DE(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+mo(e)+"px "+Nm(e,t)}function WO(e){var t=e.baseline,n=mo(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ic(e):t==="line-bottom"?.29*n-.5*Ic(e):0)}const q0e={left:"start",center:"middle",right:"end"},ig=new Gn;function UE(e){var t=e.x||0,n=e.y||0,i=e.radius||0,s;return i&&(s=(e.theta||0)-Pd,t+=i*Math.cos(s),n+=i*Math.sin(s)),ig.x1=t,ig.y1=n,ig}function V0e(e,t){var n=t.dx||0,i=(t.dy||0)+WO(t),s=UE(t),a=s.x1,c=s.y1,d=t.angle||0,f;e("text-anchor",q0e[t.align]||"start"),d?(f=Xd(a,c)+" "+UO(d),(n||i)&&(f+=" "+Xd(n,i))):f=Xd(a+n,c+i),e("transform",f)}function YO(e,t,n){var i=Xs.height(t),s=t.align,a=UE(t),c=a.x1,d=a.y1,f=t.dx||0,u=(t.dy||0)+WO(t)-Math.round(.8*i),r=Om(t),h;if(Te(r)?(i+=Ic(t)*(r.length-1),h=r.reduce((p,_)=>Math.max(p,Xs.width(t,_)),0)):h=Xs.width(t,r),s==="center"?f-=h/2:s==="right"&&(f-=h),e.set(f+=c,u+=d,f+h,u+i),t.angle&&!n)e.rotate(t.angle*Bc,c,d);else if(n===2)return e.rotatedPoints(t.angle*Bc,c,d);return e}function G0e(e,t,n){ra(t,i=>{var s=i.opacity==null?1:i.opacity,a,c,d,f,u,r,h;if(!(n&&!n.intersects(i.bounds)||s===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=DE(i),e.textAlign=i.align||"left",a=UE(i),c=a.x1,d=a.y1,i.angle&&(e.save(),e.translate(c,d),e.rotate(i.angle*Bc),c=d=0),c+=i.dx||0,d+=(i.dy||0)+WO(i),r=Om(i),Bh(e,i),Te(r))for(u=Ic(i),f=0;f<r.length;++f)h=Fc(i,r[f]),i.fill&&Uv(e,i,s)&&e.fillText(h,c,d),i.stroke&&Ih(e,i,s)&&e.strokeText(h,c,d),d+=u;else h=Fc(i,r),i.fill&&Uv(e,i,s)&&e.fillText(h,c,d),i.stroke&&Ih(e,i,s)&&e.strokeText(h,c,d);i.angle&&e.restore()}})}function H0e(e,t,n,i,s,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var c=UE(t),d=c.x1,f=c.y1,u=YO(ig,t,1),r=-t.angle*Bc,h=Math.cos(r),p=Math.sin(r),_=h*s-p*a+(d-h*d+p*f),l=p*s+h*a+(f-p*d-h*f);return u.contains(_,l)}function W0e(e,t){const n=YO(ig,e,2);return Ru(t,n[0],n[1],n[2],n[3])||Ru(t,n[0],n[1],n[4],n[5])||Ru(t,n[4],n[5],n[6],n[7])||Ru(t,n[2],n[3],n[6],n[7])}var Y0e={type:"text",tag:"text",nested:!1,attr:V0e,bound:YO,draw:G0e,pick:CE(H0e),isect:W0e},X0e=$O("trail",Wbe,o0e),tr={arc:s0e,area:l0e,group:T0e,image:B0e,line:I0e,path:x0e,rect:O0e,rule:P0e,shape:D0e,symbol:U0e,text:Y0e,trail:X0e};function Xk(e,t,n){var i=tr[e.mark.marktype],s=t||i.bound;return i.nested&&(e=e.mark),s(e.bounds||(e.bounds=new Gn),e,n)}var PU={mark:null};function mY(e,t,n){var i=tr[e.marktype],s=i.bound,a=e.items,c=a&&a.length,d,f,u,r;if(i.nested)return c?u=a[0]:(PU.mark=e,u=PU),r=Xk(u,s,n),t=t&&t.union(r)||r,t;if(t=t||e.bounds&&e.bounds.clear()||new Gn,c)for(d=0,f=a.length;d<f;++d)t.union(Xk(a[d],s,n));return e.bounds=t}const K0e=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function wY(e,t){return JSON.stringify(e,K0e,t)}function bY(e){const t=typeof e=="string"?JSON.parse(e):e;return TY(t)}function TY(e){var t=e.marktype,n=e.items,i,s,a;if(n)for(s=0,a=n.length;s<a;++s)i=t?"mark":"group",n[s][i]=e,n[s].zindex&&(n[s][i].zdirty=!0),(t||i)==="group"&&TY(n[s]);return t&&mY(e),e}class vY{constructor(t){arguments.length?this.root=bY(t):(this.root=DU({marktype:"group",name:"root",role:"frame"}),this.root.items=[new NE(this.root)])}toJSON(t){return wY(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const s=DU(t,n);return n.items[i]=s,s.zindex&&(s.group.zdirty=!0),s}}function DU(e,t){const n={bounds:new Gn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function ec(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function XO(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,s=n.length;i<s;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function Jn(e,t,n,i){var s=e.childNodes[t],a;return(!s||s.tagName.toLowerCase()!==n.toLowerCase())&&(a=s||null,s=ec(e.ownerDocument,n,i),e.insertBefore(s,a)),s}function fr(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function EY(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function jE(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function J0e(e,t,n,i){var s=e&&e.mark,a,c;if(s&&(a=tr[s.marktype]).tip){for(c=jE(t,n),c[0]-=i[0],c[1]-=i[1];e=e.mark.group;)c[0]-=e.x||0,c[1]-=e.y||0;e=a.tip(s.items,c)}return e}let KO=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||bE(),this._tooltip=n||Q0e}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let s=t?t.length:0;--s>=0;)if(t[s].type===n&&(!i||t[s].handler===i))return s;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const s in n)i.push(...n[s]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(s=>{const a=new MouseEvent(t.type,t),c=ec(null,"a");for(const d in s)c.setAttribute(d,s[d]);c.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=J0e(n,t,this.canvas(),this._origin);const s=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,s)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),s=this._origin,a=t.bounds,c=a.width(),d=a.height();let f=a.x1+s[0]+i.left,u=a.y1+s[1]+i.top;for(;t.mark&&(t=t.mark.group);)f+=t.x||0,u+=t.y||0;return{x:f,y:u,width:c,height:d,left:f,top:u,right:f+c,bottom:u+d}}};function Q0e(e,t,n,i){e.element().setAttribute("title",i||"")}class Rm{constructor(t){this._el=null,this._bgcolor=null,this._loader=new rY(t)}initialize(t,n,i,s,a){return this._el=t,this.resize(n,i,s,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,s){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=s||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,s=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(c=>{c&&a(),i._ready=null})}return s}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Z0e="keydown",eTe="keypress",tTe="keyup",SY="dragenter",$0="dragleave",BY="dragover",Kk="pointerdown",nTe="pointerup",zv="pointermove",z0="pointerout",IY="pointerover",Jk="mousedown",iTe="mouseup",FY="mousemove",qv="mouseout",kY="mouseover",Vv="click",sTe="dblclick",rTe="wheel",xY="mousewheel",Gv="touchstart",Hv="touchmove",Wv="touchend",aTe=[Z0e,eTe,tTe,SY,$0,BY,Kk,nTe,zv,z0,IY,Jk,iTe,FY,qv,kY,Vv,sTe,rTe,xY,Gv,Hv,Wv],Qk=zv,sg=qv,Zk=Vv;class Cm extends KO{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=aTe,this.pointermove=jU([zv,FY],[IY,kY],[z0,qv]),this.dragover=jU([BY],[SY],[$0]),this.pointerout=$U([z0,qv]),this.dragleave=$U([$0])}initialize(t,n,i){return this._canvas=t&&XO(t,"canvas"),[Vv,Jk,Kk,zv,z0,$0].forEach(s=>UU(this,s)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(xY,t)}pointerdown(t){this._down=this._active,this.fire(Kk,t)}mousedown(t){this._down=this._active,this.fire(Jk,t)}click(t){this._down===this._active&&(this.fire(Vv,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Gv,t,!0)}touchmove(t){this.fire(Hv,t,!0)}touchend(t){this.fire(Wv,t,!0),this._touch=null}fire(t,n,i){const s=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===Zk&&s&&s.href?this.handleHref(n,s,s.href):(t===Qk||t===sg)&&this.handleTooltip(n,s,t!==sg),a)for(let c=0,d=a.length;c<d;++c)a[c].handler.call(this._obj,n,s)}on(t,n){const i=this.eventName(t),s=this._handlers;return this._handlerIndex(s[i],t,n)<0&&(UU(this,t),(s[i]||(s[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),s=this._handlers[i],a=this._handlerIndex(s,t,n);return a>=0&&s.splice(a,1),this}pickEvent(t){const n=jE(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,s,a){const c=this.context();return tr[t.marktype].pick.call(this,c,t,n,i,s,a)}}const oTe=e=>e===Gv||e===Hv||e===Wv?[Gv,Hv,Wv]:[e];function UU(e,t){oTe(t).forEach(n=>lTe(e,n))}function lTe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function zy(e,t,n){t.forEach(i=>e.fire(i,n))}function jU(e,t,n){return function(i){const s=this._active,a=this.pickEvent(i);a===s?zy(this,e,i):((!s||!s.exit)&&zy(this,n,i),this._active=a,zy(this,t,i),zy(this,e,i))}}function $U(e){return function(t){zy(this,e,t),this._active=null}}function cTe(){return typeof window<"u"&&window.devicePixelRatio||1}function dTe(e,t,n,i,s,a){const c=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,d=e.getContext("2d"),f=c?cTe():s;e.width=t*f,e.height=n*f;for(const u in a)d[u]=a[u];return c&&f!==1&&(e.style.width=t+"px",e.style.height=n+"px"),d.pixelRatio=f,d.setTransform(f,0,0,f,f*i[0],f*i[1]),e}class Yv extends Rm{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Gn,this._tempb=new Gn}initialize(t,n,i,s,a,c){return this._options=c||{},this._canvas=this._options.externalContext?null:fc(1,1,this._options.type),t&&this._canvas&&(fr(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,s,a)}resize(t,n,i,s){if(super.resize(t,n,i,s),this._canvas)dTe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||be("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),s=this._origin,a=this._width,c=this._height,d=this._dirty,f=fTe(s,a,c);i.save();const u=this._redraw||d.empty()?(this._redraw=!1,f.expand(1)):uTe(i,f.intersect(d),s);return this.clear(-s[0],-s[1],a,c),this.draw(i,t,u,n),i.restore(),d.clear(),this}draw(t,n,i,s){if(n.marktype!=="group"&&s!=null&&!s.includes(n.marktype))return;const a=tr[n.marktype];n.clip&&c0e(t,n),a.draw.call(this,t,n,i,s),n.clip&&t.restore()}clear(t,n,i,s){const a=this._options,c=this.context();a.type!=="pdf"&&!a.externalContext&&c.clearRect(t,n,i,s),this._bgcolor!=null&&(c.fillStyle=this._bgcolor,c.fillRect(t,n,i,s))}}const fTe=(e,t,n)=>new Gn().set(0,0,t,n).translate(-e[0],-e[1]);function uTe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class MY extends KO{constructor(t,n){super(t,n);const i=this;i._hrefHandler=BI(i,(s,a)=>{a&&a.href&&i.handleHref(s,a,a.href)}),i._tooltipHandler=BI(i,(s,a)=>{i.handleTooltip(s,a,s.type!==sg)})}initialize(t,n,i){let s=this._svg;return s&&(s.removeEventListener(Zk,this._hrefHandler),s.removeEventListener(Qk,this._tooltipHandler),s.removeEventListener(sg,this._tooltipHandler)),this._svg=s=t&&XO(t,"svg"),s&&(s.addEventListener(Zk,this._hrefHandler),s.addEventListener(Qk,this._tooltipHandler),s.addEventListener(sg,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),s=this._handlers;if(this._handlerIndex(s[i],t,n)<0){const c={type:t,handler:n,listener:BI(this,n)};(s[i]||(s[i]=[])).push(c),this._svg&&this._svg.addEventListener(i,c.listener)}return this}off(t,n){const i=this.eventName(t),s=this._handlers[i],a=this._handlerIndex(s,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,s[a].listener),s.splice(a,1)),this}}const BI=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},AY="aria-hidden",JO="aria-label",QO="role",ZO="aria-roledescription",OY="graphics-object",eN="graphics-symbol",NY=(e,t,n)=>({[QO]:e,[ZO]:t,[JO]:n||void 0}),hTe=ia(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),zU={axis:{desc:"axis",caption:yTe},legend:{desc:"legend",caption:gTe},"title-text":{desc:"title",caption:e=>`Title text '${VU(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${VU(e)}'`}},qU={ariaRole:QO,ariaRoleDescription:ZO,description:JO};function RY(e,t){const n=t.aria===!1;if(e(AY,n||void 0),n||t.description==null)for(const i in qU)e(qU[i],void 0);else{const i=t.mark.marktype;e(JO,t.description),e(QO,t.ariaRole||(i==="group"?OY:eN)),e(ZO,t.ariaRoleDescription||`${i} mark`)}}function CY(e){return e.aria===!1?{[AY]:!0}:hTe[e.role]?null:zU[e.role]?pTe(e,zU[e.role]):_Te(e)}function _Te(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return NY(n?OY:eN,`${t} mark container`,e.description)}function pTe(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return NY(t.role||eN,t.desc,n.description||i(n))}catch{return null}}function VU(e){return $e(e.text).join(" ")}function yTe(e){const t=e.datum,n=e.orient,i=t.title?LY(e):null,s=e.context,a=s.scales[t.scale].value,c=s.dataflow.locale(),d=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Eh(d)?"discrete":d} scale with ${XW(c,a,e)}`}function gTe(e){const t=e.datum,n=t.title?LY(e):null,i=`${t.type||""} legend`.trim(),s=t.scales,a=Object.keys(s),c=e.context,d=c.scales[s[a[0]]].value,f=c.dataflow.locale();return wTe(i)+(n?` titled '${n}'`:"")+` for ${mTe(a)} with ${XW(f,d,e)}`}function LY(e){try{return $e(Pt(e.items).items[0].text).join(" ")}catch{return null}}function mTe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Pt(e)}function wTe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const PY=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),bTe=e=>PY(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function tN(){let e="",t="",n="";const i=[],s=()=>t=n="",a=f=>{t&&(e+=`${t}>${n}`,s()),i.push(f)},c=(f,u)=>(u!=null&&(t+=` ${f}="${bTe(u)}"`),d),d={open(f){a(f),t="<"+f;for(var u=arguments.length,r=new Array(u>1?u-1:0),h=1;h<u;h++)r[h-1]=arguments[h];for(const p of r)for(const _ in p)c(_,p[_]);return d},close(){const f=i.pop();return t?e+=t+(n?`>${n}</${f}>`:"/>"):e+=`</${f}>`,s(),d},attr:c,text:f=>(n+=PY(f),d),toString:()=>e};return d}const DY=e=>UY(tN(),e)+"";function UY(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let s=0;s<i;++s)e.attr(n[s].name,n[s].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):UY(e,i)}return e.close()}const Xv={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Kv={blend:"mix-blend-mode"},jY={fill:"none","stroke-miterlimit":10},Qp=0,GU="http://www.w3.org/2000/xmlns/",Kn=Cg.xmlns;class nN extends Rm{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,s,a){return this._defs={},this._clearDefs(),t&&(this._svg=Jn(t,0,"svg",Kn),this._svg.setAttributeNS(GU,"xmlns",Kn),this._svg.setAttributeNS(GU,"xmlns:xlink",Cg["xmlns:xlink"]),this._svg.setAttribute("version",Cg.version),this._svg.setAttribute("class","marks"),fr(t,1),this._root=Jn(this._svg,Qp,"g",Kn),tc(this._root,jY),fr(this._svg,Qp+1)),this.background(this._bgcolor),super.initialize(t,n,i,s,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,s){return super.resize(t,n,i,s),this._svg&&(tc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=Jn(t,Qp,"rect",Kn),tc(i,{width:this._width,height:this._height,fill:n}));const s=DY(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),s}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),fr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,s,a,c,d,f,u;for(d=0,f=t.length;d<f;++d)if(i=t[d],s=i.mark,s.marktype!==a&&(a=s.marktype,c=tr[a]),s.zdirty&&s.dirty!==n&&(this._dirtyAll=!1,HU(i,n),s.items.forEach(r=>{r.dirty=n})),!s.zdirty){if(i.exit){c.nested&&s.items.length?(u=s.items[0],u._svg&&this._update(c,u._svg,u)):i._svg&&(u=i._svg.parentNode,u&&u.removeChild(i._svg)),i._svg=null;continue}i=c.nested?s.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,HU(i,n)):this._update(c,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,s){if(!this.isDirty(n))return n._svg;const a=this._svg,c=n.marktype,d=tr[c],f=n.interactive===!1?"none":null,u=d.tag==="g",r=WU(n,t,i,"g",a);if(c!=="group"&&s!=null&&!s.includes(c))return fr(r,0),n._svg;r.setAttribute("class",EY(n));const h=CY(n);for(const b in h)Vi(r,b,h[b]);u||Vi(r,"pointer-events",f),Vi(r,"clip-path",n.clip?NO(this,n,n.group):null);let p=null,_=0;const l=b=>{const m=this.isDirty(b),E=WU(b,r,p,d.tag,a);m&&(this._update(d,E,b),u&&ETe(this,E,b,s)),p=E,++_};return d.nested?n.items.length&&l(n.items[0]):ra(n,l),fr(r,_),r}_update(t,n,i){nl=n,Fi=n.__values__,RY(rg,i),t.attr(rg,i,this);const s=BTe[t.type];s&&s.call(this,t,n,i),nl&&this.style(nl,i)}style(t,n){if(n!=null){for(const i in Xv){let s=i==="font"?Nm(n):n[i];if(s===Fi[i])continue;const a=Xv[i];s==null?t.removeAttribute(a):(MO(s)&&(s=JW(s,this._defs.gradient,$Y())),t.setAttribute(a,s+"")),Fi[i]=s}for(const i in Kv)q0(t,Kv[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,s=0;for(const a in n.gradient)i||(n.el=i=Jn(t,Qp+1,"defs",Kn)),s=TTe(i,n.gradient[a],s);for(const a in n.clipping)i||(n.el=i=Jn(t,Qp+1,"defs",Kn)),s=vTe(i,n.clipping[a],s);i&&(s===0?(t.removeChild(i),n.el=null):fr(i,s))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function HU(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function TTe(e,t,n){let i,s,a;if(t.gradient==="radial"){let c=Jn(e,n++,"pattern",Kn);tc(c,{id:Dv+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),c=Jn(c,0,"rect",Kn),tc(c,{width:1,height:1,fill:`url(${$Y()}#${t.id})`}),e=Jn(e,n++,"radialGradient",Kn),tc(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Jn(e,n++,"linearGradient",Kn),tc(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,s=t.stops.length;i<s;++i)a=Jn(e,i,"stop",Kn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return fr(e,i),n}function vTe(e,t,n){let i;return e=Jn(e,n,"clipPath",Kn),e.setAttribute("id",t.id),t.path?(i=Jn(e,0,"path",Kn),i.setAttribute("d",t.path)):(i=Jn(e,0,"rect",Kn),tc(i,{x:0,y:0,width:t.width,height:t.height})),fr(e,1),n+1}function ETe(e,t,n,i){t=t.lastChild.previousSibling;let s,a=0;ra(n,c=>{s=e.mark(t,c,s,i),++a}),fr(t,1+a)}function WU(e,t,n,i,s){let a=e._svg,c;if(!a&&(c=t.ownerDocument,a=ec(c,i,Kn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const d=ec(c,"path",Kn);a.appendChild(d),d.__data__=e;const f=ec(c,"g",Kn);a.appendChild(f),f.__data__=e;const u=ec(c,"path",Kn);a.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(a.ownerSVGElement!==s||STe(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function STe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let nl=null,Fi=null;const BTe={group(e,t,n){const i=nl=t.childNodes[2];Fi=i.__values__,e.foreground(rg,n,this),Fi=t.__values__,nl=t.childNodes[1],e.content(rg,n,this);const s=nl=t.childNodes[0];e.background(rg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Fi.events&&(Vi(i,"pointer-events",a),Vi(s,"pointer-events",a),Fi.events=a),n.strokeForeground&&n.stroke){const c=n.fill;Vi(i,"display",null),this.style(s,n),Vi(s,"stroke",null),c&&(n.fill=null),Fi=i.__values__,this.style(i,n),c&&(n.fill=c),nl=null}else Vi(i,"display","none")},image(e,t,n){n.smooth===!1?(q0(t,"image-rendering","optimizeSpeed"),q0(t,"image-rendering","pixelated")):q0(t,"image-rendering",null)},text(e,t,n){const i=Om(n);let s,a,c,d;Te(i)?(a=i.map(f=>Fc(n,f)),s=a.join(`
`),s!==Fi.text&&(fr(t,0),c=t.ownerDocument,d=Ic(n),a.forEach((f,u)=>{const r=ec(c,"tspan",Kn);r.__data__=n,r.textContent=f,u&&(r.setAttribute("x",0),r.setAttribute("dy",d)),t.appendChild(r)}),Fi.text=s)):(a=Fc(n,i),a!==Fi.text&&(t.textContent=a,Fi.text=a)),Vi(t,"font-family",Nm(n)),Vi(t,"font-size",mo(n)+"px"),Vi(t,"font-style",n.fontStyle),Vi(t,"font-variant",n.fontVariant),Vi(t,"font-weight",n.fontWeight)}};function rg(e,t,n){t!==Fi[e]&&(n?ITe(nl,e,t,n):Vi(nl,e,t),Fi[e]=t)}function q0(e,t,n){n!==Fi[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Fi[t]=n)}function tc(e,t){for(const n in t)Vi(e,n,t[n])}function Vi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function ITe(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function $Y(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class zY extends Rm{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=tN();n.open("svg",St({},Cg,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",jY,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=tr[n.marktype],s=i.tag,a=[RY,i.attr];t.open("g",{class:EY(n),"clip-path":n.clip?NO(this,n,n.group):null},CY(n),{"pointer-events":s!=="g"&&n.interactive===!1?"none":null});const c=d=>{const f=this.href(d);if(f&&t.open("a",f),t.open(s,this.attr(n,d,a,s!=="g"?s:null)),s==="text"){const u=Om(d);if(Te(u)){const r={x:0,dy:Ic(d)};for(let h=0;h<u.length;++h)t.open("tspan",h?r:null).text(Fc(d,u[h])).close()}else t.text(Fc(d,u))}else if(s==="g"){const u=d.strokeForeground,r=d.fill,h=d.stroke;u&&h&&(d.stroke=null),t.open("path",this.attr(n,d,i.background,"bgrect")).close(),t.open("g",this.attr(n,d,i.content)),ra(d,p=>this.mark(t,p)),t.close(),u&&h?(r&&(d.fill=null),d.stroke=h,t.open("path",this.attr(n,d,i.foreground,"bgrect")).close(),r&&(d.fill=r)):t.open("path",this.attr(n,d,i.foreground,"bgfore")).close()}t.close(),f&&t.close()};return i.nested?n.items&&n.items.length&&c(n.items[0]):ra(n,c),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(s=>{s["xlink:href"]=s.href,s.href=null,(this._hrefs||(this._hrefs={}))[n]=s})}return null}attr(t,n,i,s){const a={},c=(d,f,u,r)=>{a[r||d]=f};return Array.isArray(i)?i.forEach(d=>d(c,n,this)):i(c,n,this),s&&FTe(a,n,t,s,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const c=n[a],d=c.stops;c.gradient==="radial"?(t.open("pattern",{id:Dv+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:c.x1,fy:c.y1,fr:c.r1,cx:c.x2,cy:c.y2,r:c.r2})):t.open("linearGradient",{id:a,x1:c.x1,x2:c.x2,y1:c.y1,y2:c.y2});for(let f=0;f<d.length;++f)t.open("stop",{offset:d[f].offset,"stop-color":d[f].color}).close();t.close()}for(const a in i){const c=i[a];t.open("clipPath",{id:a}),c.path?t.open("path",{d:c.path}).close():t.open("rect",{x:0,y:0,width:c.width,height:c.height}).close(),t.close()}t.close()}}}function FTe(e,t,n,i,s){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Nm(t),e["font-size"]=mo(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const c in Xv){let d=t[c];const f=Xv[c];d==="transparent"&&(f==="fill"||f==="stroke")||d!=null&&(MO(d)&&(d=JW(d,s.gradient,"")),e[f]=d)}for(const c in Kv){const d=t[c];d!=null&&(a=a||[],a.push(`${Kv[c]}: ${d};`))}return a&&(e.style=a.join(" ")),e}const zr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function kTe(e){zr.svgMarkTypes=e.svgMarkTypes??["text"],zr.svgOnTop=e.svgOnTop??!0,zr.debug=e.debug??!1}class e2 extends Rm{constructor(t){super(t),this._svgRenderer=new nN(t),this._canvasRenderer=new Yv(t)}initialize(t,n,i,s,a){this._root_el=Jn(t,0,"div");const c=Jn(this._root_el,0,"div"),d=Jn(this._root_el,1,"div");return this._root_el.style.position="relative",zr.debug||(c.style.height="100%",d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.height="100%",d.style.width="100%"),this._svgEl=zr.svgOnTop?d:c,this._canvasEl=zr.svgOnTop?c:d,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,s,a),this._svgRenderer.initialize(this._svgEl,n,i,s,a),super.initialize(t,n,i,s,a)}dirty(t){return zr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const s=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!zr.svgMarkTypes.includes(a));this._svgRenderer.render(t,zr.svgMarkTypes),this._canvasRenderer.render(t,s)}resize(t,n,i,s){return super.resize(t,n,i,s),this._svgRenderer.resize(t,n,i,s),this._canvasRenderer.resize(t,n,i,s),this}background(t){return zr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class qY extends Cm{constructor(t,n){super(t,n)}initialize(t,n,i){const s=Jn(Jn(t,0,"div"),zr.svgOnTop?0:1,"div");return super.initialize(s,n,i)}}const VY="canvas",GY="hybrid",HY="png",WY="svg",YY="none",nc={Canvas:VY,PNG:HY,SVG:WY,Hybrid:GY,None:YY},uf={};uf[VY]=uf[HY]={renderer:Yv,headless:Yv,handler:Cm};uf[WY]={renderer:nN,headless:zY,handler:MY};uf[GY]={renderer:e2,headless:e2,handler:qY};uf[YY]={};function $E(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(uf[e]=t,this):uf[e]}function XY(e,t,n){const i=[],s=new Gn().union(t),a=e.marktype;return a?KY(e,s,n,i):a==="group"?JY(e,s,n,i):be("Intersect scene must be mark node or group item.")}function KY(e,t,n,i){if(xTe(e,t,n)){const s=e.items,a=e.marktype,c=s.length;let d=0;if(a==="group")for(;d<c;++d)JY(s[d],t,n,i);else for(const f=tr[a].isect;d<c;++d){const u=s[d];QY(u,t,f)&&i.push(u)}}return i}function xTe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function JY(e,t,n,i){n&&n(e.mark)&&QY(e,t,tr.group.isect)&&i.push(e);const s=e.items,a=s&&s.length;if(a){const c=e.x||0,d=e.y||0;t.translate(-c,-d);for(let f=0;f<a;++f)KY(s[f],t,n,i);t.translate(c,d)}return i}function QY(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const II=new Gn;function ZY(e){const t=e.clip;if(Bt(t))t(Mm(II.clear()));else if(t)II.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(II)}const MTe=1e-9;function iN(e,t,n){return e===t?!0:n==="path"?eX(e,t):e instanceof Date&&t instanceof Date?+e==+t:Wt(e)&&Wt(t)?Math.abs(e-t)<=MTe:!e||!t||!je(e)&&!je(t)?e==t:ATe(e,t)}function eX(e,t){return iN(Sh(e),Sh(t))}function ATe(e,t){var n=Object.keys(e),i=Object.keys(t),s,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(s=n[a],!iN(e[s],t[s],s))return!1;return typeof e==typeof t}function OTe(){sY(),nbe()}const Fh="top",Yr="left",Kr="right",kc="bottom",NTe="top-left",RTe="top-right",CTe="bottom-left",LTe="bottom-right",sN="start",t2="middle",Gi="end",PTe="x",DTe="y",zE="group",rN="axis",aN="title",UTe="frame",jTe="scope",oN="legend",tX="row-header",nX="row-footer",iX="row-title",sX="column-header",rX="column-footer",aX="column-title",$Te="padding",zTe="symbol",oX="fit",lX="fit-x",cX="fit-y",qTe="pad",lN="none",qb="all",n2="each",cN="flush",ic="column",sc="row";function dX(e){ge.call(this,null,e)}Le(dX,ge,{transform(e,t){const n=t.dataflow,i=e.mark,s=i.marktype,a=tr[s],c=a.bound;let d=i.bounds,f;if(a.nested)i.items.length&&n.dirty(i.items[0]),d=Vb(i,c),i.items.forEach(u=>{u.bounds.clear().union(d)});else if(s===zE||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),d.clear(),i.items.forEach(u=>d.union(Vb(u,c))),i.role){case rN:case oN:case aN:t.reflow()}else f=t.changed(t.REM),t.visit(t.ADD,u=>{d.union(Vb(u,c))}),t.visit(t.MOD,u=>{f=f||d.alignsWith(u.bounds),n.dirty(u),d.union(Vb(u,c))}),f&&(d.clear(),i.items.forEach(u=>d.union(u.bounds)));return ZY(i),t.modifies("bounds")}});function Vb(e,t,n){return t(e.bounds.clear(),e,n)}const YU=":vega_identifier:";function dN(e){ge.call(this,0,e)}dN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Le(dN,ge,{transform(e,t){const n=VTe(t.dataflow),i=e.as;let s=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++s),n.set(this.value=s),t}});function VTe(e){return e._signals[YU]||(e._signals[YU]=e.add(0))}function fX(e){ge.call(this,null,e)}Le(fX,ge,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,GTe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===zE?NE:OE;return t.visit(t.ADD,s=>i.call(s,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function GTe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function uX(e){ge.call(this,null,e)}const XU={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,s)=>!s||!hX(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},hX=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),KU=(e,t)=>{for(var n=1,i=e.length,s=e[0].bounds,a;n<i;s=a,++n)if(hX(s,a=e[n].bounds,t))return!0},HTe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},WTe=(e,t,n)=>{var i=e.range(),s=new Gn;return t===Fh||t===kc?s.set(i[0],-1/0,i[1],1/0):s.set(-1/0,i[0],1/0,i[1]),s.expand(n||1),a=>s.encloses(a.bounds)},JU=e=>(e.forEach(t=>t.opacity=1),e),QU=(e,t)=>e.reflow(t.modified()).modifies("opacity");Le(uX,ge,{transform(e,t){const n=XU[e.method]||XU.parity,i=e.separation||0;let s=t.materialize(t.SOURCE).source,a,c;if(!s||!s.length)return;if(!e.method)return e.modified("method")&&(JU(s),t=QU(t,e)),t;if(s=s.filter(HTe),!s.length)return;if(e.sort&&(s=s.slice().sort(e.sort)),a=JU(s),t=QU(t,e),a.length>=3&&KU(a,i)){do a=n(a,i);while(a.length>=3&&KU(a,i));a.length<3&&!Pt(s).opacity&&(a.length>1&&(Pt(a).opacity=0),Pt(s).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(c=WTe(e.boundScale,e.boundOrient,+e.boundTolerance),s.forEach(f=>{c(f)||(f.opacity=0)}));const d=a[0].mark.bounds.clear();return s.forEach(f=>{f.opacity&&d.union(f.bounds)}),t}});function _X(e){ge.call(this,null,e)}Le(_X,ge,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Ii=new Gn;function Cu(e,t,n){return e[t]===n?0:(e[t]=n,1)}function YTe(e){var t=e.items[0].orient;return t===Yr||t===Kr}function XTe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function KTe(e,t,n,i){var s=t.items[0],a=s.datum,c=s.translate!=null?s.translate:.5,d=s.orient,f=XTe(a),u=s.range,r=s.offset,h=s.position,p=s.minExtent,_=s.maxExtent,l=a.title&&s.items[f[2]].items[0],b=s.titlePadding,m=s.bounds,E=l&&HO(l),B=0,I=0,k,F;switch(Ii.clear().union(m),m.clear(),(k=f[0])>-1&&m.union(s.items[k].bounds),(k=f[1])>-1&&m.union(s.items[k].bounds),d){case Fh:B=h||0,I=-r,F=Math.max(p,Math.min(_,-m.y1)),m.add(0,-F).add(u,0),l&&Gb(e,l,F,b,E,0,-1,m);break;case Yr:B=-r,I=h||0,F=Math.max(p,Math.min(_,-m.x1)),m.add(-F,0).add(0,u),l&&Gb(e,l,F,b,E,1,-1,m);break;case Kr:B=n+r,I=h||0,F=Math.max(p,Math.min(_,m.x2)),m.add(0,0).add(F,u),l&&Gb(e,l,F,b,E,1,1,m);break;case kc:B=h||0,I=i+r,F=Math.max(p,Math.min(_,m.y2)),m.add(0,0).add(u,F),l&&Gb(e,l,F,b,0,0,1,m);break;default:B=s.x,I=s.y}return Il(m.translate(B,I),s),Cu(s,"x",B+c)|Cu(s,"y",I+c)&&(s.bounds=Ii,e.dirty(s),s.bounds=m,e.dirty(s)),s.mark.bounds.clear().union(m)}function Gb(e,t,n,i,s,a,c,d){const f=t.bounds;if(t.auto){const u=c*(n+s+i);let r=0,h=0;e.dirty(t),a?r=(t.x||0)-(t.x=u):h=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(f.translate(-r,-h)),e.dirty(t)}d.union(f)}const ZU=(e,t)=>Math.floor(Math.min(e,t)),ej=(e,t)=>Math.ceil(Math.max(e,t));function JTe(e){var t=e.items,n=t.length,i=0,s,a;const c={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(s=t[i],a=s.items,s.marktype===zE)switch(s.role){case rN:case oN:case aN:break;case tX:c.rowheaders.push(...a);break;case nX:c.rowfooters.push(...a);break;case sX:c.colheaders.push(...a);break;case rX:c.colfooters.push(...a);break;case iX:c.rowtitle=a[0];break;case aX:c.coltitle=a[0];break;default:c.marks.push(...a)}return c}function QTe(e){return new Gn().set(0,0,e.width||0,e.height||0)}function ZTe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function bn(e,t,n){const i=je(e)?e[t]:e;return i??(n!==void 0?n:0)}function tj(e){return e<0?Math.ceil(-e):0}function pX(e,t,n){var i=!n.nodirty,s=n.bounds===cN?QTe:ZTe,a=Ii.set(0,0,0,0),c=bn(n.align,ic),d=bn(n.align,sc),f=bn(n.padding,ic),u=bn(n.padding,sc),r=n.columns||t.length,h=r<=0?1:Math.ceil(t.length/r),p=t.length,_=Array(p),l=Array(r),b=0,m=Array(p),E=Array(h),B=0,I=Array(p),k=Array(p),F=Array(p),x,M,R,P,C,D,j,$,W,H,G;for(M=0;M<r;++M)l[M]=0;for(M=0;M<h;++M)E[M]=0;for(M=0;M<p;++M)D=t[M],C=F[M]=s(D),D.x=D.x||0,I[M]=0,D.y=D.y||0,k[M]=0,R=M%r,P=~~(M/r),b=Math.max(b,j=Math.ceil(C.x2)),B=Math.max(B,$=Math.ceil(C.y2)),l[R]=Math.max(l[R],j),E[P]=Math.max(E[P],$),_[M]=f+tj(C.x1),m[M]=u+tj(C.y1),i&&e.dirty(t[M]);for(M=0;M<p;++M)M%r===0&&(_[M]=0),M<r&&(m[M]=0);if(c===n2)for(R=1;R<r;++R){for(G=0,M=R;M<p;M+=r)G<_[M]&&(G=_[M]);for(M=R;M<p;M+=r)_[M]=G+l[R-1]}else if(c===qb){for(G=0,M=0;M<p;++M)M%r&&G<_[M]&&(G=_[M]);for(M=0;M<p;++M)M%r&&(_[M]=G+b)}else for(c=!1,R=1;R<r;++R)for(M=R;M<p;M+=r)_[M]+=l[R-1];if(d===n2)for(P=1;P<h;++P){for(G=0,M=P*r,x=M+r;M<x;++M)G<m[M]&&(G=m[M]);for(M=P*r;M<x;++M)m[M]=G+E[P-1]}else if(d===qb){for(G=0,M=r;M<p;++M)G<m[M]&&(G=m[M]);for(M=r;M<p;++M)m[M]=G+B}else for(d=!1,P=1;P<h;++P)for(M=P*r,x=M+r;M<x;++M)m[M]+=E[P-1];for(W=0,M=0;M<p;++M)W=_[M]+(M%r?W:0),I[M]+=W-t[M].x;for(R=0;R<r;++R)for(H=0,M=R;M<p;M+=r)H+=m[M],k[M]+=H-t[M].y;if(c&&bn(n.center,ic)&&h>1)for(M=0;M<p;++M)C=c===qb?b:l[M%r],W=C-F[M].x2-t[M].x-I[M],W>0&&(I[M]+=W/2);if(d&&bn(n.center,sc)&&r!==1)for(M=0;M<p;++M)C=d===qb?B:E[~~(M/r)],H=C-F[M].y2-t[M].y-k[M],H>0&&(k[M]+=H/2);for(M=0;M<p;++M)a.union(F[M].translate(I[M],k[M]));switch(W=bn(n.anchor,PTe),H=bn(n.anchor,DTe),bn(n.anchor,ic)){case Gi:W-=a.width();break;case t2:W-=a.width()/2}switch(bn(n.anchor,sc)){case Gi:H-=a.height();break;case t2:H-=a.height()/2}for(W=Math.round(W),H=Math.round(H),a.clear(),M=0;M<p;++M)t[M].mark.bounds.clear();for(M=0;M<p;++M)D=t[M],D.x+=I[M]+=W,D.y+=k[M]+=H,a.union(D.mark.bounds.union(D.bounds.translate(I[M],k[M]))),i&&e.dirty(D);return a}function eve(e,t,n){var i=JTe(t),s=i.marks,a=n.bounds===cN?tve:nve,c=n.offset,d=n.columns||s.length,f=d<=0?1:Math.ceil(s.length/d),u=f*d,r,h,p,_,l,b,m;const E=pX(e,s,n);E.empty()&&E.set(0,0,0,0),i.rowheaders&&(b=bn(n.headerBand,sc,null),r=Hb(e,i.rowheaders,s,d,f,-bn(c,"rowHeader"),ZU,0,a,"x1",0,d,1,b)),i.colheaders&&(b=bn(n.headerBand,ic,null),h=Hb(e,i.colheaders,s,d,d,-bn(c,"columnHeader"),ZU,1,a,"y1",0,1,d,b)),i.rowfooters&&(b=bn(n.footerBand,sc,null),p=Hb(e,i.rowfooters,s,d,f,bn(c,"rowFooter"),ej,0,a,"x2",d-1,d,1,b)),i.colfooters&&(b=bn(n.footerBand,ic,null),_=Hb(e,i.colfooters,s,d,d,bn(c,"columnFooter"),ej,1,a,"y2",u-d,1,d,b)),i.rowtitle&&(l=bn(n.titleAnchor,sc),m=bn(c,"rowTitle"),m=l===Gi?p+m:r-m,b=bn(n.titleBand,sc,.5),nj(e,i.rowtitle,m,0,E,b)),i.coltitle&&(l=bn(n.titleAnchor,ic),m=bn(c,"columnTitle"),m=l===Gi?_+m:h-m,b=bn(n.titleBand,ic,.5),nj(e,i.coltitle,m,1,E,b))}function tve(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function nve(e,t){return e.bounds[t]}function Hb(e,t,n,i,s,a,c,d,f,u,r,h,p,_){var l=n.length,b=0,m=0,E,B,I,k,F,x,M,R,P;if(!l)return b;for(E=r;E<l;E+=h)n[E]&&(b=c(b,f(n[E],u)));if(!t.length)return b;for(t.length>s&&(e.warn("Grid headers exceed limit: "+s),t=t.slice(0,s)),b+=a,B=0,k=t.length;B<k;++B)e.dirty(t[B]),t[B].mark.bounds.clear();for(E=r,B=0,k=t.length;B<k;++B,E+=h){for(x=t[B],F=x.mark.bounds,I=E;I>=0&&(M=n[I])==null;I-=p);d?(R=_==null?M.x:Math.round(M.bounds.x1+_*M.bounds.width()),P=b):(R=b,P=_==null?M.y:Math.round(M.bounds.y1+_*M.bounds.height())),F.union(x.bounds.translate(R-(x.x||0),P-(x.y||0))),x.x=R,x.y=P,e.dirty(x),m=c(m,F[u])}return m}function nj(e,t,n,i,s,a){if(t){e.dirty(t);var c=n,d=n;i?c=Math.round(s.x1+a*s.width()):d=Math.round(s.y1+a*s.height()),t.bounds.translate(c-(t.x||0),d-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=c,t.y=d,e.dirty(t)}}function ive(e,t){const n=e[t]||{};return(i,s)=>n[i]!=null?n[i]:e[i]!=null?e[i]:s}function sve(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function rve(e,t,n,i,s,a,c){const d=ive(n,t),f=sve(e,d("offset",0)),u=d("anchor",sN),r=u===Gi?1:u===t2?.5:0,h={align:n2,bounds:d("bounds",cN),columns:d("direction")==="vertical"?1:e.length,padding:d("margin",8),center:d("center"),nodirty:!0};switch(t){case Yr:h.anchor={x:Math.floor(i.x1)-f,column:Gi,y:r*(c||i.height()+2*i.y1),row:u};break;case Kr:h.anchor={x:Math.ceil(i.x2)+f,y:r*(c||i.height()+2*i.y1),row:u};break;case Fh:h.anchor={y:Math.floor(s.y1)-f,row:Gi,x:r*(a||s.width()+2*s.x1),column:u};break;case kc:h.anchor={y:Math.ceil(s.y2)+f,x:r*(a||s.width()+2*s.x1),column:u};break;case NTe:h.anchor={x:f,y:f};break;case RTe:h.anchor={x:a-f,y:f,column:Gi};break;case CTe:h.anchor={x:f,y:c-f,row:Gi};break;case LTe:h.anchor={x:a-f,y:c-f,column:Gi,row:Gi};break}return h}function ave(e,t){var n=t.items[0],i=n.datum,s=n.orient,a=n.bounds,c=n.x,d=n.y,f,u;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),lve(e,n,n.items[0].items[0]),a=ove(n,a),f=2*n.padding,u=2*n.padding,a.empty()||(f=Math.ceil(a.width()+f),u=Math.ceil(a.height()+u)),i.type===zTe&&cve(n.items[0].items[0].items[0].items),s!==lN&&(n.x=c=0,n.y=d=0),n.width=f,n.height=u,Il(a.set(c,d,c+f,d+u),n),n.mark.bounds.clear().union(a),n}function ove(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function lve(e,t,n){var i=t.padding,s=i-n.x,a=i-n.y;if(!t.datum.title)(s||a)&&Zp(e,n,s,a);else{var c=t.items[1].items[0],d=c.anchor,f=t.titlePadding||0,u=i-c.x,r=i-c.y;switch(c.orient){case Yr:s+=Math.ceil(c.bounds.width())+f;break;case Kr:case kc:break;default:a+=c.bounds.height()+f}switch((s||a)&&Zp(e,n,s,a),c.orient){case Yr:r+=iu(t,n,c,d,1,1);break;case Kr:u+=iu(t,n,c,Gi,0,0)+f,r+=iu(t,n,c,d,1,1);break;case kc:u+=iu(t,n,c,d,0,0),r+=iu(t,n,c,Gi,-1,0,1)+f;break;default:u+=iu(t,n,c,d,0,0)}(u||r)&&Zp(e,c,u,r),(u=Math.round(c.bounds.x1-i))<0&&(Zp(e,n,-u,0),Zp(e,c,-u,0))}}function iu(e,t,n,i,s,a,c){const d=e.datum.type!=="symbol",f=n.datum.vgrad,u=d&&(a||!f)&&!c?t.items[0]:t,r=u.bounds[s?"y2":"x2"]-e.padding,h=f&&a?r:0,p=f&&a?0:r,_=s<=0?0:HO(n);return Math.round(i===sN?h:i===Gi?p-_:.5*(r-_))}function Zp(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function cve(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function dve(e,t,n,i,s){var a=t.items[0],c=a.frame,d=a.orient,f=a.anchor,u=a.offset,r=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],_=d===Yr||d===Kr?i:n,l=0,b=0,m=0,E=0,B=0,I;if(c!==zE?d===Yr?(l=s.y2,_=s.y1):d===Kr?(l=s.y1,_=s.y2):(l=s.x1,_=s.x2):d===Yr&&(l=i,_=0),I=f===sN?l:f===Gi?_:(l+_)/2,p&&p.text){switch(d){case Fh:case kc:B=h.bounds.height()+r;break;case Yr:E=h.bounds.width()+r;break;case Kr:E=-h.bounds.width()-r;break}Ii.clear().union(p.bounds),Ii.translate(E-(p.x||0),B-(p.y||0)),Cu(p,"x",E)|Cu(p,"y",B)&&(e.dirty(p),p.bounds.clear().union(Ii),p.mark.bounds.clear().union(Ii),e.dirty(p)),Ii.clear().union(p.bounds)}else Ii.clear();switch(Ii.union(h.bounds),d){case Fh:b=I,m=s.y1-Ii.height()-u;break;case Yr:b=s.x1-Ii.width()-u,m=I;break;case Kr:b=s.x2+Ii.width()+u,m=I;break;case kc:b=I,m=s.y2+u;break;default:b=a.x,m=a.y}return Cu(a,"x",b)|Cu(a,"y",m)&&(Ii.translate(b,m),e.dirty(a),a.bounds.clear().union(Ii),t.bounds.clear().union(Ii),e.dirty(a)),a.bounds}function yX(e){ge.call(this,null,e)}Le(yX,ge,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&eve(n,i,e.layout),uve(n,i,e)}),fve(e.mark.group)?t.reflow():t}});function fve(e){return e&&e.mark.role!=="legend-entry"}function uve(e,t,n){var i=t.items,s=Math.max(0,t.width||0),a=Math.max(0,t.height||0),c=new Gn().set(0,0,s,a),d=c.clone(),f=c.clone(),u=[],r,h,p,_,l,b;for(l=0,b=i.length;l<b;++l)switch(h=i[l],h.role){case rN:_=YTe(h)?d:f,_.union(KTe(e,h,s,a));break;case aN:r=h;break;case oN:u.push(ave(e,h));break;case UTe:case jTe:case tX:case nX:case iX:case sX:case rX:case aX:d.union(h.bounds),f.union(h.bounds);break;default:c.union(h.bounds)}if(u.length){const m={};u.forEach(E=>{p=E.orient||Kr,p!==lN&&(m[p]||(m[p]=[])).push(E)});for(const E in m){const B=m[E];pX(e,B,rve(B,E,n.legends,d,f,s,a))}u.forEach(E=>{const B=E.bounds;if(B.equals(E._bounds)||(E.bounds=E._bounds,e.dirty(E),E.bounds=B,e.dirty(E)),n.autosize&&(n.autosize.type===oX||n.autosize.type===lX||n.autosize.type===cX))switch(E.orient){case Yr:case Kr:c.add(B.x1,0).add(B.x2,0);break;case Fh:case kc:c.add(0,B.y1).add(0,B.y2)}else c.union(B)})}c.union(d).union(f),r&&c.union(dve(e,r,s,a,c)),t.clip&&c.set(0,0,t.width||0,t.height||0),hve(e,t,c,n)}function hve(e,t,n,i){const s=i.autosize||{},a=s.type;if(e._autosize<1||!a)return;let c=e._width,d=e._height,f=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),r=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-f)),_=Math.max(0,Math.ceil(n.y2-r));if(s.contains===$Te){const l=e.padding();c-=l.left+l.right,d-=l.top+l.bottom}a===lN?(u=0,h=0,f=c,r=d):a===oX?(f=Math.max(0,c-u-p),r=Math.max(0,d-h-_)):a===lX?(f=Math.max(0,c-u-p),d=r+h+_):a===cX?(c=f+u+p,r=Math.max(0,d-h-_)):a===qTe&&(c=f+u+p,d=r+h+_),e._resizeView(c,d,f,r,[u,h],s.resize)}const _ve=Object.freeze(Object.defineProperty({__proto__:null,bound:dX,identifier:dN,mark:fX,overlap:uX,render:_X,viewlayout:yX},Symbol.toStringTag,{value:"Module"}));function gX(e){ge.call(this,null,e)}Le(gX,ge,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=this.value,a=e.scale,c=e.count==null?e.values?e.values.length:10:e.count,d=kO(a,c,e.minstep),f=e.format||VW(n,a,d,e.formatSpecifier,e.formatType,!!e.values),u=e.values?qW(a,e.values,d):xO(a,d);return s&&(i.rem=s),s=u.map((r,h)=>Xt({index:h/(u.length-1||1),value:r,label:f(r)})),e.extra&&s.length&&s.push(Xt({index:-1,extra:{value:s[0].value},label:""})),i.source=s,i.add=s,this.value=s,i}});function mX(e){ge.call(this,null,e)}function pve(){return Xt({})}function yve(e){const t=h_().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Le(mX,ge,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=e.item||pve,a=e.key||Je,c=this.value;return Te(i.encode)&&(i.encode=null),c&&(e.modified("key")||t.modified(a))&&be("DataJoin does not support modified key function or fields."),c||(t=t.addAll(),this.value=c=yve(a)),t.visit(t.ADD,d=>{const f=a(d);let u=c.get(f);u?u.exit?(c.empty--,i.add.push(u)):i.mod.push(u):(u=s(d),c.set(f,u),i.add.push(u)),u.datum=d,u.exit=!1}),t.visit(t.MOD,d=>{const f=a(d),u=c.get(f);u&&(u.datum=d,i.mod.push(u))}),t.visit(t.REM,d=>{const f=a(d),u=c.get(f);d===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++c.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&c.empty>n.cleanThreshold)&&n.runAfter(c.clean),i}});function wX(e){ge.call(this,null,e)}Le(wX,ge,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,s=e.encoders,a=t.encode;if(Te(a))if(n.changed()||a.every(h=>s[h]))a=a[0],n.encode=null;else return t.StopPropagation;var c=a==="enter",d=s.update||Ul,f=s.enter||Ul,u=s.exit||Ul,r=(a&&!c?s[a]:d)||Ul;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{f(h,e),d(h,e)}),n.modifies(f.output),n.modifies(d.output),r!==Ul&&r!==d&&(t.visit(t.ADD,h=>{r(h,e)}),n.modifies(r.output))),t.changed(t.REM)&&u!==Ul&&(t.visit(t.REM,h=>{u(h,e)}),n.modifies(u.output)),c||r!==Ul){const h=t.MOD|(e.modified()?t.REFLOW:0);c?(t.visit(h,p=>{const _=f(p,e)||i;(r(p,e)||_)&&n.mod.push(p)}),n.mod.length&&n.modifies(f.output)):t.visit(h,p=>{(r(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(r.output)}return n.changed()?n:t.StopPropagation}});function bX(e){ge.call(this,[],e)}Le(bX,ge,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=this.value,a=e.type||C0,c=e.scale,d=+e.limit,f=kO(c,e.count==null?5:e.count,e.minstep),u=!!e.values||a===C0,r=e.format||YW(n,c,f,a,e.formatSpecifier,e.formatType,u),h=e.values||WW(c,f),p,_,l,b,m;return s&&(i.rem=s),a===C0?(d&&h.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),s=h.slice(0,d-1),m=!0):s=h,Bt(l=e.size)?(!e.values&&c(s[0])===0&&(s=s.slice(1)),b=s.reduce((E,B)=>Math.max(E,l(B,e)),0)):l=Ui(b=l||8),s=s.map((E,B)=>Xt({index:B,label:r(E,B,s),value:E,offset:b,size:l(E,e)})),m&&(m=h[s.length],s.push(Xt({index:s.length,label:`…${h.length-s.length} entries`,value:m,offset:b,size:l(m,e)})))):a===qwe?(p=c.domain(),_=jW(c,p[0],Pt(p)),h.length<3&&!e.values&&p[0]!==Pt(p)&&(h=[p[0],Pt(p)]),s=h.map((E,B)=>Xt({index:B,label:r(E,B,h),value:E,perc:_(E)}))):(l=h.length-1,_=ebe(c),s=h.map((E,B)=>Xt({index:B,label:r(E,B,h),value:E,perc:B?_(E):0,perc2:B===l?1:_(h[B+1])}))),i.source=s,i.add=s,this.value=s,i}});const gve=e=>e.source.x,mve=e=>e.source.y,wve=e=>e.target.x,bve=e=>e.target.y;function fN(e){ge.call(this,{},e)}fN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Le(fN,ge,{transform(e,t){var n=e.sourceX||gve,i=e.sourceY||mve,s=e.targetX||wve,a=e.targetY||bve,c=e.as||"path",d=e.orient||"vertical",f=e.shape||"line",u=ij.get(f+"-"+d)||ij.get(f);return u||be("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,r=>{r[c]=u(n(r),i(r),s(r),a(r))}),t.reflow(e.modified()).modifies(c)}});const TX=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Tve=(e,t,n,i)=>TX(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),vX=(e,t,n,i)=>{var s=n-e,a=i-t,c=Math.hypot(s,a)/2,d=180*Math.atan2(a,s)/Math.PI;return"M"+e+","+t+"A"+c+","+c+" "+d+" 0 1 "+n+","+i},vve=(e,t,n,i)=>vX(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),EX=(e,t,n,i)=>{const s=n-e,a=i-t,c=.2*(s+a),d=.2*(a-s);return"M"+e+","+t+"C"+(e+c)+","+(t+d)+" "+(n+d)+","+(i-c)+" "+n+","+i},Eve=(e,t,n,i)=>EX(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Sve=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Bve=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,Ive=(e,t,n,i)=>{const s=Math.cos(e),a=Math.sin(e),c=Math.cos(n),d=Math.sin(n),f=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*s+","+t*a+"A"+t+","+t+" 0 0,"+(f?1:0)+" "+t*c+","+t*d+"L"+i*c+","+i*d},Fve=(e,t,n,i)=>{const s=(e+n)/2;return"M"+e+","+t+"C"+s+","+t+" "+s+","+i+" "+n+","+i},kve=(e,t,n,i)=>{const s=(t+i)/2;return"M"+e+","+t+"C"+e+","+s+" "+n+","+s+" "+n+","+i},xve=(e,t,n,i)=>{const s=Math.cos(e),a=Math.sin(e),c=Math.cos(n),d=Math.sin(n),f=(t+i)/2;return"M"+t*s+","+t*a+"C"+f*s+","+f*a+" "+f*c+","+f*d+" "+i*c+","+i*d},ij=h_({line:TX,"line-radial":Tve,arc:vX,"arc-radial":vve,curve:EX,"curve-radial":Eve,"orthogonal-horizontal":Sve,"orthogonal-vertical":Bve,"orthogonal-radial":Ive,"diagonal-horizontal":Fve,"diagonal-vertical":kve,"diagonal-radial":xve});function uN(e){ge.call(this,null,e)}uN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Le(uN,ge,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],s=n[1],a=e.field||d_,c=e.startAngle||0,d=e.endAngle!=null?e.endAngle:2*Math.PI,f=t.source,u=f.map(a),r=u.length,h=c,p=(d-c)/o5(u),_=Hs(r),l,b,m;for(e.sort&&_.sort((E,B)=>u[E]-u[B]),l=0;l<r;++l)m=u[_[l]],b=f[_[l]],b[i]=h,b[s]=h+=m*p;return this.value=u,t.reflow(e.modified()).modifies(n)}});const Mve=5;function Ave(e){const t=e.type;return!e.bins&&(t===Th||t===Em||t===Sm)}function SX(e){return BO(e)&&e!==Ka}const Ove=ia(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function BX(e){ge.call(this,null,e),this.modified(!0)}Le(BX,ge,{transform(e,t){var n=t.dataflow,i=this.value,s=Nve(e);(!i||s!==i.type)&&(this.value=i=Yt(s)());for(s in e)if(!Ove[s]){if(s==="padding"&&SX(i.type))continue;Bt(i[s])?i[s](e[s]):n.warn("Unsupported scale property: "+s)}return Uve(i,e,Dve(i,e,Cve(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Nve(e){var t=e.type,n="",i;return t===Ka?Ka+"-"+Th:(Rve(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ka+"-":i===3?y_+"-":""),(n+t||Th).toLowerCase())}function Rve(e){const t=e.type;return BO(t)&&t!==df&&t!==ff&&(e.scheme||e.range&&e.range.length&&e.range.every(ze))}function Cve(e,t,n){const i=Lve(e,t.domainRaw,n);if(i>-1)return i;var s=t.domain,a=e.type,c=t.zero||t.zero===void 0&&Ave(e),d,f;if(!s)return 0;if((c||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(d=(s=s.slice()).length-1||1,c&&(s[0]>0&&(s[0]=0),s[d]<0&&(s[d]=0)),t.domainMin!=null&&(s[0]=t.domainMin),t.domainMax!=null&&(s[d]=t.domainMax),t.domainMid!=null)){f=t.domainMid;const u=f>s[d]?d+1:f<s[0]?0:d;u!==d&&n.warn("Scale domainMid exceeds domain min or max.",f),s.splice(u,0,f)}return SX(a)&&t.padding&&s[0]!==Pt(s)&&(s=Pve(a,s,t.range,t.padding,t.exponent,t.constant)),e.domain(IX(a,s,n)),a===TO&&e.unknown(t.domainImplicit?ck:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&kO(e,t.nice)||null),s.length}function Lve(e,t,n){return t?(e.domain(IX(e.type,t,n)),t.length):-1}function Pve(e,t,n,i,s,a){var c=Math.abs(Pt(n)-n[0]),d=c/(c-2*i),f=e===wl?AA(t,null,d):e===Sm?Rv(t,null,d,.5):e===Em?Rv(t,null,d,s||1):e===FE?OA(t,null,d,a||1):MA(t,null,d);return t=t.slice(),t[0]=f[0],t[t.length-1]=f[1],t}function IX(e,t,n){if(CW(e)){var i=Math.abs(t.reduce((s,a)=>s+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+Re(t))}return t}function Dve(e,t,n){let i=t.bins;if(i&&!Te(i)){const s=e.domain(),a=s[0],c=Pt(s),d=i.step;let f=i.start==null?a:i.start,u=i.stop==null?c:i.stop;d||be("Scale bins parameter missing step property."),f<a&&(f=d*Math.ceil(a/d)),u>c&&(u=d*Math.floor(c/d)),i=Hs(f,u+d/2,d)}return i?e.bins=i:e.bins&&delete e.bins,e.type===vO&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Uve(e,t,n){var i=e.type,s=t.round||!1,a=t.range;if(t.rangeStep!=null)a=jve(i,t,n);else if(t.scheme&&(a=$ve(i,t,n),Bt(a))){if(e.interpolator)return e.interpolator(a);be(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&LW(i))return e.interpolator(ME(i2(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(IO(t.interpolate,t.interpolateGamma)):Bt(e.round)?e.round(s):Bt(e.rangeRound)&&e.interpolate(s?sm:Uc),a&&e.range(i2(a,t.reverse))}function jve(e,t,n){e!==xW&&e!==zk&&be("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,s=e===zk?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*bO(n,s,i)]}function $ve(e,t,n){var i=t.schemeExtent,s,a;return Te(t.scheme)?a=ME(t.scheme,t.interpolate,t.interpolateGamma):(s=t.scheme.toLowerCase(),a=FO(s),a||be(`Unrecognized scheme name: ${t.scheme}`)),n=e===xE?n+1:e===vO?n-1:e===vh||e===kE?+t.schemeCount||Mve:n,LW(e)?sj(a,i,t.reverse):Bt(a)?UW(sj(a,i),n):e===TO?a:a.slice(0,n)}function sj(e,t,n){return Bt(e)&&(t||n)?DW(e,i2(t||[0,1],n)):e}function i2(e,t){return t?e.slice().reverse():e}function FX(e){ge.call(this,null,e)}Le(FX,ge,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Lf(e.sort)),this.modified(n),t}});const rj="zero",kX="center",xX="normalize",MX=["y0","y1"];function hN(e){ge.call(this,null,e)}hN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:rj,values:[rj,kX,xX]},{name:"as",type:"string",array:!0,length:2,default:MX}]};Le(hN,ge,{transform(e,t){var n=e.as||MX,i=n[0],s=n[1],a=Lf(e.sort),c=e.field||d_,d=e.offset===kX?zve:e.offset===xX?qve:Vve,f,u,r,h;for(f=Gve(t.source,e.groupby,a,c),u=0,r=f.length,h=f.max;u<r;++u)d(f[u],h,c,i,s);return t.reflow(e.modified()).modifies(n)}});function zve(e,t,n,i,s){for(var a=(t-e.sum)/2,c=e.length,d=0,f;d<c;++d)f=e[d],f[i]=a,f[s]=a+=Math.abs(n(f))}function qve(e,t,n,i,s){for(var a=1/e.sum,c=0,d=e.length,f=0,u=0,r;f<d;++f)r=e[f],r[i]=c,r[s]=c=a*(u+=Math.abs(n(r)))}function Vve(e,t,n,i,s){for(var a=0,c=0,d=e.length,f=0,u,r;f<d;++f)r=e[f],u=+n(r),u<0?(r[i]=c,r[s]=c+=u):(r[i]=a,r[s]=a+=u)}function Gve(e,t,n,i){var s=[],a=b=>b(r),c,d,f,u,r,h,p,_,l;if(t==null)s.push(e.slice());else for(c={},d=0,f=e.length;d<f;++d)r=e[d],h=t.map(a),p=c[h],p||(c[h]=p=[],s.push(p)),p.push(r);for(h=0,l=0,u=s.length;h<u;++h){for(p=s[h],d=0,_=0,f=p.length;d<f;++d)_+=Math.abs(i(p[d]));p.sum=_,_>l&&(l=_),n&&p.sort(n)}return s.max=l,s}const Hve=Object.freeze(Object.defineProperty({__proto__:null,axisticks:gX,datajoin:mX,encode:wX,legendentries:bX,linkpath:fN,pie:uN,scale:BX,sortitems:FX,stack:hN},Symbol.toStringTag,{value:"Module"}));var Wve=Math.abs,s2=Math.cos,Jv=Math.sin,Yve=1e-6,AX=Math.PI,r2=AX/2,aj=Xve(2);function oj(e){return e>1?r2:e<-1?-r2:Math.asin(e)}function Xve(e){return e>0?Math.sqrt(e):0}function Kve(e,t){var n=e*Jv(t),i=30,s;do t-=s=(t+Jv(t)-n)/(1+s2(t));while(Wve(s)>Yve&&--i>0);return t/2}function Jve(e,t,n){function i(s,a){return[e*s*s2(a=Kve(n,a)),t*Jv(a)]}return i.invert=function(s,a){return a=oj(a/t),[s/(e*s2(a)),oj((2*a+Jv(2*a))/n)]},i}var Qve=Jve(aj/r2,aj,AX);function Zve(){return _o(Qve).scale(169.529)}const e1e=Rq(),a2=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function t1e(e,t){return function n(){const i=t();return i.type=e,i.path=Rq().projection(i),i.copy=i.copy||function(){const s=n();return a2.forEach(a=>{i[a]&&s[a](i[a]())}),s.path.pointRadius(i.path.pointRadius()),s},NW(i)}}function _N(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Qv[e]=t1e(e,t),this):Qv[e]||null}function OX(e){return e&&e.path||e1e}const Qv={albers:Lq,albersusa:qle,azimuthalequalarea:Vle,azimuthalequidistant:Gle,conicconformal:Yle,conicequalarea:GT,conicequidistant:Jle,equalEarth:Zle,equirectangular:Xle,gnomonic:ece,identity:tce,mercator:Hle,mollweide:Zve,naturalEarth1:nce,orthographic:ice,stereographic:sce,transversemercator:rce};for(const e in Qv)_N(e,Qv[e]);function n1e(){}const Po=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function NX(){var e=1,t=1,n=d;function i(f,u){return u.map(r=>s(f,r))}function s(f,u){var r=[],h=[];return a(f,u,p=>{n(p,f,u),i1e(p)>0?r.push([p]):h.push(p)}),h.forEach(p=>{for(var _=0,l=r.length,b;_<l;++_)if(s1e((b=r[_])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:r}}function a(f,u,r){var h=[],p=[],_,l,b,m,E,B;for(_=l=-1,m=f[0]>=u,Po[m<<1].forEach(I);++_<e-1;)b=m,m=f[_+1]>=u,Po[b|m<<1].forEach(I);for(Po[m<<0].forEach(I);++l<t-1;){for(_=-1,m=f[l*e+e]>=u,E=f[l*e]>=u,Po[m<<1|E<<2].forEach(I);++_<e-1;)b=m,m=f[l*e+e+_+1]>=u,B=E,E=f[l*e+_+1]>=u,Po[b|m<<1|E<<2|B<<3].forEach(I);Po[m|E<<3].forEach(I)}for(_=-1,E=f[l*e]>=u,Po[E<<2].forEach(I);++_<e-1;)B=E,E=f[l*e+_+1]>=u,Po[E<<2|B<<3].forEach(I);Po[E<<3].forEach(I);function I(k){var F=[k[0][0]+_,k[0][1]+l],x=[k[1][0]+_,k[1][1]+l],M=c(F),R=c(x),P,C;(P=p[M])?(C=h[R])?(delete p[P.end],delete h[C.start],P===C?(P.ring.push(x),r(P.ring)):h[P.start]=p[C.end]={start:P.start,end:C.end,ring:P.ring.concat(C.ring)}):(delete p[P.end],P.ring.push(x),p[P.end=R]=P):(P=h[R])?(C=p[M])?(delete h[P.start],delete p[C.end],P===C?(P.ring.push(x),r(P.ring)):h[C.start]=p[P.end]={start:C.start,end:P.end,ring:C.ring.concat(P.ring)}):(delete h[P.start],P.ring.unshift(F),h[P.start=M]=P):h[M]=p[R]={start:M,end:R,ring:[F,x]}}}function c(f){return f[0]*2+f[1]*(e+1)*4}function d(f,u,r){f.forEach(h=>{var p=h[0],_=h[1],l=p|0,b=_|0,m,E=u[b*e+l];p>0&&p<e&&l===p&&(m=u[b*e+l-1],h[0]=p+(r-m)/(E-m)-.5),_>0&&_<t&&b===_&&(m=u[(b-1)*e+l],h[1]=_+(r-m)/(E-m)-.5)})}return i.contour=s,i.size=function(f){if(!arguments.length)return[e,t];var u=Math.floor(f[0]),r=Math.floor(f[1]);return u>=0&&r>=0||be("invalid size"),e=u,t=r,i},i.smooth=function(f){return arguments.length?(n=f?d:n1e,i):n===d},i}function i1e(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function s1e(e,t){for(var n=-1,i=t.length,s;++n<i;)if(s=r1e(e,t[n]))return s;return 0}function r1e(e,t){for(var n=t[0],i=t[1],s=-1,a=0,c=e.length,d=c-1;a<c;d=a++){var f=e[a],u=f[0],r=f[1],h=e[d],p=h[0],_=h[1];if(a1e(f,h,t))return 0;r>i!=_>i&&n<(p-u)*(i-r)/(_-r)+u&&(s=-s)}return s}function a1e(e,t,n){var i;return o1e(e,t,n)&&l1e(e[i=+(e[0]===t[0])],n[i],t[i])}function o1e(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function l1e(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function RX(e,t,n){return function(i){var s=ao(i),a=n?Math.min(s[0],0):s[0],c=s[1],d=c-a,f=t?gc(a,c,e):d/(e+1);return Hs(a+f,c,f)}}function pN(e){ge.call(this,null,e)}pN.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Le(pN,ge,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,s=e.field||Di,a=NX().smooth(e.smooth!==!1),c=e.thresholds||c1e(i,s,e),d=e.as===null?null:e.as||"contour",f=[];return i.forEach(u=>{const r=s(u),h=a.size([r.width,r.height])(r.values,Te(c)?c:c(r.values));d1e(h,r,u,e),h.forEach(p=>{f.push(EE(u,Xt(d!=null?{[d]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=f,n}});function c1e(e,t,n){const i=RX(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(s=>Gd(t(s).values)))}function d1e(e,t,n,i){let s=i.scale||t.scale,a=i.translate||t.translate;if(Bt(s)&&(s=s(n,i)),Bt(a)&&(a=a(n,i)),(s===1||s==null)&&!a)return;const c=(Wt(s)?s:s[0])||1,d=(Wt(s)?s:s[1])||1,f=a&&a[0]||0,u=a&&a[1]||0;e.forEach(CX(t,c,d,f,u))}function CX(e,t,n,i,s){const a=e.x1||0,c=e.y1||0,d=t*n<0;function f(h){h.forEach(u)}function u(h){d&&h.reverse(),h.forEach(r)}function r(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-c)*n+s}return function(h){return h.coordinates.forEach(f),h}}function lj(e,t,n){const i=e>=0?e:dM(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function FI(e){return Bt(e)?e:Ui(+e)}function LX(){var e=f=>f[0],t=f=>f[1],n=d_,i=[-1,-1],s=960,a=500,c=2;function d(f,u){const r=lj(i[0],f,e)>>c,h=lj(i[1],f,t)>>c,p=r?r+2:0,_=h?h+2:0,l=2*p+(s>>c),b=2*_+(a>>c),m=new Float32Array(l*b),E=new Float32Array(l*b);let B=m;f.forEach(k=>{const F=p+(+e(k)>>c),x=_+(+t(k)>>c);F>=0&&F<l&&x>=0&&x<b&&(m[F+x*l]+=+n(k))}),r>0&&h>0?(su(l,b,m,E,r),ru(l,b,E,m,h),su(l,b,m,E,r),ru(l,b,E,m,h),su(l,b,m,E,r),ru(l,b,E,m,h)):r>0?(su(l,b,m,E,r),su(l,b,E,m,r),su(l,b,m,E,r),B=E):h>0&&(ru(l,b,m,E,h),ru(l,b,E,m,h),ru(l,b,m,E,h),B=E);const I=u?Math.pow(2,-2*c):1/o5(B);for(let k=0,F=l*b;k<F;++k)B[k]*=I;return{values:B,scale:1<<c,width:l,height:b,x1:p,y1:_,x2:p+(s>>c),y2:_+(a>>c)}}return d.x=function(f){return arguments.length?(e=FI(f),d):e},d.y=function(f){return arguments.length?(t=FI(f),d):t},d.weight=function(f){return arguments.length?(n=FI(f),d):n},d.size=function(f){if(!arguments.length)return[s,a];var u=+f[0],r=+f[1];return u>=0&&r>=0||be("invalid size"),s=u,a=r,d},d.cellSize=function(f){return arguments.length?((f=+f)>=1||be("invalid cell size"),c=Math.floor(Math.log(f)/Math.LN2),d):1<<c},d.bandwidth=function(f){return arguments.length?(f=$e(f),f.length===1&&(f=[+f[0],+f[0]]),f.length!==2&&be("invalid bandwidth"),i=f,d):i},d}function su(e,t,n,i,s){const a=(s<<1)+1;for(let c=0;c<t;++c)for(let d=0,f=0;d<e+s;++d)d<e&&(f+=n[d+c*e]),d>=s&&(d>=a&&(f-=n[d-a+c*e]),i[d-s+c*e]=f/Math.min(d+1,e-1+a-d,a))}function ru(e,t,n,i,s){const a=(s<<1)+1;for(let c=0;c<e;++c)for(let d=0,f=0;d<t+s;++d)d<t&&(f+=n[c+d*e]),d>=s&&(d>=a&&(f-=n[c+(d-a)*e]),i[c+(d-s)*e]=f/Math.min(d+1,t-1+a-d,a))}function yN(e){ge.call(this,null,e)}yN.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const f1e=["x","y","weight","size","cellSize","bandwidth"];function PX(e,t){return f1e.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Le(yN,ge,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,s=u1e(i,e.groupby),a=(e.groupby||[]).map(Rn),c=PX(LX(),e),d=e.as||"grid",f=[];function u(r,h){for(let p=0;p<a.length;++p)r[a[p]]=h[p];return r}return f=s.map(r=>Xt(u({[d]:c(r,e.counts)},r.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=f,n}});function u1e(e,t){var n=[],i=r=>r(d),s,a,c,d,f,u;if(t==null)n.push(e);else for(s={},a=0,c=e.length;a<c;++a)d=e[a],f=t.map(i),u=s[f],u||(s[f]=u=[],u.dims=f,n.push(u)),u.push(d);return n}function gN(e){ge.call(this,null,e)}gN.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Le(gN,ge,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=NX().smooth(e.smooth!==!1),s=e.values,a=e.thresholds||RX(e.count||10,e.nice,!!s),c=e.size,d,f;return s||(s=t.materialize(t.SOURCE).source,d=PX(LX(),e)(s,!0),f=CX(d,d.scale||1,d.scale||1,0,0),c=[d.width,d.height],s=d.values),a=Te(a)?a:a(s),s=i.size(c)(s,a),f&&s.forEach(f),this.value&&(n.rem=this.value),this.value=n.source=n.add=(s||[]).map(Xt),n}});const o2="Feature",mN="FeatureCollection",h1e="MultiPoint";function wN(e){ge.call(this,null,e)}wN.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Le(wN,ge,{transform(e,t){var n=this._features,i=this._points,s=e.fields,a=s&&s[0],c=s&&s[1],d=e.geojson||!s&&Di,f=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Ni(d))||a&&t.modified(Ni(a))||c&&t.modified(Ni(c)),(!this.value||u)&&(f=t.SOURCE,this._features=n=[],this._points=i=[]),d&&t.visit(f,r=>n.push(d(r))),a&&c&&(t.visit(f,r=>{var h=a(r),p=c(r);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:o2,geometry:{type:h1e,coordinates:i}})),this.value={type:mN,features:n}}});function bN(e){ge.call(this,null,e)}bN.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Le(bN,ge,{transform(e,t){var n=t.fork(t.ALL),i=this.value,s=e.field||Di,a=e.as||"path",c=n.SOURCE;!i||e.modified()?(this.value=i=OX(e.projection),n.materialize().reflow()):c=s===Di||t.modified(s.fields)?n.ADD_MOD:n.ADD;const d=_1e(i,e.pointRadius);return n.visit(c,f=>f[a]=i(s(f))),i.pointRadius(d),n.modifies(a)}});function _1e(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function TN(e){ge.call(this,null,e)}TN.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Le(TN,ge,{transform(e,t){var n=e.projection,i=e.fields[0],s=e.fields[1],a=e.as||["x","y"],c=a[0],d=a[1],f;function u(r){const h=n([i(r),s(r)]);h?(r[c]=h[0],r[d]=h[1]):(r[c]=void 0,r[d]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(f=t.modified(i.fields)||t.modified(s.fields),t.visit(f?t.ADD_MOD:t.ADD,u)),t.modifies(a)}});function vN(e){ge.call(this,null,e)}vN.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Le(vN,ge,{transform(e,t){var n=t.fork(t.ALL),i=this.value,s=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=p1e(OX(e.projection),e.field||Br("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,c=>c[s]=i),n.modifies(s)}});function p1e(e,t,n){const i=n==null?s=>e(t(s)):s=>{var a=e.pointRadius(),c=e.pointRadius(n)(t(s));return e.pointRadius(a),c};return i.context=s=>(e.context(s),i),i}function EN(e){ge.call(this,[],e),this.generator=vle()}EN.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Le(EN,ge,{transform(e,t){var n=this.value,i=this.generator,s;if(!n.length||e.modified())for(const a in e)Bt(i[a])&&i[a](e[a]);return s=i(),n.length?t.mod.push(KH(n[0],s)):t.add.push(Xt(s)),n[0]=s,t}});function SN(e){ge.call(this,null,e)}SN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Le(SN,ge,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",s=e.field||Di,a=g1e(e.opacity,e),c=y1e(e.color,e),d=e.as||"image",f={$x:0,$y:0,$value:0,$max:i?Gd(n.map(u=>Gd(s(u).values))):0};return n.forEach(u=>{const r=s(u),h=St({},u,f);i||(h.$max=Gd(r.values||[])),u[d]=m1e(r,h,c.dep?c:Ui(c(h)),a.dep?a:Ui(a(h)))}),t.reflow(!0).modifies(d)}});function y1e(e,t){let n;return Bt(e)?(n=i=>mc(e(i,t)),n.dep=DX(e)):n=Ui(mc(e||"#888")),n}function g1e(e,t){let n;return Bt(e)?(n=i=>e(i,t),n.dep=DX(e)):e?n=Ui(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function DX(e){if(!Bt(e))return!1;const t=ia(Ni(e));return t.$x||t.$y||t.$value||t.$max}function m1e(e,t,n,i){const s=e.width,a=e.height,c=e.x1||0,d=e.y1||0,f=e.x2||s,u=e.y2||a,r=e.values,h=r?m=>r[m]:Jl,p=fc(f-c,u-d),_=p.getContext("2d"),l=_.getImageData(0,0,f-c,u-d),b=l.data;for(let m=d,E=0;m<u;++m){t.$y=m-d;for(let B=c,I=m*s;B<f;++B,E+=4){t.$x=B-c,t.$value=h(B+I);const k=n(t);b[E+0]=k.r,b[E+1]=k.g,b[E+2]=k.b,b[E+3]=~~(255*i(t))}}return _.putImageData(l,0,0),p}function UX(e){ge.call(this,null,e),this.modified(!0)}Le(UX,ge,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=b1e(e.type),a2.forEach(i=>{e[i]!=null&&cj(n,i,e[i])})):a2.forEach(i=>{e.modified(i)&&cj(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&w1e(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function w1e(e,t){const n=T1e(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function b1e(e){const t=_N((e||"mercator").toLowerCase());return t||be("Unrecognized projection type: "+e),t()}function cj(e,t,n){Bt(e[t])&&e[t](n)}function T1e(e){return e=$e(e),e.length===1?e[0]:{type:mN,features:e.reduce((t,n)=>t.concat(v1e(n)),[])}}function v1e(e){return e.type===mN?e.features:$e(e).filter(t=>t!=null).map(t=>t.type===o2?t:{type:o2,geometry:t})}const E1e=Object.freeze(Object.defineProperty({__proto__:null,contour:gN,geojson:wN,geopath:bN,geopoint:TN,geoshape:vN,graticule:EN,heatmap:SN,isocontour:pN,kde2d:yN,projection:UX},Symbol.toStringTag,{value:"Module"})),dj={center:uoe,collide:Aoe,nbody:zoe,link:Noe,x:qoe,y:Voe},qy="forces",l2=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],S1e=["static","iterations"],jX=["x","y","vx","vy"];function BN(e){ge.call(this,null,e)}BN.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:jX}]};Le(BN,ge,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),s=e.modified(l2),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(s||t.changed(t.MOD))&&$X(n,e,0,t)):(this.value=n=I1e(t.source,e),n.on("tick",B1e(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),s||i||e.modified(S1e)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let d=this._argops,f=0,u=d.length,r;f<u;++f)if(r=d[f],!(r.name!==qy||r.op._argval.force!=="link")){for(var i=r.op._argops,s=0,a=i.length,c;s<a;++s)if(i[s].name==="links"&&(c=i[s].op.source)){n.pulse(c,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(jX)}});function B1e(e,t){return()=>e.touch(t).run()}function I1e(e,t){const n=$oe(e),i=n.stop,s=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,s()),n.stop=()=>(a=!0,i()),$X(n,t,!0).on("end",()=>a=!0)}function $X(e,t,n,i){var s=$e(t.forces),a,c,d,f;for(a=0,c=l2.length;a<c;++a)d=l2[a],d!==qy&&t.modified(d)&&e[d](t[d]);for(a=0,c=s.length;a<c;++a)f=qy+a,d=n||t.modified(qy,a)?k1e(s[a]):i&&F1e(s[a],i)?e.force(f):null,d&&e.force(f,d);for(c=e.numForces||0;a<c;++a)e.force(qy+a,null);return e.numForces=s.length,e}function F1e(e,t){var n,i;for(n in e)if(Bt(i=e[n])&&t.modified(Ni(i)))return 1;return 0}function k1e(e){var t,n;Ve(dj,e.force)||be("Unrecognized force: "+e.force),t=dj[e.force]();for(n in e)Bt(t[n])&&x1e(t[n],e[n],e);return t}function x1e(e,t,n){e(Bt(t)?i=>t(i,n):t)}const M1e=Object.freeze(Object.defineProperty({__proto__:null,force:BN},Symbol.toStringTag,{value:"Module"}));function c2(e,t,n){const i={};return e.each(s=>{const a=s.data;n(a)&&(i[t(a)]=s)}),e.lookup=i,e}function IN(e){ge.call(this,null,e)}IN.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const A1e=e=>e.values;Le(IN,ge,{transform(e,t){t.source||be("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),s=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(c=>{c.children&&vE(c.data)&&s.rem.push(c.data)}),this.value=a=qx({values:$e(e.keys).reduce((c,d)=>(c.key(d),c),O1e()).entries(s.source)},A1e),n&&a.each(c=>{c.children&&(c=Xt(c.data),s.add.push(c),s.source.push(c))}),c2(a,Je,Je)),s.source.root=a,s}});function O1e(){const e=[],t={entries:s=>i(n(s,0),0),key:s=>(e.push(s),t)};function n(s,a){if(a>=e.length)return s;const c=s.length,d=e[a++],f={},u={};let r=-1,h,p,_;for(;++r<c;)h=d(p=s[r])+"",(_=f[h])?_.push(p):f[h]=[p];for(h in f)u[h]=n(f[h],a);return u}function i(s,a){if(++a>e.length)return s;const c=[];for(const d in s)c.push({key:d,values:i(s[d],a)});return c}return t}function Fl(e){ge.call(this,null,e)}const N1e=(e,t)=>e.parent===t.parent?1:2;Le(Fl,ge,{transform(e,t){(!t.source||!t.source.root)&&be(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,s=t.source.root,a=e.as||i;e.field?s.sum(e.field):s.count(),e.sort&&s.sort(Lf(e.sort,c=>c.data)),R1e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?N1e:d_);try{this.value=n(s)}catch(c){be(c)}return s.each(c=>C1e(c,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function R1e(e,t,n){for(let i,s=0,a=t.length;s<a;++s)i=t[s],i in n&&e[i](n[i])}function C1e(e,t,n){const i=e.data,s=t.length-1;for(let a=0;a<s;++a)i[n[a]]=e[t[a]];i[n[s]]=e.children?e.children.length:0}const d2=["x","y","r","depth","children"];function FN(e){Fl.call(this,e)}FN.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:d2.length,default:d2}]};Le(FN,Fl,{layout:Vce,params:["radius","size","padding"],fields:d2});const f2=["x0","y0","x1","y1","depth","children"];function kN(e){Fl.call(this,e)}kN.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:f2.length,default:f2}]};Le(kN,Fl,{layout:Gce,params:["size","round","padding"],fields:f2});function xN(e){ge.call(this,null,e)}xN.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Le(xN,ge,{transform(e,t){t.source||be("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),s=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return s.source=s.source.slice(),a&&(n=s.source.length?c2(LD().id(e.key).parentId(e.parentKey)(s.source),e.key,Ir):c2(LD()([{}]),e.key,e.key)),s.source.root=this.value=n,s}});const fj={tidy:tde,cluster:hce},u2=["x","y","depth","children"];function MN(e){Fl.call(this,e)}MN.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:u2.length,default:u2}]};Le(MN,Fl,{layout(e){const t=e||"tidy";if(Ve(fj,t))return fj[t]();be("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:u2});function AN(e){ge.call(this,[],e)}AN.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Le(AN,ge,{transform(e,t){const n=this.value,i=t.source&&t.source.root,s=t.fork(t.NO_SOURCE),a={};return i||be("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(s.rem=n,t.visit(t.SOURCE,c=>a[Je(c)]=1),i.each(c=>{const d=c.data,f=c.parent&&c.parent.data;f&&a[Je(d)]&&a[Je(f)]&&s.add.push(Xt({source:f,target:d}))}),this.value=s.add):t.changed(t.MOD)&&(t.visit(t.MOD,c=>a[Je(c)]=1),n.forEach(c=>{(a[Je(c.source)]||a[Je(c.target)])&&s.mod.push(c)})),s}});const uj={binary:ide,dice:lm,slice:j1,slicedice:sde,squarify:e7,resquarify:rde},h2=["x0","y0","x1","y1","depth","children"];function ON(e){Fl.call(this,e)}ON.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:h2.length,default:h2}]};Le(ON,Fl,{layout(){const e=nde();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ve(uj,t)?e.tile(uj[t]):be("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:h2});const L1e=Object.freeze(Object.defineProperty({__proto__:null,nest:IN,pack:FN,partition:kN,stratify:xN,tree:MN,treelinks:AN,treemap:ON},Symbol.toStringTag,{value:"Module"})),kI=4278190080;function P1e(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function D1e(e,t,n,i,s){const a=e.width,c=e.height,d=i||s,f=fc(a,c).getContext("2d"),u=fc(a,c).getContext("2d"),r=d&&fc(a,c).getContext("2d");n.forEach(R=>V0(f,R,!1)),V0(u,t,!1),d&&V0(r,t,!0);const h=xI(f,a,c),p=xI(u,a,c),_=d&&xI(r,a,c),l=e.bitmap(),b=d&&e.bitmap();let m,E,B,I,k,F,x,M;for(E=0;E<c;++E)for(m=0;m<a;++m)k=E*a+m,F=h[k]&kI,M=p[k]&kI,x=d&&_[k]&kI,(F||x||M)&&(B=e(m),I=e(E),!s&&(F||M)&&l.set(B,I),d&&(F||x)&&b.set(B,I));return[l,b]}function xI(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function V0(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(s=>{s.items.forEach(a=>V0(e,a.items,n))}):tr[i].draw(e,{items:n?t.map(U1e):t})}function U1e(e){const t=EE(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Do=5,zi=31,Lg=32,Xl=new Uint32Array(Lg+1),Vr=new Uint32Array(Lg+1);Vr[0]=0;Xl[0]=~Vr[0];for(let e=1;e<=Lg;++e)Vr[e]=Vr[e-1]<<1|1,Xl[e]=~Vr[e];function j1e(e,t){const n=new Uint32Array(~~((e*t+Lg)/Lg));function i(a,c){n[a]|=c}function s(a,c){n[a]&=c}return{array:n,get:(a,c)=>{const d=c*e+a;return n[d>>>Do]&1<<(d&zi)},set:(a,c)=>{const d=c*e+a;i(d>>>Do,1<<(d&zi))},clear:(a,c)=>{const d=c*e+a;s(d>>>Do,~(1<<(d&zi)))},getRange:(a,c,d,f)=>{let u=f,r,h,p,_;for(;u>=c;--u)if(r=u*e+a,h=u*e+d,p=r>>>Do,_=h>>>Do,p===_){if(n[p]&Xl[r&zi]&Vr[(h&zi)+1])return!0}else{if(n[p]&Xl[r&zi]||n[_]&Vr[(h&zi)+1])return!0;for(let l=p+1;l<_;++l)if(n[l])return!0}return!1},setRange:(a,c,d,f)=>{let u,r,h,p,_;for(;c<=f;++c)if(u=c*e+a,r=c*e+d,h=u>>>Do,p=r>>>Do,h===p)i(h,Xl[u&zi]&Vr[(r&zi)+1]);else for(i(h,Xl[u&zi]),i(p,Vr[(r&zi)+1]),_=h+1;_<p;++_)i(_,4294967295)},clearRange:(a,c,d,f)=>{let u,r,h,p,_;for(;c<=f;++c)if(u=c*e+a,r=c*e+d,h=u>>>Do,p=r>>>Do,h===p)s(h,Vr[u&zi]|Xl[(r&zi)+1]);else for(s(h,Vr[u&zi]),s(p,Xl[(r&zi)+1]),_=h+1;_<p;++_)s(_,0)},outOfBounds:(a,c,d,f)=>a<0||c<0||f>=t||d>=e}}function $1e(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),s=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),c=d=>~~((d+n)/i);return c.invert=d=>d*i-n,c.bitmap=()=>j1e(s,a),c.ratio=i,c.padding=n,c.width=e,c.height=t,c}function z1e(e,t,n,i){const s=e.width,a=e.height;return function(c){const d=c.datum.datum.items[i].items,f=d.length,u=c.datum.fontSize,r=Xs.width(c.datum,c.datum.text);let h=0,p,_,l,b,m,E,B;for(let I=0;I<f;++I)p=d[I].x,l=d[I].y,_=d[I].x2===void 0?p:d[I].x2,b=d[I].y2===void 0?l:d[I].y2,m=(p+_)/2,E=(l+b)/2,B=Math.abs(_-p+b-l),B>=h&&(h=B,c.x=m,c.y=E);return m=r/2,E=u/2,p=c.x-m,_=c.x+m,l=c.y-E,b=c.y+E,c.align="center",p<0&&_<=s?c.align="left":0<=p&&s<_&&(c.align="right"),c.baseline="middle",l<0&&b<=a?c.baseline="top":0<=l&&a<b&&(c.baseline="bottom"),!0}}function Zv(e,t,n,i,s,a){let c=n/2;return e-c<0||e+c>s||t-(c=i/2)<0||t+c>a}function rc(e,t,n,i,s,a,c,d){const f=s*a/(i*2),u=e(t-f),r=e(t+f),h=e(n-(a=a/2)),p=e(n+a);return c.outOfBounds(u,h,r,p)||c.getRange(u,h,r,p)||d&&d.getRange(u,h,r,p)}function q1e(e,t,n,i){const s=e.width,a=e.height,c=t[0],d=t[1];function f(u,r,h,p,_){const l=e.invert(u),b=e.invert(r);let m=h,E=a,B;if(!Zv(l,b,p,_,s,a)&&!rc(e,l,b,_,p,m,c,d)&&!rc(e,l,b,_,p,_,c,null)){for(;E-m>=1;)B=(m+E)/2,rc(e,l,b,_,p,B,c,d)?E=B:m=B;if(m>h)return[l,b,m,!0]}}return function(u){const r=u.datum.datum.items[i].items,h=r.length,p=u.datum.fontSize,_=Xs.width(u.datum,u.datum.text);let l=n?p:0,b=!1,m=!1,E=0,B,I,k,F,x,M,R,P,C,D,j,$,W,H,G,z,q;for(let ie=0;ie<h;++ie){for(B=r[ie].x,k=r[ie].y,I=r[ie].x2===void 0?B:r[ie].x2,F=r[ie].y2===void 0?k:r[ie].y2,B>I&&(q=B,B=I,I=q),k>F&&(q=k,k=F,F=q),C=e(B),j=e(I),D=~~((C+j)/2),$=e(k),H=e(F),W=~~(($+H)/2),R=D;R>=C;--R)for(P=W;P>=$;--P)z=f(R,P,l,_,p),z&&([u.x,u.y,l,b]=z);for(R=D;R<=j;++R)for(P=W;P<=H;++P)z=f(R,P,l,_,p),z&&([u.x,u.y,l,b]=z);!b&&!n&&(G=Math.abs(I-B+F-k),x=(B+I)/2,M=(k+F)/2,G>=E&&!Zv(x,M,_,p,s,a)&&!rc(e,x,M,p,_,p,c,null)&&(E=G,u.x=x,u.y=M,m=!0))}return b||m?(x=_/2,M=p/2,c.setRange(e(u.x-x),e(u.y-M),e(u.x+x),e(u.y+M)),u.align="center",u.baseline="middle",!0):!1}}const V1e=[-1,-1,1,1],G1e=[-1,1,-1,1];function H1e(e,t,n,i){const s=e.width,a=e.height,c=t[0],d=t[1],f=e.bitmap();return function(u){const r=u.datum.datum.items[i].items,h=r.length,p=u.datum.fontSize,_=Xs.width(u.datum,u.datum.text),l=[];let b=n?p:0,m=!1,E=!1,B=0,I,k,F,x,M,R,P,C,D,j,$,W;for(let H=0;H<h;++H){for(I=r[H].x,F=r[H].y,k=r[H].x2===void 0?I:r[H].x2,x=r[H].y2===void 0?F:r[H].y2,l.push([e((I+k)/2),e((F+x)/2)]);l.length;)if([P,C]=l.pop(),!(c.get(P,C)||d.get(P,C)||f.get(P,C))){f.set(P,C);for(let G=0;G<4;++G)M=P+V1e[G],R=C+G1e[G],f.outOfBounds(M,R,M,R)||l.push([M,R]);if(M=e.invert(P),R=e.invert(C),D=b,j=a,!Zv(M,R,_,p,s,a)&&!rc(e,M,R,p,_,D,c,d)&&!rc(e,M,R,p,_,p,c,null)){for(;j-D>=1;)$=(D+j)/2,rc(e,M,R,p,_,$,c,d)?j=$:D=$;D>b&&(u.x=M,u.y=R,b=D,m=!0)}}!m&&!n&&(W=Math.abs(k-I+x-F),M=(I+k)/2,R=(F+x)/2,W>=B&&!Zv(M,R,_,p,s,a)&&!rc(e,M,R,p,_,p,c,null)&&(B=W,u.x=M,u.y=R,E=!0))}return m||E?(M=_/2,R=p/2,c.setRange(e(u.x-M),e(u.y-R),e(u.x+M),e(u.y+R)),u.align="center",u.baseline="middle",!0):!1}}const W1e=["right","center","left"],Y1e=["bottom","middle","top"];function X1e(e,t,n,i){const s=e.width,a=e.height,c=t[0],d=t[1],f=i.length;return function(u){const r=u.boundary,h=u.datum.fontSize;if(r[2]<0||r[5]<0||r[0]>s||r[3]>a)return!1;let p=u.textWidth??0,_,l,b,m,E,B,I,k,F,x,M,R,P,C,D;for(let j=0;j<f;++j){if(_=(n[j]&3)-1,l=(n[j]>>>2&3)-1,b=_===0&&l===0||i[j]<0,m=_&&l?Math.SQRT1_2:1,E=i[j]<0?-1:1,B=r[1+_]+i[j]*_*m,M=r[4+l]+E*h*l/2+i[j]*l*m,k=M-h/2,F=M+h/2,R=e(B),C=e(k),D=e(F),!p)if(hj(R,R,C,D,c,d,B,B,k,F,r,b))p=Xs.width(u.datum,u.datum.text);else continue;if(x=B+E*p*_/2,B=x-p/2,I=x+p/2,R=e(B),P=e(I),hj(R,P,C,D,c,d,B,I,k,F,r,b))return u.x=_?_*E<0?I:B:x,u.y=l?l*E<0?F:k:M,u.align=W1e[_*E+1],u.baseline=Y1e[l*E+1],c.setRange(R,C,P,D),!0}return!1}}function hj(e,t,n,i,s,a,c,d,f,u,r,h){return!(s.outOfBounds(e,n,t,i)||(h&&a||s).getRange(e,n,t,i))}const MI=0,AI=4,OI=8,NI=0,RI=1,CI=2,K1e={"top-left":MI+NI,top:MI+RI,"top-right":MI+CI,left:AI+NI,middle:AI+RI,right:AI+CI,"bottom-left":OI+NI,bottom:OI+RI,"bottom-right":OI+CI},J1e={naive:z1e,"reduced-search":q1e,floodfill:H1e};function Q1e(e,t,n,i,s,a,c,d,f,u,r){if(!e.length)return e;const h=Math.max(i.length,s.length),p=Z1e(i,h),_=eEe(s,h),l=tEe(e[0].datum),b=l==="group"&&e[0].datum.items[f].marktype,m=b==="area",E=nEe(l,b,d,f),B=u===null||u===1/0,I=m&&r==="naive";let k=-1,F=-1;const x=e.map(C=>{const D=B?Xs.width(C,C.text):void 0;return k=Math.max(k,D),F=Math.max(F,C.fontSize),{datum:C,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:E(C),textWidth:D}});u=u===null||u===1/0?Math.max(k,F)+Math.max(...i):u;const M=$1e(t[0],t[1],u);let R;if(!I){n&&x.sort((j,$)=>n(j.datum,$.datum));let C=!1;for(let j=0;j<_.length&&!C;++j)C=_[j]===5||p[j]<0;const D=(l&&c||m)&&e.map(j=>j.datum);R=a.length||D?D1e(M,D||[],a,C,m):P1e(M,c&&x)}const P=m?J1e[r](M,R,c,f):X1e(M,R,_,p);return x.forEach(C=>C.opacity=+P(C)),x}function Z1e(e,t){const n=new Float64Array(t),i=e.length;for(let s=0;s<i;++s)n[s]=e[s]||0;for(let s=i;s<t;++s)n[s]=n[i-1];return n}function eEe(e,t){const n=new Int8Array(t),i=e.length;for(let s=0;s<i;++s)n[s]|=K1e[e[s]];for(let s=i;s<t;++s)n[s]=n[i-1];return n}function tEe(e){return e&&e.mark&&e.mark.marktype}function nEe(e,t,n,i){const s=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>s(a.datum):t==="line"?a=>{const c=a.datum.items[i].items;return s(c.length?c[n==="start"?0:c.length-1]:{x:NaN,y:NaN})}:a=>{const c=a.datum.bounds;return[c.x1,(c.x1+c.x2)/2,c.x2,c.y1,(c.y1+c.y2)/2,c.y2]}:s}const _2=["x","y","opacity","align","baseline"],zX=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function NN(e){ge.call(this,null,e)}NN.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:zX},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:_2.length,default:_2}]};Le(NN,ge,{transform(e,t){function n(a){const c=e[a];return Bt(c)&&t.modified(c.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&be("Size parameter should be specified as a [width, height] array.");const s=e.as||_2;return Q1e(t.materialize(t.SOURCE).source||[],e.size,e.sort,$e(e.offset==null?1:e.offset),$e(e.anchor||zX),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const c=a.datum;c[s[0]]=a.x,c[s[1]]=a.y,c[s[2]]=a.opacity,c[s[3]]=a.align,c[s[4]]=a.baseline}),t.reflow(i).modifies(s)}});const iEe=Object.freeze(Object.defineProperty({__proto__:null,label:NN},Symbol.toStringTag,{value:"Module"}));function qX(e,t){var n=[],i=function(r){return r(d)},s,a,c,d,f,u;if(t==null)n.push(e);else for(s={},a=0,c=e.length;a<c;++a)d=e[a],f=t.map(i),u=s[f],u||(s[f]=u=[],u.dims=f,n.push(u)),u.push(d);return n}function RN(e){ge.call(this,null,e)}RN.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Le(RN,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,s=qX(i,e.groupby),a=(e.groupby||[]).map(Rn),c=a.length,d=e.as||[Rn(e.x),Rn(e.y)],f=[];s.forEach(u=>{Z7(u,e.x,e.y,e.bandwidth||.3).forEach(r=>{const h={};for(let p=0;p<c;++p)h[a[p]]=u.dims[p];h[d[0]]=r[0],h[d[1]]=r[1],f.push(Xt(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const p2={constant:EM,linear:SM,log:X7,exp:K7,pow:J7,quad:BM,poly:Q7},sEe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function CN(e){ge.call(this,null,e)}CN.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(p2)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Le(CN,ge,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,s=qX(i,e.groupby),a=(e.groupby||[]).map(Rn),c=e.method||"linear",d=e.order==null?3:e.order,f=sEe(c,d),u=e.as||[Rn(e.x),Rn(e.y)],r=p2[c],h=[];let p=e.extent;Ve(p2,c)||be("Invalid regression method: "+c),p!=null&&c==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),s.forEach(_=>{if(_.length<=f){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=r(_,e.x,e.y,d);if(e.params){h.push(Xt({keys:_.dims,coef:b.coef,rSquared:b.rSquared}));return}const m=p||ao(_,e.x),E=B=>{const I={};for(let k=0;k<a.length;++k)I[a[k]]=_.dims[k];I[u[0]]=B[0],I[u[1]]=B[1],h.push(Xt(I))};c==="linear"||c==="constant"?m.forEach(B=>E([B,b.predict(B)])):tE(b.predict,m,25,200).forEach(E)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const rEe=Object.freeze(Object.defineProperty({__proto__:null,loess:RN,regression:CN},Symbol.toStringTag,{value:"Module"}));function LN(e){ge.call(this,null,e)}LN.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const aEe=[-1e5,-1e5,1e5,1e5];Le(LN,ge,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let s=e.size;s=s?[0,0,s[0],s[1]]:(s=e.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:aEe;const a=this.value=Ax.from(i,e.x,e.y).voronoi(s);for(let c=0,d=i.length;c<d;++c){const f=a.cellPolygon(c);i[c][n]=f&&!lEe(f)?oEe(f):null}return t.reflow(e.modified()).modifies(n)}});function oEe(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function lEe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const cEe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:LN},Symbol.toStringTag,{value:"Module"}));var LI=Math.PI/180,Vy=64,G0=2048;function dEe(){var e=[256,256],t,n,i,s,a,c,d,f=VX,u=[],r=Math.random,h={};h.layout=function(){for(var l=p(fc()),b=yEe((e[0]>>5)*e[1]),m=null,E=u.length,B=-1,I=[],k=u.map(x=>({text:t(x),font:n(x),style:s(x),weight:a(x),rotate:c(x),size:~~(i(x)+1e-14),padding:d(x),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:x})).sort((x,M)=>M.size-x.size);++B<E;){var F=k[B];F.x=e[0]*(r()+.5)>>1,F.y=e[1]*(r()+.5)>>1,fEe(l,F,k,B),F.hasText&&_(b,F,m)&&(I.push(F),m?hEe(m,F):m=[{x:F.x+F.x0,y:F.y+F.y0},{x:F.x+F.x1,y:F.y+F.y1}],F.x-=e[0]>>1,F.y-=e[1]>>1)}return I};function p(l){l.width=l.height=1;var b=Math.sqrt(l.getContext("2d").getImageData(0,0,1,1).data.length>>2);l.width=(Vy<<5)/b,l.height=G0/b;var m=l.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:b}}function _(l,b,m){for(var E=b.x,B=b.y,I=Math.hypot(e[0],e[1]),k=f(e),F=r()<.5?1:-1,x=-F,M,R,P;(M=k(x+=F))&&(R=~~M[0],P=~~M[1],!(Math.min(Math.abs(R),Math.abs(P))>=I));)if(b.x=E+R,b.y=B+P,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!m||!uEe(b,l,e[0]))&&(!m||_Ee(b,m))){for(var C=b.sprite,D=b.width>>5,j=e[0]>>5,$=b.x-(D<<4),W=$&127,H=32-W,G=b.y1-b.y0,z=(b.y+b.y0)*j+($>>5),q,ie=0;ie<G;ie++){q=0;for(var ce=0;ce<=D;ce++)l[z+ce]|=q<<H|(ce<D?(q=C[ie*D+ce])>>>W:0);z+=j}return b.sprite=null,!0}return!1}return h.words=function(l){return arguments.length?(u=l,h):u},h.size=function(l){return arguments.length?(e=[+l[0],+l[1]],h):e},h.font=function(l){return arguments.length?(n=yd(l),h):n},h.fontStyle=function(l){return arguments.length?(s=yd(l),h):s},h.fontWeight=function(l){return arguments.length?(a=yd(l),h):a},h.rotate=function(l){return arguments.length?(c=yd(l),h):c},h.text=function(l){return arguments.length?(t=yd(l),h):t},h.spiral=function(l){return arguments.length?(f=gEe[l]||l,h):f},h.fontSize=function(l){return arguments.length?(i=yd(l),h):i},h.padding=function(l){return arguments.length?(d=yd(l),h):d},h.random=function(l){return arguments.length?(r=l,h):r},h}function fEe(e,t,n,i){if(!t.sprite){var s=e.context,a=e.ratio;s.clearRect(0,0,(Vy<<5)/a,G0/a);var c=0,d=0,f=0,u=n.length,r,h,p,_,l;for(--i;++i<u;){if(t=n[i],s.save(),s.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,r=s.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*LI),m=Math.cos(t.rotate*LI),E=r*m,B=r*b,I=p*m,k=p*b;r=Math.max(Math.abs(E+k),Math.abs(E-k))+31>>5<<5,p=~~Math.max(Math.abs(B+I),Math.abs(B-I))}else r=r+31>>5<<5;if(p>f&&(f=p),c+r>=Vy<<5&&(c=0,d+=f,f=0),d+p>=G0)break;s.translate((c+(r>>1))/a,(d+(p>>1))/a),t.rotate&&s.rotate(t.rotate*LI),s.fillText(t.text,0,0),t.padding&&(s.lineWidth=2*t.padding,s.strokeText(t.text,0,0)),s.restore(),t.width=r,t.height=p,t.xoff=c,t.yoff=d,t.x1=r>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=r}for(var F=s.getImageData(0,0,(Vy<<5)/a,G0/a).data,x=[];--i>=0;)if(t=n[i],!!t.hasText){for(r=t.width,h=r>>5,p=t.y1-t.y0,_=0;_<p*h;_++)x[_]=0;if(c=t.xoff,c==null)return;d=t.yoff;var M=0,R=-1;for(l=0;l<p;l++){for(_=0;_<r;_++){var P=h*l+(_>>5),C=F[(d+l)*(Vy<<5)+(c+_)<<2]?1<<31-_%32:0;x[P]|=C,M|=C}M?R=l:(t.y0++,p--,l--,d++)}t.y1=t.y0+R,t.sprite=x.slice(0,(t.y1-t.y0)*h)}}}function uEe(e,t,n){n>>=5;for(var i=e.sprite,s=e.width>>5,a=e.x-(s<<4),c=a&127,d=32-c,f=e.y1-e.y0,u=(e.y+e.y0)*n+(a>>5),r,h=0;h<f;h++){r=0;for(var p=0;p<=s;p++)if((r<<d|(p<s?(r=i[h*s+p])>>>c:0))&t[u+p])return!0;u+=n}return!1}function hEe(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function _Ee(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function VX(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function pEe(e){var t=4,n=t*e[0]/e[1],i=0,s=0;return function(a){var c=a<0?-1:1;switch(Math.sqrt(1+4*c*a)-c&3){case 0:i+=n;break;case 1:s+=t;break;case 2:i-=n;break;default:s-=t;break}return[i,s]}}function yEe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function yd(e){return typeof e=="function"?e:function(){return e}}var gEe={archimedean:VX,rectangular:pEe};const GX=["x","y","font","fontSize","fontStyle","fontWeight","angle"],mEe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function PN(e){ge.call(this,dEe(),e)}PN.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:GX}]};Le(PN,ge,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&be("Wordcloud size dimensions must be non-zero.");function n(l){const b=e[l];return Bt(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||mEe.some(n)))return;const s=t.materialize(t.SOURCE).source,a=this.value,c=e.as||GX;let d=e.fontSize||14,f;if(Bt(d)?f=e.fontSizeRange:d=Ui(d),f){const l=d,b=Yt("sqrt")().domain(ao(s,l)).range(f);d=m=>b(l(m))}s.forEach(l=>{l[c[0]]=NaN,l[c[1]]=NaN,l[c[3]]=0});const u=a.words(s).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(d).random(vr).layout(),r=a.size(),h=r[0]>>1,p=r[1]>>1,_=u.length;for(let l=0,b,m;l<_;++l)b=u[l],m=b.datum,m[c[0]]=b.x+h,m[c[1]]=b.y+p,m[c[2]]=b.font,m[c[3]]=b.size,m[c[4]]=b.style,m[c[5]]=b.weight,m[c[6]]=b.rotate;return t.reflow(i).modifies(c)}});const wEe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:PN},Symbol.toStringTag,{value:"Module"})),bEe=e=>new Uint8Array(e),TEe=e=>new Uint16Array(e),ag=e=>new Uint32Array(e);function vEe(){let e=8,t=[],n=ag(0),i=Wb(0,e),s=Wb(0,e);return{data:()=>t,seen:()=>n=EEe(n,t.length),add(a){for(let c=0,d=t.length,f=a.length,u;c<f;++c)u=a[c],u._index=d++,t.push(u)},remove(a,c){const d=t.length,f=Array(d-a),u=t;let r,h,p;for(h=0;!c[h]&&h<d;++h)f[h]=t[h],u[h]=h;for(p=h;h<d;++h)r=t[h],c[h]?u[h]=-1:(u[h]=p,i[p]=i[h],s[p]=s[h],f[p]=r,r._index=p++),i[h]=0;return t=f,u},size:()=>t.length,curr:()=>i,prev:()=>s,reset:a=>s[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,c){i[a]|=c},clear(a,c){i[a]&=~c},resize(a,c){const d=i.length;(a>d||c>e)&&(e=Math.max(c,e),i=Wb(a,e,i),s=Wb(a,e))}}}function EEe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Wb(e,t,n){const i=(t<257?bEe:t<65537?TEe:ag)(e);return n&&i.set(n),i}function _j(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(s,a){const c=this,d=c.bisect(c.range,s.value),f=s.index,u=d[0],r=d[1],h=f.length;let p;for(p=0;p<u;++p)a[f[p]]|=i;for(p=r;p<h;++p)a[f[p]]|=i;return c}}}function pj(){let e=ag(0),t=[],n=0;function i(d,f,u){if(!f.length)return[];const r=n,h=f.length,p=ag(h);let _=Array(h),l,b,m;for(m=0;m<h;++m)_[m]=d(f[m]),p[m]=m;if(_=SEe(_,p),r)l=t,b=e,t=Array(r+h),e=ag(r+h),BEe(u,l,b,r,_,p,h,t,e);else{if(u>0)for(m=0;m<h;++m)p[m]+=u;t=_,e=p}return n=r+h,{index:p,value:_}}function s(d,f){const u=n;let r,h,p;for(h=0;!f[e[h]]&&h<u;++h);for(p=h;h<u;++h)f[r=e[h]]||(e[p]=r,t[p]=t[h],++p);n=u-d}function a(d){for(let f=0,u=n;f<u;++f)e[f]=d[e[f]]}function c(d,f){let u;return f?u=f.length:(f=t,u=n),[Xne(f,d[0],0,u),yc(f,d[1],0,u)]}return{insert:i,remove:s,bisect:c,reindex:a,index:()=>e,size:()=>n}}function SEe(e,t){return e.sort.call(t,(n,i)=>{const s=e[n],a=e[i];return s<a?-1:s>a?1:0}),Qne(e,t)}function BEe(e,t,n,i,s,a,c,d,f){let u=0,r=0,h;for(h=0;u<i&&r<c;++h)t[u]<s[r]?(d[h]=t[u],f[h]=n[u++]):(d[h]=s[r],f[h]=a[r++]+e);for(;u<i;++u,++h)d[h]=t[u],f[h]=n[u];for(;r<c;++r,++h)d[h]=s[r],f[h]=a[r]+e}function DN(e){ge.call(this,vEe(),e),this._indices=null,this._dims=null}DN.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Le(DN,ge,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,s=this._indices={},a=this._dims=[],c=i.length;let d=0,f,u;for(;d<c;++d)f=n[d].fname,u=s[f]||(s[f]=pj()),a.push(_j(u,d,i[d]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,s=e.query,a=this._indices,c=this._dims,d=this.value,f=d.curr(),u=d.prev(),r=d.all(),h=n.rem=n.add,p=n.mod,_=s.length,l={};let b,m,E,B,I,k,F,x,M;if(u.set(f),t.rem.length&&(I=this.remove(e,t,n)),t.add.length&&d.add(t.add),t.mod.length)for(k={},B=t.mod,F=0,x=B.length;F<x;++F)k[B[F]._index]=1;for(F=0;F<_;++F)M=i[F],(!c[F]||e.modified("fields",F)||t.modified(M.fields))&&(E=M.fname,(b=l[E])||(a[E]=m=pj(),l[E]=b=m.insert(M,t.source,0)),c[F]=_j(m,F,s[F]).onAdd(b,f));for(F=0,x=d.data().length;F<x;++F)I[F]||(u[F]!==f[F]?h.push(F):k[F]&&f[F]!==r&&p.push(F));return d.mask=(1<<_)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let s=0;return t.rem.length&&(this.remove(e,t,n),s|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(s|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),s|=(1<<i)-1),t.mod.length&&(this.modify(t,n),s|=(1<<i)-1),this.value.mask=s,n},insert(e,t,n){const i=t.add,s=this.value,a=this._dims,c=this._indices,d=e.fields,f={},u=n.add,r=s.size()+i.length,h=a.length;let p=s.size(),_,l,b;s.resize(r,h),s.add(i);const m=s.curr(),E=s.prev(),B=s.all();for(_=0;_<h;++_)l=d[_].fname,b=f[l]||(f[l]=c[l].insert(d[_],i,p)),a[_].onAdd(b,m);for(;p<r;++p)E[p]=B,m[p]!==B&&u.push(p)},modify(e,t){const n=t.mod,i=this.value,s=i.curr(),a=i.all(),c=e.mod;let d,f,u;for(d=0,f=c.length;d<f;++d)u=c[d]._index,s[u]!==a&&n.push(u)},remove(e,t,n){const i=this._indices,s=this.value,a=s.curr(),c=s.prev(),d=s.all(),f={},u=n.rem,r=t.rem;let h,p,_,l;for(h=0,p=r.length;h<p;++h)_=r[h]._index,f[_]=1,c[_]=l=a[_],a[_]=d,l!==d&&u.push(_);for(_ in i)i[_].remove(p,f);return this.reindex(t,p,f),f},reindex(e,t,n){const i=this._indices,s=this.value;e.runAfter(()=>{const a=s.remove(t,n);for(const c in i)i[c].reindex(a)})},update(e,t,n){const i=this._dims,s=e.query,a=t.stamp,c=i.length;let d=0,f,u;for(n.filters=0,u=0;u<c;++u)e.modified("query",u)&&(f=u,++d);if(d===1)d=i[f].one,this.incrementOne(i[f],s[f],n.add,n.rem);else for(u=0,d=0;u<c;++u)e.modified("query",u)&&(d|=i[u].one,this.incrementAll(i[u],s[u],a,n.add),n.rem=n.add);return d},incrementAll(e,t,n,i){const s=this.value,a=s.seen(),c=s.curr(),d=s.prev(),f=e.index(),u=e.bisect(e.range),r=e.bisect(t),h=r[0],p=r[1],_=u[0],l=u[1],b=e.one;let m,E,B;if(h<_)for(m=h,E=Math.min(_,p);m<E;++m)B=f[m],a[B]!==n&&(d[B]=c[B],a[B]=n,i.push(B)),c[B]^=b;else if(h>_)for(m=_,E=Math.min(h,l);m<E;++m)B=f[m],a[B]!==n&&(d[B]=c[B],a[B]=n,i.push(B)),c[B]^=b;if(p>l)for(m=Math.max(h,l),E=p;m<E;++m)B=f[m],a[B]!==n&&(d[B]=c[B],a[B]=n,i.push(B)),c[B]^=b;else if(p<l)for(m=Math.max(_,p),E=l;m<E;++m)B=f[m],a[B]!==n&&(d[B]=c[B],a[B]=n,i.push(B)),c[B]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const s=this.value,a=s.curr(),c=e.index(),d=e.bisect(e.range),f=e.bisect(t),u=f[0],r=f[1],h=d[0],p=d[1],_=e.one;let l,b,m;if(u<h)for(l=u,b=Math.min(h,r);l<b;++l)m=c[l],a[m]^=_,n.push(m);else if(u>h)for(l=h,b=Math.min(u,p);l<b;++l)m=c[l],a[m]^=_,i.push(m);if(r>p)for(l=Math.max(u,p),b=r;l<b;++l)m=c[l],a[m]^=_,n.push(m);else if(r<p)for(l=Math.max(h,r),b=p;l<b;++l)m=c[l],a[m]^=_,i.push(m);e.range=t.slice()}});function UN(e){ge.call(this,null,e)}UN.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Le(UN,ge,{transform(e,t){const n=~(e.ignore||0),i=e.filter,s=i.mask;if(!(s&n))return t.StopPropagation;const a=t.fork(t.ALL),c=i.data(),d=i.curr(),f=i.prev(),u=r=>d[r]&n?null:c[r];return a.filter(a.MOD,u),s&s-1?(a.filter(a.ADD,r=>{const h=d[r]&n;return!h&&h^f[r]&n?c[r]:null}),a.filter(a.REM,r=>{const h=d[r]&n;return h&&!(h^(h^f[r]&n))?c[r]:null})):(a.filter(a.ADD,u),a.filter(a.REM,r=>(d[r]&n)===s?c[r]:null)),a.filter(a.SOURCE,r=>u(r._index))}});const IEe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:DN,resolvefilter:UN},Symbol.toStringTag,{value:"Module"})),FEe="RawCode",hf="Literal",kEe="Property",xEe="Identifier",MEe="ArrayExpression",AEe="BinaryExpression",HX="CallExpression",OEe="ConditionalExpression",NEe="LogicalExpression",REe="MemberExpression",CEe="ObjectExpression",LEe="UnaryExpression";function ga(e){this.type=e}ga.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=PEe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function PEe(e){switch(e.type){case MEe:return e.elements;case AEe:case NEe:return[e.left,e.right];case HX:return[e.callee].concat(e.arguments);case OEe:return[e.test,e.consequent,e.alternate];case REe:return[e.object,e.property];case CEe:return e.properties;case kEe:return[e.key,e.value];case LEe:return[e.argument];case xEe:case hf:case FEe:default:return[]}}var wo,We,we,Ci,sn,qE=1,Lm=2,_f=3,Gc=4,VE=5,Df=6,ps=7,Pm=8,DEe=9;wo={};wo[qE]="Boolean";wo[Lm]="<end>";wo[_f]="Identifier";wo[Gc]="Keyword";wo[VE]="Null";wo[Df]="Numeric";wo[ps]="Punctuator";wo[Pm]="String";wo[DEe]="RegularExpression";var UEe="ArrayExpression",jEe="BinaryExpression",$Ee="CallExpression",zEe="ConditionalExpression",WX="Identifier",qEe="Literal",VEe="LogicalExpression",GEe="MemberExpression",HEe="ObjectExpression",WEe="Property",YEe="UnaryExpression",ai="Unexpected token %0",XEe="Unexpected number",KEe="Unexpected string",JEe="Unexpected identifier",QEe="Unexpected reserved word",ZEe="Unexpected end of input",y2="Invalid regular expression",PI="Invalid regular expression: missing /",YX="Octal literals are not allowed in strict mode.",eSe="Duplicate data property in object literal not allowed in strict mode",mi="ILLEGAL",Pg="Disabled.",tSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),nSe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function GE(e,t){if(!e)throw new Error("ASSERT: "+t)}function Wo(e){return e>=48&&e<=57}function jN(e){return"0123456789abcdefABCDEF".includes(e)}function og(e){return"01234567".includes(e)}function iSe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Dg(e){return e===10||e===13||e===8232||e===8233}function Dm(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&tSe.test(String.fromCharCode(e))}function e1(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&nSe.test(String.fromCharCode(e))}const sSe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function XX(){for(;we<Ci;){const e=We.charCodeAt(we);if(iSe(e)||Dg(e))++we;else break}}function g2(e){var t,n,i,s=0;for(n=e==="u"?4:2,t=0;t<n;++t)we<Ci&&jN(We[we])?(i=We[we++],s=s*16+"0123456789abcdef".indexOf(i.toLowerCase())):Gt({},ai,mi);return String.fromCharCode(s)}function rSe(){var e,t,n,i;for(e=We[we],t=0,e==="}"&&Gt({},ai,mi);we<Ci&&(e=We[we++],!!jN(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Gt({},ai,mi),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function KX(){var e,t;for(e=We.charCodeAt(we++),t=String.fromCharCode(e),e===92&&(We.charCodeAt(we)!==117&&Gt({},ai,mi),++we,e=g2("u"),(!e||e==="\\"||!Dm(e.charCodeAt(0)))&&Gt({},ai,mi),t=e);we<Ci&&(e=We.charCodeAt(we),!!e1(e));)++we,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),We.charCodeAt(we)!==117&&Gt({},ai,mi),++we,e=g2("u"),(!e||e==="\\"||!e1(e.charCodeAt(0)))&&Gt({},ai,mi),t+=e);return t}function aSe(){var e,t;for(e=we++;we<Ci;){if(t=We.charCodeAt(we),t===92)return we=e,KX();if(e1(t))++we;else break}return We.slice(e,we)}function oSe(){var e,t,n;return e=we,t=We.charCodeAt(we)===92?KX():aSe(),t.length===1?n=_f:sSe.hasOwnProperty(t)?n=Gc:t==="null"?n=VE:t==="true"||t==="false"?n=qE:n=_f,{type:n,value:t,start:e,end:we}}function DI(){var e=we,t=We.charCodeAt(we),n,i=We[we],s,a,c;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++we,{type:ps,value:String.fromCharCode(t),start:e,end:we};default:if(n=We.charCodeAt(we+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return we+=2,{type:ps,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:we};case 33:case 61:return we+=2,We.charCodeAt(we)===61&&++we,{type:ps,value:We.slice(e,we),start:e,end:we}}}if(c=We.substr(we,4),c===">>>=")return we+=4,{type:ps,value:c,start:e,end:we};if(a=c.substr(0,3),a===">>>"||a==="<<="||a===">>=")return we+=3,{type:ps,value:a,start:e,end:we};if(s=a.substr(0,2),i===s[1]&&"+-<>&|".includes(i)||s==="=>")return we+=2,{type:ps,value:s,start:e,end:we};if(s==="//"&&Gt({},ai,mi),"<>=!+-*%&|^/".includes(i))return++we,{type:ps,value:i,start:e,end:we};Gt({},ai,mi)}function lSe(e){let t="";for(;we<Ci&&jN(We[we]);)t+=We[we++];return t.length===0&&Gt({},ai,mi),Dm(We.charCodeAt(we))&&Gt({},ai,mi),{type:Df,value:parseInt("0x"+t,16),start:e,end:we}}function cSe(e){let t="0"+We[we++];for(;we<Ci&&og(We[we]);)t+=We[we++];return(Dm(We.charCodeAt(we))||Wo(We.charCodeAt(we)))&&Gt({},ai,mi),{type:Df,value:parseInt(t,8),octal:!0,start:e,end:we}}function yj(){var e,t,n;if(n=We[we],GE(Wo(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=we,e="",n!=="."){if(e=We[we++],n=We[we],e==="0"){if(n==="x"||n==="X")return++we,lSe(t);if(og(n))return cSe(t);n&&Wo(n.charCodeAt(0))&&Gt({},ai,mi)}for(;Wo(We.charCodeAt(we));)e+=We[we++];n=We[we]}if(n==="."){for(e+=We[we++];Wo(We.charCodeAt(we));)e+=We[we++];n=We[we]}if(n==="e"||n==="E")if(e+=We[we++],n=We[we],(n==="+"||n==="-")&&(e+=We[we++]),Wo(We.charCodeAt(we)))for(;Wo(We.charCodeAt(we));)e+=We[we++];else Gt({},ai,mi);return Dm(We.charCodeAt(we))&&Gt({},ai,mi),{type:Df,value:parseFloat(e),start:t,end:we}}function dSe(){var e="",t,n,i,s,a=!1;for(t=We[we],GE(t==="'"||t==='"',"String literal must starts with a quote"),n=we,++we;we<Ci;)if(i=We[we++],i===t){t="";break}else if(i==="\\")if(i=We[we++],!i||!Dg(i.charCodeAt(0)))switch(i){case"u":case"x":We[we]==="{"?(++we,e+=rSe()):e+=g2(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:og(i)?(s="01234567".indexOf(i),s!==0&&(a=!0),we<Ci&&og(We[we])&&(a=!0,s=s*8+"01234567".indexOf(We[we++]),"0123".includes(i)&&we<Ci&&og(We[we])&&(s=s*8+"01234567".indexOf(We[we++]))),e+=String.fromCharCode(s)):e+=i;break}else i==="\r"&&We[we]===`
`&&++we;else{if(Dg(i.charCodeAt(0)))break;e+=i}return t!==""&&Gt({},ai,mi),{type:Pm,value:e,octal:a,start:n,end:we}}function fSe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,s)=>{if(parseInt(s,16)<=1114111)return"x";Gt({},y2)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Gt({},y2)}try{return new RegExp(e,t)}catch{return null}}function uSe(){var e,t,n,i,s;for(e=We[we],GE(e==="/","Regular expression literal must start with a slash"),t=We[we++],n=!1,i=!1;we<Ci;)if(e=We[we++],t+=e,e==="\\")e=We[we++],Dg(e.charCodeAt(0))&&Gt({},PI),t+=e;else if(Dg(e.charCodeAt(0)))Gt({},PI);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||Gt({},PI),s=t.substr(1,t.length-2),{value:s,literal:t}}function hSe(){var e,t,n;for(t="",n="";we<Ci&&(e=We[we],!!e1(e.charCodeAt(0)));)++we,e==="\\"&&we<Ci?Gt({},ai,mi):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Gt({},y2,n),{value:n,literal:t}}function _Se(){var e,t,n,i;return sn=null,XX(),e=we,t=uSe(),n=hSe(),i=fSe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:we}}function pSe(e){return e.type===_f||e.type===Gc||e.type===qE||e.type===VE}function JX(){if(XX(),we>=Ci)return{type:Lm,start:we,end:we};const e=We.charCodeAt(we);return Dm(e)?oSe():e===40||e===41||e===59?DI():e===39||e===34?dSe():e===46?Wo(We.charCodeAt(we+1))?yj():DI():Wo(e)?yj():DI()}function ms(){const e=sn;return we=e.end,sn=JX(),we=e.end,e}function QX(){const e=we;sn=JX(),we=e}function ySe(e){const t=new ga(UEe);return t.elements=e,t}function gj(e,t,n){const i=new ga(e==="||"||e==="&&"?VEe:jEe);return i.operator=e,i.left=t,i.right=n,i}function gSe(e,t){const n=new ga($Ee);return n.callee=e,n.arguments=t,n}function mSe(e,t,n){const i=new ga(zEe);return i.test=e,i.consequent=t,i.alternate=n,i}function $N(e){const t=new ga(WX);return t.name=e,t}function Gy(e){const t=new ga(qEe);return t.value=e.value,t.raw=We.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function mj(e,t,n){const i=new ga(GEe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function wSe(e){const t=new ga(HEe);return t.properties=e,t}function wj(e,t,n){const i=new ga(WEe);return i.key=t,i.value=n,i.kind=e,i}function bSe(e,t){const n=new ga(YEe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Gt(e,t){var n,i=Array.prototype.slice.call(arguments,2),s=t.replace(/%(\d)/g,(a,c)=>(GE(c<i.length,"Message reference must be in range"),i[c]));throw n=new Error(s),n.index=we,n.description=s,n}function HE(e){e.type===Lm&&Gt(e,ZEe),e.type===Df&&Gt(e,XEe),e.type===Pm&&Gt(e,KEe),e.type===_f&&Gt(e,JEe),e.type===Gc&&Gt(e,QEe),Gt(e,ai,e.value)}function Li(e){const t=ms();(t.type!==ps||t.value!==e)&&HE(t)}function gn(e){return sn.type===ps&&sn.value===e}function UI(e){return sn.type===Gc&&sn.value===e}function TSe(){const e=[];for(we=sn.start,Li("[");!gn("]");)gn(",")?(ms(),e.push(null)):(e.push(pf()),gn("]")||Li(","));return ms(),ySe(e)}function bj(){we=sn.start;const e=ms();return e.type===Pm||e.type===Df?(e.octal&&Gt(e,YX),Gy(e)):$N(e.value)}function vSe(){var e,t,n,i;if(we=sn.start,e=sn,e.type===_f)return n=bj(),Li(":"),i=pf(),wj("init",n,i);if(e.type===Lm||e.type===ps)HE(e);else return t=bj(),Li(":"),i=pf(),wj("init",t,i)}function ESe(){var e=[],t,n,i,s={},a=String;for(we=sn.start,Li("{");!gn("}");)t=vSe(),t.key.type===WX?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(s,i)?Gt({},eSe):s[i]=!0,e.push(t),gn("}")||Li(",");return Li("}"),wSe(e)}function SSe(){Li("(");const e=zN();return Li(")"),e}const BSe={if:1};function ISe(){var e,t,n;if(gn("("))return SSe();if(gn("["))return TSe();if(gn("{"))return ESe();if(e=sn.type,we=sn.start,e===_f||BSe[sn.value])n=$N(ms().value);else if(e===Pm||e===Df)sn.octal&&Gt(sn,YX),n=Gy(ms());else{if(e===Gc)throw new Error(Pg);e===qE?(t=ms(),t.value=t.value==="true",n=Gy(t)):e===VE?(t=ms(),t.value=null,n=Gy(t)):gn("/")||gn("/=")?(n=Gy(_Se()),QX()):HE(ms())}return n}function FSe(){const e=[];if(Li("("),!gn(")"))for(;we<Ci&&(e.push(pf()),!gn(")"));)Li(",");return Li(")"),e}function kSe(){we=sn.start;const e=ms();return pSe(e)||HE(e),$N(e.value)}function xSe(){return Li("."),kSe()}function MSe(){Li("[");const e=zN();return Li("]"),e}function ASe(){var e,t,n;for(e=ISe();;)if(gn("."))n=xSe(),e=mj(".",e,n);else if(gn("("))t=FSe(),e=gSe(e,t);else if(gn("["))n=MSe(),e=mj("[",e,n);else break;return e}function Tj(){const e=ASe();if(sn.type===ps&&(gn("++")||gn("--")))throw new Error(Pg);return e}function H0(){var e,t;if(sn.type!==ps&&sn.type!==Gc)t=Tj();else{if(gn("++")||gn("--"))throw new Error(Pg);if(gn("+")||gn("-")||gn("~")||gn("!"))e=ms(),t=H0(),t=bSe(e.value,t);else{if(UI("delete")||UI("void")||UI("typeof"))throw new Error(Pg);t=Tj()}}return t}function vj(e){let t=0;if(e.type!==ps&&e.type!==Gc)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function OSe(){var e,t,n,i,s,a,c,d,f,u;if(e=sn,f=H0(),i=sn,s=vj(i),s===0)return f;for(i.prec=s,ms(),t=[e,sn],c=H0(),a=[f,i,c];(s=vj(sn))>0;){for(;a.length>2&&s<=a[a.length-2].prec;)c=a.pop(),d=a.pop().value,f=a.pop(),t.pop(),n=gj(d,f,c),a.push(n);i=ms(),i.prec=s,a.push(i),t.push(sn),n=H0(),a.push(n)}for(u=a.length-1,n=a[u],t.pop();u>1;)t.pop(),n=gj(a[u-1].value,a[u-2],n),u-=2;return n}function pf(){var e,t,n;return e=OSe(),gn("?")&&(ms(),t=pf(),Li(":"),n=pf(),e=mSe(e,t,n)),e}function zN(){const e=pf();if(gn(","))throw new Error(Pg);return e}function qN(e){We=e,we=0,Ci=We.length,sn=null,QX();const t=zN();if(sn.type!==Lm)throw new Error("Unexpect token after expression.");return t}var ZX={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function eK(e){function t(c,d,f,u){let r=e(d[0]);return f&&(r=f+"("+r+")",f.lastIndexOf("new ",0)===0&&(r="("+r+")")),r+"."+c+(u<0?"":u===0?"()":"("+d.slice(1).map(e).join(",")+")")}function n(c,d,f){return u=>t(c,u,d,f)}const i="new Date",s="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(c){c.length<3&&be("Missing arguments to clamp function."),c.length>3&&be("Too many arguments to clamp function.");const d=c.map(e);return"Math.max("+d[1]+", Math.min("+d[2]+","+d[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",s,0),lower:n("toLowerCase",s,0),substring:n("substring",s),split:n("split",s),trim:n("trim",s,0),regexp:a,test:n("test",a),if:function(c){c.length<3&&be("Missing arguments to if function."),c.length>3&&be("Too many arguments to if function.");const d=c.map(e);return"("+d[0]+"?"+d[1]+":"+d[2]+")"}}}function NSe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function tK(e){e=e||{};const t=e.allowed?ia(e.allowed):{},n=e.forbidden?ia(e.forbidden):{},i=e.constants||ZX,s=(e.functions||eK)(h),a=e.globalvar,c=e.fieldvar,d=Bt(a)?a:l=>`${a}["${l}"]`;let f={},u={},r=0;function h(l){if(ze(l))return l;const b=p[l.type];return b==null&&be("Unsupported type: "+l.type),b(l)}const p={Literal:l=>l.raw,Identifier:l=>{const b=l.name;return r>0?b:Ve(n,b)?be("Illegal identifier: "+b):Ve(i,b)?i[b]:Ve(t,b)?b:(f[b]=1,d(b))},MemberExpression:l=>{const b=!l.computed,m=h(l.object);b&&(r+=1);const E=h(l.property);return m===c&&(u[NSe(E)]=1),b&&(r-=1),m+(b?"."+E:"["+E+"]")},CallExpression:l=>{l.callee.type!=="Identifier"&&be("Illegal callee type: "+l.callee.type);const b=l.callee.name,m=l.arguments,E=Ve(s,b)&&s[b];return E||be("Unrecognized function: "+b),Bt(E)?E(m):E+"("+m.map(h).join(",")+")"},ArrayExpression:l=>"["+l.elements.map(h).join(",")+"]",BinaryExpression:l=>"("+h(l.left)+" "+l.operator+" "+h(l.right)+")",UnaryExpression:l=>"("+l.operator+h(l.argument)+")",ConditionalExpression:l=>"("+h(l.test)+"?"+h(l.consequent)+":"+h(l.alternate)+")",LogicalExpression:l=>"("+h(l.left)+l.operator+h(l.right)+")",ObjectExpression:l=>"{"+l.properties.map(h).join(",")+"}",Property:l=>{r+=1;const b=h(l.key);return r-=1,b+":"+h(l.value)}};function _(l){const b={code:h(l),globals:Object.keys(f),fields:Object.keys(u)};return f={},u={},b}return _.functions=s,_.constants=i,_}const Ej=Symbol("vega_selection_getter");function nK(e){return(!e.getter||!e.getter[Ej])&&(e.getter=Br(e.field),e.getter[Ej]=!0),e.getter}const VN="intersect",Sj="union",RSe="vlMulti",CSe="vlPoint",Bj="or",LSe="and",La="_vgsid_",Ug=Br(La),PSe="E",DSe="R",USe="R-E",jSe="R-LE",$Se="R-RE",t1="index:unit";function Ij(e,t){for(var n=t.fields,i=t.values,s=n.length,a=0,c,d;a<s;++a)if(d=n[a],c=nK(d)(e),cc(c)&&(c=Mi(c)),cc(i[a])&&(i[a]=Mi(i[a])),Te(i[a])&&cc(i[a][0])&&(i[a]=i[a].map(Mi)),d.type===PSe){if(Te(i[a])?i[a].indexOf(c)<0:c!==i[a])return!1}else if(d.type===DSe){if(!Nu(c,i[a]))return!1}else if(d.type===$Se){if(!Nu(c,i[a],!0,!1))return!1}else if(d.type===USe){if(!Nu(c,i[a],!1,!1))return!1}else if(d.type===jSe&&!Nu(c,i[a],!1,!0))return!1;return!0}function zSe(e,t,n){for(var i=this.context.data[e],s=i?i.values.value:[],a=i?i[t1]&&i[t1].value:void 0,c=n===VN,d=s.length,f=0,u,r,h,p,_;f<d;++f)if(u=s[f],a&&c){if(r=r||{},h=r[p=u.unit]||0,h===-1)continue;if(_=Ij(t,u),r[p]=_?-1:++h,_&&a.size===1)return!0;if(!_&&h===a.get(p).count)return!1}else if(_=Ij(t,u),c^_)return _;return d&&c}const iK=Qh(Ug),qSe=iK.left,VSe=iK.right;function GSe(e,t,n){const i=this.context.data[e],s=i?i.values.value:[],a=i?i[t1]&&i[t1].value:void 0,c=n===VN,d=Ug(t),f=qSe(s,d);if(f===s.length||Ug(s[f])!==d)return!1;if(a&&c){if(a.size===1)return!0;if(VSe(s,d)-f<a.size)return!1}return!0}function HSe(e,t){return e.map(n=>St(t.fields?{values:t.fields.map(i=>nK(i)(n.datum))}:{[La]:Ug(n.datum)},t))}function WSe(e,t,n,i){for(var s=this.context.data[e],a=s?s.values.value:[],c={},d={},f={},u,r,h,p,_,l,b,m,E,B,I=a.length,k=0,F,x;k<I;++k)if(u=a[k],p=u.unit,r=u.fields,h=u.values,r&&h){for(F=0,x=r.length;F<x;++F)_=r[F],b=c[_.field]||(c[_.field]={}),m=b[p]||(b[p]=[]),f[_.field]=E=_.type.charAt(0),B=jI[`${E}_union`],b[p]=B(m,$e(h[F]));n&&(m=d[p]||(d[p]=[]),m.push($e(h).reduce((M,R,P)=>(M[r[P].field]=R,M),{})))}else _=La,l=Ug(u),b=c[_]||(c[_]={}),m=b[p]||(b[p]=[]),m.push(l),n&&(m=d[p]||(d[p]=[]),m.push({[La]:l}));if(t=t||Sj,c[La]?c[La]=jI[`${La}_${t}`](...Object.values(c[La])):Object.keys(c).forEach(M=>{c[M]=Object.keys(c[M]).map(R=>c[M][R]).reduce((R,P)=>R===void 0?P:jI[`${f[M]}_${t}`](R,P))}),a=Object.keys(d),n&&a.length){const M=i?CSe:RSe;c[M]=t===Sj?{[Bj]:a.reduce((R,P)=>(R.push(...d[P]),R),[])}:{[LSe]:a.map(R=>({[Bj]:d[R]}))}}return c}var jI={[`${La}_union`]:oie,[`${La}_intersect`]:rie,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Mi(t[0]),i=Mi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Mi(t[0]),i=Mi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const YSe=":",XSe="@";function GN(e,t,n,i){t[0].type!==hf&&be("First argument to selection functions must be a string literal.");const s=t[0].value,a=t.length>=2&&Pt(t).value,c="unit",d=XSe+c,f=YSe+s;a===VN&&!Ve(i,d)&&(i[d]=n.getData(s).indataRef(n,c)),Ve(i,f)||(i[f]=n.getData(s).tuplesRef())}function sK(e){const t=this.context.data[e];return t?t.values.value:[]}function KSe(e,t,n){const i=this.context.data[e]["index:"+t],s=i?i.value.get(n):void 0;return s&&s.count}function JSe(e,t){const n=this.context.dataflow,i=this.context.data[e],s=i.input;return n.pulse(s,n.changeset().remove(Ir).insert(t)),1}function QSe(e,t,n){if(e){const i=this.context.dataflow,s=e.mark.source;i.pulse(s,i.changeset().encode(e,t))}return n!==void 0?n:e}const Um=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},ZSe=Um("format"),rK=Um("timeFormat"),eBe=Um("utcFormat"),tBe=Um("timeParse"),nBe=Um("utcParse"),Yb=new Date(2e3,0,1);function WE(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Yb.setYear(2e3),Yb.setMonth(e),Yb.setDate(t),rK.call(this,Yb,n))}function iBe(e){return WE.call(this,e,1,"%B")}function sBe(e){return WE.call(this,e,1,"%b")}function rBe(e){return WE.call(this,0,2+e,"%A")}function aBe(e){return WE.call(this,0,2+e,"%a")}const oBe=":",lBe="@",m2="%",aK="$";function HN(e,t,n,i){t[0].type!==hf&&be("First argument to data functions must be a string literal.");const s=t[0].value,a=oBe+s;if(!Ve(a,i))try{i[a]=n.getData(s).tuplesRef()}catch{}}function cBe(e,t,n,i){t[0].type!==hf&&be("First argument to indata must be a string literal."),t[1].type!==hf&&be("Second argument to indata must be a string literal.");const s=t[0].value,a=t[1].value,c=lBe+a;Ve(c,i)||(i[c]=n.getData(s).indataRef(n,a))}function ns(e,t,n,i){if(t[0].type===hf)Fj(n,i,t[0].value);else for(e in n.scales)Fj(n,i,e)}function Fj(e,t,n){const i=m2+n;if(!Ve(t,i))try{t[i]=e.scaleRef(n)}catch{}}function bo(e,t){if(Bt(e))return e;if(ze(e)){const n=t.scales[e];return n&&Cwe(n.value)?n.value:void 0}}function dBe(e,t,n){t.__bandwidth=s=>s&&s.bandwidth?s.bandwidth():0,n._bandwidth=ns,n._range=ns,n._scale=ns;const i=s=>"_["+(s.type===hf?Re(m2+s.value):Re(m2)+"+"+e(s))+"]";return{_bandwidth:s=>`this.__bandwidth(${i(s[0])})`,_range:s=>`${i(s[0])}.range()`,_scale:s=>`${i(s[0])}(${e(s[1])})`}}function WN(e,t){return function(n,i,s){if(n){const a=bo(n,(s||this).context);return a&&a.path[e](i)}else return t(i)}}const fBe=WN("area",tle),uBe=WN("bounds",rle),hBe=WN("centroid",fle);function _Be(e,t){const n=bo(e,(t||this).context);return n&&n.scale()}function pBe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function YN(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function yBe(){return YN(this.context.dataflow,"warn",arguments)}function gBe(){return YN(this.context.dataflow,"info",arguments)}function mBe(){return YN(this.context.dataflow,"debug",arguments)}function $I(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function w2(e){const t=mc(e),n=$I(t.r),i=$I(t.g),s=$I(t.b);return .2126*n+.7152*i+.0722*s}function wBe(e,t){const n=w2(e),i=w2(t),s=Math.max(n,i),a=Math.min(n,i);return(s+.05)/(a+.05)}function bBe(){const e=[].slice.call(arguments);return e.unshift({}),St(...e)}function oK(e,t){return e===t||e!==e&&t!==t?!0:Te(e)?Te(t)&&e.length===t.length?TBe(e,t):!1:je(e)&&je(t)?lK(e,t):!1}function TBe(e,t){for(let n=0,i=e.length;n<i;++n)if(!oK(e[n],t[n]))return!1;return!0}function lK(e,t){for(const n in e)if(!oK(e[n],t[n]))return!1;return!0}function kj(e){return t=>lK(e,t)}function vBe(e,t,n,i,s,a){const c=this.context.dataflow,d=this.context.data[e],f=d.input,u=c.stamp();let r=d.changes,h,p;if(c._trigger===!1||!(f.value.length||t||i))return 0;if((!r||r.stamp<u)&&(d.changes=r=c.changeset(),r.stamp=u,c.runAfter(()=>{d.modified=!0,c.pulse(f,r).run()},!0,1)),n&&(h=n===!0?Ir:Te(n)||vE(n)?n:kj(n),r.remove(h)),t&&r.insert(t),i&&(h=kj(i),f.value.some(h)?r.remove(h):r.insert(i)),s)for(p in a)r.modify(s,p,a[p]);return 1}function EBe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function SBe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const xj={};function BBe(e,t){const n=xj[t]||(xj[t]=Br(t));return Te(e)?e.map(n):n(e)}function XN(e){return Te(e)||ArrayBuffer.isView(e)?e:null}function KN(e){return XN(e)||(ze(e)?e:null)}function IBe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return XN(e).join(...n)}function FBe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return KN(e).indexOf(...n)}function kBe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return KN(e).lastIndexOf(...n)}function xBe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return KN(e).slice(...n)}function MBe(e,t,n){return Bt(n)&&be("Function argument passed to replace."),String(e).replace(t,n)}function ABe(e){return XN(e).slice().reverse()}function OBe(e,t,n){return bO(e||0,t||0,n||0)}function NBe(e,t){const n=bo(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function RBe(e,t){const n=bo(e,(t||this).context);return n?n.copy():void 0}function CBe(e,t){const n=bo(e,(t||this).context);return n?n.domain():[]}function LBe(e,t,n){const i=bo(e,(n||this).context);return i?Te(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function PBe(e,t){const n=bo(e,(t||this).context);return n&&n.range?n.range():[]}function DBe(e,t,n){const i=bo(e,(n||this).context);return i?i(t):void 0}function UBe(e,t,n,i,s){e=bo(e,(s||this).context);const a=QW(t,n);let c=e.domain(),d=c[0],f=Pt(c),u=Di;return f-d?u=jW(e,d,f):e=(e.interpolator?Yt("sequential")().interpolator(e.interpolator()):Yt("linear")().interpolate(e.interpolate()).range(e.range())).domain([d=0,f=1]),e.ticks&&(c=e.ticks(+i||15),d!==c[0]&&c.unshift(d),f!==Pt(c)&&c.push(f)),c.forEach(r=>a.stop(u(r),e(r))),a}function jBe(e,t,n){const i=bo(e,(n||this).context);return function(s){return i?i.path.context(s)(t):""}}function $Be(e){let t=null;return function(n){return n?Ng(n,t=t||Sh(e)):e}}const cK=e=>e.data;function dK(e,t){const n=sK.call(t,e);return n.root&&n.root.lookup||{}}function zBe(e,t,n){const i=dK(e,this),s=i[t],a=i[n];return s&&a?s.path(a).map(cK):void 0}function qBe(e,t){const n=dK(e,this)[t];return n?n.ancestors().map(cK):void 0}const fK=()=>typeof window<"u"&&window||null;function VBe(){const e=fK();return e?e.screen:{}}function GBe(){const e=fK();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function HBe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function uK(e,t,n){if(!e)return[];const[i,s]=e,a=new Gn().set(i[0],i[1],s[0],s[1]),c=n||this.context.dataflow.scenegraph().root;return XY(c,a,WBe(t))}function WBe(e){let t=null;if(e){const n=$e(e.marktype),i=$e(e.markname);t=s=>(!n.length||n.some(a=>s.marktype===a))&&(!i.length||i.some(a=>s.name===a))}return t}function YBe(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=$e(e);const s=e[e.length-1];return s===void 0||Math.hypot(s[0]-t,s[1]-n)>i?[...e,[t,n]]:e}function XBe(e){return $e(e).reduce((t,n,i)=>{let[s,a]=n;return t+=i==0?`M ${s},${a} `:i===e.length-1?" Z":`L ${s},${a} `},"")}function KBe(e,t,n){const{x:i,y:s,mark:a}=n,c=new Gn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[f,u]of t)f<c.x1&&(c.x1=f),f>c.x2&&(c.x2=f),u<c.y1&&(c.y1=u),u>c.y2&&(c.y2=u);return c.translate(i,s),uK([[c.x1,c.y1],[c.x2,c.y2]],e,a).filter(f=>JBe(f.x,f.y,t))}function JBe(e,t,n){let i=0;for(let s=0,a=n.length-1;s<n.length;a=s++){const[c,d]=n[a],[f,u]=n[s];u>t!=d>t&&e<(c-f)*(t-u)/(d-u)+f&&i++}return i&1}const jg={random(){return vr()},cumulativeNormal:Q1,cumulativeLogNormal:gM,cumulativeUniform:TM,densityNormal:uM,densityLogNormal:yM,densityUniform:bM,quantileNormal:Z1,quantileLogNormal:mM,quantileUniform:vM,sampleNormal:J1,sampleLogNormal:pM,sampleUniform:wM,isArray:Te,isBoolean:qc,isDate:cc,isDefined(e){return e!==void 0},isNumber:Wt,isObject:je,isRegExp:cH,isString:ze,isTuple:vE,isValid(e){return e!=null&&e===e},toBoolean:LA,toDate(e){return PA(e)},toNumber:Mi,toString:DA,indexof:FBe,join:IBe,lastindexof:kBe,replace:MBe,reverse:ABe,slice:xBe,flush:oH,lerp:dH,merge:bBe,pad:hH,peek:Pt,pluck:BBe,span:Tm,inrange:Nu,truncate:_H,rgb:mc,lab:mT,hcl:wT,hsl:yT,luminance:w2,contrast:wBe,sequence:Hs,format:ZSe,utcFormat:eBe,utcParse:nBe,utcOffset:kH,utcSequence:AH,timeFormat:rK,timeParse:tBe,timeOffset:FH,timeSequence:MH,timeUnitSpecifier:yH,monthFormat:iBe,monthAbbrevFormat:sBe,dayFormat:rBe,dayAbbrevFormat:aBe,quarter:iH,utcquarter:sH,week:mH,utcweek:TH,dayofyear:gH,utcdayofyear:bH,warn:yBe,info:gBe,debug:mBe,extent(e){return ao(e)},inScope:pBe,intersect:uK,clampRange:rH,pinchDistance:EBe,pinchAngle:SBe,screen:VBe,containerSize:HBe,windowSize:GBe,bandspace:OBe,setdata:JSe,pathShape:$Be,panLinear:ZG,panLog:eH,panPow:tH,panSymlog:nH,zoomLinear:MA,zoomLog:AA,zoomPow:Rv,zoomSymlog:OA,encode:QSe,modify:vBe,lassoAppend:YBe,lassoPath:XBe,intersectLasso:KBe},QBe=["view","item","group","xy","x","y"],ZBe="event.vega.",hK="this.",JN={},_K={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Re(aK+e)}]`,functions:eIe,constants:ZX,visitors:JN},b2=tK(_K);function eIe(e){const t=eK(e);QBe.forEach(n=>t[n]=ZBe+n);for(const n in jg)t[n]=hK+n;return St(t,dBe(e,jg,JN)),t}function Vn(e,t,n){return arguments.length===1?jg[e]:(jg[e]=t,n&&(JN[e]=n),b2&&(b2.functions[e]=hK+e),this)}Vn("bandwidth",NBe,ns);Vn("copy",RBe,ns);Vn("domain",CBe,ns);Vn("range",PBe,ns);Vn("invert",LBe,ns);Vn("scale",DBe,ns);Vn("gradient",UBe,ns);Vn("geoArea",fBe,ns);Vn("geoBounds",uBe,ns);Vn("geoCentroid",hBe,ns);Vn("geoShape",jBe,ns);Vn("geoScale",_Be,ns);Vn("indata",KSe,cBe);Vn("data",sK,HN);Vn("treePath",zBe,HN);Vn("treeAncestors",qBe,HN);Vn("vlSelectionTest",zSe,GN);Vn("vlSelectionIdTest",GSe,GN);Vn("vlSelectionResolve",WSe,GN);Vn("vlSelectionTuples",HSe);function lo(e,t){const n={};let i;try{e=ze(e)?e:Re(e)+"",i=qN(e)}catch{be("Expression parse error: "+e)}i.visit(a=>{if(a.type!==HX)return;const c=a.callee.name,d=_K.visitors[c];d&&d(c,a.arguments,t,n)});const s=b2(i);return s.globals.forEach(a=>{const c=aK+a;!Ve(n,c)&&t.getSignal(a)&&(n[c]=t.signalRef(a))}),{$expr:St({code:s.code},t.options.ast?{ast:i}:null),$fields:s.fields,$params:n}}function tIe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const nIe=ia(["rule"]),Mj=ia(["group","image","rect"]);function iIe(e,t){let n="";return nIe[t]||(e.x2&&(e.x?(Mj[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Mj[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function QN(e){return(e+"").toLowerCase()}function sIe(e){return QN(e)==="operator"}function rIe(e){return QN(e)==="collect"}function ey(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function aIe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var oIe={operator:(e,t)=>ey(e,["_"],t.code),parameter:(e,t)=>ey(e,["datum","_"],t.code),event:(e,t)=>ey(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return ey(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let s="var o=item,datum=o.datum,m=0,$;";for(const a in i){const c="o["+Re(a)+"]";s+=`$=${i[a].code};if(${c}!==$)${c}=$,m=1;`}return s+=iIe(i,n),s+="return m;",ey(e,["item","_"],s)},codegen:{get(e){const t=`[${e.map(Re).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,c)=>{const d=t[c];let f,u;return a.path?(f=`a${a.path}`,u=`b${a.path}`):((n=n||{})["f"+c]=a,f=`this.f${c}(a)`,u=`this.f${c}(b)`),aIe(f,u,-d,d)},s=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?s.bind(n):s}}};function lIe(e){const t=this;sIe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function cIe(e){const t=this;if(e.params){const n=t.get(e.id);n||be("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function dIe(e,t){t=t||{};const n=this;for(const i in e){const s=e[i];t[i]=Te(s)?s.map(a=>Aj(a,n,t)):Aj(s,n,t)}return t}function Aj(e,t,n){if(!e||!je(e))return e;for(let i=0,s=Oj.length,a;i<s;++i)if(a=Oj[i],Ve(e,a.key))return a.parse(e,t,n);return e}var Oj=[{key:"$ref",parse:fIe},{key:"$key",parse:hIe},{key:"$expr",parse:uIe},{key:"$field",parse:_Ie},{key:"$encode",parse:yIe},{key:"$compare",parse:pIe},{key:"$context",parse:gIe},{key:"$subflow",parse:mIe},{key:"$tupleid",parse:wIe}];function fIe(e,t){return t.get(e.$ref)||be("Operator not defined: "+e.$ref)}function uIe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Os(t.parameterExpression(e.$expr),e.$fields))}function hIe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=CA(e.$key,e.$flat,t.expr.codegen))}function _Ie(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Br(e.$field,e.$name,t.expr.codegen))}function pIe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=$e(e.$compare).map(s=>s&&s.$tupleid?Je:s);return t.fn[n]||(t.fn[n]=NA(i,e.$order,t.expr.codegen))}function yIe(e,t){const n=e.$encode,i={};for(const s in n){const a=n[s];i[s]=Os(t.encodeExpression(a.$expr),a.$fields),i[s].output=a.$output}return i}function gIe(e,t){return t}function mIe(e,t){const n=e.$subflow;return function(i,s,a){const c=t.fork().parse(n),d=c.get(n.operators[0].id),f=c.signals.parent;return f&&f.set(a),d.detachSubflow=()=>t.detach(c),d}}function wIe(){return Je}function bIe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,s;e.source?i=t.events(e.source,e.type,n):e.merge&&(s=e.merge.map(a=>t.get(a)),i=s[0].merge.apply(s[0],s.slice(1))),e.between&&(s=e.between.map(a=>t.get(a)),i=i.between(s[0],s[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&be("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function TIe(e){var t=this,n=je(n=e.source)?n.$ref:n,i=t.get(n),s=null,a=e.update,c=void 0;i||be("Source not defined: "+e.source),s=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(c=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,s,a,c)}const vIe={skip:!0};function EIe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const c=t.signals[a];e.signals(a,c)&&(i[a]=c.value)})}if(e.data){var s=n.data={};Object.keys(t.data).forEach(a=>{const c=t.data[a];e.data(a,c)&&(s[a]=c.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function SIe(e){var t=this,n=t.dataflow,i=e.data,s=e.signals;Object.keys(s||{}).forEach(a=>{n.update(t.signals[a],s[a],vIe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Ir).insert(i[a]))}),(e.subcontext||[]).forEach((a,c)=>{const d=t.subcontext[c];d&&d.setState(a)})}function pK(e,t,n,i){return new yK(e,t,n,i)}function yK(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||oIe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Nj(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}yK.prototype=Nj.prototype={fork(){const e=new Nj(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,s=e.value;if(n.set(e.id,t),rIe(e.type)&&s&&(s.$ingest?i.ingest(t,s.$ingest,s.$format):s.$request?i.preload(t,s.$request,s.$format):i.pulse(t,i.changeset().insert(s))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const c=n.data[a]||(n.data[a]={});e.data[a].forEach(d=>c[d]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[QN(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,s){this.dataflow.on(t,n,i,s,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:tIe,parseOperator:lIe,parseOperatorParameters:cIe,parseParameters:dIe,parseStream:bIe,parseUpdate:TIe,getState:EIe,setState:SIe};function BIe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),gK(t,e.description()))}function gK(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function IIe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const zI="default";function FIe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:zI,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const s=t.value,a=s?ze(s)?s:s.user:zI,c=i.item&&i.item.cursor||null;return s&&a===s.user&&c==s.item?s:{user:a,item:c}}),e.add(null,function(n){let i=n.cursor,s=this.value;return ze(i)||(s=i.item,i=i.user),T2(e,i&&i!==zI?i:s||i),s},{cursor:t})}function T2(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function n1(e,t){var n=e._runtime.data;return Ve(n,t)||be("Unrecognized data set: "+t),n[t]}function kIe(e,t){return arguments.length<2?n1(this,e).values.value:YE.call(this,e,Vc().remove(Ir).insert(t))}function YE(e,t){JH(t)||be("Second argument to changes must be a changeset.");const n=n1(this,e);return n.modified=!0,this.pulse(n.input,t)}function xIe(e,t){return YE.call(this,e,Vc().insert(t))}function MIe(e,t){return YE.call(this,e,Vc().remove(t))}function mK(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function wK(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function XE(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function AIe(e){var t=XE(e),n=mK(e),i=wK(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(s=>{try{s(n,i)}catch(a){e.error(a)}})}function OIe(e,t,n){var i=e._renderer,s=i&&i.canvas(),a,c,d;return s&&(d=XE(e),c=t.changedTouches?t.changedTouches[0]:t,a=jE(c,s),a[0]-=d[0],a[1]-=d[1]),t.dataflow=e,t.item=n,t.vega=NIe(e,n,a),t}function NIe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function s(c){var d=i,f;if(c){for(f=t;f;f=f.mark.group)if(f.mark.name===c){d=f;break}}return d&&d.mark&&d.mark.interactive?d:{}}function a(c){if(!c)return n;ze(c)&&(c=s(c));const d=n.slice();for(;c;)d[0]-=c.x||0,d[1]-=c.y||0,c=c.mark&&c.mark.group;return d}return{view:Ui(e),item:Ui(t||{}),group:s,xy:a,x:c=>a(c)[0],y:c=>a(c)[1]}}const Rj="view",RIe="timer",CIe="window",LIe={trap:!1};function PIe(e){const t=St({defaults:{}},e),n=(i,s)=>{s.forEach(a=>{Te(i[a])&&(i[a]=ia(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function bK(e,t,n,i){e._eventListeners.push({type:n,sources:$e(t),handler:i})}function DIe(e,t){var n=e._eventConfig.defaults,i=n.prevent,s=n.allow;return i===!1||s===!0?!1:i===!0||s===!1?!0:i?i[t]:s?!s[t]:e.preventDefault()}function Xb(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||je(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function UIe(e,t,n){var i=this,s=new BE(n),a=function(u,r){i.runAsync(null,()=>{e===Rj&&DIe(i,t)&&u.preventDefault(),s.receive(OIe(i,u,r))})},c;if(e===RIe)Xb(i,"timer",t)&&i.timer(a,t);else if(e===Rj)Xb(i,"view",t)&&i.addEventListener(t,a,LIe);else if(e===CIe?Xb(i,"window",t)&&typeof window<"u"&&(c=[window]):typeof document<"u"&&Xb(i,"selector",t)&&(c=Array.from(document.querySelectorAll(e))),!c)i.warn("Can not resolve event source: "+e);else{for(var d=0,f=c.length;d<f;++d)c[d].addEventListener(t,a);bK(i,c,t,a)}return s}function Cj(e){return e.item}function Lj(e){return e.item.mark.source}function Pj(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function jIe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Cj),Lj,Pj(e)),this.on(this.events("view","pointerout",Cj),Lj,Pj(t)),this}function $Ie(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,s,a,c,d,f;for(s=t.length;--s>=0;)t[s].stop();for(s=i.length;--s>=0;)for(c=i[s],a=c.sources.length;--a>=0;)c.sources[a].removeEventListener(c.type,c.handler);for(e&&e.call(this,this._handler,null,null,null),s=n.length;--s>=0;)f=n[s].type,d=n[s].handler,this._handler.off(f,d);return this}function Ks(e,t,n){const i=document.createElement(e);for(const s in t)i.setAttribute(s,t[s]);return n!=null&&(i.textContent=n),i}const zIe="vega-bind",qIe="vega-bind-name",VIe="vega-bind-radio";function GIe(e,t,n){if(!t)return;const i=n.param;let s=n.state;return s||(s=n.state={elements:null,active:!1,set:null,update:c=>{c!=e.signal(i.signal)&&e.runAsync(null,()=>{s.source=!0,e.signal(i.signal,c)})}},i.debounce&&(s.update=RA(i.debounce,s.update))),(i.input==null&&i.element?HIe:YIe)(s,t,i,e),s.active||(e.on(e._signals[i.signal],null,()=>{s.source?s.source=!1:s.set(e.signal(i.signal))}),s.active=!0),s}function HIe(e,t,n,i){const s=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(s,a),bK(i,t,s,a),e.set=c=>{t.value=c,t.dispatchEvent(WIe(s))}}function WIe(e){return typeof Event<"u"?new Event(e):{type:e}}function YIe(e,t,n,i){const s=i.signal(n.signal),a=Ks("div",{class:zIe}),c=n.input==="radio"?a:a.appendChild(Ks("label"));c.appendChild(Ks("span",{class:qIe},n.name||n.signal)),t.appendChild(a);let d=XIe;switch(n.input){case"checkbox":d=KIe;break;case"select":d=JIe;break;case"radio":d=QIe;break;case"range":d=ZIe;break}d(e,c,n,s)}function XIe(e,t,n,i){const s=Ks("input");for(const a in n)a!=="signal"&&a!=="element"&&s.setAttribute(a==="input"?"type":a,n[a]);s.setAttribute("name",n.signal),s.value=i,t.appendChild(s),s.addEventListener("input",()=>e.update(s.value)),e.elements=[s],e.set=a=>s.value=a}function KIe(e,t,n,i){const s={type:"checkbox",name:n.signal};i&&(s.checked=!0);const a=Ks("input",s);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=c=>a.checked=!!c||null}function JIe(e,t,n,i){const s=Ks("select",{name:n.signal}),a=n.labels||[];n.options.forEach((c,d)=>{const f={value:c};i1(c,i)&&(f.selected=!0),s.appendChild(Ks("option",f,(a[d]||c)+""))}),t.appendChild(s),s.addEventListener("change",()=>{e.update(n.options[s.selectedIndex])}),e.elements=[s],e.set=c=>{for(let d=0,f=n.options.length;d<f;++d)if(i1(n.options[d],c)){s.selectedIndex=d;return}}}function QIe(e,t,n,i){const s=Ks("span",{class:VIe}),a=n.labels||[];t.appendChild(s),e.elements=n.options.map((c,d)=>{const f={type:"radio",name:n.signal,value:c};i1(c,i)&&(f.checked=!0);const u=Ks("input",f);u.addEventListener("change",()=>e.update(c));const r=Ks("label",{},(a[d]||c)+"");return r.prepend(u),s.appendChild(r),u}),e.set=c=>{const d=e.elements,f=d.length;for(let u=0;u<f;++u)i1(d[u].value,c)&&(d[u].checked=!0)}}function ZIe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const s=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,s,+i)||0,c=n.step||gc(a,s,100),d=Ks("input",{type:"range",name:n.signal,min:a,max:s,step:c});d.value=i;const f=Ks("span",{},+i);t.appendChild(d),t.appendChild(f);const u=()=>{f.textContent=d.value,e.update(+d.value)};d.addEventListener("input",u),d.addEventListener("change",u),e.elements=[d],e.set=r=>{d.value=r,f.textContent=r}}function i1(e,t){return e===t||e+""==t+""}function TK(e,t,n,i,s,a){return t=t||new i(e.loader()),t.initialize(n,mK(e),wK(e),XE(e),s,a).background(e.background())}function ZN(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function eFe(e,t,n,i){const s=new i(e.loader(),ZN(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,XE(e),e);return t&&t.handlers().forEach(a=>{s.on(a.type,a.handler)}),s}function tFe(e,t){const n=this,i=n._renderType,s=n._eventConfig.bind,a=$E(i);e=n._el=e?qI(n,e,!0):null,BIe(n),a||n.error("Unrecognized renderer type: "+i);const c=a.handler||Cm,d=e?a.renderer:a.headless;return n._renderer=d?TK(n,n._renderer,e,d):null,n._handler=eFe(n,n._handler,e,c),n._redraw=!0,e&&s!=="none"&&(t=t?n._elBind=qI(n,t,!0):e.appendChild(Ks("form",{class:"vega-bindings"})),n._bind.forEach(f=>{f.param.element&&s!=="container"&&(f.element=qI(n,f.param.element,!!f.param.input))}),n._bind.forEach(f=>{GIe(n,f.element||t,f)})),n}function qI(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const ty=e=>+e||0,nFe=e=>({top:e,bottom:e,left:e,right:e});function Dj(e){return je(e)?{top:ty(e.top),bottom:ty(e.bottom),left:ty(e.left),right:ty(e.right)}:nFe(ty(e))}async function eR(e,t,n,i){const s=$E(t),a=s&&s.headless;return a||be("Unrecognized renderer type: "+t),await e.runAsync(),TK(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function iFe(e,t){e!==nc.Canvas&&e!==nc.SVG&&e!==nc.PNG&&be("Unrecognized image type: "+e);const n=await eR(this,e,t);return e===nc.SVG?sFe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function sFe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function rFe(e,t){return(await eR(this,nc.Canvas,e,t)).canvas()}async function aFe(e){return(await eR(this,nc.SVG,e)).svg()}function oFe(e,t,n){return pK(e,bh,jg,n).parse(t)}function lFe(e){var t=this._runtime.scales;return Ve(t,e)||be("Unrecognized scale or projection: "+e),t[e].value}var vK="width",EK="height",tR="padding",Uj={skip:!0};function SK(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===tR?i.left+i.right:0)}function BK(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===tR?i.top+i.bottom:0)}function cFe(e){var t=e._signals,n=t[vK],i=t[EK],s=t[tR];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,d=>{e._width=d.size,e._viewWidth=SK(e,d.size),a()},{size:n}),e._resizeHeight=e.add(null,d=>{e._height=d.size,e._viewHeight=BK(e,d.size),a()},{size:i});const c=e.add(null,a,{pad:s});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,c.rank=s.rank+1}function dFe(e,t,n,i,s,a){this.runAfter(c=>{let d=0;c._autosize=0,c.width()!==n&&(d=1,c.signal(vK,n,Uj),c._resizeWidth.skip(!0)),c.height()!==i&&(d=1,c.signal(EK,i,Uj),c._resizeHeight.skip(!0)),c._viewWidth!==e&&(c._resize=1,c._viewWidth=e),c._viewHeight!==t&&(c._resize=1,c._viewHeight=t),(c._origin[0]!==s[0]||c._origin[1]!==s[1])&&(c._resize=1,c._origin=s),d&&c.run("enter"),a&&c.runAfter(f=>f.resize())},!1,1)}function fFe(e){return this._runtime.getState(e||{data:uFe,signals:hFe,recurse:!0})}function uFe(e,t){return t.modified&&Te(t.input.value)&&!e.startsWith("_:vega:_")}function hFe(e,t){return!(e==="parent"||t instanceof bh.proxy)}function _Fe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function pFe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Are(n,t))}function yFe(e,t,n,i){const s=e.element();s&&s.setAttribute("title",gFe(i))}function gFe(e){return e==null?"":Te(e)?IK(e):je(e)&&!cc(e)?mFe(e):e+""}function mFe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Te(n)?IK(n):FK(n))}).join(`
`)}function IK(e){return"["+e.map(FK).join(", ")+"]"}function FK(e){return Te(e)?"[…]":je(e)&&!cc(e)?"{…}":e}function wFe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function kK(e,t){const n=this;if(t=t||{},Yu.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=St({},e.locale,t.locale);n.locale($H(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||nc.Canvas,n._scenegraph=new vY;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||yFe,n._redraw=!0,n._handler=new Cm().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=PIe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const s=oFe(n,e,t.expr);n._runtime=s,n._signals=s.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:St({},a)})),s.root&&s.root.set(i),i.source=s.data.root.input,n.pulse(s.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=SK(n,n._width),n._viewHeight=BK(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,cFe(n),IIe(n),FIe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Kb(e,t){return Ve(e._signals,t)?e._signals[t]:be("Unrecognized signal name: "+Re(t))}function xK(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function jj(e,t,n,i){let s=xK(n,i);return s||(s=ZN(e,()=>i(t,n.value)),s.handler=i,e.on(n,null,s)),e}function $j(e,t,n){const i=xK(t,n);return i&&t._targets.remove(i),e}Le(kK,Yu,{async evaluate(e,t,n){if(await Yu.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,AIe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&N0(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&gK(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=Kb(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Dj(e)):Dj(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?($E(e)||be("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Yu.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Kb(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:dFe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=ZN(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,s,a;--i>=0;)if(a=n[i].type,s=n[i].handler,e===a&&(t===s||t===s.raw)){this._handler.off(a,s);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return jj(this,e,Kb(this,e),t)},removeSignalListener(e,t){return $j(this,Kb(this,e),t)},addDataListener(e,t){return jj(this,e,n1(this,e).values,t)},removeDataListener(e,t){return $j(this,n1(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=T2(this,null);this._globalCursor=!!e,t&&T2(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:pFe,events:UIe,finalize:$Ie,hover:jIe,data:kIe,change:YE,insert:xIe,remove:MIe,scale:lFe,initialize:tFe,toImageURL:iFe,toCanvas:rFe,toSVG:aFe,getState:fFe,setState:_Fe,_watchPixelRatio:wFe});const bFe="view",s1="[",r1="]",MK="{",AK="}",TFe=":",OK=",",vFe="@",EFe=">",SFe=/[[\]{}]/,BFe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let NK,RK;function Hc(e,t,n){return NK=t||bFe,RK=n||BFe,CK(e.trim()).map(v2)}function IFe(e){return RK[e]}function lg(e,t,n,i,s){const a=e.length;let c=0,d;for(;t<a;++t){if(d=e[t],!c&&d===n)return t;s&&s.indexOf(d)>=0?--c:i&&i.indexOf(d)>=0&&++c}return t}function CK(e){const t=[],n=e.length;let i=0,s=0;for(;s<n;)s=lg(e,s,OK,s1+MK,r1+AK),t.push(e.substring(i,s).trim()),i=++s;if(t.length===0)throw"Empty event selector: "+e;return t}function v2(e){return e[0]==="["?FFe(e):kFe(e)}function FFe(e){const t=e.length;let n=1,i;if(n=lg(e,n,r1,s1,r1),n===t)throw"Empty between selector: "+e;if(i=CK(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==EFe)throw"Expected '>' after between selector: "+e;i=i.map(v2);const s=v2(e.slice(1).trim());return s.between?{between:i,stream:s}:(s.between=i,s)}function kFe(e){const t={source:NK},n=[];let i=[0,0],s=0,a=0,c=e.length,d=0,f,u;if(e[c-1]===AK){if(d=e.lastIndexOf(MK),d>=0){try{i=xFe(e.substring(d+1,c-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,d).trim(),c=e.length}else throw"Unmatched right brace: "+e;d=0}if(!c)throw e;if(e[0]===vFe&&(s=++d),f=lg(e,d,TFe),f<c&&(n.push(e.substring(a,f).trim()),a=d=++f),d=lg(e,d,s1),d===c)n.push(e.substring(a,c).trim());else if(n.push(e.substring(a,d).trim()),u=[],a=++d,a===c)throw"Unmatched left bracket: "+e;for(;d<c;){if(d=lg(e,d,r1),d===c)throw"Unmatched left bracket: "+e;if(u.push(e.substring(a,d).trim()),d<c-1&&e[++d]!==s1)throw"Expected left bracket: "+e;a=++d}if(!(c=n.length)||SFe.test(n[c-1]))throw"Invalid event selector: "+e;return c>1?(t.type=n[1],s?t.markname=n[0].slice(1):IFe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function xFe(e){const t=e.split(OK);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function MFe(e){return je(e)?e:{type:e||"pad"}}const ny=e=>+e||0,AFe=e=>({top:e,bottom:e,left:e,right:e});function OFe(e){return je(e)?e.signal?e:{top:ny(e.top),bottom:ny(e.bottom),left:ny(e.left),right:ny(e.right)}:AFe(ny(e))}const oi=e=>je(e)&&!Te(e)?St({},e):{value:e};function zj(e,t,n,i){return n!=null?(je(n)&&!Te(n)||Te(n)&&n.length&&je(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Ti(e,t,n){for(const i in t)zj(e,i,t[i]);for(const i in n)zj(e,i,n[i],"update")}function m_(e,t,n){for(const i in t)n&&Ve(n,i)||(e[i]=St(e[i]||{},t[i]));return e}function Bu(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const nR="mark",iR="frame",sR="scope",NFe="axis",RFe="axis-domain",CFe="axis-grid",LFe="axis-label",PFe="axis-tick",DFe="axis-title",UFe="legend",jFe="legend-band",$Fe="legend-entry",zFe="legend-gradient",LK="legend-label",qFe="legend-symbol",VFe="legend-title",GFe="title",HFe="title-text",WFe="title-subtitle";function YFe(e,t,n,i,s){const a={},c={};let d,f,u,r;f="lineBreak",t==="text"&&s[f]!=null&&!Bu(f,e)&&VI(a,f,s[f]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),r=n===iR?s.group:n===nR?St({},s.mark,s[t]):null;for(f in r)u=Bu(f,e)||(f==="fill"||f==="stroke")&&(Bu("fill",e)||Bu("stroke",e)),u||VI(a,f,r[f]);$e(i).forEach(h=>{const p=s.style&&s.style[h];for(const _ in p)Bu(_,e)||VI(a,_,p[_])}),e=St({},e);for(f in a)r=a[f],r.signal?(d=d||{})[f]=r:c[f]=r;return e.enter=St(c,e.enter),d&&(e.update=St(d,e.update)),e}function VI(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const PK=e=>ze(e)?Re(e):e.signal?`(${e.signal})`:DK(e);function KE(e){if(e.gradient!=null)return KFe(e);let t=e.signal?`(${e.signal})`:e.color?XFe(e.color):e.field!=null?DK(e.field):e.value!==void 0?Re(e.value):void 0;return e.scale!=null&&(t=JFe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${W0(e.exponent)})`),e.mult!=null&&(t+=`*${W0(e.mult)}`),e.offset!=null&&(t+=`+${W0(e.offset)}`),e.round&&(t=`round(${t})`),t}const Jb=(e,t,n,i)=>`(${e}(${[t,n,i].map(KE).join(",")})+'')`;function XFe(e){return e.c?Jb("hcl",e.h,e.c,e.l):e.h||e.s?Jb("hsl",e.h,e.s,e.l):e.l||e.a?Jb("lab",e.l,e.a,e.b):e.r||e.g||e.b?Jb("rgb",e.r,e.g,e.b):null}function KFe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Re(n));for(;t.length&&Pt(t)==null;)t.pop();return t.unshift(PK(e.gradient)),`gradient(${t.join(",")})`}function W0(e){return je(e)?"("+KE(e)+")":e}function DK(e){return UK(je(e)?e:{datum:e})}function UK(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):be("Invalid field reference: "+Re(e));return e.signal||(i=ze(i)?go(i).map(Re).join("]["):UK(i)),t+"["+i+"]"}function JFe(e,t){const n=PK(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+W0(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function QFe(e){let t="";return e.forEach(n=>{const i=KE(n);t+=n.test?`(${n.test})?${i}:`:i}),Pt(t)===":"&&(t+="null"),t}function jK(e,t,n,i,s,a){const c={};a=a||{},a.encoders={$encode:c},e=YFe(e,t,n,i,s.config);for(const d in e)c[d]=ZFe(e[d],t,a,s);return a}function ZFe(e,t,n,i){const s={},a={};for(const c in e)e[c]!=null&&(s[c]=tke(eke(e[c]),i,n,a));return{$expr:{marktype:t,channels:s},$fields:Object.keys(a),$output:Object.keys(e)}}function eke(e){return Te(e)?QFe(e):KE(e)}function tke(e,t,n,i){const s=lo(e,t);return s.$fields.forEach(a=>i[a]=1),St(n,s.$params),s.$expr}const nke="outer",ike=["value","update","init","react","bind"];function qj(e,t){be(e+' for "outer" push: '+Re(t))}function $K(e,t){const n=e.name;if(e.push===nke)t.signals[n]||qj("No prior signal definition",n),ike.forEach(i=>{e[i]!==void 0&&qj("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function E2(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function JE(e,t,n,i){return new E2(e,t,n,i)}function a1(e,t){return JE("operator",e,t)}function Ke(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function $g(e,t){return t?{$field:e,$name:t}:{$field:e}}const S2=$g("key");function Vj(e,t){return{$compare:e,$order:t}}function ske(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const rke="ascending",ake="descending";function oke(e){return je(e)?(e.order===ake?"-":"+")+QE(e.op,e.field):""}function QE(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const rR="scope",B2="view";function ei(e){return e&&e.signal}function lke(e){return e&&e.expr}function Y0(e){if(ei(e))return!0;if(je(e)){for(const t in e)if(Y0(e[t]))return!0}return!1}function qr(e,t){return e??t}function Kd(e){return e&&e.signal||e}const Gj="timer";function zg(e,t){return(e.merge?dke:e.stream?fke:e.type?uke:be("Invalid stream specification: "+Re(e)))(e,t)}function cke(e){return e===rR?B2:e||B2}function dke(e,t){const n=e.merge.map(s=>zg(s,t)),i=aR({merge:n},e,t);return t.addStream(i).id}function fke(e,t){const n=zg(e.stream,t),i=aR({stream:n},e,t);return t.addStream(i).id}function uke(e,t){let n;e.type===Gj?(n=t.event(Gj,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(cke(e.source),e.type);const i=aR({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function aR(e,t,n){let i=t.between;return i&&(i.length!==2&&be('Stream "between" parameter must have 2 entries: '+Re(t)),e.between=[zg(i[0],n),zg(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(hke(t.marktype,t.markname,t.markrole)),t.source===rR&&i.push("inScope(event.item)"),i.length&&(e.filter=lo("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function hke(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const _ke={code:"_.$value",ast:{type:"Identifier",value:"value"}};function pke(e,t,n){const i=e.encode,s={target:n};let a=e.events,c=e.update,d=[];a||be("Signal update missing events specification."),ze(a)&&(a=Hc(a,t.isSubscope()?rR:B2)),a=$e(a).filter(f=>f.signal||f.scale?(d.push(f),0):1),d.length>1&&(d=[gke(d)]),a.length&&d.push(a.length>1?{merge:a}:a[0]),i!=null&&(c&&be("Signal encode and update are mutually exclusive."),c="encode(item(),"+Re(i)+")"),s.update=ze(c)?lo(c,t):c.expr!=null?lo(c.expr,t):c.value!=null?c.value:c.signal!=null?{$expr:_ke,$params:{$value:t.signalRef(c.signal)}}:be("Invalid signal update specification."),e.force&&(s.options={force:!0}),d.forEach(f=>t.addUpdate(St(yke(f,t),s)))}function yke(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):zg(e,t)}}function gke(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function mke(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?be("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=lo(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(s=>pke(s,t,n.id))}const dn=e=>(t,n,i)=>JE(e,n,t||void 0,i),zK=dn("aggregate"),wke=dn("axisticks"),qK=dn("bound"),ma=dn("collect"),Hj=dn("compare"),bke=dn("datajoin"),VK=dn("encode"),Tke=dn("expression"),vke=dn("facet"),Eke=dn("field"),Ske=dn("key"),Bke=dn("legendentries"),Ike=dn("load"),Fke=dn("mark"),kke=dn("multiextent"),xke=dn("multivalues"),Mke=dn("overlap"),Ake=dn("params"),GK=dn("prefacet"),Oke=dn("projection"),Nke=dn("proxy"),Rke=dn("relay"),HK=dn("render"),Cke=dn("scale"),Uf=dn("sieve"),Lke=dn("sortitems"),WK=dn("viewlayout"),Pke=dn("values");let Dke=0;const YK={min:"min",max:"max",count:"sum"};function Uke(e,t){const n=e.type||"linear";RW(n)||be("Unrecognized scale type: "+Re(n)),t.addScale(e.name,{type:n,domain:void 0})}function jke(e,t){const n=t.getScale(e.name).params;let i;n.domain=XK(e.domain,e,t),e.range!=null&&(n.range=JK(e,t,n)),e.interpolate!=null&&Kke(e.interpolate,n),e.nice!=null&&(n.nice=Xke(e.nice,t)),e.bins!=null&&(n.bins=Yke(e.bins,t));for(i in e)Ve(n,i)||i==="name"||(n[i]=yr(e[i],t))}function yr(e,t){return je(e)?e.signal?t.signalRef(e.signal):be("Unsupported object: "+Re(e)):e}function X0(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>yr(n,t))}function ZE(e){be("Can not find data set: "+Re(e))}function XK(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&be("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Te(e)?$ke:e.fields?qke:zke)(e,t,n)}function $ke(e,t,n){return e.map(i=>yr(i,n))}function zke(e,t,n){const i=n.getData(e.data);return i||ZE(e.data),Eh(t.type)?i.valuesRef(n,e.field,KK(e.sort,!1)):PW(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function qke(e,t,n){const i=e.data,s=e.fields.reduce((a,c)=>(c=ze(c)?{data:i,field:c}:Te(c)||c.signal?Vke(c,n):c,a.push(c),a),[]);return(Eh(t.type)?Gke:PW(t.type)?Hke:Wke)(e,n,s)}function Vke(e,t){const n="_:vega:_"+Dke++,i=ma({});if(Te(e))i.value={$ingest:e};else if(e.signal){const s="setdata("+Re(n)+","+e.signal+")";i.params.input=t.signalRef(s)}return t.addDataPipeline(n,[i,Uf({})]),{data:n,field:"data"}}function Gke(e,t,n){const i=KK(e.sort,!0);let s,a;const c=n.map(u=>{const r=t.getData(u.data);return r||ZE(u.data),r.countsRef(t,u.field,i)}),d={groupby:S2,pulse:c};i&&(s=i.op||"count",a=i.field?QE(s,i.field):"count",d.ops=[YK[s]],d.fields=[t.fieldRef(a)],d.as=[a]),s=t.add(zK(d));const f=t.add(ma({pulse:Ke(s)}));return a=t.add(Pke({field:S2,sort:t.sortRef(i),pulse:Ke(f)})),Ke(a)}function KK(e,t){return e&&(!e.field&&!e.op?je(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?be("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!YK[e.op]&&be("Multiple domain scales can not be sorted using "+e.op)),e}function Hke(e,t,n){const i=n.map(s=>{const a=t.getData(s.data);return a||ZE(s.data),a.domainRef(t,s.field)});return Ke(t.add(xke({values:i})))}function Wke(e,t,n){const i=n.map(s=>{const a=t.getData(s.data);return a||ZE(s.data),a.extentRef(t,s.field)});return Ke(t.add(kke({extents:i})))}function Yke(e,t){return e.signal||Te(e)?X0(e,t):t.objectProperty(e)}function Xke(e,t){return e.signal?t.signalRef(e.signal):je(e)?{interval:yr(e.interval),step:yr(e.step)}:yr(e)}function Kke(e,t){t.interpolate=yr(e.type||e),e.gamma!=null&&(t.interpolateGamma=yr(e.gamma))}function JK(e,t,n){const i=t.config.range;let s=e.range;if(s.signal)return t.signalRef(s.signal);if(ze(s)){if(i&&Ve(i,s))return e=St({},e,{range:i[s]}),JK(e,t,n);s==="width"?s=[0,{signal:"width"}]:s==="height"?s=Eh(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:be("Unrecognized scale range value: "+Re(s))}else if(s.scheme){n.scheme=Te(s.scheme)?X0(s.scheme,t):yr(s.scheme,t),s.extent&&(n.schemeExtent=X0(s.extent,t)),s.count&&(n.schemeCount=yr(s.count,t));return}else if(s.step){n.rangeStep=yr(s.step,t);return}else{if(Eh(e.type)&&!Te(s))return XK(s,e,t);Te(s)||be("Unsupported range type: "+Re(s))}return s.map(a=>(Te(a)?X0:yr)(a,t))}function Jke(e,t){const n=t.config.projection||{},i={};for(const s in e)s!=="name"&&(i[s]=I2(e[s],s,t));for(const s in n)i[s]==null&&(i[s]=I2(n[s],s,t));t.addProjection(e.name,i)}function I2(e,t,n){return Te(e)?e.map(i=>I2(i,t,n)):je(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:be("Unsupported parameter object: "+Re(e)):e}const wa="top",w_="left",b_="right",xc="bottom",QK="center",Qke="vertical",Zke="start",e2e="middle",t2e="end",F2="index",oR="label",n2e="offset",kh="perc",i2e="perc2",wr="value",jm="guide-label",lR="guide-title",s2e="group-title",r2e="group-subtitle",Wj="symbol",K0="gradient",k2="discrete",x2="size",a2e="shape",o2e="fill",l2e="stroke",c2e="strokeWidth",d2e="strokeDash",f2e="opacity",cR=[x2,a2e,o2e,l2e,c2e,d2e,f2e],$m={name:1,style:1,interactive:1},Dt={value:0},br={value:1},eS="group",ZK="rect",dR="rule",u2e="symbol",jf="text";function qg(e){return e.type=eS,e.interactive=e.interactive||!1,e}function Ns(e,t){const n=(i,s)=>qr(e[i],qr(t[i],s));return n.isVertical=i=>Qke===qr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>qr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>qr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>qr(e.columns,qr(t.columns,+n.isVertical(!0))),n}function eJ(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function h2e(e,t,n){const i=t.config.style[n];return i&&i[e]}function tS(e,t,n){return`item.anchor === '${Zke}' ? ${e} : item.anchor === '${t2e}' ? ${t} : ${n}`}const fR=tS(Re(w_),Re(b_),Re(QK));function _2e(e){const t=e("tickBand");let n=e("tickOffset"),i,s;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},s={signal:`(${t.signal}) === 'extent'`},je(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,s=!0,n=0):(i=.5,s=!1):(i=e("bandPosition"),s=e("tickExtra")),{extra:s,band:i,offset:n}}function tJ(e,t){return t?e?je(e)?Object.assign({},e,{offset:tJ(e.offset,t)}):{value:e,offset:t}:t:e}function nr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=m_(e.encode,t,$m)):e.interactive=!1,e}function p2e(e,t,n,i){const s=Ns(e,n),a=s.isVertical(),c=s.gradientThickness(),d=s.gradientLength();let f,u,r,h,p;a?(u=[0,1],r=[0,0],h=c,p=d):(u=[0,0],r=[1,0],h=d,p=c);const _={enter:f={opacity:Dt,x:Dt,y:Dt,width:oi(h),height:oi(p)},update:St({},f,{opacity:br,fill:{gradient:t,start:u,stop:r}}),exit:{opacity:Dt}};return Ti(_,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),nr({type:ZK,role:zFe,encode:_},i)}function y2e(e,t,n,i,s){const a=Ns(e,n),c=a.isVertical(),d=a.gradientThickness(),f=a.gradientLength();let u,r,h,p,_="";c?(u="y",h="y2",r="x",p="width",_="1-"):(u="x",h="x2",r="y",p="height");const l={opacity:Dt,fill:{scale:t,field:wr}};l[u]={signal:_+"datum."+kh,mult:f},l[r]=Dt,l[h]={signal:_+"datum."+i2e,mult:f},l[p]=oi(d);const b={enter:l,update:St({},l,{opacity:br}),exit:{opacity:Dt}};return Ti(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),nr({type:ZK,role:jFe,key:wr,from:s,encode:b},i)}const g2e=`datum.${kh}<=0?"${w_}":datum.${kh}>=1?"${b_}":"${QK}"`,m2e=`datum.${kh}<=0?"${xc}":datum.${kh}>=1?"${wa}":"${e2e}"`;function Yj(e,t,n,i){const s=Ns(e,t),a=s.isVertical(),c=oi(s.gradientThickness()),d=s.gradientLength();let f=s("labelOverlap"),u,r,h,p,_="";const l={enter:u={opacity:Dt},update:r={opacity:br,text:{field:oR}},exit:{opacity:Dt}};return Ti(l,{fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:qr(e.labelLimit,t.gradientLabelLimit)}),a?(u.align={value:"left"},u.baseline=r.baseline={signal:m2e},h="y",p="x",_="1-"):(u.align=r.align={signal:g2e},u.baseline={value:"top"},h="x",p="y"),u[h]=r[h]={signal:_+"datum."+kh,mult:d},u[p]=r[p]=c,c.offset=qr(e.labelOffset,t.gradientLabelOffset)||0,f=f?{separation:s("labelSeparation"),method:f,order:"datum."+F2}:void 0,nr({type:jf,role:LK,style:jm,key:wr,from:i,encode:l,overlap:f},n)}function w2e(e,t,n,i,s){const a=Ns(e,t),c=n.entries,d=!!(c&&c.interactive),f=c?c.name:void 0,u=a("clipHeight"),r=a("symbolOffset"),h={data:"value"},p=`(${s}) ? datum.${n2e} : datum.${x2}`,_=u?oi(u):{field:x2},l=`datum.${F2}`,b=`max(1, ${s})`;let m,E,B,I,k;_.mult=.5,m={enter:E={opacity:Dt,x:{signal:p,mult:.5,offset:r},y:_},update:B={opacity:br,x:E.x,y:E.y},exit:{opacity:Dt}};let F=null,x=null;e.fill||(F=t.symbolBaseFillColor,x=t.symbolBaseStrokeColor),Ti(m,{fill:a("symbolFillColor",F),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",x),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),cR.forEach(C=>{e[C]&&(B[C]=E[C]={scale:e[C],field:wr})});const M=nr({type:u2e,role:qFe,key:wr,from:h,clip:u?!0:void 0,encode:m},n.symbols),R=oi(r);R.offset=a("labelOffset"),m={enter:E={opacity:Dt,x:{signal:p,offset:R},y:_},update:B={opacity:br,text:{field:oR},x:E.x,y:E.y},exit:{opacity:Dt}},Ti(m,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const P=nr({type:jf,role:LK,style:jm,key:wr,from:h,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:Dt,height:u?oi(u):Dt,opacity:Dt},exit:{opacity:Dt},update:B={opacity:br,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(I=`ceil(item.mark.items.length / ${b})`,B.row.signal=`${l}%${I}`,B.column.signal=`floor(${l} / ${I})`,k={field:["row",l]}):(B.row.signal=`floor(${l} / ${b})`,B.column.signal=`${l} % ${b}`,k={field:l}),B.column.signal=`(${s})?${B.column.signal}:${l}`,i={facet:{data:i,name:"value",groupby:F2}},qg({role:sR,from:i,encode:m_(m,c,$m),marks:[M,P],name:f,interactive:d,sort:k})}function b2e(e,t){const n=Ns(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const uR='item.orient === "left"',hR='item.orient === "right"',nS=`(${uR} || ${hR})`,T2e=`datum.vgrad && ${nS}`,v2e=tS('"top"','"bottom"','"middle"'),E2e=tS('"right"','"left"','"center"'),S2e=`datum.vgrad && ${hR} ? (${E2e}) : (${nS} && !(datum.vgrad && ${uR})) ? "left" : ${fR}`,B2e=`item._anchor || (${nS} ? "middle" : "start")`,I2e=`${T2e} ? (${uR} ? -90 : 90) : 0`,F2e=`${nS} ? (datum.vgrad ? (${hR} ? "bottom" : "top") : ${v2e}) : "top"`;function k2e(e,t,n,i){const s=Ns(e,t),a={enter:{opacity:Dt},update:{opacity:br,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Dt}};return Ti(a,{orient:s("titleOrient"),_anchor:s("titleAnchor"),anchor:{signal:B2e},angle:{signal:I2e},align:{signal:S2e},baseline:{signal:F2e},text:e.title,fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),baseline:s("titleBaseline")}),nr({type:jf,role:VFe,style:lR,from:i,encode:a},n)}function x2e(e,t){let n;return je(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Xj(e.path)+")":e.sphere&&(n="geoShape("+Xj(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Xj(e){return je(e)&&e.signal?e.signal:Re(e)}function nJ(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===eS?sR:t||nR}function M2e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||nJ(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function A2e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function _R(e,t){const n=eW(e.type);n||be("Unrecognized transform type: "+Re(e.type));const i=JE(n.type.toLowerCase(),null,iJ(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function iJ(e,t,n){const i={},s=e.params.length;for(let a=0;a<s;++a){const c=e.params[a];i[c.name]=O2e(c,t,n)}return i}function O2e(e,t,n){const i=e.type,s=t[e.name];if(i==="index")return N2e(e,t,n);if(s===void 0){e.required&&be("Missing required "+Re(t.type)+" parameter: "+Re(e.name));return}else{if(i==="param")return R2e(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!ei(s)?s.map(a=>Kj(e,a,n)):Kj(e,s,n)}function Kj(e,t,n){const i=e.type;if(ei(t))return Qj(i)?be("Expression references can not be signals."):GI(i)?n.fieldRef(t):Zj(i)?n.compareRef(t):n.signalRef(t.signal);{const s=e.expr||GI(i);return s&&C2e(t)?n.exprRef(t.expr,t.as):s&&L2e(t)?$g(t.field,t.as):Qj(i)?lo(t,n):P2e(i)?Ke(n.getData(t).values):GI(i)?$g(t):Zj(i)?n.compareRef(t):t}}function N2e(e,t,n){return ze(t.from)||be('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function R2e(e,t,n){const i=t[e.name];return e.array?(Te(i)||be("Expected an array of sub-parameters. Instead: "+Re(i)),i.map(s=>Jj(e,s,n))):Jj(e,i,n)}function Jj(e,t,n){const i=e.params.length;let s;for(let c=0;c<i;++c){s=e.params[c];for(const d in s.key)if(s.key[d]!==t[d]){s=null;break}if(s)break}s||be("Unsupported parameter: "+Re(t));const a=St(iJ(s,t,n),s.key);return Ke(n.add(Ake(a)))}const C2e=e=>e&&e.expr,L2e=e=>e&&e.field,P2e=e=>e==="data",Qj=e=>e==="expr",GI=e=>e==="field",Zj=e=>e==="compare";function D2e(e,t,n){let i,s,a,c,d;return e?(i=e.facet)&&(t||be("Only group marks can be faceted."),i.field!=null?c=d=J0(i,n):(e.data?d=Ke(n.getData(e.data).aggregate):(a=_R(St({type:"aggregate",groupby:$e(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=J0(i,n),c=d=Ke(n.add(a))),s=n.keyRef(i.groupby,!0))):c=Ke(n.add(ma(null,[{}]))),c||(c=J0(e,n)),{key:s,pulse:c,parent:d}}function J0(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ke(t.getData(e.data).output)}function yf(e,t,n,i,s){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=s,this.index={}}yf.fromEntries=function(e,t){const n=t.length,i=t[n-1],s=t[n-2];let a=t[0],c=null,d=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);d<n;++d)t[d].params.pulse=Ke(t[d-1]),e.add(t[d]),t[d].type==="aggregate"&&(c=t[d]);return new yf(e,a,s,i,c)};function sJ(e){return ze(e)?e:null}function e$(e,t,n){const i=QE(n.op,n.field);let s;if(t.ops){for(let a=0,c=t.as.length;a<c;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((s=n.op.signal)?e.signalRef(s):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function iy(e,t,n,i,s,a,c){const d=t[n]||(t[n]={}),f=oke(a);let u=sJ(s),r,h;if(u!=null&&(e=t.scope,u=u+(f?"|"+f:""),r=d[u]),!r){const p=a?{field:S2,pulse:t.countsRef(e,s,a)}:{field:e.fieldRef(s),pulse:Ke(t.output)};f&&(p.sort=e.sortRef(a)),h=e.add(JE(i,void 0,p)),c&&(t.index[s]=h),r=Ke(h),u!=null&&(d[u]=r)}return r}yf.prototype={countsRef(e,t,n){const i=this,s=i.counts||(i.counts={}),a=sJ(t);let c,d,f;return a!=null&&(e=i.scope,c=s[a]),c?n&&n.field&&e$(e,c.agg.params,n):(f={groupby:e.fieldRef(t,"key"),pulse:Ke(i.output)},n&&n.field&&e$(e,f,n),d=e.add(zK(f)),c=e.add(ma({pulse:Ke(d)})),c={agg:d,ref:Ke(c)},a!=null&&(s[a]=c)),c.ref},tuplesRef(){return Ke(this.values)},extentRef(e,t){return iy(e,this,"extent","extent",t,!1)},domainRef(e,t){return iy(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return iy(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return iy(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return iy(e,this,"indata","tupleindex",t,!0,!0)}};function U2e(e,t,n){const i=e.from.facet,s=i.name,a=J0(i,t);let c;i.name||be("Facet must have a name: "+Re(i)),i.data||be("Facet must reference a data set: "+Re(i)),i.field?c=t.add(GK({field:t.fieldRef(i.field),pulse:a})):i.groupby?c=t.add(vke({key:t.keyRef(i.groupby),group:Ke(t.proxy(n.parent)),pulse:a})):be("Facet must specify groupby or field: "+Re(i));const d=t.fork(),f=d.add(ma()),u=d.add(Uf({pulse:Ke(f)}));d.addData(s,new yf(d,f,f,u)),d.addSignal("parent",null),c.params.subflow={$subflow:d.parse(e).toRuntime()}}function j2e(e,t,n){const i=t.add(GK({pulse:n.pulse})),s=t.fork();s.add(Uf()),s.addSignal("parent",null),i.params.subflow={$subflow:s.parse(e).toRuntime()}}function rJ(e,t,n){const i=e.remove,s=e.insert,a=e.toggle,c=e.modify,d=e.values,f=t.add(a1()),u="if("+e.trigger+',modify("'+n+'",'+[s,i,a,c,d].map(h=>h??"null").join(",")+"),0)",r=lo(u,t);f.update=r.$expr,f.params=r.$params}function iS(e,t){const n=nJ(e),i=e.type===eS,s=e.from&&e.from.facet,a=e.overlap;let c=e.layout||n===sR||n===iR,d,f,u,r,h,p,_;const l=n===nR||c||s,b=D2e(e.from,i,t);f=t.add(bke({key:b.key||(e.key?$g(e.key):void 0),pulse:b.pulse,clean:!i}));const m=Ke(f);f=u=t.add(ma({pulse:m})),f=t.add(Fke({markdef:M2e(e),interactive:A2e(e.interactive,t),clip:x2e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ke(f)}));const E=Ke(f);f=r=t.add(VK(jK(e.encode,e.type,n,e.style,t,{mod:!1,pulse:E}))),f.params.parent=t.encode(),e.transform&&e.transform.forEach(x=>{const M=_R(x,t),R=M.metadata;(R.generates||R.changes)&&be("Mark transforms should not generate new data."),R.nomod||(r.params.mod=!0),M.params.pulse=Ke(f),t.add(f=M)}),e.sort&&(f=t.add(Lke({sort:t.compareRef(e.sort),pulse:Ke(f)})));const B=Ke(f);(s||c)&&(c=t.add(WK({layout:t.objectProperty(e.layout),legends:t.legends,mark:E,pulse:B})),p=Ke(c));const I=t.add(qK({mark:E,pulse:p||B}));_=Ke(I),i&&(l&&(d=t.operators,d.pop(),c&&d.pop()),t.pushState(B,p||_,m),s?U2e(e,t,b):l?j2e(e,t,b):t.parse(e),t.popState(),l&&(c&&d.push(c),d.push(I))),a&&(_=$2e(a,_,t));const k=t.add(HK({pulse:_})),F=t.add(Uf({pulse:Ke(k)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new yf(t,u,k,F)),e.on&&e.on.forEach(x=>{(x.insert||x.remove||x.toggle)&&be("Marks only support modify triggers."),rJ(x,t,h)}))}function $2e(e,t,n){const i=e.method,s=e.bound,a=e.separation,c={separation:ei(a)?n.signalRef(a.signal):a,method:ei(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(c.sort=n.compareRef({field:e.order})),s){const d=s.tolerance;c.boundTolerance=ei(d)?n.signalRef(d.signal):+d,c.boundScale=n.scaleRef(s.scale),c.boundOrient=s.orient}return Ke(n.add(Mke(c)))}function z2e(e,t){const n=t.config.legend,i=e.encode||{},s=Ns(e,n),a=i.legend||{},c=a.name||void 0,d=a.interactive,f=a.style,u={};let r=0,h,p,_;cR.forEach(I=>e[I]?(u[I]=e[I],r=r||e[I]):0),r||be("Missing valid scale for legend.");const l=q2e(e,t.scaleType(r)),b={title:e.title!=null,scales:u,type:l,vgrad:l!=="symbol"&&s.isVertical()},m=Ke(t.add(ma(null,[b]))),E={enter:{x:{value:0},y:{value:0}}},B=Ke(t.add(Bke(p={type:l,scale:t.scaleRef(r),count:t.objectProperty(s("tickCount")),limit:t.property(s("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return l===K0?(_=[p2e(e,r,n,i.gradient),Yj(e,n,i.labels,B)],p.count=p.count||t.signalRef(`max(2,2*floor((${Kd(s.gradientLength())})/100))`)):l===k2?_=[y2e(e,r,n,i.gradient,B),Yj(e,n,i.labels,B)]:(h=b2e(e,n),_=[w2e(e,n,i,B,Kd(h.columns))],p.size=H2e(e,t,_[0].marks)),_=[qg({role:$Fe,from:m,encode:E,marks:_,layout:h,interactive:d})],b.title&&_.push(k2e(e,n,i.title,m)),iS(qg({role:UFe,from:m,encode:m_(G2e(s,e,n),a,$m),marks:_,aria:s("aria"),description:s("description"),zindex:s("zindex"),name:c,interactive:d,style:f}),t)}function q2e(e,t){let n=e.type||Wj;return!e.type&&V2e(e)===1&&(e.fill||e.stroke)&&(n=BO(t)?K0:qk(t)?k2:Wj),n!==K0?n:qk(t)?k2:K0}function V2e(e){return cR.reduce((t,n)=>t+(e[n]?1:0),0)}function G2e(e,t,n){const i={enter:{},update:{}};return Ti(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function H2e(e,t,n){const i=Kd(t$("size",e,n)),s=Kd(t$("strokeWidth",e,n)),a=Kd(W2e(n[1].encode,t,jm));return lo(`max(ceil(sqrt(${i})+${s}),${a})`,t)}function t$(e,t,n){return t[e]?`scale("${t[e]}",datum)`:eJ(e,n[0].encode)}function W2e(e,t,n){return eJ("fontSize",e)||h2e("fontSize",t,n)}const Y2e=`item.orient==="${w_}"?-90:item.orient==="${b_}"?90:0`;function X2e(e,t){e=ze(e)?{text:e}:e;const n=Ns(e,t.config.title),i=e.encode||{},s=i.group||{},a=s.name||void 0,c=s.interactive,d=s.style,f=[],u={},r=Ke(t.add(ma(null,[u])));return f.push(Q2e(e,n,K2e(e),r)),e.subtitle&&f.push(Z2e(e,n,i.subtitle,r)),iS(qg({role:GFe,from:r,encode:J2e(n,s),marks:f,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:c,style:d}),t)}function K2e(e){const t=e.encode;return t&&t.title||St({name:e.name,interactive:e.interactive,style:e.style},t)}function J2e(e,t){const n={enter:{},update:{}};return Ti(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:fR},angle:{signal:Y2e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),m_(n,t,$m)}function Q2e(e,t,n,i){const s={value:0},a=e.text,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return Ti(c,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),nr({type:jf,role:HFe,style:s2e,from:i,encode:c},n)}function Z2e(e,t,n,i){const s={value:0},a=e.subtitle,c={enter:{opacity:s},update:{opacity:{value:1}},exit:{opacity:s}};return Ti(c,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),nr({type:jf,role:WFe,style:r2e,from:i,encode:c},n)}function exe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(_R(i,t))}),e.on&&e.on.forEach(i=>{rJ(i,t,e.name)}),t.addDataPipeline(e.name,txe(e,t,n))}function txe(e,t,n){const i=[];let s=null,a=!1,c=!1,d,f,u,r,h;for(e.values?ei(e.values)||Y0(e.format)?(i.push(n$(t,e)),i.push(s=gd())):i.push(s=gd({$ingest:e.values,$format:e.format})):e.url?Y0(e.url)||Y0(e.format)?(i.push(n$(t,e)),i.push(s=gd())):i.push(s=gd({$request:e.url,$format:e.format})):e.source&&(s=d=$e(e.source).map(p=>Ke(t.getData(p).output)),i.push(null)),f=0,u=n.length;f<u;++f)r=n[f],h=r.metadata,!s&&!h.source&&i.push(s=gd()),i.push(r),h.generates&&(c=!0),h.modifies&&!c&&(a=!0),h.source?s=r:h.changes&&(s=null);return d&&(u=d.length-1,i[0]=Rke({derive:a,pulse:u?d:d[0]}),(a||u)&&i.splice(1,0,gd())),s||i.push(gd()),i.push(Uf({})),i}function gd(e){const t=ma({},e);return t.metadata={source:!0},t}function n$(e,t){return Ike({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const aJ=e=>e===xc||e===wa,sS=(e,t,n)=>ei(e)?rxe(e.signal,t,n):e===w_||e===wa?t:n,li=(e,t,n)=>ei(e)?ixe(e.signal,t,n):aJ(e)?t:n,ea=(e,t,n)=>ei(e)?sxe(e.signal,t,n):aJ(e)?n:t,oJ=(e,t,n)=>ei(e)?axe(e.signal,t,n):e===wa?{value:t}:{value:n},nxe=(e,t,n)=>ei(e)?oxe(e.signal,t,n):e===b_?{value:t}:{value:n},ixe=(e,t,n)=>lJ(`${e} === '${wa}' || ${e} === '${xc}'`,t,n),sxe=(e,t,n)=>lJ(`${e} !== '${wa}' && ${e} !== '${xc}'`,t,n),rxe=(e,t,n)=>pR(`${e} === '${w_}' || ${e} === '${wa}'`,t,n),axe=(e,t,n)=>pR(`${e} === '${wa}'`,t,n),oxe=(e,t,n)=>pR(`${e} === '${b_}'`,t,n),lJ=(e,t,n)=>(t=t!=null?oi(t):t,n=n!=null?oi(n):n,i$(t)&&i$(n)?(t=t?t.signal||Re(t.value):null,n=n?n.signal||Re(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[St({test:e},t)].concat(n||[])),i$=e=>e==null||Object.keys(e).length===1,pR=(e,t,n)=>({signal:`${e} ? (${Lu(t)}) : (${Lu(n)})`}),lxe=(e,t,n,i,s)=>({signal:(i!=null?`${e} === '${w_}' ? (${Lu(i)}) : `:"")+(n!=null?`${e} === '${xc}' ? (${Lu(n)}) : `:"")+(s!=null?`${e} === '${b_}' ? (${Lu(s)}) : `:"")+(t!=null?`${e} === '${wa}' ? (${Lu(t)}) : `:"")+"(null)"}),Lu=e=>ei(e)?e.signal:e==null?null:Re(e),cxe=(e,t)=>t===0?0:ei(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Xu=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function au(e,t,n,i){let s;if(t&&Ve(t,e))return t[e];if(Ve(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":s="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":s=e[5].toLowerCase()+e.slice(6)}return i[lR][s]}else if(e.startsWith("label")){switch(e){case"labelColor":s="fill";break;case"labelFont":case"labelFontSize":s=e[5].toLowerCase()+e.slice(6)}return i[jm][s]}return null}function s$(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function dxe(e,t){var n=t.config,i=n.style,s=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,c=e.orient,d,f,u;if(ei(c)){const h=s$([n.axisX,n.axisY]),p=s$([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);d={};for(u of h)d[u]=li(c,au(u,n.axisX,s,i),au(u,n.axisY,s,i));f={};for(u of p)f[u]=lxe(c.signal,au(u,n.axisTop,s,i),au(u,n.axisBottom,s,i),au(u,n.axisLeft,s,i),au(u,n.axisRight,s,i))}else d=c===wa||c===xc?n.axisX:n.axisY,f=n["axis"+c[0].toUpperCase()+c.slice(1)];return d||f||a?St({},s,d,f,a):s}function fxe(e,t,n,i){const s=Ns(e,t),a=e.orient;let c,d;const f={enter:c={opacity:Dt},update:d={opacity:br},exit:{opacity:Dt}};Ti(f,{stroke:s("domainColor"),strokeCap:s("domainCap"),strokeDash:s("domainDash"),strokeDashOffset:s("domainDashOffset"),strokeWidth:s("domainWidth"),strokeOpacity:s("domainOpacity")});const u=r$(e,0),r=r$(e,1);return c.x=d.x=li(a,u,Dt),c.x2=d.x2=li(a,r),c.y=d.y=ea(a,u,Dt),c.y2=d.y2=ea(a,r),nr({type:dR,role:RFe,from:i,encode:f},n)}function r$(e,t){return{scale:e.scale,range:t}}function uxe(e,t,n,i,s){const a=Ns(e,t),c=e.orient,d=e.gridScale,f=sS(c,1,-1),u=hxe(e.offset,f);let r,h,p;const _={enter:r={opacity:Dt},update:p={opacity:br},exit:h={opacity:Dt}};Ti(_,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const l={scale:e.scale,field:wr,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")},b=li(c,{signal:"height"},{signal:"width"}),m=d?{scale:d,range:0,mult:f,offset:u}:{value:0,offset:u},E=d?{scale:d,range:1,mult:f,offset:u}:St(b,{mult:f,offset:u});return r.x=p.x=li(c,l,m),r.y=p.y=ea(c,l,m),r.x2=p.x2=ea(c,E),r.y2=p.y2=li(c,E),h.x=li(c,l),h.y=ea(c,l),nr({type:dR,role:CFe,key:wr,from:i,encode:_},n)}function hxe(e,t){if(t!==1)if(!je(e))e=ei(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=St({},e);for(;n.mult!=null;)if(je(n.mult))n=n.mult=St({},n.mult);else return n.mult=ei(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function _xe(e,t,n,i,s,a){const c=Ns(e,t),d=e.orient,f=sS(d,-1,1);let u,r,h;const p={enter:u={opacity:Dt},update:h={opacity:br},exit:r={opacity:Dt}};Ti(p,{stroke:c("tickColor"),strokeCap:c("tickCap"),strokeDash:c("tickDash"),strokeDashOffset:c("tickDashOffset"),strokeOpacity:c("tickOpacity"),strokeWidth:c("tickWidth")});const _=oi(s);_.mult=f;const l={scale:e.scale,field:wr,band:a.band,extra:a.extra,offset:a.offset,round:c("tickRound")};return h.y=u.y=li(d,Dt,l),h.y2=u.y2=li(d,_),r.x=li(d,l),h.x=u.x=ea(d,Dt,l),h.x2=u.x2=ea(d,_),r.y=ea(d,l),nr({type:dR,role:PFe,key:wr,from:i,encode:p},n)}function HI(e,t,n,i,s){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+s+")"}}function pxe(e,t,n,i,s,a){const c=Ns(e,t),d=e.orient,f=e.scale,u=sS(d,-1,1),r=Kd(c("labelFlush")),h=Kd(c("labelFlushOffset")),p=c("labelAlign"),_=c("labelBaseline");let l=r===0||!!r,b;const m=oi(s);m.mult=u,m.offset=oi(c("labelPadding")||0),m.offset.mult=u;const E={scale:f,field:wr,band:.5,offset:tJ(a.offset,c("labelOffset"))},B=li(d,l?HI(f,r,'"left"','"right"','"center"'):{value:"center"},nxe(d,"left","right")),I=li(d,oJ(d,"bottom","top"),l?HI(f,r,'"top"','"bottom"','"middle"'):{value:"middle"}),k=HI(f,r,`-(${h})`,h,0);l=l&&h;const F={opacity:Dt,x:li(d,E,m),y:ea(d,E,m)},x={enter:F,update:b={opacity:br,text:{field:oR},x:F.x,y:F.y,align:B,baseline:I},exit:{opacity:Dt,x:F.x,y:F.y}};Ti(x,{dx:!p&&l?li(d,k):null,dy:!_&&l?ea(d,k):null}),Ti(x,{angle:c("labelAngle"),fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontWeight:c("labelFontWeight"),fontStyle:c("labelFontStyle"),limit:c("labelLimit"),lineHeight:c("labelLineHeight")},{align:p,baseline:_});const M=c("labelBound");let R=c("labelOverlap");return R=R||M?{separation:c("labelSeparation"),method:R,order:"datum.index",bound:M?{scale:f,orient:d,tolerance:M}:null}:void 0,b.align!==B&&(b.align=Xu(b.align,B)),b.baseline!==I&&(b.baseline=Xu(b.baseline,I)),nr({type:jf,role:LFe,style:jm,key:wr,from:i,encode:x,overlap:R},n)}function yxe(e,t,n,i){const s=Ns(e,t),a=e.orient,c=sS(a,-1,1);let d,f;const u={enter:d={opacity:Dt,anchor:oi(s("titleAnchor",null)),align:{signal:fR}},update:f=St({},d,{opacity:br,text:oi(e.title)}),exit:{opacity:Dt}},r={signal:`lerp(range("${e.scale}"), ${tS(0,1,.5)})`};return f.x=li(a,r),f.y=ea(a,r),d.angle=li(a,Dt,cxe(c,90)),d.baseline=li(a,oJ(a,xc,wa),{value:xc}),f.angle=d.angle,f.baseline=d.baseline,Ti(u,{fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign"),angle:s("titleAngle"),baseline:s("titleBaseline")}),gxe(s,a,u,n),u.update.align=Xu(u.update.align,d.align),u.update.angle=Xu(u.update.angle,d.angle),u.update.baseline=Xu(u.update.baseline,d.baseline),nr({type:jf,role:DFe,style:lR,from:i,encode:u},n)}function gxe(e,t,n,i){const s=(d,f)=>d!=null?(n.update[f]=Xu(oi(d),n.update[f]),!1):!Bu(f,i),a=s(e("titleX"),"x"),c=s(e("titleY"),"y");n.enter.auto=c===a?oi(c):li(t,oi(c),oi(a))}function mxe(e,t){const n=dxe(e,t),i=e.encode||{},s=i.axis||{},a=s.name||void 0,c=s.interactive,d=s.style,f=Ns(e,n),u=_2e(f),r={scale:e.scale,ticks:!!f("ticks"),labels:!!f("labels"),grid:!!f("grid"),domain:!!f("domain"),title:e.title!=null},h=Ke(t.add(ma({},[r]))),p=Ke(t.add(wke({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),_=[];let l;return r.grid&&_.push(uxe(e,n,i.grid,p,u)),r.ticks&&(l=f("tickSize"),_.push(_xe(e,n,i.ticks,p,l,u))),r.labels&&(l=r.ticks?l:0,_.push(pxe(e,n,i.labels,p,l,u))),r.domain&&_.push(fxe(e,n,i.domain,h)),r.title&&_.push(yxe(e,n,i.title,h)),iS(qg({role:NFe,from:h,encode:m_(wxe(f,e),s,$m),marks:_,aria:f("aria"),description:f("description"),zindex:f("zindex"),name:a,interactive:c,style:d}),t)}function wxe(e,t){const n={enter:{},update:{}};return Ti(n,{orient:e("orient"),offset:e("offset")||0,position:qr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function cJ(e,t,n){const i=$e(e.signals),s=$e(e.scales);return n||i.forEach(a=>$K(a,t)),$e(e.projections).forEach(a=>Jke(a,t)),s.forEach(a=>Uke(a,t)),$e(e.data).forEach(a=>exe(a,t)),s.forEach(a=>jke(a,t)),(n||i).forEach(a=>mke(a,t)),$e(e.axes).forEach(a=>mxe(a,t)),$e(e.marks).forEach(a=>iS(a,t)),$e(e.legends).forEach(a=>z2e(a,t)),e.title&&X2e(e.title,t),t.parseLambdas(),t}const bxe=e=>m_({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Txe(e,t){const n=t.config,i=Ke(t.root=t.add(a1())),s=vxe(e,n);s.forEach(u=>$K(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(ma()),c=t.add(VK(jK(bxe(e.encode),eS,iR,e.style,t,{pulse:Ke(a)}))),d=t.add(WK({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ke(c)}));t.operators.pop(),t.pushState(Ke(c),Ke(d),null),cJ(e,t,s),t.operators.push(d);let f=t.add(qK({mark:i,pulse:Ke(d)}));return f=t.add(HK({pulse:Ke(f)})),f=t.add(Uf({pulse:Ke(f)})),t.addData("root",new yf(t,a,a,f)),t}function sy(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function vxe(e,t){const n=c=>qr(e[c],t[c]),i=[sy("background",n("background")),sy("autosize",MFe(n("autosize"))),sy("padding",OFe(n("padding"))),sy("width",n("width")||0),sy("height",n("height")||0)],s=i.reduce((c,d)=>(c[d.name]=d,c),{}),a={};return $e(e.signals).forEach(c=>{Ve(s,c.name)?c=St(s[c.name],c):i.push(c),a[c.name]=c}),$e(t.signals).forEach(c=>{!Ve(a,c.name)&&!Ve(s,c.name)&&i.push(c)}),i}function dJ(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function a$(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}dJ.prototype=a$.prototype={parse(e){return cJ(e,this)},fork(){return new a$(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof E2?Ke(e):e;return this.add(Nke({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,s,a){let c,d;i&&(c=i.data||(i.data={}),d=c[s]||(c[s]=[]),d.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ke(this.add(Uf({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ke(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Pt(this._parent)},encode(){return Pt(this._encode)},lookup(){return Pt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ze(e))return $g(e,t);e.signal||be("Unsupported field reference: "+Re(e));const n=e.signal;let i=this.field[n];if(!i){const s={name:this.signalRef(n)};t&&(s.as=t),this.field[n]=i=Ke(this.add(Eke(s)))}return i},compareRef(e){let t=!1;const n=a=>ei(a)?(t=!0,this.signalRef(a.signal)):lke(a)?(t=!0,this.exprRef(a.expr)):a,i=$e(e.field).map(n),s=$e(e.order).map(n);return t?Ke(this.add(Hj({fields:i,orders:s}))):Vj(i,s)},keyRef(e,t){let n=!1;const i=a=>ei(a)?(n=!0,Ke(s[a.signal])):a,s=this.signals;return e=$e(e).map(i),n?Ke(this.add(Ske({fields:e,flat:t}))):ske(e,t)},sortRef(e){if(!e)return e;const t=QE(e.op,e.field),n=e.order||rke;return n.signal?Ke(this.add(Hj({fields:t,orders:this.signalRef(n.signal)}))):Vj(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Ve(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&be("Duplicate signal name: "+Re(e));const n=t instanceof E2?t:this.add(a1(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||be("Unrecognized signal name: "+Re(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ke(this.signals[e]):(Ve(this.lambdas,e)||(this.lambdas[e]=this.add(a1(null))),Ke(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],s=lo(i,this),a=this.lambdas[i];a.params=s.$params,a.update=s.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!je(e)?e:this.signalRef(e.signal||yR(e))},exprRef(e,t){const n={expr:lo(e,this)};return t&&(n.expr.$name=t),Ke(this.add(Tke(n)))},addBinding(e,t){this.bindings||be("Nested signals do not support binding: "+Re(e)),this.bindings.push(St({signal:e},t))},addScaleProj(e,t){Ve(this.scales,e)&&be("Duplicate scale or projection name: "+Re(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Cke(t))},addProjection(e,t){this.addScaleProj(e,Oke(t))},getScale(e){return this.scales[e]||be("Unrecognized scale name: "+Re(e)),this.scales[e]},scaleRef(e){return Ke(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ve(this.data,e)&&be("Duplicate data set name: "+Re(e)),this.data[e]=t},getData(e){return this.data[e]||be("Undefined data set name: "+Re(e)),this.data[e]},addDataPipeline(e,t){return Ve(this.data,e)&&be("Duplicate data set name: "+Re(e)),this.addData(e,yf.fromEntries(this,t))}};function yR(e){return(Te(e)?Exe:Sxe)(e)}function Exe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const s=e[i];n+=(i>0?",":"")+(je(s)?s.signal||yR(s):Re(s))}return n+"]"}function Sxe(e){let t="{",n=0,i,s;for(i in e)s=e[i],t+=(++n>1?",":"")+Re(i)+":"+(je(s)?s.signal||yR(s):Re(s));return t+"}"}function Bxe(){const e="sans-serif",i="#4c78a8",s="#000",a="#888",c="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:s},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:s,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:s,font:e,fontSize:10},"guide-title":{fill:s,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:s,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:s,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:c},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:c,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:c,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Ixe(e,t,n){return je(e)||be("Input Vega specification must be an object."),t=f_(Bxe(),t,e.config),Txe(e,new dJ(t,n)).toRuntime()}var Fxe="5.30.0";St(bh,Iwe,_ve,Hve,E1e,M1e,iEe,L1e,rEe,cEe,wEe,IEe);const kxe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Gn,CanvasHandler:Cm,CanvasRenderer:Yv,DATE:Is,DAY:xi,DAYOFYEAR:oo,Dataflow:Yu,Debug:YG,Error:FA,EventStream:BE,Gradient:QW,GroupItem:NE,HOURS:Zs,Handler:KO,HybridHandler:qY,HybridRenderer:e2,Info:WG,Item:OE,MILLISECONDS:sa,MINUTES:er,MONTH:Ri,Marks:tr,MultiPulse:WA,None:HG,Operator:un,Parameters:SE,Pulse:dc,QUARTER:Bs,RenderType:nc,Renderer:Rm,ResourceLoader:rY,SECONDS:Fr,SVGHandler:MY,SVGRenderer:nN,SVGStringRenderer:zY,Scenegraph:vY,TIME_UNITS:UA,Transform:ge,View:kK,WEEK:Qn,Warn:kA,YEAR:wi,accessor:Os,accessorFields:Ni,accessorName:Rn,array:$e,ascending:mE,bandwidthNRD:dM,bin:fM,bootstrapCI:q7,boundClip:ZY,boundContext:Mm,boundItem:Xk,boundMark:mY,boundStroke:Il,changeset:Vc,clampRange:rH,codegenExpression:tK,compare:NA,constant:Ui,cumulativeLogNormal:gM,cumulativeNormal:Q1,cumulativeUniform:TM,dayofyear:gH,debounce:RA,defaultLocale:zA,definition:eW,densityLogNormal:yM,densityNormal:uM,densityUniform:bM,domChild:Jn,domClear:fr,domCreate:ec,domFind:XO,dotbin:V7,error:be,expressionFunction:Vn,extend:St,extent:ao,extentIndex:aH,falsy:Ul,fastmap:h_,field:Br,flush:oH,font:DE,fontFamily:Nm,fontSize:mo,format:O0,formatLocale:Cv,formats:GA,hasOwnProperty:Ve,id:bm,identity:Di,inferType:qH,inferTypes:VH,ingest:Xt,inherits:Le,inrange:Nu,interpolate:IO,interpolateColors:ME,interpolateRange:DW,intersect:XY,intersectBoxLine:Ru,intersectPath:RO,intersectPoint:CO,intersectRule:oY,isArray:Te,isBoolean:qc,isDate:cc,isFunction:Bt,isIterable:lH,isNumber:Wt,isObject:je,isRegExp:cH,isString:ze,isTuple:vE,key:CA,lerp:dH,lineHeight:Ic,loader:bE,locale:$H,logger:xA,lruCache:fH,markup:tN,merge:uH,mergeConfig:f_,multiLineOffset:HO,one:d_,pad:hH,panLinear:ZG,panLog:eH,panPow:tH,panSymlog:nH,parse:Ixe,parseExpression:qN,parseSelector:Hc,path:C1,pathCurves:AO,pathEqual:eX,pathParse:Sh,pathRectangle:tY,pathRender:Ng,pathSymbols:eY,pathTrail:nY,peek:Pt,point:jE,projection:_N,quantileLogNormal:mM,quantileNormal:Z1,quantileUniform:vM,quantiles:lM,quantizeInterpolator:UW,quarter:iH,quartiles:cM,get random(){return vr},randomInteger:vue,randomKDE:_M,randomLCG:Tue,randomLogNormal:H7,randomMixture:W7,randomNormal:hM,randomUniform:Y7,read:WH,regressionConstant:EM,regressionExp:K7,regressionLinear:SM,regressionLoess:Z7,regressionLog:X7,regressionPoly:Q7,regressionPow:J7,regressionQuad:BM,renderModule:$E,repeat:Ry,resetDefaultLocale:jge,resetSVGClipId:sY,resetSVGDefIds:OTe,responseType:HH,runtimeContext:pK,sampleCurve:tE,sampleLogNormal:pM,sampleNormal:J1,sampleUniform:wM,scale:Yt,sceneEqual:iN,sceneFromJSON:bY,scenePickVisit:jv,sceneToJSON:wY,sceneVisit:ra,sceneZOrder:LO,scheme:FO,serializeXML:DY,setHybridRendererOptions:kTe,setRandom:wue,span:Tm,splitAccessPath:go,stringValue:Re,textMetrics:Xs,timeBin:RH,timeFloor:SH,timeFormatLocale:Mg,timeInterval:__,timeOffset:FH,timeSequence:MH,timeUnitSpecifier:yH,timeUnits:jA,toBoolean:LA,toDate:PA,toNumber:Mi,toSet:ia,toString:DA,transform:tW,transforms:bh,truncate:_H,truthy:Ir,tupleid:Je,typeParsers:jk,utcFloor:BH,utcInterval:p_,utcOffset:kH,utcSequence:AH,utcdayofyear:bH,utcquarter:sH,utcweek:TH,version:Fxe,visitArray:Wl,week:mH,writeConfig:u_,zero:Jl,zoomLinear:MA,zoomLog:AA,zoomPow:Rv,zoomSymlog:OA},Symbol.toStringTag,{value:"Module"}));function xxe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Mxe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Axe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Oxe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Nxe=Array.prototype.slice,md=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Nxe.call(t,1))},Rxe=(e,t,n,i,s,a,c)=>new Date(e,t||0,n??1,i||0,s||0,a||0,c||0);var Cxe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Rxe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return md("join",arguments)},indexof:function(){return md("indexOf",arguments)},lastindexof:function(){return md("lastIndexOf",arguments)},slice:function(){return md("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return md("substring",arguments,String)},split:function(){return md("split",arguments,String)},replace:function(){return md("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Lxe=["view","item","group","xy","x","y"],M2=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&M2.add(setImmediate);const Pxe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Mxe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const s=e(t.property);if(n&&(e.memberDepth-=1),M2.has(i[s])){console.error(`Prevented interpretation of member "${s}" which could lead to insecure code execution`);return}return i[s]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||Cxe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Axe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Oxe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const s=e(i.key);return e.memberDepth-=1,M2.has(e(i.value))?console.error(`Prevented interpretation of property "${s}" which could lead to insecure code execution`):n[s]=e(i.value),n},{})};function ry(e,t,n,i,s,a){const c=d=>Pxe[d.type](c,d);return c.memberDepth=0,c.fn=Object.create(t),c.params=n,c.datum=i,c.event=s,c.item=a,Lxe.forEach(d=>c.fn[d]=function(){return s.vega[d](...arguments)}),c(e)}var Dxe={operator(e,t){const n=t.ast,i=e.functions;return s=>ry(n,i,s)},parameter(e,t){const n=t.ast,i=e.functions;return(s,a)=>ry(n,i,a,s)},event(e,t){const n=t.ast,i=e.functions;return s=>ry(n,i,void 0,void 0,s)},handler(e,t){const n=t.ast,i=e.functions;return(s,a)=>{const c=a.item&&a.item.datum;return ry(n,i,s,c,a)}},encode(e,t){const{marktype:n,channels:i}=t,s=e.functions,a=n==="group"||n==="image"||n==="rect";return(c,d)=>{const f=c.datum;let u=0,r;for(const h in i)r=ry(i[h].ast,s,d,f,void 0,c),c[h]!==r&&(c[h]=r,u=1);return n!=="rule"&&xxe(c,i,a),u}}};const Uxe="vega-lite",jxe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',$xe="5.21.0",zxe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],qxe="https://vega.github.io/vega-lite/",Vxe="Vega-Lite is a concise high-level language for interactive visualization.",Gxe=["vega","chart","visualization"],Hxe="build/vega-lite.js",Wxe="build/vega-lite.min.js",Yxe="build/vega-lite.min.js",Xxe="build/src/index",Kxe="build/src/index.d.ts",Jxe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Qxe=["bin","build","src","vega-lite*","tsconfig.json"],Zxe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},eMe={type:"git",url:"https://github.com/vega/vega-lite.git"},tMe="BSD-3-Clause",nMe={url:"https://github.com/vega/vega-lite/issues"},iMe={"@babel/core":"^7.24.9","@babel/preset-env":"^7.25.0","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.6.0",rollup:"^4.19.1","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.3","ts-jest":"^29.2.3","ts-json-schema-generator":"^2.3.0",typescript:"~5.5.4","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.26.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},sMe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},rMe={vega:"^5.24.0"},aMe={node:">=18"},oMe="yarn@1.22.19",lMe={name:Uxe,author:jxe,version:$xe,collaborators:zxe,homepage:qxe,description:Vxe,keywords:Gxe,main:Hxe,unpkg:Wxe,jsdelivr:Yxe,module:Xxe,types:Kxe,bin:Jxe,files:Qxe,scripts:Zxe,repository:eMe,license:tMe,bugs:nMe,devDependencies:iMe,dependencies:sMe,peerDependencies:rMe,engines:aMe,packageManager:oMe};function gR(e){return Fe(e,"or")}function mR(e){return Fe(e,"and")}function wR(e){return Fe(e,"not")}function Q0(e,t){if(wR(e))Q0(e.not,t);else if(mR(e))for(const n of e.and)Q0(n,t);else if(gR(e))for(const n of e.or)Q0(n,t);else t(e)}function Ku(e,t){return wR(e)?{not:Ku(e.not,t)}:mR(e)?{and:e.and.map(n=>Ku(n,t))}:gR(e)?{or:e.or.map(n=>Ku(n,t))}:t(e)}const bt=structuredClone;function fJ(e){throw new Error(e)}function xh(e,t){const n={};for(const i of t)Ve(e,i)&&(n[i]=e[i]);return n}function bs(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>cn(e)).join(",")})`};function Nt(e){if(Wt(e))return e;const t=ze(e)?e:cn(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const s=t.charCodeAt(i);n=(n<<5)-n+s,n=n&n}return n}function A2(e){return e===!1||e===null}function Ot(e,t){return e.includes(t)}function Mh(e,t){let n=0;for(const[i,s]of e.entries())if(t(s,i,n++))return!0;return!1}function bR(e,t){let n=0;for(const[i,s]of e.entries())if(!t(s,i,n++))return!1;return!0}function uJ(e,...t){for(const n of t)cMe(e,n??{});return e}function cMe(e,t){for(const n of Be(t))u_(e,n,t[n],!0)}function Ga(e,t){const n=[],i={};let s;for(const a of e)s=t(a),!(s in i)&&(i[s]=1,n.push(a));return n}function dMe(e,t){const n=Be(e),i=Be(t);if(n.length!==i.length)return!1;for(const s of n)if(e[s]!==t[s])return!1;return!0}function hJ(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function TR(e,t){for(const n of e)if(t.has(n))return!0;return!1}function O2(e){const t=new Set;for(const n of e){const s=go(n).map((c,d)=>d===0?c:`[${c}]`),a=s.map((c,d)=>s.slice(0,d+1).join(""));for(const c of a)t.add(c)}return t}function vR(e,t){return e===void 0||t===void 0?!0:TR(O2(e),O2(t))}function ln(e){return Be(e).length===0}const Be=Object.keys,bi=Object.values,Mc=Object.entries;function Vg(e){return e===!0||e===!1}function Tn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function cg(e,t){return wR(e)?`!(${cg(e.not,t)})`:mR(e)?`(${e.and.map(n=>cg(n,t)).join(") && (")})`:gR(e)?`(${e.or.map(n=>cg(n,t)).join(") || (")})`:t(e)}function o1(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&o1(e[n],t)&&delete e[n],ln(e)}function zm(e){return e.charAt(0).toUpperCase()+e.substr(1)}function ER(e,t="datum"){const n=go(e),i=[];for(let s=1;s<=n.length;s++){const a=`[${n.slice(0,s).map(Re).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function _J(e,t="datum"){return`${t}[${Re(go(e).join("."))}]`}function fMe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function kr(e){return`${go(e).map(fMe).join("\\.")}`}function gf(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function T_(e){return`${go(e).join(".")}`}function Ah(e){return e?go(e).length:0}function zn(...e){return e.find(t=>t!==void 0)}let pJ=42;function yJ(e){const t=++pJ;return e?String(e)+t:t}function uMe(){pJ=42}function gJ(e){return mJ(e)?e:`__${e}`}function mJ(e){return e.startsWith("__")}function Gg(e){if(e!==void 0)return(e%360+360)%360}function rS(e){return Wt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const o$=Object.getPrototypeOf(structuredClone({}));function Ys(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!Ys(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!Ys(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==o$.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==o$.toString)return e.toString()===t.toString();const s=Object.keys(e);if(n=s.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=n;i--!==0;){const a=s[i];if(!Ys(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function cn(e){const t=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let s,a;if(Array.isArray(i)){for(a="[",s=0;s<i.length;s++)s&&(a+=","),a+=n(i[s])||"null";return a+"]"}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const c=t.push(i)-1,d=Object.keys(i).sort();for(a="",s=0;s<d.length;s++){const f=d[s],u=n(i[f]);u&&(a&&(a+=","),a+=JSON.stringify(f)+":"+u)}return t.splice(c,1),`{${a}}`}(e)}function Fe(e,t){return je(e)&&Ve(e,t)&&e[t]!==void 0}const dl="row",fl="column",aS="facet",vn="x",ui="y",ba="x2",To="y2",Wc="xOffset",v_="yOffset",Ta="radius",kl="radius2",Ar="theta",xl="theta2",va="latitude",Ea="longitude",Sa="latitude2",xr="longitude2",Fs="color",vo="fill",Eo="stroke",ks="shape",Ml="size",$f="angle",Al="opacity",Yc="fillOpacity",Xc="strokeOpacity",Kc="strokeWidth",Jc="strokeDash",qm="text",Oh="order",Vm="detail",oS="key",mf="tooltip",lS="href",cS="url",dS="description",hMe={x:1,y:1,x2:1,y2:1},wJ={theta:1,theta2:1,radius:1,radius2:1};function bJ(e){return Ve(wJ,e)}const SR={longitude:1,longitude2:1,latitude:1,latitude2:1};function TJ(e){switch(e){case va:return"y";case Sa:return"y2";case Ea:return"x";case xr:return"x2"}}function vJ(e){return Ve(SR,e)}const _Me=Be(SR),BR={...hMe,...wJ,...SR,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Ju(e){return e===Fs||e===vo||e===Eo}const EJ={row:1,column:1,facet:1},gr=Be(EJ),IR={...BR,...EJ},pMe=Be(IR),{order:C4e,detail:L4e,tooltip:P4e,...yMe}=IR,{row:D4e,column:U4e,facet:j4e,...gMe}=yMe;function mMe(e){return Ve(gMe,e)}function SJ(e){return Ve(IR,e)}const wMe=[ba,To,Sa,xr,xl,kl];function BJ(e){return zf(e)!==e}function zf(e){switch(e){case ba:return vn;case To:return ui;case Sa:return va;case xr:return Ea;case xl:return Ar;case kl:return Ta}return e}function Ac(e){if(bJ(e))switch(e){case Ar:return"startAngle";case xl:return"endAngle";case Ta:return"outerRadius";case kl:return"innerRadius"}return e}function So(e){switch(e){case vn:return ba;case ui:return To;case va:return Sa;case Ea:return xr;case Ar:return xl;case Ta:return kl}}function xs(e){switch(e){case vn:case ba:return"width";case ui:case To:return"height"}}function IJ(e){switch(e){case vn:return"xOffset";case ui:return"yOffset";case ba:return"x2Offset";case To:return"y2Offset";case Ar:return"thetaOffset";case Ta:return"radiusOffset";case xl:return"theta2Offset";case kl:return"radius2Offset"}}function FR(e){switch(e){case vn:return"xOffset";case ui:return"yOffset"}}function bMe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const TMe=Be(BR),{x:$4e,y:z4e,x2:q4e,y2:V4e,xOffset:G4e,yOffset:H4e,latitude:W4e,longitude:Y4e,latitude2:X4e,longitude2:K4e,theta:J4e,theta2:Q4e,radius:Z4e,radius2:eUe,...kR}=BR,vMe=Be(kR),xR={x:1,y:1},Ol=Be(xR);function qn(e){return Ve(xR,e)}const MR={theta:1,radius:1},EMe=Be(MR);function fS(e){return e==="width"?vn:ui}const FJ={xOffset:1,yOffset:1};function Gm(e){return Ve(FJ,e)}const{text:tUe,tooltip:nUe,href:iUe,url:sUe,description:rUe,detail:aUe,key:oUe,order:lUe,...kJ}=kR,SMe=Be(kJ);function BMe(e){return Ve(kR,e)}function IMe(e){switch(e){case Fs:case vo:case Eo:case Ml:case ks:case Al:case Kc:case Jc:return!0;case Yc:case Xc:case $f:return!1}}const xJ={...xR,...MR,...FJ,...kJ},AR=Be(xJ);function Bo(e){return Ve(xJ,e)}function FMe(e,t){return xMe(e)[t]}const MJ={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:cUe,...kMe}=MJ;function xMe(e){switch(e){case Fs:case vo:case Eo:case dS:case Vm:case oS:case mf:case lS:case Oh:case Al:case Yc:case Xc:case Kc:case aS:case dl:case fl:return MJ;case vn:case ui:case Wc:case v_:case va:case Ea:return kMe;case ba:case To:case Sa:case xr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ml:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Jc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ks:return{point:"always",geoshape:"always"};case qm:return{text:"always"};case $f:return{point:"always",square:"always",text:"always"};case cS:return{image:"always"};case Ar:return{text:"always",arc:"always"};case Ta:return{text:"always",arc:"always"};case xl:case kl:return{arc:"always"}}}function WI(e){switch(e){case vn:case ui:case Ar:case Ta:case Wc:case v_:case Ml:case $f:case Kc:case Al:case Yc:case Xc:case ba:case To:case xl:case kl:return;case aS:case dl:case fl:case ks:case Jc:case qm:case mf:case lS:case cS:case dS:return"discrete";case Fs:case vo:case Eo:return"flexible";case va:case Ea:case Sa:case xr:case Vm:case oS:case Oh:return}}const MMe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},AMe={count:1,min:1,max:1};function bl(e){return Fe(e,"argmin")}function Qc(e){return Fe(e,"argmax")}function OR(e){return ze(e)&&Ve(MMe,e)}const OMe=new Set(["count","valid","missing","distinct"]);function uS(e){return ze(e)&&OMe.has(e)}function NMe(e){return ze(e)&&Ot(["min","max"],e)}const RMe=new Set(["count","sum","distinct","valid","missing"]),CMe=new Set(["mean","average","median","q1","q3","min","max"]);function AJ(e){return qc(e)&&(e=SS(e,void 0)),"bin"+Be(e).map(t=>hS(e[t])?Tn(`_${t}_${Mc(e[t])}`):Tn(`_${t}_${e[t]}`)).join("")}function pn(e){return e===!0||qf(e)&&!e.binned}function hi(e){return e==="binned"||qf(e)&&e.binned===!0}function qf(e){return je(e)}function hS(e){return Fe(e,"param")}function l$(e){switch(e){case dl:case fl:case Ml:case Fs:case vo:case Eo:case Kc:case Al:case Yc:case Xc:case ks:return 6;case Jc:return 4;default:return 10}}function Hm(e){return Fe(e,"expr")}function _i(e,{level:t}={level:0}){const n=Be(e||{}),i={};for(const s of n)i[s]=t===0?Gs(e[s]):_i(e[s],{level:t-1});return i}function OJ(e){const{anchor:t,frame:n,offset:i,orient:s,angle:a,limit:c,color:d,subtitleColor:f,subtitleFont:u,subtitleFontSize:r,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:_,subtitlePadding:l,...b}=e,m={...b,...d?{fill:d}:{}},E={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...s?{orient:s}:{},...a!==void 0?{angle:a}:{},...c!==void 0?{limit:c}:{}},B={...f?{subtitleColor:f}:{},...u?{subtitleFont:u}:{},...r?{subtitleFontSize:r}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},..._?{subtitleLineHeight:_}:{},...l?{subtitlePadding:l}:{}},I=xh(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:I,nonMarkTitleProperties:E,subtitle:B}}function Kl(e){return ze(e)||Te(e)&&ze(e[0])}function Ye(e){return Fe(e,"signal")}function Vf(e){return Fe(e,"step")}function LMe(e){return Te(e)?!1:Fe(e,"fields")&&!Fe(e,"data")}function PMe(e){return Te(e)?!1:Fe(e,"fields")&&Fe(e,"data")}function il(e){return Te(e)?!1:Fe(e,"field")&&Fe(e,"data")}const DMe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},UMe=Be(DMe),jMe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},N2=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function NJ(e){const t=Te(e.condition)?e.condition.map(c$):c$(e.condition);return{...Gs(e),condition:t}}function Gs(e){if(Hm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function c$(e){if(Hm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function mn(e){if(Hm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ye(e)?e:e!==void 0?{value:e}:void 0}function $Me(e){return Ye(e)?e.signal:Re(e)}function d$(e){return Ye(e)?e.signal:Re(e.value)}function Jr(e){return Ye(e)?e.signal:e==null?null:Re(e)}function zMe(e,t,n){for(const i of n){const s=co(i,t.markDef,t.config);s!==void 0&&(e[i]=mn(s))}return e}function RJ(e){return[].concat(e.type,e.style??[])}function an(e,t,n,i={}){const{vgChannel:s,ignoreVgConfig:a}=i;return s&&Fe(t,s)?t[s]:t[e]!==void 0?t[e]:a&&(!s||s===e)?void 0:co(e,t,n,i)}function co(e,t,n,{vgChannel:i}={}){const s=R2(e,t,n.style);return zn(i?s:void 0,s,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function R2(e,t,n){return CJ(e,RJ(t),n)}function CJ(e,t,n){t=$e(t);let i;for(const s of t){const a=n[s];Fe(a,e)&&(i=a[e])}return i}function LJ(e,t){return $e(e).reduce((n,i)=>(n.field.push(Pe(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function PJ(e,t){const n=[...e];return t.forEach(i=>{for(const s of n)if(Ys(s,i))return;n.push(i)}),n}function DJ(e,t){return Ys(e,t)||!t?e:e?[...$e(e),...$e(t)].join(", "):t}function UJ(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((Kl(n)||Ye(n))&&(Kl(i)||Ye(i)))return{explicit:e.explicit,value:DJ(n,i)};if(Kl(n)||Ye(n))return{explicit:e.explicit,value:n};if(Kl(i)||Ye(i))return{explicit:e.explicit,value:i};if(!Kl(n)&&!Ye(n)&&!Kl(i)&&!Ye(i))return{explicit:e.explicit,value:PJ(n,i)};throw new Error("It should never reach here")}function NR(e){return`Invalid specification ${cn(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const qMe='Autosize "fit" only works for single views and layered views.';function f$(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function u$(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function h$(e){return e?`Dropping "fit-${e}" because spec has discrete ${xs(e)}.`:'Dropping "fit" because spec has discrete size.'}function RR(e){return`Unknown field for ${e}. Cannot calculate view size.`}function _$(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function VMe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function GMe(e){return`The "nearest" transform is not supported for ${e} marks.`}function jJ(e){return`Selection not supported for ${e} yet.`}function HMe(e){return`Cannot find a selection named "${e}".`}const WMe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",YMe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",XMe="Legend bindings are only supported for selections over an individual field or encoding channel.";function KMe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function JMe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const QMe="The same selection must be used to override scale domains in a layered view.",ZMe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function eAe(e){return`Unknown repeated value "${e}".`}function p$(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const tAe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function nAe(e){return`Unrecognized parse "${e}".`}function y$(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const iAe="Attempt to add the same child twice.";function sAe(e){return`Ignoring an invalid transform: ${cn(e)}.`}const rAe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function g$(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function aAe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${cn(t)} is overridden by a child projection ${cn(n)}.`}const oAe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function lAe(e){return`${e}Offset dropped because ${e} is continuous`}function cAe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${cn(n)}}.`}function $J(e){return`Invalid field type "${e}".`}function dAe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function fAe(e){return`Invalid aggregation operator "${e}".`}function zJ(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function uAe(e){return`Position range does not support relative band size for ${e}.`}function C2(e,t){return`Dropping ${cn(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const hAe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function _S(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function _Ae(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function pAe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function yAe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function gAe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function YI(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function mAe(e){return`The ${e} for range marks cannot be an expression`}function wAe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function bAe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function TAe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function vAe(e){return`Cannot use the relative band size with ${e} scale.`}function EAe(e){return`Using unaggregated domain with raw field has no effect (${cn(e)}).`}function SAe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function BAe(e){return`Unaggregated domain is currently unsupported for log scale (${cn(e)}).`}function IAe(e){return`Cannot apply size to non-oriented mark "${e}".`}function FAe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function kAe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function qJ(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function VJ(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function xAe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${cn(n)} and ${cn(i)}). Using ${cn(n)}.`}function MAe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${cn(n)} and ${cn(i)}). Using the union of the two domains.`}function AAe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function OAe(e){return`Dropping sort property ${cn(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const m$="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",NAe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",RAe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",CAe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function LAe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function PAe(e){return`Stack is applied to a non-linear scale (${e}).`}function DAe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function l1(e,t){return`Invalid ${e}: ${cn(t)}.`}function UAe(e){return`Dropping day from datetime ${cn(e)} as day cannot be combined with other units.`}function jAe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function $Ae(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function zAe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function w$(e){return`1D error band does not support ${e}.`}function GJ(e){return`Channel ${e} is required for "binned" bin.`}function qAe(e){return`Channel ${e} should not be used with "binned" bin.`}function VAe(e){return`Domain for ${e} is required for threshold scale.`}const HJ=xA(kA);let Nh=HJ;function GAe(e){return Nh=e,Nh}function HAe(){return Nh=HJ,Nh}function xe(...e){Nh.warn(...e)}function WAe(...e){Nh.debug(...e)}function Gf(e){if(e&&je(e)){for(const t of LR)if(Fe(e,t))return!0}return!1}const WJ=["january","february","march","april","may","june","july","august","september","october","november","december"],YAe=WJ.map(e=>e.substr(0,3)),YJ=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],XAe=YJ.map(e=>e.substr(0,3));function KAe(e){if(rS(e)&&(e=+e),Wt(e))return e>4&&xe(l1("quarter",e)),e-1;throw new Error(l1("quarter",e))}function JAe(e){if(rS(e)&&(e=+e),Wt(e))return e-1;{const t=e.toLowerCase(),n=WJ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),s=YAe.indexOf(i);if(s!==-1)return s;throw new Error(l1("month",e))}}function QAe(e){if(rS(e)&&(e=+e),Wt(e))return e%7;{const t=e.toLowerCase(),n=YJ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),s=XAe.indexOf(i);if(s!==-1)return s;throw new Error(l1("day",e))}}function CR(e,t){const n=[];if(t&&e.day!==void 0&&Be(e).length>1&&(xe(UAe(e)),e=bt(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?JAe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?KAe(e.quarter):e.quarter;n.push(Wt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?QAe(e.day):e.day;n.push(Wt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const s=e[i];n.push(typeof s>"u"?0:s)}return n}function wf(e){const n=CR(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function ZAe(e){const n=CR(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function eOe(e){const t=CR(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const XJ={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},LR=Be(XJ);function tOe(e){return Ve(XJ,e)}function Hf(e){return je(e)?e.binned:KJ(e)}function KJ(e){return e&&e.startsWith("binned")}function PR(e){return e.startsWith("utc")}function nOe(e){return e.substring(3)}const iOe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function pS(e){return LR.filter(t=>QJ(e,t))}function JJ(e){const t=pS(e);return t[t.length-1]}function QJ(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function sOe(e,t,{end:n}={end:!1}){const i=ER(t),s=PR(e)?"utc":"";function a(f){return f==="quarter"?`(${s}quarter(${i})-1)`:`${s}${f}(${i})`}let c;const d={};for(const f of LR)QJ(e,f)&&(d[f]=a(f),c=f);return n&&(d[c]+="+1"),ZAe(d)}function ZJ(e){if(!e)return;const t=pS(e);return`timeUnitSpecifier(${cn(t)}, ${cn(iOe)})`}function rOe(e,t,n){if(!e)return;const i=ZJ(e);return`${n||PR(e)?"utc":"time"}Format(${t}, ${i})`}function ci(e){if(!e)return;let t;return ze(e)?KJ(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:je(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),PR(t.unit)&&(t.utc=!0,t.unit=nOe(t.unit)),t}function aOe(e){const{utc:t,...n}=ci(e);return n.unit?(t?"utc":"")+Be(n).map(i=>Tn(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+Be(n).map(i=>Tn(`_${i}_${n[i]}`)).join("")}function eQ(e,t=n=>n){const n=ci(e),i=JJ(n.unit);if(i&&i!=="day"){const s={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:c}=tQ(i,n.step),d={...s,[c]:+s[c]+a};return`${t(wf(d))} - ${t(wf(s))}`}}const oOe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function lOe(e){return Ve(oOe,e)}function tQ(e,t=1){if(lOe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function cOe(e){return Fe(e,"param")}function DR(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function UR(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function jR(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function $R(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function zR(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function qR(e){if(e!=null&&e.field){if(Te(e.range)&&e.range.length===2)return!0;if(Ye(e.range))return!0}return!1}function VR(e){return!!(e!=null&&e.field)&&(Te(e.oneOf)||Te(e.in))}function dOe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function nQ(e){return VR(e)||DR(e)||qR(e)||UR(e)||$R(e)||jR(e)||zR(e)}function ka(e,t){return BS(e,{timeUnit:t,wrapTime:!0})}function fOe(e,t){return e.map(n=>ka(n,t))}function iQ(e,t=!0){const{field:n}=e,i=ci(e.timeUnit),{unit:s,binned:a}=i||{},c=Pe(e,{expr:"datum"}),d=s?`time(${a?c:sOe(s,n)})`:c;if(DR(e))return`${d}===${ka(e.equal,s)}`;if(UR(e)){const f=e.lt;return`${d}<${ka(f,s)}`}else if($R(e)){const f=e.gt;return`${d}>${ka(f,s)}`}else if(jR(e)){const f=e.lte;return`${d}<=${ka(f,s)}`}else if(zR(e)){const f=e.gte;return`${d}>=${ka(f,s)}`}else{if(VR(e))return`indexof([${fOe(e.oneOf,s).join(",")}], ${d}) !== -1`;if(dOe(e))return yS(d,e.valid);if(qR(e)){const{range:f}=_i(e),u=Ye(f)?{signal:`${f.signal}[0]`}:f[0],r=Ye(f)?{signal:`${f.signal}[1]`}:f[1];if(u!==null&&r!==null&&t)return"inrange("+d+", ["+ka(u,s)+", "+ka(r,s)+"])";const h=[];return u!==null&&h.push(`${d} >= ${ka(u,s)}`),r!==null&&h.push(`${d} <= ${ka(r,s)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${cn(e)}`)}function yS(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function uOe(e){return nQ(e)&&e.timeUnit?{...e,timeUnit:ci(e.timeUnit)}:e}const Wm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function hOe(e){return e==="quantitative"||e==="temporal"}function sQ(e){return e==="ordinal"||e==="nominal"}const bf=Wm.quantitative,GR=Wm.ordinal,Rh=Wm.temporal,HR=Wm.nominal,E_=Wm.geojson;function _Oe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case bf:return"quantitative";case"t":case Rh:return"temporal";case"o":case GR:return"ordinal";case"n":case HR:return"nominal";case E_:return"geojson"}}const pi={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},L2={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function pOe(e,t){const n=L2[e],i=L2[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const yOe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function b$(e){return yOe[e]}const rQ=new Set(["linear","log","pow","sqrt","symlog"]),aQ=new Set([...rQ,"time","utc"]);function oQ(e){return rQ.has(e)}const lQ=new Set(["quantile","quantize","threshold"]),gOe=new Set([...aQ,...lQ,"sequential","identity"]),mOe=new Set(["ordinal","bin-ordinal","point","band"]);function di(e){return mOe.has(e)}function aa(e){return gOe.has(e)}function Ha(e){return aQ.has(e)}function Ch(e){return lQ.has(e)}const wOe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function bOe(e){return!ze(e)&&Fe(e,"name")}function cQ(e){return Fe(e,"param")}function TOe(e){return Fe(e,"unionWith")}function vOe(e){return je(e)&&"field"in e}const EOe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:dUe,domain:fUe,range:uUe,rangeMax:hUe,rangeMin:_Ue,scheme:pUe,...SOe}=EOe,BOe=Be(SOe);function P2(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Ha(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Ha(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ha(e);case"nice":return Ha(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return aa(e)&&!Ot(["log","time","utc","threshold","quantile"],e)}}function dQ(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Ju(e)?void 0:TAe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function IOe(e,t){return Ot([GR,HR],t)?e===void 0||di(e):t===Rh?Ot([pi.TIME,pi.UTC,void 0],e):t===bf?oQ(e)||Ch(e)||e===void 0:!0}function FOe(e,t,n=!1){if(!Bo(e))return!1;switch(e){case vn:case ui:case Wc:case v_:case Ar:case Ta:return Ha(t)||t==="band"?!0:t==="point"?!n:!1;case Ml:case Kc:case Al:case Yc:case Xc:case $f:return Ha(t)||Ch(t)||Ot(["band","point","ordinal"],t);case Fs:case vo:case Eo:return t!=="band";case Jc:case ks:return t==="ordinal"||Ch(t)}}function kOe(e){return je(e)&&"value"in e}const cs={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},fQ=cs.arc,gS=cs.area,mS=cs.bar,xOe=cs.image,wS=cs.line,bS=cs.point,MOe=cs.rect,c1=cs.rule,uQ=cs.text,WR=cs.tick,AOe=cs.trail,YR=cs.circle,XR=cs.square,hQ=cs.geoshape;function Zc(e){return["line","area","trail"].includes(e)}function Hg(e){return["rect","bar","image","arc","tick"].includes(e)}const OOe=new Set(Be(cs));function fo(e){return Fe(e,"type")}const NOe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],ROe=["fill","fillOpacity"],COe=[...NOe,...ROe],LOe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},T$=Be(LOe),XI=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],POe={area:["line","point"],bar:XI,rect:XI,line:["point"],tick:["bandSize","thickness",...XI]},DOe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},UOe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},_Q=Be(UOe);function Tf(e){return Fe(e,"band")}const jOe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},$Oe=5,KR={binSpacing:0,continuousBandSize:$Oe,minBandSize:.25,timeUnitBandPosition:.5},zOe={...KR,binSpacing:1},qOe={...KR,thickness:1};function VOe(e){return fo(e)?e.type:e}function pQ(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function JR({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:s}){var d,f;if(!i||!aa(i)||s)return"always-valid";const a=pQ(an("invalid",e,t),{isPath:Zc(e.type)});return((f=(d=t.scale)==null?void 0:d.invalid)==null?void 0:f[n])!==void 0?"show":a}function GOe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function yQ({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const s=`${i}[0]`,a=`peek(${i})`,c=t.domainHasZero();return c==="definitely"?{scale:e,value:0}:c==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?s:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?s:a})`}}function gQ({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:s,config:a}){var r;const c=n==null?void 0:n.get("type"),d=la(t),f=uS(d==null?void 0:d.aggregate),u=JR({scaleChannel:e,markDef:s,config:a,scaleType:c,isCountAggregate:f});if(d&&u==="show"){const h=((r=a.scale.invalid)==null?void 0:r[e])??"zero-or-min";return{test:yS(Pe(d,{expr:"datum"}),!1),...HOe(h,n,i)}}}function HOe(e,t,n){if(kOe(e)){const{value:i}=e;return Ye(i)?{signal:i.signal}:{value:i}}return yQ({scale:t,scaleName:n,mode:"zeroOrMin"})}function QR(e){const{channel:t,channelDef:n,markDef:i,scale:s,scaleName:a,config:c}=e,d=zf(t),f=ZR(e),u=gQ({scaleChannel:d,channelDef:n,scale:s,scaleName:a,markDef:i,config:c});return u!==void 0?[u,f]:f}function WOe(e){const{datum:t}=e;return Gf(t)?wf(t):`${cn(t)}`}function Jd(e,t,n,i){const s={};if(t&&(s.scale=t),Io(e)){const{datum:a}=e;Gf(a)?s.signal=wf(a):Ye(a)?s.signal=a.signal:Hm(a)?s.signal=a.expr:s.value=a}else s.field=Pe(e,n);if(i){const{offset:a,band:c}=i;a&&(s.offset=a),c&&(s.band=c)}return s}function d1({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:s,endSuffix:a="end",bandPosition:c=.5}){const d=!Ye(c)&&0<c&&c<1?"datum":void 0,f=Pe(t,{expr:d,suffix:s}),u=n!==void 0?Pe(n,{expr:d}):Pe(t,{suffix:a,expr:d}),r={};if(c===0||c===1){r.scale=e;const h=c===0?f:u;r.field=h}else{const h=Ye(c)?`(1-${c.signal}) * ${f} + ${c.signal} * ${u}`:`${1-c} * ${f} + ${c} * ${u}`;r.signal=`scale("${e}", ${h})`}return i&&(r.offset=i),r}function YOe({scaleName:e,fieldDef:t}){const n=Pe(t,{expr:"datum"}),i=Pe(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function ZR({channel:e,channelDef:t,channel2Def:n,markDef:i,config:s,scaleName:a,scale:c,stack:d,offset:f,defaultRef:u,bandPosition:r}){if(t){if(vt(t)){const h=c==null?void 0:c.get("type");if(as(t)){r??(r=Oc({fieldDef:t,fieldDef2:n,markDef:i,config:s}));const{bin:p,timeUnit:_,type:l}=t;if(pn(p)||r&&_&&l===Rh)return d!=null&&d.impute?Jd(t,a,{binSuffix:"mid"},{offset:f}):r&&!di(h)?d1({scaleName:a,fieldOrDatumDef:t,bandPosition:r,offset:f}):Jd(t,a,Qm(t,e)?{binSuffix:"range"}:{},{offset:f});if(hi(p)){if(Oe(n))return d1({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:r,offset:f});xe(GJ(e===vn?ba:To))}}return Jd(t,a,di(h)?{binSuffix:"range"}:{},{offset:f,band:h==="band"?r??t.bandPosition??.5:void 0})}else if(oa(t)){const h=t.value,p=f?{offset:f}:{};return{...dg(e,h),...p}}}return Bt(u)&&(u=u()),u&&{...u,...f?{offset:f}:{}}}function dg(e,t){return Ot(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ot(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:mn(t)}function vf(e){return e&&e!=="number"&&e!=="time"}function mQ(e,t,n){return`${e}(${t}${n?`, ${cn(n)}`:""})`}const XOe=" – ";function eC({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:s,config:a}){var f,u;if(vf(n))return Qr({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const c=wQ(e,i,s),d=Lh(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(d==="quantitative"){if(s&&a.normalizedNumberFormatType)return Qr({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return Qr({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(d==="temporal"&&a.timeFormatType&&Oe(e)&&e.timeUnit===void 0)return Qr({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}if(Dh(e)){const r=JOe({field:c,timeUnit:Oe(e)?(f=ci(e.timeUnit))==null?void 0:f.unit:void 0,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:Wf(e)&&((u=e.scale)==null?void 0:u.type)===pi.UTC});return r?{signal:r}:void 0}if(t=D2({type:d,specifiedFormat:t,config:a,normalizeStack:s}),Oe(e)&&pn(e.bin)){const r=Pe(e,{expr:i,binSuffix:"end"});return{signal:Ym(c,r,t,n,a)}}else return t||Lh(e)==="quantitative"?{signal:`${vQ(c,t)}`}:{signal:`isValid(${c}) ? ${c} : ""+${c}`}}function wQ(e,t,n){return Oe(e)?n?`${Pe(e,{expr:t,suffix:"end"})}-${Pe(e,{expr:t,suffix:"start"})}`:Pe(e,{expr:t}):WOe(e)}function Qr({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:s,config:a,field:c}){if(c??(c=wQ(e,i,s)),c!=="datum.value"&&Oe(e)&&pn(e.bin)){const d=Pe(e,{expr:i,binSuffix:"end"});return{signal:Ym(c,d,t,n,a)}}return{signal:mQ(n,c,t)}}function bQ(e,t,n,i,s,a){var c;if(!(ze(i)&&vf(i))&&!(n===void 0&&i===void 0&&s.customFormatTypes&&Lh(e)==="quantitative"&&(s.normalizedNumberFormatType&&Ph(e)&&e.stack==="normalize"||s.numberFormatType))){if(Ph(e)&&e.stack==="normalize"&&s.normalizedNumberFormat)return D2({type:"quantitative",config:s,normalizeStack:!0});if(Dh(e)){const d=Oe(e)?(c=ci(e.timeUnit))==null?void 0:c.unit:void 0;return d===void 0&&s.customFormatTypes&&s.timeFormatType?void 0:KOe({specifiedFormat:n,timeUnit:d,config:s,omitTimeFormatConfig:a})}return D2({type:t,specifiedFormat:n,config:s})}}function TQ(e,t,n){var i;if(e&&(Ye(e)||e==="number"||e==="time"))return e;if(Dh(t)&&n!=="time"&&n!=="utc")return Oe(t)&&((i=ci(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function D2({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(ze(t))return t;if(e===bf)return i?n.normalizedNumberFormat:n.numberFormat}function KOe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:ZJ(t)}:i?void 0:n.timeFormat)}function vQ(e,t){return`format(${e}, "${t||""}")`}function v$(e,t,n,i){return vf(n)?mQ(n,e,t):vQ(e,(ze(t)?t:void 0)??i.numberFormat)}function Ym(e,t,n,i,s){if(n===void 0&&i===void 0&&s.customFormatTypes&&s.numberFormatType)return Ym(e,t,s.numberFormat,s.numberFormatType,s);const a=v$(e,n,i,s),c=v$(t,n,i,s);return`${yS(e,!1)} ? "null" : ${a} + "${XOe}" + ${c}`}function JOe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:s,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=ze(n)?n:s,`${a?"utc":"time"}Format(${e}, '${n}')`):rOe(t,e,a)}const TS="min",QOe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function E$(e){return Ve(QOe,e)}function ZOe(e){return Fe(e,"encoding")}function ul(e){return e&&(e.op==="count"||Fe(e,"field"))}function EQ(e){return e&&Te(e)}function Xm(e){return Fe(e,"row")||Fe(e,"column")}function tC(e){return Fe(e,"header")}function vS(e){return Fe(e,"facet")}function eNe(e){return Fe(e,"param")}function tNe(e){return!ze(e)&&Fe(e,"repeat")}function S$(e){const{field:t,timeUnit:n,bin:i,aggregate:s}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...s?{aggregate:s}:{},field:t}}function nC(e){return Fe(e,"sort")}function Oc({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(vt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Oe(e)){const{timeUnit:s,bin:a}=e;if(s&&!t)return co("timeUnitBandPosition",n,i);if(pn(a))return .5}}function SQ({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:s,scaleType:a,useVlSizeChannel:c}){var u,r,h;const d=xs(e),f=an(c?"size":d,i,s,{vgChannel:d});if(f!==void 0)return f;if(Oe(t)){const{timeUnit:p,bin:_}=t;if(p&&!n)return{band:co("timeUnitBandSize",i,s)};if(pn(_)&&!di(a))return{band:1}}if(Hg(i.type))return a?di(a)?((u=s[i.type])==null?void 0:u.discreteBandSize)||{band:1}:(r=s[i.type])==null?void 0:r.continuousBandSize:(h=s[i.type])==null?void 0:h.discreteBandSize}function BQ(e,t,n,i){return pn(e.bin)||e.timeUnit&&as(e)&&e.type==="temporal"?Oc({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function IQ(e){return Fe(e,"sort")&&!Fe(e,"field")}function Km(e){return Fe(e,"condition")}function ES(e){const t=e==null?void 0:e.condition;return!!t&&!Te(t)&&Oe(t)}function Jm(e){const t=e==null?void 0:e.condition;return!!t&&!Te(t)&&vt(t)}function nNe(e){const t=e==null?void 0:e.condition;return!!t&&(Te(t)||oa(t))}function Oe(e){return Fe(e,"field")||(e==null?void 0:e.aggregate)==="count"}function Lh(e){return e==null?void 0:e.type}function Io(e){return Fe(e,"datum")}function ac(e){return as(e)&&!u1(e)||f1(e)}function B$(e){return as(e)&&e.type==="quantitative"&&!e.bin||f1(e)}function f1(e){return Io(e)&&Wt(e.datum)}function vt(e){return Oe(e)||Io(e)}function as(e){return e&&(Fe(e,"field")||e.aggregate==="count")&&Fe(e,"type")}function oa(e){return Fe(e,"value")}function Wf(e){return Fe(e,"scale")||Fe(e,"sort")}function Ph(e){return Fe(e,"axis")||Fe(e,"stack")||Fe(e,"impute")}function FQ(e){return Fe(e,"legend")}function kQ(e){return Fe(e,"format")||Fe(e,"formatType")}function iNe(e){return bs(e,["legend","axis","header","scale"])}function sNe(e){return Fe(e,"op")}function Pe(e,t={}){let n=e.field;const i=t.prefix;let s=t.suffix,a="";if(aNe(e))n=gJ("count");else{let c;if(!t.nofn)if(sNe(e))c=e.op;else{const{bin:d,aggregate:f,timeUnit:u}=e;pn(d)?(c=AJ(d),s=(t.binSuffix??"")+(t.suffix??"")):f?Qc(f)?(a=`["${n}"]`,n=`argmax_${f.argmax}`):bl(f)?(a=`["${n}"]`,n=`argmin_${f.argmin}`):c=String(f):u&&!Hf(u)&&(c=aOe(u),s=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}c&&(n=n?`${c}_${n}`:c)}return s&&(n=`${n}_${s}`),i&&(n=`${i}_${n}`),t.forAs?T_(n):t.expr?_J(n,t.expr)+a:kr(n)+a}function u1(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Oe(e)&&!!e.bin;case"temporal":return!1}throw new Error($J(e.type))}function rNe(e){var t;return Wf(e)&&Ch((t=e.scale)==null?void 0:t.type)}function aNe(e){return e.aggregate==="count"}function oNe(e,t){var c;const{field:n,bin:i,timeUnit:s,aggregate:a}=e;if(a==="count")return t.countTitle;if(pn(i))return`${n} (binned)`;if(s&&!Hf(s)){const d=(c=ci(s))==null?void 0:c.unit;if(d)return`${n} (${pS(d).join("-")})`}else if(a)return Qc(a)?`${n} for max ${a.argmax}`:bl(a)?`${n} for min ${a.argmin}`:`${zm(a)} of ${n}`;return n}function lNe(e){const{aggregate:t,bin:n,timeUnit:i,field:s}=e;if(Qc(t))return`${s} for argmax(${t.argmax})`;if(bl(t))return`${s} for argmin(${t.argmin})`;const a=i&&!Hf(i)?ci(i):void 0,c=t||(a==null?void 0:a.unit)||(a==null?void 0:a.maxbins)&&"timeunit"||pn(n)&&"bin";return c?`${c.toUpperCase()}(${s})`:s}const xQ=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return lNe(e);default:return oNe(e,t)}};let MQ=xQ;function AQ(e){MQ=e}function cNe(){AQ(xQ)}function Qu(e,t,{allowDisabling:n,includeDefault:i=!0}){var d;const s=(d=iC(e))==null?void 0:d.title;if(!Oe(e))return s??e.title;const a=e,c=i?sC(a,t):void 0;return n?zn(s,a.title,c):s??a.title??c}function iC(e){if(Ph(e)&&e.axis)return e.axis;if(FQ(e)&&e.legend)return e.legend;if(tC(e)&&e.header)return e.header}function sC(e,t){return MQ(e,t)}function h1(e){if(kQ(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=iC(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function dNe(e,t){var a;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(nC(e)&&Te(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:s}=e;if(s)return"temporal";if(i||n&&!Qc(n)&&!bl(n))return"quantitative";if(Wf(e)&&((a=e.scale)!=null&&a.type))switch(L2[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function la(e){if(Oe(e))return e;if(ES(e))return e.condition}function Zn(e){if(vt(e))return e;if(Jm(e))return e.condition}function OQ(e,t,n,i={}){if(ze(e)||Wt(e)||qc(e)){const s=ze(e)?"string":Wt(e)?"number":"boolean";return xe(cAe(t,s,e)),{value:e}}return vt(e)?_1(e,t,n,i):Jm(e)?{...e,condition:_1(e.condition,t,n,i)}:e}function _1(e,t,n,i){if(kQ(e)){const{format:s,formatType:a,...c}=e;if(vf(a)&&!n.customFormatTypes)return xe(g$(t)),_1(c,t,n,i)}else{const s=Ph(e)?"axis":FQ(e)?"legend":tC(e)?"header":null;if(s&&e[s]){const{format:a,formatType:c,...d}=e[s];if(vf(c)&&!n.customFormatTypes)return xe(g$(t)),_1({...e,[s]:d},t,n,i)}}return Oe(e)?rC(e,t,i):fNe(e)}function fNe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Wt(n)?"quantitative":ze(n)?"nominal":Gf(n)?"temporal":void 0,{...e,type:t}}function rC(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:s,bin:a,field:c}=e,d={...e};if(!n&&i&&!OR(i)&&!Qc(i)&&!bl(i)&&(xe(fAe(i)),delete d.aggregate),s&&(d.timeUnit=ci(s)),c&&(d.field=`${c}`),pn(a)&&(d.bin=SS(a,t)),hi(a)&&!qn(t)&&xe(qAe(t)),as(d)){const{type:f}=d,u=_Oe(f);f!==u&&(d.type=u),f!=="quantitative"&&uS(i)&&(xe(dAe(f,i)),d.type="quantitative")}else if(!BJ(t)){const f=dNe(d,t);d.type=f}if(as(d)){const{compatible:f,warning:u}=uNe(d,t)||{};f===!1&&xe(u)}if(nC(d)&&ze(d.sort)){const{sort:f}=d;if(E$(f))return{...d,sort:{encoding:f}};const u=f.substring(1);if(f.charAt(0)==="-"&&E$(u))return{...d,sort:{encoding:u,order:"descending"}}}if(tC(d)){const{header:f}=d;if(f){const{orient:u,...r}=f;if(u)return{...d,header:{...r,labelOrient:f.labelOrient||u,titleOrient:f.titleOrient||u}}}}return d}function SS(e,t){return qc(e)?{maxbins:l$(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:l$(t)}:e}const ou={compatible:!0};function uNe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case dl:case fl:case aS:return u1(e)?ou:{compatible:!1,warning:pAe(t)};case vn:case ui:case Wc:case v_:case Fs:case vo:case Eo:case qm:case Vm:case oS:case mf:case lS:case cS:case $f:case Ar:case Ta:case dS:return ou;case Ea:case xr:case va:case Sa:return n!==bf?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:ou;case Al:case Yc:case Xc:case Kc:case Ml:case xl:case kl:case ba:case To:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:ou;case ks:case Jc:return!u1(e)&&!rNe(e)?{compatible:!1,warning:yAe(t)}:ou;case Oh:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:ou}}function Dh(e){const{formatType:t}=h1(e);return t==="time"||!t&&hNe(e)}function hNe(e){return e&&(e.type==="temporal"||Oe(e)&&!!e.timeUnit)}function BS(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:s}){var f;const a=t&&((f=ci(t))==null?void 0:f.unit);let c=a||n==="temporal",d;return Hm(e)?d=e.expr:Ye(e)?d=e.signal:Gf(e)?(c=!0,d=wf(e)):(ze(e)||Wt(e))&&c&&(d=`datetime(${cn(e)})`,tOe(a)&&(Wt(e)&&e<1e4||ze(e)&&isNaN(Date.parse(e)))&&(d=wf({[a]:e}))),d?i&&c?`time(${d})`:d:s?void 0:cn(e)}function NQ(e,t){const{type:n}=e;return t.map(i=>{const s=Oe(e)&&!Hf(e.timeUnit)?e.timeUnit:void 0,a=BS(i,{timeUnit:s,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function Qm(e,t){return pn(e.bin)?Bo(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const I$={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Zm(e){return e==null?void 0:e.condition}const RQ=["domain","grid","labels","ticks","title"],_Ne={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},CQ={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},pNe={...CQ,style:1,labelExpr:1,encoding:1};function F$(e){return Ve(pNe,e)}const yNe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},LQ=Be(yNe);function Nl(e){return Fe(e,"mark")}class IS{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Nl(t)?VOe(t.mark)===this.name:!1}}function Qd(e,t){const n=e&&e[t];return n?Te(n)?Mh(n,i=>!!i.field):Oe(n)||ES(n):!1}function PQ(e,t){const n=e&&e[t];return n?Te(n)?Mh(n,i=>!!i.field):Oe(n)||Io(n)||Jm(n):!1}function DQ(e,t){if(qn(t)){const n=e[t];if((Oe(n)||Io(n))&&(sQ(n.type)||Oe(n)&&n.timeUnit)){const i=FR(t);return PQ(e,i)}}return!1}function UQ(e){return Mh(pMe,t=>{if(Qd(e,t)){const n=e[t];if(Te(n))return Mh(n,i=>!!i.aggregate);{const i=la(n);return i&&!!i.aggregate}}return!1})}function jQ(e,t){const n=[],i=[],s=[],a=[],c={};return aC(e,(d,f)=>{if(Oe(d)){const{field:u,aggregate:r,bin:h,timeUnit:p,..._}=d;if(r||p||h){const l=iC(d),b=l==null?void 0:l.title;let m=Pe(d,{forAs:!0});const E={...b?[]:{title:Qu(d,t,{allowDisabling:!0})},..._,field:m};if(r){let B;if(Qc(r)?(B="argmax",m=Pe({op:"argmax",field:r.argmax},{forAs:!0}),E.field=`${m}.${u}`):bl(r)?(B="argmin",m=Pe({op:"argmin",field:r.argmin},{forAs:!0}),E.field=`${m}.${u}`):r!=="boxplot"&&r!=="errorbar"&&r!=="errorband"&&(B=r),B){const I={op:B,as:m};u&&(I.field=u),a.push(I)}}else if(n.push(m),as(d)&&pn(h)){if(i.push({bin:h,field:u,as:m}),n.push(Pe(d,{binSuffix:"end"})),Qm(d,f)&&n.push(Pe(d,{binSuffix:"range"})),qn(f)){const B={field:`${m}_end`};c[`${f}2`]=B}E.bin="binned",BJ(f)||(E.type=bf)}else if(p&&!Hf(p)){s.push({timeUnit:p,field:u,as:m});const B=as(d)&&d.type!==Rh&&"time";B&&(f===qm||f===mf?E.formatType=B:BMe(f)?E.legend={formatType:B,...E.legend}:qn(f)&&(E.axis={formatType:B,...E.axis}))}c[f]=E}else n.push(u),c[f]=e[f]}else c[f]=e[f]}),{bins:i,timeUnits:s,aggregate:a,groupby:n,encoding:c}}function gNe(e,t,n){const i=FMe(t,n);if(i){if(i==="binned"){const s=e[t===ba?vn:ui];return!!(Oe(s)&&Oe(e[t])&&hi(s.bin))}}else return!1;return!0}function mNe(e,t,n,i){const s={};for(const a of Be(e))SJ(a)||xe(_Ae(a));for(let a of TMe){if(!e[a])continue;const c=e[a];if(Gm(a)){const d=bMe(a),f=s[d];if(Oe(f)&&hOe(f.type)&&Oe(c)&&!f.timeUnit){xe(lAe(d));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(xe(oAe),a=Ar),!gNe(e,a,t)){xe(_S(a,t));continue}if(a===Ml&&t==="line"){const d=la(e[a]);if(d!=null&&d.aggregate){xe(hAe);continue}}if(a===Fs&&(n?"fill"in e:"stroke"in e)){xe(zJ("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===Vm||a===Oh&&!Te(c)&&!oa(c)||a===mf&&Te(c)){if(c){if(a===Oh){const d=e[a];if(IQ(d)){s[a]=d;continue}}s[a]=$e(c).reduce((d,f)=>(Oe(f)?d.push(rC(f,a)):xe(C2(f,a)),d),[])}}else{if(a===mf&&c===null)s[a]=null;else if(!Oe(c)&&!Io(c)&&!oa(c)&&!Km(c)&&!Ye(c)){xe(C2(c,a));continue}s[a]=OQ(c,a,i)}}return s}function FS(e,t){const n={};for(const i of Be(e)){const s=OQ(e[i],i,t,{compositeMark:!0});n[i]=s}return n}function wNe(e){const t=[];for(const n of Be(e))if(Qd(e,n)){const i=e[n],s=$e(i);for(const a of s)Oe(a)?t.push(a):ES(a)&&t.push(a.condition)}return t}function aC(e,t,n){if(e)for(const i of Be(e)){const s=e[i];if(Te(s))for(const a of s)t.call(n,a,i);else t.call(n,s,i)}}function bNe(e,t,n,i){return e?Be(e).reduce((s,a)=>{const c=e[a];return Te(c)?c.reduce((d,f)=>t.call(i,d,f,a),s):t.call(i,s,c,a)},n):n}function $Q(e,t){return Be(t).reduce((n,i)=>{switch(i){case vn:case ui:case lS:case dS:case cS:case ba:case To:case Wc:case v_:case Ar:case xl:case Ta:case kl:case va:case Ea:case Sa:case xr:case qm:case ks:case $f:case mf:return n;case Oh:if(e==="line"||e==="trail")return n;case Vm:case oS:{const s=t[i];if(Te(s)||Oe(s))for(const a of $e(s))a.aggregate||n.push(Pe(a,{}));return n}case Ml:if(e==="trail")return n;case Fs:case vo:case Eo:case Al:case Yc:case Xc:case Jc:case Kc:{const s=la(t[i]);return s&&!s.aggregate&&n.push(Pe(s,{})),n}}},[])}function TNe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,s;if(Te(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(s||(s=[]),s.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:s=t;return Te(s)&&s.length===1&&(s=s[0]),{customTooltipWithoutAggregatedField:s,filteredEncoding:n}}function U2(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const s=e.map(({fieldPrefix:c,titlePrefix:d})=>{const f=i?` of ${oC(t)}`:"";return{field:c+t.field,type:t.type,title:Ye(d)?{signal:`${d}"${escape(f)}"`}:d+f}}),a=wNe(n).map(iNe);return{tooltip:[...s,...Ga(a,Nt)]}}function oC(e){const{title:t,field:n}=e;return zn(t,n)}function lC(e,t,n,i,s){const{scale:a,axis:c}=n;return({partName:d,mark:f,positionPrefix:u,endPositionPrefix:r=void 0,extraEncoding:h={}})=>{const p=oC(n);return zQ(e,d,s,{mark:f,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...c!==void 0?{axis:c}:{}},...ze(r)?{[`${t}2`]:{field:`${r}_${n.field}`}}:{},...i,...h}})}}function zQ(e,t,n,i){const{clip:s,color:a,opacity:c}=e,d=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...s?{clip:s}:{},...a?{color:a}:{},...c?{opacity:c}:{},...fo(i.mark)?i.mark:{type:i.mark},style:`${d}-${String(t)}`,...qc(e[t])?{}:e[t]}}]:[]}function qQ(e,t,n){const{encoding:i}=e,s=t==="vertical"?"y":"x",a=i[s],c=i[`${s}2`],d=i[`${s}Error`],f=i[`${s}Error2`];return{continuousAxisChannelDef:Qb(a,n),continuousAxisChannelDef2:Qb(c,n),continuousAxisChannelDefError:Qb(d,n),continuousAxisChannelDefError2:Qb(f,n),continuousAxis:s}}function Qb(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&xe(zAe(n,t)),i}else return e}function VQ(e,t){const{mark:n,encoding:i}=e,{x:s,y:a}=i;if(fo(n)&&n.orient)return n.orient;if(ac(s)){if(ac(a)){const c=Oe(s)&&s.aggregate,d=Oe(a)&&a.aggregate;if(!c&&d===t)return"vertical";if(!d&&c===t)return"horizontal";if(c===t&&d===t)throw new Error("Both x and y cannot have aggregate");return Dh(a)&&!Dh(s)?"horizontal":"vertical"}return"horizontal"}else{if(ac(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const p1="boxplot",vNe=["box","median","outliers","rule","ticks"],ENe=new IS(p1,HQ);function GQ(e){return Wt(e)?"tukey":e}function HQ(e,{config:t}){e={...e,encoding:FS(e.encoding,t)};const{mark:n,encoding:i,params:s,projection:a,...c}=e,d=fo(n)?n:{type:n};s&&xe(jJ("boxplot"));const f=d.extent??t.boxplot.extent,u=an("size",d,t),r=d.invalid,h=GQ(f),{bins:p,timeUnits:_,transform:l,continuousAxisChannelDef:b,continuousAxis:m,groupby:E,aggregate:B,encodingWithoutContinuousAxis:I,ticksOrient:k,boxOrient:F,customTooltipWithoutAggregatedField:x}=SNe(e,f,t),M=T_(b.field),{color:R,size:P,...C}=I,D=ee=>lC(d,m,b,ee,t.boxplot),j=D(C),$=D(I),W=(je(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",H=D({...C,...P?{size:P}:{},color:{condition:{test:`datum['lower_box_${b.field}'] >= datum['upper_box_${b.field}']`,...R||{value:W}}}}),G=U2([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,I),z={type:"tick",color:"black",opacity:1,orient:k,invalid:r,aria:!1},q=h==="min-max"?G:U2([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,I),ie=[...j({partName:"rule",mark:{type:"rule",invalid:r,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:q}),...j({partName:"rule",mark:{type:"rule",invalid:r,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:q}),...j({partName:"ticks",mark:z,positionPrefix:"lower_whisker",extraEncoding:q}),...j({partName:"ticks",mark:z,positionPrefix:"upper_whisker",extraEncoding:q})],ce=[...h!=="tukey"?ie:[],...$({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:F,invalid:r,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:G}),...H({partName:"median",mark:{type:"tick",invalid:r,...je(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:k,aria:!1},positionPrefix:"mid_box",extraEncoding:G})];if(h==="min-max")return{...c,transform:(c.transform??[]).concat(l),layer:ce};const se=`datum["lower_box_${b.field}"]`,Ie=`datum["upper_box_${b.field}"]`,he=`(${Ie} - ${se})`,Me=`${se} - ${f} * ${he}`,Ue=`${Ie} + ${f} * ${he}`,_e=`datum["${b.field}"]`,ke={joinaggregate:WQ(b.field),groupby:E},Ee={transform:[{filter:`(${Me} <= ${_e}) && (${_e} <= ${Ue})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${M}`},{op:"max",field:b.field,as:`upper_whisker_${M}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${M}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${M}`},...B],groupby:E}],layer:ie},{tooltip:ye,...X}=C,{scale:Y,axis:U}=b,J=oC(b),K=bs(U,["title"]),Z=zQ(d,"outliers",t.boxplot,{transform:[{filter:`(${_e} < ${Me}) || (${_e} > ${Ue})`}],mark:"point",encoding:{[m]:{field:b.field,type:b.type,...J!==void 0?{title:J}:{},...Y!==void 0?{scale:Y}:{},...ln(K)?{}:{axis:K}},...X,...R?{color:R}:{},...x?{tooltip:x}:{}}})[0];let Q;const fe=[...p,..._,ke];return Z?Q={transform:fe,layer:[Z,Ee]}:(Q=Ee,Q.transform.unshift(...fe)),{...c,layer:[Q,{transform:l,layer:ce}]}}function WQ(e){const t=T_(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function SNe(e,t,n){const i=VQ(e,p1),{continuousAxisChannelDef:s,continuousAxis:a}=qQ(e,i,p1),c=s.field,d=T_(c),f=GQ(t),u=[...WQ(c),{op:"median",field:c,as:`mid_box_${d}`},{op:"min",field:c,as:(f==="min-max"?"lower_whisker_":"min_")+d},{op:"max",field:c,as:(f==="min-max"?"upper_whisker_":"max_")+d}],r=f==="min-max"||f==="tukey"?[]:[{calculate:`datum["upper_box_${d}"] - datum["lower_box_${d}"]`,as:`iqr_${d}`},{calculate:`min(datum["upper_box_${d}"] + datum["iqr_${d}"] * ${t}, datum["max_${d}"])`,as:`upper_whisker_${d}`},{calculate:`max(datum["lower_box_${d}"] - datum["iqr_${d}"] * ${t}, datum["min_${d}"])`,as:`lower_whisker_${d}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:_,filteredEncoding:l}=TNe(p),{bins:b,timeUnits:m,aggregate:E,groupby:B,encoding:I}=jQ(l,n),k=i==="vertical"?"horizontal":"vertical",F=i,x=[...b,...m,{aggregate:[...E,...u],groupby:B},...r];return{bins:b,timeUnits:m,transform:x,groupby:B,aggregate:E,continuousAxisChannelDef:s,continuousAxis:a,encodingWithoutContinuousAxis:I,ticksOrient:k,boxOrient:F,customTooltipWithoutAggregatedField:_}}const cC="errorbar",BNe=["ticks","rule"],INe=new IS(cC,YQ);function YQ(e,{config:t}){e={...e,encoding:FS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:a,ticksOrient:c,markDef:d,outerSpec:f,tooltipEncoding:u}=XQ(e,cC,t);delete a.size;const r=lC(d,s,i,a,t.errorbar),h=d.thickness,p=d.size,_={type:"tick",orient:c,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},l=[...r({partName:"ticks",mark:_,positionPrefix:"lower",extraEncoding:u}),...r({partName:"ticks",mark:_,positionPrefix:"upper",extraEncoding:u}),...r({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...f,transform:n,...l.length>1?{layer:l}:{...l[0]}}}function FNe(e,t){const{encoding:n}=e;if(kNe(n))return{orient:VQ(e,t),inputType:"raw"};const i=xNe(n),s=MNe(n),a=n.x,c=n.y;if(i){if(s)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const d=n.x2,f=n.y2;if(vt(d)&&vt(f))throw new Error(`${t} cannot have both x2 and y2`);if(vt(d)){if(ac(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(vt(f)){if(ac(c))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const d=n.xError,f=n.xError2,u=n.yError,r=n.yError2;if(vt(f)&&!vt(d))throw new Error(`${t} cannot have xError2 without xError`);if(vt(r)&&!vt(u))throw new Error(`${t} cannot have yError2 without yError`);if(vt(d)&&vt(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(vt(d)){if(ac(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(vt(u)){if(ac(c))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function kNe(e){return(vt(e.x)||vt(e.y))&&!vt(e.x2)&&!vt(e.y2)&&!vt(e.xError)&&!vt(e.xError2)&&!vt(e.yError)&&!vt(e.yError2)}function xNe(e){return vt(e.x2)||vt(e.y2)}function MNe(e){return vt(e.xError)||vt(e.xError2)||vt(e.yError)||vt(e.yError2)}function XQ(e,t,n){const{mark:i,encoding:s,params:a,projection:c,...d}=e,f=fo(i)?i:{type:i};a&&xe(jJ(t));const{orient:u,inputType:r}=FNe(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:_,continuousAxisChannelDefError2:l,continuousAxis:b}=qQ(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:E,tooltipSummary:B,tooltipTitleWithFieldName:I}=ANe(f,h,p,_,l,r,t,n),{[b]:k,[b==="x"?"x2":"y2"]:F,[b==="x"?"xError":"yError"]:x,[b==="x"?"xError2":"yError2"]:M,...R}=s,{bins:P,timeUnits:C,aggregate:D,groupby:j,encoding:$}=jQ(R,n),W=[...D,...m],H=r!=="raw"?[]:j,G=U2(B,h,$,I);return{transform:[...d.transform??[],...P,...C,...W.length===0?[]:[{aggregate:W,groupby:H}],...E],groupby:H,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:$,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:f,outerSpec:d,tooltipEncoding:G}}function ANe(e,t,n,i,s,a,c,d){let f=[],u=[];const r=t.field;let h,p=!1;if(a==="raw"){const _=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":d.errorbar.center,l=e.extent?e.extent:_==="mean"?"stderr":"iqr";if(_==="median"!=(l==="iqr")&&xe($Ae(_,l,c)),l==="stderr"||l==="stdev")f=[{op:l,field:r,as:`extent_${r}`},{op:_,field:r,as:`center_${r}`}],u=[{calculate:`datum["center_${r}"] + datum["extent_${r}"]`,as:`upper_${r}`},{calculate:`datum["center_${r}"] - datum["extent_${r}"]`,as:`lower_${r}`}],h=[{fieldPrefix:"center_",titlePrefix:zm(_)},{fieldPrefix:"upper_",titlePrefix:k$(_,l,"+")},{fieldPrefix:"lower_",titlePrefix:k$(_,l,"-")}],p=!0;else{let b,m,E;l==="ci"?(b="mean",m="ci0",E="ci1"):(b="median",m="q1",E="q3"),f=[{op:m,field:r,as:`lower_${r}`},{op:E,field:r,as:`upper_${r}`},{op:b,field:r,as:`center_${r}`}],h=[{fieldPrefix:"upper_",titlePrefix:Qu({field:r,aggregate:E,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Qu({field:r,aggregate:m,type:"quantitative"},d,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Qu({field:r,aggregate:b,type:"quantitative"},d,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&xe(jAe(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${r}`},{calculate:`datum["${r}"]`,as:`lower_${r}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:r}],u=[{calculate:`datum["${r}"] + datum["${i.field}"]`,as:`upper_${r}`}],s?u.push({calculate:`datum["${r}"] + datum["${s.field}"]`,as:`lower_${r}`}):u.push({calculate:`datum["${r}"] - datum["${i.field}"]`,as:`lower_${r}`}));for(const _ of u)h.push({fieldPrefix:_.as.substring(0,6),titlePrefix:gf(gf(_.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:f,tooltipSummary:h,tooltipTitleWithFieldName:p}}function k$(e,t,n){return`${zm(e)} ${n} ${t}`}const dC="errorband",ONe=["band","borders"],NNe=new IS(dC,KQ);function KQ(e,{config:t}){e={...e,encoding:FS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:a,markDef:c,outerSpec:d,tooltipEncoding:f}=XQ(e,dC,t),u=c,r=lC(u,s,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},_={type:h?"line":"rule"};const l={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return h?(p={...p,...l,ariaRoleDescription:"errorband"},_={..._,...l,aria:!1}):u.interpolate?xe(w$("interpolate")):u.tension&&xe(w$("tension")),{...d,transform:n,layer:[...r({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f}),...r({partName:"borders",mark:_,positionPrefix:"lower",extraEncoding:f}),...r({partName:"borders",mark:_,positionPrefix:"upper",extraEncoding:f})]}}const JQ={};function fC(e,t,n){const i=new IS(e,t);JQ[e]={normalizer:i,parts:n}}function RNe(){return Be(JQ)}fC(p1,HQ,vNe);fC(cC,YQ,BNe);fC(dC,KQ,ONe);const CNe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],QQ={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},ZQ={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},LNe=Be(QQ),PNe=Be(ZQ),DNe={header:1,headerRow:1,headerColumn:1,headerFacet:1},eZ=Be(DNe),tZ=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],UNe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},jNe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ca="_vgsid_",$Ne={point:{on:"click",fields:[ca],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function uC(e){return e==="legend"||!!(e!=null&&e.legend)}function KI(e){return uC(e)&&je(e)}function hC(e){return!!(e!=null&&e.select)}function nZ(e){const t=[];for(const n of e||[]){if(hC(n))continue;const{expr:i,bind:s,...a}=n;if(s&&i){const c={...a,bind:s,init:i};t.push(c)}else{const c={...a,...i?{update:i}:{},...s?{bind:s}:{}};t.push(c)}}return t}function zNe(e){return kS(e)||pC(e)||_C(e)}function _C(e){return Fe(e,"concat")}function kS(e){return Fe(e,"vconcat")}function pC(e){return Fe(e,"hconcat")}function iZ({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function uo(e){return Fe(e,"step")}function x$(e){return Fe(e,"view")||Fe(e,"width")||Fe(e,"height")}const M$=20,qNe={align:1,bounds:1,center:1,columns:1,spacing:1},VNe=Be(qNe);function GNe(e,t,n){const i=n[t],s={},{spacing:a,columns:c}=i;a!==void 0&&(s.spacing=a),c!==void 0&&(vS(e)&&!Xm(e.facet)||_C(e))&&(s.columns=c),kS(e)&&(s.columns=1);for(const d of VNe)if(e[d]!==void 0)if(d==="spacing"){const f=e[d];s[d]=Wt(f)?f:{row:f.row??a,column:f.column??a}}else s[d]=e[d];return s}function j2(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function $2(e,t){const n=y1(e,t);return uo(n)?n.step:sZ}function y1(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return zn(n,{step:e.step})}const sZ=20,HNe={continuousWidth:200,continuousHeight:200,step:sZ},WNe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:HNe,mark:DOe,arc:{},area:{},bar:zOe,circle:{},geoshape:{},image:{},line:{},point:{},rect:KR,rule:{color:"black"},square:{},text:{color:"black"},tick:qOe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:wOe,projection:{},legend:UNe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:$Ne,style:{},title:{},facet:{spacing:M$},concat:{spacing:M$},normalizedNumberFormat:".0%"},Uo=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],A$={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},O$={blue:Uo[0],orange:Uo[1],red:Uo[2],teal:Uo[3],green:Uo[4],yellow:Uo[5],purple:Uo[6],pink:Uo[7],brown:Uo[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function YNe(e={}){return{signals:[{name:"color",value:je(e)?{...O$,...e}:O$}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function XNe(e){return{signals:[{name:"fontSize",value:je(e)?{...A$,...e}:A$}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function KNe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function rZ(e){const t=Be(e||{}),n={};for(const i of t){const s=e[i];n[i]=Zm(s)?NJ(s):Gs(s)}return n}function JNe(e){const t=Be(e),n={};for(const i of t)n[i]=rZ(e[i]);return n}const QNe=[..._Q,...LQ,...eZ,"background","padding","legend","lineBreak","scale","style","title","view"];function aZ(e={}){const{color:t,font:n,fontSize:i,selection:s,...a}=e,c=f_({},bt(WNe),n?KNe(n):{},t?YNe(t):{},i?XNe(i):{},a||{});s&&u_(c,"selection",s,!0);const d=bs(c,QNe);for(const f of["background","lineBreak","padding"])c[f]&&(d[f]=Gs(c[f]));for(const f of _Q)c[f]&&(d[f]=_i(c[f]));for(const f of LQ)c[f]&&(d[f]=rZ(c[f]));for(const f of eZ)c[f]&&(d[f]=_i(c[f]));if(c.legend&&(d.legend=_i(c.legend)),c.scale){const{invalid:f,...u}=c.scale,r=_i(f,{level:1});d.scale={..._i(u),...Be(r).length>0?{invalid:r}:{}}}return c.style&&(d.style=JNe(c.style)),c.title&&(d.title=_i(c.title)),c.view&&(d.view=_i(c.view)),d}const ZNe=new Set(["view",...OOe]),eRe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],tRe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...POe};function nRe(e){e=bt(e);for(const t of eRe)delete e[t];if(e.axis)for(const t in e.axis)Zm(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of CNe)delete e.legend[t];if(e.mark){for(const t of T$)delete e.mark[t];e.mark.tooltip&&je(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(nZ(e.params)),delete e.params);for(const t of ZNe){for(const i of T$)delete e[t][i];const n=tRe[t];if(n)for(const i of n)delete e[t][i];sRe(e,t)}for(const t of RNe())delete e[t];iRe(e);for(const t in e)je(e[t])&&ln(e[t])&&delete e[t];return ln(e)?void 0:e}function iRe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=OJ(e.title);ln(t)||(e.style["group-title"]={...e.style["group-title"],...t}),ln(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),ln(i)?delete e.title:e.title=i}function sRe(e,t,n,i){const s=e[t];t==="view"&&(n="cell");const a={...s,...e.style[n??t]};ln(a)||(e.style[n??t]=a),delete e[t]}function xS(e){return Fe(e,"layer")}function rRe(e){return Fe(e,"repeat")}function aRe(e){return!Te(e.repeat)&&Fe(e.repeat,"layer")}class yC{map(t,n){return vS(t)?this.mapFacet(t,n):rRe(t)?this.mapRepeat(t,n):pC(t)?this.mapHConcat(t,n):kS(t)?this.mapVConcat(t,n):_C(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(xS(t))return this.mapLayer(t,n);if(Nl(t))return this.mapUnit(t,n);throw new Error(NR(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...s}=t;return{...s,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const oRe={zero:1,center:1,normalize:1};function lRe(e){return Ve(oRe,e)}const cRe=new Set([fQ,mS,gS,c1,bS,YR,XR,wS,uQ,WR]),dRe=new Set([mS,gS,fQ]);function lu(e){return Oe(e)&&Lh(e)==="quantitative"&&!e.bin}function N$(e,t,{orient:n,type:i}){const s=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),c=e[t],d=e[s];if(Oe(c)&&Oe(d))if(lu(c)&&lu(d)){if(c.stack)return t;if(d.stack)return s;const f=Oe(c)&&!!c.aggregate,u=Oe(d)&&!!d.aggregate;if(f!==u)return f?t:s;if(a){if(n==="vertical")return s;if(n==="horizontal")return t}}else{if(lu(c))return t;if(lu(d))return s}else{if(lu(c))return a&&n==="vertical"?void 0:t;if(lu(d))return a&&n==="horizontal"?void 0:s}}function fRe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function oZ(e,t){var b,m;const n=fo(e)?e:{type:e},i=n.type;if(!cRe.has(i))return null;const s=N$(t,"x",n)||N$(t,"theta",n);if(!s)return null;const a=t[s],c=Oe(a)?Pe(a,{}):void 0,d=fRe(s),f=[],u=new Set;if(t[d]){const E=t[d],B=Oe(E)?Pe(E,{}):void 0;B&&B!==c&&(f.push(d),u.add(B))}const r=d==="x"?"xOffset":"yOffset",h=t[r],p=Oe(h)?Pe(h,{}):void 0;p&&p!==c&&(f.push(r),u.add(p));const _=vMe.reduce((E,B)=>{if(B!=="tooltip"&&Qd(t,B)){const I=t[B];for(const k of $e(I)){const F=la(k);if(F.aggregate)continue;const x=Pe(F,{});(!x||!u.has(x))&&E.push({channel:B,fieldDef:F})}}return E},[]);let l;return a.stack!==void 0?qc(a.stack)?l=a.stack?"zero":null:l=a.stack:dRe.has(i)&&(l="zero"),!l||!lRe(l)||UQ(t)&&_.length===0?null:((b=a==null?void 0:a.scale)!=null&&b.type&&((m=a==null?void 0:a.scale)==null?void 0:m.type)!==pi.LINEAR&&a!=null&&a.stack&&xe(PAe(a.scale.type)),vt(t[So(s)])?(a.stack!==void 0&&xe(LAe(s)),null):(Oe(a)&&a.aggregate&&!RMe.has(a.aggregate)&&xe(DAe(a.aggregate)),{groupbyChannels:f,groupbyFields:u,fieldChannel:s,impute:a.impute===null?!1:Zc(i),stackBy:_,offset:l}))}function lZ(e,t,n){const i=_i(e),s=an("orient",i,n);if(i.orient=pRe(i.type,t,s),s!==void 0&&s!==i.orient&&xe(bAe(i.orient,s)),i.type==="bar"&&i.orient){const f=an("cornerRadiusEnd",i,n);if(f!==void 0){const u=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:jOe[i.orient];for(const r of u)i[r]=f;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=an("opacity",i,n),c=an("fillOpacity",i,n);return a===void 0&&c===void 0&&(i.opacity=hRe(i.type,t)),an("cursor",i,n)===void 0&&(i.cursor=uRe(i,t,n)),i}function uRe(e,t,n){return t.href||e.href||an("href",e,n)?"pointer":e.cursor}function hRe(e,t){if(Ot([bS,WR,YR,XR],e)&&!UQ(t))return .7}function _Re(e,t,{graticule:n}){if(n)return!1;const i=co("filled",e,t),s=e.type;return zn(i,s!==bS&&s!==wS&&s!==c1)}function pRe(e,t,n){switch(e){case bS:case YR:case XR:case uQ:case MOe:case xOe:return}const{x:i,y:s,x2:a,y2:c}=t;switch(e){case mS:if(Oe(i)&&(hi(i.bin)||Oe(s)&&s.aggregate&&!i.aggregate))return"vertical";if(Oe(s)&&(hi(s.bin)||Oe(i)&&i.aggregate&&!s.aggregate))return"horizontal";if(c||a){if(n)return n;if(!a)return(Oe(i)&&i.type===bf&&!pn(i.bin)||f1(i))&&Oe(s)&&hi(s.bin)?"horizontal":"vertical";if(!c)return(Oe(s)&&s.type===bf&&!pn(s.bin)||f1(s))&&Oe(i)&&hi(i.bin)?"vertical":"horizontal"}case c1:if(a&&!(Oe(i)&&hi(i.bin))&&c&&!(Oe(s)&&hi(s.bin)))return;case gS:if(c)return Oe(s)&&hi(s.bin)?"horizontal":"vertical";if(a)return Oe(i)&&hi(i.bin)?"vertical":"horizontal";if(e===c1){if(i&&!s)return"vertical";if(s&&!i)return"horizontal"}case wS:case WR:{const d=B$(i),f=B$(s);if(n)return n;if(d&&!f)return e!=="tick"?"horizontal":"vertical";if(!d&&f)return e!=="tick"?"vertical":"horizontal";if(d&&f)return"vertical";{const u=as(i)&&i.type===Rh,r=as(s)&&s.type===Rh;if(u&&!r)return"vertical";if(!u&&r)return"horizontal"}return}}return"vertical"}function yRe(e){const{point:t,line:n,...i}=e;return Be(i).length>1?i:i.type}function gRe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:bs(e[t],["point","line"])});return e}function JI(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?je(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?je(t.point)?t.point:{}:void 0}function R$(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class mRe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Nl(t)){const{mark:i,encoding:s}=t,a=fo(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!JI(a,n[a.type],s);case"area":return!!JI(a,n[a.type],s)||!!R$(a,n[a.type])}}return!1}run(t,n,i){const{config:s}=n,{params:a,projection:c,mark:d,name:f,encoding:u,...r}=t,h=FS(u,s),p=fo(d)?d:{type:d},_=JI(p,s[p.type],h),l=p.type==="area"&&R$(p,s[p.type]),b=[{name:f,...a?{params:a}:{},mark:yRe({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:bs(h,["shape"])}],m=oZ(lZ(p,h,s),h);let E=h;if(m){const{fieldChannel:B,offset:I}=m;E={...h,[B]:{...h[B],...I?{stack:I}:{}}}}return E=bs(E,["y2","x2"]),l&&b.push({...c?{projection:c}:{},mark:{type:"line",...xh(p,["clip","interpolate","tension","tooltip"]),...l},encoding:E}),_&&b.push({...c?{projection:c}:{},mark:{type:"point",opacity:1,filled:!0,...xh(p,["clip","tooltip"]),..._},encoding:E}),i({...r,layer:b},{...n,config:gRe(s)})}}function wRe(e,t){return t?Xm(e)?dZ(e,t):cZ(e,t):e}function QI(e,t){return t?dZ(e,t):e}function z2(e,t,n){const i=t[e];if(tNe(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};xe(eAe(i.repeat));return}return t}function cZ(e,t){if(e=z2("field",e,t),e!==void 0){if(e===null)return null;if(nC(e)&&ul(e.sort)){const n=z2("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function C$(e,t){if(Oe(e))return cZ(e,t);{const n=z2("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function L$(e,t){if(vt(e)){const n=C$(e,t);if(n)return n;if(Km(e))return{condition:e.condition}}else{if(Jm(e)){const n=C$(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...s}=e;return s}}return e}}function dZ(e,t){const n={};for(const i in e)if(Fe(e,i)){const s=e[i];if(Te(s))n[i]=s.map(a=>L$(a,t)).filter(a=>a);else{const a=L$(s,t);a!==void 0&&(n[i]=a)}}return n}class bRe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Nl(t)){const{encoding:n,mark:i}=t;if(i==="line"||fo(i)&&i.type==="line")for(const s of wMe){const a=zf(s),c=n[a];if(n[s]&&(Oe(c)&&!hi(c.bin)||Io(c)))return!0}}return!1}run(t,n,i){const{encoding:s,mark:a}=t;return xe(wAe(!!s.x2,!!s.y2)),i({...t,mark:je(a)?{...a,type:"rule"}:"rule"},n)}}class TRe extends yC{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[ENe,INe,NNe,new mRe,new bRe]}map(t,n){if(Nl(t)){const i=Qd(t.encoding,dl),s=Qd(t.encoding,fl),a=Qd(t.encoding,aS);if(i||s||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:s}=n,a=QI(t.encoding,n.repeater),c={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(f=>f).join("_")}:{},...a?{encoding:a}:{}};if(i||s)return this.mapUnitWithParentEncodingOrProjection(c,n);const d=this.mapLayerOrUnit.bind(this);for(const f of this.nonFacetUnitNormalizers)if(f.hasMatchingType(c,n.config))return f.run(c,n,d);return c}mapRepeat(t,n){return aRe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:s,...a}=t,{row:c,column:d,layer:f}=i,{repeater:u={},repeaterPrefix:r=""}=n;return c||d?this.mapRepeat({...t,repeat:{...c?{row:c}:{},...d?{column:d}:{}},spec:{repeat:{layer:f},spec:s}},n):{...a,layer:f.map(h=>{const p={...u,layer:h},_=`${(s.name?`${s.name}_`:"")+r}child__layer_${Tn(h)}`,l=this.mapLayerOrUnit(s,{...n,repeater:p,repeaterPrefix:_});return l.name=_,l})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:s,data:a,...c}=t;!Te(i)&&t.columns&&(t=bs(t,["columns"]),xe(p$("repeat")));const d=[],{repeater:f={},repeaterPrefix:u=""}=n,r=!Te(i)&&i.row||[f?f.row:null],h=!Te(i)&&i.column||[f?f.column:null],p=Te(i)&&i||[f?f.repeat:null];for(const l of p)for(const b of r)for(const m of h){const E={repeat:l,row:b,column:m,layer:f.layer},B=(s.name?`${s.name}_`:"")+u+"child__"+(Te(i)?`${Tn(l)}`:(i.row?`row_${Tn(b)}`:"")+(i.column?`column_${Tn(m)}`:"")),I=this.map(s,{...n,repeater:E,repeaterPrefix:B});I.name=B,d.push(bs(I,["data"]))}const _=Te(i)?t.columns:i.column?i.column.length:1;return{data:s.data??a,align:"all",...c,columns:_,concat:d}}mapFacet(t,n){const{facet:i}=t;return Xm(i)&&t.columns&&(t=bs(t,["columns"]),xe(p$("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:s}=t,{parentEncoding:a,parentProjection:c,config:d}=n,f=D$({parentProjection:c,projection:s}),u=P$({parentEncoding:a,encoding:QI(i,n.repeater)});return this.mapUnit({...t,...f?{projection:f}:{},...u?{encoding:u}:{}},{config:d})}mapFacetedUnit(t,n){const{row:i,column:s,facet:a,...c}=t.encoding,{mark:d,width:f,projection:u,height:r,view:h,params:p,encoding:_,...l}=t,{facetMapping:b,layout:m}=this.getFacetMappingAndLayout({row:i,column:s,facet:a},n),E=QI(c,n.repeater);return this.mapFacet({...l,...m,facet:b,spec:{...f?{width:f}:{},...r?{height:r}:{},...h?{view:h}:{},...u?{projection:u}:{},mark:d,encoding:E,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:s,facet:a}=t;if(i||s){a&&xe(gAe([...i?[dl]:[],...s?[fl]:[]]));const c={},d={};for(const f of[dl,fl]){const u=t[f];if(u){const{align:r,center:h,spacing:p,columns:_,...l}=u;c[f]=l;for(const b of["align","center","spacing"])u[b]!==void 0&&(d[b]??(d[b]={}),d[b][f]=u[b])}}return{facetMapping:c,layout:d}}else{const{align:c,center:d,spacing:f,columns:u,...r}=a;return{facetMapping:wRe(r,n.repeater),layout:{...c?{align:c}:{},...d?{center:d}:{},...f?{spacing:f}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...s}){const{encoding:a,projection:c,...d}=t,f={...s,parentEncoding:P$({parentEncoding:n,encoding:a,layer:!0}),parentProjection:D$({parentProjection:i,projection:c})};return super.mapLayer({...d,...t.name?{name:[f.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},f)}}function P$({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const s=new Set([...Be(e),...Be(t)]);for(const a of s){const c=t[a],d=e[a];if(vt(c)){const f={...d,...c};i[a]=f}else Jm(c)?i[a]={...c,condition:{...d,...c.condition}}:c||c===null?i[a]=c:(n||oa(d)||Ye(d)||vt(d)||Te(d))&&(i[a]=d)}}else i=t;return!i||ln(i)?void 0:i}function D$(e){const{parentProjection:t,projection:n}=e;return t&&n&&xe(aAe({parentProjection:t,projection:n})),n??t}function gC(e){return Fe(e,"filter")}function vRe(e){return Fe(e,"stop")}function fZ(e){return Fe(e,"lookup")}function ERe(e){return Fe(e,"data")}function SRe(e){return Fe(e,"param")}function BRe(e){return Fe(e,"pivot")}function IRe(e){return Fe(e,"density")}function FRe(e){return Fe(e,"quantile")}function kRe(e){return Fe(e,"regression")}function xRe(e){return Fe(e,"loess")}function MRe(e){return Fe(e,"sample")}function ARe(e){return Fe(e,"window")}function ORe(e){return Fe(e,"joinaggregate")}function NRe(e){return Fe(e,"flatten")}function RRe(e){return Fe(e,"calculate")}function uZ(e){return Fe(e,"bin")}function CRe(e){return Fe(e,"impute")}function LRe(e){return Fe(e,"timeUnit")}function PRe(e){return Fe(e,"aggregate")}function DRe(e){return Fe(e,"stack")}function URe(e){return Fe(e,"fold")}function jRe(e){return Fe(e,"extent")&&!Fe(e,"density")&&!Fe(e,"regression")}function $Re(e){return e.map(t=>gC(t)?{filter:Ku(t.filter,uOe)}:t)}class zRe extends yC{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=U$(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=U$(t,n),t.encoding){const i={};for(const[s,a]of Mc(t.encoding))i[s]=hZ(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...s}=t;return i?{...s,params:Mc(i).map(([a,c])=>{const{init:d,bind:f,empty:u,...r}=c;r.type==="single"?(r.type="point",r.toggle=!1):r.type==="multi"&&(r.type="point"),n.emptySelections[a]=u!=="none";for(const h of bi(n.selectionPredicates[a]??{}))h.empty=u!=="none";return{name:a,value:d,select:r,bind:f}})}:t}}function U$(e,t){const{transform:n,...i}=e;if(n){const s=n.map(a=>{if(gC(a))return{filter:q2(a,t)};if(uZ(a)&&qf(a.bin))return{...a,bin:_Z(a.bin)};if(fZ(a)){const{selection:c,...d}=a.from;return c?{...a,from:{param:c,...d}}:a}return a});return{...i,transform:s}}return e}function hZ(e,t){var i,s;const n=bt(e);if(Oe(n)&&qf(n.bin)&&(n.bin=_Z(n.bin)),Wf(n)&&((s=(i=n.scale)==null?void 0:i.domain)!=null&&s.selection)){const{selection:a,...c}=n.scale.domain;n.scale.domain={...c,...a?{param:a}:{}}}if(Km(n))if(Te(n.condition))n.condition=n.condition.map(a=>{const{selection:c,param:d,test:f,...u}=a;return d?a:{...u,test:q2(a,t)}});else{const{selection:a,param:c,test:d,...f}=hZ(n.condition,t);n.condition=c?n.condition:{...f,test:q2(n.condition,t)}}return n}function _Z(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function q2(e,t){const n=i=>Ku(i,s=>{var a;const c=t.emptySelections[s]??!0,d={param:s,empty:c};return(a=t.selectionPredicates)[s]??(a[s]=[]),t.selectionPredicates[s].push(d),d});return e.selection?n(e.selection):Ku(e.test||e.filter,i=>i.selection?n(i.selection):i)}class V2 extends yC{map(t,n){const i=n.selections??[];if(t.params&&!Nl(t)){const s=[];for(const a of t.params)hC(a)?i.push(a):s.push(a);t.params=s}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const s=(n.path??[]).concat(t.name),a=[];for(const c of i)if(!c.views||!c.views.length)a.push(c);else for(const d of c.views)(ze(d)&&(d===t.name||s.includes(d))||Te(d)&&d.map(f=>s.indexOf(f)).every((f,u,r)=>f!==-1&&(u===0||f>r[u-1])))&&a.push(c);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=V2.prototype[e];V2.prototype[e]=function(n,i){return t.call(this,n,qRe(n,i))}}function qRe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function pZ(e,t){t===void 0&&(t=aZ(e.config));const n=WRe(e,t),{width:i,height:s}=e,a=YRe(n,{width:i,height:s,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const VRe=new TRe,GRe=new zRe,HRe=new V2;function WRe(e,t={}){const n={config:t};return HRe.map(VRe.map(GRe.map(e,n),n),n)}function j$(e){return ze(e)?{type:e}:e??{}}function YRe(e,t,n){let{width:i,height:s}=t;const a=Nl(e)||xS(e),c={};a?i=="container"&&s=="container"?(c.type="fit",c.contains="padding"):i=="container"?(c.type="fit-x",c.contains="padding"):s=="container"&&(c.type="fit-y",c.contains="padding"):(i=="container"&&(xe(f$("width")),i=void 0),s=="container"&&(xe(f$("height")),s=void 0));const d={type:"pad",...c,...n?j$(n.autosize):{},...j$(e.autosize)};if(d.type==="fit"&&!a&&(xe(qMe),d.type="pad"),i=="container"&&!(d.type=="fit"||d.type=="fit-x")&&xe(u$("width")),s=="container"&&!(d.type=="fit"||d.type=="fit-y")&&xe(u$("height")),!Ys(d,{type:"pad"}))return d}function XRe(e){return["fit","fit-x","fit-y"].includes(e)}function KRe(e){return e?`fit-${fS(e)}`:"fit"}const JRe=["background","padding"];function $$(e,t){const n={};for(const i of JRe)e&&e[i]!==void 0&&(n[i]=Gs(e[i]));return t&&(n.params=e.params),n}class Rl{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Rl(bt(this.explicit),bt(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return zn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Be(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ra(e){return{explicit:!0,value:e}}function js(e){return{explicit:!1,value:e}}function yZ(e){return(t,n,i,s)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:MS(t,n,i,s)}}function MS(e,t,n,i){return e.explicit&&t.explicit&&xe(xAe(n,i,e.value,t.value)),e}function Nc(e,t,n,i,s=MS){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Ys(e.value,t.value)?e:s(e,t,n,i)}class QRe extends Rl{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Uh(e){return Fe(e,"url")}function Wg(e){return Fe(e,"values")}function gZ(e){return Fe(e,"name")&&!Uh(e)&&!Wg(e)&&!hc(e)}function hc(e){return e&&(mZ(e)||wZ(e)||mC(e))}function mZ(e){return Fe(e,"sequence")}function wZ(e){return Fe(e,"sphere")}function mC(e){return Fe(e,"graticule")}var On;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(On||(On={}));function bZ({invalid:e,isPath:t}){switch(pQ(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function ZRe(e){const{marks:t,scales:n}=bZ(e);return t===n?On.Main:n==="include-invalid-values"?On.PreFilterInvalid:On.PostFilterInvalid}function TZ(e){const{signals:t,hasLegend:n,index:i,...s}=e;return s.field=kr(s.field),s}function Ef(e,t=!0,n=Di){if(Te(e)){const i=e.map(s=>Ef(s,t,n));return t?`[${i.join(", ")}]`:i}else if(Gf(e))return n(t?wf(e):eOe(e));return t?n(cn(e)):e}function eCe(e,t){for(const n of bi(e.component.selection??{})){const i=n.name;let s=`${i}${Rc}, ${n.resolve==="global"?"true":`{unit: ${Zd(e)}}`}`;for(const a of RS)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(s=a.modifyExpr(e,n,s)));t.push({name:i+MCe,on:[{events:{signal:n.name+Rc},update:`modify(${Re(n.name+Sf)}, ${s})`}]})}return wC(t)}function tCe(e,t){if(e.component.selection&&Be(e.component.selection).length){const n=Re(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Hc("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return wC(t)}function nCe(e,t){let n=!1;for(const i of bi(e.component.selection??{})){const s=i.name,a=Re(s+Sf);if(t.filter(d=>d.name===s).length===0){const d=i.resolve==="global"?"union":i.resolve,f=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${UZ}(${a}, ${Re(d)}${f}`})}n=!0;for(const d of RS)d.defined(i)&&d.topLevelSignals&&(t=d.topLevelSignals(e,i,t))}return n&&t.filter(s=>s.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),wC(t)}function iCe(e,t){const n=[...t],i=Zd(e,{escape:!1});for(const s of bi(e.component.selection??{})){const a={name:s.name+Sf};if(s.project.hasSelectionId&&(a.transform=[{type:"collect",sort:{field:ca}}]),s.init){const d=s.project.items.map(TZ);a.values=s.project.hasSelectionId?s.init.map(f=>({unit:i,[ca]:Ef(f,!1)[0]})):s.init.map(f=>({unit:i,fields:d,values:Ef(f,!1)}))}n.filter(d=>d.name===s.name+Sf).length||n.push(a)}return n}function vZ(e,t){for(const n of bi(e.component.selection??{}))for(const i of RS)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function sCe(e,t){for(const n of e.children)Bn(n)&&(t=vZ(n,t));return t}function rCe(e,t,n,i){const s=VZ(e,t.param,t);return{signal:aa(n.get("type"))&&Te(i)&&i[0]>i[1]?`isValid(${s}) && reverse(${s})`:s}}function wC(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class rn{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){xe(iAe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const s of this._children)s.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Ts extends rn{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,s){super(t,n),this.type=i,this.refCounts=s,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${yJ()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function ZI(e){return e.as!==void 0}function z$(e){return`${e}_end`}class Ja extends rn{clone(){return new Ja(null,bt(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((s,a,c)=>{const{field:d,timeUnit:f}=a;if(f){let u;if(Hf(f)){if(Bn(n)){const{mark:r,markDef:h,config:p}=n,_=Oc({fieldDef:a,markDef:h,config:p});(Hg(r)||_)&&(u={timeUnit:ci(f),field:d})}}else u={as:Pe(a,{forAs:!0}),field:d,timeUnit:f};if(Bn(n)){const{mark:r,markDef:h,config:p}=n,_=Oc({fieldDef:a,markDef:h,config:p});Hg(r)&&qn(c)&&_!==.5&&(u.rectBandPosition=_)}u&&(s[Nt(u)]=u)}return s},{});return ln(i)?null:new Ja(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...s}={...n},a=ci(i),c={...s,timeUnit:a};return new Ja(t,{[Nt(c)]:c})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,s]of Mc(this.timeUnits)){const a=ZI(s)?s.as:`${s.field}_end`;t.has(a)||(n[i]=s)}this.timeUnits=n}producedFields(){return new Set(bi(this.timeUnits).map(t=>ZI(t)?t.as:z$(t.field)))}dependentFields(){return new Set(bi(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Nt(this.timeUnits)}`}assemble(){const t=[];for(const n of bi(this.timeUnits)){const{rectBandPosition:i}=n,s=ci(n.timeUnit);if(ZI(n)){const{field:a,as:c}=n,{unit:d,utc:f,...u}=s,r=[c,`${c}_end`];t.push({field:kr(a),type:"timeunit",...d?{units:pS(d)}:{},...f?{timezone:"utc"}:{},...u,as:r}),t.push(...q$(r,i,s))}else if(n){const{field:a}=n,c=a.replaceAll("\\.","."),d=EZ({timeUnit:s,field:c}),f=z$(c);t.push({type:"formula",expr:d,as:f}),t.push(...q$([c,f],i,s))}}return t}}const AS="offsetted_rect_start",OS="offsetted_rect_end";function EZ({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:s}=e,a=JJ(i),{part:c,step:d}=tQ(a,e.step);return`${s?"utcOffset":"timeOffset"}('${c}', datum['${t}'], ${n?-d:d})`}function q$([e,t],n,i){if(n!==void 0&&n!==.5){const s=`datum['${e}']`,a=`datum['${t}']`;return[{type:"formula",expr:V$([EZ({timeUnit:i,field:e,reverse:!0}),s],n+.5),as:`${e}_${AS}`},{type:"formula",expr:V$([s,a],n+.5),as:`${e}_${OS}`}]}return[]}function V$([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const ew="_tuple_fields";class aCe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const oCe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,s=t.project??(t.project=new aCe),a={},c={},d=new Set,f=(l,b)=>{const m=b==="visual"?l.channel:l.field;let E=Tn(`${i}_${m}`);for(let B=1;d.has(E);B++)E=Tn(`${i}_${m}_${B}`);return d.add(E),{[b]:E}},u=t.type,r=e.config.selection[u],h=n.value!==void 0?$e(n.value):null;let{fields:p,encodings:_}=je(n.select)?n.select:{};if(!p&&!_&&h){for(const l of h)if(je(l))for(const b of Be(l))mMe(b)?(_||(_=[])).push(b):u==="interval"?(xe(ZMe),_=r.encodings):(p??(p=[])).push(b)}!p&&!_&&(_=r.encodings,"fields"in r&&(p=r.fields));for(const l of _??[]){const b=e.fieldDef(l);if(b){let m=b.field;if(b.aggregate){xe(VMe(l,b.aggregate));continue}else if(!m){xe(_$(l));continue}if(b.timeUnit&&!Hf(b.timeUnit)){m=e.vgField(l);const E={timeUnit:b.timeUnit,as:m,field:b.field};c[Nt(E)]=E}if(!a[m]){const E=u==="interval"&&Bo(l)&&aa(e.getScaleComponent(l).get("type"))?"R":b.bin?"R-RE":"E",B={field:m,channel:l,type:E,index:s.items.length};B.signals={...f(B,"data"),...f(B,"visual")},s.items.push(a[m]=B),s.hasField[m]=a[m],s.hasSelectionId=s.hasSelectionId||m===ca,vJ(l)?(B.geoChannel=l,B.channel=TJ(l),s.hasChannel[B.channel]=a[m]):s.hasChannel[l]=a[m]}}else xe(_$(l))}for(const l of p??[]){if(s.hasField[l])continue;const b={type:"E",field:l,index:s.items.length};b.signals={...f(b,"data")},s.items.push(b),s.hasField[l]=b,s.hasSelectionId=s.hasSelectionId||l===ca}h&&(t.init=h.map(l=>s.items.map(b=>je(l)?l[b.geoChannel||b.channel]!==void 0?l[b.geoChannel||b.channel]:l[b.field]:l))),ln(c)||(s.timeUnit=new Ja(null,c))},signals:(e,t,n)=>{const i=t.name+ew;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(TZ)})}},hl={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const s=i.channel;if(!Bo(s))continue;const a=e.getScaleComponent(s),c=a?a.get("type"):void 0;if(c=="sequential"&&xe(YMe),!a||!aa(c)){xe(WMe);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(c=>n.filter(d=>d.name===c.signals.data).length===0);if(!e.parent||G$(e)||i.length===0)return n;const s=n.find(c=>c.name===t.name);let a=s.update;if(a.includes(UZ))s.update=`{${i.map(c=>`${Re(kr(c.field))}: ${c.signals.data}`).join(", ")}}`;else{for(const c of i){const d=`${Re(kr(c.field))}: ${c.signals.data}`;a.includes(d)||(a=`${a.substring(0,a.length-1)}, ${d}}`)}s.update=a}return n.concat(i.map(c=>({name:c.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!G$(e))for(const i of t.scales){const s=n.find(a=>a.name===i.signals.data);s.push="outer",delete s.value,delete s.update}return n}};function G2(e,t){return`domain(${Re(e.scaleName(t))})`}function G$(e){return e.parent&&k_(e.parent)&&!e.parent.parent}const Zu="_brush",SZ="_scale_trigger",ay="geo_interval_init_tick",BZ="_init",lCe="_center",cCe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const s={...je(n.select)?n.select:{}};s.fields=[ca],s.encodings||(s.encodings=n.value?Be(n.value):[Ea,va]),n.select={type:"interval",...s}}if(t.translate&&!hl.defined(t)){const s=`!event.item || event.item.mark.name !== ${Re(t.name+Zu)}`;for(const a of t.events){if(!a.between){xe(`${a} is not an ordered event stream for interval selections.`);continue}const c=$e((i=a.between[0]).filter??(i.filter=[]));c.includes(s)||c.push(s)}}},signals:(e,t,n)=>{const i=t.name,s=i+Rc,a=bi(t.project.hasChannel).filter(d=>d.channel===vn||d.channel===ui),c=t.init?t.init[0]:null;if(n.push(...a.reduce((d,f)=>d.concat(dCe(e,t,f,c&&c[f.index])),[])),e.hasProjection){const d=Re(e.projectionName()),f=e.projectionName()+lCe,{x:u,y:r}=t.project.hasChannel,h=u&&u.signals.visual,p=r&&r.signals.visual,_=u?c&&c[u.index]:`${f}[0]`,l=r?c&&c[r.index]:`${f}[1]`,b=F=>e.getSizeSignalRef(F).signal,m=`[[${h?h+"[0]":"0"}, ${p?p+"[0]":"0"}],[${h?h+"[1]":b("width")}, ${p?p+"[1]":b("height")}]]`;c&&(n.unshift({name:i+BZ,init:`[scale(${d}, [${u?_[0]:_}, ${r?l[0]:l}]), scale(${d}, [${u?_[1]:_}, ${r?l[1]:l}])]`}),(!u||!r)&&(n.find(x=>x.name===f)||n.unshift({name:f,update:`invert(${d}, [${b("width")}/2, ${b("height")}/2])`})));const E=`intersect(${m}, {markname: ${Re(e.getName("marks"))}}, unit.mark)`,B=`{unit: ${Zd(e)}}`,I=`vlSelectionTuples(${E}, ${B})`,k=a.map(F=>F.signals.visual);return n.concat({name:s,on:[{events:[...k.length?[{signal:k.join(" || ")}]:[],...c?[{signal:ay}]:[]],update:I}]})}else{if(!hl.defined(t)){const u=i+SZ,r=a.map(h=>{const p=h.channel,{data:_,visual:l}=h.signals,b=Re(e.scaleName(p)),m=e.getScaleComponent(p).get("type"),E=aa(m)?"+":"";return`(!isArray(${_}) || (${E}invert(${b}, ${l})[0] === ${E}${_}[0] && ${E}invert(${b}, ${l})[1] === ${E}${_}[1]))`});r.length&&n.push({name:u,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:r.join(" && ")+` ? ${u} : {}`}]})}const d=a.map(u=>u.signals.data),f=`unit: ${Zd(e)}, fields: ${i+ew}, values`;return n.concat({name:s,...c?{init:`{${f}: ${Ef(c)}}`}:{},...d.length?{on:[{events:[{signal:d.join(" || ")}],update:`${d.join(" && ")} ? {${f}: [${d}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Bn(e)&&e.hasProjection&&t.init&&(n.filter(s=>s.name===ay).length||n.unshift({name:ay,value:null,on:[{events:"timer{1}",update:`${ay} === null ? {} : ${ay}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:s,y:a}=t.project.hasChannel,c=s==null?void 0:s.signals.visual,d=a==null?void 0:a.signals.visual,f=`data(${Re(t.name+Sf)})`;if(hl.defined(t)||!s&&!a)return n;const u={x:s!==void 0?{signal:`${c}[0]`}:{value:0},y:a!==void 0?{signal:`${d}[0]`}:{value:0},x2:s!==void 0?{signal:`${c}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${d}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of Be(u))u[m]=[{test:`${f}.length && ${f}[0].unit === ${Zd(e)}`,...u[m]},{value:0}];const{fill:r,fillOpacity:h,cursor:p,..._}=t.mark,l=Be(_).reduce((m,E)=>(m[E]=[{test:[s!==void 0&&`${c}[0] !== ${c}[1]`,a!==void 0&&`${d}[0] !== ${d}[1]`].filter(B=>B).join(" && "),value:_[E]},{value:null}],m),{}),b=p??(t.translate?"move":null);return[{name:`${i+Zu}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:r},fillOpacity:{value:h}},update:u}},...n,{name:i+Zu,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...u,...l}}}]}};function dCe(e,t,n,i){const s=!e.hasProjection,a=n.channel,c=n.signals.visual,d=Re(s?e.scaleName(a):e.projectionName()),f=p=>`scale(${d}, ${p})`,u=e.getSizeSignalRef(a===vn?"width":"height").signal,r=`${a}(unit)`,h=t.events.reduce((p,_)=>[...p,{events:_.between[0],update:`[${r}, ${r}]`},{events:_,update:`[${c}[0], clamp(${r}, 0, ${u})]`}],[]);if(s){const p=n.signals.data,_=hl.defined(t),l=e.getScaleComponent(a),b=l?l.get("type"):void 0,m=i?{init:Ef(i,!0,f)}:{value:[]};return h.push({events:{signal:t.name+SZ},update:aa(b)?`[${f(`${p}[0]`)}, ${f(`${p}[1]`)}]`:"[0, 0]"}),_?[{name:p,on:[]}]:[{name:c,...m,on:h},{name:p,...i?{init:Ef(i)}:{},on:[{events:{signal:c},update:`${c}[0] === ${c}[1] ? null : invert(${d}, ${c})`}]}]}else{const p=a===vn?0:1,_=t.name+BZ,l=i?{init:`[${_}[0][${p}], ${_}[1][${p}]]`}:{value:[]};return[{name:c,...l,on:h}]}}const fCe={defined:e=>e.type==="point",signals:(e,t,n)=>{const i=t.name,s=i+ew,a=t.project,c="(item().isVoronoi ? datum.datum : datum)",d=bi(e.component.selection??{}).reduce((h,p)=>p.type==="interval"?h.concat(p.name+Zu):h,[]).map(h=>`indexof(item().mark.name, '${h}') < 0`).join(" && "),f=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${d?` && ${d}`:""}`;let u=`unit: ${Zd(e)}, `;if(t.project.hasSelectionId)u+=`${ca}: ${c}[${Re(ca)}]`;else{const h=a.items.map(p=>{const _=e.fieldDef(p.channel);return _!=null&&_.bin?`[${c}[${Re(e.vgField(p.channel,{}))}], ${c}[${Re(e.vgField(p.channel,{binSuffix:"end"}))}]]`:`${c}[${Re(p.field)}]`}).join(", ");u+=`fields: ${s}, values: [${h}]`}const r=t.events;return n.concat([{name:i+Rc,on:r?[{events:r,update:`${f} ? {${u}} : null`,force:!0}]:[]}])}};function S_({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:s}){const a=Km(t)&&t.condition;let c=[];a&&(c=$e(a).map(u=>{const r=s(u);if(eNe(u)){const{param:h,empty:p}=u;return{test:qZ(e,{param:h,empty:p}),...r}}else return{test:w1(e,u.test),...r}})),i!==void 0&&c.push(i);const d=s(t);return d!==void 0&&c.push(d),c.length>1||c.length===1&&c[0].test?{[n]:c}:c.length===1?{[n]:c[0]}:{}}function bC(e,t="text"){const n=e.encoding[t];return S_({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>NS(i,e.config),invalidValueRef:void 0})}function NS(e,t,n="datum"){if(e){if(oa(e))return mn(e.value);if(vt(e)){const{format:i,formatType:s}=h1(e);return eC({fieldOrDatumDef:e,format:i,formatType:s,expr:n,config:t})}}}function IZ(e,t={}){const{encoding:n,markDef:i,config:s,stack:a}=e,c=n.tooltip;if(Te(c))return{tooltip:H$({tooltip:c},a,s,t)};{const d=t.reactiveGeom?"datum.datum":"datum";return S_({model:e,channelDef:c,vgChannel:"tooltip",mainRefFn:u=>{const r=NS(u,s,d);if(r)return r;if(u===null)return;let h=an("tooltip",i,s);if(h===!0&&(h={content:"encoding"}),ze(h))return{value:h};if(je(h))return Ye(h)?h:h.content==="encoding"?H$(n,a,s,t):{signal:d}},invalidValueRef:void 0})}}function FZ(e,t,n,{reactiveGeom:i}={}){const s={...n,...n.tooltipFormat},a=new Set,c=i?"datum.datum":"datum",d=[];function f(r,h){const p=zf(h),_=as(r)?r:{...r,type:e[p].type},l=_.title||sC(_,s),b=$e(l).join(", ").replaceAll(/"/g,'\\"');let m;if(qn(h)){const E=h==="x"?"x2":"y2",B=la(e[E]);if(hi(_.bin)&&B){const I=Pe(_,{expr:c}),k=Pe(B,{expr:c}),{format:F,formatType:x}=h1(_);m=Ym(I,k,F,x,s),a.add(E)}}if((qn(h)||h===Ar||h===Ta)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:E,formatType:B}=h1(_);m=eC({fieldOrDatumDef:_,format:E,formatType:B,expr:c,config:s,normalizeStack:!0}).signal}m??(m=NS(_,s,c).signal),d.push({channel:h,key:b,value:m})}aC(e,(r,h)=>{Oe(r)?f(r,h):ES(r)&&f(r.condition,h)});const u={};for(const{channel:r,key:h,value:p}of d)!a.has(r)&&!u[h]&&(u[h]=p);return u}function H$(e,t,n,{reactiveGeom:i}={}){const s=FZ(e,t,n,{reactiveGeom:i}),a=Mc(s).map(([c,d])=>`"${c}": ${d}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function uCe(e){const{markDef:t,config:n}=e,i=an("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...hCe(e),..._Ce(e)}}function hCe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const s=an("ariaRoleDescription",n,i);return s!=null?{ariaRoleDescription:{value:s}}:Ve(jMe,t)?{}:{ariaRoleDescription:{value:t}}}function _Ce(e){const{encoding:t,markDef:n,config:i,stack:s}=e,a=t.description;if(a)return S_({model:e,channelDef:a,vgChannel:"description",mainRefFn:f=>NS(f,e.config),invalidValueRef:void 0});const c=an("description",n,i);if(c!=null)return{description:mn(c)};if(i.aria===!1)return{};const d=FZ(t,s,i);if(!ln(d))return{description:{signal:Mc(d).map(([f,u],r)=>`"${r>0?"; ":""}${f}: " + (${u})`).join(" + ")}}}function yi(e,t,n={}){const{markDef:i,encoding:s,config:a}=t,{vgChannel:c}=n;let{defaultRef:d,defaultValue:f}=n;const u=s[e];d===void 0&&(f??(f=an(e,i,a,{vgChannel:c,ignoreVgConfig:!Km(u)})),f!==void 0&&(d=mn(f)));const r={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=gQ({...r,scaleChannel:e,channelDef:u});return S_({model:t,channelDef:u,vgChannel:c??e,invalidValueRef:h,mainRefFn:_=>ZR({...r,channel:e,channelDef:_,stack:null,defaultRef:d})})}function kZ(e,t={filled:void 0}){const{markDef:n,encoding:i,config:s}=e,{type:a}=n,c=t.filled??an("filled",n,s),d=Ot(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,f=an(c===!0?"color":void 0,n,s,{vgChannel:"fill"})??s.mark[c===!0&&"color"]??d,u=an(c===!1?"color":void 0,n,s,{vgChannel:"stroke"})??s.mark[c===!1&&"color"],r=c?"fill":"stroke",h={...f?{fill:mn(f)}:{},...u?{stroke:mn(u)}:{}};return n.color&&(c?n.fill:n.stroke)&&xe(zJ("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...yi("color",e,{vgChannel:r,defaultValue:c?f:u}),...yi("fill",e,{defaultValue:i.fill?f:void 0}),...yi("stroke",e,{defaultValue:i.stroke?u:void 0})}}function pCe(e){const{encoding:t,mark:n}=e,i=t.order;return!Zc(n)&&oa(i)?S_({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:s=>mn(s.value),invalidValueRef:void 0}):{}}function jh({channel:e,markDef:t,encoding:n={},model:i,bandPosition:s}){const a=`${e}Offset`,c=t[a],d=n[a];if((a==="xOffset"||a==="yOffset")&&d)return{offsetType:"encoding",offset:ZR({channel:a,channelDef:d,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:mn(c),bandPosition:s})};const f=t[a];return f?{offsetType:"visual",offset:f}:{}}function es(e,t,{defaultPos:n,vgChannel:i}){const{encoding:s,markDef:a,config:c,stack:d}=t,f=s[e],u=s[So(e)],r=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:_}=jh({channel:e,markDef:a,encoding:s,model:t,bandPosition:.5}),l=TC({model:t,defaultPos:n,channel:e,scaleName:r,scale:h}),b=!f&&qn(e)&&(s.latitude||s.longitude)?{field:t.getName(e)}:yCe({channel:e,channelDef:f,channel2Def:u,markDef:a,config:c,scaleName:r,scale:h,stack:d,offset:p,defaultRef:l,bandPosition:_==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function yCe(e){const{channel:t,channelDef:n,scaleName:i,stack:s,offset:a,markDef:c}=e;if(vt(n)&&s&&t===s.fieldChannel){if(Oe(n)){let d=n.bandPosition;if(d===void 0&&c.type==="text"&&(t==="radius"||t==="theta")&&(d=.5),d!==void 0)return d1({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:d,offset:a})}return Jd(n,i,{suffix:"end"},{offset:a})}return QR(e)}function TC({model:e,defaultPos:t,channel:n,scaleName:i,scale:s}){const{markDef:a,config:c}=e;return()=>{const d=zf(n),f=Ac(n),u=an(n,a,c,{vgChannel:f});if(u!==void 0)return dg(n,u);switch(t){case"zeroOrMin":return W$({scaleName:i,scale:s,mode:"zeroOrMin",mainChannel:d,config:c});case"zeroOrMax":return W$({scaleName:i,scale:s,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:d,config:c});case"mid":return{...e[xs(n)],mult:.5}}}}function W$({mainChannel:e,config:t,...n}){const i=yQ(n),{mode:s}=n;if(i)return i;switch(e){case"radius":{if(s==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:c}=s.zeroOrMax;return{signal:`min(${a},${c})/2`}}case"theta":return s==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return s==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return s==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const gCe={left:"x",center:"xc",right:"x2"},mCe={top:"y",middle:"yc",bottom:"y2"};function xZ(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Ac(e);const s=e==="x"?"align":"baseline",a=an(s,t,n);let c;return Ye(a)?(xe(mAe(s)),c=void 0):c=a,e==="x"?gCe[c||(i==="top"?"left":"center")]:mCe[c||i]}function g1(e,t,{defaultPos:n,defaultPos2:i,range:s}){return s?MZ(e,t,{defaultPos:n,defaultPos2:i}):es(e,t,{defaultPos:n})}function MZ(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:s,config:a}=t,c=So(e),d=xs(e),f=wCe(t,i,c),u=f[d]?xZ(e,s,a):Ac(e);return{...es(e,t,{defaultPos:n,vgChannel:u}),...f}}function wCe(e,t,n){const{encoding:i,mark:s,markDef:a,stack:c,config:d}=e,f=zf(n),u=xs(n),r=Ac(n),h=i[f],p=e.scaleName(f),_=e.getScaleComponent(f),{offset:l}=n in i||n in a?jh({channel:n,markDef:a,encoding:i,model:e}):jh({channel:f,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const m=xs(n),E=e.markDef[m];return E!=null?{[m]:{value:E}}:{[r]:{field:e.getName(n)}}}const b=bCe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:d,scaleName:p,scale:_,stack:c,offset:l,defaultRef:void 0});return b!==void 0?{[r]:b}:Zb(n,a)||Zb(n,{[n]:R2(n,a,d.style),[u]:R2(u,a,d.style)})||Zb(n,d[s])||Zb(n,d.mark)||{[r]:TC({model:e,defaultPos:t,channel:n,scaleName:p,scale:_})()}}function bCe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:s,scaleName:a,scale:c,stack:d,offset:f,defaultRef:u}){return vt(t)&&d&&e.charAt(0)===d.fieldChannel.charAt(0)?Jd(t,a,{suffix:"start"},{offset:f}):QR({channel:e,channelDef:n,scaleName:a,scale:c,stack:d,markDef:i,config:s,offset:f,defaultRef:u})}function Zb(e,t){const n=xs(e),i=Ac(e);if(t[i]!==void 0)return{[i]:dg(e,t[i])};if(t[e]!==void 0)return{[i]:dg(e,t[e])};if(t[n]){const s=t[n];if(Tf(s))xe(uAe(n));else return{[n]:dg(e,s)}}}function Tl(e,t){const{config:n,encoding:i,markDef:s}=e,a=s.type,c=So(t),d=xs(t),f=i[t],u=i[c],r=e.getScaleComponent(t),h=r?r.get("type"):void 0,p=s.orient,_=i[d]??i.size??an("size",s,n,{vgChannel:d}),l=IJ(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return Oe(f)&&(pn(f.bin)||hi(f.bin)||f.timeUnit&&!u)&&!(_&&!Tf(_))&&!i[l]&&!di(h)?ECe({fieldDef:f,fieldDef2:u,channel:t,model:e}):(vt(f)&&di(h)||b)&&!u?vCe(f,t,e):MZ(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function TCe(e,t,n,i,s,a,c){if(Tf(s))if(n){const f=n.get("type");if(f==="band"){let u=`bandwidth('${t}')`;s.band!==1&&(u=`${s.band} * ${u}`);const r=co("minBandSize",{type:c},i);return{signal:r?`max(${Jr(r)}, ${u})`:u}}else s.band!==1&&(xe(vAe(f)),s=void 0)}else return{mult:s.band,field:{group:e}};else{if(Ye(s))return s;if(s)return{value:s}}if(n){const f=n.get("range");if(Vf(f)&&Wt(f.step))return{value:f.step-2}}if(!a){const{bandPaddingInner:f,barBandPaddingInner:u,rectBandPaddingInner:r,tickBandPaddingInner:h}=i.scale,p=zn(f,c==="tick"?h:c==="bar"?u:r);if(Ye(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(Wt(p))return{signal:`${1-p} * ${e}`}}return{value:$2(i.view,e)-2}}function vCe(e,t,n){var P,C;const{markDef:i,encoding:s,config:a,stack:c}=n,d=i.orient,f=n.scaleName(t),u=n.getScaleComponent(t),r=xs(t),h=So(t),p=IJ(t),_=n.scaleName(p),l=n.getScaleComponent(FR(t)),b=i.type==="tick"||d==="horizontal"&&t==="y"||d==="vertical"&&t==="x";let m;(s.size||i.size)&&(b?m=yi("size",n,{vgChannel:r,defaultRef:mn(i.size)}):xe(IAe(i.type)));const E=!!m,B=SQ({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(P=u||l)==null?void 0:P.get("type"),useVlSizeChannel:b});m=m||{[r]:TCe(r,_||f,l||u,a,B,!!e,i.type)};const I=((C=u||l)==null?void 0:C.get("type"))==="band"&&Tf(B)&&!E?"top":"middle",k=xZ(t,i,a,I),F=k==="xc"||k==="yc",{offset:x,offsetType:M}=jh({channel:t,markDef:i,encoding:s,model:n,bandPosition:F?.5:0}),R=QR({channel:t,channelDef:e,markDef:i,config:a,scaleName:f,scale:u,stack:c,offset:x,defaultRef:TC({model:n,defaultPos:"mid",channel:t,scaleName:f,scale:u}),bandPosition:F?M==="encoding"?0:.5:Ye(B)?{signal:`(1-${B})/2`}:Tf(B)?(1-B.band)/2:0});if(r)return{[k]:R,...m};{const D=Ac(h),j=m[r],$=x?{...j,offset:x}:j;return{[k]:R,[D]:Te(R)?[R[0],{...R[1],offset:$}]:{...R,offset:$}}}}function Y$(e,t,n,i,s,a,c){if(bJ(e))return 0;const d=e==="x"||e==="y2",f=d?-t/2:t/2;if(Ye(n)||Ye(s)||Ye(i)||a){const u=Jr(n),r=Jr(s),h=Jr(i),p=Jr(a),l=a?`(${c} < ${p} ? ${d?"":"-"}0.5 * (${p} - (${c})) : ${f})`:f,b=h?`${h} + `:"",m=u?`(${u} ? -1 : 1) * `:"",E=r?`(${r} + ${l})`:l;return{signal:b+m+E}}else return s=s||0,i+(n?-s-f:+s+f)}function ECe({fieldDef:e,fieldDef2:t,channel:n,model:i}){var C;const{config:s,markDef:a,encoding:c}=i,d=i.getScaleComponent(n),f=i.scaleName(n),u=d?d.get("type"):void 0,r=d.get("reverse"),h=SQ({channel:n,fieldDef:e,markDef:a,config:s,scaleType:u}),p=(C=i.component.axes[n])==null?void 0:C[0],_=(p==null?void 0:p.get("translate"))??.5,l=qn(n)?an("binSpacing",a,s)??0:0,b=So(n),m=Ac(n),E=Ac(b),B=co("minBandSize",a,s),{offset:I}=jh({channel:n,markDef:a,encoding:c,model:i,bandPosition:0}),{offset:k}=jh({channel:b,markDef:a,encoding:c,model:i,bandPosition:0}),F=YOe({fieldDef:e,scaleName:f}),x=Y$(n,l,r,_,I,B,F),M=Y$(b,l,r,_,k??I,B,F),R=Ye(h)?{signal:`(1-${h.signal})/2`}:Tf(h)?(1-h.band)/2:.5,P=Oc({fieldDef:e,fieldDef2:t,markDef:a,config:s});if(pn(e.bin)||e.timeUnit){const D=e.timeUnit&&P!==.5;return{[E]:X$({fieldDef:e,scaleName:f,bandPosition:R,offset:M,useRectOffsetField:D}),[m]:X$({fieldDef:e,scaleName:f,bandPosition:Ye(R)?{signal:`1-${R.signal}`}:1-R,offset:x,useRectOffsetField:D})}}else if(hi(e.bin)){const D=Jd(e,f,{},{offset:M});if(Oe(t))return{[E]:D,[m]:Jd(t,f,{},{offset:x})};if(qf(e.bin)&&e.bin.step)return{[E]:D,[m]:{signal:`scale("${f}", ${Pe(e,{expr:"datum"})} + ${e.bin.step})`,offset:x}}}xe(GJ(b))}function X$({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:s}){return d1({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...s?{startSuffix:AS,endSuffix:OS}:{}})}const SCe=new Set(["aria","width","height"]);function Or(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?kZ(e):{};return{...BCe(e.markDef,t),...K$("fill",n),...K$("stroke",i),...yi("opacity",e),...yi("fillOpacity",e),...yi("strokeOpacity",e),...yi("strokeWidth",e),...yi("strokeDash",e),...pCe(e),...IZ(e),...bC(e,"href"),...uCe(e)}}function K$(e,t){return t?{[e]:t}:{}}function BCe(e,t){return UMe.reduce((n,i)=>(!SCe.has(i)&&Fe(e,i)&&t[i]!=="ignore"&&(n[i]=mn(e[i])),n),{})}function vC(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((s,a)=>{var u;let c;if(!Bo(a)||!(c=e.getScaleType(a)))return;const d=uS(s.aggregate),f=JR({scaleChannel:a,markDef:n,config:t,scaleType:c,isCountAggregate:d});if(GOe(f)){const r=e.vgField(a,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});r&&i.add(r)}}),i.size>0)return{defined:{signal:[...i].map(a=>yS(a,!0)).join(" && ")}}}function J$(e,t){if(t!==void 0)return{[e]:mn(t)}}const eF="voronoi",AZ={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(eF)},marks:(e,t,n)=>{const{x:i,y:s}=t.project.hasChannel,a=e.mark;if(Zc(a))return xe(GMe(a)),n;const c={name:e.getName(eF),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...IZ(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!s?"datum.datum.x || 0":"0"},y:{expr:s||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let d=0,f=!1;return n.forEach((u,r)=>{const h=u.name??"";h===e.component.mark[0].name?d=r:h.includes(eF)&&(f=!0)}),f||n.splice(d+1,0,c),n}},OZ={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!uC(e.bind),parse:(e,t,n)=>jZ(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,s=t.project,a=t.bind,c=t.init&&t.init[0],d=AZ.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return s.items.forEach((f,u)=>{const r=Tn(`${i}_${f.field}`);n.filter(p=>p.name===r).length||n.unshift({name:r,...c?{init:Ef(c[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${d}[${Re(f.field)}] : null`}]:[],bind:a[f.field]??a[f.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,s=t.project,a=n.find(u=>u.name===i+Rc),c=i+ew,d=s.items.map(u=>Tn(`${i}_${u.field}`)),f=d.map(u=>`${u} !== null`).join(" && ");return d.length&&(a.update=`${f} ? {fields: ${c}, values: [${d.join(", ")}]} : null`),delete a.value,delete a.on,n}},m1="_toggle",NZ={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+m1,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Rc,i=t.name+m1;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Zd(e)}}, `)+`${i} ? ${n} : null`}},ICe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=ze(t.clear)?Hc(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(OZ.defined(t))for(const i of t.project.items){const s=n.findIndex(a=>a.name===Tn(`${t.name}_${i.field}`));s!==-1&&n[s].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(s,a){s!==-1&&n[s].on&&n[s].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const s of t.project.items){const a=n.findIndex(c=>c.name===s.signals.visual);if(i(a,"[0, 0]"),a===-1){const c=n.findIndex(d=>d.name===s.signals.data);i(c,"null")}}else{let s=n.findIndex(a=>a.name===t.name+Rc);i(s,"null"),NZ.defined(t)&&(s=n.findIndex(a=>a.name===t.name+m1),i(s,"false"))}return n}},RZ={defined:e=>{const t=e.resolve==="global"&&e.bind&&uC(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ca;return t&&!n&&xe(XMe),t&&n},parse:(e,t,n)=>{const i=bt(n);if(i.select=ze(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},jZ(t,i),je(n.select)&&(n.select.on||n.select.clear)){const c='event.item && indexof(event.item.mark.role, "legend") < 0';for(const d of t.events)d.filter=$e(d.filter??[]),d.filter.includes(c)||d.filter.push(c)}const s=KI(t.bind)?t.bind.legend:"click",a=ze(s)?Hc(s,"view"):$e(s);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,s=KI(t.bind)&&t.bind.legend,a=c=>d=>{const f=bt(d);return f.markname=c,f};for(const c of t.project.items){if(!c.hasLegend)continue;const d=`${Tn(c.field)}_legend`,f=`${i}_${d}`;if(n.filter(r=>r.name===f).length===0){const r=s.merge.map(a(`${d}_symbols`)).concat(s.merge.map(a(`${d}_labels`))).concat(s.merge.map(a(`${d}_entries`)));n.unshift({name:f,...t.init?{}:{value:null},on:[{events:r,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:s.merge,update:`!event.item || !datum ? null : ${f}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,s=t.project,a=n.find(p=>p.name===i+Rc),c=i+ew,d=s.items.filter(p=>p.hasLegend).map(p=>Tn(`${i}_${Tn(p.field)}_legend`)),u=`${d.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${c}, values: [${d.join(", ")}]} : null`;t.events&&d.length>0?a.on.push({events:d.map(p=>({signal:p})),update:u}):d.length>0&&(a.update=u,delete a.value,delete a.on);const r=n.find(p=>p.name===i+m1),h=KI(t.bind)&&t.bind.legend;return r&&(t.events?r.on.push({...r.on[0],events:h}):r.on[0].events=h),n}};function FCe(e,t,n){var s;const i=(s=e.fieldDef(t))==null?void 0:s.field;for(const a of bi(e.component.selection??{})){const c=a.project.hasField[i]??a.project.hasChannel[t];if(c&&RZ.defined(a)){const d=n.get("selections")??[];d.push(a.name),n.set("selections",d,!1),c.hasLegend=!0}}}const CZ="_translate_anchor",LZ="_translate_delta",kCe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,s=hl.defined(t),a=i+CZ,{x:c,y:d}=t.project.hasChannel;let f=Hc(t.translate,"scope");return s||(f=f.map(u=>(u.between[0].markname=i+Zu,u))),n.push({name:a,value:{},on:[{events:f.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(c!==void 0?`, extent_x: ${s?G2(e,vn):`slice(${c.signals.visual})`}`:"")+(d!==void 0?`, extent_y: ${s?G2(e,ui):`slice(${d.signals.visual})`}`:"")+"}"}]},{name:i+LZ,value:{},on:[{events:f,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),c!==void 0&&Q$(e,t,c,"width",n),d!==void 0&&Q$(e,t,d,"height",n),n}};function Q$(e,t,n,i,s){const a=t.name,c=a+CZ,d=a+LZ,f=n.channel,u=hl.defined(t),r=s.find(F=>F.name===n.signals[u?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(f),_=p&&p.get("type"),l=p&&p.get("reverse"),b=u?f===vn?l?"":"-":l?"-":"":"",m=`${c}.extent_${f}`,E=`${b}${d}.${f} / ${u?`${h}`:`span(${m})`}`,B=!u||!p?"panLinear":_==="log"?"panLog":_==="symlog"?"panSymlog":_==="pow"?"panPow":"panLinear",I=u?_==="pow"?`, ${p.get("exponent")??1}`:_==="symlog"?`, ${p.get("constant")??1}`:"":"",k=`${B}(${m}, ${E}${I})`;r.on.push({events:{signal:d},update:u?k:`clampRange(${k}, 0, ${h})`})}const PZ="_zoom_anchor",DZ="_zoom_delta",xCe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,s=hl.defined(t),a=i+DZ,{x:c,y:d}=t.project.hasChannel,f=Re(e.scaleName(vn)),u=Re(e.scaleName(ui));let r=Hc(t.zoom,"scope");return s||(r=r.map(h=>(h.markname=i+Zu,h))),n.push({name:i+PZ,on:[{events:r,update:s?"{"+[f?`x: invert(${f}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(h=>h).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:r,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),c!==void 0&&Z$(e,t,c,"width",n),d!==void 0&&Z$(e,t,d,"height",n),n}};function Z$(e,t,n,i,s){const a=t.name,c=n.channel,d=hl.defined(t),f=s.find(B=>B.name===n.signals[d?"data":"visual"]),u=e.getSizeSignalRef(i).signal,r=e.getScaleComponent(c),h=r&&r.get("type"),p=d?G2(e,c):f.name,_=a+DZ,l=`${a}${PZ}.${c}`,b=!d||!r?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",m=d?h==="pow"?`, ${r.get("exponent")??1}`:h==="symlog"?`, ${r.get("constant")??1}`:"":"",E=`${b}(${p}, ${l}, ${_}${m})`;f.on.push({events:{signal:_},update:d?E:`clampRange(${E}, 0, ${u})`})}const Sf="_store",Rc="_tuple",MCe="_modify",UZ="vlSelectionResolve",RS=[fCe,cCe,oCe,NZ,OZ,hl,RZ,ICe,kCe,xCe,AZ];function ACe(e){let t=e.parent;for(;t&&!Js(t);)t=t.parent;return t}function Zd(e,{escape:t}={escape:!0}){let n=t?Re(e.name):e.name;const i=ACe(e);if(i){const{facet:s}=i;for(const a of gr)s[a]&&(n+=` + '__facet_${a}_' + (facet[${Re(i.vgField(a))}])`)}return n}function EC(e){return bi(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function jZ(e,t){(ze(t.select)||!t.select.on)&&delete e.events,(ze(t.select)||!t.select.clear)&&delete e.clear,(ze(t.select)||!t.select.toggle)&&delete e.toggle}function H2(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...H2(e.object)),t.push(...H2(e.property))),t)}function $Z(e){return e.object.type==="MemberExpression"?$Z(e.object):e.object.name==="datum"}function zZ(e){const t=qN(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&$Z(i)&&n.add(H2(i).slice(1).join("."))}),n}class B_ extends rn{clone(){return new B_(null,this.model,bt(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=w1(this.model,this.filter,this),this._dependentFields=zZ(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function OCe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const s of t){const a=Tn(s.name),c=s.select,d=ze(c)?c:c.type,f=je(c)?bt(c):{type:d},u=i[d];for(const p in u)p==="fields"||p==="encodings"||(p==="mark"&&(f.mark={...u.mark,...f.mark}),(f[p]===void 0||f[p]===!0)&&(f[p]=bt(u[p]??f[p])));const r=n[a]={...f,name:a,type:d,init:s.value,bind:s.bind,events:ze(f.on)?Hc(f.on,"scope"):$e(bt(f.on))},h=bt(s);for(const p of RS)p.defined(r)&&p.parse&&p.parse(e,r,h)}return n}function qZ(e,t,n,i="datum"){const s=ze(t)?t:t.param,a=Tn(s),c=Re(a+Sf);let d;try{d=e.getSelectionComponent(a,s)}catch{return`!!${a}`}if(d.project.timeUnit){const p=n??e.component.data.raw,_=d.project.timeUnit.clone();p.parent?_.insertAsParentOf(p):p.parent=_}const f=d.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=d.resolve==="global"?")":`, ${Re(d.resolve)})`,r=`${f}${c}, ${i}${u}`,h=`length(data(${c}))`;return t.empty===!1?`${h} && ${r}`:`!${h} || ${r}`}function VZ(e,t,n){const i=Tn(t),s=n.encoding;let a=n.field,c;try{c=e.getSelectionComponent(i,t)}catch{return i}if(!s&&!a)a=c.project.items[0].field,c.project.items.length>1&&xe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Re(a)}.`);else if(s&&!a){const d=c.project.items.filter(f=>f.channel===s);!d.length||d.length>1?(a=c.project.items[0].field,xe((d.length?"Multiple ":"No ")+`matching ${Re(s)} encoding found for selection ${Re(n.param)}. Using "field": ${Re(a)}.`)):a=d[0].field}return`${c.name}[${Re(kr(a))}]`}function NCe(e,t){for(const[n,i]of Mc(e.component.selection??{})){const s=e.getName(`lookup_${n}`);e.component.data.outputNodes[s]=i.materialized=new Ts(new B_(t,e,{param:n}),s,On.Lookup,e.component.data.outputNodeRefCounts)}}function w1(e,t,n){return cg(t,i=>ze(i)?i:cOe(i)?qZ(e,i,n):iQ(i))}function RCe(e,t){if(e)return Te(e)&&!Kl(e)?e.map(n=>sC(n,t)).join(", "):e}function tF(e,t,n,i){var s,a;e.encode??(e.encode={}),(s=e.encode)[t]??(s[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function Hy(e,t,n,i={header:!1}){var h,p;const{disable:s,orient:a,scale:c,labelExpr:d,title:f,zindex:u,...r}=e.combine();if(!s){for(const _ in r){const l=_,b=_Ne[l],m=r[l];if(b&&b!==t&&b!=="both")delete r[l];else if(Zm(m)){const{condition:E,...B}=m,I=$e(E),k=I$[l];if(k){const{vgProp:F,part:x}=k,M=[...I.map(R=>{const{test:P,...C}=R;return{test:w1(null,P),...C}}),B];tF(r,x,F,M),delete r[l]}else if(k===null){const F={signal:I.map(x=>{const{test:M,...R}=x;return`${w1(null,M)} ? ${d$(R)} : `}).join("")+d$(B)};r[l]=F}}else if(Ye(m)){const E=I$[l];if(E){const{vgProp:B,part:I}=E;tF(r,I,B,m),delete r[l]}}Ot(["labelAlign","labelBaseline"],l)&&r[l]===null&&delete r[l]}if(t==="grid"){if(!r.grid)return;if(r.encode){const{grid:_}=r.encode;r.encode={..._?{grid:_}:{}},ln(r.encode)&&delete r.encode}return{scale:c,orient:a,...r,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:zn(u,0)}}else{if(!i.header&&e.mainExtracted)return;if(d!==void 0){let l=d;(p=(h=r.encode)==null?void 0:h.labels)!=null&&p.update&&Ye(r.encode.labels.update.text)&&(l=gf(d,"datum.label",r.encode.labels.update.text.signal)),tF(r,"labels","text",{signal:l})}if(r.labelAlign===null&&delete r.labelAlign,r.encode){for(const l of RQ)e.hasAxisPart(l)||delete r.encode[l];ln(r.encode)&&delete r.encode}const _=RCe(f,n);return{scale:c,orient:a,grid:!1,..._?{title:_}:{},...r,...n.aria===!1?{aria:!1}:{},zindex:zn(u,0)}}}}function GZ(e){const{axes:t}=e.component,n=[];for(const i of Ol)if(t[i]){for(const s of t[i])if(!s.get("disable")&&!s.get("gridScale")){const a=i==="x"?"height":"width",c=e.getSizeSignalRef(a).signal;a!==c&&n.push({name:a,update:c})}}return n}function CCe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(s=>Hy(s,"grid",t)),...i.map(s=>Hy(s,"grid",t)),...n.map(s=>Hy(s,"main",t)),...i.map(s=>Hy(s,"main",t))].filter(s=>s)}function e8(e,t,n,i){return Object.assign.apply(null,[{},...e.map(s=>{if(s==="axisOrient"){const a=n==="x"?"bottom":"left",c=t[n==="x"?"axisBottom":"axisLeft"]||{},d=t[n==="x"?"axisTop":"axisRight"]||{},f=new Set([...Be(c),...Be(d)]),u={};for(const r of f.values())u[r]={signal:`${i.signal} === "${a}" ? ${Jr(c[r])} : ${Jr(d[r])}`};return u}return t[s]})])}function LCe(e,t,n,i){const s=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:oQ(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",c=Ye(n)?"axisOrient":`axis${zm(n)}`,d=[...s,...s.map(u=>a+u.substr(4))],f=["axis",c,a];return{vlOnlyAxisConfig:e8(d,i,e,n),vgAxisConfig:e8(f,i,e,n),axisConfigStyle:PCe([...f,...d],i)}}function PCe(e,t){var i;const n=[{}];for(const s of e){let a=(i=t[s])==null?void 0:i.style;if(a){a=$e(a);for(const c of a)n.push(t.style[c])}}return Object.assign.apply(null,n)}function W2(e,t,n,i={}){var a;const s=CJ(e,n,t);if(s!==void 0)return{configFrom:"style",configValue:s};for(const c of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((a=i[c])==null?void 0:a[e])!==void 0)return{configFrom:c,configValue:i[c][e]};return{}}const t8={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??DCe(n,e),gridScale:({model:e,channel:t})=>UCe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||WZ(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||HZ(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??$Ce(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??zCe(t.type,n,Oe(t)&&!!t.timeUnit,Oe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:s})=>{const a=e==="x"?"width":e==="y"?"height":void 0,c=a?t.getSizeSignalRef(a):void 0;return n.tickCount??VCe({fieldOrDatumDef:i,scaleType:s,size:c,values:n.values})},tickMinStep:GCe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=YZ(t,n);if(i!==void 0)return i;const s=t.typedFieldDef(n),a=n==="x"?"x2":"y2",c=t.fieldDef(a);return PJ(s?[S$(s)]:[],Oe(c)?[S$(c)]:[])},values:({axis:e,fieldOrDatumDef:t})=>HCe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??WCe(n,t)};function DCe(e,t){return!di(e)&&Oe(t)&&!pn(t==null?void 0:t.bin)&&!hi(t==null?void 0:t.bin)}function UCe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function jCe(e,t,n,i,s){const a=t==null?void 0:t.labelAngle;if(a!==void 0)return Ye(a)?a:Gg(a);{const{configValue:c}=W2("labelAngle",i,t==null?void 0:t.style,s);return c!==void 0?Gg(c):n===vn&&Ot([HR,GR],e.type)&&!(Oe(e)&&e.timeUnit)?270:void 0}}function Y2(e){return`(((${e.signal} % 360) + 360) % 360)`}function HZ(e,t,n,i){if(e!==void 0)if(n==="x"){if(Ye(e)){const s=Y2(e),a=Ye(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${s} && ${s} < 135) || (225 < ${s} && ${s} < 315) ? "middle" :(${s} <= 45 || 315 <= ${s}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ye(t)){const s=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${s} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ye(e)){const s=Y2(e),a=Ye(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${s} <= 45 || 315 <= ${s} || (135 <= ${s} && ${s} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${s} && ${s} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Ye(t)){const s=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${s} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function WZ(e,t,n){if(e===void 0)return;const i=n==="x",s=i?0:90,a=i?"bottom":"left";if(Ye(e)){const c=Y2(e),d=Ye(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${s?`(${c} + 90)`:c} % 180 === 0) ? ${i?null:'"center"'} :(${s} < ${c} && ${c} < ${180+s}) === ${d} ? "left" : "right"`}}if((e+s)%180===0)return i?null:"center";if(Ye(t)){const c=s<e&&e<180+s?"===":"!==";return{signal:`${`${t.signal} ${c} "${a}"`} ? "left" : "right"`}}return(s<e&&e<180+s)==(t===a)?"left":"right"}function $Ce(e,t){if(t==="x"&&Ot(["quantitative","temporal"],e))return!0}function zCe(e,t,n,i){if(n&&!je(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function qCe(e){return e==="x"?"bottom":"left"}function VCe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var s;if(!i&&!di(t)&&t!=="log"){if(Oe(e)){if(pn(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ot(["month","hours","day","quarter"],(s=ci(e.timeUnit))==null?void 0:s.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function GCe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Oe(t)){const{timeUnit:n}=t;if(n){const i=eQ(n);if(i)return{signal:i}}}}function YZ(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),s=e.fieldDef(n),a=i?i.title:void 0,c=s?s.title:void 0;if(a&&c)return DJ(a,c);if(a)return a;if(c)return c;if(a!==void 0)return a;if(c!==void 0)return c}function HCe(e,t){const n=e.values;if(Te(n))return NQ(t,n);if(Ye(n))return n}function WCe(e,t){return e==="rect"&&u1(t)?1:0}class $h extends rn{clone(){return new $h(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=zZ(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,s)=>{if(Wf(i)&&EQ(i.sort)){const{field:a,timeUnit:c}=i,d=i.sort,f=d.map((u,r)=>`${iQ({field:a,timeUnit:c,equal:u})} ? ${r} : `).join("")+d.length;t=new $h(t,{calculate:f,as:zh(i,s,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Nt(this.transform)}`}}function zh(e,t,n){return Pe(e,{prefix:t,suffix:"sort_index",...n})}function CS(e,t){return Ot(["top","bottom"],t)?"column":Ot(["left","right"],t)||e==="row"?"row":"column"}function qh(e,t,n,i){const s=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return zn((t||{})[e],s[e],n.header[e])}function LS(e,t,n,i){const s={};for(const a of e){const c=qh(a,t||{},n,i);c!==void 0&&(s[a]=c)}return s}const SC=["row","column"],BC=["header","footer"];function YCe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,s=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:c,titleOrient:d}=LS(["titleAnchor","titleAngle","titleOrient"],s.header,i,t),f=CS(t,d),u=Gg(c);return{name:`${t}-title`,type:"group",role:`${f}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...KZ(u,f),...XZ(f,u,a),...JZ(i,s,t,LNe,QQ)}}}function XZ(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=WZ(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function KZ(e,t){const n=HZ(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function XCe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const s of BC)if(n[s])for(const a of n[s]){const c=JCe(e,t,s,n,a);c!=null&&i.push(c)}return i}function KCe(e,t){const{sort:n}=e;return ul(n)?{field:Pe(n,{expr:"datum"}),order:n.order??"ascending"}:Te(n)?{field:zh(e,t,{expr:"datum"}),order:"ascending"}:{field:Pe(e,{expr:"datum"}),order:n??"ascending"}}function X2(e,t,n){const{format:i,formatType:s,labelAngle:a,labelAnchor:c,labelOrient:d,labelExpr:f}=LS(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=eC({fieldOrDatumDef:e,format:i,formatType:s,expr:"parent",config:n}).signal,r=CS(t,d);return{text:{signal:f?gf(gf(f,"datum.label",u),"datum.value",Pe(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...KZ(a,r),...XZ(r,a,c),...JZ(n,e,t,PNe,ZQ)}}function JCe(e,t,n,i,s){if(s){let a=null;const{facetFieldDef:c}=i,d=e.config?e.config:void 0;if(c&&s.labels){const{labelOrient:h}=LS(["labelOrient"],c.header,d,t);(t==="row"&&!Ot(["top","bottom"],h)||t==="column"&&!Ot(["left","right"],h))&&(a=X2(c,t,d))}const f=Js(e)&&!Xm(e.facet),u=s.axes,r=(u==null?void 0:u.length)>0;if(a||r){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:KCe(c,t)}:{},...r&&f?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...s.sizeSignal?{encode:{update:{[h]:s.sizeSignal}}}:{},...r?{axes:u}:{}}}}return null}const QCe={column:{start:0,end:1},row:{start:1,end:0}};function ZCe(e,t){return QCe[t][e]}function eLe(e,t){const n={};for(const i of gr){const s=e[i];if(s!=null&&s.facetFieldDef){const{titleAnchor:a,titleOrient:c}=LS(["titleAnchor","titleOrient"],s.facetFieldDef.header,t,i),d=CS(i,c),f=ZCe(a,d);f!==void 0&&(n[d]=f)}}return ln(n)?void 0:n}function JZ(e,t,n,i,s){const a={};for(const c of i){if(!s[c])continue;const d=qh(c,t==null?void 0:t.header,e,n);d!==void 0&&(a[s[c]]=d)}return a}function IC(e){return[...e0(e,"width"),...e0(e,"height"),...e0(e,"childWidth"),...e0(e,"childHeight")]}function e0(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const s=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const c=a.get("type"),d=a.get("range");if(di(c)&&Vf(d)){const f=e.scaleName(n);return Js(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[n8(f,d)]:[n8(f,d),{name:s,update:QZ(f,a,`domain('${f}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=s.endsWith("width"),c=a?"containerSize()[0]":"containerSize()[1]",d=j2(e.config.view,a?"width":"height"),f=`isFinite(${c}) ? ${c} : ${d}`;return[{name:s,init:f,on:[{update:f,events:"window:resize"}]}]}else return[{name:s,value:i}]}function n8(e,t){const n=`${e}_step`;return Ye(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function QZ(e,t,n){const i=t.get("type"),s=t.get("padding"),a=zn(t.get("paddingOuter"),s);let c=t.get("paddingInner");return c=i==="band"?c!==void 0?c:s:1,`bandspace(${n}, ${Jr(c)}, ${Jr(a)}) * ${e}_step`}function ZZ(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function eee(e,t){return Be(e).reduce((n,i)=>({...n,...S_({model:t,channelDef:e[i],vgChannel:i,mainRefFn:s=>mn(s.value),invalidValueRef:void 0})}),{})}function tee(e,t){if(Js(t))return e==="theta"?"independent":"shared";if(k_(t))return"shared";if(NC(t))return qn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function FC(e,t){const n=e.scale[t],i=qn(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&xe(AAe(t)),"independent"):e[i][t]||"shared"}const tLe={...jNe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},nee=Be(tLe);class nLe extends Rl{}const i8={symbols:iLe,gradient:sLe,labels:rLe,entries:aLe};function iLe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:s,legendType:a}){if(a!=="symbol")return;const{markDef:c,encoding:d,config:f,mark:u}=n,r=c.filled&&u!=="trail";let h={...zMe({},n,COe),...kZ(n,{filled:r})};const p=s.get("symbolOpacity")??f.legend.symbolOpacity,_=s.get("symbolFillColor")??f.legend.symbolFillColor,l=s.get("symbolStrokeColor")??f.legend.symbolStrokeColor,b=p===void 0?iee(d.opacity)??c.opacity:void 0;if(h.fill){if(i==="fill"||r&&i===Fs)delete h.fill;else if(Fe(h.fill,"field"))_?delete h.fill:(h.fill=mn(f.legend.symbolBaseFillColor??"black"),h.fillOpacity=mn(b??1));else if(Te(h.fill)){const m=K2(d.fill??d.color)??c.fill??(r&&c.color);m&&(h.fill=mn(m))}}if(h.stroke){if(i==="stroke"||!r&&i===Fs)delete h.stroke;else if(Fe(h.stroke,"field")||l)delete h.stroke;else if(Te(h.stroke)){const m=zn(K2(d.stroke||d.color),c.stroke,r?c.color:void 0);m&&(h.stroke={value:m})}}if(i!==Al){const m=Oe(t)&&ree(n,s,t);m?h.opacity=[{test:m,...mn(b??1)},mn(f.legend.unselectedOpacity)]:b&&(h.opacity=mn(b))}return h={...h,...e},ln(h)?void 0:h}function sLe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:s,markDef:a,encoding:c}=t;let d={};const u=(i.get("gradientOpacity")??s.legend.gradientOpacity)===void 0?iee(c.opacity)||a.opacity:void 0;return u&&(d.opacity=mn(u)),d={...d,...e},ln(d)?void 0:d}function rLe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:s}){const a=n.legend(i)||{},c=n.config,d=Oe(t)?ree(n,s,t):void 0,f=d?[{test:d,value:1},{value:c.legend.unselectedOpacity}]:void 0,{format:u,formatType:r}=a;let h;vf(r)?h=Qr({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:r,config:c}):u===void 0&&r===void 0&&c.customFormatTypes&&(t.type==="quantitative"&&c.numberFormatType?h=Qr({fieldOrDatumDef:t,field:"datum.value",format:c.numberFormat,formatType:c.numberFormatType,config:c}):t.type==="temporal"&&c.timeFormatType&&Oe(t)&&t.timeUnit===void 0&&(h=Qr({fieldOrDatumDef:t,field:"datum.value",format:c.timeFormat,formatType:c.timeFormatType,config:c})));const p={...f?{opacity:f}:{},...h?{text:h}:{},...e};return ln(p)?void 0:p}function aLe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function iee(e){return see(e,(t,n)=>Math.max(t,n.value))}function K2(e){return see(e,(t,n)=>zn(t,n.value))}function see(e,t){if(nNe(e))return $e(e.condition).reduce(t,e.value);if(oa(e))return e.value}function ree(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const s=Re(n.field);return i.map(a=>`(!length(data(${Re(Tn(a)+Sf)})) || (${a}[${s}] && indexof(${a}[${s}], datum.value) >= 0))`).join(" || ")}const s8={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:s}=t;return bQ(e,e.type,i,s,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return TQ(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??hLe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??_Le(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??lLe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Qu(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Ju(n)&&Ha(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>oLe(t,e)};function oLe(e,t){const n=e.values;if(Te(n))return NQ(t,n);if(Ye(n))return n}function lLe(e,t,n,i){if(t!=="shape"){const s=K2(n)??i;if(s)return s}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function cLe(e){const{legend:t}=e;return zn(t.type,dLe(e))}function dLe({channel:e,timeUnit:t,scaleType:n}){if(Ju(e)){if(Ot(["quarter","month","day"],t))return"symbol";if(Ha(n))return"gradient"}return"symbol"}function fLe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??uLe(n,t)}function uLe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function hLe({legendConfig:e,model:t,direction:n,orient:i,scaleType:s}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:c,gradientVerticalMaxLength:d,gradientVerticalMinLength:f}=e;if(Ha(s))return n==="horizontal"?i==="top"||i==="bottom"?r8(t,"width",c,a):c:r8(t,"height",f,d)}function r8(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function _Le(e){if(Ot(["quantile","threshold","log","symlog"],e))return"greedy"}function aee(e){const t=Bn(e)?pLe(e):wLe(e);return e.component.legends=t,t}function pLe(e){const{encoding:t}=e,n={};for(const i of[Fs,...tZ]){const s=Zn(t[i]);!s||!e.getScaleComponent(i)||i===ks&&Oe(s)&&s.type===E_||(n[i]=mLe(e,i))}return n}function yLe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function gLe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function mLe(e,t){var k;let n=e.legend(t);const{markDef:i,encoding:s,config:a}=e,c=a.legend,d=new nLe({},yLe(e,t));FCe(e,t,d);const f=n!==void 0?!n:c.disable;if(d.set("disable",f,n!==void 0),f)return d;n=n||{};const u=e.getScaleComponent(t).get("type"),r=Zn(s[t]),h=Oe(r)?(k=ci(r.timeUnit))==null?void 0:k.unit:void 0,p=n.orient||a.legend.orient||"right",_=cLe({legend:n,channel:t,timeUnit:h,scaleType:u}),l=fLe({legend:n,legendType:_,orient:p,legendConfig:c}),b={legend:n,channel:t,model:e,markDef:i,encoding:s,fieldOrDatumDef:r,legendConfig:c,config:a,scaleType:u,orient:p,legendType:_,direction:l};for(const F of nee){if(_==="gradient"&&F.startsWith("symbol")||_==="symbol"&&F.startsWith("gradient"))continue;const x=F in s8?s8[F](b):n[F];if(x!==void 0){const M=gLe(x,F,n,e.fieldDef(t));(M||a.legend[F]===void 0)&&d.set(F,x,M)}}const m=(n==null?void 0:n.encoding)??{},E=d.get("selections"),B={},I={fieldOrDatumDef:r,model:e,channel:t,legendCmpt:d,legendType:_};for(const F of["labels","legend","title","symbols","gradient","entries"]){const x=eee(m[F]??{},e),M=F in i8?i8[F](x,I):x;M!==void 0&&!ln(M)&&(B[F]={...E!=null&&E.length&&Oe(r)?{name:`${Tn(r.field)}_legend_${F}`}:{},...E!=null&&E.length?{interactive:!!E}:{},update:M})}return ln(B)||d.set("encode",B,!!(n!=null&&n.encoding)),d}function wLe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){aee(i);for(const s of Be(i.component.legends))n.legend[s]=FC(e.component.resolve,s),n.legend[s]==="shared"&&(t[s]=oee(t[s],i.component.legends[s]),t[s]||(n.legend[s]="independent",delete t[s]))}for(const i of Be(t))for(const s of e.children)s.component.legends[i]&&n.legend[i]==="shared"&&delete s.component.legends[i];return t}function oee(e,t){var a,c,d,f;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let s=!1;for(const u of nee){const r=Nc(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(h,p)=>{switch(u){case"symbolType":return bLe(h,p);case"title":return UJ(h,p);case"type":return s=!0,js("symbol")}return MS(h,p,u,"legend")});e.setWithExplicit(u,r)}return s&&((c=(a=e.implicit)==null?void 0:a.encode)!=null&&c.gradient&&o1(e.implicit,["encode","gradient"]),(f=(d=e.explicit)==null?void 0:d.encode)!=null&&f.gradient&&o1(e.explicit,["encode","gradient"])),e}function bLe(e,t){return t.value==="circle"?t:e}function TLe(e,t,n,i){var s,a;e.encode??(e.encode={}),(s=e.encode)[t]??(s[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function lee(e){const t=e.component.legends,n={};for(const s of Be(t)){const a=e.getScaleComponent(s),c=cn(a.get("domains"));if(n[c])for(const d of n[c])oee(d,t[s])||n[c].push(t[s]);else n[c]=[t[s].clone()]}return bi(n).flat().map(s=>vLe(s,e.config)).filter(s=>s!==void 0)}function vLe(e,t){var c,d,f;const{disable:n,labelExpr:i,selections:s,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),(c=a.encode)!=null&&c.symbols){const u=a.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!a.stroke&&(u.stroke={value:"transparent"});for(const r of tZ)a[r]&&delete u[r]}if(a.title||delete a.title,i!==void 0){let u=i;(f=(d=a.encode)==null?void 0:d.labels)!=null&&f.update&&Ye(a.encode.labels.update.text)&&(u=gf(i,"datum.label",a.encode.labels.update.text.signal)),TLe(a,"labels","text",{signal:u})}return a}}function ELe(e){return k_(e)||NC(e)?SLe(e):cee(e)}function SLe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),cee(e))}function cee(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const s={signal:`[${t.size.map(c=>c.signal).join(", ")}]`},a=t.data.reduce((c,d)=>{const f=Ye(d)?d.signal:`data('${e.lookupDataSource(d)}')`;return Ot(c,f)||c.push(f),c},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:s,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const BLe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class dee extends Rl{constructor(t,n,i,s){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=s,this.merged=!1}get isFit(){return!!this.data}}function fee(e){e.component.projection=Bn(e)?ILe(e):xLe(e)}function ILe(e){if(e.hasProjection){const t=_i(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,s=n?FLe(e):void 0,a=new dee(e.projectionName(!0),{..._i(e.config.projection),...t},i,s);return a.get("type")||a.set("type","equalEarth",!1),a}}function FLe(e){const t=[],{encoding:n}=e;for(const i of[[Ea,va],[xr,Sa]])(Zn(n[i[0]])||Zn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ks)&&e.typedFieldDef(ks).type===E_&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(On.Main)),t}function kLe(e,t){const n=bR(BLe,s=>!!(!Ve(e.explicit,s)&&!Ve(t.explicit,s)||Ve(e.explicit,s)&&Ve(t.explicit,s)&&Ys(e.get(s),t.get(s))));if(Ys(e.size,t.size)){if(n)return e;if(Ys(e.explicit,{}))return t;if(Ys(t.explicit,{}))return e}return null}function xLe(e){if(e.children.length===0)return;let t;for(const i of e.children)fee(i);const n=bR(e.children,i=>{const s=i.component.projection;if(s)if(t){const a=kLe(t,s);return a&&(t=a),!!a}else return t=s,!0;else return!0});if(t&&n){const i=e.projectionName(!0),s=new dee(i,t.specifiedProjection,t.size,bt(t.data));for(const a of e.children){const c=a.component.projection;c&&(c.isFit&&s.data.push(...a.component.projection.data),a.renameProjection(c.get("name"),i),c.merged=!0)}return s}}function MLe(e,t,n,i){if(Qm(t,n)){const s=Bn(e)?e.axis(n)??e.legend(n)??{}:{},a=Pe(t,{expr:"datum"}),c=Pe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Pe(t,{binSuffix:"range",forAs:!0}),formula:Ym(a,c,s.format,s.formatType,i)}}return{}}function uee(e,t){return`${AJ(e)}_${t}`}function ALe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function kC(e,t,n){const i=SS(n,void 0)??{},s=uee(i,t);return e.getName(`${s}_bins`)}function OLe(e){return"as"in e}function a8(e,t,n){let i,s;OLe(e)?i=ze(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[Pe(e,{forAs:!0}),Pe(e,{binSuffix:"end",forAs:!0})];const a={...SS(t,void 0)},c=uee(a,e.field),{signal:d,extentSignal:f}=ALe(n,c);if(hS(a.extent)){const r=a.extent;s=VZ(n,r.param,r),delete a.extent}const u={bin:a,field:e.field,as:[i],...d?{signal:d}:{},...f?{extentSignal:f}:{},...s?{span:s}:{}};return{key:c,binComponent:u}}class Qa extends rn{clone(){return new Qa(null,bt(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((s,a,c)=>{if(as(a)&&pn(a.bin)){const{key:d,binComponent:f}=a8(a,a.bin,n);s[d]={...f,...s[d],...MLe(n,a,c,n.config)}}return s},{});return ln(i)?null:new Qa(t,i)}static makeFromTransform(t,n,i){const{key:s,binComponent:a}=a8(n,n.bin,i);return new Qa(t,{[s]:a})}merge(t,n){for(const i of Be(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Ga([...this.bins[i].as,...t.bins[i].as],Nt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(bi(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(bi(this.bins).map(t=>t.field))}hash(){return`Bin ${Nt(this.bins)}`}assemble(){return bi(this.bins).flatMap(t=>{const n=[],[i,...s]=t.as,{extent:a,...c}=t.bin,d={type:"bin",field:kr(t.field),as:i,signal:t.signal,...hS(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...c};!a&&t.extentSignal&&(n.push({type:"extent",field:kr(t.field),signal:t.extentSignal}),d.extent={signal:t.extentSignal}),n.push(d);for(const f of s)for(let u=0;u<2;u++)n.push({type:"formula",expr:Pe({field:i[u]},{expr:"datum"}),as:f[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function NLe(e,t,n,i){var a;const s=Bn(i)?i.encoding[So(t)]:void 0;if(as(n)&&Bn(i)&&BQ(n,s,i.markDef,i.config)){e.add(Pe(n,{})),e.add(Pe(n,{suffix:"end"}));const{mark:c,markDef:d,config:f}=i,u=Oc({fieldDef:n,markDef:d,config:f});Hg(c)&&u!==.5&&qn(t)&&(e.add(Pe(n,{suffix:AS})),e.add(Pe(n,{suffix:OS}))),n.bin&&Qm(n,t)&&e.add(Pe(n,{binSuffix:"range"}))}else if(vJ(t)){const c=TJ(t);e.add(i.getName(c))}else e.add(Pe(n));return Wf(n)&&vOe((a=n.scale)==null?void 0:a.range)&&e.add(n.scale.range.field),e}function RLe(e,t){for(const n of Be(t)){const i=t[n];for(const s of Be(i))n in e?e[n][s]=new Set([...e[n][s]??[],...i[s]]):e[n]={[s]:i[s]}}}class ta extends rn{clone(){return new ta(null,new Set(this.dimensions),bt(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(c=>{c.aggregate&&(i=!0)});const s={},a=new Set;return!i||(n.forEachFieldDef((c,d)=>{const{aggregate:f,field:u}=c;if(f)if(f==="count")s["*"]??(s["*"]={}),s["*"].count=new Set([Pe(c,{forAs:!0})]);else{if(bl(f)||Qc(f)){const r=bl(f)?"argmin":"argmax",h=f[r];s[h]??(s[h]={}),s[h][r]=new Set([Pe({op:r,field:h},{forAs:!0})])}else s[u]??(s[u]={}),s[u][f]=new Set([Pe(c,{forAs:!0})]);Bo(d)&&n.scaleDomain(d)==="unaggregated"&&(s[u]??(s[u]={}),s[u].min=new Set([Pe({field:u,aggregate:"min"},{forAs:!0})]),s[u].max=new Set([Pe({field:u,aggregate:"max"},{forAs:!0})]))}else NLe(a,d,c,n)}),a.size+Be(s).length===0)?null:new ta(t,a,s)}static makeFromTransform(t,n){var i;const s=new Set,a={};for(const c of n.aggregate){const{op:d,field:f,as:u}=c;d&&(d==="count"?(a["*"]??(a["*"]={}),a["*"].count=new Set([u||Pe(c,{forAs:!0})])):(a[f]??(a[f]={}),(i=a[f])[d]??(i[d]=new Set),a[f][d].add(u||Pe(c,{forAs:!0}))))}for(const c of n.groupby??[])s.add(c);return s.size+Be(a).length===0?null:new ta(t,s,a)}merge(t){return hJ(this.dimensions,t.dimensions)?(RLe(this.measures,t.measures),!0):(WAe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Be(this.measures)])}producedFields(){const t=new Set;for(const n of Be(this.measures))for(const i of Be(this.measures[n])){const s=this.measures[n][i];s.size===0?t.add(`${i}_${n}`):s.forEach(t.add,t)}return t}hash(){return`Aggregate ${Nt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of Be(this.measures))for(const c of Be(this.measures[a]))for(const d of this.measures[a][c])i.push(d),t.push(c),n.push(a==="*"?null:kr(a));return{type:"aggregate",groupby:[...this.dimensions].map(kr),ops:t,fields:n,as:i}}}class I_ extends rn{constructor(t,n,i,s){super(t),this.model=n,this.name=i,this.data=s;for(const a of gr){const c=n.facet[a];if(c){const{bin:d,sort:f}=c;this[a]={name:n.getName(`${a}_domain`),fields:[Pe(c),...pn(d)?[Pe(c,{binSuffix:"end"})]:[]],...ul(f)?{sortField:f}:Te(f)?{sortIndexField:zh(c,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of gr)this[n]&&(t+=` ${n.charAt(0)}:${Nt(this[n])}`);return t}get fields(){var n;const t=[];for(const i of gr)(n=this[i])!=null&&n.fields&&t.push(...this[i].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of gr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Ol){const i=this.childModel.component.scales[n];if(i&&!i.merged){const s=i.get("type"),a=i.get("range");if(di(s)&&Vf(a)){const c=PS(this.childModel,n),d=OC(c);d?t[n]=d:xe(RR(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const s={row:"y",column:"x",facet:void 0}[t],a=[],c=[],d=[];s&&i&&i[s]&&(n?(a.push(`distinct_${i[s]}`),c.push("max")):(a.push(i[s]),c.push("distinct")),d.push(`distinct_${i[s]}`));const{sortField:f,sortIndexField:u}=this[t];if(f){const{op:r=TS,field:h}=f;a.push(h),c.push(r),d.push(Pe(f,{forAs:!0}))}else u&&(a.push(u),c.push("max"),d.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:c,as:d}:{}}]}}assembleFacetHeaderData(t){var f;const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,s=[],a={};for(const u of SC){for(const r of BC){const h=(i[u]&&i[u][r])??[];for(const p of h)if(((f=p.axes)==null?void 0:f.length)>0){a[u]=!0;break}}if(a[u]){const r=`length(data("${this.facet.name}"))`,h=u==="row"?n?{signal:`ceil(${r} / ${n})`}:1:n?{signal:`min(${r}, ${n})`}:{signal:r};s.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:h}]})}}const{row:c,column:d}=a;return(c||d)&&s.unshift(this.assembleRowColumnHeaderData("facet",null,t)),s}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:s,row:a,facet:c}=this;if(s&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const d=[].concat(i.x??[],i.y??[]),f=d.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:d,ops:f}]})}for(const d of[fl,dl])this[d]&&t.push(this.assembleRowColumnHeaderData(d,n,i));if(c){const d=this.assembleFacetHeaderData(i);d&&t.push(...d)}return t}}function o8(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function CLe(e,t){const n=ER(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=o8(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=o8(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return xe(nAe(t)),null}function LLe(e){const t={};return Q0(e.filter,n=>{if(nQ(n)){let i=null;DR(n)?i=Gs(n.equal):jR(n)?i=Gs(n.lte):UR(n)?i=Gs(n.lt):$R(n)?i=Gs(n.gt):zR(n)?i=Gs(n.gte):qR(n)?i=n.range[0]:VR(n)&&(i=(n.oneOf??n.in)[0]),i&&(Gf(i)?t[n.field]="date":Wt(i)?t[n.field]="number":ze(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function PLe(e){const t={};function n(i){Dh(i)?t[i.field]="date":i.type==="quantitative"&&NMe(i.aggregate)?t[i.field]="number":Ah(i.field)>1?i.field in t||(t[i.field]="flatten"):Wf(i)&&ul(i.sort)&&Ah(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Bn(e)||Js(e))&&e.forEachFieldDef((i,s)=>{if(as(i))n(i);else{const a=zf(s),c=e.fieldDef(a);n({...i,type:c.type})}}),Bn(e)){const{mark:i,markDef:s,encoding:a}=e;if(Zc(i)&&!e.encoding.order){const c=s.orient==="horizontal"?"y":"x",d=a[c];Oe(d)&&d.type==="quantitative"&&!(d.field in t)&&(t[d.field]="number")}}return t}function DLe(e){const t={};if(Bn(e)&&e.component.selection)for(const n of Be(e.component.selection)){const i=e.component.selection[n];for(const s of i.project.items)!s.channel&&Ah(s.field)>1&&(t[s.field]="flatten")}return t}class Ai extends rn{clone(){return new Ai(null,bt(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Nt(this._parse)}`}static makeExplicit(t,n,i){var c;let s={};const a=n.data;return!hc(a)&&((c=a==null?void 0:a.format)!=null&&c.parse)&&(s=a.format.parse),this.makeWithAncestors(t,s,{},i)}static makeWithAncestors(t,n,i,s){for(const d of Be(i)){const f=s.getWithExplicit(d);f.value!==void 0&&(f.explicit||f.value===i[d]||f.value==="derived"||i[d]==="flatten"?delete i[d]:xe(y$(d,i[d],f.value)))}for(const d of Be(n)){const f=s.get(d);f!==void 0&&(f===n[d]?delete n[d]:xe(y$(d,n[d],f)))}const a=new Rl(n,i);s.copyAll(a);const c={};for(const d of Be(a.combine())){const f=a.get(d);f!==null&&(c[d]=f)}return Be(c).length===0||s.parseNothing?null:new Ai(t,c)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Be(this._parse)){const i=this._parse[n];Ah(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(Be(this._parse))}dependentFields(){return new Set(Be(this._parse))}assembleTransforms(t=!1){return Be(this._parse).filter(n=>t?Ah(n)>1:!0).map(n=>{const i=CLe(n,this._parse[n]);return i?{type:"formula",expr:i,as:T_(n)}:null}).filter(n=>n!==null)}}class Cc extends rn{clone(){return new Cc(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ca])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ca}}}class tw extends rn{clone(){return new tw(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Nt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class nw extends rn{clone(){return new nw(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Nt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Bf extends rn{constructor(t){super(null),t??(t={name:"source"});let n;if(hc(t)||(n=t.format?{...bs(t.format,["parse"])}:{}),Wg(t))this._data={values:t.values};else if(Uh(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Ot(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else wZ(t)?this._data={values:[{type:"Sphere"}]}:(gZ(t)||hc(t))&&(this._data={});this._generator=hc(t),t.name&&(this._name=t.name),n&&!ln(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var l8=function(e,t,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n},ULe=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},Wy;function xC(e){return e instanceof Bf||e instanceof tw||e instanceof nw}class MC{constructor(){Wy.set(this,void 0),l8(this,Wy,!1,"f")}setModified(){l8(this,Wy,!0,"f")}get modifiedFlag(){return ULe(this,Wy,"f")}}Wy=new WeakMap;class Yf extends MC{getNodeDepths(t,n,i){i.set(t,n);for(const s of t.children)this.getNodeDepths(s,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((s,a)=>a[1]-s[1]);for(const s of i)this.run(s[0]);return this.modifiedFlag}}class AC extends MC{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class jLe extends AC{mergeNodes(t,n){const i=n.shift();for(const s of n)t.removeChild(s),s.parent=i,s.remove()}run(t){const n=t.children.map(s=>s.hash()),i={};for(let s=0;s<n.length;s++)i[n[s]]===void 0?i[n[s]]=[t.children[s]]:i[n[s]].push(t.children[s]);for(const s of Be(i))i[s].length>1&&(this.setModified(),this.mergeNodes(t,i[s]))}}class $Le extends AC{constructor(t){super(),this.requiresSelectionId=t&&EC(t)}run(t){t instanceof Cc&&(this.requiresSelectionId&&(xC(t.parent)||t.parent instanceof ta||t.parent instanceof Ai)||(this.setModified(),t.remove()))}}class zLe extends MC{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Ja&&(i=t.producedFields(),TR(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const s of t.children)this.run(s,new Set([...n,...i]))}}class qLe extends AC{constructor(){super()}run(t){t instanceof Ts&&!t.isRequired()&&(this.setModified(),t.remove())}}class VLe extends Yf{run(t){if(!xC(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Ai)if(t instanceof Ai)this.setModified(),t.merge(n);else{if(vR(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class GLe extends Yf{run(t){const n=[...t.children],i=t.children.filter(s=>s instanceof Ai);if(t.numChildren()>1&&i.length>=1){const s={},a=new Set;for(const c of i){const d=c.parse;for(const f of Be(d))f in s?s[f]!==d[f]&&a.add(f):s[f]=d[f]}for(const c of a)delete s[c];if(!ln(s)){this.setModified();const c=new Ai(t,s);for(const d of n){if(d instanceof Ai)for(const f of Be(s))delete d.parse[f];t.removeChild(d),d.parent=c,d instanceof Ai&&Be(d.parse).length===0&&d.remove()}}}}}class HLe extends Yf{run(t){t instanceof Ts||t.numChildren()>0||t instanceof I_||t instanceof Bf||(this.setModified(),t.remove())}}class WLe extends Yf{run(t){const n=t.children.filter(s=>s instanceof Ja),i=n.pop();for(const s of n)this.setModified(),i.merge(s)}}class YLe extends Yf{run(t){const n=t.children.filter(s=>s instanceof ta),i={};for(const s of n){const a=Nt(s.groupBy);a in i||(i[a]=[]),i[a].push(s)}for(const s of Be(i)){const a=i[s];if(a.length>1){const c=a.pop();for(const d of a)c.merge(d)&&(t.removeChild(d),d.parent=c,d.remove(),this.setModified())}}}}class XLe extends Yf{constructor(t){super(),this.model=t}run(t){const n=!(xC(t)||t instanceof B_||t instanceof Ai||t instanceof Cc),i=[],s=[];for(const a of t.children)a instanceof Qa&&(n&&!vR(t.producedFields(),a.dependentFields())?i.push(a):s.push(a));if(i.length>0){const a=i.pop();for(const c of i)a.merge(c,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Qa?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(s.length>1){const a=s.pop();for(const c of s)a.merge(c,this.model.renameSignal.bind(this.model));this.setModified()}}}class KLe extends Yf{run(t){const n=[...t.children];if(!Mh(n,c=>c instanceof Ts)||t.numChildren()<=1)return;const s=[];let a;for(const c of n)if(c instanceof Ts){let d=c;for(;d.numChildren()===1;){const[f]=d.children;if(f instanceof Ts)d=f;else break}s.push(...d.children),a?(t.removeChild(c),c.parent=a.parent,a.parent.removeChild(a),a.parent=d,this.setModified()):a=d}else s.push(c);if(s.length){this.setModified();for(const c of s)c.parent.removeChild(c),c.parent=a}}}class Xf extends rn{clone(){return new Xf(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ga(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Pe(t)}hash(){return`JoinAggregateTransform ${Nt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const s=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}}}}class Vh extends rn{clone(){return new Vh(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:s,markDef:a}=n,{marks:c,scales:d}=i;if(c==="include-invalid-values"&&d==="include-invalid-values")return null;const f=n.reduceFieldDef((u,r,h)=>{const p=Bo(h)&&n.getScaleComponent(h);if(p){const _=p.get("type"),{aggregate:l}=r,b=JR({scaleChannel:h,markDef:a,config:s,scaleType:_,isCountAggregate:uS(l)});b!=="show"&&b!=="always-valid"&&(u[r.field]=r)}return u},{});return Be(f).length?new Vh(t,f):null}dependentFields(){return new Set(Be(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Nt(this.filter)}`}assemble(){const t=Be(this.filter).reduce((n,i)=>{const s=this.filter[i],a=Pe(s,{expr:"datum"});return s!==null&&(s.type==="temporal"?n.push(`(isDate(${a}) || (${J2(a)}))`):s.type==="quantitative"&&n.push(J2(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function J2(e){return`isValid(${e}) && isFinite(+${e})`}function JLe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,s=Pe(i);return s&&t.push(s),t},[])}function QLe(e){return Te(e)&&e.every(t=>ze(t))&&e.length>1}class _l extends rn{clone(){return new _l(null,bt(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:s,as:a,offset:c="zero"}=n,d=[],f=[];if(n.sort!==void 0)for(const h of n.sort)d.push(h.field),f.push(zn(h.order,"ascending"));const u={field:d,order:f};let r;return QLe(a)?r=a:ze(a)?r=[a,`${a}_end`]:r=[`${n.stack}_start`,`${n.stack}_end`],new _l(t,{dimensionFieldDefs:[],stackField:i,groupby:s,offset:c,sort:u,facetby:[],as:r})}static makeFromEncoding(t,n){const i=n.stack,{encoding:s}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:c,offset:d,impute:f}=i,u=a.map(_=>{const l=s[_];return la(l)}).filter(_=>!!_),r=JLe(n),h=n.encoding.order;let p;if(Te(h)||Oe(h))p=LJ(h);else{const _=IQ(h)?h.sort:c==="y"?"descending":"ascending";p=r.reduce((l,b)=>(l.field.includes(b)||(l.field.push(b),l.order.push(_)),l),{field:[],order:[]})}return new _l(t,{dimensionFieldDefs:u,stackField:n.vgField(c),facetby:[],stackby:r,sort:p,offset:d,impute:f,as:[n.vgField(c,{suffix:"start",forAs:!0}),n.vgField(c,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Nt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(s=>s.bin?n?[Pe(s,{binSuffix:"mid"})]:[Pe(s,{}),Pe(s,{binSuffix:"end"})]:[Pe(s)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:s,stackby:a,sort:c,offset:d,impute:f,as:u}=this._stack;if(f)for(const r of i){const{bandPosition:h=.5,bin:p}=r;if(p){const _=Pe(r,{expr:"datum"}),l=Pe(r,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${J2(_)} ? ${h}*${_}+${1-h}*${l} : ${_}`,as:Pe(r,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:s,groupby:[...a,...n],key:Pe(r,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:s,sort:c,as:u,offset:d}),t}}class F_ extends rn{clone(){return new F_(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ga(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Pe(t)}hash(){return`WindowTransform ${Nt(this.transform)}`}assemble(){const t=[],n=[],i=[],s=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),s.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,c=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>OR(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...c!==void 0?{groupby:c}:{}};const d=[],f=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)d.push(h.field),f.push(h.order??"ascending");const u={field:d,order:f},r=this.transform.ignorePeers;return{type:"window",params:s,as:i,ops:n,fields:t,sort:u,...r!==void 0?{ignorePeers:r}:{},...c!==void 0?{groupby:c}:{},...a!==void 0?{frame:a}:{}}}}function ZLe(e){function t(n){if(!(n instanceof I_)){const i=n.clone();if(i instanceof Ts){const s=Z2+i.getSource();i.setSource(s),e.model.component.data.outputNodes[s]=i}else(i instanceof ta||i instanceof _l||i instanceof F_||i instanceof Xf)&&i.addDimensions(e.fields);for(const s of n.children.flatMap(t))s.parent=i;return[i]}return n.children.flatMap(t)}return t}function Q2(e){if(e instanceof I_)if(e.numChildren()===1&&!(e.children[0]instanceof Ts)){const t=e.children[0];(t instanceof ta||t instanceof _l||t instanceof F_||t instanceof Xf)&&t.addDimensions(e.fields),t.swapWithParent(),Q2(e)}else{const t=e.model.component.data.main;hee(t);const n=ZLe(e),i=e.children.map(n).flat();for(const s of i)s.parent=t}else e.children.map(Q2)}function hee(e){if(e instanceof Ts&&e.type===On.Main&&e.numChildren()===1){const t=e.children[0];t instanceof I_||(t.swapWithParent(),hee(e))}}const Z2="scale_",t0=5;function ex(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!ex(t.children))return!1}return!0}function Dr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function c8(e,t,n){let i=e.sources,s=!1;return s=Dr(new qLe,i)||s,s=Dr(new $Le(t),i)||s,i=i.filter(a=>a.numChildren()>0),s=Dr(new HLe,i)||s,i=i.filter(a=>a.numChildren()>0),n||(s=Dr(new VLe,i)||s,s=Dr(new XLe(t),i)||s,s=Dr(new zLe,i)||s,s=Dr(new GLe,i)||s,s=Dr(new YLe,i)||s,s=Dr(new WLe,i)||s,s=Dr(new jLe,i)||s,s=Dr(new KLe,i)||s),e.sources=i,s}function ePe(e,t){ex(e.sources);let n=0,i=0;for(let s=0;s<t0&&c8(e,t,!0);s++)n++;e.sources.map(Q2);for(let s=0;s<t0&&c8(e,t,!1);s++)i++;ex(e.sources),Math.max(n,i)===t0&&xe(`Maximum optimization runs(${t0}) reached.`)}class ii{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ii(()=>t(n))}}function _ee(e){Bn(e)?tPe(e):nPe(e)}function tPe(e){const t=e.component.scales;for(const n of Be(t)){const i=sPe(e,n);if(t[n].setWithExplicit("domains",i),aPe(e,n),e.component.data.isFaceted){let a=e;for(;!Js(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const d of i.value)il(d)&&(d.data=Z2+d.data.replace(Z2,""))}}}function nPe(e){for(const n of e.children)_ee(n);const t=e.component.scales;for(const n of Be(t)){let i,s=null;for(const a of e.children){const c=a.component.scales[n];if(c){i===void 0?i=c.getWithExplicit("domains"):i=Nc(i,c.getWithExplicit("domains"),"domains","scale",tx);const d=c.get("selectionExtent");s&&d&&s.param!==d.param&&xe(QMe),s=d}}t[n].setWithExplicit("domains",i),s&&t[n].set("selectionExtent",s,!0)}}function iPe(e,t,n,i){if(e==="unaggregated"){const{valid:s,reason:a}=d8(t,n);if(!s){xe(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:s}=d8(t,n);if(s)return"unaggregated"}return e}function sPe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,s=iPe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return s!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:s}),t==="x"&&Zn(i.x2)?Zn(i.x)?Nc($l(n,s,e,"x"),$l(n,s,e,"x2"),"domain","scale",tx):$l(n,s,e,"x2"):t==="y"&&Zn(i.y2)?Zn(i.y)?Nc($l(n,s,e,"y"),$l(n,s,e,"y2"),"domain","scale",tx):$l(n,s,e,"y2"):$l(n,s,e,t)}function rPe(e,t,n){return e.map(i=>({signal:`{data: ${BS(i,{timeUnit:n,type:t})}}`}))}function nF(e,t,n){var s;const i=(s=ci(n))==null?void 0:s.unit;return t==="temporal"||i?rPe(e,t,i):[e]}function $l(e,t,n,i){const{encoding:s,markDef:a,mark:c,config:d,stack:f}=n,u=Zn(s[i]),{type:r}=u,h=u.timeUnit,p=ZRe({invalid:co("invalid",a,d),isPath:Zc(c)});if(TOe(t)){const b=$l(e,void 0,n,i),m=nF(t.unionWith,r,h);return Ra([...m,...b.value])}else{if(Ye(t))return Ra([t]);if(t&&t!=="unaggregated"&&!cQ(t))return Ra(nF(t,r,h))}if(f&&i===f.fieldChannel){if(f.offset==="normalize")return js([[0,1]]);const b=n.requestDataName(p);return js([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const _=Bo(i)&&Oe(u)?oPe(n,i,e):void 0;if(Io(u)){const b=nF([u.datum],r,h);return js(b)}const l=u;if(t==="unaggregated"){const{field:b}=u;return js([{data:n.requestDataName(p),field:Pe({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:Pe({field:b,aggregate:"max"})}])}else if(pn(l.bin)){if(di(e))return js(e==="bin-ordinal"?[]:[{data:Vg(_)?n.requestDataName(p):n.requestDataName(On.Raw),field:n.vgField(i,Qm(l,i)?{binSuffix:"range"}:{}),sort:_===!0||!je(_)?{field:n.vgField(i,{}),op:"min"}:_}]);{const{bin:b}=l;if(pn(b)){const m=kC(n,l.field,b);return js([new ii(()=>{const E=n.getSignalName(m);return`[${E}.start, ${E}.stop]`})])}else return js([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(l.timeUnit&&Ot(["time","utc"],e)){const b=s[So(i)];if(BQ(l,b,a,d)){const m=n.requestDataName(p),E=Oc({fieldDef:l,fieldDef2:b,markDef:a,config:d}),B=Hg(c)&&E!==.5&&qn(i);return js([{data:m,field:n.vgField(i,B?{suffix:AS}:{})},{data:m,field:n.vgField(i,{suffix:B?OS:"end"})}])}}return js(_?[{data:Vg(_)?n.requestDataName(p):n.requestDataName(On.Raw),field:n.vgField(i),sort:_}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function iF(e,t){const{op:n,field:i,order:s}=e;return{op:n??(t?"sum":TS),...i?{field:kr(i)}:{},...s?{order:s}:{}}}function aPe(e,t){var d;const n=e.component.scales[t],i=e.specifiedScales[t].domain,s=(d=e.fieldDef(t))==null?void 0:d.bin,a=cQ(i)?i:void 0,c=qf(s)&&hS(s.extent)?s.extent:void 0;(a||c)&&n.set("selectionExtent",a??c,!0)}function oPe(e,t,n){if(!di(n))return;const i=e.fieldDef(t),s=i.sort;if(EQ(s))return{op:"min",field:zh(i,t),order:"ascending"};const{stack:a}=e,c=a?new Set([...a.groupbyFields,...a.stackBy.map(d=>d.fieldDef.field)]):void 0;if(ul(s)){const d=a&&!c.has(s.field);return iF(s,d)}else if(ZOe(s)){const{encoding:d,order:f}=s,u=e.fieldDef(d),{aggregate:r,field:h}=u,p=a&&!c.has(h);if(bl(r)||Qc(r))return iF({field:Pe(u),order:f},p);if(OR(r)||!r)return iF({op:r,field:h,order:f},p)}else{if(s==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ot(["ascending",void 0],s))return!0}}function d8(e,t){const{aggregate:n,type:i}=e;return n?ze(n)&&!CMe.has(n)?{valid:!1,reason:SAe(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:BAe(e)}:{valid:!0}:{valid:!1,reason:EAe(e)}}function tx(e,t,n,i){return e.explicit&&t.explicit&&xe(MAe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function lPe(e){const t=Ga(e.map(c=>{if(il(c)){const{sort:d,...f}=c;return f}return c}),Nt),n=Ga(e.map(c=>{if(il(c)){const d=c.sort;return d!==void 0&&!Vg(d)&&("op"in d&&d.op==="count"&&delete d.field,d.order==="ascending"&&delete d.order),d}}).filter(c=>c!==void 0),Nt);if(t.length===0)return;if(t.length===1){const c=e[0];if(il(c)&&n.length>0){let d=n[0];if(n.length>1){xe(m$);const f=n.filter(u=>je(u)&&"op"in u&&u.op!=="min");n.every(u=>je(u)&&"op"in u)&&f.length===1?d=f[0]:d=!0}else if(je(d)&&"field"in d){const f=d.field;c.field===f&&(d=d.order?{order:d.order}:!0)}return{...c,sort:d}}return c}const i=Ga(n.map(c=>Vg(c)||!("op"in c)||ze(c.op)&&Ve(AMe,c.op)?c:(xe(OAe(c)),!0)),Nt);let s;i.length===1?s=i[0]:i.length>1&&(xe(m$),s=!0);const a=Ga(e.map(c=>il(c)?c.data:null),c=>c);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(d=>d.field),...s?{sort:s}:{}}:{fields:t,...s?{sort:s}:{}}}function OC(e){if(il(e)&&ze(e.field))return e.field;if(LMe(e)){let t;for(const n of e.fields)if(il(n)&&ze(n.field)){if(!t)t=n.field;else if(t!==n.field)return xe(NAe),t}return xe(RAe),t}else if(PMe(e)){xe(CAe);const t=e.fields[0];return ze(t)?t:void 0}}function PS(e,t){const i=e.component.scales[t].get("domains").map(s=>(il(s)&&(s.data=e.lookupDataSource(s.data)),s));return lPe(i)}function pee(e){return k_(e)||NC(e)?e.children.reduce((t,n)=>t.concat(pee(n)),f8(e)):f8(e)}function f8(e){return Be(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const s=i.combine(),{name:a,type:c,selectionExtent:d,domains:f,range:u,reverse:r,...h}=s,p=cPe(s.range,a,n,e),_=PS(e,n),l=d?rCe(e,d,i,_):null;return t.push({name:a,type:c,..._?{domain:_}:{},...l?{domainRaw:l}:{},range:p,...r!==void 0?{reverse:r}:{},...h}),t},[])}function cPe(e,t,n,i){if(qn(n)){if(Vf(e))return{step:{signal:`${t}_step`}}}else if(je(e)&&il(e))return{...e,data:i.lookupDataSource(e.data)};return e}class yee extends Rl{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ot([pi.LOG,pi.TIME,pi.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ot([pi.LINEAR,pi.SQRT,pi.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let s=!1,a=!1,c=!1;for(const d of i){if(Te(d)){const f=d[0],u=d[d.length-1];if(Wt(f)&&Wt(u))if(f<=0&&u>=0){s=!0;continue}else{a=!0;continue}}c=!0}if(s)return"definitely";if(a&&!c)return"definitely-not"}return"maybe"}}const dPe=["range","scheme"];function fPe(e){const t=e.component.scales;for(const n of AR){const i=t[n];if(!i)continue;const s=uPe(n,e);i.setWithExplicit("range",s)}}function u8(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:s}=n,a=xs(t),c=e.getName(a);if(je(i)&&i.binned&&i.step!==void 0)return new ii(()=>{const d=e.scaleName(t),f=`(domain("${d}")[1] - domain("${d}")[0]) / ${i.step}`;return`${e.getSignalName(c)} / (${f})`});if(pn(i)){const d=kC(e,s,i);return new ii(()=>{const f=e.getSignalName(d),u=`(${f}.stop - ${f}.start) / ${f}.step`;return`${e.getSignalName(c)} / (${u})`})}}}function uPe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of dPe)if(n[h]!==void 0){const p=P2(a,h),_=dQ(e,h);if(!p)xe(qJ(a,h,e));else if(_)xe(_);else switch(h){case"range":{const l=n.range;if(Te(l)){if(qn(e))return Ra(l.map(b=>{if(b==="width"||b==="height"){const m=t.getName(b),E=t.getSignalName.bind(t);return ii.fromName(E,m)}return b}))}else if(je(l))return Ra({data:t.requestDataName(On.Main),field:l.field,sort:{op:"min",field:t.vgField(e)}});return Ra(l)}case"scheme":return Ra(hPe(n[h]))}}const c=e===vn||e==="xOffset"?"width":"height",d=i[c];if(uo(d)){if(qn(e))if(di(a)){const h=mee(d,t,e);if(h)return Ra({step:h})}else xe(VJ(c));else if(Gm(e)){const h=e===Wc?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const l=wee(d,a);if(l)return Ra(l)}}}const{rangeMin:f,rangeMax:u}=n,r=_Pe(e,t);return(f!==void 0||u!==void 0)&&P2(a,"rangeMin")&&Te(r)&&r.length===2?Ra([f??r[0],u??r[1]]):js(r)}function hPe(e){return bOe(e)?{scheme:e.name,...bs(e,["name"])}:{scheme:e}}function gee(e,t,n,{center:i}={}){const s=xs(e),a=t.getName(s),c=t.getSignalName.bind(t);return e===ui&&aa(n)?i?[ii.fromName(d=>`${c(d)}/2`,a),ii.fromName(d=>`-${c(d)}/2`,a)]:[ii.fromName(c,a),0]:i?[ii.fromName(d=>`-${c(d)}/2`,a),ii.fromName(d=>`${c(d)}/2`,a)]:[0,ii.fromName(c,a)]}function _Pe(e,t){const{size:n,config:i,mark:s,encoding:a}=t,{type:c}=Zn(a[e]),f=t.getScaleComponent(e).get("type"),{domain:u,domainMid:r}=t.specifiedScales[e];switch(e){case vn:case ui:{if(Ot(["point","band"],f)){const h=bee(e,n,i.view);if(uo(h))return{step:mee(h,t,e)}}return gee(e,t,f)}case Wc:case v_:return pPe(e,t,f);case Ml:{const h=mPe(s,i),p=wPe(s,n,t,i);return Ch(f)?gPe(h,p,yPe(f,i,u,e)):[h,p]}case Ar:return[0,Math.PI*2];case $f:return[0,360];case Ta:return[0,new ii(()=>{const h=t.getSignalName(Js(t.parent)?"child_width":"width"),p=t.getSignalName(Js(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case Kc:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Jc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ks:return"symbol";case Fs:case vo:case Eo:return f==="ordinal"?c==="nominal"?"category":"ordinal":r!==void 0?"diverging":s==="rect"||s==="geoshape"?"heatmap":"ramp";case Al:case Yc:case Xc:return[i.scale.minOpacity,i.scale.maxOpacity]}}function mee(e,t,n){const{encoding:i}=t,s=t.getScaleComponent(n),a=FR(n),c=i[a];if(iZ({step:e,offsetIsDiscrete:vt(c)&&sQ(c.type)})==="offset"&&PQ(i,a)){const f=t.getScaleComponent(a);let r=`domain('${t.scaleName(a)}').length`;if(f.get("type")==="band"){const p=f.get("paddingInner")??f.get("padding")??0,_=f.get("paddingOuter")??f.get("padding")??0;r=`bandspace(${r}, ${p}, ${_})`}const h=s.get("paddingInner")??s.get("padding");return{signal:`${e.step} * ${r} / (1-${$Me(h)})`}}else return e.step}function wee(e,t){if(iZ({step:e,offsetIsDiscrete:di(t)})==="offset")return{step:e.step}}function pPe(e,t,n){const i=e===Wc?"x":"y",s=t.getScaleComponent(i);if(!s)return gee(i,t,n,{center:!0});const a=s.get("type"),c=t.scaleName(i),{markDef:d,config:f}=t;if(a==="band"){const u=bee(i,t.size,t.config.view);if(uo(u)){const r=wee(u,n);if(r)return r}return[0,{signal:`bandwidth('${c}')`}]}else{const u=t.encoding[i];if(Oe(u)&&u.timeUnit){const r=eQ(u.timeUnit,l=>`scale('${c}', ${l})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=Oc({fieldDef:u,markDef:d,config:f})-.5,_=p!==0?` + ${p}`:"";if(h){const l=Ye(h)?`${h.signal}/2`+_:`${h/2+p}`,b=Ye(h)?`(1 - ${h.signal}/2)`+_:`${1-h/2+p}`;return[{signal:`${l} * (${r})`},{signal:`${b} * (${r})`}]}return[0,{signal:r}]}return fJ(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function bee(e,t,n){const i=e===vn?"width":"height",s=t[i];return s||y1(n,i)}function yPe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Te(n)?n.length+1:(xe(VAe(i)),3)}}function gPe(e,t,n){const i=()=>{const s=Jr(t),a=Jr(e),c=`(${s} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${s} + ${c}, ${c})`};return Ye(t)?new ii(i):{signal:i()}}function mPe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(_S("size",e))}const h8=.95;function wPe(e,t,n,i){const s={x:u8(n,"x"),y:u8(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=_8(t,s,i.view);return Wt(a)?a-1:new ii(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=_8(t,s,i.view);return Wt(a)?Math.pow(h8*a,2):new ii(()=>`pow(${h8} * ${a.signal}, 2)`)}}throw new Error(_S("size",e))}function _8(e,t,n){const i=uo(e.width)?e.width.step:$2(n,"width"),s=uo(e.height)?e.height.step:$2(n,"height");return t.x||t.y?new ii(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:s].join(", ")})`):Math.min(i,s)}function Tee(e,t){Bn(e)?bPe(e,t):Eee(e,t)}function bPe(e,t){const n=e.component.scales,{config:i,encoding:s,markDef:a,specifiedScales:c}=e;for(const d of Be(n)){const f=c[d],u=n[d],r=e.getScaleComponent(d),h=Zn(s[d]),p=f[t],_=r.get("type"),l=r.get("padding"),b=r.get("paddingInner"),m=P2(_,t),E=dQ(d,t);if(p!==void 0&&(m?E&&xe(E):xe(qJ(_,t,d))),m&&E===void 0)if(p!==void 0){const B=h.timeUnit,I=h.type;switch(t){case"domainMax":case"domainMin":Gf(f[t])||I==="temporal"||B?u.set(t,{signal:BS(f[t],{type:I,timeUnit:B})},!0):u.set(t,f[t],!0);break;default:u.copyKeyFromObject(t,f)}}else{const B=Fe(p8,t)?p8[t]({model:e,channel:d,fieldOrDatumDef:h,scaleType:_,scalePadding:l,scalePaddingInner:b,domain:f.domain,domainMin:f.domainMin,domainMax:f.domainMax,markDef:a,config:i,hasNestedOffsetScale:DQ(s,d),hasSecondaryRangeChannel:!!s[So(d)]}):i.scale[t];B!==void 0&&u.set(t,B,!1)}}}const p8={bins:({model:e,fieldOrDatumDef:t})=>Oe(t)?TPe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>vPe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:s,fieldOrDatumDef:a})=>EPe(e,t,n,i,s,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:s})=>SPe(e,t,s.scale,n,i,s.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:s,hasNestedOffsetScale:a})=>BPe(e,t,n.type,i,s.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:s,hasNestedOffsetScale:a})=>IPe(e,t,n,i,s.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const s=Oe(e)?e.sort:void 0;return FPe(t,s,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:s,config:a,hasSecondaryRangeChannel:c})=>kPe(e,t,n,i,s,a.scale,c)};function vee(e){Bn(e)?fPe(e):Eee(e,"range")}function Eee(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?vee(i):Tee(i,t);for(const i of Be(n)){let s;for(const a of e.children){const c=a.component.scales[i];if(c){const d=c.getWithExplicit(t);s=Nc(s,d,t,"scale",yZ((f,u)=>{switch(t){case"range":return f.step&&u.step?f.step-u.step:0}return 0}))}}n[i].setWithExplicit(t,s)}}function TPe(e,t){const n=t.bin;if(pn(n)){const i=kC(e,t.field,n);return new ii(()=>e.getSignalName(i))}else if(hi(n)&&qf(n)&&n.step!==void 0)return{step:n.step}}function vPe(e,t){if(Ot([Fs,vo,Eo],e)&&t!=="nominal")return"hcl"}function EPe(e,t,n,i,s,a){var c;if(!((c=la(a))!=null&&c.bin||Te(n)||s!=null||i!=null||Ot([pi.TIME,pi.UTC],e)))return qn(t)?!0:void 0}function SPe(e,t,n,i,s,a){if(qn(e)){if(Ha(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:c,orient:d}=s;if(c==="bar"&&!(Oe(i)&&(i.bin||i.timeUnit))&&(d==="vertical"&&e==="x"||d==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===pi.POINT)return n.pointPadding}}function BPe(e,t,n,i,s,a=!1){if(e===void 0){if(qn(t)){const{bandPaddingInner:c,barBandPaddingInner:d,rectBandPaddingInner:f,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:r}=s;return a?r:zn(c,n==="bar"?d:n==="tick"?u:f)}else if(Gm(t)&&i===pi.BAND)return s.offsetBandPaddingInner}}function IPe(e,t,n,i,s,a=!1){if(e===void 0){if(qn(t)){const{bandPaddingOuter:c,bandWithNestedOffsetPaddingOuter:d}=s;if(a)return d;if(n===pi.BAND)return zn(c,Ye(i)?{signal:`${i.signal}/2`}:i/2)}else if(Gm(t)){if(n===pi.POINT)return .5;if(n===pi.BAND)return s.offsetBandPaddingOuter}}}function FPe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return aa(e)&&t==="descending"?Ye(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(aa(e)&&t==="descending")return!0}function kPe(e,t,n,i,s,a,c){if(!!n&&n!=="unaggregated"&&aa(s)){if(Te(n)){const f=n[0],u=n[n.length-1];if(Wt(f)&&f<=0&&Wt(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Ch(s))return!0;if(!(Oe(t)&&t.bin)&&Ot([...Ol,...EMe],e)){const{orient:f,type:u}=i;return Ot(["bar","area","line","trail"],u)&&(f==="horizontal"&&e==="y"||f==="vertical"&&e==="x")?!1:Ot(["bar","area"],u)&&!c?!0:a==null?void 0:a.zero}return!1}function xPe(e,t,n,i,s=!1){const a=MPe(t,n,i,s),{type:c}=e;return Bo(t)?c!==void 0?FOe(t,c)?Oe(n)&&!IOe(c,n.type)?(xe(kAe(c,a)),a):c:(xe(FAe(t,c,a)),a):a:null}function MPe(e,t,n,i){var s;switch(t.type){case"nominal":case"ordinal":{if(Ju(e)||WI(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&xe(YI(e,"ordinal")),"ordinal";if(qn(e)||Gm(e)){if(Ot(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in MR)return"band";const a=n[xs(e)];return Tf(a)||Ph(t)&&((s=t.axis)!=null&&s.tickBand)?"band":"point"}case"temporal":return Ju(e)?"time":WI(e)==="discrete"?(xe(YI(e,"temporal")),"ordinal"):Oe(t)&&t.timeUnit&&ci(t.timeUnit).utc?"utc":"time";case"quantitative":return Ju(e)?Oe(t)&&pn(t.bin)?"bin-ordinal":"linear":WI(e)==="discrete"?(xe(YI(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error($J(t.type))}function APe(e,{ignoreRange:t}={}){See(e),_ee(e);for(const n of BOe)Tee(e,n);t||vee(e)}function See(e){Bn(e)?e.component.scales=OPe(e):e.component.scales=RPe(e)}function OPe(e){const{encoding:t,mark:n,markDef:i}=e,s={};for(const a of AR){const c=Zn(t[a]);if(c&&n===hQ&&a===ks&&c.type===E_)continue;let d=c&&c.scale;if(c&&d!==null&&d!==!1){d??(d={});const f=DQ(t,a),u=xPe(d,a,c,i,f);s[a]=new yee(e.scaleName(`${a}`,!0),{value:u,explicit:d.type===u})}}return s}const NPe=yZ((e,t)=>b$(e)-b$(t));function RPe(e){var t;const n=e.component.scales={},i={},s=e.component.resolve;for(const a of e.children){See(a);for(const c of Be(a.component.scales))if((t=s.scale)[c]??(t[c]=tee(c,e)),s.scale[c]==="shared"){const d=i[c],f=a.component.scales[c].getWithExplicit("type");d?pOe(d.value,f.value)?i[c]=Nc(d,f,"type","scale",NPe):(s.scale[c]="independent",delete i[c]):i[c]=f}}for(const a of Be(i)){const c=e.scaleName(a,!0),d=i[a];n[a]=new yee(c,d);for(const f of e.children){const u=f.component.scales[a];u&&(f.renameScale(u.get("name"),c),u.merged=!0)}}return n}class sF{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Bn(e){return(e==null?void 0:e.type)==="unit"}function Js(e){return(e==null?void 0:e.type)==="facet"}function NC(e){return(e==null?void 0:e.type)==="concat"}function k_(e){return(e==null?void 0:e.type)==="layer"}class RC{constructor(t,n,i,s,a,c,d){this.type=n,this.parent=i,this.config=a,this.correctDataNames=f=>{var u,r,h;return(u=f.from)!=null&&u.data&&(f.from.data=this.lookupDataSource(f.from.data)),(h=(r=f.from)==null?void 0:r.facet)!=null&&h.data&&(f.from.facet.data=this.lookupDataSource(f.from.facet.data)),f},this.parent=i,this.config=a,this.view=_i(d),this.name=t.name??s,this.title=Kl(t.title)?{text:t.title}:t.title?_i(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new sF,this.projectionNameMap=i?i.projectionNameMap:new sF,this.signalNameMap=i?i.signalNameMap:new sF,this.data=t.data,this.description=t.description,this.transforms=$Re(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:GNe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:vS(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new Rl,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...c?bt(c):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){APe(this)}parseProjection(){fee(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){aee(this)}assembleEncodeFromView(t){const{style:n,...i}=t,s={};for(const a of Be(i)){const c=i[a];c!==void 0&&(s[a]=mn(c))}return s}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=mn(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:ln(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:s}=this,a=eLe(i.layoutHeaders,s);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of gr)t[i].title&&n.push(YCe(this,i));for(const i of SC)n=n.concat(XCe(this,i));return n}assembleAxes(){return CCe(this.component.axes,this.config)}assembleLegends(){return lee(this)}assembleProjections(){return ELe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...OJ(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Ot(["unit","layer"],this.type)?Ot(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),ln(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const s=!this.parent||Js(this.parent)?pee(this):[];s.length>0&&(n.scales=s);const a=this.assembleAxes();a.length>0&&(n.axes=a);const c=this.assembleLegends();return c.length>0&&(n.legends=c),n}getName(t){return Tn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(On[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Js(this.parent)){const n=ZZ(t),i=fS(n),s=this.component.scales[i];if(s&&!s.merged){const a=s.get("type"),c=s.get("range");if(di(a)&&Vf(c)){const d=s.get("name"),f=PS(this,i),u=OC(f);if(u){const r=Pe({aggregate:"distinct",field:u},{expr:"datum"});return{signal:QZ(d,s,r)}}else return xe(RR(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(SJ(t)&&Bo(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(HMe(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class Bee extends RC{vgField(t,n={}){const i=this.fieldDef(t);if(i)return Pe(i,n)}reduceFieldDef(t,n){return bNe(this.getMapping(),(i,s,a)=>{const c=la(s);return c?t(i,c,a):i},n)}forEachFieldDef(t,n){aC(this.getMapping(),(i,s)=>{const a=la(i);a&&t(a,s)},n)}}class DS extends rn{clone(){return new DS(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=bt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const s=this.transform.resolve??"shared";this.transform.resolve=s}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Nt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class US extends rn{clone(){return new US(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=bt(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Nt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class jS extends rn{clone(){return new jS(this.parent,bt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=bt(n);const{flatten:i,as:s=[]}=this.transform;this.transform.as=i.map((a,c)=>s[c]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Nt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class $S extends rn{clone(){return new $S(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=bt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Nt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class eh extends rn{clone(){return new eh(null,bt(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const s of[[Ea,va],[xr,Sa]]){const a=s.map(c=>{const d=Zn(n.encoding[c]);return Oe(d)?d.field:Io(d)?{expr:`${d.datum}`}:oa(d)?{expr:`${d.value}`}:void 0});(a[0]||a[1])&&(t=new eh(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(ks)){const s=n.typedFieldDef(ks);s.type===E_&&(t=new eh(t,null,s.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,s){super(t),this.fields=n,this.geojson=i,this.signal=s}dependentFields(){const t=(this.fields??[]).filter(ze);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Nt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Yg extends rn{clone(){return new Yg(null,this.projection,bt(this.fields),bt(this.as))}constructor(t,n,i,s){super(t),this.projection=n,this.fields=i,this.as=s}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Ea,va],[xr,Sa]]){const s=i.map(c=>{const d=Zn(n.encoding[c]);return Oe(d)?d.field:Io(d)?{expr:`${d.datum}`}:oa(d)?{expr:`${d.value}`}:void 0}),a=i[0]===xr?"2":"";(s[0]||s[1])&&(t=new Yg(t,n.projectionName(),s,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ze))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Nt(this.fields)} ${Nt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ef extends rn{clone(){return new ef(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:s}=t;return{signal:`sequence(${[n,i,...s?[s]:[]].join(",")})`}}static makeFromTransform(t,n){return new ef(t,n)}static makeFromEncoding(t,n){const i=n.encoding,s=i.x,a=i.y;if(Oe(s)&&Oe(a)){const c=s.impute?s:a.impute?a:void 0;if(c===void 0)return;const d=s.impute?a:a.impute?s:void 0,{method:f,value:u,frame:r,keyvals:h}=c.impute,p=$Q(n.mark,i);return new ef(t,{impute:c.field,key:d.field,...f?{method:f}:{},...u!==void 0?{value:u}:{},...r?{frame:r}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${Nt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:s,groupby:a,value:c,frame:d=[null,null]}=this.transform,f={type:"impute",field:t,key:n,...i?{keyvals:vRe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!s||s==="value"?c:null};if(s&&s!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[s],fields:[t],frame:d,ignorePeers:!1,...a?{groupby:a}:{}},r={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[f,u,r]}else return[f]}}class zS extends rn{clone(){return new zS(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=bt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Nt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Xg extends rn{clone(){return new Xg(null,bt(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,s){const a=n.component.data.sources,{from:c}=i;let d=null;if(ERe(c)){let f=kee(c.data,a);f||(f=new Bf(c.data),a.push(f));const u=n.getName(`lookup_${s}`);d=new Ts(f,u,On.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=d}else if(SRe(c)){const f=c.param;i={as:f,...i};let u;try{u=n.getSelectionComponent(Tn(f),f)}catch{throw new Error(KMe(f))}if(d=u.materialized,!d)throw new Error(JMe(f))}return new Xg(t,i,d.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?$e(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Nt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:$e(this.transform.as)}:{}};else{let n=this.transform.as;ze(n)||(xe(rAe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class qS extends rn{clone(){return new qS(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=bt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Nt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class VS extends rn{clone(){return new VS(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=bt(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Nt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class GS extends rn{clone(){return new GS(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ga((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Nt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:s,op:a}=this.transform;return{type:"pivot",field:t,value:n,...s!==void 0?{limit:s}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class HS extends rn{clone(){return new HS(null,bt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Nt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Iee(e){let t=0;function n(i,s){if(i instanceof Bf&&!i.isGenerator&&!Uh(i.data)&&(e.push(s),s={name:null,source:s.name,transform:[]}),i instanceof Ai&&(i.parent instanceof Bf&&!s.source?(s.format={...s.format,parse:i.assembleFormatParse()},s.transform.push(...i.assembleTransforms(!0))):s.transform.push(...i.assembleTransforms())),i instanceof I_){s.name||(s.name=`data_${t++}`),!s.source||s.transform.length>0?(e.push(s),i.data=s.name):i.data=s.source,e.push(...i.assemble());return}switch((i instanceof tw||i instanceof nw||i instanceof Vh||i instanceof B_||i instanceof $h||i instanceof Yg||i instanceof ta||i instanceof Xg||i instanceof F_||i instanceof Xf||i instanceof $S||i instanceof jS||i instanceof DS||i instanceof zS||i instanceof qS||i instanceof VS||i instanceof Cc||i instanceof HS||i instanceof GS||i instanceof US)&&s.transform.push(i.assemble()),(i instanceof Qa||i instanceof Ja||i instanceof ef||i instanceof _l||i instanceof eh)&&s.transform.push(...i.assemble()),i instanceof Ts&&(s.source&&s.transform.length===0?i.setSource(s.source):i.parent instanceof Ts?i.setSource(s.name):(s.name||(s.name=`data_${t++}`),i.setSource(s.name),i.numChildren()===1&&(e.push(s),s={name:null,source:s.name,transform:[]}))),i.numChildren()){case 0:i instanceof Ts&&(!s.source||s.transform.length>0)&&e.push(s);break;case 1:n(i.children[0],s);break;default:{s.name||(s.name=`data_${t++}`);let a=s.name;!s.source||s.transform.length>0?e.push(s):a=s.source;for(const c of i.children)n(c,{name:null,source:a,transform:[]});break}}}return n}function CPe(e){const t=[],n=Iee(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function LPe(e,t){const n=[],i=Iee(n);let s=0;for(const c of e.sources){c.hasName()||(c.dataName=`source_${s++}`);const d=c.assemble();i(c,d)}for(const c of n)c.transform.length===0&&delete c.transform;let a=0;for(const[c,d]of n.entries())(d.transform??[]).length===0&&!d.source&&n.splice(a++,0,n.splice(c,1)[0]);for(const c of n)for(const d of c.transform??[])d.type==="lookup"&&(d.from=e.outputNodes[d.from].getSource());for(const c of n)c.name in t&&(c.values=t[c.name]);return n}function PPe(e){return e==="top"||e==="left"||Ye(e)?"header":"footer"}function DPe(e){for(const t of gr)UPe(e,t);y8(e,"x"),y8(e,"y")}function UPe(e,t){var c;const{facet:n,config:i,child:s,component:a}=e;if(e.channelHasField(t)){const d=n[t],f=qh("title",null,i,t);let u=Qu(d,i,{allowDisabling:!0,includeDefault:f===void 0||!!f});s.component.layoutHeaders[t].title&&(u=Te(u)?u.join(", "):u,u+=` / ${s.component.layoutHeaders[t].title}`,s.component.layoutHeaders[t].title=null);const r=qh("labelOrient",d.header,i,t),h=d.header!==null?zn((c=d.header)==null?void 0:c.labels,i.header.labels,!0):!1,p=Ot(["bottom","right"],r)?"footer":"header";a.layoutHeaders[t]={title:d.header!==null?u:null,facetFieldDef:d,[p]:t==="facet"?[]:[Fee(e,t,h)]}}}function Fee(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function y8(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:s}=e.component;if(s.axis[t]=FC(s,t),s.axis[t]==="shared"){const a=t==="x"?"column":"row",c=i[a];for(const d of n.component.axes[t]){const f=PPe(d.get("orient"));c[f]??(c[f]=[Fee(e,a,!1)]);const u=Hy(d,"main",e.config,{header:!0});u&&c[f][0].axes.push(u),d.mainExtracted=!0}}}}function jPe(e){CC(e),b1(e,"width"),b1(e,"height")}function $Pe(e){CC(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";b1(e,t),b1(e,n)}function CC(e){for(const t of e.children)t.parseLayoutSize()}function b1(e,t){const n=ZZ(t),i=fS(n),s=e.component.resolve,a=e.component.layoutSize;let c;for(const d of e.children){const f=d.component.layoutSize.getWithExplicit(n),u=s.scale[i]??tee(i,e);if(u==="independent"&&f.value==="step"){c=void 0;break}if(c){if(u==="independent"&&c.value!==f.value){c=void 0;break}c=Nc(c,f,n,"")}else c=f}if(c){for(const d of e.children)e.renameSignal(d.getName(n),e.getName(t)),d.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,c)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function zPe(e){const{size:t,component:n}=e;for(const i of Ol){const s=xs(i);if(t[s]){const a=t[s];n.layoutSize.set(s,uo(a)?"step":a,!0)}else{const a=qPe(e,s);n.layoutSize.set(s,a,!1)}}}function qPe(e,t){const n=t==="width"?"x":"y",i=e.config,s=e.getScaleComponent(n);if(s){const a=s.get("type"),c=s.get("range");if(di(a)){const d=y1(i.view,t);return Vf(c)||uo(d)?"step":d}else return j2(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return j2(i.view,t);{const a=y1(i.view,t);return uo(a)?a.step:a}}}function nx(e,t,n){return Pe(t,{suffix:`by_${Pe(e)}`,...n})}class fg extends Bee{constructor(t,n,i,s){super(t,"facet",n,i,s,t.resolve),this.child=jC(t.spec,this,this.getName("child"),void 0,s),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Xm(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Be(t),i={};for(const s of n){if(![dl,fl].includes(s)){xe(_S(s,"facet"));break}const a=t[s];if(a.field===void 0){xe(C2(a,s));break}i[s]=this.initFacetFieldDef(a,s)}return i}initFacetFieldDef(t,n){const i=rC(t,n);return i.header?i.header=_i(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return Fe(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=WS(this),this.child.parseData()}parseLayoutSize(){CC(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),DPe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of gr)for(const i of BC){const s=this.component.layoutHeaders[n],a=s[i],{facetFieldDef:c}=s;if(c){const d=qh("titleOrient",c.header,this.config,n);if(["right","bottom"].includes(d)){const f=CS(n,d);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[f]="end"}}if(a!=null&&a[0]){const d=n==="row"?"height":"width",f=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(d)&&(t[f]??(t[f]={}),t[f][n]=.5),s.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let s="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(s="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:s}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof fg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof fg?{...this.channelHasField("column")?{encode:{update:{columns:{field:Pe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof fg){if(this.child.channelHasField("column")){const s=Pe(this.child.facet.column);t.push(s),n.push("distinct"),i.push(`distinct_${s}`)}}else for(const s of Ol){const a=this.child.component.scales[s];if(a&&!a.merged){const c=a.get("type"),d=a.get("range");if(di(c)&&Vf(d)){const f=PS(this.child,s),u=OC(f);u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):xe(RR(s))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:s}=this.facet,{fields:a,ops:c,as:d}=this.getCardinalityAggregateForChild(),f=[];for(const r of gr){const h=this.facet[r];if(h){f.push(Pe(h));const{bin:p,sort:_}=h;if(pn(p)&&f.push(Pe(h,{binSuffix:"end"})),ul(_)){const{field:l,op:b=TS}=_,m=nx(h,_);i&&s?(a.push(m),c.push("max"),d.push(m)):(a.push(l),c.push(b),d.push(m))}else if(Te(_)){const l=zh(h,r);a.push(l),c.push("max"),d.push(l)}}}const u=!!i&&!!s;return{name:t,data:n,groupby:f,...u||a.length>0?{aggregate:{...u?{cross:u}:{},...a.length?{fields:a,ops:c,as:d}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?ul(i.sort)?[nx(i,i.sort,{expr:"datum"})]:Te(i.sort)?[zh(i,t,{expr:"datum"})]:[Pe(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:s}=i;return[(ul(s)?s.order:!Te(s)&&s)||"ascending"]}return[]}assembleLabelTitle(){var s;const{facet:t,config:n}=this;if(t.facet)return X2(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const a of SC)if(t[a]){const c=qh("labelOrient",(s=t[a])==null?void 0:s.header,n,a);if(i[a].includes(c))return X2(t[a],a,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=CPe(n),s=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),c=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...c?{style:c}:{},from:{facet:this.assembleFacet()},sort:{field:gr.map(f=>this.facetSortFields(f)).flat(),order:gr.map(f=>this.facetSortOrder(f)).flat()},...i.length>0?{data:i}:{},...s?{encode:{update:s}}:{},...t.assembleGroup(tCe(this,[]))}]}getMapping(){return this.facet}}function VPe(e,t){const{row:n,column:i}=t;if(n&&i){let s=null;for(const a of[n,i])if(ul(a.sort)){const{field:c,op:d=TS}=a.sort;e=s=new Xf(e,{joinaggregate:[{op:d,field:c,as:nx(a,a.sort,{forAs:!0})}],groupby:[Pe(a)]})}return s}return null}function kee(e,t){var n,i,s,a;for(const c of t){const d=c.data;if(e.name&&c.hasName()&&e.name!==c.dataName)continue;const f=(n=e.format)==null?void 0:n.mesh,u=(i=d.format)==null?void 0:i.feature;if(f&&u)continue;const r=(s=e.format)==null?void 0:s.feature;if((r||u)&&r!==u)continue;const h=(a=d.format)==null?void 0:a.mesh;if(!((f||h)&&f!==h)){if(Wg(e)&&Wg(d)){if(Ys(e.values,d.values))return c}else if(Uh(e)&&Uh(d)){if(e.url===d.url)return c}else if(gZ(e)&&e.name===c.dataName)return c}}return null}function GPe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Bf({values:[]});return t.push(i),i}const n=kee(e.data,t);if(n)return hc(e.data)||(n.data.format=uJ({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Bf(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function HPe(e,t,n){let i=0;for(const s of t.transforms){let a,c;if(RRe(s))c=e=new $h(e,s),a="derived";else if(gC(s)){const d=LLe(s);c=e=Ai.makeWithAncestors(e,{},d,n)??e,e=new B_(e,t,s.filter)}else if(uZ(s))c=e=Qa.makeFromTransform(e,s,t),a="number";else if(LRe(s))a="date",n.getWithExplicit(s.field).value===void 0&&(e=new Ai(e,{[s.field]:a}),n.set(s.field,a,!1)),c=e=Ja.makeFromTransform(e,s);else if(PRe(s))c=e=ta.makeFromTransform(e,s),a="number",EC(t)&&(e=new Cc(e));else if(fZ(s))c=e=Xg.make(e,t,s,i++),a="derived";else if(ARe(s))c=e=new F_(e,s),a="number";else if(ORe(s))c=e=new Xf(e,s),a="number";else if(DRe(s))c=e=_l.makeFromTransform(e,s),a="derived";else if(URe(s))c=e=new $S(e,s),a="derived";else if(jRe(s))c=e=new US(e,s),a="derived";else if(NRe(s))c=e=new jS(e,s),a="derived";else if(BRe(s))c=e=new GS(e,s),a="derived";else if(MRe(s))e=new HS(e,s);else if(CRe(s))c=e=ef.makeFromTransform(e,s),a="derived";else if(IRe(s))c=e=new DS(e,s),a="derived";else if(FRe(s))c=e=new qS(e,s),a="derived";else if(kRe(s))c=e=new VS(e,s),a="derived";else if(xRe(s))c=e=new zS(e,s),a="derived";else{xe(sAe(s));continue}if(c&&a!==void 0)for(const d of c.producedFields()??[])n.set(d,a,!1)}return e}function WS(e){var m;let t=GPe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,s=e.data,c=!(s&&(hc(s)||Uh(s)||Wg(s)))&&e.parent?e.parent.component.data.ancestorParse.clone():new QRe;hc(s)?(mZ(s)?t=new nw(t,s.sequence):mC(s)&&(t=new tw(t,s.graticule)),c.parseNothing=!0):((m=s==null?void 0:s.format)==null?void 0:m.parse)===null&&(c.parseNothing=!0),t=Ai.makeExplicit(t,e,c)??t,t=new Cc(t);const d=e.parent&&k_(e.parent);(Bn(e)||Js(e))&&d&&(t=Qa.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=HPe(t,e,c));const f=DLe(e),u=PLe(e);t=Ai.makeWithAncestors(t,{},{...f,...u},c)??t,Bn(e)&&(t=eh.parseAll(t,e),t=Yg.parseAll(t,e)),(Bn(e)||Js(e))&&(d||(t=Qa.makeFromEncoding(t,e)??t),t=Ja.makeFromEncoding(t,e)??t,t=$h.parseAllForSortIndex(t,e));const r=t=n0(On.Raw,e,t);if(Bn(e)){const E=ta.makeFromEncoding(t,e);E&&(t=E,EC(e)&&(t=new Cc(t))),t=ef.makeFromEncoding(t,e)??t,t=_l.makeFromEncoding(t,e)??t}let h,p;if(Bn(e)){const{markDef:E,mark:B,config:I}=e,k=an("invalid",E,I),{marks:F,scales:x}=p=bZ({invalid:k,isPath:Zc(B)});F!==x&&x==="include-invalid-values"&&(h=t=n0(On.PreFilterInvalid,e,t)),F==="exclude-invalid-values"&&(t=Vh.make(t,e,p)??t)}const _=t=n0(On.Main,e,t);let l;if(Bn(e)&&p){const{marks:E,scales:B}=p;E==="include-invalid-values"&&B==="exclude-invalid-values"&&(t=Vh.make(t,e,p)??t,l=t=n0(On.PostFilterInvalid,e,t))}Bn(e)&&NCe(e,_);let b=null;if(Js(e)){const E=e.getName("facet");t=VPe(t,e.facet)??t,b=new I_(t,e,E,_.getSource()),n[E]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:r,main:_,facetRoot:b,ancestorParse:c,preFilterInvalid:h,postFilterInvalid:l}}function n0(e,t,n){const{outputNodes:i,outputNodeRefCounts:s}=t.component.data,a=t.getDataName(e),c=new Ts(n,a,e,s);return i[a]=c,c}class WPe extends RC{constructor(t,n,i,s){var a,c,d,f;super(t,"concat",n,i,s,t.resolve),(((c=(a=t.resolve)==null?void 0:a.axis)==null?void 0:c.x)==="shared"||((f=(d=t.resolve)==null?void 0:d.axis)==null?void 0:f.y)==="shared")&&xe(tAe),this.children=this.getChildren(t).map((u,r)=>jC(u,this,this.getName(`concat_${r}`),void 0,s))}parseData(){this.component.data=WS(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Be(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return kS(t)?t.vconcat:pC(t)?t.hconcat:t.concat}parseLayoutSize(){$Pe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=IC(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),s=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...s?{encode:{update:s}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function YPe(e){return e===!1||e===null}const XPe={disable:1,gridScale:1,scale:1,...CQ,labelExpr:1,encode:1},xee=Be(XPe);class LC extends Rl{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new LC(bt(this.explicit),bt(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!YPe(this.get(t))}hasOrientSignalRef(){return Ye(this.explicit.orient)}}function KPe(e,t,n){const{encoding:i,config:s}=e,a=Zn(i[t])??Zn(i[So(t)]),c=e.axis(t)||{},{format:d,formatType:f}=c;if(vf(f))return{text:Qr({fieldOrDatumDef:a,field:"datum.value",format:d,formatType:f,config:s}),...n};if(d===void 0&&f===void 0&&s.customFormatTypes){if(Lh(a)==="quantitative"){if(Ph(a)&&a.stack==="normalize"&&s.normalizedNumberFormatType)return{text:Qr({fieldOrDatumDef:a,field:"datum.value",format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,config:s}),...n};if(s.numberFormatType)return{text:Qr({fieldOrDatumDef:a,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}),...n}}if(Lh(a)==="temporal"&&s.timeFormatType&&Oe(a)&&!a.timeUnit)return{text:Qr({fieldOrDatumDef:a,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s}),...n}}return n}function JPe(e){return Ol.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[sDe(n,e)]),t),{})}const QPe={bottom:"top",top:"bottom",left:"right",right:"left"};function ZPe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const s of e.children){s.parseAxesAndHeaders();for(const a of Be(s.component.axes))n.axis[a]=FC(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=eDe(t[a],s.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const s of Ol){for(const a of e.children)if(a.component.axes[s]){if(n.axis[s]==="independent"){t[s]=(t[s]??[]).concat(a.component.axes[s]);for(const c of a.component.axes[s]){const{value:d,explicit:f}=c.getWithExplicit("orient");if(!Ye(d)){if(i[d]>0&&!f){const u=QPe[d];i[d]>i[u]&&c.set("orient",u,!1)}i[d]++}}}delete a.component.axes[s]}if(n.axis[s]==="independent"&&t[s]&&t[s].length>1)for(const[a,c]of(t[s]||[]).entries())a>0&&c.get("grid")&&!c.explicit.grid&&(c.implicit.grid=!1)}}function eDe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const s=e[i],a=t[i];if(!!s!=!!a)return;if(s&&a){const c=s.getWithExplicit("orient"),d=a.getWithExplicit("orient");if(c.explicit&&d.explicit&&c.value!==d.value)return;e[i]=tDe(s,a)}}}else return t.map(n=>n.clone());return e}function tDe(e,t){for(const n of xee){const i=Nc(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(s,a)=>{switch(n){case"title":return UJ(s,a);case"gridScale":return{explicit:s.explicit,value:zn(s.value,a.value)}}return MS(s,a,n,"axis")});e.setWithExplicit(n,i)}return e}function nDe(e,t,n,i,s){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ye(n.labelAngle)?n.labelAngle:Gg(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===YZ(i,s))return!0}return e===n[t]}const iDe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function sDe(e,t){var E,B;let n=t.axis(e);const i=new LC,s=Zn(t.encoding[e]),{mark:a,config:c}=t,d=(n==null?void 0:n.orient)||((E=c[e==="x"?"axisX":"axisY"])==null?void 0:E.orient)||((B=c.axis)==null?void 0:B.orient)||qCe(e),f=t.getScaleComponent(e).get("type"),u=LCe(e,f,d,t.config),r=n!==void 0?!n:W2("disable",c.style,n==null?void 0:n.style,u).configValue;if(i.set("disable",r,n!==void 0),r)return i;n=n||{};const h=jCe(s,n,e,c.style,u),p=TQ(n.formatType,s,f),_=bQ(s,s.type,n.format,n.formatType,c,!0),l={fieldOrDatumDef:s,axis:n,channel:e,model:t,scaleType:f,orient:d,labelAngle:h,format:_,formatType:p,mark:a,config:c};for(const I of xee){const k=I in t8?t8[I](l):F$(I)?n[I]:void 0,F=k!==void 0,x=nDe(k,I,n,t,e);if(F&&x)i.set(I,k,x);else{const{configValue:M=void 0,configFrom:R=void 0}=F$(I)&&I!=="values"?W2(I,c.style,n.style,u):{},P=M!==void 0;F&&!P?i.set(I,k,x):(R!=="vgAxisConfig"||iDe.has(I)&&P||Zm(M)||Ye(M))&&i.set(I,M,!1)}}const b=n.encoding??{},m=RQ.reduce((I,k)=>{if(!i.hasAxisPart(k))return I;const F=eee(b[k]??{},t),x=k==="labels"?KPe(t,e,F):F;return x!==void 0&&!ln(x)&&(I[k]={update:x}),I},{});return ln(m)||i.set("encode",m,!!n.encoding||n.labelAngle!==void 0),i}function rDe({encoding:e,size:t}){for(const n of Ol){const i=xs(n);uo(t[i])&&ac(e[n])&&(delete t[i],xe(VJ(i)))}return t}const aDe={vgMark:"arc",encodeEntry:e=>({...Or(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...es("x",e,{defaultPos:"mid"}),...es("y",e,{defaultPos:"mid"}),...Tl(e,"radius"),...Tl(e,"theta")})},oDe={vgMark:"area",encodeEntry:e=>({...Or(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...g1("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...g1("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...vC(e)})},lDe={vgMark:"rect",encodeEntry:e=>({...Or(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Tl(e,"x"),...Tl(e,"y")})},cDe={vgMark:"shape",encodeEntry:e=>({...Or(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Oe(n)&&n.type===E_?{field:Pe(n,{expr:"datum"})}:{}}]}},dDe={vgMark:"image",encodeEntry:e=>({...Or(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Tl(e,"x"),...Tl(e,"y"),...bC(e,"url")})},fDe={vgMark:"line",encodeEntry:e=>({...Or(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...es("x",e,{defaultPos:"mid"}),...es("y",e,{defaultPos:"mid"}),...yi("size",e,{vgChannel:"strokeWidth"}),...vC(e)})},uDe={vgMark:"trail",encodeEntry:e=>({...Or(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...es("x",e,{defaultPos:"mid"}),...es("y",e,{defaultPos:"mid"}),...yi("size",e),...vC(e)})};function PC(e,t){const{config:n}=e;return{...Or(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...es("x",e,{defaultPos:"mid"}),...es("y",e,{defaultPos:"mid"}),...yi("size",e),...yi("angle",e),...hDe(e,n,t)}}function hDe(e,t,n){return n?{shape:{value:n}}:yi("shape",e)}const _De={vgMark:"symbol",encodeEntry:e=>PC(e)},pDe={vgMark:"symbol",encodeEntry:e=>PC(e,"circle")},yDe={vgMark:"symbol",encodeEntry:e=>PC(e,"square")},gDe={vgMark:"rect",encodeEntry:e=>({...Or(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Tl(e,"x"),...Tl(e,"y")})},mDe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Or(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...g1("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...g1("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...yi("size",e,{vgChannel:"strokeWidth"})}}},wDe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Or(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...es("x",e,{defaultPos:"mid"}),...es("y",e,{defaultPos:"mid"}),...bC(e),...yi("size",e,{vgChannel:"fontSize"}),...yi("angle",e),...J$("align",bDe(e.markDef,n,t)),...J$("baseline",TDe(e.markDef,n,t)),...es("radius",e,{defaultPos:null}),...es("theta",e,{defaultPos:null})}}};function bDe(e,t,n){if(an("align",e,n)===void 0)return"center"}function TDe(e,t,n){if(an("baseline",e,n)===void 0)return"middle"}const vDe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,s=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",c=i==="horizontal"?"height":"width";return{...Or(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Tl(e,s),...es(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[c]:mn(an("thickness",n,t))}}},i0={arc:aDe,area:oDe,bar:lDe,circle:pDe,geoshape:cDe,image:dDe,line:fDe,point:_De,rect:gDe,rule:mDe,square:yDe,text:wDe,tick:vDe,trail:uDe};function EDe(e){if(Ot([wS,gS,AOe],e.mark)){const t=$Q(e.mark,e.encoding);if(t.length>0)return SDe(e,t)}else if(e.mark===mS){const t=N2.some(n=>an(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return BDe(e)}return DC(e)}const g8="faceted_path_";function SDe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:g8+e.requestDataName(On.Main),data:e.requestDataName(On.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:DC(e,{fromPrefix:g8})}]}const m8="stack_group_";function BDe(e){var u;const[t]=DC(e,{fromPrefix:m8}),n=e.scaleName(e.stack.fieldChannel),i=(r={})=>e.vgField(e.stack.fieldChannel,r),s=(r,h)=>{const p=[i({prefix:"min",suffix:"start",expr:h}),i({prefix:"max",suffix:"start",expr:h}),i({prefix:"min",suffix:"end",expr:h}),i({prefix:"max",suffix:"end",expr:h})];return`${r}(${p.map(_=>`scale('${n}',${_})`).join(",")})`};let a,c;e.stack.fieldChannel==="x"?(a={...xh(t.encode.update,["y","yc","y2","height",...N2]),x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}},c={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...bs(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...xh(t.encode.update,["x","xc","x2","width"]),y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}},c={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...bs(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const r of N2){const h=co(r,e.markDef,e.config);t.encode.update[r]?(a[r]=t.encode.update[r],delete t.encode.update[r]):h&&(a[r]=mn(h)),h&&(t.encode.update[r]={value:0})}const d=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const r of e.stack.groupbyChannels){const h=e.fieldDef(r),p=Pe(h);p&&d.push(p),(h!=null&&h.bin||h!=null&&h.timeUnit)&&d.push(Pe(h,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((r,h)=>{if(t.encode.update[h])return{...r,[h]:t.encode.update[h]};{const p=co(h,e.markDef,e.config);return p!==void 0?{...r,[h]:mn(p)}:r}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(On.Main),name:m8+e.requestDataName(On.Main),groupby:d,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:c},marks:[t]}]}]}function IDe(e){const{encoding:t,stack:n,mark:i,markDef:s,config:a}=e,c=t.order;if(!(!Te(c)&&oa(c)&&A2(c.value)||!c&&A2(an("order",s,a)))){if((Te(c)||Oe(c))&&!n)return LJ(c,{expr:"datum"});if(Zc(i)){const d=s.orient==="horizontal"?"y":"x",f=t[d];if(Oe(f))return{field:d}}}}function DC(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:s,config:a}=e,c=zn(i.clip,FDe(e),kDe(e)),d=RJ(i),f=s.key,u=IDe(e),r=xDe(e),h=an("aria",i,a),p=i0[n].postEncodingTransform?i0[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:i0[n].vgMark,...c?{clip:c}:{},...d?{style:d}:{},...f?{key:f.field}:{},...u?{sort:u}:{},...r||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(On.Main)},encode:{update:i0[n].encodeEntry(e)},...p?{transform:p}:{}}]}function FDe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function kDe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function xDe(e){if(!e.component.selection)return null;const t=Be(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=Be(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Mee extends Bee{constructor(t,n,i,s={},a){super(t,"unit",n,i,a,void 0,x$(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const c=fo(t.mark)?{...t.mark}:{type:t.mark},d=c.type;c.filled===void 0&&(c.filled=_Re(c,a,{graticule:t.data&&mC(t.data)}));const f=this.encoding=mNe(t.encoding||{},d,c.filled,a);this.markDef=lZ(c,f,a),this.size=rDe({encoding:f,size:x$(t)?{...s,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:s}),this.stack=oZ(this.markDef,f),this.specifiedScales=this.initScales(d,f),this.specifiedAxes=this.initAxes(f),this.specifiedLegends=this.initLegends(f),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>hC(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===hQ,i=t&&_Me.some(s=>vt(t[s]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return AR.reduce((i,s)=>{const a=Zn(n[s]);return a&&(i[s]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,s=_i(t);return Te(n)&&(s.domain=n.map(Gs)),Te(i)&&(s.range=i.map(Gs)),s}initAxes(t){return Ol.reduce((n,i)=>{const s=t[i];if(vt(s)||i===vn&&vt(t.x2)||i===ui&&vt(t.y2)){const a=vt(s)?s.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=Be(t),i={};for(const s of n){const a=t[s];i[s]=Zm(a)?NJ(a):Gs(a)}return i}initLegends(t){return SMe.reduce((n,i)=>{const s=Zn(t[i]);if(s&&IMe(i)){const a=s.legend;n[i]=a&&_i(a)}return n},{})}parseData(){this.component.data=WS(this)}parseLayoutSize(){zPe(this)}parseSelections(){this.component.selection=OCe(this,this.selection)}parseMarkGroup(){this.component.mark=EDe(this)}parseAxesAndHeaders(){this.component.axes=JPe(this)}assembleSelectionTopLevelSignals(t){return nCe(this,t)}assembleSignals(){return[...GZ(this),...eCe(this,[])]}assembleSelectionData(t){return iCe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return IC(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!k_(this.parent))&&(t=vZ(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Qd(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return la(n)}typedFieldDef(t){const n=this.fieldDef(t);return as(n)?n:null}}class UC extends RC{constructor(t,n,i,s,a){super(t,"layer",n,i,a,t.resolve,t.view);const c={...s,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((d,f)=>{if(xS(d))return new UC(d,this,this.getName(`layer_${f}`),c,a);if(Nl(d))return new Mee(d,this,this.getName(`layer_${f}`),c,a);throw new Error(NR(d))})}parseData(){this.component.data=WS(this);for(const t of this.children)t.parseData()}parseLayoutSize(){jPe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Be(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){ZPe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),GZ(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),IC(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const s of $e(i.assembleGroupStyle()))t.add(s);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return sCe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),lee(this))}}function jC(e,t,n,i,s){if(vS(e))return new fg(e,t,n,s);if(xS(e))return new UC(e,t,n,i,s);if(Nl(e))return new Mee(e,t,n,i,s);if(zNe(e))return new WPe(e,t,n,s);throw new Error(NR(e))}function MDe(e,t={}){t.logger&&GAe(t.logger),t.fieldTitle&&AQ(t.fieldTitle);try{const n=aZ(f_(t.config,e.config)),i=pZ(e,n),s=jC(i,null,"",void 0,n);return s.parse(),ePe(s.component.data,s),{spec:ODe(s,ADe(e,i.autosize,n,s),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&HAe(),t.fieldTitle&&cNe()}}function ADe(e,t,n,i){const s=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):ze(t)&&(t={type:t}),s&&a&&XRe(t.type)){if(s==="step"&&a==="step")xe(h$()),t.type="pad";else if(s==="step"||a==="step"){const c=s==="step"?"width":"height";xe(h$(fS(c)));const d=c==="width"?"height":"width";t.type=KRe(d)}}return{...Be(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...$$(n,!1),...$$(e,!0)}}function ODe(e,t,n={},i){const s=e.config?nRe(e.config):void 0,a=[].concat(e.assembleSelectionData([]),LPe(e.component.data,n)),c=e.assembleProjections(),d=e.assembleTitle(),f=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let r=e.assembleLayoutSignals();r=r.filter(_=>(_.name==="width"||_.name==="height")&&_.value!==void 0?(t[_.name]=+_.value,!1):!0);const{params:h,...p}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...p,...d?{title:d}:{},...f?{style:f}:{},...u?{encode:{update:u}}:{},data:a,...c.length>0?{projections:c}:{},...e.assembleGroup([...r,...e.assembleSelectionTopLevelSignals([]),...nZ(h)]),...s?{config:s}:{},...i?{usermeta:i}:{}}}const NDe=lMe.version,RDe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Ah,accessPathWithDatum:ER,compile:MDe,contains:Ot,deepEqual:Ys,deleteNestedProperty:o1,duplicate:bt,entries:Mc,every:bR,fieldIntersection:vR,flatAccessWithDatum:_J,getFirstDefined:zn,hasIntersection:TR,hasProperty:Fe,hash:Nt,internalField:gJ,isBoolean:Vg,isEmpty:ln,isEqual:dMe,isInternalField:mJ,isNullOrFalse:A2,isNumeric:rS,keys:Be,logicalExpr:cg,mergeDeep:uJ,never:fJ,normalize:pZ,normalizeAngle:Gg,omit:bs,pick:xh,prefixGenerator:O2,removePathFromField:T_,replaceAll:gf,replacePathInField:kr,resetIdCounter:uMe,setEqual:hJ,some:Mh,stringify:cn,titleCase:zm,unique:Ga,uniqueId:yJ,vals:bi,varName:Tn,version:NDe},Symbol.toStringTag,{value:"Module"}));function Aee(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var CDe="vega-themes",LDe="2.15.0",PDe="Themes for stylized Vega and Vega-Lite visualizations.",DDe=["vega","vega-lite","themes","style"],UDe="BSD-3-Clause",jDe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},$De=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],zDe="build/vega-themes.js",$C="build/vega-themes.module.js",qDe="build/vega-themes.min.js",VDe="build/vega-themes.min.js",GDe="build/vega-themes.module.d.ts",HDe={type:"git",url:"https://github.com/vega/vega-themes.git"},WDe=["src","build"],YDe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},XDe={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},KDe={vega:"*","vega-lite":"*"},JDe={},QDe={name:CDe,version:LDe,description:PDe,keywords:DDe,license:UDe,author:jDe,contributors:$De,main:zDe,module:$C,unpkg:qDe,jsdelivr:VDe,types:GDe,repository:HDe,files:WDe,scripts:YDe,devDependencies:XDe,peerDependencies:KDe,dependencies:JDe};const cu="#fff",w8="#888",ZDe={background:"#333",view:{stroke:w8},title:{color:cu,subtitleColor:cu},style:{"guide-label":{fill:cu},"guide-title":{fill:cu}},axis:{domainColor:cu,gridColor:w8,tickColor:cu}},wd="#4572a7",e3e={background:"#fff",arc:{fill:wd},area:{fill:wd},line:{stroke:wd,strokeWidth:2},path:{stroke:wd},rect:{fill:wd},shape:{stroke:wd},symbol:{fill:wd,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},bd="#30a2da",rF="#cbcbcb",t3e="#999",n3e="#333",b8="#f0f0f0",T8="#333",i3e={arc:{fill:bd},area:{fill:bd},axis:{domainColor:rF,grid:!0,gridColor:rF,gridWidth:1,labelColor:t3e,labelFontSize:10,titleColor:n3e,tickColor:rF,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:b8,group:{fill:b8},legend:{labelColor:T8,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:T8,titleFontSize:14,titlePadding:10},line:{stroke:bd,strokeWidth:2},path:{stroke:bd,strokeWidth:.5},rect:{fill:bd},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:bd},bar:{binSpacing:2,fill:bd,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Td="#000",s3e={group:{fill:"#e5e5e5"},arc:{fill:Td},area:{fill:Td},line:{stroke:Td},path:{stroke:Td},rect:{fill:Td},shape:{stroke:Td},symbol:{fill:Td,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},r3e=22,a3e="normal",v8="Benton Gothic, sans-serif",E8=11.5,o3e="normal",vd="#82c6df",aF="Benton Gothic Bold, sans-serif",S8="normal",B8=13,oy={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},l3e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:aF,fontSize:r3e,fontWeight:a3e},arc:{fill:vd},area:{fill:vd},line:{stroke:vd,strokeWidth:2},path:{stroke:vd},rect:{fill:vd},shape:{stroke:vd},symbol:{fill:vd,size:30},axis:{labelFont:v8,labelFontSize:E8,labelFontWeight:o3e,titleFont:aF,titleFontSize:B8,titleFontWeight:S8},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:v8,labelFontSize:E8,symbolType:"square",titleFont:aF,titleFontSize:B8,titleFontWeight:S8},range:{category:oy["category-6"],diverging:oy["fireandice-6"],heatmap:oy["fire-7"],ordinal:oy["fire-7"],ramp:oy["fire-7"]}},Ed="#ab5787",s0="#979797",c3e={background:"#f9f9f9",arc:{fill:Ed},area:{fill:Ed},line:{stroke:Ed},path:{stroke:Ed},rect:{fill:Ed},shape:{stroke:Ed},symbol:{fill:Ed,size:30},axis:{domainColor:s0,domainWidth:.5,gridWidth:.2,labelColor:s0,tickColor:s0,tickWidth:.2,titleColor:s0},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Sd="#3e5c69",d3e={background:"#fff",arc:{fill:Sd},area:{fill:Sd},line:{stroke:Sd},path:{stroke:Sd},rect:{fill:Sd},shape:{stroke:Sd},symbol:{fill:Sd},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},rr="#1696d2",I8="#000000",f3e="#FFFFFF",r0="Lato",oF="Lato",u3e="Lato",h3e="#DEDDDD",_3e=18,ly={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},p3e={background:f3e,title:{anchor:"start",fontSize:_3e,font:r0},axisX:{domain:!0,domainColor:I8,domainWidth:1,grid:!1,labelFontSize:12,labelFont:oF,labelAngle:0,tickColor:I8,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:r0},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:h3e,gridWidth:1,labelFontSize:12,labelFont:oF,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:r0,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:oF,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:r0,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:ly["six-groups-cat-1"],diverging:ly["diverging-colors"],heatmap:ly["diverging-colors"],ordinal:ly["six-groups-seq"],ramp:ly["shades-blue"]},area:{fill:rr},rect:{fill:rr},line:{color:rr,stroke:rr,strokeWidth:5},trail:{color:rr,stroke:rr,strokeWidth:0,size:1},path:{stroke:rr,strokeWidth:.5},point:{filled:!0},text:{font:u3e,color:rr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:rr,stroke:null}},arc:{fill:rr},shape:{stroke:rr},symbol:{fill:rr,size:30}},Bd="#3366CC",F8="#ccc",a0="Arial, sans-serif",y3e={arc:{fill:Bd},area:{fill:Bd},path:{stroke:Bd},rect:{fill:Bd},shape:{stroke:Bd},symbol:{stroke:Bd},circle:{fill:Bd},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:a0,fontSize:12},"guide-title":{font:a0,fontSize:12},"group-title":{font:a0,fontSize:12}},title:{font:a0,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:F8,tickColor:F8,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},zC=e=>e*(1/3+1),k8=zC(9),x8=zC(10),M8=zC(12),cy="Segoe UI",A8="wf_standard-font, helvetica, arial, sans-serif",O8="#252423",dy="#605E5C",N8="transparent",g3e="#C8C6C4",jr="#118DFF",m3e="#12239E",w3e="#E66C37",b3e="#6B007B",T3e="#E044A7",v3e="#744EC2",E3e="#D9B300",S3e="#D64550",Oee=jr,Nee="#DEEFFF",R8=[Nee,Oee],B3e=[Nee,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Oee],I3e={view:{stroke:N8},background:N8,font:cy,header:{titleFont:A8,titleFontSize:M8,titleColor:O8,labelFont:cy,labelFontSize:x8,labelColor:dy},axis:{ticks:!1,grid:!1,domain:!1,labelColor:dy,labelFontSize:k8,titleFont:A8,titleColor:O8,titleFontSize:M8,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:g3e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:jr},line:{stroke:jr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:cy,fontSize:k8,fill:dy},arc:{fill:jr},area:{fill:jr,line:!0,opacity:.6},path:{stroke:jr},rect:{fill:jr},point:{fill:jr,filled:!0,size:75},shape:{stroke:jr},symbol:{fill:jr,strokeWidth:1.5,size:50},legend:{titleFont:cy,titleFontWeight:"bold",titleColor:dy,labelFont:cy,labelFontSize:x8,labelColor:dy,symbolType:"circle",symbolSize:75},range:{category:[jr,m3e,w3e,b3e,T3e,v3e,E3e,S3e],diverging:R8,heatmap:R8,ordinal:B3e}},lF='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',F3e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',cF=400,o0={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},k3e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],x3e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function YS({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=o0.gridBg[e],s=o0.textPrimary[e],a=o0.textSecondary[e],c=n==="dark"?k3e:x3e,d=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:d},area:{fill:d},path:{stroke:d},rect:{fill:d},shape:{stroke:d},symbol:{stroke:d},circle:{fill:d},view:{fill:i,stroke:i},group:{fill:i},title:{color:s,anchor:"start",dy:-15,fontSize:16,font:lF,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:F3e,labelFontWeight:cF,titleColor:s,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:o0.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:lF,fill:a,fontWeight:cF},"guide-title":{font:lF,fill:a,fontWeight:cF}},range:{category:c,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const M3e=YS({theme:"white",background:"#ffffff"}),A3e=YS({theme:"g10",background:"#f4f4f4"}),O3e=YS({theme:"g90",background:"#262626"}),N3e=YS({theme:"g100",background:"#161616"}),R3e=QDe.version,C3e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:A3e,carbong100:N3e,carbong90:O3e,carbonwhite:M3e,dark:ZDe,excel:e3e,fivethirtyeight:i3e,ggplot2:s3e,googlecharts:y3e,latimes:l3e,powerbi:I3e,quartz:c3e,urbaninstitute:p3e,version:R3e,vox:d3e},Symbol.toStringTag,{value:"Module"}));function L3e(e,t,n,i){if(Te(e))return`[${e.map(s=>t(ze(s)?s:C8(s,n))).join(", ")}]`;if(je(e)){let s="";const{title:a,image:c,...d}=e;a&&(s+=`<h2>${t(a)}</h2>`),c&&(s+=`<img src="${new URL(t(c),i||location.href).href}">`);const f=Object.keys(d);if(f.length>0){s+="<table>";for(const u of f){let r=d[u];r!==void 0&&(je(r)&&(r=C8(r,n)),s+=`<tr><td class="key">${t(u)}</td><td class="value">${t(r)}</td></tr>`)}s+="</table>"}return s||"{}"}return t(e)}function P3e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const s=t.indexOf(this)+1;return t.length=s,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function C8(e,t){return JSON.stringify(e,P3e(t))}var D3e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Ree="vg-tooltip-element",U3e={offsetX:10,offsetY:10,id:Ree,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:j3e,maxDepth:2,formatTooltip:L3e,baseURL:""};function j3e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function $3e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return D3e.toString().replace(Ree,e)}function z3e(e,t,n,i){let s=e.clientX+n;s+t.width>window.innerWidth&&(s=+e.clientX-n-t.width);let a=e.clientY+i;return a+t.height>window.innerHeight&&(a=+e.clientY-i-t.height),{x:s,y:a}}class q3e{constructor(t){this.options={...U3e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=$3e(n);const s=document.head;s.childNodes.length>0?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)}}tooltipHandler(t,n,i,s){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),s==null||s===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(s,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:c}=z3e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${c}px`,this.el.style.left=`${a}px`}}var dF={};function V3e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class G3e{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(t,n)}return this}}var H3e=G3e;const W3e=Object.freeze({loose:!0}),Y3e=Object.freeze({}),X3e=e=>e?typeof e!="object"?W3e:e:Y3e;var qC=X3e,ix={exports:{}};const K3e="2.0.0",Cee=256,J3e=Number.MAX_SAFE_INTEGER||9007199254740991,Q3e=16,Z3e=Cee-6,e6e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var VC={MAX_LENGTH:Cee,MAX_SAFE_COMPONENT_LENGTH:Q3e,MAX_SAFE_BUILD_LENGTH:Z3e,MAX_SAFE_INTEGER:J3e,RELEASE_TYPES:e6e,SEMVER_SPEC_VERSION:K3e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const t6e=typeof process=="object"&&dF&&dF.NODE_DEBUG&&/\bsemver\b/i.test(dF.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var XS=t6e;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:s}=VC,a=XS;t=e.exports={};const c=t.re=[],d=t.safeRe=[],f=t.src=[],u=t.t={};let r=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",s],[h,i]],_=b=>{for(const[m,E]of p)b=b.split(`${m}*`).join(`${m}{0,${E}}`).split(`${m}+`).join(`${m}{1,${E}}`);return b},l=(b,m,E)=>{const B=_(m),I=r++;a(b,I,m),u[b]=I,f[I]=m,c[I]=new RegExp(m,E?"g":void 0),d[I]=new RegExp(B,E?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","\\d+"),l("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),l("MAINVERSION",`(${f[u.NUMERICIDENTIFIER]})\\.(${f[u.NUMERICIDENTIFIER]})\\.(${f[u.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${f[u.NUMERICIDENTIFIERLOOSE]})\\.(${f[u.NUMERICIDENTIFIERLOOSE]})\\.(${f[u.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${f[u.NUMERICIDENTIFIER]}|${f[u.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${f[u.NUMERICIDENTIFIERLOOSE]}|${f[u.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${f[u.PRERELEASEIDENTIFIER]}(?:\\.${f[u.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${f[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${f[u.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER",`${h}+`),l("BUILD",`(?:\\+(${f[u.BUILDIDENTIFIER]}(?:\\.${f[u.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${f[u.MAINVERSION]}${f[u.PRERELEASE]}?${f[u.BUILD]}?`),l("FULL",`^${f[u.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${f[u.MAINVERSIONLOOSE]}${f[u.PRERELEASELOOSE]}?${f[u.BUILD]}?`),l("LOOSE",`^${f[u.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${f[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${f[u.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${f[u.XRANGEIDENTIFIER]})(?:\\.(${f[u.XRANGEIDENTIFIER]})(?:\\.(${f[u.XRANGEIDENTIFIER]})(?:${f[u.PRERELEASE]})?${f[u.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${f[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[u.XRANGEIDENTIFIERLOOSE]})(?:${f[u.PRERELEASELOOSE]})?${f[u.BUILD]}?)?)?`),l("XRANGE",`^${f[u.GTLT]}\\s*${f[u.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${f[u.GTLT]}\\s*${f[u.XRANGEPLAINLOOSE]}$`),l("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),l("COERCE",`${f[u.COERCEPLAIN]}(?:$|[^\\d])`),l("COERCEFULL",f[u.COERCEPLAIN]+`(?:${f[u.PRERELEASE]})?(?:${f[u.BUILD]})?(?:$|[^\\d])`),l("COERCERTL",f[u.COERCE],!0),l("COERCERTLFULL",f[u.COERCEFULL],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${f[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${f[u.LONETILDE]}${f[u.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${f[u.LONETILDE]}${f[u.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${f[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${f[u.LONECARET]}${f[u.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${f[u.LONECARET]}${f[u.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${f[u.GTLT]}\\s*(${f[u.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${f[u.GTLT]}\\s*(${f[u.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${f[u.GTLT]}\\s*(${f[u.LOOSEPLAIN]}|${f[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${f[u.XRANGEPLAIN]})\\s+-\\s+(${f[u.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${f[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${f[u.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ix,ix.exports);var GC=ix.exports;const L8=/^[0-9]+$/,Lee=(e,t)=>{const n=L8.test(e),i=L8.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1},n6e=(e,t)=>Lee(t,e);var i6e={compareIdentifiers:Lee,rcompareIdentifiers:n6e};const l0=XS,{MAX_LENGTH:P8,MAX_SAFE_INTEGER:c0}=VC,{safeRe:D8,t:U8}=GC,s6e=qC,{compareIdentifiers:du}=i6e;let r6e=class xa{constructor(t,n){if(n=s6e(n),t instanceof xa){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>P8)throw new TypeError(`version is longer than ${P8} characters`);l0("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?D8[U8.LOOSE]:D8[U8.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>c0||this.major<0)throw new TypeError("Invalid major version");if(this.minor>c0||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>c0||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const a=+s;if(a>=0&&a<c0)return a}return s}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(l0("SemVer.compare",this.version,this.options,t),!(t instanceof xa)){if(typeof t=="string"&&t===this.version)return 0;t=new xa(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof xa||(t=new xa(t,this.options)),du(this.major,t.major)||du(this.minor,t.minor)||du(this.patch,t.patch)}comparePre(t){if(t instanceof xa||(t=new xa(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],s=t.prerelease[n];if(l0("prerelease compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return du(i,s)}while(++n)}compareBuild(t){t instanceof xa||(t=new xa(t,this.options));let n=0;do{const i=this.build[n],s=t.build[n];if(l0("build compare",n,i,s),i===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(i===void 0)return-1;if(i===s)continue;return du(i,s)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(n){let a=[n,s];i===!1&&(a=[n]),du(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var HC=r6e;const j8=HC,a6e=(e,t,n)=>new j8(e,n).compare(new j8(t,n));var x_=a6e;const o6e=x_,l6e=(e,t,n)=>o6e(e,t,n)===0;var c6e=l6e;const d6e=x_,f6e=(e,t,n)=>d6e(e,t,n)!==0;var u6e=f6e;const h6e=x_,_6e=(e,t,n)=>h6e(e,t,n)>0;var p6e=_6e;const y6e=x_,g6e=(e,t,n)=>y6e(e,t,n)>=0;var m6e=g6e;const w6e=x_,b6e=(e,t,n)=>w6e(e,t,n)<0;var T6e=b6e;const v6e=x_,E6e=(e,t,n)=>v6e(e,t,n)<=0;var S6e=E6e;const B6e=c6e,I6e=u6e,F6e=p6e,k6e=m6e,x6e=T6e,M6e=S6e,A6e=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return B6e(e,n,i);case"!=":return I6e(e,n,i);case">":return F6e(e,n,i);case">=":return k6e(e,n,i);case"<":return x6e(e,n,i);case"<=":return M6e(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var O6e=A6e,fF,$8;function N6e(){if($8)return fF;$8=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(r,h){if(h=n(h),r instanceof t){if(r.loose===!!h.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),c("comparator",r,h),this.options=h,this.loose=!!h.loose,this.parse(r),this.semver===e?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(r){const h=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],p=r.match(h);if(!p)throw new TypeError(`Invalid comparator: ${r}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new d(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(r){if(c("Comparator.test",r,this.options.loose),this.semver===e||r===e)return!0;if(typeof r=="string")try{r=new d(r,this.options)}catch{return!1}return a(r,this.operator,this.semver,this.options)}intersects(r,h){if(!(r instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new f(r.value,h).test(this.value):r.operator===""?r.value===""?!0:new f(this.value,h).test(r.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||a(this.semver,"<",r.semver,h)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||a(this.semver,">",r.semver,h)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}}fF=t;const n=qC,{safeRe:i,t:s}=GC,a=O6e,c=XS,d=HC,f=Pee();return fF}var uF,z8;function Pee(){if(z8)return uF;z8=1;class e{constructor(W,H){if(H=i(H),W instanceof e)return W.loose===!!H.loose&&W.includePrerelease===!!H.includePrerelease?W:new e(W.raw,H);if(W instanceof s)return this.raw=W.value,this.set=[[W]],this.format(),this;if(this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease,this.raw=W.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(G=>this.parseRange(G.trim())).filter(G=>G.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const G=this.set[0];if(this.set=this.set.filter(z=>!l(z[0])),this.set.length===0)this.set=[G];else if(this.set.length>1){for(const z of this.set)if(z.length===1&&b(z[0])){this.set=[z];break}}}this.format()}format(){return this.range=this.set.map(W=>W.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(W){const G=((this.options.includePrerelease&&p)|(this.options.loose&&_))+":"+W,z=n.get(G);if(z)return z;const q=this.options.loose,ie=q?d[f.HYPHENRANGELOOSE]:d[f.HYPHENRANGE];W=W.replace(ie,D(this.options.includePrerelease)),a("hyphen replace",W),W=W.replace(d[f.COMPARATORTRIM],u),a("comparator trim",W),W=W.replace(d[f.TILDETRIM],r),a("tilde trim",W),W=W.replace(d[f.CARETTRIM],h),a("caret trim",W);let ce=W.split(" ").map(Me=>E(Me,this.options)).join(" ").split(/\s+/).map(Me=>C(Me,this.options));q&&(ce=ce.filter(Me=>(a("loose invalid filter",Me,this.options),!!Me.match(d[f.COMPARATORLOOSE])))),a("range list",ce);const se=new Map,Ie=ce.map(Me=>new s(Me,this.options));for(const Me of Ie){if(l(Me))return[Me];se.set(Me.value,Me)}se.size>1&&se.has("")&&se.delete("");const he=[...se.values()];return n.set(G,he),he}intersects(W,H){if(!(W instanceof e))throw new TypeError("a Range is required");return this.set.some(G=>m(G,H)&&W.set.some(z=>m(z,H)&&G.every(q=>z.every(ie=>q.intersects(ie,H)))))}test(W){if(!W)return!1;if(typeof W=="string")try{W=new c(W,this.options)}catch{return!1}for(let H=0;H<this.set.length;H++)if(j(this.set[H],W,this.options))return!0;return!1}}uF=e;const t=H3e,n=new t,i=qC,s=N6e(),a=XS,c=HC,{safeRe:d,t:f,comparatorTrimReplace:u,tildeTrimReplace:r,caretTrimReplace:h}=GC,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:_}=VC,l=$=>$.value==="<0.0.0-0",b=$=>$.value==="",m=($,W)=>{let H=!0;const G=$.slice();let z=G.pop();for(;H&&G.length;)H=G.every(q=>z.intersects(q,W)),z=G.pop();return H},E=($,W)=>(a("comp",$,W),$=F($,W),a("caret",$),$=I($,W),a("tildes",$),$=M($,W),a("xrange",$),$=P($,W),a("stars",$),$),B=$=>!$||$.toLowerCase()==="x"||$==="*",I=($,W)=>$.trim().split(/\s+/).map(H=>k(H,W)).join(" "),k=($,W)=>{const H=W.loose?d[f.TILDELOOSE]:d[f.TILDE];return $.replace(H,(G,z,q,ie,ce)=>{a("tilde",$,G,z,q,ie,ce);let se;return B(z)?se="":B(q)?se=`>=${z}.0.0 <${+z+1}.0.0-0`:B(ie)?se=`>=${z}.${q}.0 <${z}.${+q+1}.0-0`:ce?(a("replaceTilde pr",ce),se=`>=${z}.${q}.${ie}-${ce} <${z}.${+q+1}.0-0`):se=`>=${z}.${q}.${ie} <${z}.${+q+1}.0-0`,a("tilde return",se),se})},F=($,W)=>$.trim().split(/\s+/).map(H=>x(H,W)).join(" "),x=($,W)=>{a("caret",$,W);const H=W.loose?d[f.CARETLOOSE]:d[f.CARET],G=W.includePrerelease?"-0":"";return $.replace(H,(z,q,ie,ce,se)=>{a("caret",$,z,q,ie,ce,se);let Ie;return B(q)?Ie="":B(ie)?Ie=`>=${q}.0.0${G} <${+q+1}.0.0-0`:B(ce)?q==="0"?Ie=`>=${q}.${ie}.0${G} <${q}.${+ie+1}.0-0`:Ie=`>=${q}.${ie}.0${G} <${+q+1}.0.0-0`:se?(a("replaceCaret pr",se),q==="0"?ie==="0"?Ie=`>=${q}.${ie}.${ce}-${se} <${q}.${ie}.${+ce+1}-0`:Ie=`>=${q}.${ie}.${ce}-${se} <${q}.${+ie+1}.0-0`:Ie=`>=${q}.${ie}.${ce}-${se} <${+q+1}.0.0-0`):(a("no pr"),q==="0"?ie==="0"?Ie=`>=${q}.${ie}.${ce}${G} <${q}.${ie}.${+ce+1}-0`:Ie=`>=${q}.${ie}.${ce}${G} <${q}.${+ie+1}.0-0`:Ie=`>=${q}.${ie}.${ce} <${+q+1}.0.0-0`),a("caret return",Ie),Ie})},M=($,W)=>(a("replaceXRanges",$,W),$.split(/\s+/).map(H=>R(H,W)).join(" ")),R=($,W)=>{$=$.trim();const H=W.loose?d[f.XRANGELOOSE]:d[f.XRANGE];return $.replace(H,(G,z,q,ie,ce,se)=>{a("xRange",$,G,z,q,ie,ce,se);const Ie=B(q),he=Ie||B(ie),Me=he||B(ce),Ue=Me;return z==="="&&Ue&&(z=""),se=W.includePrerelease?"-0":"",Ie?z===">"||z==="<"?G="<0.0.0-0":G="*":z&&Ue?(he&&(ie=0),ce=0,z===">"?(z=">=",he?(q=+q+1,ie=0,ce=0):(ie=+ie+1,ce=0)):z==="<="&&(z="<",he?q=+q+1:ie=+ie+1),z==="<"&&(se="-0"),G=`${z+q}.${ie}.${ce}${se}`):he?G=`>=${q}.0.0${se} <${+q+1}.0.0-0`:Me&&(G=`>=${q}.${ie}.0${se} <${q}.${+ie+1}.0-0`),a("xRange return",G),G})},P=($,W)=>(a("replaceStars",$,W),$.trim().replace(d[f.STAR],"")),C=($,W)=>(a("replaceGTE0",$,W),$.trim().replace(d[W.includePrerelease?f.GTE0PRE:f.GTE0],"")),D=$=>(W,H,G,z,q,ie,ce,se,Ie,he,Me,Ue)=>(B(G)?H="":B(z)?H=`>=${G}.0.0${$?"-0":""}`:B(q)?H=`>=${G}.${z}.0${$?"-0":""}`:ie?H=`>=${H}`:H=`>=${H}${$?"-0":""}`,B(Ie)?se="":B(he)?se=`<${+Ie+1}.0.0-0`:B(Me)?se=`<${Ie}.${+he+1}.0-0`:Ue?se=`<=${Ie}.${he}.${Me}-${Ue}`:$?se=`<${Ie}.${he}.${+Me+1}-0`:se=`<=${se}`,`${H} ${se}`.trim()),j=($,W,H)=>{for(let G=0;G<$.length;G++)if(!$[G].test(W))return!1;if(W.prerelease.length&&!H.includePrerelease){for(let G=0;G<$.length;G++)if(a($[G].semver),$[G].semver!==s.ANY&&$[G].semver.prerelease.length>0){const z=$[G].semver;if(z.major===W.major&&z.minor===W.minor&&z.patch===W.patch)return!0}return!1}return!0};return uF}const R6e=Pee(),C6e=(e,t,n)=>{try{t=new R6e(t,n)}catch{return!1}return t.test(e)};var L6e=C6e,Dee=V3e(L6e);function P6e(e,t,n){const i=e.open(t),s=1e4,a=250,{origin:c}=new URL(t);let d=~~(s/a);function f(r){r.source===i&&(d=0,e.removeEventListener("message",f,!1))}e.addEventListener("message",f,!1);function u(){d<=0||(i.postMessage(n,c),setTimeout(u,a),d-=1)}setTimeout(u,a)}var D6e=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Uee(e,...t){for(const n of t)U6e(e,n);return e}function U6e(e,t){for(const n of Object.keys(t))u_(e,n,t[n],!0)}const Oa=kxe;let Kg=RDe;const d0=typeof window<"u"?window:void 0;var Y8;Kg===void 0&&((Y8=d0==null?void 0:d0.vl)!=null&&Y8.compile)&&(Kg=d0.vl);const j6e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},$6e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Yy={vega:"Vega","vega-lite":"Vega-Lite"},T1={vega:Oa.version,"vega-lite":Kg?Kg.version:"not available"},z6e={vega:e=>e,"vega-lite":(e,t)=>Kg.compile(e,{config:t}).spec},q6e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,V6e="chart-wrapper";function G6e(e){return typeof e=="function"}function q8(e,t,n,i){const s=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,c=window.open("");c.document.write(s+e+a),c.document.title=`${Yy[i]} JSON Source`}function H6e(e,t){if(e.$schema){const n=Aee(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Yy[n.library]}, but mode argument sets ${Yy[t]??t}.`);const i=n.library;return Dee(T1[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Yy[i]} ${n.version}, but the current version of ${Yy[i]} is v${T1[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function jee(e){return!!(e&&"load"in e)}function V8(e){return jee(e)?e:Oa.loader(e)}function W6e(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return ze(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Y6e(e,t,n={}){let i,s;ze(t)?(s=V8(n.loader),i=JSON.parse(await s.load(t))):i=t;const a=W6e(i),c=a.loader;(!s||c)&&(s=V8(n.loader??c));const d=await G8(a,s),f=await G8(n,s),u={...Uee(f,d),config:f_(f.config??{},d.config??{})};return await K6e(e,i,u,s)}async function G8(e,t){const n=ze(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=ze(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function X6e(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function K6e(e,t,n={},i){const s=n.theme?f_(C3e[n.theme],n.config??{}):n.config,a=qc(n.actions)?n.actions:Uee({},j6e,n.actions??{}),c={...$6e,...n.i18n},d=n.renderer??"canvas",f=n.logLevel??Oa.Warn,u=n.downloadFileName??"visualization",r=typeof e=="string"?document.querySelector(e):e;if(!r)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const F="vega-embed-style",{root:x,rootContainer:M}=X6e(r);if(!x.getElementById(F)){const R=document.createElement("style");R.id=F,R.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?D6e.toString():n.defaultStyle,M.appendChild(R)}}const h=H6e(t,n.mode);let p=z6e[h](t,s);if(h==="vega-lite"&&p.$schema){const F=Aee(p.$schema);Dee(T1.vega,`^${F.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${F.version}, but current version is v${T1.vega}.`)}r.classList.add("vega-embed"),a&&r.classList.add("has-actions"),r.innerHTML="";let _=r;if(a){const F=document.createElement("div");F.classList.add(V6e),r.appendChild(F),_=F}const l=n.patch;if(l&&(p=l instanceof Function?l(p):pE(p,l,!0,!1).newDocument),n.formatLocale&&Oa.formatLocale(n.formatLocale),n.timeFormatLocale&&Oa.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const F in n.expressionFunctions){const x=n.expressionFunctions[F];"fn"in x?Oa.expressionFunction(F,x.fn,x.visitor):x instanceof Function&&Oa.expressionFunction(F,x)}const{ast:b}=n,m=Oa.parse(p,h==="vega-lite"?{}:s,{ast:b}),E=new(n.viewClass||Oa.View)(m,{loader:i,logLevel:f,renderer:d,...b?{expr:Oa.expressionInterpreter??n.expr??Dxe}:{}});if(E.addSignalListener("autosize",(F,x)=>{const{type:M}=x;M=="fit-x"?(_.classList.add("fit-x"),_.classList.remove("fit-y")):M=="fit-y"?(_.classList.remove("fit-x"),_.classList.add("fit-y")):M=="fit"?_.classList.add("fit-x","fit-y"):_.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:F,tooltip:x}=n,M=F&&!jee(F)?F==null?void 0:F.baseURL:void 0,R=G6e(x)?x:new q3e({baseURL:M,...x===!0?{}:x}).call;E.tooltip(R)}let{hover:B}=n;if(B===void 0&&(B=h==="vega"),B){const{hoverSet:F,updateSet:x}=typeof B=="boolean"?{}:B;E.hover(F,x)}n&&(n.width!=null&&E.width(n.width),n.height!=null&&E.height(n.height),n.padding!=null&&E.padding(n.padding)),await E.initialize(_,n.bind).runAsync();let I;if(a!==!1){let F=r;if(n.defaultStyle!==!1||n.forceActionsMenu){const M=document.createElement("details");M.title=c.CLICK_TO_VIEW_ACTIONS,r.append(M),F=M;const R=document.createElement("summary");R.innerHTML=q6e,M.append(R),I=P=>{M.contains(P.target)||M.removeAttribute("open")},document.addEventListener("click",I)}const x=document.createElement("div");if(F.append(x),x.classList.add("vega-actions"),a===!0||a.export!==!1){for(const M of["svg","png"])if(a===!0||a.export===!0||a.export[M]){const R=c[`${M.toUpperCase()}_ACTION`],P=document.createElement("a"),C=je(n.scaleFactor)?n.scaleFactor[M]:n.scaleFactor;P.text=R,P.href="#",P.target="_blank",P.download=`${u}.${M}`,P.addEventListener("mousedown",async function(D){D.preventDefault();const j=await E.toImageURL(M,C);this.href=j}),x.append(P)}}if(a===!0||a.source!==!1){const M=document.createElement("a");M.text=c.SOURCE_ACTION,M.href="#",M.addEventListener("click",function(R){q8(pI(t),n.sourceHeader??"",n.sourceFooter??"",h),R.preventDefault()}),x.append(M)}if(h==="vega-lite"&&(a===!0||a.compiled!==!1)){const M=document.createElement("a");M.text=c.COMPILED_ACTION,M.href="#",M.addEventListener("click",function(R){q8(pI(p),n.sourceHeader??"",n.sourceFooter??"","vega"),R.preventDefault()}),x.append(M)}if(a===!0||a.editor!==!1){const M=n.editorUrl??"https://vega.github.io/editor/",R=document.createElement("a");R.text=c.EDITOR_ACTION,R.href="#",R.addEventListener("click",function(P){P6e(window,M,{config:s,mode:l?"vega":h,renderer:d,spec:pI(l?p:t)}),P.preventDefault()}),x.append(R)}}function k(){I&&document.removeEventListener("click",I),E.finalize()}return{view:E,spec:t,vgSpec:p,finalize:k,embedOptions:n}}const J6e=new Set(["width","height"]);var Q6e=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,s,a;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(s=i;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),i=a.length,i!==Object.keys(n).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=i;s--!==0;){var c=a[s];if(!e(t[c],n[c]))return!1}return!0}return t!==t&&n!==n};const Z6e=Jh(Q6e);function e4e(e,t){for(const[n,i]of Object.entries(t))i&&(i&&{}.toString.call(i)==="[object Function]"?i(e.data(n)):e.change(n,Vc().remove(()=>!0).insert(i)))}function f0(e={},t={},n=new Set){const i=Object.keys(e),s=Object.keys(t);return e===t||i.length===s.length&&i.filter(a=>!n.has(a)).every(a=>e[a]===t[a])}function H8(e,t){const n=Object.keys(t);for(const i of n)try{e.removeSignalListener(i,t[i])}catch(s){console.warn("Cannot remove invalid signal listener.",s)}return n.length>0}function u0(e,t){const n=Object.keys(t);for(const i of n)try{e.addSignalListener(i,t[i])}catch(s){console.warn("Cannot add invalid signal listener.",s)}return n.length>0}function t4e(e){return new Set(e.flatMap(t=>Object.keys(t)))}function n4e(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i="width"in e||"width"in t,s="height"in e||"height"in t;return i&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),s&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),[...t4e([e,t])].filter(c=>c!=="width"&&c!=="height").some(c=>!(c in e)||!(c in t)||!Z6e(e[c],t[c]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function W8(e,t){const{width:n,height:i}=t;return typeof n<"u"&&typeof i<"u"?{...e,width:n,height:i}:typeof n<"u"?{...e,width:n}:typeof i<"u"?{...e,height:i}:e}var i4e=ua("<div></div>");function s4e(e,t){Lc(t,!1);let n=At(t,"options",8),i=At(t,"spec",8),s=At(t,"view",12),a=At(t,"signalListeners",24,()=>({})),c=At(t,"data",24,()=>({}));const d=yx();let f=Un(void 0),u=Un({}),r=Un({}),h=Un({}),p=Un({}),_=Un();bz(()=>{b()});async function l(){b();try{Ut(f,await Y6e(De(_),i(),n())),s(De(f).view),u0(s(),a())&&s().runAsync(),E(s())}catch(k){m(k)}}function b(){De(f)&&(De(f).finalize(),Ut(f,void 0),s(void 0))}function m(k){d("onError",{error:k}),console.warn(k)}function E(k){B(),d("onNewView",{view:k})}async function B(){c()&&Object.keys(c()).length>0&&De(f)!==void 0&&(s(De(f).view),e4e(s(),c()),await s().resize().runAsync())}rl(()=>(xn(c()),De(p)),()=>{f0(c(),De(p))||B(),Ut(p,c())}),rl(()=>(De(_),xn(n()),De(u),xn(i()),De(h),xn(a()),De(r),De(f),xn(s()),u0),()=>{if(De(_)!==void 0){if(!f0(n(),De(u),J6e))l();else{const k=n4e(W8(i(),n()),W8(De(h),De(u))),F=a(),x=De(r);if(k){if(k.isExpensive)l();else if(De(f)!==void 0){const M=!f0(F,x);s(De(f).view),k.width!==!1&&s().width(k.width),k.height!==!1&&s().height(k.height),M&&(x&&H8(s(),x),F&&u0(s(),F)),s().runAsync()}}else!f0(F,x)&&De(f)!==void 0&&(s(De(f).view),x&&H8(s(),x),F&&u0(s(),F),s().runAsync())}Ut(u,n()),Ut(r,a()),Ut(h,i())}}),em(),Kh();var I=i4e();wz(I,k=>Ut(_,k),()=>De(_)),_s(e,I),Pc()}function r4e(e,t){Lc(t,!1);const n=Un();let i=At(t,"spec",8),s=At(t,"options",24,()=>({})),a=At(t,"data",24,()=>({})),c=At(t,"signalListeners",24,()=>({})),d=At(t,"view",28,()=>{});const f="vega-lite";rl(()=>xn(s()),()=>{Ut(n,{...s(),mode:f})}),em(),s4e(e,{get spec(){return i()},get data(){return a()},get signalListeners(){return c()},get options(){return De(n)},get view(){return d()},set view(u){d(u)},$$events:{onNewView(u){Gr.call(this,t,u)},onError(u){Gr.call(this,t,u)}},$$legacy:!0}),Pc()}var a4e=ua('<div class="container svelte-mufgje"><!></div>');function o4e(e,t){Lc(t,!1);const n=Un(),i=Un(),s=yx();let a=At(t,"bins",24,()=>[{bin:[0,10],count:200,filteredCount:150},{bin:[10,20],count:300,filteredCount:25},{bin:[20,30],count:72,filteredCount:12}]),c=At(t,"title",8,""),d=At(t,"width",8,400),f=At(t,"height",8,125),u=At(t,"dimLabel",8,""),r=At(t,"labelColor",8,"white"),h=At(t,"backgroundBarColor",8,"hsla(0, 0%, 100%, 0.07)"),p=At(t,"foregroundBarColor",8,"crimson"),_=At(t,"onlyFiltered",8,!1),l=At(t,"type",8,"quantitative"),b=At(t,"timeUnit",8,""),m=Un(),E=Un(!1);rl(()=>xn(a()),()=>{Ut(n,{table:a()})}),rl(()=>(xn(d()),xn(f()),xn(c()),xn(b()),xn(l()),xn(u()),xn(r()),xn(_()),xn(h()),xn(p())),()=>{Ut(i,{$schema:"https://vega.github.io/schema/vega-lite/v5.json",description:"A simple bar chart with embedded data.",data:{name:"table"},background:"transparent",width:d(),height:f(),title:{text:c(),anchor:"start",color:"white"},layer:[{params:[{name:"select",select:{type:"interval",encodings:["x"]}}],mark:{type:"bar",cursor:"col-resize"},encoding:{x:{...b()?{timeUnit:b()}:{},field:"bin[0]",type:l(),bin:{binned:!0},axis:{title:u(),titleColor:r(),labelColor:r()}},x2:{field:"bin[1]"},y:{field:_()?"filteredCount":"count",type:"quantitative",axis:{title:"Count",titleColor:r(),tickCount:3,labelColor:r()}},color:{value:h()}}},{mark:{type:"bar"},encoding:{size:{legend:null},x:{...b()?{timeUnit:b()}:{},field:"bin[0]",type:l(),bin:{binned:!0},title:""},x2:{field:"bin[1]"},y:{field:"filteredCount",type:"quantitative"},color:{value:p()}}}]})}),rl(()=>(De(m),De(E)),()=>{De(m)&&!De(E)&&(De(m).addSignalListener("select",(...k)=>{s("select",k[1]["bin\\.0"]??null)}),Ut(E,!0))}),em(),Kh();var B=a4e(),I=Sn(B);r4e(I,{get view(){return De(m)},set view(k){Ut(m,k)},get data(){return De(n)},get spec(){return De(i)},options:{tooltip:!0,actions:!1,theme:"vox"},$$legacy:!0}),uu("click",B,function(k){Gr.call(this,t,k)}),uu("mousedown",B,function(k){Gr.call(this,t,k)}),uu("mouseup",B,function(k){Gr.call(this,t,k)}),uu("mouseenter",B,function(k){Gr.call(this,t,k)}),uu("mouseleave",B,function(k){Gr.call(this,t,k)}),_s(e,B),Pc()}function l4e(e,t){Lc(t,!1);const n=Un(),i=yx();let s=At(t,"falcon",8),a=At(t,"spec",8),c=At(t,"title",8,""),d=At(t,"width",8,350),f=At(t,"height",8,100),u=At(t,"countLabel",8,"Count"),r=At(t,"dimLabel",8,""),h=At(t,"onlyFiltered",8,!1),p=At(t,"type",8,"quantitative"),_=At(t,"timeUnit",8,""),l=Un(),b=Un();I1(async()=>{Ut(l,await s().view1D(a(),E=>Ut(b,E))),await s().link()}),bz(async()=>await De(l).detach());function m(E){let B=[];if(E)for(let I=0;I<E.bin.length;(I+=1)-1)B.push({bin:[E.bin[I].binStart,E.bin[I].binEnd],count:E.total[I],filteredCount:E.filter[I]});return B}rl(()=>De(b),()=>{Ut(n,m(De(b)))}),em(),Kh(),o4e(e,{get bins(){return De(n)},get timeUnit(){return _()},get type(){return p()},get title(){return c()},get width(){return d()},get height(){return f()},get countLabel(){return u()},get dimLabel(){return r()},get onlyFiltered(){return h()},$$events:{select:async E=>{E.detail?De(l).select(E.detail):De(l).select(),i("change",!0)},mouseenter:async()=>{await De(l).activate(),console.log("activated",a().name)},mouseleave(E){Gr.call(this,t,E)},mouseup(E){Gr.call(this,t,E)},mousedown(E){Gr.call(this,t,E)},click(E){Gr.call(this,t,E)}}}),Pc()}var c4e=ua('<div><div style="font-size: 10px;"> </div> <div><canvas></canvas></div></div>');function d4e(e,t){Lc(t,!1);const n=Un(),i=Un();let s=At(t,"grid",8),a=At(t,"rows",8),c=At(t,"cols",8),d=At(t,"square",8,5);const f=["#000000","#0074D9","#FF4136","#2ECC40","#FFDC00","#AAAAAA","#F012BE","#FF851B","#7FDBFF","#B10DC9"];let u=Un(),r;I1(()=>{r=De(u).getContext("2d"),r.fillStyle=f[0],r.fillRect(0,0,De(n),De(i));const m=Array.from(s());for(let E=0;E<a();E+=1){const B=Array.from(m[E]);for(let I=0;I<c();I+=1){const k=Number(B[I]);k!==0&&(r.fillStyle=f[k],r.fillRect(E*d(),I*d(),d(),d()))}}}),rl(()=>(xn(d()),xn(c())),()=>{Ut(n,d()*c())}),rl(()=>(xn(d()),xn(a())),()=>{Ut(i,d()*a())}),em(),Kh();var h=c4e(),p=Sn(h),_=Sn(p),l=qi(p,2),b=Sn(l);wz(b,m=>Ut(u,m),()=>De(u)),Iu(()=>{Rd(_,`[${a()??""} x ${c()??""}]`),TF(b,"width",De(n)),TF(b,"height",De(i))}),_s(e,h),Pc()}var f4e=ua("<div>[<b>example</b> </div>"),u4e=ua("<div>[<b>test</b>]</div>"),h4e=ua("<div>[<b> </b> </div>"),_4e=ua('<a target="_blank" class="svelte-x1yc8n"><div class="outer svelte-x1yc8n"><div style="display:flex; gap:5px; flex-wrap: wrap;"><div>[<b>id</b> </div> <div>[<b>dataset</b> </div> <!> <!></div> <div style="display: flex; gap: 5px; align-items: center; margin-top: 5px;"><div><!></div> <div>→</div> <div><!></div></div></div></a>');function p4e(e,t){Lc(t,!1);let n=At(t,"data",8),i=At(t,"fields",8);const s=d4e;Kh();var a=_4e(),c=Sn(a),d=Sn(c),f=Sn(d),u=qi(Sn(f),2),r=qi(f,2),h=qi(Sn(r),2),p=qi(r,2);h0(p,()=>n().evidence,M=>{var R=f4e(),P=qi(Sn(R),2);Iu(()=>Rd(P,`: ${n().example??""}]`)),_s(M,R)},M=>{var R=u4e();_s(M,R)});var _=qi(p,2);bF(_,1,i,wF,(M,R)=>{var P=h4e(),C=qi(Sn(P)),D=Sn(C),j=qi(C);Iu(()=>Rd(j,`: ${n()[De(R)].toString().slice(0,5)??""}]`)),Iu(()=>Rd(D,De(R))),_s(M,P)});var l=qi(d,2),b=Sn(l),m=Sn(b),E=fy(()=>Number(n().input_rows)),B=fy(()=>Number(n().input_cols));s(m,{get grid(){return n().input},get rows(){return De(E)},get cols(){return De(B)}});var I=qi(b,4),k=Sn(I),F=fy(()=>Number(n().output_rows)),x=fy(()=>Number(n().output_cols));s(k,{get grid(){return n().output},get rows(){return De(F)},get cols(){return De(x)}}),Iu(()=>{TF(a,"href",`https://arcprize.org/play?task=${n().id??""}`),Rd(u,`: ${n().id??""}]`),Rd(h,`: ${(n().eval_set?"eval":"train")??""}]`)}),_s(e,a),Pc()}var y4e=ua("<div><!></div>"),g4e=ua('<div><div>Total count: <i> </i></div> <!> <div></div></div> <div style="display: flex; gap: 10px; flex-wrap: wrap; align-content: flex-start;"><!></div>',1),m4e=ua('<div style="display: flex; justify-content: center;"><div><button>Click to show more</button></div></div>'),w4e=ua('<main style="display: flex; gap: 10px;" class="svelte-1qcq2e9"><!></main> <!>',1);function b4e(e,t){Lc(t,!1);let n=Un(),i=Un(void 0),s=Un(),a=!1;I1(async()=>{const E=await eA.fromParquetFile("/metrics_small.parquet");Ut(n,new zye(E)),await De(n).view0D(B=>Ut(i,B.filter)),Ut(s,await De(n).entries({offset:0,length:c})),a=!0});const c=12;let d=Un(c);const f=300,u=20,r=["input_squares","output_squares","input_entropy","output_entropy","input_gzip","output_gzip"],h=r.map(E=>({type:"continuous",name:E,resolution:f,bins:u}));function p(E,B){a&&(a=!1,De(n).entries({length:E,offset:B}).then(I=>{Ut(s,I),a=!0}))}Kh();var _=w4e(),l=yb(_),b=Sn(l);h0(b,()=>De(n),E=>{var B=g4e(),I=yb(B),k=Sn(I),F=qi(Sn(k));Qte(F,"color","crimson");var x=Sn(F),M=qi(k,2);bF(M,1,()=>h,wF,(C,D)=>{var j=y4e(),$=Sn(j);l4e($,{get falcon(){return De(n)},get spec(){return De(D)},get title(){return De(D).name},$$events:{change:()=>{p(c,0),Ut(d,c)}}}),_s(C,j)});var R=qi(I,2),P=Sn(R);h0(P,()=>De(s),C=>{var D=pP(),j=yb(D);bF(j,1,()=>Array.from(De(s)),wF,($,W)=>{var H=pP(),G=yb(H);Hte(G,()=>`${De(W).id}-${De(W).example}`,z=>{p4e(z,{get data(){return De(W)},fields:r})}),_s($,H)},$=>{var W=$te("No data");_s($,W)}),_s(C,D)}),Iu(()=>Rd(x,De(i))),_s(E,B)});var m=qi(l,2);h0(m,()=>De(s),E=>{var B=m4e(),I=Sn(B),k=Sn(I);uu("click",k,()=>{Ut(d,De(d)+100),p(De(d),0)}),_s(E,B)}),_s(e,_),Pc()}Vte(b4e,{target:document.getElementById("app")})});export default T4e();
